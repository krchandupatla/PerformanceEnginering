<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="561">
  <HTTPTask id="2599" hostname="aa-pt6245.dev.accela.com:5443" path="https://aa-pt6245.dev.accela.com:5443/portlets/framework/includes/javascript/ext-2.0.2/ext-all.js" url="https://aa-pt6245.dev.accela.com:5443/portlets/framework/includes/javascript/ext-2.0.2/ext-all.js" ip="13.93.163.237" port="5443" connectionId="569" origin="Primary" frame="1" startDateTime="2017-08-28T11:20:19.431-07:00" startTime="1030041453" endTime="1030041453">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Accept" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdCwgKi8qO3E9MC44</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Referer" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cHM6Ly9hYS1wdDYyNDUuZGV2LmFjY2VsYS5jb206NTQ0My9wb3J0bGV0cy9wcm9mZXNzaW9uYWwvcmVmL3JlZlByb2Zlc3Npb25hbExpc3QuZG8/bW9kZT1xdWlja1F1ZXJ5Jmxvb2t1cD1mYWxzZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cookie" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SlNFU1NJT05JRD1PSSt4MGhkSjBQdjFaK0toNUZsMWJWdlg7IF9fY2ZkdWlkPWRiNjBkNWU3ODRkYmRlN2NhNTlkZGVjNmUzYWNkYzk2MjE1MDI0MzA3NzM7IF9wZW5kb19hY2NvdW50SWQuNTY3YTE0NmUtNjVhYy00NmE1LTdhMTMtYjMyNDc0YTRmNjdiPUZMQUdTVEFGRjsgX3BlbmRvX3Zpc2l0b3JJZC41NjdhMTQ2ZS02NWFjLTQ2YTUtN2ExMy1iMzI0NzRhNGY2N2I9ZTlhZjFmYTUxNzFhZWQwYWRiZWUwMDI4NGE0NTUwODY0NjVhYTMxZmMzNjU2M2VkYWJmNjQ2ZTExZDU1YTYwODgwOTVhMjNlZmVlZTBjYTU2NzAzZDEwOTY5ZDNhYzU0ZTk3OWFiMjExODkyZWU1NmRlZmM5MWM0Njg0NzZhMDg7IF9wZW5kb19tZXRhLjU2N2ExNDZlLTY1YWMtNDZhNS03YTEzLWIzMjQ3NGE0ZjY3Yj0zMzk5OTk2NjE3OyBKU0VTU0lPTklEPSoqKioqKioqKioqKioqKioqKioqKioqKioqKjsgMDEtSmFuLTE5NzAgMDA6MDA6MTAgR01UOyBMQVNURVNUX1JFUVVFU1RfVElNRT0xNTAzOTQ0MjQwNzc0OyBob3N0U2lnbk9uPXRydWU7IGdfY3VycmVudF9sYW5ndWFnZV9leHQ9ZW5fVVM7IExBVEVTVF9XRUJfU0VSVkVSPTEwLjEuMC42OyBMQVRFU1RfU0VTU0lPTl9JRD1PSSt4MGhkSjBQdjFaK0toNUZsMWJWdlg7IEFDQXV0aD05OTE4NDQ3MDE1MDc4ODU2NDY0OTU2OTM1NDI5Mzg5NDYxOTQwOTc2MzMxNDg2MDc5NjMzMzEzMjIxMjYwMTIwNTMzODE2NTYwOTUyODc4MTk3OTA1MTQxMDUxODg5NjE2OTAyMjc5Mzc3ODg0NzYxOTY1Nzk1ODgzNzY5NjMyMjsgQUNTaWduT25Nb2R1bGU9U1NPU3RhbmRhcmQ7IEFBUGVyc2lzdExvZ2luU2VydlByb3ZDb2RlPUZMQUdTVEFGRjsgTG9naW5TZXJ2UHJvdkNvZGU0TXVsdGlBZ2VuY3k9RkxBR1NUQUZGOyBMb2dpblVzZXJuYW1lNE11bHRpQWdlbmN5PTE3OUREMTNBMTg2MDI4RjQ7IEFDU2lnbm9mZj0iaHR0cHM6Ly9hYS1wdDYyNDUuZGV2LmFjY2VsYS5jb206NTQ0My9wb3J0bGV0cy9zZWN1cml0eS9zaWdub3V0LmRvIjsgQUNTd2l0Y2hBZ2VuY3k9Imh0dHBzOi8vYWEtcHQ2MjQ1LmRldi5hY2NlbGEuY29tOjU0NDMvcG9ydGxldHMvY29tbW9ucy9zc28vYmxhbmsuanNwIg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YWEtcHQ2MjQ1LmRldi5hY2NlbGEuY29tOjU0NDM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Q2xvc2U=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIGh0dHBzOi8vYWEtcHQ2MjQ1LmRldi5hY2NlbGEuY29tOjU0NDMvcG9ydGxldHMvZnJhbWV3b3JrL2luY2x1ZGVzL2phdmFzY3JpcHQvZXh0LTIuMC4yL2V4dC1hbGwuanMgSFRUUC8xLjENCkFjY2VwdDogYXBwbGljYXRpb24vamF2YXNjcmlwdCwgKi8qO3E9MC44DQpSZWZlcmVyOiBodHRwczovL2FhLXB0NjI0NS5kZXYuYWNjZWxhLmNvbTo1NDQzL3BvcnRsZXRzL3Byb2Zlc3Npb25hbC9yZWYvcmVmUHJvZmVzc2lvbmFsTGlzdC5kbz9tb2RlPXF1aWNrUXVlcnkmbG9va3VwPWZhbHNlDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXT1c2NDsgVHJpZGVudC83LjA7IHJ2OjExLjApIGxpa2UgR2Vja28NCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQ29va2llOiBKU0VTU0lPTklEPU9JK3gwaGRKMFB2MVorS2g1RmwxYlZ2WDsgX19jZmR1aWQ9ZGI2MGQ1ZTc4NGRiZGU3Y2E1OWRkZWM2ZTNhY2RjOTYyMTUwMjQzMDc3MzsgX3BlbmRvX2FjY291bnRJZC41NjdhMTQ2ZS02NWFjLTQ2YTUtN2ExMy1iMzI0NzRhNGY2N2I9RkxBR1NUQUZGOyBfcGVuZG9fdmlzaXRvcklkLjU2N2ExNDZlLTY1YWMtNDZhNS03YTEzLWIzMjQ3NGE0ZjY3Yj1lOWFmMWZhNTE3MWFlZDBhZGJlZTAwMjg0YTQ1NTA4NjQ2NWFhMzFmYzM2NTYzZWRhYmY2NDZlMTFkNTVhNjA4ODA5NWEyM2VmZWVlMGNhNTY3MDNkMTA5NjlkM2FjNTRlOTc5YWIyMTE4OTJlZTU2ZGVmYzkxYzQ2ODQ3NmEwODsgX3BlbmRvX21ldGEuNTY3YTE0NmUtNjVhYy00NmE1LTdhMTMtYjMyNDc0YTRmNjdiPTMzOTk5OTY2MTc7IEpTRVNTSU9OSUQ9KioqKioqKioqKioqKioqKioqKioqKioqKioqOyAwMS1KYW4tMTk3MCAwMDowMDoxMCBHTVQ7IExBU1RFU1RfUkVRVUVTVF9USU1FPTE1MDM5NDQyNDA3NzQ7IGhvc3RTaWduT249dHJ1ZTsgZ19jdXJyZW50X2xhbmd1YWdlX2V4dD1lbl9VUzsgTEFURVNUX1dFQl9TRVJWRVI9MTAuMS4wLjY7IExBVEVTVF9TRVNTSU9OX0lEPU9JK3gwaGRKMFB2MVorS2g1RmwxYlZ2WDsgQUNBdXRoPTk5MTg0NDcwMTUwNzg4NTY0NjQ5NTY5MzU0MjkzODk0NjE5NDA5NzYzMzE0ODYwNzk2MzMzMTMyMjEyNjAxMjA1MzM4MTY1NjA5NTI4NzgxOTc5MDUxNDEwNTE4ODk2MTY5MDIyNzkzNzc4ODQ3NjE5NjU3OTU4ODM3Njk2MzIyOyBBQ1NpZ25Pbk1vZHVsZT1TU09TdGFuZGFyZDsgQUFQZXJzaXN0TG9naW5TZXJ2UHJvdkNvZGU9RkxBR1NUQUZGOyBMb2dpblNlcnZQcm92Q29kZTRNdWx0aUFnZW5jeT1GTEFHU1RBRkY7IExvZ2luVXNlcm5hbWU0TXVsdGlBZ2VuY3k9MTc5REQxM0ExODYwMjhGNDsgQUNTaWdub2ZmPSJodHRwczovL2FhLXB0NjI0NS5kZXYuYWNjZWxhLmNvbTo1NDQzL3BvcnRsZXRzL3NlY3VyaXR5L3NpZ25vdXQuZG8iOyBBQ1N3aXRjaEFnZW5jeT0iaHR0cHM6Ly9hYS1wdDYyNDUuZGV2LmFjY2VsYS5jb206NTQ0My9wb3J0bGV0cy9jb21tb25zL3Nzby9ibGFuay5qc3AiDQpIb3N0OiBhYS1wdDYyNDUuZGV2LmFjY2VsYS5jb206NTQ0Mw0KQ29ubmVjdGlvbjogQ2xvc2UNCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
        <HTTPCookies>
          <HTTPHeaderEntity name="JSESSIONID" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>T0kreDBoZEowUHYxWitLaDVGbDFiVnZY</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="__cfduid" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZGI2MGQ1ZTc4NGRiZGU3Y2E1OWRkZWM2ZTNhY2RjOTYyMTUwMjQzMDc3Mw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="_pendo_accountId.567a146e-65ac-46a5-7a13-b32474a4f67b" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RkxBR1NUQUZG</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="_pendo_visitorId.567a146e-65ac-46a5-7a13-b32474a4f67b" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZTlhZjFmYTUxNzFhZWQwYWRiZWUwMDI4NGE0NTUwODY0NjVhYTMxZmMzNjU2M2VkYWJmNjQ2ZTExZDU1YTYwODgwOTVhMjNlZmVlZTBjYTU2NzAzZDEwOTY5ZDNhYzU0ZTk3OWFiMjExODkyZWU1NmRlZmM5MWM0Njg0NzZhMDg=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="_pendo_meta.567a146e-65ac-46a5-7a13-b32474a4f67b" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MzM5OTk5NjYxNw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="JSESSIONID" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>KioqKioqKioqKioqKioqKioqKioqKioqKioq</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="01-Jan-1970 00:00:10 GMT; LASTEST_REQUEST_TIME" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTUwMzk0NDI0MDc3NA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="hostSignOn" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dHJ1ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="g_current_language_ext" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW5fVVM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="LATEST_WEB_SERVER" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTAuMS4wLjY=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="LATEST_SESSION_ID" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>T0kreDBoZEowUHYxWitLaDVGbDFiVnZY</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ACAuth" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>OTkxODQ0NzAxNTA3ODg1NjQ2NDk1NjkzNTQyOTM4OTQ2MTk0MDk3NjMzMTQ4NjA3OTYzMzMxMzIyMTI2MDEyMDUzMzgxNjU2MDk1Mjg3ODE5NzkwNTE0MTA1MTg4OTYxNjkwMjI3OTM3Nzg4NDc2MTk2NTc5NTg4Mzc2OTYzMjI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ACSignOnModule" index="12">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>U1NPU3RhbmRhcmQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="AAPersistLoginServProvCode" index="13">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RkxBR1NUQUZG</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="LoginServProvCode4MultiAgency" index="14">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RkxBR1NUQUZG</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="LoginUsername4MultiAgency" index="15">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTc5REQxM0ExODYwMjhGNA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ACSignoff" index="16">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Imh0dHBzOi8vYWEtcHQ2MjQ1LmRldi5hY2NlbGEuY29tOjU0NDMvcG9ydGxldHMvc2VjdXJpdHkvc2lnbm91dC5kbyI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ACSwitchAgency" index="17">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Imh0dHBzOi8vYWEtcHQ2MjQ1LmRldi5hY2NlbGEuY29tOjU0NDMvcG9ydGxldHMvY29tbW9ucy9zc28vYmxhbmsuanNwIg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
        </HTTPCookies>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Server" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QXBhY2hlLUNveW90ZS8xLjE=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cache-Control" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>cHJpdmF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Expires" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMCBVVEM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-XSS-Protection" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Set-Cookie" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TEFTVEVTVF9SRVFVRVNUX1RJTUU9MTUwMzk0NDI0MjAyNzsgRG9tYWluPWRldi5hY2NlbGEuY29tOyBQYXRoPS87IFNlY3VyZSxMQVRFU1RfV0VCX1NFUlZFUj0xMC4xLjAuNjsgRG9tYWluPWRldi5hY2NlbGEuY29tOyBQYXRoPS87IFNlY3VyZSxMQVRFU1RfU0VTU0lPTl9JRD1PSSt4MGhkSjBQdjFaK0toNUZsMWJWdlg7IERvbWFpbj1kZXYuYWNjZWxhLmNvbTsgUGF0aD0vOyBTZWN1cmU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Vy8iNTE0NzgxLTE0OTg3NDcxNDAwMDAi</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VGh1LCAyOSBKdW4gMjAxNyAxNDozOTowMCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Type" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>dGV4dC9qYXZhc2NyaXB0</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Encoding" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Vary" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="11">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW9uLCAyOCBBdWcgMjAxNyAxODoxNzoyMSBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="12">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Y2xvc2U=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIE9LDQpTZXJ2ZXI6IEFwYWNoZS1Db3lvdGUvMS4xDQpDYWNoZS1Db250cm9sOiBwcml2YXRlDQpFeHBpcmVzOiBUaHUsIDAxIEphbiAxOTcwIDAwOjAwOjAwIFVUQw0KWC1YU1MtUHJvdGVjdGlvbjogMA0KU2V0LUNvb2tpZTogTEFTVEVTVF9SRVFVRVNUX1RJTUU9MTUwMzk0NDI0MjAyNzsgRG9tYWluPWRldi5hY2NlbGEuY29tOyBQYXRoPS87IFNlY3VyZSxMQVRFU1RfV0VCX1NFUlZFUj0xMC4xLjAuNjsgRG9tYWluPWRldi5hY2NlbGEuY29tOyBQYXRoPS87IFNlY3VyZSxMQVRFU1RfU0VTU0lPTl9JRD1PSSt4MGhkSjBQdjFaK0toNUZsMWJWdlg7IERvbWFpbj1kZXYuYWNjZWxhLmNvbTsgUGF0aD0vOyBTZWN1cmUNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpFVGFnOiBXLyI1MTQ3ODEtMTQ5ODc0NzE0MDAwMCINCkxhc3QtTW9kaWZpZWQ6IFRodSwgMjkgSnVuIDIwMTcgMTQ6Mzk6MDAgR01UDQpDb250ZW50LVR5cGU6IHRleHQvamF2YXNjcmlwdA0KQ29udGVudC1FbmNvZGluZzogZ3ppcA0KVmFyeTogQWNjZXB0LUVuY29kaW5nDQpEYXRlOiBNb24sIDI4IEF1ZyAyMDE3IDE4OjE3OjIxIEdNVA0KQ29ubmVjdGlvbjogY2xvc2UNCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>LyoNCiAqIEV4dCBKUyBMaWJyYXJ5IDIuMC4yDQogKiBDb3B5cmlnaHQoQykgMjAwNi0yMDEwLCBFeHQgSlMsIExMQy4NCiAqIGxpY2Vuc2luZ0BleHRqcy5jb20NCiAqIA0KICogaHR0cDovL2V4dGpzLmNvbS9saWNlbnNlDQogKi8NCg0KRXh0LkRvbUhlbHBlcj1mdW5jdGlvbigpe3ZhciBMPW51bGw7dmFyIEY9L14oPzpicnxmcmFtZXxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHJhbmdlfHNwYWNlcnx3YnJ8YXJlYXxwYXJhbXxjb2wpJC9pO3ZhciBCPS9edGFibGV8dGJvZHl8dHJ8dGQkL2k7dmFyIEE9ZnVuY3Rpb24oVCl7aWYodHlwZW9mIFQ9PSJzdHJpbmciKXtyZXR1cm4gVH12YXIgTz0iIjtpZihFeHQuaXNBcnJheShUKSl7Zm9yKHZhciBSPTAsUD1ULmxlbmd0aDtSPFA7UisrKXtPKz1BKFRbUl0pfXJldHVybiBPfWlmKCFULnRhZyl7VC50YWc9ImRpdiJ9Tys9IjwiK1QudGFnO2Zvcih2YXIgTiBpbiBUKXtpZihOPT0idGFnInx8Tj09ImNoaWxkcmVuInx8Tj09ImNuInx8Tj09Imh0bWwifHx0eXBlb2YgVFtOXT09ImZ1bmN0aW9uIil7Y29udGludWV9aWYoTj09InN0eWxlIil7dmFyIFM9VFsic3R5bGUiXTtpZih0eXBlb2YgUz09ImZ1bmN0aW9uIil7Uz1TLmNhbGwoKX1pZih0eXBlb2YgUz09InN0cmluZyIpe08rPSIgc3R5bGU9XCIiK1MrIlwiIn1lbHNle2lmKHR5cGVvZiBTPT0ib2JqZWN0Iil7Tys9IiBzdHlsZT1cIiI7Zm9yKHZhciBRIGluIFMpe2lmKHR5cGVvZiBTW1FdIT0iZnVuY3Rpb24iKXtPKz1RKyI6IitTW1FdKyI7In19Tys9IlwiIn19fWVsc2V7aWYoTj09ImNscyIpe08rPSIgY2xhc3M9XCIiK1RbImNscyJdKyJcIiJ9ZWxzZXtpZihOPT0iaHRtbEZvciIpe08rPSIgZm9yPVwiIitUWyJodG1sRm9yIl0rIlwiIn1lbHNle08rPSIgIitOKyI9XCIiK1RbTl0rIlwiIn19fX1pZihGLnRlc3QoVC50YWcpKXtPKz0iLz4ifWVsc2V7Tys9Ij4iO3ZhciBVPVQuY2hpbGRyZW58fFQuY247aWYoVSl7Tys9QShVKX1lbHNle2lmKFQuaHRtbCl7Tys9VC5odG1sfX1PKz0iPC8iK1QudGFnKyI+In1yZXR1cm4gT307dmFyIE09ZnVuY3Rpb24oVCxPKXt2YXIgUztpZihFeHQuaXNBcnJheShUKSl7Uz1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7Zm9yKHZhciBSPTAsUD1ULmxlbmd0aDtSPFA7UisrKXtNKFRbUl0sUyl9fWVsc2V7aWYodHlwZW9mIFQ9PSJzdHJpbmcpIil7Uz1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShUKX1lbHNle1M9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChULnRhZ3x8ImRpdiIpO3ZhciBRPSEhUy5zZXRBdHRyaWJ1dGU7Zm9yKHZhciBOIGluIFQpe2lmKE49PSJ0YWcifHxOPT0iY2hpbGRyZW4ifHxOPT0iY24ifHxOPT0iaHRtbCJ8fE49PSJzdHlsZSJ8fHR5cGVvZiBUW05dPT0iZnVuY3Rpb24iKXtjb250aW51ZX1pZihOPT0iY2xzIil7Uy5jbGFzc05hbWU9VFsiY2xzIl19ZWxzZXtpZihRKXtTLnNldEF0dHJpYnV0ZShOLFRbTl0pfWVsc2V7U1tOXT1UW05dfX19RXh0LkRvbUhlbHBlci5hcHBseVN0eWxlcyhTLFQuc3R5bGUpO3ZhciBVPVQuY2hpbGRyZW58fFQuY247aWYoVSl7TShVLFMpfWVsc2V7aWYoVC5odG1sKXtTLmlubmVySFRNTD1ULmh0bWx9fX19aWYoTyl7Ty5hcHBlbmRDaGlsZChTKX1yZXR1cm4gU307dmFyIEk9ZnVuY3Rpb24oUyxRLFAsUil7TC5pbm5lckhUTUw9W1EsUCxSXS5qb2luKCIiKTt2YXIgTj0tMSxPPUw7d2hpbGUoKytOPFMpe089Ty5maXJzdENoaWxkfXJldHVybiBPfTt2YXIgSj0iPHRhYmxlPiIsRT0iPC90YWJsZT4iLEM9SisiPHRib2R5PiIsSz0iPC90Ym9keT4iK0UsSD1DKyI8dHI+IixEPSI8L3RyPiIrSzt2YXIgRz1mdW5jdGlvbihOLE8sUSxQKXtpZighTCl7TD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKX12YXIgUjt2YXIgUz1udWxsO2lmKE49PSJ0ZCIpe2lmKE89PSJhZnRlcmJlZ2luInx8Tz09ImJlZm9yZWVuZCIpe3JldHVybiB9aWYoTz09ImJlZm9yZWJlZ2luIil7Uz1RO1E9US5wYXJlbnROb2RlfWVsc2V7Uz1RLm5leHRTaWJsaW5nO1E9US5wYXJlbnROb2RlfVI9SSg0LEgsUCxEKX1lbHNle2lmKE49PSJ0ciIpe2lmKE89PSJiZWZvcmViZWdpbiIpe1M9UTtRPVEucGFyZW50Tm9kZTtSPUkoMyxDLFAsSyl9ZWxzZXtpZihPPT0iYWZ0ZXJlbmQiKXtTPVEubmV4dFNpYmxpbmc7UT1RLnBhcmVudE5vZGU7Uj1JKDMsQyxQLEspfWVsc2V7aWYoTz09ImFmdGVyYmVnaW4iKXtTPVEuZmlyc3RDaGlsZH1SPUkoNCxILFAsRCl9fX1lbHNle2lmKE49PSJ0Ym9keSIpe2lmKE89PSJiZWZvcmViZWdpbiIpe1M9UTtRPVEucGFyZW50Tm9kZTtSPUkoMixKLFAsRSl9ZWxzZXtpZihPPT0iYWZ0ZXJlbmQiKXtTPVEubmV4dFNpYmxpbmc7UT1RLnBhcmVudE5vZGU7Uj1JKDIsSixQLEUpfWVsc2V7aWYoTz09ImFmdGVyYmVnaW4iKXtTPVEuZmlyc3RDaGlsZH1SPUkoMyxDLFAsSyl9fX1lbHNle2lmKE89PSJiZWZvcmViZWdpbiJ8fE89PSJhZnRlcmVuZCIpe3JldHVybiB9aWYoTz09ImFmdGVyYmVnaW4iKXtTPVEuZmlyc3RDaGlsZH1SPUkoMixKLFAsRSl9fX1RLmluc2VydEJlZm9yZShSLFMpO3JldHVybiBSfTtyZXR1cm57dXNlRG9tOmZhbHNlLG1hcmt1cDpmdW5jdGlvbihOKXtyZXR1cm4gQShOKX0sYXBwbHlTdHlsZXM6ZnVuY3Rpb24oUCxRKXtpZihRKXtQPUV4dC5mbHkoUCk7aWYodHlwZW9mIFE9PSJzdHJpbmciKXt2YXIgTz0vXHM/KFthLXpcLV0qKVw6XHM/KFteO10qKTs/L2dpO3ZhciBSO3doaWxlKChSPU8uZXhlYyhRKSkhPW51bGwpe1Auc2V0U3R5bGUoUlsxXSxSWzJdKX19ZWxzZXtpZih0eXBlb2YgUT09Im9iamVjdCIpe2Zvcih2YXIgTiBpbiBRKXtQLnNldFN0eWxlKE4sUVtOXSl9fWVsc2V7aWYodHlwZW9mIFE9PSJmdW5jdGlvbiIpe0V4dC5Eb21IZWxwZXIuYXBwbHlTdHlsZXMoUCxRLmNhbGwoKSl9fX19fSxpbnNlcnRIdG1sOmZ1bmN0aW9uKFAsUixRKXtQPVAudG9Mb3dlckNhc2UoKTtpZihSLmluc2VydEFkamFjZW50SFRNTCl7aWYoQi50ZXN0KFIudGFnTmFtZSkpe3ZhciBPO2lmKE89RyhSLnRhZ05hbWUudG9Mb3dlckNhc2UoKSxQLFIsUSkpe3JldHVybiBPfX1zd2l0Y2goUCl7Y2FzZSJiZWZvcmViZWdpbiI6Ui5pbnNlcnRBZGphY2VudEhUTUwoIkJlZm9yZUJlZ2luIixRKTtyZXR1cm4gUi5wcmV2aW91c1NpYmxpbmc7Y2FzZSJhZnRlcmJlZ2luIjpSLmluc2VydEFkamFjZW50SFRNTCgiQWZ0ZXJCZWdpbiIsUSk7cmV0dXJuIFIuZmlyc3RDaGlsZDtjYXNlImJlZm9yZWVuZCI6Ui5pbnNlcnRBZGphY2VudEhUTUwoIkJlZm9yZUVuZCIsUSk7cmV0dXJuIFIubGFzdENoaWxkO2Nhc2UiYWZ0ZXJlbmQiOlIuaW5zZXJ0QWRqYWNlbnRIVE1MKCJBZnRlckVuZCIsUSk7cmV0dXJuIFIubmV4dFNpYmxpbmd9dGhyb3ciSWxsZWdhbCBpbnNlcnRpb24gcG9pbnQgLT4gXCIiK1ArIlwiIn12YXIgTj1SLm93bmVyRG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTt2YXIgUztzd2l0Y2goUCl7Y2FzZSJiZWZvcmViZWdpbiI6Ti5zZXRTdGFydEJlZm9yZShSKTtTPU4uY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KFEpO1IucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoUyxSKTtyZXR1cm4gUi5wcmV2aW91c1NpYmxpbmc7Y2FzZSJhZnRlcmJlZ2luIjppZihSLmZpcnN0Q2hpbGQpe04uc2V0U3RhcnRCZWZvcmUoUi5maXJzdENoaWxkKTtTPU4uY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KFEpO1IuaW5zZXJ0QmVmb3JlKFMsUi5maXJzdENoaWxkKTtyZXR1cm4gUi5maXJzdENoaWxkfWVsc2V7Ui5pbm5lckhUTUw9UTtyZXR1cm4gUi5maXJzdENoaWxkfWNhc2UiYmVmb3JlZW5kIjppZihSLmxhc3RDaGlsZCl7Ti5zZXRTdGFydEFmdGVyKFIubGFzdENoaWxkKTtTPU4uY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KFEpO1IuYXBwZW5kQ2hpbGQoUyk7cmV0dXJuIFIubGFzdENoaWxkfWVsc2V7Ui5pbm5lckhUTUw9UTtyZXR1cm4gUi5sYXN0Q2hpbGR9Y2FzZSJhZnRlcmVuZCI6Ti5zZXRTdGFydEFmdGVyKFIpO1M9Ti5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoUSk7Ui5wYXJlbnROb2RlLmluc2VydEJlZm9yZShTLFIubmV4dFNpYmxpbmcpO3JldHVybiBSLm5leHRTaWJsaW5nfXRocm93IklsbGVnYWwgaW5zZXJ0aW9uIHBvaW50IC0+IFwiIitQKyJcIiJ9LGluc2VydEJlZm9yZTpmdW5jdGlvbihOLFAsTyl7cmV0dXJuIHRoaXMuZG9JbnNlcnQoTixQLE8sImJlZm9yZUJlZ2luIil9LGluc2VydEFmdGVyOmZ1bmN0aW9uKE4sUCxPKXtyZXR1cm4gdGhpcy5kb0luc2VydChOLFAsTywiYWZ0ZXJFbmQiLCJuZXh0U2libGluZyIpfSxpbnNlcnRGaXJzdDpmdW5jdGlvbihOLFAsTyl7cmV0dXJuIHRoaXMuZG9JbnNlcnQoTixQLE8sImFmdGVyQmVnaW4iLCJmaXJzdENoaWxkIil9LGRvSW5zZXJ0OmZ1bmN0aW9uKFEsUyxSLFQsUCl7UT1FeHQuZ2V0RG9tKFEpO3ZhciBPO2lmKHRoaXMudXNlRG9tKXtPPU0oUyxudWxsKTsoUD09PSJmaXJzdENoaWxkIj9ROlEucGFyZW50Tm9kZSkuaW5zZXJ0QmVmb3JlKE8sUD9RW1BdOlEpfWVsc2V7dmFyIE49QShTKTtPPXRoaXMuaW5zZXJ0SHRtbChULFEsTil9cmV0dXJuIFI/RXh0LmdldChPLHRydWUpOk99LGFwcGVuZDpmdW5jdGlvbihQLFIsUSl7UD1FeHQuZ2V0RG9tKFApO3ZhciBPO2lmKHRoaXMudXNlRG9tKXtPPU0oUixudWxsKTtQLmFwcGVuZENoaWxkKE8pfWVsc2V7dmFyIE49QShSKTtPPXRoaXMuaW5zZXJ0SHRtbCgiYmVmb3JlRW5kIixQLE4pfXJldHVybiBRP0V4dC5nZXQoTyx0cnVlKTpPfSxvdmVyd3JpdGU6ZnVuY3Rpb24oTixQLE8pe049RXh0LmdldERvbShOKTtOLmlubmVySFRNTD1BKFApO3JldHVybiBPP0V4dC5nZXQoTi5maXJzdENoaWxkLHRydWUpOk4uZmlyc3RDaGlsZH0sY3JlYXRlVGVtcGxhdGU6ZnVuY3Rpb24oTyl7dmFyIE49QShPKTtyZXR1cm4gbmV3IEV4dC5UZW1wbGF0ZShOKX19fSgpOw0KRXh0LlRlbXBsYXRlPWZ1bmN0aW9uKEUpe3ZhciBCPWFyZ3VtZW50cztpZihFeHQuaXNBcnJheShFKSl7RT1FLmpvaW4oIiIpfWVsc2V7aWYoQi5sZW5ndGg+MSl7dmFyIEM9W107Zm9yKHZhciBEPTAsQT1CLmxlbmd0aDtEPEE7RCsrKXtpZih0eXBlb2YgQltEXT09Im9iamVjdCIpe0V4dC5hcHBseSh0aGlzLEJbRF0pfWVsc2V7Q1tDLmxlbmd0aF09QltEXX19RT1DLmpvaW4oIiIpfX10aGlzLmh0bWw9RTtpZih0aGlzLmNvbXBpbGVkKXt0aGlzLmNvbXBpbGUoKX19O0V4dC5UZW1wbGF0ZS5wcm90b3R5cGU9e2FwcGx5VGVtcGxhdGU6ZnVuY3Rpb24oQil7aWYodGhpcy5jb21waWxlZCl7cmV0dXJuIHRoaXMuY29tcGlsZWQoQil9dmFyIEE9dGhpcy5kaXNhYmxlRm9ybWF0cyE9PXRydWU7dmFyIEU9RXh0LnV0aWwuRm9ybWF0LEM9dGhpczt2YXIgRD1mdW5jdGlvbihHLEksTCxIKXtpZihMJiZBKXtpZihMLnN1YnN0cigwLDUpPT0idGhpcy4iKXtyZXR1cm4gQy5jYWxsKEwuc3Vic3RyKDUpLEJbSV0sQil9ZWxzZXtpZihIKXt2YXIgSz0vXlxzKlsnIl0oLiopWyInXVxzKiQvO0g9SC5zcGxpdCgiLCIpO2Zvcih2YXIgSj0wLEY9SC5sZW5ndGg7SjxGO0orKyl7SFtKXT1IW0pdLnJlcGxhY2UoSywiJDEiKX1IPVtCW0ldXS5jb25jYXQoSCl9ZWxzZXtIPVtCW0ldXX1yZXR1cm4gRVtMXS5hcHBseShFLEgpfX1lbHNle3JldHVybiBCW0ldIT09dW5kZWZpbmVkP0JbSV06IiJ9fTtyZXR1cm4gdGhpcy5odG1sLnJlcGxhY2UodGhpcy5yZSxEKX0sc2V0OmZ1bmN0aW9uKEEsQil7dGhpcy5odG1sPUE7dGhpcy5jb21waWxlZD1udWxsO2lmKEIpe3RoaXMuY29tcGlsZSgpfXJldHVybiB0aGlzfSxkaXNhYmxlRm9ybWF0czpmYWxzZSxyZTovXHsoW1x3LV0rKSg/Olw6KFtcd1wuXSopKD86XCgoLio/KT9cKSk/KT9cfS9nLGNvbXBpbGU6ZnVuY3Rpb24oKXt2YXIgZm09RXh0LnV0aWwuRm9ybWF0O3ZhciB1c2VGPXRoaXMuZGlzYWJsZUZvcm1hdHMhPT10cnVlO3ZhciBzZXA9RXh0LmlzR2Vja28/IisiOiIsIjt2YXIgZm49ZnVuY3Rpb24obSxuYW1lLGZvcm1hdCxhcmdzKXtpZihmb3JtYXQmJnVzZUYpe2FyZ3M9YXJncz8iLCIrYXJnczoiIjtpZihmb3JtYXQuc3Vic3RyKDAsNSkhPSJ0aGlzLiIpe2Zvcm1hdD0iZm0uIitmb3JtYXQrIigifWVsc2V7Zm9ybWF0PSJ0aGlzLmNhbGwoXCIiK2Zvcm1hdC5zdWJzdHIoNSkrIlwiLCAiO2FyZ3M9IiwgdmFsdWVzIn19ZWxzZXthcmdzPSIiO2Zvcm1hdD0iKHZhbHVlc1snIituYW1lKyInXSA9PSB1bmRlZmluZWQgPyAnJyA6ICJ9cmV0dXJuIiciK3NlcCtmb3JtYXQrInZhbHVlc1snIituYW1lKyInXSIrYXJncysiKSIrc2VwKyInIn07dmFyIGJvZHk7aWYoRXh0LmlzR2Vja28pe2JvZHk9InRoaXMuY29tcGlsZWQgPSBmdW5jdGlvbih2YWx1ZXMpeyByZXR1cm4gJyIrdGhpcy5odG1sLnJlcGxhY2UoL1xcL2csIlxcXFwiKS5yZXBsYWNlKC8oXHJcbnxcbikvZywiXFxuIikucmVwbGFjZSgvJy9nLCJcXCciKS5yZXBsYWNlKHRoaXMucmUsZm4pKyInO307In1lbHNle2JvZHk9WyJ0aGlzLmNvbXBpbGVkID0gZnVuY3Rpb24odmFsdWVzKXsgcmV0dXJuIFsnIl07Ym9keS5wdXNoKHRoaXMuaHRtbC5yZXBsYWNlKC9cXC9nLCJcXFxcIikucmVwbGFjZSgvKFxyXG58XG4pL2csIlxcbiIpLnJlcGxhY2UoLycvZywiXFwnIikucmVwbGFjZSh0aGlzLnJlLGZuKSk7Ym9keS5wdXNoKCInXS5qb2luKCcnKTt9OyIpO2JvZHk9Ym9keS5qb2luKCIiKX1ldmFsKGJvZHkpO3JldHVybiB0aGlzfSxjYWxsOmZ1bmN0aW9uKEMsQixBKXtyZXR1cm4gdGhpc1tDXShCLEEpfSxpbnNlcnRGaXJzdDpmdW5jdGlvbihCLEEsQyl7cmV0dXJuIHRoaXMuZG9JbnNlcnQoImFmdGVyQmVnaW4iLEIsQSxDKX0saW5zZXJ0QmVmb3JlOmZ1bmN0aW9uKEIsQSxDKXtyZXR1cm4gdGhpcy5kb0luc2VydCgiYmVmb3JlQmVnaW4iLEIsQSxDKX0saW5zZXJ0QWZ0ZXI6ZnVuY3Rpb24oQixBLEMpe3JldHVybiB0aGlzLmRvSW5zZXJ0KCJhZnRlckVuZCIsQixBLEMpfSxhcHBlbmQ6ZnVuY3Rpb24oQixBLEMpe3JldHVybiB0aGlzLmRvSW5zZXJ0KCJiZWZvcmVFbmQiLEIsQSxDKX0sZG9JbnNlcnQ6ZnVuY3Rpb24oQyxFLEIsQSl7RT1FeHQuZ2V0RG9tKEUpO3ZhciBEPUV4dC5Eb21IZWxwZXIuaW5zZXJ0SHRtbChDLEUsdGhpcy5hcHBseVRlbXBsYXRlKEIpKTtyZXR1cm4gQT9FeHQuZ2V0KEQsdHJ1ZSk6RH0sb3ZlcndyaXRlOmZ1bmN0aW9uKEIsQSxDKXtCPUV4dC5nZXREb20oQik7Qi5pbm5lckhUTUw9dGhpcy5hcHBseVRlbXBsYXRlKEEpO3JldHVybiBDP0V4dC5nZXQoQi5maXJzdENoaWxkLHRydWUpOkIuZmlyc3RDaGlsZH19O0V4dC5UZW1wbGF0ZS5wcm90b3R5cGUuYXBwbHk9RXh0LlRlbXBsYXRlLnByb3RvdHlwZS5hcHBseVRlbXBsYXRlO0V4dC5Eb21IZWxwZXIuVGVtcGxhdGU9RXh0LlRlbXBsYXRlO0V4dC5UZW1wbGF0ZS5mcm9tPWZ1bmN0aW9uKEIsQSl7Qj1FeHQuZ2V0RG9tKEIpO3JldHVybiBuZXcgRXh0LlRlbXBsYXRlKEIudmFsdWV8fEIuaW5uZXJIVE1MLEF8fCIiKX07DQpFeHQuRG9tUXVlcnk9ZnVuY3Rpb24oKXt2YXIgY2FjaGU9e30sc2ltcGxlQ2FjaGU9e30sdmFsdWVDYWNoZT17fTt2YXIgbm9uU3BhY2U9L1xTLzt2YXIgdHJpbVJlPS9eXHMrfFxzKyQvZzt2YXIgdHBsUmU9L1x7KFxkKylcfS9nO3ZhciBtb2RlUmU9L14oXHM/W1wvPit+XVxzP3xcc3wkKS87dmFyIHRhZ1Rva2VuUmU9L14oIyk/KFtcdy1cKl0rKS87dmFyIG50aFJlPS8oXGQqKW5cKz8oXGQqKS8sbnRoUmUyPS9cRC87ZnVuY3Rpb24gY2hpbGQocCxpbmRleCl7dmFyIGk9MDt2YXIgbj1wLmZpcnN0Q2hpbGQ7d2hpbGUobil7aWYobi5ub2RlVHlwZT09MSl7aWYoKytpPT1pbmRleCl7cmV0dXJuIG59fW49bi5uZXh0U2libGluZ31yZXR1cm4gbnVsbH1mdW5jdGlvbiBuZXh0KG4pe3doaWxlKChuPW4ubmV4dFNpYmxpbmcpJiZuLm5vZGVUeXBlIT0xKXt9cmV0dXJuIG59ZnVuY3Rpb24gcHJldihuKXt3aGlsZSgobj1uLnByZXZpb3VzU2libGluZykmJm4ubm9kZVR5cGUhPTEpe31yZXR1cm4gbn1mdW5jdGlvbiBjaGlsZHJlbihkKXt2YXIgbj1kLmZpcnN0Q2hpbGQsbmk9LTE7d2hpbGUobil7dmFyIG54PW4ubmV4dFNpYmxpbmc7aWYobi5ub2RlVHlwZT09MyYmIW5vblNwYWNlLnRlc3Qobi5ub2RlVmFsdWUpKXtkLnJlbW92ZUNoaWxkKG4pfWVsc2V7bi5ub2RlSW5kZXg9KytuaX1uPW54fXJldHVybiB0aGlzfWZ1bmN0aW9uIGJ5Q2xhc3NOYW1lKGMsYSx2KXtpZighdil7cmV0dXJuIGN9dmFyIHI9W10scmk9LTEsY247Zm9yKHZhciBpPTAsY2k7Y2k9Y1tpXTtpKyspe2lmKCgiICIrY2kuY2xhc3NOYW1lKyIgIikuaW5kZXhPZih2KSE9LTEpe3JbKytyaV09Y2l9fXJldHVybiByfWZ1bmN0aW9uIGF0dHJWYWx1ZShuLGF0dHIpe2lmKCFuLnRhZ05hbWUmJnR5cGVvZiBuLmxlbmd0aCE9InVuZGVmaW5lZCIpe249blswXX1pZighbil7cmV0dXJuIG51bGx9aWYoYXR0cj09ImZvciIpe3JldHVybiBuLmh0bWxGb3J9aWYoYXR0cj09ImNsYXNzInx8YXR0cj09ImNsYXNzTmFtZSIpe3JldHVybiBuLmNsYXNzTmFtZX1yZXR1cm4gbi5nZXRBdHRyaWJ1dGUoYXR0cil8fG5bYXR0cl19ZnVuY3Rpb24gZ2V0Tm9kZXMobnMsbW9kZSx0YWdOYW1lKXt2YXIgcmVzdWx0PVtdLHJpPS0xLGNzO2lmKCFucyl7cmV0dXJuIHJlc3VsdH10YWdOYW1lPXRhZ05hbWV8fCIqIjtpZih0eXBlb2YgbnMuZ2V0RWxlbWVudHNCeVRhZ05hbWUhPSJ1bmRlZmluZWQiKXtucz1bbnNdfWlmKCFtb2RlKXtmb3IodmFyIGk9MCxuaTtuaT1uc1tpXTtpKyspe2NzPW5pLmdldEVsZW1lbnRzQnlUYWdOYW1lKHRhZ05hbWUpO2Zvcih2YXIgaj0wLGNpO2NpPWNzW2pdO2orKyl7cmVzdWx0WysrcmldPWNpfX19ZWxzZXtpZihtb2RlPT0iLyJ8fG1vZGU9PSI+Iil7dmFyIHV0YWc9dGFnTmFtZS50b1VwcGVyQ2FzZSgpO2Zvcih2YXIgaT0wLG5pLGNuO25pPW5zW2ldO2krKyl7Y249bmkuY2hpbGRyZW58fG5pLmNoaWxkTm9kZXM7Zm9yKHZhciBqPTAsY2o7Y2o9Y25bal07aisrKXtpZihjai5ub2RlTmFtZT09dXRhZ3x8Y2oubm9kZU5hbWU9PXRhZ05hbWV8fHRhZ05hbWU9PSIqIil7cmVzdWx0WysrcmldPWNqfX19fWVsc2V7aWYobW9kZT09IisiKXt2YXIgdXRhZz10YWdOYW1lLnRvVXBwZXJDYXNlKCk7Zm9yKHZhciBpPTAsbjtuPW5zW2ldO2krKyl7d2hpbGUoKG49bi5uZXh0U2libGluZykmJm4ubm9kZVR5cGUhPTEpe31pZihuJiYobi5ub2RlTmFtZT09dXRhZ3x8bi5ub2RlTmFtZT09dGFnTmFtZXx8dGFnTmFtZT09IioiKSl7cmVzdWx0WysrcmldPW59fX1lbHNle2lmKG1vZGU9PSJ+Iil7Zm9yKHZhciBpPTAsbjtuPW5zW2ldO2krKyl7d2hpbGUoKG49bi5uZXh0U2libGluZykmJihuLm5vZGVUeXBlIT0xfHwodGFnTmFtZT09IioifHxuLnRhZ05hbWUudG9Mb3dlckNhc2UoKSE9dGFnTmFtZSkpKXt9aWYobil7cmVzdWx0WysrcmldPW59fX19fX1yZXR1cm4gcmVzdWx0fWZ1bmN0aW9uIGNvbmNhdChhLGIpe2lmKGIuc2xpY2Upe3JldHVybiBhLmNvbmNhdChiKX1mb3IodmFyIGk9MCxsPWIubGVuZ3RoO2k8bDtpKyspe2FbYS5sZW5ndGhdPWJbaV19cmV0dXJuIGF9ZnVuY3Rpb24gYnlUYWcoY3MsdGFnTmFtZSl7aWYoY3MudGFnTmFtZXx8Y3M9PWRvY3VtZW50KXtjcz1bY3NdfWlmKCF0YWdOYW1lKXtyZXR1cm4gY3N9dmFyIHI9W10scmk9LTE7dGFnTmFtZT10YWdOYW1lLnRvTG93ZXJDYXNlKCk7Zm9yKHZhciBpPTAsY2k7Y2k9Y3NbaV07aSsrKXtpZihjaS5ub2RlVHlwZT09MSYmY2kudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT10YWdOYW1lKXtyWysrcmldPWNpfX1yZXR1cm4gcn1mdW5jdGlvbiBieUlkKGNzLGF0dHIsaWQpe2lmKGNzLnRhZ05hbWV8fGNzPT1kb2N1bWVudCl7Y3M9W2NzXX1pZighaWQpe3JldHVybiBjc312YXIgcj1bXSxyaT0tMTtmb3IodmFyIGk9MCxjaTtjaT1jc1tpXTtpKyspe2lmKGNpJiZjaS5pZD09aWQpe3JbKytyaV09Y2k7cmV0dXJuIHJ9fXJldHVybiByfWZ1bmN0aW9uIGJ5QXR0cmlidXRlKGNzLGF0dHIsdmFsdWUsb3AsY3VzdG9tKXt2YXIgcj1bXSxyaT0tMSxzdD1jdXN0b209PSJ7Ijt2YXIgZj1FeHQuRG9tUXVlcnkub3BlcmF0b3JzW29wXTtmb3IodmFyIGk9MCxjaTtjaT1jc1tpXTtpKyspe3ZhciBhO2lmKHN0KXthPUV4dC5Eb21RdWVyeS5nZXRTdHlsZShjaSxhdHRyKX1lbHNle2lmKGF0dHI9PSJjbGFzcyJ8fGF0dHI9PSJjbGFzc05hbWUiKXthPWNpLmNsYXNzTmFtZX1lbHNle2lmKGF0dHI9PSJmb3IiKXthPWNpLmh0bWxGb3J9ZWxzZXtpZihhdHRyPT0iaHJlZiIpe2E9Y2kuZ2V0QXR0cmlidXRlKCJocmVmIiwyKX1lbHNle2E9Y2kuZ2V0QXR0cmlidXRlKGF0dHIpfX19fWlmKChmJiZmKGEsdmFsdWUpKXx8KCFmJiZhKSl7clsrK3JpXT1jaX19cmV0dXJuIHJ9ZnVuY3Rpb24gYnlQc2V1ZG8oY3MsbmFtZSx2YWx1ZSl7cmV0dXJuIEV4dC5Eb21RdWVyeS5wc2V1ZG9zW25hbWVdKGNzLHZhbHVlKX12YXIgaXNJRT13aW5kb3cuQWN0aXZlWE9iamVjdD90cnVlOmZhbHNlO2V2YWwoInZhciBiYXRjaCA9IDMwODAzOyIpO3ZhciBrZXk9MzA4MDM7ZnVuY3Rpb24gbm9kdXBJRVhtbChjcyl7dmFyIGQ9KytrZXk7Y3NbMF0uc2V0QXR0cmlidXRlKCJfbm9kdXAiLGQpO3ZhciByPVtjc1swXV07Zm9yKHZhciBpPTEsbGVuPWNzLmxlbmd0aDtpPGxlbjtpKyspe3ZhciBjPWNzW2ldO2lmKCFjLmdldEF0dHJpYnV0ZSgiX25vZHVwIikhPWQpe2Muc2V0QXR0cmlidXRlKCJfbm9kdXAiLGQpO3Jbci5sZW5ndGhdPWN9fWZvcih2YXIgaT0wLGxlbj1jcy5sZW5ndGg7aTxsZW47aSsrKXtjc1tpXS5yZW1vdmVBdHRyaWJ1dGUoIl9ub2R1cCIpfXJldHVybiByfWZ1bmN0aW9uIG5vZHVwKGNzKXtpZighY3Mpe3JldHVybltdfXZhciBsZW49Y3MubGVuZ3RoLGMsaSxyPWNzLGNqLHJpPS0xO2lmKCFsZW58fHR5cGVvZiBjcy5ub2RlVHlwZSE9InVuZGVmaW5lZCJ8fGxlbj09MSl7cmV0dXJuIGNzfWlmKGlzSUUmJnR5cGVvZiBjc1swXS5zZWxlY3RTaW5nbGVOb2RlIT0idW5kZWZpbmVkIil7cmV0dXJuIG5vZHVwSUVYbWwoY3MpfXZhciBkPSsra2V5O2NzWzBdLl9ub2R1cD1kO2ZvcihpPTE7Yz1jc1tpXTtpKyspe2lmKGMuX25vZHVwIT1kKXtjLl9ub2R1cD1kfWVsc2V7cj1bXTtmb3IodmFyIGo9MDtqPGk7aisrKXtyWysrcmldPWNzW2pdfWZvcihqPWkrMTtjaj1jc1tqXTtqKyspe2lmKGNqLl9ub2R1cCE9ZCl7Y2ouX25vZHVwPWQ7clsrK3JpXT1jan19cmV0dXJuIHJ9fXJldHVybiByfWZ1bmN0aW9uIHF1aWNrRGlmZklFWG1sKGMxLGMyKXt2YXIgZD0rK2tleTtmb3IodmFyIGk9MCxsZW49YzEubGVuZ3RoO2k8bGVuO2krKyl7YzFbaV0uc2V0QXR0cmlidXRlKCJfcWRpZmYiLGQpfXZhciByPVtdO2Zvcih2YXIgaT0wLGxlbj1jMi5sZW5ndGg7aTxsZW47aSsrKXtpZihjMltpXS5nZXRBdHRyaWJ1dGUoIl9xZGlmZiIpIT1kKXtyW3IubGVuZ3RoXT1jMltpXX19Zm9yKHZhciBpPTAsbGVuPWMxLmxlbmd0aDtpPGxlbjtpKyspe2MxW2ldLnJlbW92ZUF0dHJpYnV0ZSgiX3FkaWZmIil9cmV0dXJuIHJ9ZnVuY3Rpb24gcXVpY2tEaWZmKGMxLGMyKXt2YXIgbGVuMT1jMS5sZW5ndGg7aWYoIWxlbjEpe3JldHVybiBjMn1pZihpc0lFJiZjMVswXS5zZWxlY3RTaW5nbGVOb2RlKXtyZXR1cm4gcXVpY2tEaWZmSUVYbWwoYzEsYzIpfXZhciBkPSsra2V5O2Zvcih2YXIgaT0wO2k8bGVuMTtpKyspe2MxW2ldLl9xZGlmZj1kfXZhciByPVtdO2Zvcih2YXIgaT0wLGxlbj1jMi5sZW5ndGg7aTxsZW47aSsrKXtpZihjMltpXS5fcWRpZmYhPWQpe3Jbci5sZW5ndGhdPWMyW2ldfX1yZXR1cm4gcn1mdW5jdGlvbiBxdWlja0lkKG5zLG1vZGUscm9vdCxpZCl7aWYobnM9PXJvb3Qpe3ZhciBkPXJvb3Qub3duZXJEb2N1bWVudHx8cm9vdDtyZXR1cm4gZC5nZXRFbGVtZW50QnlJZChpZCl9bnM9Z2V0Tm9kZXMobnMsbW9kZSwiKiIpO3JldHVybiBieUlkKG5zLG51bGwsaWQpfXJldHVybntnZXRTdHlsZTpmdW5jdGlvbihlbCxuYW1lKXtyZXR1cm4gRXh0LmZseShlbCkuZ2V0U3R5bGUobmFtZSl9LGNvbXBpbGU6ZnVuY3Rpb24ocGF0aCx0eXBlKXt0eXBlPXR5cGV8fCJzZWxlY3QiO3ZhciBmbj1bInZhciBmID0gZnVuY3Rpb24ocm9vdCl7XG4gdmFyIG1vZGU7ICsrYmF0Y2g7IHZhciBuID0gcm9vdCB8fCBkb2N1bWVudDtcbiJdO3ZhciBxPXBhdGgsbW9kZSxscTt2YXIgdGs9RXh0LkRvbVF1ZXJ5Lm1hdGNoZXJzO3ZhciB0a2xlbj10ay5sZW5ndGg7dmFyIG1tO3ZhciBsbW9kZT1xLm1hdGNoKG1vZGVSZSk7aWYobG1vZGUmJmxtb2RlWzFdKXtmbltmbi5sZW5ndGhdPSJtb2RlPVwiIitsbW9kZVsxXS5yZXBsYWNlKHRyaW1SZSwiIikrIlwiOyI7cT1xLnJlcGxhY2UobG1vZGVbMV0sIiIpfXdoaWxlKHBhdGguc3Vic3RyKDAsMSk9PSIvIil7cGF0aD1wYXRoLnN1YnN0cigxKX13aGlsZShxJiZscSE9cSl7bHE9cTt2YXIgdG09cS5tYXRjaCh0YWdUb2tlblJlKTtpZih0eXBlPT0ic2VsZWN0Iil7aWYodG0pe2lmKHRtWzFdPT0iIyIpe2ZuW2ZuLmxlbmd0aF09Im4gPSBxdWlja0lkKG4sIG1vZGUsIHJvb3QsIFwiIit0bVsyXSsiXCIpOyJ9ZWxzZXtmbltmbi5sZW5ndGhdPSJuID0gZ2V0Tm9kZXMobiwgbW9kZSwgXCIiK3RtWzJdKyJcIik7In1xPXEucmVwbGFjZSh0bVswXSwiIil9ZWxzZXtpZihxLnN1YnN0cigwLDEpIT0iQCIpe2ZuW2ZuLmxlbmd0aF09Im4gPSBnZXROb2RlcyhuLCBtb2RlLCBcIipcIik7In19fWVsc2V7aWYodG0pe2lmKHRtWzFdPT0iIyIpe2ZuW2ZuLmxlbmd0aF09Im4gPSBieUlkKG4sIG51bGwsIFwiIit0bVsyXSsiXCIpOyJ9ZWxzZXtmbltmbi5sZW5ndGhdPSJuID0gYnlUYWcobiwgXCIiK3RtWzJdKyJcIik7In1xPXEucmVwbGFjZSh0bVswXSwiIil9fXdoaWxlKCEobW09cS5tYXRjaChtb2RlUmUpKSl7dmFyIG1hdGNoZWQ9ZmFsc2U7Zm9yKHZhciBqPTA7ajx0a2xlbjtqKyspe3ZhciB0PXRrW2pdO3ZhciBtPXEubWF0Y2godC5yZSk7aWYobSl7Zm5bZm4ubGVuZ3RoXT10LnNlbGVjdC5yZXBsYWNlKHRwbFJlLGZ1bmN0aW9uKHgsaSl7cmV0dXJuIG1baV19KTtxPXEucmVwbGFjZShtWzBdLCIiKTttYXRjaGVkPXRydWU7YnJlYWt9fWlmKCFtYXRjaGVkKXt0aHJvdyJFcnJvciBwYXJzaW5nIHNlbGVjdG9yLCBwYXJzaW5nIGZhaWxlZCBhdCBcIiIrcSsiXCIifX1pZihtbVsxXSl7Zm5bZm4ubGVuZ3RoXT0ibW9kZT1cIiIrbW1bMV0ucmVwbGFjZSh0cmltUmUsIiIpKyJcIjsiO3E9cS5yZXBsYWNlKG1tWzFdLCIiKX19Zm5bZm4ubGVuZ3RoXT0icmV0dXJuIG5vZHVwKG4pO1xufSI7ZXZhbChmbi5qb2luKCIiKSk7cmV0dXJuIGZ9LHNlbGVjdDpmdW5jdGlvbihwYXRoLHJvb3QsdHlwZSl7aWYoIXJvb3R8fHJvb3Q9PWRvY3VtZW50KXtyb290PWRvY3VtZW50fWlmKHR5cGVvZiByb290PT0ic3RyaW5nIil7cm9vdD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChyb290KX12YXIgcGF0aHM9cGF0aC5zcGxpdCgiLCIpO3ZhciByZXN1bHRzPVtdO2Zvcih2YXIgaT0wLGxlbj1wYXRocy5sZW5ndGg7aTxsZW47aSsrKXt2YXIgcD1wYXRoc1tpXS5yZXBsYWNlKHRyaW1SZSwiIik7aWYoIWNhY2hlW3BdKXtjYWNoZVtwXT1FeHQuRG9tUXVlcnkuY29tcGlsZShwKTtpZighY2FjaGVbcF0pe3Rocm93IHArIiBpcyBub3QgYSB2YWxpZCBzZWxlY3RvciJ9fXZhciByZXN1bHQ9Y2FjaGVbcF0ocm9vdCk7aWYocmVzdWx0JiZyZXN1bHQhPWRvY3VtZW50KXtyZXN1bHRzPXJlc3VsdHMuY29uY2F0KHJlc3VsdCl9fWlmKHBhdGhzLmxlbmd0aD4xKXtyZXR1cm4gbm9kdXAocmVzdWx0cyl9cmV0dXJuIHJlc3VsdHN9LHNlbGVjdE5vZGU6ZnVuY3Rpb24ocGF0aCxyb290KXtyZXR1cm4gRXh0LkRvbVF1ZXJ5LnNlbGVjdChwYXRoLHJvb3QpWzBdfSxzZWxlY3RWYWx1ZTpmdW5jdGlvbihwYXRoLHJvb3QsZGVmYXVsdFZhbHVlKXtwYXRoPXBhdGgucmVwbGFjZSh0cmltUmUsIiIpO2lmKCF2YWx1ZUNhY2hlW3BhdGhdKXt2YWx1ZUNhY2hlW3BhdGhdPUV4dC5Eb21RdWVyeS5jb21waWxlKHBhdGgsInNlbGVjdCIpfXZhciBuPXZhbHVlQ2FjaGVbcGF0aF0ocm9vdCk7bj1uWzBdP25bMF06bjt2YXIgdj0obiYmbi5maXJzdENoaWxkP24uZmlyc3RDaGlsZC5ub2RlVmFsdWU6bnVsbCk7cmV0dXJuKCh2PT09bnVsbHx8dj09PXVuZGVmaW5lZHx8dj09PSIiKT9kZWZhdWx0VmFsdWU6dil9LHNlbGVjdE51bWJlcjpmdW5jdGlvbihwYXRoLHJvb3QsZGVmYXVsdFZhbHVlKXt2YXIgdj1FeHQuRG9tUXVlcnkuc2VsZWN0VmFsdWUocGF0aCxyb290LGRlZmF1bHRWYWx1ZXx8MCk7cmV0dXJuIHBhcnNlRmxvYXQodil9LGlzOmZ1bmN0aW9uKGVsLHNzKXtpZih0eXBlb2YgZWw9PSJzdHJpbmciKXtlbD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbCl9dmFyIGlzQXJyYXk9RXh0LmlzQXJyYXkoZWwpO3ZhciByZXN1bHQ9RXh0LkRvbVF1ZXJ5LmZpbHRlcihpc0FycmF5P2VsOltlbF0sc3MpO3JldHVybiBpc0FycmF5PyhyZXN1bHQubGVuZ3RoPT1lbC5sZW5ndGgpOihyZXN1bHQubGVuZ3RoPjApfSxmaWx0ZXI6ZnVuY3Rpb24oZWxzLHNzLG5vbk1hdGNoZXMpe3NzPXNzLnJlcGxhY2UodHJpbVJlLCIiKTtpZighc2ltcGxlQ2FjaGVbc3NdKXtzaW1wbGVDYWNoZVtzc109RXh0LkRvbVF1ZXJ5LmNvbXBpbGUoc3MsInNpbXBsZSIpfXZhciByZXN1bHQ9c2ltcGxlQ2FjaGVbc3NdKGVscyk7cmV0dXJuIG5vbk1hdGNoZXM/cXVpY2tEaWZmKHJlc3VsdCxlbHMpOnJlc3VsdH0sbWF0Y2hlcnM6W3tyZTovXlwuKFtcdy1dKykvLHNlbGVjdDoibiA9IGJ5Q2xhc3NOYW1lKG4sIG51bGwsIFwiIHsxfSBcIik7In0se3JlOi9eXDooW1x3LV0rKSg/OlwoKCg/OlteXHM+XC9dKnwuKj8pKVwpKT8vLHNlbGVjdDoibiA9IGJ5UHNldWRvKG4sIFwiezF9XCIsIFwiezJ9XCIpOyJ9LHtyZTovXig/OihbXFtce10pKD86QCk/KFtcdy1dKylccz8oPzooPXwuPSlccz9bJyJdPyguKj8pWyInXT8pP1tcXVx9XSkvLHNlbGVjdDoibiA9IGJ5QXR0cmlidXRlKG4sIFwiezJ9XCIsIFwiezR9XCIsIFwiezN9XCIsIFwiezF9XCIpOyJ9LHtyZTovXiMoW1x3LV0rKS8sc2VsZWN0OiJuID0gYnlJZChuLCBudWxsLCBcInsxfVwiKTsifSx7cmU6L15AKFtcdy1dKykvLHNlbGVjdDoicmV0dXJuIHtmaXJzdENoaWxkOntub2RlVmFsdWU6YXR0clZhbHVlKG4sIFwiezF9XCIpfX07In1dLG9wZXJhdG9yczp7Ij0iOmZ1bmN0aW9uKGEsdil7cmV0dXJuIGE9PXZ9LCIhPSI6ZnVuY3Rpb24oYSx2KXtyZXR1cm4gYSE9dn0sIl49IjpmdW5jdGlvbihhLHYpe3JldHVybiBhJiZhLnN1YnN0cigwLHYubGVuZ3RoKT09dn0sIiQ9IjpmdW5jdGlvbihhLHYpe3JldHVybiBhJiZhLnN1YnN0cihhLmxlbmd0aC12Lmxlbmd0aCk9PXZ9LCIqPSI6ZnVuY3Rpb24oYSx2KXtyZXR1cm4gYSYmYS5pbmRleE9mKHYpIT09LTF9LCIlPSI6ZnVuY3Rpb24oYSx2KXtyZXR1cm4oYSV2KT09MH0sInw9IjpmdW5jdGlvbihhLHYpe3JldHVybiBhJiYoYT09dnx8YS5zdWJzdHIoMCx2Lmxlbmd0aCsxKT09disiLSIpfSwifj0iOmZ1bmN0aW9uKGEsdil7cmV0dXJuIGEmJigiICIrYSsiICIpLmluZGV4T2YoIiAiK3YrIiAiKSE9LTF9fSxwc2V1ZG9zOnsiZmlyc3QtY2hpbGQiOmZ1bmN0aW9uKGMpe3ZhciByPVtdLHJpPS0xLG47Zm9yKHZhciBpPTAsY2k7Y2k9bj1jW2ldO2krKyl7d2hpbGUoKG49bi5wcmV2aW91c1NpYmxpbmcpJiZuLm5vZGVUeXBlIT0xKXt9aWYoIW4pe3JbKytyaV09Y2l9fXJldHVybiByfSwibGFzdC1jaGlsZCI6ZnVuY3Rpb24oYyl7dmFyIHI9W10scmk9LTEsbjtmb3IodmFyIGk9MCxjaTtjaT1uPWNbaV07aSsrKXt3aGlsZSgobj1uLm5leHRTaWJsaW5nKSYmbi5ub2RlVHlwZSE9MSl7fWlmKCFuKXtyWysrcmldPWNpfX1yZXR1cm4gcn0sIm50aC1jaGlsZCI6ZnVuY3Rpb24oYyxhKXt2YXIgcj1bXSxyaT0tMTt2YXIgbT1udGhSZS5leGVjKGE9PSJldmVuIiYmIjJuInx8YT09Im9kZCImJiIybisxInx8IW50aFJlMi50ZXN0KGEpJiYibisiK2F8fGEpO3ZhciBmPShtWzFdfHwxKS0wLGw9bVsyXS0wO2Zvcih2YXIgaT0wLG47bj1jW2ldO2krKyl7dmFyIHBuPW4ucGFyZW50Tm9kZTtpZihiYXRjaCE9cG4uX2JhdGNoKXt2YXIgaj0wO2Zvcih2YXIgY249cG4uZmlyc3RDaGlsZDtjbjtjbj1jbi5uZXh0U2libGluZyl7aWYoY24ubm9kZVR5cGU9PTEpe2NuLm5vZGVJbmRleD0rK2p9fXBuLl9iYXRjaD1iYXRjaH1pZihmPT0xKXtpZihsPT0wfHxuLm5vZGVJbmRleD09bCl7clsrK3JpXT1ufX1lbHNle2lmKChuLm5vZGVJbmRleCtsKSVmPT0wKXtyWysrcmldPW59fX1yZXR1cm4gcn0sIm9ubHktY2hpbGQiOmZ1bmN0aW9uKGMpe3ZhciByPVtdLHJpPS0xO2Zvcih2YXIgaT0wLGNpO2NpPWNbaV07aSsrKXtpZighcHJldihjaSkmJiFuZXh0KGNpKSl7clsrK3JpXT1jaX19cmV0dXJuIHJ9LCJlbXB0eSI6ZnVuY3Rpb24oYyl7dmFyIHI9W10scmk9LTE7Zm9yKHZhciBpPTAsY2k7Y2k9Y1tpXTtpKyspe3ZhciBjbnM9Y2kuY2hpbGROb2RlcyxqPTAsY24sZW1wdHk9dHJ1ZTt3aGlsZShjbj1jbnNbal0peysrajtpZihjbi5ub2RlVHlwZT09MXx8Y24ubm9kZVR5cGU9PTMpe2VtcHR5PWZhbHNlO2JyZWFrfX1pZihlbXB0eSl7clsrK3JpXT1jaX19cmV0dXJuIHJ9LCJjb250YWlucyI6ZnVuY3Rpb24oYyx2KXt2YXIgcj1bXSxyaT0tMTtmb3IodmFyIGk9MCxjaTtjaT1jW2ldO2krKyl7aWYoKGNpLnRleHRDb250ZW50fHxjaS5pbm5lclRleHR8fCIiKS5pbmRleE9mKHYpIT0tMSl7clsrK3JpXT1jaX19cmV0dXJuIHJ9LCJub2RlVmFsdWUiOmZ1bmN0aW9uKGMsdil7dmFyIHI9W10scmk9LTE7Zm9yKHZhciBpPTAsY2k7Y2k9Y1tpXTtpKyspe2lmKGNpLmZpcnN0Q2hpbGQmJmNpLmZpcnN0Q2hpbGQubm9kZVZhbHVlPT12KXtyWysrcmldPWNpfX1yZXR1cm4gcn0sImNoZWNrZWQiOmZ1bmN0aW9uKGMpe3ZhciByPVtdLHJpPS0xO2Zvcih2YXIgaT0wLGNpO2NpPWNbaV07aSsrKXtpZihjaS5jaGVja2VkPT10cnVlKXtyWysrcmldPWNpfX1yZXR1cm4gcn0sIm5vdCI6ZnVuY3Rpb24oYyxzcyl7cmV0dXJuIEV4dC5Eb21RdWVyeS5maWx0ZXIoYyxzcyx0cnVlKX0sImFueSI6ZnVuY3Rpb24oYyxzZWxlY3RvcnMpe3ZhciBzcz1zZWxlY3RvcnMuc3BsaXQoInwiKTt2YXIgcj1bXSxyaT0tMSxzO2Zvcih2YXIgaT0wLGNpO2NpPWNbaV07aSsrKXtmb3IodmFyIGo9MDtzPXNzW2pdO2orKyl7aWYoRXh0LkRvbVF1ZXJ5LmlzKGNpLHMpKXtyWysrcmldPWNpO2JyZWFrfX19cmV0dXJuIHJ9LCJvZGQiOmZ1bmN0aW9uKGMpe3JldHVybiB0aGlzWyJudGgtY2hpbGQiXShjLCJvZGQiKX0sImV2ZW4iOmZ1bmN0aW9uKGMpe3JldHVybiB0aGlzWyJudGgtY2hpbGQiXShjLCJldmVuIil9LCJudGgiOmZ1bmN0aW9uKGMsYSl7cmV0dXJuIGNbYS0xXXx8W119LCJmaXJzdCI6ZnVuY3Rpb24oYyl7cmV0dXJuIGNbMF18fFtdfSwibGFzdCI6ZnVuY3Rpb24oYyl7cmV0dXJuIGNbYy5sZW5ndGgtMV18fFtdfSwiaGFzIjpmdW5jdGlvbihjLHNzKXt2YXIgcz1FeHQuRG9tUXVlcnkuc2VsZWN0O3ZhciByPVtdLHJpPS0xO2Zvcih2YXIgaT0wLGNpO2NpPWNbaV07aSsrKXtpZihzKHNzLGNpKS5sZW5ndGg+MCl7clsrK3JpXT1jaX19cmV0dXJuIHJ9LCJuZXh0IjpmdW5jdGlvbihjLHNzKXt2YXIgaXM9RXh0LkRvbVF1ZXJ5LmlzO3ZhciByPVtdLHJpPS0xO2Zvcih2YXIgaT0wLGNpO2NpPWNbaV07aSsrKXt2YXIgbj1uZXh0KGNpKTtpZihuJiZpcyhuLHNzKSl7clsrK3JpXT1jaX19cmV0dXJuIHJ9LCJwcmV2IjpmdW5jdGlvbihjLHNzKXt2YXIgaXM9RXh0LkRvbVF1ZXJ5LmlzO3ZhciByPVtdLHJpPS0xO2Zvcih2YXIgaT0wLGNpO2NpPWNbaV07aSsrKXt2YXIgbj1wcmV2KGNpKTtpZihuJiZpcyhuLHNzKSl7clsrK3JpXT1jaX19cmV0dXJuIHJ9fX19KCk7RXh0LnF1ZXJ5PUV4dC5Eb21RdWVyeS5zZWxlY3Q7DQpFeHQudXRpbC5PYnNlcnZhYmxlPWZ1bmN0aW9uKCl7aWYodGhpcy5saXN0ZW5lcnMpe3RoaXMub24odGhpcy5saXN0ZW5lcnMpO2RlbGV0ZSB0aGlzLmxpc3RlbmVyc319O0V4dC51dGlsLk9ic2VydmFibGUucHJvdG90eXBlPXtmaXJlRXZlbnQ6ZnVuY3Rpb24oKXtpZih0aGlzLmV2ZW50c1N1c3BlbmRlZCE9PXRydWUpe3ZhciBBPXRoaXMuZXZlbnRzW2FyZ3VtZW50c1swXS50b0xvd2VyQ2FzZSgpXTtpZih0eXBlb2YgQT09Im9iamVjdCIpe3JldHVybiBBLmZpcmUuYXBwbHkoQSxBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSkpfX1yZXR1cm4gdHJ1ZX0sZmlsdGVyT3B0UmU6L14oPzpzY29wZXxkZWxheXxidWZmZXJ8c2luZ2xlKSQvLGFkZExpc3RlbmVyOmZ1bmN0aW9uKEEsQyxCLEYpe2lmKHR5cGVvZiBBPT0ib2JqZWN0Iil7Rj1BO2Zvcih2YXIgRSBpbiBGKXtpZih0aGlzLmZpbHRlck9wdFJlLnRlc3QoRSkpe2NvbnRpbnVlfWlmKHR5cGVvZiBGW0VdPT0iZnVuY3Rpb24iKXt0aGlzLmFkZExpc3RlbmVyKEUsRltFXSxGLnNjb3BlLEYpfWVsc2V7dGhpcy5hZGRMaXN0ZW5lcihFLEZbRV0uZm4sRltFXS5zY29wZSxGW0VdKX19cmV0dXJuIH1GPSghRnx8dHlwZW9mIEY9PSJib29sZWFuIik/e306RjtBPUEudG9Mb3dlckNhc2UoKTt2YXIgRD10aGlzLmV2ZW50c1tBXXx8dHJ1ZTtpZih0eXBlb2YgRD09ImJvb2xlYW4iKXtEPW5ldyBFeHQudXRpbC5FdmVudCh0aGlzLEEpO3RoaXMuZXZlbnRzW0FdPUR9RC5hZGRMaXN0ZW5lcihDLEIsRil9LHJlbW92ZUxpc3RlbmVyOmZ1bmN0aW9uKEEsQyxCKXt2YXIgRD10aGlzLmV2ZW50c1tBLnRvTG93ZXJDYXNlKCldO2lmKHR5cGVvZiBEPT0ib2JqZWN0Iil7RC5yZW1vdmVMaXN0ZW5lcihDLEIpfX0scHVyZ2VMaXN0ZW5lcnM6ZnVuY3Rpb24oKXtmb3IodmFyIEEgaW4gdGhpcy5ldmVudHMpe2lmKHR5cGVvZiB0aGlzLmV2ZW50c1tBXT09Im9iamVjdCIpe3RoaXMuZXZlbnRzW0FdLmNsZWFyTGlzdGVuZXJzKCl9fX0scmVsYXlFdmVudHM6ZnVuY3Rpb24oRixEKXt2YXIgRT1mdW5jdGlvbihHKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maXJlRXZlbnQuYXBwbHkodGhpcyxFeHQuY29tYmluZShHLEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKSkpfX07Zm9yKHZhciBDPTAsQT1ELmxlbmd0aDtDPEE7QysrKXt2YXIgQj1EW0NdO2lmKCF0aGlzLmV2ZW50c1tCXSl7dGhpcy5ldmVudHNbQl09dHJ1ZX1GLm9uKEIsRShCKSx0aGlzKX19LGFkZEV2ZW50czpmdW5jdGlvbihEKXtpZighdGhpcy5ldmVudHMpe3RoaXMuZXZlbnRzPXt9fWlmKHR5cGVvZiBEPT0ic3RyaW5nIil7Zm9yKHZhciBDPTAsQT1hcmd1bWVudHMsQjtCPUFbQ107QysrKXtpZighdGhpcy5ldmVudHNbQVtDXV0pe0RbQVtDXV09dHJ1ZX19fWVsc2V7RXh0LmFwcGx5SWYodGhpcy5ldmVudHMsRCl9fSxoYXNMaXN0ZW5lcjpmdW5jdGlvbihBKXt2YXIgQj10aGlzLmV2ZW50c1tBXTtyZXR1cm4gdHlwZW9mIEI9PSJvYmplY3QiJiZCLmxpc3RlbmVycy5sZW5ndGg+MH0sc3VzcGVuZEV2ZW50czpmdW5jdGlvbigpe3RoaXMuZXZlbnRzU3VzcGVuZGVkPXRydWV9LHJlc3VtZUV2ZW50czpmdW5jdGlvbigpe3RoaXMuZXZlbnRzU3VzcGVuZGVkPWZhbHNlfSxnZXRNZXRob2RFdmVudDpmdW5jdGlvbihHKXtpZighdGhpcy5tZXRob2RFdmVudHMpe3RoaXMubWV0aG9kRXZlbnRzPXt9fXZhciBGPXRoaXMubWV0aG9kRXZlbnRzW0ddO2lmKCFGKXtGPXt9O3RoaXMubWV0aG9kRXZlbnRzW0ddPUY7Ri5vcmlnaW5hbEZuPXRoaXNbR107Ri5tZXRob2ROYW1lPUc7Ri5iZWZvcmU9W107Ri5hZnRlcj1bXTt2YXIgQyxCLEQ7dmFyIEU9dGhpczt2YXIgQT1mdW5jdGlvbihKLEksSCl7aWYoKEI9Si5hcHBseShJfHxFLEgpKSE9PXVuZGVmaW5lZCl7aWYodHlwZW9mIEI9PT0ib2JqZWN0Iil7aWYoQi5yZXR1cm5WYWx1ZSE9PXVuZGVmaW5lZCl7Qz1CLnJldHVyblZhbHVlfWVsc2V7Qz1CfWlmKEIuY2FuY2VsPT09dHJ1ZSl7RD10cnVlfX1lbHNle2lmKEI9PT1mYWxzZSl7RD10cnVlfWVsc2V7Qz1CfX19fTt0aGlzW0ddPWZ1bmN0aW9uKCl7Qz1CPXVuZGVmaW5lZDtEPWZhbHNlO3ZhciBJPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKTtmb3IodmFyIEo9MCxIPUYuYmVmb3JlLmxlbmd0aDtKPEg7SisrKXtBKEYuYmVmb3JlW0pdLmZuLEYuYmVmb3JlW0pdLnNjb3BlLEkpO2lmKEQpe3JldHVybiBDfX1pZigoQj1GLm9yaWdpbmFsRm4uYXBwbHkoRSxJKSkhPT11bmRlZmluZWQpe0M9Qn1mb3IodmFyIEo9MCxIPUYuYWZ0ZXIubGVuZ3RoO0o8SDtKKyspe0EoRi5hZnRlcltKXS5mbixGLmFmdGVyW0pdLnNjb3BlLEkpO2lmKEQpe3JldHVybiBDfX1yZXR1cm4gQ319cmV0dXJuIEZ9LGJlZm9yZU1ldGhvZDpmdW5jdGlvbihELEIsQSl7dmFyIEM9dGhpcy5nZXRNZXRob2RFdmVudChEKTtDLmJlZm9yZS5wdXNoKHtmbjpCLHNjb3BlOkF9KX0sYWZ0ZXJNZXRob2Q6ZnVuY3Rpb24oRCxCLEEpe3ZhciBDPXRoaXMuZ2V0TWV0aG9kRXZlbnQoRCk7Qy5hZnRlci5wdXNoKHtmbjpCLHNjb3BlOkF9KX0scmVtb3ZlTWV0aG9kTGlzdGVuZXI6ZnVuY3Rpb24oRixELEMpe3ZhciBFPXRoaXMuZ2V0TWV0aG9kRXZlbnQoRik7Zm9yKHZhciBCPTAsQT1FLmJlZm9yZS5sZW5ndGg7QjxBO0IrKyl7aWYoRS5iZWZvcmVbQl0uZm49PUQmJkUuYmVmb3JlW0JdLnNjb3BlPT1DKXtFLmJlZm9yZS5zcGxpY2UoQiwxKTtyZXR1cm4gfX1mb3IodmFyIEI9MCxBPUUuYWZ0ZXIubGVuZ3RoO0I8QTtCKyspe2lmKEUuYWZ0ZXJbQl0uZm49PUQmJkUuYWZ0ZXJbQl0uc2NvcGU9PUMpe0UuYWZ0ZXIuc3BsaWNlKEIsMSk7cmV0dXJuIH19fX07RXh0LnV0aWwuT2JzZXJ2YWJsZS5wcm90b3R5cGUub249RXh0LnV0aWwuT2JzZXJ2YWJsZS5wcm90b3R5cGUuYWRkTGlzdGVuZXI7RXh0LnV0aWwuT2JzZXJ2YWJsZS5wcm90b3R5cGUudW49RXh0LnV0aWwuT2JzZXJ2YWJsZS5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI7RXh0LnV0aWwuT2JzZXJ2YWJsZS5jYXB0dXJlPWZ1bmN0aW9uKEMsQixBKXtDLmZpcmVFdmVudD1DLmZpcmVFdmVudC5jcmVhdGVJbnRlcmNlcHRvcihCLEEpfTtFeHQudXRpbC5PYnNlcnZhYmxlLnJlbGVhc2VDYXB0dXJlPWZ1bmN0aW9uKEEpe0EuZmlyZUV2ZW50PUV4dC51dGlsLk9ic2VydmFibGUucHJvdG90eXBlLmZpcmVFdmVudH07KGZ1bmN0aW9uKCl7dmFyIEI9ZnVuY3Rpb24oRixHLEUpe3ZhciBEPW5ldyBFeHQudXRpbC5EZWxheWVkVGFzaygpO3JldHVybiBmdW5jdGlvbigpe0QuZGVsYXkoRy5idWZmZXIsRixFLEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKSl9fTt2YXIgQz1mdW5jdGlvbihGLEcsRSxEKXtyZXR1cm4gZnVuY3Rpb24oKXtHLnJlbW92ZUxpc3RlbmVyKEUsRCk7cmV0dXJuIEYuYXBwbHkoRCxhcmd1bWVudHMpfX07dmFyIEE9ZnVuY3Rpb24oRSxGLEQpe3JldHVybiBmdW5jdGlvbigpe3ZhciBHPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7RS5hcHBseShELEcpfSxGLmRlbGF5fHwxMCl9fTtFeHQudXRpbC5FdmVudD1mdW5jdGlvbihFLEQpe3RoaXMubmFtZT1EO3RoaXMub2JqPUU7dGhpcy5saXN0ZW5lcnM9W119O0V4dC51dGlsLkV2ZW50LnByb3RvdHlwZT17YWRkTGlzdGVuZXI6ZnVuY3Rpb24oRyxGLEUpe0Y9Rnx8dGhpcy5vYmo7aWYoIXRoaXMuaXNMaXN0ZW5pbmcoRyxGKSl7dmFyIEQ9dGhpcy5jcmVhdGVMaXN0ZW5lcihHLEYsRSk7aWYoIXRoaXMuZmlyaW5nKXt0aGlzLmxpc3RlbmVycy5wdXNoKEQpfWVsc2V7dGhpcy5saXN0ZW5lcnM9dGhpcy5saXN0ZW5lcnMuc2xpY2UoMCk7dGhpcy5saXN0ZW5lcnMucHVzaChEKX19fSxjcmVhdGVMaXN0ZW5lcjpmdW5jdGlvbihHLEYsSCl7SD1IfHx7fTtGPUZ8fHRoaXMub2JqO3ZhciBEPXtmbjpHLHNjb3BlOkYsb3B0aW9uczpIfTt2YXIgRT1HO2lmKEguZGVsYXkpe0U9QShFLEgsRil9aWYoSC5zaW5nbGUpe0U9QyhFLHRoaXMsRyxGKX1pZihILmJ1ZmZlcil7RT1CKEUsSCxGKX1ELmZpcmVGbj1FO3JldHVybiBEfSxmaW5kTGlzdGVuZXI6ZnVuY3Rpb24oSSxIKXtIPUh8fHRoaXMub2JqO3ZhciBGPXRoaXMubGlzdGVuZXJzO2Zvcih2YXIgRz0wLEQ9Ri5sZW5ndGg7RzxEO0crKyl7dmFyIEU9RltHXTtpZihFLmZuPT1JJiZFLnNjb3BlPT1IKXtyZXR1cm4gR319cmV0dXJuIC0xfSxpc0xpc3RlbmluZzpmdW5jdGlvbihFLEQpe3JldHVybiB0aGlzLmZpbmRMaXN0ZW5lcihFLEQpIT0tMX0scmVtb3ZlTGlzdGVuZXI6ZnVuY3Rpb24oRixFKXt2YXIgRDtpZigoRD10aGlzLmZpbmRMaXN0ZW5lcihGLEUpKSE9LTEpe2lmKCF0aGlzLmZpcmluZyl7dGhpcy5saXN0ZW5lcnMuc3BsaWNlKEQsMSl9ZWxzZXt0aGlzLmxpc3RlbmVycz10aGlzLmxpc3RlbmVycy5zbGljZSgwKTt0aGlzLmxpc3RlbmVycy5zcGxpY2UoRCwxKX1yZXR1cm4gdHJ1ZX1yZXR1cm4gZmFsc2V9LGNsZWFyTGlzdGVuZXJzOmZ1bmN0aW9uKCl7dGhpcy5saXN0ZW5lcnM9W119LGZpcmU6ZnVuY3Rpb24oKXt2YXIgRj10aGlzLmxpc3RlbmVycyxJLEQ9Ri5sZW5ndGg7aWYoRD4wKXt0aGlzLmZpcmluZz10cnVlO3ZhciBHPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKTtmb3IodmFyIEg9MDtIPEQ7SCsrKXt2YXIgRT1GW0hdO2lmKEUuZmlyZUZuLmFwcGx5KEUuc2NvcGV8fHRoaXMub2JqfHx3aW5kb3csYXJndW1lbnRzKT09PWZhbHNlKXt0aGlzLmZpcmluZz1mYWxzZTtyZXR1cm4gZmFsc2V9fXRoaXMuZmlyaW5nPWZhbHNlfXJldHVybiB0cnVlfX19KSgpOw0KRXh0LkV2ZW50TWFuYWdlcj1mdW5jdGlvbigpe3ZhciBULE0sST1mYWxzZTt2YXIgSyxTLEMsTzt2YXIgTD1FeHQubGliLkV2ZW50O3ZhciBOPUV4dC5saWIuRG9tO3ZhciBCPWZ1bmN0aW9uKCl7aWYoIUkpe0k9dHJ1ZTtFeHQuaXNSZWFkeT10cnVlO2lmKE0pe2NsZWFySW50ZXJ2YWwoTSl9aWYoRXh0LmlzR2Vja298fEV4dC5pc09wZXJhKXtkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixCLGZhbHNlKX1pZihFeHQuaXNJRSl7dmFyIEQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImllLWRlZmVycmVkLWxvYWRlciIpO2lmKEQpe0Qub25yZWFkeXN0YXRlY2hhbmdlPW51bGw7RC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKEQpfX1pZihUKXtULmZpcmUoKTtULmNsZWFyTGlzdGVuZXJzKCl9fX07dmFyIEE9ZnVuY3Rpb24oKXtUPW5ldyBFeHQudXRpbC5FdmVudCgpO2lmKEV4dC5pc0dlY2tvfHxFeHQuaXNPcGVyYSl7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsQixmYWxzZSl9ZWxzZXtpZihFeHQuaXNJRSl7ZG9jdW1lbnQud3JpdGUoIjxzIisiY3JpcHQgaWQ9XCJpZS1kZWZlcnJlZC1sb2FkZXJcIiBkZWZlcj1cImRlZmVyXCIgc3JjPVwiLyIrIi86XCI+PC9zIisiY3JpcHQ+Iik7dmFyIEQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImllLWRlZmVycmVkLWxvYWRlciIpO0Qub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7aWYodGhpcy5yZWFkeVN0YXRlPT0iY29tcGxldGUiKXtCKCl9fX1lbHNle2lmKEV4dC5pc1NhZmFyaSl7TT1zZXRJbnRlcnZhbChmdW5jdGlvbigpe3ZhciBFPWRvY3VtZW50LnJlYWR5U3RhdGU7aWYoRT09ImNvbXBsZXRlIil7QigpfX0sMTApfX19TC5vbih3aW5kb3csImxvYWQiLEIpfTt2YXIgUj1mdW5jdGlvbihFLFUpe3ZhciBEPW5ldyBFeHQudXRpbC5EZWxheWVkVGFzayhFKTtyZXR1cm4gZnVuY3Rpb24oVil7Vj1uZXcgRXh0LkV2ZW50T2JqZWN0SW1wbChWKTtELmRlbGF5KFUuYnVmZmVyLEUsbnVsbCxbVl0pfX07dmFyIFA9ZnVuY3Rpb24oVixVLEQsRSl7cmV0dXJuIGZ1bmN0aW9uKFcpe0V4dC5FdmVudE1hbmFnZXIucmVtb3ZlTGlzdGVuZXIoVSxELEUpO1YoVyl9fTt2YXIgRj1mdW5jdGlvbihELEUpe3JldHVybiBmdW5jdGlvbihVKXtVPW5ldyBFeHQuRXZlbnRPYmplY3RJbXBsKFUpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtEKFUpfSxFLmRlbGF5fHwxMCl9fTt2YXIgSj1mdW5jdGlvbihVLEUsRCxZLFgpe3ZhciBaPSghRHx8dHlwZW9mIEQ9PSJib29sZWFuIik/e306RDtZPVl8fFouZm47WD1YfHxaLnNjb3BlO3ZhciBXPUV4dC5nZXREb20oVSk7aWYoIVcpe3Rocm93IkVycm9yIGxpc3RlbmluZyBmb3IgXCIiK0UrIlwiLiBFbGVtZW50IFwiIitVKyJcIiBkb2Vzbid0IGV4aXN0LiJ9dmFyIFY9ZnVuY3Rpb24oYil7Yj1FeHQuRXZlbnRPYmplY3Quc2V0RXZlbnQoYik7dmFyIGE7aWYoWi5kZWxlZ2F0ZSl7YT1iLmdldFRhcmdldChaLmRlbGVnYXRlLFcpO2lmKCFhKXtyZXR1cm4gfX1lbHNle2E9Yi50YXJnZXR9aWYoWi5zdG9wRXZlbnQ9PT10cnVlKXtiLnN0b3BFdmVudCgpfWlmKFoucHJldmVudERlZmF1bHQ9PT10cnVlKXtiLnByZXZlbnREZWZhdWx0KCl9aWYoWi5zdG9wUHJvcGFnYXRpb249PT10cnVlKXtiLnN0b3BQcm9wYWdhdGlvbigpfWlmKFoubm9ybWFsaXplZD09PWZhbHNlKXtiPWIuYnJvd3NlckV2ZW50fVkuY2FsbChYfHxXLGIsYSxaKX07aWYoWi5kZWxheSl7Vj1GKFYsWil9aWYoWi5zaW5nbGUpe1Y9UChWLFcsRSxZKX1pZihaLmJ1ZmZlcil7Vj1SKFYsWil9WS5faGFuZGxlcnM9WS5faGFuZGxlcnN8fFtdO1kuX2hhbmRsZXJzLnB1c2goW0V4dC5pZChXKSxFLFZdKTtMLm9uKFcsRSxWKTtpZihFPT0ibW91c2V3aGVlbCImJlcuYWRkRXZlbnRMaXN0ZW5lcil7Vy5hZGRFdmVudExpc3RlbmVyKCJET01Nb3VzZVNjcm9sbCIsVixmYWxzZSk7TC5vbih3aW5kb3csInVubG9hZCIsZnVuY3Rpb24oKXtXLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTU1vdXNlU2Nyb2xsIixWLGZhbHNlKX0pfWlmKEU9PSJtb3VzZWRvd24iJiZXPT1kb2N1bWVudCl7RXh0LkV2ZW50TWFuYWdlci5zdG9wcGVkTW91c2VEb3duRXZlbnQuYWRkTGlzdGVuZXIoVil9cmV0dXJuIFZ9O3ZhciBHPWZ1bmN0aW9uKEUsVSxaKXt2YXIgRD1FeHQuaWQoRSksYT1aLl9oYW5kbGVycyxYPVo7aWYoYSl7Zm9yKHZhciBWPTAsWT1hLmxlbmd0aDtWPFk7VisrKXt2YXIgVz1hW1ZdO2lmKFdbMF09PUQmJldbMV09PVUpe1g9V1syXTthLnNwbGljZShWLDEpO2JyZWFrfX19TC51bihFLFUsWCk7RT1FeHQuZ2V0RG9tKEUpO2lmKFU9PSJtb3VzZXdoZWVsIiYmRS5hZGRFdmVudExpc3RlbmVyKXtFLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTU1vdXNlU2Nyb2xsIixYLGZhbHNlKX1pZihVPT0ibW91c2Vkb3duIiYmRT09ZG9jdW1lbnQpe0V4dC5FdmVudE1hbmFnZXIuc3RvcHBlZE1vdXNlRG93bkV2ZW50LnJlbW92ZUxpc3RlbmVyKFgpfX07dmFyIEg9L14oPzpzY29wZXxkZWxheXxidWZmZXJ8c2luZ2xlfHN0b3BFdmVudHxwcmV2ZW50RGVmYXVsdHxzdG9wUHJvcGFnYXRpb258bm9ybWFsaXplZHxhcmdzfGRlbGVnYXRlKSQvO3ZhciBRPXthZGRMaXN0ZW5lcjpmdW5jdGlvbihVLEQsVyxWLEUpe2lmKHR5cGVvZiBEPT0ib2JqZWN0Iil7dmFyIFk9RDtmb3IodmFyIFggaW4gWSl7aWYoSC50ZXN0KFgpKXtjb250aW51ZX1pZih0eXBlb2YgWVtYXT09ImZ1bmN0aW9uIil7SihVLFgsWSxZW1hdLFkuc2NvcGUpfWVsc2V7SihVLFgsWVtYXSl9fXJldHVybiB9cmV0dXJuIEooVSxELEUsVyxWKX0scmVtb3ZlTGlzdGVuZXI6ZnVuY3Rpb24oRSxELFUpe3JldHVybiBHKEUsRCxVKX0sb25Eb2N1bWVudFJlYWR5OmZ1bmN0aW9uKFUsRSxEKXtpZihJKXtULmFkZExpc3RlbmVyKFUsRSxEKTtULmZpcmUoKTtULmNsZWFyTGlzdGVuZXJzKCk7cmV0dXJuIH1pZighVCl7QSgpfVQuYWRkTGlzdGVuZXIoVSxFLEQpfSxvbldpbmRvd1Jlc2l6ZTpmdW5jdGlvbihVLEUsRCl7aWYoIUspe0s9bmV3IEV4dC51dGlsLkV2ZW50KCk7Uz1uZXcgRXh0LnV0aWwuRGVsYXllZFRhc2soZnVuY3Rpb24oKXtLLmZpcmUoTi5nZXRWaWV3V2lkdGgoKSxOLmdldFZpZXdIZWlnaHQoKSl9KTtMLm9uKHdpbmRvdywicmVzaXplIix0aGlzLmZpcmVXaW5kb3dSZXNpemUsdGhpcyl9Sy5hZGRMaXN0ZW5lcihVLEUsRCl9LGZpcmVXaW5kb3dSZXNpemU6ZnVuY3Rpb24oKXtpZihLKXtpZigoRXh0LmlzSUV8fEV4dC5pc0FpcikmJlMpe1MuZGVsYXkoNTApfWVsc2V7Sy5maXJlKE4uZ2V0Vmlld1dpZHRoKCksTi5nZXRWaWV3SGVpZ2h0KCkpfX19LG9uVGV4dFJlc2l6ZTpmdW5jdGlvbihWLFUsRCl7aWYoIUMpe0M9bmV3IEV4dC51dGlsLkV2ZW50KCk7dmFyIEU9bmV3IEV4dC5FbGVtZW50KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpKTtFLmRvbS5jbGFzc05hbWU9IngtdGV4dC1yZXNpemUiO0UuZG9tLmlubmVySFRNTD0iWCI7RS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KTtPPUUuZG9tLm9mZnNldEhlaWdodDtzZXRJbnRlcnZhbChmdW5jdGlvbigpe2lmKEUuZG9tLm9mZnNldEhlaWdodCE9Tyl7Qy5maXJlKE8sTz1FLmRvbS5vZmZzZXRIZWlnaHQpfX0sdGhpcy50ZXh0UmVzaXplSW50ZXJ2YWwpfUMuYWRkTGlzdGVuZXIoVixVLEQpfSxyZW1vdmVSZXNpemVMaXN0ZW5lcjpmdW5jdGlvbihFLEQpe2lmKEspe0sucmVtb3ZlTGlzdGVuZXIoRSxEKX19LGZpcmVSZXNpemU6ZnVuY3Rpb24oKXtpZihLKXtLLmZpcmUoTi5nZXRWaWV3V2lkdGgoKSxOLmdldFZpZXdIZWlnaHQoKSl9fSxpZURlZmVyU3JjOmZhbHNlLHRleHRSZXNpemVJbnRlcnZhbDo1MH07US5vbj1RLmFkZExpc3RlbmVyO1EudW49US5yZW1vdmVMaXN0ZW5lcjtRLnN0b3BwZWRNb3VzZURvd25FdmVudD1uZXcgRXh0LnV0aWwuRXZlbnQoKTtyZXR1cm4gUX0oKTtFeHQub25SZWFkeT1FeHQuRXZlbnRNYW5hZ2VyLm9uRG9jdW1lbnRSZWFkeTtFeHQub25SZWFkeShmdW5jdGlvbigpe3ZhciBCPUV4dC5nZXRCb2R5KCk7aWYoIUIpe3JldHVybiB9dmFyIEE9W0V4dC5pc0lFPyJleHQtaWUgIisoRXh0LmlzSUU2PyJleHQtaWU2IjoiZXh0LWllNyIpOkV4dC5pc0dlY2tvPyJleHQtZ2Vja28iOkV4dC5pc09wZXJhPyJleHQtb3BlcmEiOkV4dC5pc1NhZmFyaT8iZXh0LXNhZmFyaSI6IiJdO2lmKEV4dC5pc01hYyl7QS5wdXNoKCJleHQtbWFjIil9aWYoRXh0LmlzTGludXgpe0EucHVzaCgiZXh0LWxpbnV4Iil9aWYoRXh0LmlzQm9yZGVyQm94KXtBLnB1c2goImV4dC1ib3JkZXItYm94Iil9aWYoRXh0LmlzU3RyaWN0KXt2YXIgQz1CLmRvbS5wYXJlbnROb2RlO2lmKEMpe0MuY2xhc3NOYW1lKz0iIGV4dC1zdHJpY3QifX1CLmFkZENsYXNzKEEuam9pbigiICIpKX0pO0V4dC5FdmVudE9iamVjdD1mdW5jdGlvbigpe3ZhciBCPUV4dC5saWIuRXZlbnQ7dmFyIEE9ezYzMjM0OjM3LDYzMjM1OjM5LDYzMjMyOjM4LDYzMjMzOjQwLDYzMjc2OjMzLDYzMjc3OjM0LDYzMjcyOjQ2LDYzMjczOjM2LDYzMjc1OjM1fTt2YXIgQz1FeHQuaXNJRT97MTowLDQ6MSwyOjJ9OihFeHQuaXNTYWZhcmk/ezE6MCwyOjEsMzoyfTp7MDowLDE6MSwyOjJ9KTtFeHQuRXZlbnRPYmplY3RJbXBsPWZ1bmN0aW9uKEQpe2lmKEQpe3RoaXMuc2V0RXZlbnQoRC5icm93c2VyRXZlbnR8fEQpfX07RXh0LkV2ZW50T2JqZWN0SW1wbC5wcm90b3R5cGU9e2Jyb3dzZXJFdmVudDpudWxsLGJ1dHRvbjotMSxzaGlmdEtleTpmYWxzZSxjdHJsS2V5OmZhbHNlLGFsdEtleTpmYWxzZSxCQUNLU1BBQ0U6OCxUQUI6OSxSRVRVUk46MTMsRU5URVI6MTMsU0hJRlQ6MTYsQ09OVFJPTDoxNyxFU0M6MjcsU1BBQ0U6MzIsUEFHRVVQOjMzLFBBR0VET1dOOjM0LEVORDozNSxIT01FOjM2LExFRlQ6MzcsVVA6MzgsUklHSFQ6MzksRE9XTjo0MCxERUxFVEU6NDYsRjU6MTE2LHNldEV2ZW50OmZ1bmN0aW9uKEQpe2lmKEQ9PXRoaXN8fChEJiZELmJyb3dzZXJFdmVudCkpe3JldHVybiBEfXRoaXMuYnJvd3NlckV2ZW50PUQ7aWYoRCl7dGhpcy5idXR0b249RC5idXR0b24/Q1tELmJ1dHRvbl06KEQud2hpY2g/RC53aGljaC0xOi0xKTtpZihELnR5cGU9PSJjbGljayImJnRoaXMuYnV0dG9uPT0tMSl7dGhpcy5idXR0b249MH10aGlzLnR5cGU9RC50eXBlO3RoaXMuc2hpZnRLZXk9RC5zaGlmdEtleTt0aGlzLmN0cmxLZXk9RC5jdHJsS2V5fHxELm1ldGFLZXk7dGhpcy5hbHRLZXk9RC5hbHRLZXk7dGhpcy5rZXlDb2RlPUQua2V5Q29kZTt0aGlzLmNoYXJDb2RlPUQuY2hhckNvZGU7dGhpcy50YXJnZXQ9Qi5nZXRUYXJnZXQoRCk7dGhpcy54eT1CLmdldFhZKEQpfWVsc2V7dGhpcy5idXR0b249LTE7dGhpcy5zaGlmdEtleT1mYWxzZTt0aGlzLmN0cmxLZXk9ZmFsc2U7dGhpcy5hbHRLZXk9ZmFsc2U7dGhpcy5rZXlDb2RlPTA7dGhpcy5jaGFyQ29kZT0wO3RoaXMudGFyZ2V0PW51bGw7dGhpcy54eT1bMCwwXX1yZXR1cm4gdGhpc30sc3RvcEV2ZW50OmZ1bmN0aW9uKCl7aWYodGhpcy5icm93c2VyRXZlbnQpe2lmKHRoaXMuYnJvd3NlckV2ZW50LnR5cGU9PSJtb3VzZWRvd24iKXtFeHQuRXZlbnRNYW5hZ2VyLnN0b3BwZWRNb3VzZURvd25FdmVudC5maXJlKHRoaXMpfUIuc3RvcEV2ZW50KHRoaXMuYnJvd3NlckV2ZW50KX19LHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7aWYodGhpcy5icm93c2VyRXZlbnQpe0IucHJldmVudERlZmF1bHQodGhpcy5icm93c2VyRXZlbnQpfX0saXNOYXZLZXlQcmVzczpmdW5jdGlvbigpe3ZhciBEPXRoaXMua2V5Q29kZTtEPUV4dC5pc1NhZmFyaT8oQVtEXXx8RCk6RDtyZXR1cm4oRD49MzMmJkQ8PTQwKXx8RD09dGhpcy5SRVRVUk58fEQ9PXRoaXMuVEFCfHxEPT10aGlzLkVTQ30saXNTcGVjaWFsS2V5OmZ1bmN0aW9uKCl7dmFyIEQ9dGhpcy5rZXlDb2RlO3JldHVybih0aGlzLnR5cGU9PSJrZXlwcmVzcyImJnRoaXMuY3RybEtleSl8fEQ9PTl8fEQ9PTEzfHxEPT00MHx8RD09Mjd8fChEPT0xNil8fChEPT0xNyl8fChEPj0xOCYmRDw9MjApfHwoRD49MzMmJkQ8PTM1KXx8KEQ+PTM2JiZEPD0zOSl8fChEPj00NCYmRDw9NDUpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXtpZih0aGlzLmJyb3dzZXJFdmVudCl7aWYodGhpcy5icm93c2VyRXZlbnQudHlwZT09Im1vdXNlZG93biIpe0V4dC5FdmVudE1hbmFnZXIuc3RvcHBlZE1vdXNlRG93bkV2ZW50LmZpcmUodGhpcyl9Qi5zdG9wUHJvcGFnYXRpb24odGhpcy5icm93c2VyRXZlbnQpfX0sZ2V0Q2hhckNvZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jaGFyQ29kZXx8dGhpcy5rZXlDb2RlfSxnZXRLZXk6ZnVuY3Rpb24oKXt2YXIgRD10aGlzLmtleUNvZGV8fHRoaXMuY2hhckNvZGU7cmV0dXJuIEV4dC5pc1NhZmFyaT8oQVtEXXx8RCk6RH0sZ2V0UGFnZVg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54eVswXX0sZ2V0UGFnZVk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54eVsxXX0sZ2V0VGltZTpmdW5jdGlvbigpe2lmKHRoaXMuYnJvd3NlckV2ZW50KXtyZXR1cm4gQi5nZXRUaW1lKHRoaXMuYnJvd3NlckV2ZW50KX1yZXR1cm4gbnVsbH0sZ2V0WFk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54eX0sZ2V0VGFyZ2V0OmZ1bmN0aW9uKEUsRyxEKXt2YXIgRj1FeHQuZ2V0KHRoaXMudGFyZ2V0KTtyZXR1cm4gRT9GLmZpbmRQYXJlbnQoRSxHLEQpOihEP0Y6dGhpcy50YXJnZXQpfSxnZXRSZWxhdGVkVGFyZ2V0OmZ1bmN0aW9uKCl7aWYodGhpcy5icm93c2VyRXZlbnQpe3JldHVybiBCLmdldFJlbGF0ZWRUYXJnZXQodGhpcy5icm93c2VyRXZlbnQpfXJldHVybiBudWxsfSxnZXRXaGVlbERlbHRhOmZ1bmN0aW9uKCl7dmFyIEQ9dGhpcy5icm93c2VyRXZlbnQ7dmFyIEU9MDtpZihELndoZWVsRGVsdGEpe0U9RC53aGVlbERlbHRhLzEyMH1lbHNle2lmKEQuZGV0YWlsKXtFPS1ELmRldGFpbC8zfX1yZXR1cm4gRX0saGFzTW9kaWZpZXI6ZnVuY3Rpb24oKXtyZXR1cm4oKHRoaXMuY3RybEtleXx8dGhpcy5hbHRLZXkpfHx0aGlzLnNoaWZ0S2V5KT90cnVlOmZhbHNlfSx3aXRoaW46ZnVuY3Rpb24oRSxGKXt2YXIgRD10aGlzW0Y/ImdldFJlbGF0ZWRUYXJnZXQiOiJnZXRUYXJnZXQiXSgpO3JldHVybiBEJiZFeHQuZmx5KEUpLmNvbnRhaW5zKEQpfSxnZXRQb2ludDpmdW5jdGlvbigpe3JldHVybiBuZXcgRXh0LmxpYi5Qb2ludCh0aGlzLnh5WzBdLHRoaXMueHlbMV0pfX07cmV0dXJuIG5ldyBFeHQuRXZlbnRPYmplY3RJbXBsKCl9KCk7DQooZnVuY3Rpb24oKXt2YXIgRD1FeHQubGliLkRvbTt2YXIgRT1FeHQubGliLkV2ZW50O3ZhciBBPUV4dC5saWIuQW5pbTt2YXIgcHJvcENhY2hlPXt9O3ZhciBjYW1lbFJlPS8oLVthLXpdKS9naTt2YXIgY2FtZWxGbj1mdW5jdGlvbihtLGEpe3JldHVybiBhLmNoYXJBdCgxKS50b1VwcGVyQ2FzZSgpfTt2YXIgdmlldz1kb2N1bWVudC5kZWZhdWx0VmlldztFeHQuRWxlbWVudD1mdW5jdGlvbihlbGVtZW50LGZvcmNlTmV3KXt2YXIgZG9tPXR5cGVvZiBlbGVtZW50PT0ic3RyaW5nIj9kb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50KTplbGVtZW50O2lmKCFkb20pe3JldHVybiBudWxsfXZhciBpZD1kb20uaWQ7aWYoZm9yY2VOZXchPT10cnVlJiZpZCYmRXh0LkVsZW1lbnQuY2FjaGVbaWRdKXtyZXR1cm4gRXh0LkVsZW1lbnQuY2FjaGVbaWRdfXRoaXMuZG9tPWRvbTt0aGlzLmlkPWlkfHxFeHQuaWQoZG9tKX07dmFyIEVsPUV4dC5FbGVtZW50O0VsLnByb3RvdHlwZT17b3JpZ2luYWxEaXNwbGF5OiIiLHZpc2liaWxpdHlNb2RlOjEsZGVmYXVsdFVuaXQ6InB4IixzZXRWaXNpYmlsaXR5TW9kZTpmdW5jdGlvbih2aXNNb2RlKXt0aGlzLnZpc2liaWxpdHlNb2RlPXZpc01vZGU7cmV0dXJuIHRoaXN9LGVuYWJsZURpc3BsYXlNb2RlOmZ1bmN0aW9uKGRpc3BsYXkpe3RoaXMuc2V0VmlzaWJpbGl0eU1vZGUoRWwuRElTUExBWSk7aWYodHlwZW9mIGRpc3BsYXkhPSJ1bmRlZmluZWQiKXt0aGlzLm9yaWdpbmFsRGlzcGxheT1kaXNwbGF5fXJldHVybiB0aGlzfSxmaW5kUGFyZW50OmZ1bmN0aW9uKHNpbXBsZVNlbGVjdG9yLG1heERlcHRoLHJldHVybkVsKXt2YXIgcD10aGlzLmRvbSxiPWRvY3VtZW50LmJvZHksZGVwdGg9MCxkcT1FeHQuRG9tUXVlcnksc3RvcEVsO21heERlcHRoPW1heERlcHRofHw1MDtpZih0eXBlb2YgbWF4RGVwdGghPSJudW1iZXIiKXtzdG9wRWw9RXh0LmdldERvbShtYXhEZXB0aCk7bWF4RGVwdGg9MTB9d2hpbGUocCYmcC5ub2RlVHlwZT09MSYmZGVwdGg8bWF4RGVwdGgmJnAhPWImJnAhPXN0b3BFbCl7aWYoZHEuaXMocCxzaW1wbGVTZWxlY3Rvcikpe3JldHVybiByZXR1cm5FbD9FeHQuZ2V0KHApOnB9ZGVwdGgrKztwPXAucGFyZW50Tm9kZX1yZXR1cm4gbnVsbH0sZmluZFBhcmVudE5vZGU6ZnVuY3Rpb24oc2ltcGxlU2VsZWN0b3IsbWF4RGVwdGgscmV0dXJuRWwpe3ZhciBwPUV4dC5mbHkodGhpcy5kb20ucGFyZW50Tm9kZSwiX2ludGVybmFsIik7cmV0dXJuIHA/cC5maW5kUGFyZW50KHNpbXBsZVNlbGVjdG9yLG1heERlcHRoLHJldHVybkVsKTpudWxsfSx1cDpmdW5jdGlvbihzaW1wbGVTZWxlY3RvcixtYXhEZXB0aCl7cmV0dXJuIHRoaXMuZmluZFBhcmVudE5vZGUoc2ltcGxlU2VsZWN0b3IsbWF4RGVwdGgsdHJ1ZSl9LGlzOmZ1bmN0aW9uKHNpbXBsZVNlbGVjdG9yKXtyZXR1cm4gRXh0LkRvbVF1ZXJ5LmlzKHRoaXMuZG9tLHNpbXBsZVNlbGVjdG9yKX0sYW5pbWF0ZTpmdW5jdGlvbihhcmdzLGR1cmF0aW9uLG9uQ29tcGxldGUsZWFzaW5nLGFuaW1UeXBlKXt0aGlzLmFuaW0oYXJncyx7ZHVyYXRpb246ZHVyYXRpb24sY2FsbGJhY2s6b25Db21wbGV0ZSxlYXNpbmc6ZWFzaW5nfSxhbmltVHlwZSk7cmV0dXJuIHRoaXN9LGFuaW06ZnVuY3Rpb24oYXJncyxvcHQsYW5pbVR5cGUsZGVmYXVsdER1cixkZWZhdWx0RWFzZSxjYil7YW5pbVR5cGU9YW5pbVR5cGV8fCJydW4iO29wdD1vcHR8fHt9O3ZhciBhbmltPUV4dC5saWIuQW5pbVthbmltVHlwZV0odGhpcy5kb20sYXJncywob3B0LmR1cmF0aW9ufHxkZWZhdWx0RHVyKXx8MC4zNSwob3B0LmVhc2luZ3x8ZGVmYXVsdEVhc2UpfHwiZWFzZU91dCIsZnVuY3Rpb24oKXtFeHQuY2FsbGJhY2soY2IsdGhpcyk7RXh0LmNhbGxiYWNrKG9wdC5jYWxsYmFjayxvcHQuc2NvcGV8fHRoaXMsW3RoaXMsb3B0XSl9LHRoaXMpO29wdC5hbmltPWFuaW07cmV0dXJuIGFuaW19LHByZWFuaW06ZnVuY3Rpb24oYSxpKXtyZXR1cm4gIWFbaV0/ZmFsc2U6KHR5cGVvZiBhW2ldPT0ib2JqZWN0Ij9hW2ldOntkdXJhdGlvbjphW2krMV0sY2FsbGJhY2s6YVtpKzJdLGVhc2luZzphW2krM119KX0sY2xlYW46ZnVuY3Rpb24oZm9yY2VSZWNsZWFuKXtpZih0aGlzLmlzQ2xlYW5lZCYmZm9yY2VSZWNsZWFuIT09dHJ1ZSl7cmV0dXJuIHRoaXN9dmFyIG5zPS9cUy87dmFyIGQ9dGhpcy5kb20sbj1kLmZpcnN0Q2hpbGQsbmk9LTE7d2hpbGUobil7dmFyIG54PW4ubmV4dFNpYmxpbmc7aWYobi5ub2RlVHlwZT09MyYmIW5zLnRlc3Qobi5ub2RlVmFsdWUpKXtkLnJlbW92ZUNoaWxkKG4pfWVsc2V7bi5ub2RlSW5kZXg9KytuaX1uPW54fXRoaXMuaXNDbGVhbmVkPXRydWU7cmV0dXJuIHRoaXN9LHNjcm9sbEludG9WaWV3OmZ1bmN0aW9uKGNvbnRhaW5lcixoc2Nyb2xsKXt2YXIgYz1FeHQuZ2V0RG9tKGNvbnRhaW5lcil8fEV4dC5nZXRCb2R5KCkuZG9tO3ZhciBlbD10aGlzLmRvbTt2YXIgbz10aGlzLmdldE9mZnNldHNUbyhjKSxsPW9bMF0rYy5zY3JvbGxMZWZ0LHQ9b1sxXStjLnNjcm9sbFRvcCxiPXQrZWwub2Zmc2V0SGVpZ2h0LHI9bCtlbC5vZmZzZXRXaWR0aDt2YXIgY2g9Yy5jbGllbnRIZWlnaHQ7dmFyIGN0PXBhcnNlSW50KGMuc2Nyb2xsVG9wLDEwKTt2YXIgY2w9cGFyc2VJbnQoYy5zY3JvbGxMZWZ0LDEwKTt2YXIgY2I9Y3QrY2g7dmFyIGNyPWNsK2MuY2xpZW50V2lkdGg7aWYoZWwub2Zmc2V0SGVpZ2h0PmNofHx0PGN0KXtjLnNjcm9sbFRvcD10fWVsc2V7aWYoYj5jYil7Yy5zY3JvbGxUb3A9Yi1jaH19Yy5zY3JvbGxUb3A9Yy5zY3JvbGxUb3A7aWYoaHNjcm9sbCE9PWZhbHNlKXtpZihlbC5vZmZzZXRXaWR0aD5jLmNsaWVudFdpZHRofHxsPGNsKXtjLnNjcm9sbExlZnQ9bH1lbHNle2lmKHI+Y3Ipe2Muc2Nyb2xsTGVmdD1yLWMuY2xpZW50V2lkdGh9fWMuc2Nyb2xsTGVmdD1jLnNjcm9sbExlZnR9cmV0dXJuIHRoaXN9LHNjcm9sbENoaWxkSW50b1ZpZXc6ZnVuY3Rpb24oY2hpbGQsaHNjcm9sbCl7RXh0LmZseShjaGlsZCwiX3Njcm9sbENoaWxkSW50b1ZpZXciKS5zY3JvbGxJbnRvVmlldyh0aGlzLGhzY3JvbGwpfSxhdXRvSGVpZ2h0OmZ1bmN0aW9uKGFuaW1hdGUsZHVyYXRpb24sb25Db21wbGV0ZSxlYXNpbmcpe3ZhciBvbGRIZWlnaHQ9dGhpcy5nZXRIZWlnaHQoKTt0aGlzLmNsaXAoKTt0aGlzLnNldEhlaWdodCgxKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIGhlaWdodD1wYXJzZUludCh0aGlzLmRvbS5zY3JvbGxIZWlnaHQsMTApO2lmKCFhbmltYXRlKXt0aGlzLnNldEhlaWdodChoZWlnaHQpO3RoaXMudW5jbGlwKCk7aWYodHlwZW9mIG9uQ29tcGxldGU9PSJmdW5jdGlvbiIpe29uQ29tcGxldGUoKX19ZWxzZXt0aGlzLnNldEhlaWdodChvbGRIZWlnaHQpO3RoaXMuc2V0SGVpZ2h0KGhlaWdodCxhbmltYXRlLGR1cmF0aW9uLGZ1bmN0aW9uKCl7dGhpcy51bmNsaXAoKTtpZih0eXBlb2Ygb25Db21wbGV0ZT09ImZ1bmN0aW9uIil7b25Db21wbGV0ZSgpfX0uY3JlYXRlRGVsZWdhdGUodGhpcyksZWFzaW5nKX19LmNyZWF0ZURlbGVnYXRlKHRoaXMpLDApO3JldHVybiB0aGlzfSxjb250YWluczpmdW5jdGlvbihlbCl7aWYoIWVsKXtyZXR1cm4gZmFsc2V9cmV0dXJuIEQuaXNBbmNlc3Rvcih0aGlzLmRvbSxlbC5kb20/ZWwuZG9tOmVsKX0saXNWaXNpYmxlOmZ1bmN0aW9uKGRlZXApe3ZhciB2aXM9ISh0aGlzLmdldFN0eWxlKCJ2aXNpYmlsaXR5Iik9PSJoaWRkZW4ifHx0aGlzLmdldFN0eWxlKCJkaXNwbGF5Iik9PSJub25lIik7aWYoZGVlcCE9PXRydWV8fCF2aXMpe3JldHVybiB2aXN9dmFyIHA9dGhpcy5kb20ucGFyZW50Tm9kZTt3aGlsZShwJiZwLnRhZ05hbWUudG9Mb3dlckNhc2UoKSE9ImJvZHkiKXtpZighRXh0LmZseShwLCJfaXNWaXNpYmxlIikuaXNWaXNpYmxlKCkpe3JldHVybiBmYWxzZX1wPXAucGFyZW50Tm9kZX1yZXR1cm4gdHJ1ZX0sc2VsZWN0OmZ1bmN0aW9uKHNlbGVjdG9yLHVuaXF1ZSl7cmV0dXJuIEVsLnNlbGVjdChzZWxlY3Rvcix1bmlxdWUsdGhpcy5kb20pfSxxdWVyeTpmdW5jdGlvbihzZWxlY3Rvcix1bmlxdWUpe3JldHVybiBFeHQuRG9tUXVlcnkuc2VsZWN0KHNlbGVjdG9yLHRoaXMuZG9tKX0sY2hpbGQ6ZnVuY3Rpb24oc2VsZWN0b3IscmV0dXJuRG9tKXt2YXIgbj1FeHQuRG9tUXVlcnkuc2VsZWN0Tm9kZShzZWxlY3Rvcix0aGlzLmRvbSk7cmV0dXJuIHJldHVybkRvbT9uOkV4dC5nZXQobil9LGRvd246ZnVuY3Rpb24oc2VsZWN0b3IscmV0dXJuRG9tKXt2YXIgbj1FeHQuRG9tUXVlcnkuc2VsZWN0Tm9kZSgiID4gIitzZWxlY3Rvcix0aGlzLmRvbSk7cmV0dXJuIHJldHVybkRvbT9uOkV4dC5nZXQobil9LGluaXRERDpmdW5jdGlvbihncm91cCxjb25maWcsb3ZlcnJpZGVzKXt2YXIgZGQ9bmV3IEV4dC5kZC5ERChFeHQuaWQodGhpcy5kb20pLGdyb3VwLGNvbmZpZyk7cmV0dXJuIEV4dC5hcHBseShkZCxvdmVycmlkZXMpfSxpbml0RERQcm94eTpmdW5jdGlvbihncm91cCxjb25maWcsb3ZlcnJpZGVzKXt2YXIgZGQ9bmV3IEV4dC5kZC5ERFByb3h5KEV4dC5pZCh0aGlzLmRvbSksZ3JvdXAsY29uZmlnKTtyZXR1cm4gRXh0LmFwcGx5KGRkLG92ZXJyaWRlcyl9LGluaXRERFRhcmdldDpmdW5jdGlvbihncm91cCxjb25maWcsb3ZlcnJpZGVzKXt2YXIgZGQ9bmV3IEV4dC5kZC5ERFRhcmdldChFeHQuaWQodGhpcy5kb20pLGdyb3VwLGNvbmZpZyk7cmV0dXJuIEV4dC5hcHBseShkZCxvdmVycmlkZXMpfSxzZXRWaXNpYmxlOmZ1bmN0aW9uKHZpc2libGUsYW5pbWF0ZSl7aWYoIWFuaW1hdGV8fCFBKXtpZih0aGlzLnZpc2liaWxpdHlNb2RlPT1FbC5ESVNQTEFZKXt0aGlzLnNldERpc3BsYXllZCh2aXNpYmxlKX1lbHNle3RoaXMuZml4RGlzcGxheSgpO3RoaXMuZG9tLnN0eWxlLnZpc2liaWxpdHk9dmlzaWJsZT8idmlzaWJsZSI6ImhpZGRlbiJ9fWVsc2V7dmFyIGRvbT10aGlzLmRvbTt2YXIgdmlzTW9kZT10aGlzLnZpc2liaWxpdHlNb2RlO2lmKHZpc2libGUpe3RoaXMuc2V0T3BhY2l0eSgwLjAxKTt0aGlzLnNldFZpc2libGUodHJ1ZSl9dGhpcy5hbmltKHtvcGFjaXR5Ont0bzoodmlzaWJsZT8xOjApfX0sdGhpcy5wcmVhbmltKGFyZ3VtZW50cywxKSxudWxsLDAuMzUsImVhc2VJbiIsZnVuY3Rpb24oKXtpZighdmlzaWJsZSl7aWYodmlzTW9kZT09RWwuRElTUExBWSl7ZG9tLnN0eWxlLmRpc3BsYXk9Im5vbmUifWVsc2V7ZG9tLnN0eWxlLnZpc2liaWxpdHk9ImhpZGRlbiJ9RXh0LmdldChkb20pLnNldE9wYWNpdHkoMSl9fSl9cmV0dXJuIHRoaXN9LGlzRGlzcGxheWVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0U3R5bGUoImRpc3BsYXkiKSE9Im5vbmUifSx0b2dnbGU6ZnVuY3Rpb24oYW5pbWF0ZSl7dGhpcy5zZXRWaXNpYmxlKCF0aGlzLmlzVmlzaWJsZSgpLHRoaXMucHJlYW5pbShhcmd1bWVudHMsMCkpO3JldHVybiB0aGlzfSxzZXREaXNwbGF5ZWQ6ZnVuY3Rpb24odmFsdWUpe2lmKHR5cGVvZiB2YWx1ZT09ImJvb2xlYW4iKXt2YWx1ZT12YWx1ZT90aGlzLm9yaWdpbmFsRGlzcGxheToibm9uZSJ9dGhpcy5zZXRTdHlsZSgiZGlzcGxheSIsdmFsdWUpO3JldHVybiB0aGlzfSxmb2N1czpmdW5jdGlvbigpe3RyeXt0aGlzLmRvbS5mb2N1cygpfWNhdGNoKGUpe31yZXR1cm4gdGhpc30sYmx1cjpmdW5jdGlvbigpe3RyeXt0aGlzLmRvbS5ibHVyKCl9Y2F0Y2goZSl7fXJldHVybiB0aGlzfSxhZGRDbGFzczpmdW5jdGlvbihjbGFzc05hbWUpe2lmKEV4dC5pc0FycmF5KGNsYXNzTmFtZSkpe2Zvcih2YXIgaT0wLGxlbj1jbGFzc05hbWUubGVuZ3RoO2k8bGVuO2krKyl7dGhpcy5hZGRDbGFzcyhjbGFzc05hbWVbaV0pfX1lbHNle2lmKGNsYXNzTmFtZSYmIXRoaXMuaGFzQ2xhc3MoY2xhc3NOYW1lKSl7dGhpcy5kb20uY2xhc3NOYW1lPXRoaXMuZG9tLmNsYXNzTmFtZSsiICIrY2xhc3NOYW1lfX1yZXR1cm4gdGhpc30scmFkaW9DbGFzczpmdW5jdGlvbihjbGFzc05hbWUpe3ZhciBzaWJsaW5ncz10aGlzLmRvbS5wYXJlbnROb2RlLmNoaWxkTm9kZXM7Zm9yKHZhciBpPTA7aTxzaWJsaW5ncy5sZW5ndGg7aSsrKXt2YXIgcz1zaWJsaW5nc1tpXTtpZihzLm5vZGVUeXBlPT0xKXtFeHQuZ2V0KHMpLnJlbW92ZUNsYXNzKGNsYXNzTmFtZSl9fXRoaXMuYWRkQ2xhc3MoY2xhc3NOYW1lKTtyZXR1cm4gdGhpc30scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oY2xhc3NOYW1lKXtpZighY2xhc3NOYW1lfHwhdGhpcy5kb20uY2xhc3NOYW1lKXtyZXR1cm4gdGhpc31pZihFeHQuaXNBcnJheShjbGFzc05hbWUpKXtmb3IodmFyIGk9MCxsZW49Y2xhc3NOYW1lLmxlbmd0aDtpPGxlbjtpKyspe3RoaXMucmVtb3ZlQ2xhc3MoY2xhc3NOYW1lW2ldKX19ZWxzZXtpZih0aGlzLmhhc0NsYXNzKGNsYXNzTmFtZSkpe3ZhciByZT10aGlzLmNsYXNzUmVDYWNoZVtjbGFzc05hbWVdO2lmKCFyZSl7cmU9bmV3IFJlZ0V4cCgiKD86XnxcXHMrKSIrY2xhc3NOYW1lKyIoPzpcXHMrfCQpIiwiZyIpO3RoaXMuY2xhc3NSZUNhY2hlW2NsYXNzTmFtZV09cmV9dGhpcy5kb20uY2xhc3NOYW1lPXRoaXMuZG9tLmNsYXNzTmFtZS5yZXBsYWNlKHJlLCIgIil9fXJldHVybiB0aGlzfSxjbGFzc1JlQ2FjaGU6e30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oY2xhc3NOYW1lKXtpZih0aGlzLmhhc0NsYXNzKGNsYXNzTmFtZSkpe3RoaXMucmVtb3ZlQ2xhc3MoY2xhc3NOYW1lKX1lbHNle3RoaXMuYWRkQ2xhc3MoY2xhc3NOYW1lKX1yZXR1cm4gdGhpc30saGFzQ2xhc3M6ZnVuY3Rpb24oY2xhc3NOYW1lKXtyZXR1cm4gY2xhc3NOYW1lJiYoIiAiK3RoaXMuZG9tLmNsYXNzTmFtZSsiICIpLmluZGV4T2YoIiAiK2NsYXNzTmFtZSsiICIpIT0tMX0scmVwbGFjZUNsYXNzOmZ1bmN0aW9uKG9sZENsYXNzTmFtZSxuZXdDbGFzc05hbWUpe3RoaXMucmVtb3ZlQ2xhc3Mob2xkQ2xhc3NOYW1lKTt0aGlzLmFkZENsYXNzKG5ld0NsYXNzTmFtZSk7cmV0dXJuIHRoaXN9LGdldFN0eWxlczpmdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50cyxsZW49YS5sZW5ndGgscj17fTtmb3IodmFyIGk9MDtpPGxlbjtpKyspe3JbYVtpXV09dGhpcy5nZXRTdHlsZShhW2ldKX1yZXR1cm4gcn0sZ2V0U3R5bGU6ZnVuY3Rpb24oKXtyZXR1cm4gdmlldyYmdmlldy5nZXRDb21wdXRlZFN0eWxlP2Z1bmN0aW9uKHByb3Ape3ZhciBlbD10aGlzLmRvbSx2LGNzLGNhbWVsO2lmKHByb3A9PSJmbG9hdCIpe3Byb3A9ImNzc0Zsb2F0In1pZih2PWVsLnN0eWxlW3Byb3BdKXtyZXR1cm4gdn1pZihjcz12aWV3LmdldENvbXB1dGVkU3R5bGUoZWwsIiIpKXtpZighKGNhbWVsPXByb3BDYWNoZVtwcm9wXSkpe2NhbWVsPXByb3BDYWNoZVtwcm9wXT1wcm9wLnJlcGxhY2UoY2FtZWxSZSxjYW1lbEZuKX1yZXR1cm4gY3NbY2FtZWxdfXJldHVybiBudWxsfTpmdW5jdGlvbihwcm9wKXt2YXIgZWw9dGhpcy5kb20sdixjcyxjYW1lbDtpZihwcm9wPT0ib3BhY2l0eSIpe2lmKHR5cGVvZiBlbC5zdHlsZS5maWx0ZXI9PSJzdHJpbmciKXt2YXIgbT1lbC5zdHlsZS5maWx0ZXIubWF0Y2goL2FscGhhXChvcGFjaXR5PSguKilcKS9pKTtpZihtKXt2YXIgZnY9cGFyc2VGbG9hdChtWzFdKTtpZighaXNOYU4oZnYpKXtyZXR1cm4gZnY/ZnYvMTAwOjB9fX1yZXR1cm4gMX1lbHNle2lmKHByb3A9PSJmbG9hdCIpe3Byb3A9InN0eWxlRmxvYXQifX1pZighKGNhbWVsPXByb3BDYWNoZVtwcm9wXSkpe2NhbWVsPXByb3BDYWNoZVtwcm9wXT1wcm9wLnJlcGxhY2UoY2FtZWxSZSxjYW1lbEZuKX1pZih2PWVsLnN0eWxlW2NhbWVsXSl7cmV0dXJuIHZ9aWYoY3M9ZWwuY3VycmVudFN0eWxlKXtyZXR1cm4gY3NbY2FtZWxdfXJldHVybiBudWxsfX0oKSxzZXRTdHlsZTpmdW5jdGlvbihwcm9wLHZhbHVlKXtpZih0eXBlb2YgcHJvcD09InN0cmluZyIpe3ZhciBjYW1lbDtpZighKGNhbWVsPXByb3BDYWNoZVtwcm9wXSkpe2NhbWVsPXByb3BDYWNoZVtwcm9wXT1wcm9wLnJlcGxhY2UoY2FtZWxSZSxjYW1lbEZuKX1pZihjYW1lbD09Im9wYWNpdHkiKXt0aGlzLnNldE9wYWNpdHkodmFsdWUpfWVsc2V7dGhpcy5kb20uc3R5bGVbY2FtZWxdPXZhbHVlfX1lbHNle2Zvcih2YXIgc3R5bGUgaW4gcHJvcCl7aWYodHlwZW9mIHByb3Bbc3R5bGVdIT0iZnVuY3Rpb24iKXt0aGlzLnNldFN0eWxlKHN0eWxlLHByb3Bbc3R5bGVdKX19fXJldHVybiB0aGlzfSxhcHBseVN0eWxlczpmdW5jdGlvbihzdHlsZSl7RXh0LkRvbUhlbHBlci5hcHBseVN0eWxlcyh0aGlzLmRvbSxzdHlsZSk7cmV0dXJuIHRoaXN9LGdldFg6ZnVuY3Rpb24oKXtyZXR1cm4gRC5nZXRYKHRoaXMuZG9tKX0sZ2V0WTpmdW5jdGlvbigpe3JldHVybiBELmdldFkodGhpcy5kb20pfSxnZXRYWTpmdW5jdGlvbigpe3JldHVybiBELmdldFhZKHRoaXMuZG9tKX0sZ2V0T2Zmc2V0c1RvOmZ1bmN0aW9uKGVsKXt2YXIgbz10aGlzLmdldFhZKCk7dmFyIGU9RXh0LmZseShlbCwiX2ludGVybmFsIikuZ2V0WFkoKTtyZXR1cm5bb1swXS1lWzBdLG9bMV0tZVsxXV19LHNldFg6ZnVuY3Rpb24oeCxhbmltYXRlKXtpZighYW5pbWF0ZXx8IUEpe0Quc2V0WCh0aGlzLmRvbSx4KX1lbHNle3RoaXMuc2V0WFkoW3gsdGhpcy5nZXRZKCldLHRoaXMucHJlYW5pbShhcmd1bWVudHMsMSkpfXJldHVybiB0aGlzfSxzZXRZOmZ1bmN0aW9uKHksYW5pbWF0ZSl7aWYoIWFuaW1hdGV8fCFBKXtELnNldFkodGhpcy5kb20seSl9ZWxzZXt0aGlzLnNldFhZKFt0aGlzLmdldFgoKSx5XSx0aGlzLnByZWFuaW0oYXJndW1lbnRzLDEpKX1yZXR1cm4gdGhpc30sc2V0TGVmdDpmdW5jdGlvbihsZWZ0KXt0aGlzLnNldFN0eWxlKCJsZWZ0Iix0aGlzLmFkZFVuaXRzKGxlZnQpKTtyZXR1cm4gdGhpc30sc2V0VG9wOmZ1bmN0aW9uKHRvcCl7dGhpcy5zZXRTdHlsZSgidG9wIix0aGlzLmFkZFVuaXRzKHRvcCkpO3JldHVybiB0aGlzfSxzZXRSaWdodDpmdW5jdGlvbihyaWdodCl7dGhpcy5zZXRTdHlsZSgicmlnaHQiLHRoaXMuYWRkVW5pdHMocmlnaHQpKTtyZXR1cm4gdGhpc30sc2V0Qm90dG9tOmZ1bmN0aW9uKGJvdHRvbSl7dGhpcy5zZXRTdHlsZSgiYm90dG9tIix0aGlzLmFkZFVuaXRzKGJvdHRvbSkpO3JldHVybiB0aGlzfSxzZXRYWTpmdW5jdGlvbihwb3MsYW5pbWF0ZSl7aWYoIWFuaW1hdGV8fCFBKXtELnNldFhZKHRoaXMuZG9tLHBvcyl9ZWxzZXt0aGlzLmFuaW0oe3BvaW50czp7dG86cG9zfX0sdGhpcy5wcmVhbmltKGFyZ3VtZW50cywxKSwibW90aW9uIil9cmV0dXJuIHRoaXN9LHNldExvY2F0aW9uOmZ1bmN0aW9uKHgseSxhbmltYXRlKXt0aGlzLnNldFhZKFt4LHldLHRoaXMucHJlYW5pbShhcmd1bWVudHMsMikpO3JldHVybiB0aGlzfSxtb3ZlVG86ZnVuY3Rpb24oeCx5LGFuaW1hdGUpe3RoaXMuc2V0WFkoW3gseV0sdGhpcy5wcmVhbmltKGFyZ3VtZW50cywyKSk7cmV0dXJuIHRoaXN9LGdldFJlZ2lvbjpmdW5jdGlvbigpe3JldHVybiBELmdldFJlZ2lvbih0aGlzLmRvbSl9LGdldEhlaWdodDpmdW5jdGlvbihjb250ZW50SGVpZ2h0KXt2YXIgaD10aGlzLmRvbS5vZmZzZXRIZWlnaHR8fDA7aD1jb250ZW50SGVpZ2h0IT09dHJ1ZT9oOmgtdGhpcy5nZXRCb3JkZXJXaWR0aCgidGIiKS10aGlzLmdldFBhZGRpbmcoInRiIik7cmV0dXJuIGg8MD8wOmh9LGdldFdpZHRoOmZ1bmN0aW9uKGNvbnRlbnRXaWR0aCl7dmFyIHc9dGhpcy5kb20ub2Zmc2V0V2lkdGh8fDA7dz1jb250ZW50V2lkdGghPT10cnVlP3c6dy10aGlzLmdldEJvcmRlcldpZHRoKCJsciIpLXRoaXMuZ2V0UGFkZGluZygibHIiKTtyZXR1cm4gdzwwPzA6d30sZ2V0Q29tcHV0ZWRIZWlnaHQ6ZnVuY3Rpb24oKXt2YXIgaD1NYXRoLm1heCh0aGlzLmRvbS5vZmZzZXRIZWlnaHQsdGhpcy5kb20uY2xpZW50SGVpZ2h0KTtpZighaCl7aD1wYXJzZUludCh0aGlzLmdldFN0eWxlKCJoZWlnaHQiKSwxMCl8fDA7aWYoIXRoaXMuaXNCb3JkZXJCb3goKSl7aCs9dGhpcy5nZXRGcmFtZVdpZHRoKCJ0YiIpfX1yZXR1cm4gaH0sZ2V0Q29tcHV0ZWRXaWR0aDpmdW5jdGlvbigpe3ZhciB3PU1hdGgubWF4KHRoaXMuZG9tLm9mZnNldFdpZHRoLHRoaXMuZG9tLmNsaWVudFdpZHRoKTtpZighdyl7dz1wYXJzZUludCh0aGlzLmdldFN0eWxlKCJ3aWR0aCIpLDEwKXx8MDtpZighdGhpcy5pc0JvcmRlckJveCgpKXt3Kz10aGlzLmdldEZyYW1lV2lkdGgoImxyIil9fXJldHVybiB3fSxnZXRTaXplOmZ1bmN0aW9uKGNvbnRlbnRTaXplKXtyZXR1cm57d2lkdGg6dGhpcy5nZXRXaWR0aChjb250ZW50U2l6ZSksaGVpZ2h0OnRoaXMuZ2V0SGVpZ2h0KGNvbnRlbnRTaXplKX19LGdldFN0eWxlU2l6ZTpmdW5jdGlvbigpe3ZhciB3LGgsZD10aGlzLmRvbSxzPWQuc3R5bGU7aWYocy53aWR0aCYmcy53aWR0aCE9ImF1dG8iKXt3PXBhcnNlSW50KHMud2lkdGgsMTApO2lmKEV4dC5pc0JvcmRlckJveCl7dy09dGhpcy5nZXRGcmFtZVdpZHRoKCJsciIpfX1pZihzLmhlaWdodCYmcy5oZWlnaHQhPSJhdXRvIil7aD1wYXJzZUludChzLmhlaWdodCwxMCk7aWYoRXh0LmlzQm9yZGVyQm94KXtoLT10aGlzLmdldEZyYW1lV2lkdGgoInRiIil9fXJldHVybnt3aWR0aDp3fHx0aGlzLmdldFdpZHRoKHRydWUpLGhlaWdodDpofHx0aGlzLmdldEhlaWdodCh0cnVlKX19LGdldFZpZXdTaXplOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5kb20sZG9jPWRvY3VtZW50LGF3PTAsYWg9MDtpZihkPT1kb2N8fGQ9PWRvYy5ib2R5KXtyZXR1cm57d2lkdGg6RC5nZXRWaWV3V2lkdGgoKSxoZWlnaHQ6RC5nZXRWaWV3SGVpZ2h0KCl9fWVsc2V7cmV0dXJue3dpZHRoOmQuY2xpZW50V2lkdGgsaGVpZ2h0OmQuY2xpZW50SGVpZ2h0fX19LGdldFZhbHVlOmZ1bmN0aW9uKGFzTnVtYmVyKXtyZXR1cm4gYXNOdW1iZXI/cGFyc2VJbnQodGhpcy5kb20udmFsdWUsMTApOnRoaXMuZG9tLnZhbHVlfSxhZGp1c3RXaWR0aDpmdW5jdGlvbih3aWR0aCl7aWYodHlwZW9mIHdpZHRoPT0ibnVtYmVyIil7aWYodGhpcy5hdXRvQm94QWRqdXN0JiYhdGhpcy5pc0JvcmRlckJveCgpKXt3aWR0aC09KHRoaXMuZ2V0Qm9yZGVyV2lkdGgoImxyIikrdGhpcy5nZXRQYWRkaW5nKCJsciIpKX1pZih3aWR0aDwwKXt3aWR0aD0wfX1yZXR1cm4gd2lkdGh9LGFkanVzdEhlaWdodDpmdW5jdGlvbihoZWlnaHQpe2lmKHR5cGVvZiBoZWlnaHQ9PSJudW1iZXIiKXtpZih0aGlzLmF1dG9Cb3hBZGp1c3QmJiF0aGlzLmlzQm9yZGVyQm94KCkpe2hlaWdodC09KHRoaXMuZ2V0Qm9yZGVyV2lkdGgoInRiIikrdGhpcy5nZXRQYWRkaW5nKCJ0YiIpKX1pZihoZWlnaHQ8MCl7aGVpZ2h0PTB9fXJldHVybiBoZWlnaHR9LHNldFdpZHRoOmZ1bmN0aW9uKHdpZHRoLGFuaW1hdGUpe3dpZHRoPXRoaXMuYWRqdXN0V2lkdGgod2lkdGgpO2lmKCFhbmltYXRlfHwhQSl7dGhpcy5kb20uc3R5bGUud2lkdGg9dGhpcy5hZGRVbml0cyh3aWR0aCl9ZWxzZXt0aGlzLmFuaW0oe3dpZHRoOnt0bzp3aWR0aH19LHRoaXMucHJlYW5pbShhcmd1bWVudHMsMSkpfXJldHVybiB0aGlzfSxzZXRIZWlnaHQ6ZnVuY3Rpb24oaGVpZ2h0LGFuaW1hdGUpe2hlaWdodD10aGlzLmFkanVzdEhlaWdodChoZWlnaHQpO2lmKCFhbmltYXRlfHwhQSl7dGhpcy5kb20uc3R5bGUuaGVpZ2h0PXRoaXMuYWRkVW5pdHMoaGVpZ2h0KX1lbHNle3RoaXMuYW5pbSh7aGVpZ2h0Ont0bzpoZWlnaHR9fSx0aGlzLnByZWFuaW0oYXJndW1lbnRzLDEpKX1yZXR1cm4gdGhpc30sc2V0U2l6ZTpmdW5jdGlvbih3aWR0aCxoZWlnaHQsYW5pbWF0ZSl7aWYodHlwZW9mIHdpZHRoPT0ib2JqZWN0Iil7aGVpZ2h0PXdpZHRoLmhlaWdodDt3aWR0aD13aWR0aC53aWR0aH13aWR0aD10aGlzLmFkanVzdFdpZHRoKHdpZHRoKTtoZWlnaHQ9dGhpcy5hZGp1c3RIZWlnaHQoaGVpZ2h0KTtpZighYW5pbWF0ZXx8IUEpe3RoaXMuZG9tLnN0eWxlLndpZHRoPXRoaXMuYWRkVW5pdHMod2lkdGgpO3RoaXMuZG9tLnN0eWxlLmhlaWdodD10aGlzLmFkZFVuaXRzKGhlaWdodCl9ZWxzZXt0aGlzLmFuaW0oe3dpZHRoOnt0bzp3aWR0aH0saGVpZ2h0Ont0bzpoZWlnaHR9fSx0aGlzLnByZWFuaW0oYXJndW1lbnRzLDIpKX1yZXR1cm4gdGhpc30sc2V0Qm91bmRzOmZ1bmN0aW9uKHgseSx3aWR0aCxoZWlnaHQsYW5pbWF0ZSl7aWYoIWFuaW1hdGV8fCFBKXt0aGlzLnNldFNpemUod2lkdGgsaGVpZ2h0KTt0aGlzLnNldExvY2F0aW9uKHgseSl9ZWxzZXt3aWR0aD10aGlzLmFkanVzdFdpZHRoKHdpZHRoKTtoZWlnaHQ9dGhpcy5hZGp1c3RIZWlnaHQoaGVpZ2h0KTt0aGlzLmFuaW0oe3BvaW50czp7dG86W3gseV19LHdpZHRoOnt0bzp3aWR0aH0saGVpZ2h0Ont0bzpoZWlnaHR9fSx0aGlzLnByZWFuaW0oYXJndW1lbnRzLDQpLCJtb3Rpb24iKX1yZXR1cm4gdGhpc30sc2V0UmVnaW9uOmZ1bmN0aW9uKHJlZ2lvbixhbmltYXRlKXt0aGlzLnNldEJvdW5kcyhyZWdpb24ubGVmdCxyZWdpb24udG9wLHJlZ2lvbi5yaWdodC1yZWdpb24ubGVmdCxyZWdpb24uYm90dG9tLXJlZ2lvbi50b3AsdGhpcy5wcmVhbmltKGFyZ3VtZW50cywxKSk7cmV0dXJuIHRoaXN9LGFkZExpc3RlbmVyOmZ1bmN0aW9uKGV2ZW50TmFtZSxmbixzY29wZSxvcHRpb25zKXtFeHQuRXZlbnRNYW5hZ2VyLm9uKHRoaXMuZG9tLGV2ZW50TmFtZSxmbixzY29wZXx8dGhpcyxvcHRpb25zKX0scmVtb3ZlTGlzdGVuZXI6ZnVuY3Rpb24oZXZlbnROYW1lLGZuKXtFeHQuRXZlbnRNYW5hZ2VyLnJlbW92ZUxpc3RlbmVyKHRoaXMuZG9tLGV2ZW50TmFtZSxmbik7cmV0dXJuIHRoaXN9LHJlbW92ZUFsbExpc3RlbmVyczpmdW5jdGlvbigpe0UucHVyZ2VFbGVtZW50KHRoaXMuZG9tKTtyZXR1cm4gdGhpc30scmVsYXlFdmVudDpmdW5jdGlvbihldmVudE5hbWUsb2JzZXJ2YWJsZSl7dGhpcy5vbihldmVudE5hbWUsZnVuY3Rpb24oZSl7b2JzZXJ2YWJsZS5maXJlRXZlbnQoZXZlbnROYW1lLGUpfSl9LHNldE9wYWNpdHk6ZnVuY3Rpb24ob3BhY2l0eSxhbmltYXRlKXtpZighYW5pbWF0ZXx8IUEpe3ZhciBzPXRoaXMuZG9tLnN0eWxlO2lmKEV4dC5pc0lFKXtzLnpvb209MTtzLmZpbHRlcj0ocy5maWx0ZXJ8fCIiKS5yZXBsYWNlKC9hbHBoYVwoW15cKV0qXCkvZ2ksIiIpKyhvcGFjaXR5PT0xPyIiOiIgYWxwaGEob3BhY2l0eT0iK29wYWNpdHkqMTAwKyIpIil9ZWxzZXtzLm9wYWNpdHk9b3BhY2l0eX19ZWxzZXt0aGlzLmFuaW0oe29wYWNpdHk6e3RvOm9wYWNpdHl9fSx0aGlzLnByZWFuaW0oYXJndW1lbnRzLDEpLG51bGwsMC4zNSwiZWFzZUluIil9cmV0dXJuIHRoaXN9LGdldExlZnQ6ZnVuY3Rpb24obG9jYWwpe2lmKCFsb2NhbCl7cmV0dXJuIHRoaXMuZ2V0WCgpfWVsc2V7cmV0dXJuIHBhcnNlSW50KHRoaXMuZ2V0U3R5bGUoImxlZnQiKSwxMCl8fDB9fSxnZXRSaWdodDpmdW5jdGlvbihsb2NhbCl7aWYoIWxvY2FsKXtyZXR1cm4gdGhpcy5nZXRYKCkrdGhpcy5nZXRXaWR0aCgpfWVsc2V7cmV0dXJuKHRoaXMuZ2V0TGVmdCh0cnVlKSt0aGlzLmdldFdpZHRoKCkpfHwwfX0sZ2V0VG9wOmZ1bmN0aW9uKGxvY2FsKXtpZighbG9jYWwpe3JldHVybiB0aGlzLmdldFkoKX1lbHNle3JldHVybiBwYXJzZUludCh0aGlzLmdldFN0eWxlKCJ0b3AiKSwxMCl8fDB9fSxnZXRCb3R0b206ZnVuY3Rpb24obG9jYWwpe2lmKCFsb2NhbCl7cmV0dXJuIHRoaXMuZ2V0WSgpK3RoaXMuZ2V0SGVpZ2h0KCl9ZWxzZXtyZXR1cm4odGhpcy5nZXRUb3AodHJ1ZSkrdGhpcy5nZXRIZWlnaHQoKSl8fDB9fSxwb3NpdGlvbjpmdW5jdGlvbihwb3MsekluZGV4LHgseSl7aWYoIXBvcyl7aWYodGhpcy5nZXRTdHlsZSgicG9zaXRpb24iKT09InN0YXRpYyIpe3RoaXMuc2V0U3R5bGUoInBvc2l0aW9uIiwicmVsYXRpdmUiKX19ZWxzZXt0aGlzLnNldFN0eWxlKCJwb3NpdGlvbiIscG9zKX1pZih6SW5kZXgpe3RoaXMuc2V0U3R5bGUoInotaW5kZXgiLHpJbmRleCl9aWYoeCE9PXVuZGVmaW5lZCYmeSE9PXVuZGVmaW5lZCl7dGhpcy5zZXRYWShbeCx5XSl9ZWxzZXtpZih4IT09dW5kZWZpbmVkKXt0aGlzLnNldFgoeCl9ZWxzZXtpZih5IT09dW5kZWZpbmVkKXt0aGlzLnNldFkoeSl9fX19LGNsZWFyUG9zaXRpb25pbmc6ZnVuY3Rpb24odmFsdWUpe3ZhbHVlPXZhbHVlfHwiIjt0aGlzLnNldFN0eWxlKHsibGVmdCI6dmFsdWUsInJpZ2h0Ijp2YWx1ZSwidG9wIjp2YWx1ZSwiYm90dG9tIjp2YWx1ZSwiei1pbmRleCI6IiIsInBvc2l0aW9uIjoic3RhdGljIn0pO3JldHVybiB0aGlzfSxnZXRQb3NpdGlvbmluZzpmdW5jdGlvbigpe3ZhciBsPXRoaXMuZ2V0U3R5bGUoImxlZnQiKTt2YXIgdD10aGlzLmdldFN0eWxlKCJ0b3AiKTtyZXR1cm57InBvc2l0aW9uIjp0aGlzLmdldFN0eWxlKCJwb3NpdGlvbiIpLCJsZWZ0IjpsLCJyaWdodCI6bD8iIjp0aGlzLmdldFN0eWxlKCJyaWdodCIpLCJ0b3AiOnQsImJvdHRvbSI6dD8iIjp0aGlzLmdldFN0eWxlKCJib3R0b20iKSwiei1pbmRleCI6dGhpcy5nZXRTdHlsZSgiei1pbmRleCIpfX0sZ2V0Qm9yZGVyV2lkdGg6ZnVuY3Rpb24oc2lkZSl7cmV0dXJuIHRoaXMuYWRkU3R5bGVzKHNpZGUsRWwuYm9yZGVycyl9LGdldFBhZGRpbmc6ZnVuY3Rpb24oc2lkZSl7cmV0dXJuIHRoaXMuYWRkU3R5bGVzKHNpZGUsRWwucGFkZGluZ3MpfSxzZXRQb3NpdGlvbmluZzpmdW5jdGlvbihwYyl7dGhpcy5hcHBseVN0eWxlcyhwYyk7aWYocGMucmlnaHQ9PSJhdXRvIil7dGhpcy5kb20uc3R5bGUucmlnaHQ9IiJ9aWYocGMuYm90dG9tPT0iYXV0byIpe3RoaXMuZG9tLnN0eWxlLmJvdHRvbT0iIn1yZXR1cm4gdGhpc30sZml4RGlzcGxheTpmdW5jdGlvbigpe2lmKHRoaXMuZ2V0U3R5bGUoImRpc3BsYXkiKT09Im5vbmUiKXt0aGlzLnNldFN0eWxlKCJ2aXNpYmlsaXR5IiwiaGlkZGVuIik7dGhpcy5zZXRTdHlsZSgiZGlzcGxheSIsdGhpcy5vcmlnaW5hbERpc3BsYXkpO2lmKHRoaXMuZ2V0U3R5bGUoImRpc3BsYXkiKT09Im5vbmUiKXt0aGlzLnNldFN0eWxlKCJkaXNwbGF5IiwiYmxvY2siKX19fSxzZXRPdmVyZmxvdzpmdW5jdGlvbih2KXtpZih2PT0iYXV0byImJkV4dC5pc01hYyYmRXh0LmlzR2Vja28pe3RoaXMuZG9tLnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iOyhmdW5jdGlvbigpe3RoaXMuZG9tLnN0eWxlLm92ZXJmbG93PSJhdXRvIn0pLmRlZmVyKDEsdGhpcyl9ZWxzZXt0aGlzLmRvbS5zdHlsZS5vdmVyZmxvdz12fX0sc2V0TGVmdFRvcDpmdW5jdGlvbihsZWZ0LHRvcCl7dGhpcy5kb20uc3R5bGUubGVmdD10aGlzLmFkZFVuaXRzKGxlZnQpO3RoaXMuZG9tLnN0eWxlLnRvcD10aGlzLmFkZFVuaXRzKHRvcCk7cmV0dXJuIHRoaXN9LG1vdmU6ZnVuY3Rpb24oZGlyZWN0aW9uLGRpc3RhbmNlLGFuaW1hdGUpe3ZhciB4eT10aGlzLmdldFhZKCk7ZGlyZWN0aW9uPWRpcmVjdGlvbi50b0xvd2VyQ2FzZSgpO3N3aXRjaChkaXJlY3Rpb24pe2Nhc2UibCI6Y2FzZSJsZWZ0Ijp0aGlzLm1vdmVUbyh4eVswXS1kaXN0YW5jZSx4eVsxXSx0aGlzLnByZWFuaW0oYXJndW1lbnRzLDIpKTticmVhaztjYXNlInIiOmNhc2UicmlnaHQiOnRoaXMubW92ZVRvKHh5WzBdK2Rpc3RhbmNlLHh5WzFdLHRoaXMucHJlYW5pbShhcmd1bWVudHMsMikpO2JyZWFrO2Nhc2UidCI6Y2FzZSJ0b3AiOmNhc2UidXAiOnRoaXMubW92ZVRvKHh5WzBdLHh5WzFdLWRpc3RhbmNlLHRoaXMucHJlYW5pbShhcmd1bWVudHMsMikpO2JyZWFrO2Nhc2UiYiI6Y2FzZSJib3R0b20iOmNhc2UiZG93biI6dGhpcy5tb3ZlVG8oeHlbMF0seHlbMV0rZGlzdGFuY2UsdGhpcy5wcmVhbmltKGFyZ3VtZW50cywyKSk7YnJlYWt9cmV0dXJuIHRoaXN9LGNsaXA6ZnVuY3Rpb24oKXtpZighdGhpcy5pc0NsaXBwZWQpe3RoaXMuaXNDbGlwcGVkPXRydWU7dGhpcy5vcmlnaW5hbENsaXA9eyJvIjp0aGlzLmdldFN0eWxlKCJvdmVyZmxvdyIpLCJ4Ijp0aGlzLmdldFN0eWxlKCJvdmVyZmxvdy14IiksInkiOnRoaXMuZ2V0U3R5bGUoIm92ZXJmbG93LXkiKX07dGhpcy5zZXRTdHlsZSgib3ZlcmZsb3ciLCJoaWRkZW4iKTt0aGlzLnNldFN0eWxlKCJvdmVyZmxvdy14IiwiaGlkZGVuIik7dGhpcy5zZXRTdHlsZSgib3ZlcmZsb3cteSIsImhpZGRlbiIpfXJldHVybiB0aGlzfSx1bmNsaXA6ZnVuY3Rpb24oKXtpZih0aGlzLmlzQ2xpcHBlZCl7dGhpcy5pc0NsaXBwZWQ9ZmFsc2U7dmFyIG89dGhpcy5vcmlnaW5hbENsaXA7aWYoby5vKXt0aGlzLnNldFN0eWxlKCJvdmVyZmxvdyIsby5vKX1pZihvLngpe3RoaXMuc2V0U3R5bGUoIm92ZXJmbG93LXgiLG8ueCl9aWYoby55KXt0aGlzLnNldFN0eWxlKCJvdmVyZmxvdy15IixvLnkpfX1yZXR1cm4gdGhpc30sZ2V0QW5jaG9yWFk6ZnVuY3Rpb24oYW5jaG9yLGxvY2FsLHMpe3ZhciB3LGgsdnA9ZmFsc2U7aWYoIXMpe3ZhciBkPXRoaXMuZG9tO2lmKGQ9PWRvY3VtZW50LmJvZHl8fGQ9PWRvY3VtZW50KXt2cD10cnVlO3c9RC5nZXRWaWV3V2lkdGgoKTtoPUQuZ2V0Vmlld0hlaWdodCgpfWVsc2V7dz10aGlzLmdldFdpZHRoKCk7aD10aGlzLmdldEhlaWdodCgpfX1lbHNle3c9cy53aWR0aDtoPXMuaGVpZ2h0fXZhciB4PTAseT0wLHI9TWF0aC5yb3VuZDtzd2l0Y2goKGFuY2hvcnx8InRsIikudG9Mb3dlckNhc2UoKSl7Y2FzZSJjIjp4PXIodyowLjUpO3k9cihoKjAuNSk7YnJlYWs7Y2FzZSJ0Ijp4PXIodyowLjUpO3k9MDticmVhaztjYXNlImwiOng9MDt5PXIoaCowLjUpO2JyZWFrO2Nhc2UiciI6eD13O3k9cihoKjAuNSk7YnJlYWs7Y2FzZSJiIjp4PXIodyowLjUpO3k9aDticmVhaztjYXNlInRsIjp4PTA7eT0wO2JyZWFrO2Nhc2UiYmwiOng9MDt5PWg7YnJlYWs7Y2FzZSJiciI6eD13O3k9aDticmVhaztjYXNlInRyIjp4PXc7eT0wO2JyZWFrfWlmKGxvY2FsPT09dHJ1ZSl7cmV0dXJuW3gseV19aWYodnApe3ZhciBzYz10aGlzLmdldFNjcm9sbCgpO3JldHVyblt4K3NjLmxlZnQseStzYy50b3BdfXZhciBvPXRoaXMuZ2V0WFkoKTtyZXR1cm5beCtvWzBdLHkrb1sxXV19LGdldEFsaWduVG9YWTpmdW5jdGlvbihlbCxwLG8pe2VsPUV4dC5nZXQoZWwpO2lmKCFlbHx8IWVsLmRvbSl7dGhyb3ciRWxlbWVudC5hbGlnblRvWFkgd2l0aCBhbiBlbGVtZW50IHRoYXQgZG9lc24ndCBleGlzdCJ9dmFyIGQ9dGhpcy5kb207dmFyIGM9ZmFsc2U7dmFyIHAxPSIiLHAyPSIiO289b3x8WzAsMF07aWYoIXApe3A9InRsLWJsIn1lbHNle2lmKHA9PSI/Iil7cD0idGwtYmw/In1lbHNle2lmKHAuaW5kZXhPZigiLSIpPT0tMSl7cD0idGwtIitwfX19cD1wLnRvTG93ZXJDYXNlKCk7dmFyIG09cC5tYXRjaCgvXihbYS16XSspLShbYS16XSspKFw/KT8kLyk7aWYoIW0pe3Rocm93IkVsZW1lbnQuYWxpZ25UbyB3aXRoIGFuIGludmFsaWQgYWxpZ25tZW50ICIrcH1wMT1tWzFdO3AyPW1bMl07Yz0hIW1bM107dmFyIGExPXRoaXMuZ2V0QW5jaG9yWFkocDEsdHJ1ZSk7dmFyIGEyPWVsLmdldEFuY2hvclhZKHAyLGZhbHNlKTt2YXIgeD1hMlswXS1hMVswXStvWzBdO3ZhciB5PWEyWzFdLWExWzFdK29bMV07aWYoYyl7dmFyIHc9dGhpcy5nZXRXaWR0aCgpLGg9dGhpcy5nZXRIZWlnaHQoKSxyPWVsLmdldFJlZ2lvbigpO3ZhciBkdz1ELmdldFZpZXdXaWR0aCgpLTUsZGg9RC5nZXRWaWV3SGVpZ2h0KCktNTt2YXIgcDF5PXAxLmNoYXJBdCgwKSxwMXg9cDEuY2hhckF0KHAxLmxlbmd0aC0xKTt2YXIgcDJ5PXAyLmNoYXJBdCgwKSxwMng9cDIuY2hhckF0KHAyLmxlbmd0aC0xKTt2YXIgc3dhcFk9KChwMXk9PSJ0IiYmcDJ5PT0iYiIpfHwocDF5PT0iYiImJnAyeT09InQiKSk7dmFyIHN3YXBYPSgocDF4PT0iciImJnAyeD09ImwiKXx8KHAxeD09ImwiJiZwMng9PSJyIikpO3ZhciBkb2M9ZG9jdW1lbnQ7dmFyIHNjcm9sbFg9KGRvYy5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdHx8ZG9jLmJvZHkuc2Nyb2xsTGVmdHx8MCkrNTt2YXIgc2Nyb2xsWT0oZG9jLmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3B8fGRvYy5ib2R5LnNjcm9sbFRvcHx8MCkrNTtpZigoeCt3KT5kdytzY3JvbGxYKXt4PXN3YXBYP3IubGVmdC13OmR3K3Njcm9sbFgtd31pZih4PHNjcm9sbFgpe3g9c3dhcFg/ci5yaWdodDpzY3JvbGxYfWlmKCh5K2gpPmRoK3Njcm9sbFkpe3k9c3dhcFk/ci50b3AtaDpkaCtzY3JvbGxZLWh9aWYoeTxzY3JvbGxZKXt5PXN3YXBZP3IuYm90dG9tOnNjcm9sbFl9fXJldHVyblt4LHldfSxnZXRDb25zdHJhaW5Ub1hZOmZ1bmN0aW9uKCl7dmFyIG9zPXt0b3A6MCxsZWZ0OjAsYm90dG9tOjAscmlnaHQ6MH07cmV0dXJuIGZ1bmN0aW9uKGVsLGxvY2FsLG9mZnNldHMscHJvcG9zZWRYWSl7ZWw9RXh0LmdldChlbCk7b2Zmc2V0cz1vZmZzZXRzP0V4dC5hcHBseUlmKG9mZnNldHMsb3MpOm9zO3ZhciB2dyx2aCx2eD0wLHZ5PTA7aWYoZWwuZG9tPT1kb2N1bWVudC5ib2R5fHxlbC5kb209PWRvY3VtZW50KXt2dz1FeHQubGliLkRvbS5nZXRWaWV3V2lkdGgoKTt2aD1FeHQubGliLkRvbS5nZXRWaWV3SGVpZ2h0KCl9ZWxzZXt2dz1lbC5kb20uY2xpZW50V2lkdGg7dmg9ZWwuZG9tLmNsaWVudEhlaWdodDtpZighbG9jYWwpe3ZhciB2eHk9ZWwuZ2V0WFkoKTt2eD12eHlbMF07dnk9dnh5WzFdfX12YXIgcz1lbC5nZXRTY3JvbGwoKTt2eCs9b2Zmc2V0cy5sZWZ0K3MubGVmdDt2eSs9b2Zmc2V0cy50b3Arcy50b3A7dnctPW9mZnNldHMucmlnaHQ7dmgtPW9mZnNldHMuYm90dG9tO3ZhciB2cj12eCt2dzt2YXIgdmI9dnkrdmg7dmFyIHh5PXByb3Bvc2VkWFl8fCghbG9jYWw/dGhpcy5nZXRYWSgpOlt0aGlzLmdldExlZnQodHJ1ZSksdGhpcy5nZXRUb3AodHJ1ZSldKTt2YXIgeD14eVswXSx5PXh5WzFdO3ZhciB3PXRoaXMuZG9tLm9mZnNldFdpZHRoLGg9dGhpcy5kb20ub2Zmc2V0SGVpZ2h0O3ZhciBtb3ZlZD1mYWxzZTtpZigoeCt3KT52cil7eD12ci13O21vdmVkPXRydWV9aWYoKHkraCk+dmIpe3k9dmItaDttb3ZlZD10cnVlfWlmKHg8dngpe3g9dng7bW92ZWQ9dHJ1ZX1pZih5PHZ5KXt5PXZ5O21vdmVkPXRydWV9cmV0dXJuIG1vdmVkP1t4LHldOmZhbHNlfX0oKSxhZGp1c3RGb3JDb25zdHJhaW50czpmdW5jdGlvbih4eSxwYXJlbnQsb2Zmc2V0cyl7cmV0dXJuIHRoaXMuZ2V0Q29uc3RyYWluVG9YWShwYXJlbnR8fGRvY3VtZW50LGZhbHNlLG9mZnNldHMseHkpfHx4eX0sYWxpZ25UbzpmdW5jdGlvbihlbGVtZW50LHBvc2l0aW9uLG9mZnNldHMsYW5pbWF0ZSl7dmFyIHh5PXRoaXMuZ2V0QWxpZ25Ub1hZKGVsZW1lbnQscG9zaXRpb24sb2Zmc2V0cyk7dGhpcy5zZXRYWSh4eSx0aGlzLnByZWFuaW0oYXJndW1lbnRzLDMpKTtyZXR1cm4gdGhpc30sYW5jaG9yVG86ZnVuY3Rpb24oZWwsYWxpZ25tZW50LG9mZnNldHMsYW5pbWF0ZSxtb25pdG9yU2Nyb2xsLGNhbGxiYWNrKXt2YXIgYWN0aW9uPWZ1bmN0aW9uKCl7dGhpcy5hbGlnblRvKGVsLGFsaWdubWVudCxvZmZzZXRzLGFuaW1hdGUpO0V4dC5jYWxsYmFjayhjYWxsYmFjayx0aGlzKX07RXh0LkV2ZW50TWFuYWdlci5vbldpbmRvd1Jlc2l6ZShhY3Rpb24sdGhpcyk7dmFyIHRtPXR5cGVvZiBtb25pdG9yU2Nyb2xsO2lmKHRtIT0idW5kZWZpbmVkIil7RXh0LkV2ZW50TWFuYWdlci5vbih3aW5kb3csInNjcm9sbCIsYWN0aW9uLHRoaXMse2J1ZmZlcjp0bT09Im51bWJlciI/bW9uaXRvclNjcm9sbDo1MH0pfWFjdGlvbi5jYWxsKHRoaXMpO3JldHVybiB0aGlzfSxjbGVhck9wYWNpdHk6ZnVuY3Rpb24oKXtpZih3aW5kb3cuQWN0aXZlWE9iamVjdCl7aWYodHlwZW9mIHRoaXMuZG9tLnN0eWxlLmZpbHRlcj09InN0cmluZyImJigvYWxwaGEvaSkudGVzdCh0aGlzLmRvbS5zdHlsZS5maWx0ZXIpKXt0aGlzLmRvbS5zdHlsZS5maWx0ZXI9IiJ9fWVsc2V7dGhpcy5kb20uc3R5bGUub3BhY2l0eT0iIjt0aGlzLmRvbS5zdHlsZVsiLW1vei1vcGFjaXR5Il09IiI7dGhpcy5kb20uc3R5bGVbIi1raHRtbC1vcGFjaXR5Il09IiJ9cmV0dXJuIHRoaXN9LGhpZGU6ZnVuY3Rpb24oYW5pbWF0ZSl7dGhpcy5zZXRWaXNpYmxlKGZhbHNlLHRoaXMucHJlYW5pbShhcmd1bWVudHMsMCkpO3JldHVybiB0aGlzfSxzaG93OmZ1bmN0aW9uKGFuaW1hdGUpe3RoaXMuc2V0VmlzaWJsZSh0cnVlLHRoaXMucHJlYW5pbShhcmd1bWVudHMsMCkpO3JldHVybiB0aGlzfSxhZGRVbml0czpmdW5jdGlvbihzaXplKXtyZXR1cm4gRXh0LkVsZW1lbnQuYWRkVW5pdHMoc2l6ZSx0aGlzLmRlZmF1bHRVbml0KX0sdXBkYXRlOmZ1bmN0aW9uKGh0bWwsbG9hZFNjcmlwdHMsY2FsbGJhY2spe2lmKHR5cGVvZiBodG1sPT0idW5kZWZpbmVkIil7aHRtbD0iIn1pZihsb2FkU2NyaXB0cyE9PXRydWUpe3RoaXMuZG9tLmlubmVySFRNTD1odG1sO2lmKHR5cGVvZiBjYWxsYmFjaz09ImZ1bmN0aW9uIil7Y2FsbGJhY2soKX1yZXR1cm4gdGhpc312YXIgaWQ9RXh0LmlkKCk7dmFyIGRvbT10aGlzLmRvbTtodG1sKz0iPHNwYW4gaWQ9XCIiK2lkKyJcIj48L3NwYW4+IjtFLm9uQXZhaWxhYmxlKGlkLGZ1bmN0aW9uKCl7dmFyIGhkPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF07dmFyIHJlPS8oPzo8c2NyaXB0KFtePl0qKT8+KSgoXG58XHJ8LikqPykoPzo8XC9zY3JpcHQ+KS9pZzt2YXIgc3JjUmU9L1xzc3JjPShbXCdcIl0pKC4qPylcMS9pO3ZhciB0eXBlUmU9L1xzdHlwZT0oW1wnXCJdKSguKj8pXDEvaTt2YXIgbWF0Y2g7d2hpbGUobWF0Y2g9cmUuZXhlYyhodG1sKSl7dmFyIGF0dHJzPW1hdGNoWzFdO3ZhciBzcmNNYXRjaD1hdHRycz9hdHRycy5tYXRjaChzcmNSZSk6ZmFsc2U7aWYoc3JjTWF0Y2gmJnNyY01hdGNoWzJdKXt2YXIgcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTtzLnNyYz1zcmNNYXRjaFsyXTt2YXIgdHlwZU1hdGNoPWF0dHJzLm1hdGNoKHR5cGVSZSk7aWYodHlwZU1hdGNoJiZ0eXBlTWF0Y2hbMl0pe3MudHlwZT10eXBlTWF0Y2hbMl19aGQuYXBwZW5kQ2hpbGQocyl9ZWxzZXtpZihtYXRjaFsyXSYmbWF0Y2hbMl0ubGVuZ3RoPjApe2lmKHdpbmRvdy5leGVjU2NyaXB0KXt3aW5kb3cuZXhlY1NjcmlwdChtYXRjaFsyXSl9ZWxzZXt3aW5kb3cuZXZhbChtYXRjaFsyXSl9fX19dmFyIGVsPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtpZihlbCl7RXh0LnJlbW92ZU5vZGUoZWwpfWlmKHR5cGVvZiBjYWxsYmFjaz09ImZ1bmN0aW9uIil7Y2FsbGJhY2soKX19KTtkb20uaW5uZXJIVE1MPWh0bWwucmVwbGFjZSgvKD86PHNjcmlwdC4qPz4pKChcbnxccnwuKSo/KSg/OjxcL3NjcmlwdD4pL2lnLCIiKTtyZXR1cm4gdGhpc30sbG9hZDpmdW5jdGlvbigpe3ZhciB1bT10aGlzLmdldFVwZGF0ZXIoKTt1bS51cGRhdGUuYXBwbHkodW0sYXJndW1lbnRzKTtyZXR1cm4gdGhpc30sZ2V0VXBkYXRlcjpmdW5jdGlvbigpe2lmKCF0aGlzLnVwZGF0ZU1hbmFnZXIpe3RoaXMudXBkYXRlTWFuYWdlcj1uZXcgRXh0LlVwZGF0ZXIodGhpcyl9cmV0dXJuIHRoaXMudXBkYXRlTWFuYWdlcn0sdW5zZWxlY3RhYmxlOmZ1bmN0aW9uKCl7dGhpcy5kb20udW5zZWxlY3RhYmxlPSJvbiI7dGhpcy5zd2FsbG93RXZlbnQoInNlbGVjdHN0YXJ0Iix0cnVlKTt0aGlzLmFwcGx5U3R5bGVzKCItbW96LXVzZXItc2VsZWN0Om5vbmU7LWtodG1sLXVzZXItc2VsZWN0Om5vbmU7Iik7dGhpcy5hZGRDbGFzcygieC11bnNlbGVjdGFibGUiKTtyZXR1cm4gdGhpc30sZ2V0Q2VudGVyWFk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRBbGlnblRvWFkoZG9jdW1lbnQsImMtYyIpfSxjZW50ZXI6ZnVuY3Rpb24oY2VudGVySW4pe3RoaXMuYWxpZ25UbyhjZW50ZXJJbnx8ZG9jdW1lbnQsImMtYyIpO3JldHVybiB0aGlzfSxpc0JvcmRlckJveDpmdW5jdGlvbigpe3JldHVybiBub0JveEFkanVzdFt0aGlzLmRvbS50YWdOYW1lLnRvTG93ZXJDYXNlKCldfHxFeHQuaXNCb3JkZXJCb3h9LGdldEJveDpmdW5jdGlvbihjb250ZW50Qm94LGxvY2FsKXt2YXIgeHk7aWYoIWxvY2FsKXt4eT10aGlzLmdldFhZKCl9ZWxzZXt2YXIgbGVmdD1wYXJzZUludCh0aGlzLmdldFN0eWxlKCJsZWZ0IiksMTApfHwwO3ZhciB0b3A9cGFyc2VJbnQodGhpcy5nZXRTdHlsZSgidG9wIiksMTApfHwwO3h5PVtsZWZ0LHRvcF19dmFyIGVsPXRoaXMuZG9tLHc9ZWwub2Zmc2V0V2lkdGgsaD1lbC5vZmZzZXRIZWlnaHQsYng7aWYoIWNvbnRlbnRCb3gpe2J4PXt4Onh5WzBdLHk6eHlbMV0sMDp4eVswXSwxOnh5WzFdLHdpZHRoOncsaGVpZ2h0Omh9fWVsc2V7dmFyIGw9dGhpcy5nZXRCb3JkZXJXaWR0aCgibCIpK3RoaXMuZ2V0UGFkZGluZygibCIpO3ZhciByPXRoaXMuZ2V0Qm9yZGVyV2lkdGgoInIiKSt0aGlzLmdldFBhZGRpbmcoInIiKTt2YXIgdD10aGlzLmdldEJvcmRlcldpZHRoKCJ0IikrdGhpcy5nZXRQYWRkaW5nKCJ0Iik7dmFyIGI9dGhpcy5nZXRCb3JkZXJXaWR0aCgiYiIpK3RoaXMuZ2V0UGFkZGluZygiYiIpO2J4PXt4Onh5WzBdK2wseTp4eVsxXSt0LDA6eHlbMF0rbCwxOnh5WzFdK3Qsd2lkdGg6dy0obCtyKSxoZWlnaHQ6aC0odCtiKX19YngucmlnaHQ9YngueCtieC53aWR0aDtieC5ib3R0b209YngueStieC5oZWlnaHQ7cmV0dXJuIGJ4fSxnZXRGcmFtZVdpZHRoOmZ1bmN0aW9uKHNpZGVzLG9ubHlDb250ZW50Qm94KXtyZXR1cm4gb25seUNvbnRlbnRCb3gmJkV4dC5pc0JvcmRlckJveD8wOih0aGlzLmdldFBhZGRpbmcoc2lkZXMpK3RoaXMuZ2V0Qm9yZGVyV2lkdGgoc2lkZXMpKX0sc2V0Qm94OmZ1bmN0aW9uKGJveCxhZGp1c3QsYW5pbWF0ZSl7dmFyIHc9Ym94LndpZHRoLGg9Ym94LmhlaWdodDtpZigoYWRqdXN0JiYhdGhpcy5hdXRvQm94QWRqdXN0KSYmIXRoaXMuaXNCb3JkZXJCb3goKSl7dy09KHRoaXMuZ2V0Qm9yZGVyV2lkdGgoImxyIikrdGhpcy5nZXRQYWRkaW5nKCJsciIpKTtoLT0odGhpcy5nZXRCb3JkZXJXaWR0aCgidGIiKSt0aGlzLmdldFBhZGRpbmcoInRiIikpfXRoaXMuc2V0Qm91bmRzKGJveC54LGJveC55LHcsaCx0aGlzLnByZWFuaW0oYXJndW1lbnRzLDIpKTtyZXR1cm4gdGhpc30scmVwYWludDpmdW5jdGlvbigpe3ZhciBkb209dGhpcy5kb207dGhpcy5hZGRDbGFzcygieC1yZXBhaW50Iik7c2V0VGltZW91dChmdW5jdGlvbigpe0V4dC5nZXQoZG9tKS5yZW1vdmVDbGFzcygieC1yZXBhaW50Iil9LDEpO3JldHVybiB0aGlzfSxnZXRNYXJnaW5zOmZ1bmN0aW9uKHNpZGUpe2lmKCFzaWRlKXtyZXR1cm57dG9wOnBhcnNlSW50KHRoaXMuZ2V0U3R5bGUoIm1hcmdpbi10b3AiKSwxMCl8fDAsbGVmdDpwYXJzZUludCh0aGlzLmdldFN0eWxlKCJtYXJnaW4tbGVmdCIpLDEwKXx8MCxib3R0b206cGFyc2VJbnQodGhpcy5nZXRTdHlsZSgibWFyZ2luLWJvdHRvbSIpLDEwKXx8MCxyaWdodDpwYXJzZUludCh0aGlzLmdldFN0eWxlKCJtYXJnaW4tcmlnaHQiKSwxMCl8fDB9fWVsc2V7cmV0dXJuIHRoaXMuYWRkU3R5bGVzKHNpZGUsRWwubWFyZ2lucyl9fSxhZGRTdHlsZXM6ZnVuY3Rpb24oc2lkZXMsc3R5bGVzKXt2YXIgdmFsPTAsdix3O2Zvcih2YXIgaT0wLGxlbj1zaWRlcy5sZW5ndGg7aTxsZW47aSsrKXt2PXRoaXMuZ2V0U3R5bGUoc3R5bGVzW3NpZGVzLmNoYXJBdChpKV0pO2lmKHYpe3c9cGFyc2VJbnQodiwxMCk7aWYodyl7dmFsKz0odz49MD93Oi0xKncpfX19cmV0dXJuIHZhbH0sY3JlYXRlUHJveHk6ZnVuY3Rpb24oY29uZmlnLHJlbmRlclRvLG1hdGNoQm94KXtjb25maWc9dHlwZW9mIGNvbmZpZz09Im9iamVjdCI/Y29uZmlnOnt0YWc6ImRpdiIsY2xzOmNvbmZpZ307dmFyIHByb3h5O2lmKHJlbmRlclRvKXtwcm94eT1FeHQuRG9tSGVscGVyLmFwcGVuZChyZW5kZXJUbyxjb25maWcsdHJ1ZSl9ZWxzZXtwcm94eT1FeHQuRG9tSGVscGVyLmluc2VydEJlZm9yZSh0aGlzLmRvbSxjb25maWcsdHJ1ZSl9aWYobWF0Y2hCb3gpe3Byb3h5LnNldEJveCh0aGlzLmdldEJveCgpKX1yZXR1cm4gcHJveHl9LG1hc2s6ZnVuY3Rpb24obXNnLG1zZ0Nscyl7aWYodGhpcy5nZXRTdHlsZSgicG9zaXRpb24iKT09InN0YXRpYyIpe3RoaXMuc2V0U3R5bGUoInBvc2l0aW9uIiwicmVsYXRpdmUiKX1pZih0aGlzLl9tYXNrTXNnKXt0aGlzLl9tYXNrTXNnLnJlbW92ZSgpfWlmKHRoaXMuX21hc2spe3RoaXMuX21hc2sucmVtb3ZlKCl9dGhpcy5fbWFzaz1FeHQuRG9tSGVscGVyLmFwcGVuZCh0aGlzLmRvbSx7Y2xzOiJleHQtZWwtbWFzayJ9LHRydWUpO3RoaXMuYWRkQ2xhc3MoIngtbWFza2VkIik7dGhpcy5fbWFzay5zZXREaXNwbGF5ZWQodHJ1ZSk7aWYodHlwZW9mIG1zZz09InN0cmluZyIpe3RoaXMuX21hc2tNc2c9RXh0LkRvbUhlbHBlci5hcHBlbmQodGhpcy5kb20se2NsczoiZXh0LWVsLW1hc2stbXNnIixjbjp7dGFnOiJkaXYifX0sdHJ1ZSk7dmFyIG1tPXRoaXMuX21hc2tNc2c7bW0uZG9tLmNsYXNzTmFtZT1tc2dDbHM/ImV4dC1lbC1tYXNrLW1zZyAiK21zZ0NsczoiZXh0LWVsLW1hc2stbXNnIjttbS5kb20uZmlyc3RDaGlsZC5pbm5lckhUTUw9bXNnO21tLnNldERpc3BsYXllZCh0cnVlKTttbS5jZW50ZXIodGhpcyl9aWYoRXh0LmlzSUUmJiEoRXh0LmlzSUU3JiZFeHQuaXNTdHJpY3QpJiZ0aGlzLmdldFN0eWxlKCJoZWlnaHQiKT09ImF1dG8iKXt0aGlzLl9tYXNrLnNldFNpemUodGhpcy5kb20uY2xpZW50V2lkdGgsdGhpcy5nZXRIZWlnaHQoKSl9cmV0dXJuIHRoaXMuX21hc2t9LHVubWFzazpmdW5jdGlvbigpe2lmKHRoaXMuX21hc2spe2lmKHRoaXMuX21hc2tNc2cpe3RoaXMuX21hc2tNc2cucmVtb3ZlKCk7ZGVsZXRlIHRoaXMuX21hc2tNc2d9dGhpcy5fbWFzay5yZW1vdmUoKTtkZWxldGUgdGhpcy5fbWFza310aGlzLnJlbW92ZUNsYXNzKCJ4LW1hc2tlZCIpfSxpc01hc2tlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXNrJiZ0aGlzLl9tYXNrLmlzVmlzaWJsZSgpfSxjcmVhdGVTaGltOmZ1bmN0aW9uKCl7dmFyIGVsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlmcmFtZSIpO2VsLmZyYW1lQm9yZGVyPSJubyI7ZWwuY2xhc3NOYW1lPSJleHQtc2hpbSI7aWYoRXh0LmlzSUUmJkV4dC5pc1NlY3VyZSl7ZWwuc3JjPUV4dC5TU0xfU0VDVVJFX1VSTH12YXIgc2hpbT1FeHQuZ2V0KHRoaXMuZG9tLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGVsLHRoaXMuZG9tKSk7c2hpbS5hdXRvQm94QWRqdXN0PWZhbHNlO3JldHVybiBzaGltfSxyZW1vdmU6ZnVuY3Rpb24oKXtFeHQucmVtb3ZlTm9kZSh0aGlzLmRvbSk7ZGVsZXRlIEVsLmNhY2hlW3RoaXMuZG9tLmlkXX0saG92ZXI6ZnVuY3Rpb24ob3ZlckZuLG91dEZuLHNjb3BlKXt2YXIgcHJlT3ZlckZuPWZ1bmN0aW9uKGUpe2lmKCFlLndpdGhpbih0aGlzLHRydWUpKXtvdmVyRm4uYXBwbHkoc2NvcGV8fHRoaXMsYXJndW1lbnRzKX19O3ZhciBwcmVPdXRGbj1mdW5jdGlvbihlKXtpZighZS53aXRoaW4odGhpcyx0cnVlKSl7b3V0Rm4uYXBwbHkoc2NvcGV8fHRoaXMsYXJndW1lbnRzKX19O3RoaXMub24oIm1vdXNlb3ZlciIscHJlT3ZlckZuLHRoaXMuZG9tKTt0aGlzLm9uKCJtb3VzZW91dCIscHJlT3V0Rm4sdGhpcy5kb20pO3JldHVybiB0aGlzfSxhZGRDbGFzc09uT3ZlcjpmdW5jdGlvbihjbGFzc05hbWUscHJldmVudEZsaWNrZXIpe3RoaXMuaG92ZXIoZnVuY3Rpb24oKXtFeHQuZmx5KHRoaXMsIl9pbnRlcm5hbCIpLmFkZENsYXNzKGNsYXNzTmFtZSl9LGZ1bmN0aW9uKCl7RXh0LmZseSh0aGlzLCJfaW50ZXJuYWwiKS5yZW1vdmVDbGFzcyhjbGFzc05hbWUpfSk7cmV0dXJuIHRoaXN9LGFkZENsYXNzT25Gb2N1czpmdW5jdGlvbihjbGFzc05hbWUpe3RoaXMub24oImZvY3VzIixmdW5jdGlvbigpe0V4dC5mbHkodGhpcywiX2ludGVybmFsIikuYWRkQ2xhc3MoY2xhc3NOYW1lKX0sdGhpcy5kb20pO3RoaXMub24oImJsdXIiLGZ1bmN0aW9uKCl7RXh0LmZseSh0aGlzLCJfaW50ZXJuYWwiKS5yZW1vdmVDbGFzcyhjbGFzc05hbWUpfSx0aGlzLmRvbSk7cmV0dXJuIHRoaXN9LGFkZENsYXNzT25DbGljazpmdW5jdGlvbihjbGFzc05hbWUpe3ZhciBkb209dGhpcy5kb207dGhpcy5vbigibW91c2Vkb3duIixmdW5jdGlvbigpe0V4dC5mbHkoZG9tLCJfaW50ZXJuYWwiKS5hZGRDbGFzcyhjbGFzc05hbWUpO3ZhciBkPUV4dC5nZXREb2MoKTt2YXIgZm49ZnVuY3Rpb24oKXtFeHQuZmx5KGRvbSwiX2ludGVybmFsIikucmVtb3ZlQ2xhc3MoY2xhc3NOYW1lKTtkLnJlbW92ZUxpc3RlbmVyKCJtb3VzZXVwIixmbil9O2Qub24oIm1vdXNldXAiLGZuKX0pO3JldHVybiB0aGlzfSxzd2FsbG93RXZlbnQ6ZnVuY3Rpb24oZXZlbnROYW1lLHByZXZlbnREZWZhdWx0KXt2YXIgZm49ZnVuY3Rpb24oZSl7ZS5zdG9wUHJvcGFnYXRpb24oKTtpZihwcmV2ZW50RGVmYXVsdCl7ZS5wcmV2ZW50RGVmYXVsdCgpfX07aWYoRXh0LmlzQXJyYXkoZXZlbnROYW1lKSl7Zm9yKHZhciBpPTAsbGVuPWV2ZW50TmFtZS5sZW5ndGg7aTxsZW47aSsrKXt0aGlzLm9uKGV2ZW50TmFtZVtpXSxmbil9cmV0dXJuIHRoaXN9dGhpcy5vbihldmVudE5hbWUsZm4pO3JldHVybiB0aGlzfSxwYXJlbnQ6ZnVuY3Rpb24oc2VsZWN0b3IscmV0dXJuRG9tKXtyZXR1cm4gdGhpcy5tYXRjaE5vZGUoInBhcmVudE5vZGUiLCJwYXJlbnROb2RlIixzZWxlY3RvcixyZXR1cm5Eb20pfSxuZXh0OmZ1bmN0aW9uKHNlbGVjdG9yLHJldHVybkRvbSl7cmV0dXJuIHRoaXMubWF0Y2hOb2RlKCJuZXh0U2libGluZyIsIm5leHRTaWJsaW5nIixzZWxlY3RvcixyZXR1cm5Eb20pfSxwcmV2OmZ1bmN0aW9uKHNlbGVjdG9yLHJldHVybkRvbSl7cmV0dXJuIHRoaXMubWF0Y2hOb2RlKCJwcmV2aW91c1NpYmxpbmciLCJwcmV2aW91c1NpYmxpbmciLHNlbGVjdG9yLHJldHVybkRvbSl9LGZpcnN0OmZ1bmN0aW9uKHNlbGVjdG9yLHJldHVybkRvbSl7cmV0dXJuIHRoaXMubWF0Y2hOb2RlKCJuZXh0U2libGluZyIsImZpcnN0Q2hpbGQiLHNlbGVjdG9yLHJldHVybkRvbSl9LGxhc3Q6ZnVuY3Rpb24oc2VsZWN0b3IscmV0dXJuRG9tKXtyZXR1cm4gdGhpcy5tYXRjaE5vZGUoInByZXZpb3VzU2libGluZyIsImxhc3RDaGlsZCIsc2VsZWN0b3IscmV0dXJuRG9tKX0sbWF0Y2hOb2RlOmZ1bmN0aW9uKGRpcixzdGFydCxzZWxlY3RvcixyZXR1cm5Eb20pe3ZhciBuPXRoaXMuZG9tW3N0YXJ0XTt3aGlsZShuKXtpZihuLm5vZGVUeXBlPT0xJiYoIXNlbGVjdG9yfHxFeHQuRG9tUXVlcnkuaXMobixzZWxlY3RvcikpKXtyZXR1cm4gIXJldHVybkRvbT9FeHQuZ2V0KG4pOm59bj1uW2Rpcl19cmV0dXJuIG51bGx9LGFwcGVuZENoaWxkOmZ1bmN0aW9uKGVsKXtlbD1FeHQuZ2V0KGVsKTtlbC5hcHBlbmRUbyh0aGlzKTtyZXR1cm4gdGhpc30sY3JlYXRlQ2hpbGQ6ZnVuY3Rpb24oY29uZmlnLGluc2VydEJlZm9yZSxyZXR1cm5Eb20pe2NvbmZpZz1jb25maWd8fHt0YWc6ImRpdiJ9O2lmKGluc2VydEJlZm9yZSl7cmV0dXJuIEV4dC5Eb21IZWxwZXIuaW5zZXJ0QmVmb3JlKGluc2VydEJlZm9yZSxjb25maWcscmV0dXJuRG9tIT09dHJ1ZSl9cmV0dXJuIEV4dC5Eb21IZWxwZXJbIXRoaXMuZG9tLmZpcnN0Q2hpbGQ/Im92ZXJ3cml0ZSI6ImFwcGVuZCJdKHRoaXMuZG9tLGNvbmZpZyxyZXR1cm5Eb20hPT10cnVlKX0sYXBwZW5kVG86ZnVuY3Rpb24oZWwpe2VsPUV4dC5nZXREb20oZWwpO2VsLmFwcGVuZENoaWxkKHRoaXMuZG9tKTtyZXR1cm4gdGhpc30saW5zZXJ0QmVmb3JlOmZ1bmN0aW9uKGVsKXtlbD1FeHQuZ2V0RG9tKGVsKTtlbC5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLmRvbSxlbCk7cmV0dXJuIHRoaXN9LGluc2VydEFmdGVyOmZ1bmN0aW9uKGVsKXtlbD1FeHQuZ2V0RG9tKGVsKTtlbC5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLmRvbSxlbC5uZXh0U2libGluZyk7cmV0dXJuIHRoaXN9LGluc2VydEZpcnN0OmZ1bmN0aW9uKGVsLHJldHVybkRvbSl7ZWw9ZWx8fHt9O2lmKHR5cGVvZiBlbD09Im9iamVjdCImJiFlbC5ub2RlVHlwZSYmIWVsLmRvbSl7cmV0dXJuIHRoaXMuY3JlYXRlQ2hpbGQoZWwsdGhpcy5kb20uZmlyc3RDaGlsZCxyZXR1cm5Eb20pfWVsc2V7ZWw9RXh0LmdldERvbShlbCk7dGhpcy5kb20uaW5zZXJ0QmVmb3JlKGVsLHRoaXMuZG9tLmZpcnN0Q2hpbGQpO3JldHVybiAhcmV0dXJuRG9tP0V4dC5nZXQoZWwpOmVsfX0saW5zZXJ0U2libGluZzpmdW5jdGlvbihlbCx3aGVyZSxyZXR1cm5Eb20pe3ZhciBydDtpZihFeHQuaXNBcnJheShlbCkpe2Zvcih2YXIgaT0wLGxlbj1lbC5sZW5ndGg7aTxsZW47aSsrKXtydD10aGlzLmluc2VydFNpYmxpbmcoZWxbaV0sd2hlcmUscmV0dXJuRG9tKX1yZXR1cm4gcnR9d2hlcmU9d2hlcmU/d2hlcmUudG9Mb3dlckNhc2UoKToiYmVmb3JlIjtlbD1lbHx8e307dmFyIHJlZk5vZGU9d2hlcmU9PSJiZWZvcmUiP3RoaXMuZG9tOnRoaXMuZG9tLm5leHRTaWJsaW5nO2lmKHR5cGVvZiBlbD09Im9iamVjdCImJiFlbC5ub2RlVHlwZSYmIWVsLmRvbSl7aWYod2hlcmU9PSJhZnRlciImJiF0aGlzLmRvbS5uZXh0U2libGluZyl7cnQ9RXh0LkRvbUhlbHBlci5hcHBlbmQodGhpcy5kb20ucGFyZW50Tm9kZSxlbCwhcmV0dXJuRG9tKX1lbHNle3J0PUV4dC5Eb21IZWxwZXJbd2hlcmU9PSJhZnRlciI/Imluc2VydEFmdGVyIjoiaW5zZXJ0QmVmb3JlIl0odGhpcy5kb20sZWwsIXJldHVybkRvbSl9fWVsc2V7cnQ9dGhpcy5kb20ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoRXh0LmdldERvbShlbCkscmVmTm9kZSk7aWYoIXJldHVybkRvbSl7cnQ9RXh0LmdldChydCl9fXJldHVybiBydH0sd3JhcDpmdW5jdGlvbihjb25maWcscmV0dXJuRG9tKXtpZighY29uZmlnKXtjb25maWc9e3RhZzoiZGl2In19dmFyIG5ld0VsPUV4dC5Eb21IZWxwZXIuaW5zZXJ0QmVmb3JlKHRoaXMuZG9tLGNvbmZpZywhcmV0dXJuRG9tKTtuZXdFbC5kb20/bmV3RWwuZG9tLmFwcGVuZENoaWxkKHRoaXMuZG9tKTpuZXdFbC5hcHBlbmRDaGlsZCh0aGlzLmRvbSk7cmV0dXJuIG5ld0VsfSxyZXBsYWNlOmZ1bmN0aW9uKGVsKXtlbD1FeHQuZ2V0KGVsKTt0aGlzLmluc2VydEJlZm9yZShlbCk7ZWwucmVtb3ZlKCk7cmV0dXJuIHRoaXN9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKGVsKXtpZih0eXBlb2YgZWw9PSJvYmplY3QiJiYhZWwubm9kZVR5cGUmJiFlbC5kb20pe2VsPXRoaXMuaW5zZXJ0U2libGluZyhlbCwiYmVmb3JlIil9ZWxzZXtlbD1FeHQuZ2V0RG9tKGVsKTt0aGlzLmRvbS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlbCx0aGlzLmRvbSl9RWwudW5jYWNoZSh0aGlzLmlkKTt0aGlzLmRvbS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZG9tKTt0aGlzLmRvbT1lbDt0aGlzLmlkPUV4dC5pZChlbCk7RWwuY2FjaGVbdGhpcy5pZF09dGhpcztyZXR1cm4gdGhpc30saW5zZXJ0SHRtbDpmdW5jdGlvbih3aGVyZSxodG1sLHJldHVybkVsKXt2YXIgZWw9RXh0LkRvbUhlbHBlci5pbnNlcnRIdG1sKHdoZXJlLHRoaXMuZG9tLGh0bWwpO3JldHVybiByZXR1cm5FbD9FeHQuZ2V0KGVsKTplbH0sc2V0OmZ1bmN0aW9uKG8sdXNlU2V0KXt2YXIgZWw9dGhpcy5kb207dXNlU2V0PXR5cGVvZiB1c2VTZXQ9PSJ1bmRlZmluZWQiPyhlbC5zZXRBdHRyaWJ1dGU/dHJ1ZTpmYWxzZSk6dXNlU2V0O2Zvcih2YXIgYXR0ciBpbiBvKXtpZihhdHRyPT0ic3R5bGUifHx0eXBlb2Ygb1thdHRyXT09ImZ1bmN0aW9uIil7Y29udGludWV9aWYoYXR0cj09ImNscyIpe2VsLmNsYXNzTmFtZT1vWyJjbHMiXX1lbHNle2lmKG8uaGFzT3duUHJvcGVydHkoYXR0cikpe2lmKHVzZVNldCl7ZWwuc2V0QXR0cmlidXRlKGF0dHIsb1thdHRyXSl9ZWxzZXtlbFthdHRyXT1vW2F0dHJdfX19fWlmKG8uc3R5bGUpe0V4dC5Eb21IZWxwZXIuYXBwbHlTdHlsZXMoZWwsby5zdHlsZSl9cmV0dXJuIHRoaXN9LGFkZEtleUxpc3RlbmVyOmZ1bmN0aW9uKGtleSxmbixzY29wZSl7dmFyIGNvbmZpZztpZih0eXBlb2Yga2V5IT0ib2JqZWN0Inx8RXh0LmlzQXJyYXkoa2V5KSl7Y29uZmlnPXtrZXk6a2V5LGZuOmZuLHNjb3BlOnNjb3BlfX1lbHNle2NvbmZpZz17a2V5OmtleS5rZXksc2hpZnQ6a2V5LnNoaWZ0LGN0cmw6a2V5LmN0cmwsYWx0OmtleS5hbHQsZm46Zm4sc2NvcGU6c2NvcGV9fXJldHVybiBuZXcgRXh0LktleU1hcCh0aGlzLGNvbmZpZyl9LGFkZEtleU1hcDpmdW5jdGlvbihjb25maWcpe3JldHVybiBuZXcgRXh0LktleU1hcCh0aGlzLGNvbmZpZyl9LGlzU2Nyb2xsYWJsZTpmdW5jdGlvbigpe3ZhciBkb209dGhpcy5kb207cmV0dXJuIGRvbS5zY3JvbGxIZWlnaHQ+ZG9tLmNsaWVudEhlaWdodHx8ZG9tLnNjcm9sbFdpZHRoPmRvbS5jbGllbnRXaWR0aH0sc2Nyb2xsVG86ZnVuY3Rpb24oc2lkZSx2YWx1ZSxhbmltYXRlKXt2YXIgcHJvcD1zaWRlLnRvTG93ZXJDYXNlKCk9PSJsZWZ0Ij8ic2Nyb2xsTGVmdCI6InNjcm9sbFRvcCI7aWYoIWFuaW1hdGV8fCFBKXt0aGlzLmRvbVtwcm9wXT12YWx1ZX1lbHNle3ZhciB0bz1wcm9wPT0ic2Nyb2xsTGVmdCI/W3ZhbHVlLHRoaXMuZG9tLnNjcm9sbFRvcF06W3RoaXMuZG9tLnNjcm9sbExlZnQsdmFsdWVdO3RoaXMuYW5pbSh7c2Nyb2xsOnsidG8iOnRvfX0sdGhpcy5wcmVhbmltKGFyZ3VtZW50cywyKSwic2Nyb2xsIil9cmV0dXJuIHRoaXN9LHNjcm9sbDpmdW5jdGlvbihkaXJlY3Rpb24sZGlzdGFuY2UsYW5pbWF0ZSl7aWYoIXRoaXMuaXNTY3JvbGxhYmxlKCkpe3JldHVybiB9dmFyIGVsPXRoaXMuZG9tO3ZhciBsPWVsLnNjcm9sbExlZnQsdD1lbC5zY3JvbGxUb3A7dmFyIHc9ZWwuc2Nyb2xsV2lkdGgsaD1lbC5zY3JvbGxIZWlnaHQ7dmFyIGN3PWVsLmNsaWVudFdpZHRoLGNoPWVsLmNsaWVudEhlaWdodDtkaXJlY3Rpb249ZGlyZWN0aW9uLnRvTG93ZXJDYXNlKCk7dmFyIHNjcm9sbGVkPWZhbHNlO3ZhciBhPXRoaXMucHJlYW5pbShhcmd1bWVudHMsMik7c3dpdGNoKGRpcmVjdGlvbil7Y2FzZSJsIjpjYXNlImxlZnQiOmlmKHctbD5jdyl7dmFyIHY9TWF0aC5taW4obCtkaXN0YW5jZSx3LWN3KTt0aGlzLnNjcm9sbFRvKCJsZWZ0Iix2LGEpO3Njcm9sbGVkPXRydWV9YnJlYWs7Y2FzZSJyIjpjYXNlInJpZ2h0IjppZihsPjApe3ZhciB2PU1hdGgubWF4KGwtZGlzdGFuY2UsMCk7dGhpcy5zY3JvbGxUbygibGVmdCIsdixhKTtzY3JvbGxlZD10cnVlfWJyZWFrO2Nhc2UidCI6Y2FzZSJ0b3AiOmNhc2UidXAiOmlmKHQ+MCl7dmFyIHY9TWF0aC5tYXgodC1kaXN0YW5jZSwwKTt0aGlzLnNjcm9sbFRvKCJ0b3AiLHYsYSk7c2Nyb2xsZWQ9dHJ1ZX1icmVhaztjYXNlImIiOmNhc2UiYm90dG9tIjpjYXNlImRvd24iOmlmKGgtdD5jaCl7dmFyIHY9TWF0aC5taW4odCtkaXN0YW5jZSxoLWNoKTt0aGlzLnNjcm9sbFRvKCJ0b3AiLHYsYSk7c2Nyb2xsZWQ9dHJ1ZX1icmVha31yZXR1cm4gc2Nyb2xsZWR9LHRyYW5zbGF0ZVBvaW50czpmdW5jdGlvbih4LHkpe2lmKHR5cGVvZiB4PT0ib2JqZWN0Inx8RXh0LmlzQXJyYXkoeCkpe3k9eFsxXTt4PXhbMF19dmFyIHA9dGhpcy5nZXRTdHlsZSgicG9zaXRpb24iKTt2YXIgbz10aGlzLmdldFhZKCk7dmFyIGw9cGFyc2VJbnQodGhpcy5nZXRTdHlsZSgibGVmdCIpLDEwKTt2YXIgdD1wYXJzZUludCh0aGlzLmdldFN0eWxlKCJ0b3AiKSwxMCk7aWYoaXNOYU4obCkpe2w9KHA9PSJyZWxhdGl2ZSIpPzA6dGhpcy5kb20ub2Zmc2V0TGVmdH1pZihpc05hTih0KSl7dD0ocD09InJlbGF0aXZlIik/MDp0aGlzLmRvbS5vZmZzZXRUb3B9cmV0dXJue2xlZnQ6KHgtb1swXStsKSx0b3A6KHktb1sxXSt0KX19LGdldFNjcm9sbDpmdW5jdGlvbigpe3ZhciBkPXRoaXMuZG9tLGRvYz1kb2N1bWVudDtpZihkPT1kb2N8fGQ9PWRvYy5ib2R5KXt2YXIgbCx0O2lmKEV4dC5pc0lFJiZFeHQuaXNTdHJpY3Qpe2w9ZG9jLmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0fHwoZG9jLmJvZHkuc2Nyb2xsTGVmdHx8MCk7dD1kb2MuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcHx8KGRvYy5ib2R5LnNjcm9sbFRvcHx8MCl9ZWxzZXtsPXdpbmRvdy5wYWdlWE9mZnNldHx8KGRvYy5ib2R5LnNjcm9sbExlZnR8fDApO3Q9d2luZG93LnBhZ2VZT2Zmc2V0fHwoZG9jLmJvZHkuc2Nyb2xsVG9wfHwwKX1yZXR1cm57bGVmdDpsLHRvcDp0fX1lbHNle3JldHVybntsZWZ0OmQuc2Nyb2xsTGVmdCx0b3A6ZC5zY3JvbGxUb3B9fX0sZ2V0Q29sb3I6ZnVuY3Rpb24oYXR0cixkZWZhdWx0VmFsdWUscHJlZml4KXt2YXIgdj10aGlzLmdldFN0eWxlKGF0dHIpO2lmKCF2fHx2PT0idHJhbnNwYXJlbnQifHx2PT0iaW5oZXJpdCIpe3JldHVybiBkZWZhdWx0VmFsdWV9dmFyIGNvbG9yPXR5cGVvZiBwcmVmaXg9PSJ1bmRlZmluZWQiPyIjIjpwcmVmaXg7aWYodi5zdWJzdHIoMCw0KT09InJnYigiKXt2YXIgcnZzPXYuc2xpY2UoNCx2Lmxlbmd0aC0xKS5zcGxpdCgiLCIpO2Zvcih2YXIgaT0wO2k8MztpKyspe3ZhciBoPXBhcnNlSW50KHJ2c1tpXSk7dmFyIHM9aC50b1N0cmluZygxNik7aWYoaDwxNil7cz0iMCIrc31jb2xvcis9c319ZWxzZXtpZih2LnN1YnN0cigwLDEpPT0iIyIpe2lmKHYubGVuZ3RoPT00KXtmb3IodmFyIGk9MTtpPDQ7aSsrKXt2YXIgYz12LmNoYXJBdChpKTtjb2xvcis9YytjfX1lbHNle2lmKHYubGVuZ3RoPT03KXtjb2xvcis9di5zdWJzdHIoMSl9fX19cmV0dXJuKGNvbG9yLmxlbmd0aD41P2NvbG9yLnRvTG93ZXJDYXNlKCk6ZGVmYXVsdFZhbHVlKX0sYm94V3JhcDpmdW5jdGlvbihjbHMpe2Nscz1jbHN8fCJ4LWJveCI7dmFyIGVsPUV4dC5nZXQodGhpcy5pbnNlcnRIdG1sKCJiZWZvcmVCZWdpbiIsU3RyaW5nLmZvcm1hdCgiPGRpdiBjbGFzcz1cInswfVwiPiIrRWwuYm94TWFya3VwKyI8L2Rpdj4iLGNscykpKTtlbC5jaGlsZCgiLiIrY2xzKyItbWMiKS5kb20uYXBwZW5kQ2hpbGQodGhpcy5kb20pO3JldHVybiBlbH0sZ2V0QXR0cmlidXRlTlM6RXh0LmlzSUU/ZnVuY3Rpb24obnMsbmFtZSl7dmFyIGQ9dGhpcy5kb207dmFyIHR5cGU9dHlwZW9mIGRbbnMrIjoiK25hbWVdO2lmKHR5cGUhPSJ1bmRlZmluZWQiJiZ0eXBlIT0idW5rbm93biIpe3JldHVybiBkW25zKyI6IituYW1lXX1yZXR1cm4gZFtuYW1lXX06ZnVuY3Rpb24obnMsbmFtZSl7dmFyIGQ9dGhpcy5kb207cmV0dXJuIGQuZ2V0QXR0cmlidXRlTlMobnMsbmFtZSl8fGQuZ2V0QXR0cmlidXRlKG5zKyI6IituYW1lKXx8ZC5nZXRBdHRyaWJ1dGUobmFtZSl8fGRbbmFtZV19LGdldFRleHRXaWR0aDpmdW5jdGlvbih0ZXh0LG1pbixtYXgpe3JldHVybihFeHQudXRpbC5UZXh0TWV0cmljcy5tZWFzdXJlKHRoaXMuZG9tLEV4dC52YWx1ZSh0ZXh0LHRoaXMuZG9tLmlubmVySFRNTCx0cnVlKSkud2lkdGgpLmNvbnN0cmFpbihtaW58fDAsbWF4fHwxMDAwMDAwKX19O3ZhciBlcD1FbC5wcm90b3R5cGU7ZXAub249ZXAuYWRkTGlzdGVuZXI7ZXAubW9uPWVwLmFkZExpc3RlbmVyO2VwLmdldFVwZGF0ZU1hbmFnZXI9ZXAuZ2V0VXBkYXRlcjtlcC51bj1lcC5yZW1vdmVMaXN0ZW5lcjtlcC5hdXRvQm94QWRqdXN0PXRydWU7RWwudW5pdFBhdHRlcm49L1xkKyhweHxlbXwlfGVufGV4fHB0fGlufGNtfG1tfHBjKSQvaTtFbC5hZGRVbml0cz1mdW5jdGlvbih2LGRlZmF1bHRVbml0KXtpZih2PT09IiJ8fHY9PSJhdXRvIil7cmV0dXJuIHZ9aWYodj09PXVuZGVmaW5lZCl7cmV0dXJuIiJ9aWYodHlwZW9mIHY9PSJudW1iZXIifHwhRWwudW5pdFBhdHRlcm4udGVzdCh2KSl7cmV0dXJuIHYrKGRlZmF1bHRVbml0fHwicHgiKX1yZXR1cm4gdn07RWwuYm94TWFya3VwPSI8ZGl2IGNsYXNzPVwiezB9LXRsXCI+PGRpdiBjbGFzcz1cInswfS10clwiPjxkaXYgY2xhc3M9XCJ7MH0tdGNcIj48L2Rpdj48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPVwiezB9LW1sXCI+PGRpdiBjbGFzcz1cInswfS1tclwiPjxkaXYgY2xhc3M9XCJ7MH0tbWNcIj48L2Rpdj48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPVwiezB9LWJsXCI+PGRpdiBjbGFzcz1cInswfS1iclwiPjxkaXYgY2xhc3M9XCJ7MH0tYmNcIj48L2Rpdj48L2Rpdj48L2Rpdj4iO0VsLlZJU0lCSUxJVFk9MTtFbC5ESVNQTEFZPTI7RWwuYm9yZGVycz17bDoiYm9yZGVyLWxlZnQtd2lkdGgiLHI6ImJvcmRlci1yaWdodC13aWR0aCIsdDoiYm9yZGVyLXRvcC13aWR0aCIsYjoiYm9yZGVyLWJvdHRvbS13aWR0aCJ9O0VsLnBhZGRpbmdzPXtsOiJwYWRkaW5nLWxlZnQiLHI6InBhZGRpbmctcmlnaHQiLHQ6InBhZGRpbmctdG9wIixiOiJwYWRkaW5nLWJvdHRvbSJ9O0VsLm1hcmdpbnM9e2w6Im1hcmdpbi1sZWZ0IixyOiJtYXJnaW4tcmlnaHQiLHQ6Im1hcmdpbi10b3AiLGI6Im1hcmdpbi1ib3R0b20ifTtFbC5jYWNoZT17fTt2YXIgZG9jRWw7RWwuZ2V0PWZ1bmN0aW9uKGVsKXt2YXIgZXgsZWxtLGlkO2lmKCFlbCl7cmV0dXJuIG51bGx9aWYodHlwZW9mIGVsPT0ic3RyaW5nIil7aWYoIShlbG09ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWwpKSl7cmV0dXJuIG51bGx9aWYoZXg9RWwuY2FjaGVbZWxdKXtleC5kb209ZWxtfWVsc2V7ZXg9RWwuY2FjaGVbZWxdPW5ldyBFbChlbG0pfXJldHVybiBleH1lbHNle2lmKGVsLnRhZ05hbWUpe2lmKCEoaWQ9ZWwuaWQpKXtpZD1FeHQuaWQoZWwpfWlmKGV4PUVsLmNhY2hlW2lkXSl7ZXguZG9tPWVsfWVsc2V7ZXg9RWwuY2FjaGVbaWRdPW5ldyBFbChlbCl9cmV0dXJuIGV4fWVsc2V7aWYoZWwgaW5zdGFuY2VvZiBFbCl7aWYoZWwhPWRvY0VsKXtlbC5kb209ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWwuaWQpfHxlbC5kb207RWwuY2FjaGVbZWwuaWRdPWVsfXJldHVybiBlbH1lbHNle2lmKGVsLmlzQ29tcG9zaXRlKXtyZXR1cm4gZWx9ZWxzZXtpZihFeHQuaXNBcnJheShlbCkpe3JldHVybiBFbC5zZWxlY3QoZWwpfWVsc2V7aWYoZWw9PWRvY3VtZW50KXtpZighZG9jRWwpe3ZhciBmPWZ1bmN0aW9uKCl7fTtmLnByb3RvdHlwZT1FbC5wcm90b3R5cGU7ZG9jRWw9bmV3IGYoKTtkb2NFbC5kb209ZG9jdW1lbnR9cmV0dXJuIGRvY0VsfX19fX19cmV0dXJuIG51bGx9O0VsLnVuY2FjaGU9ZnVuY3Rpb24oZWwpe2Zvcih2YXIgaT0wLGE9YXJndW1lbnRzLGxlbj1hLmxlbmd0aDtpPGxlbjtpKyspe2lmKGFbaV0pe2RlbGV0ZSBFbC5jYWNoZVthW2ldLmlkfHxhW2ldXX19fTtFbC5nYXJiYWdlQ29sbGVjdD1mdW5jdGlvbigpe2lmKCFFeHQuZW5hYmxlR2FyYmFnZUNvbGxlY3Rvcil7Y2xlYXJJbnRlcnZhbChFbC5jb2xsZWN0b3JUaHJlYWQpO3JldHVybiB9Zm9yKHZhciBlaWQgaW4gRWwuY2FjaGUpe3ZhciBlbD1FbC5jYWNoZVtlaWRdLGQ9ZWwuZG9tO2lmKCFkfHwhZC5wYXJlbnROb2RlfHwoIWQub2Zmc2V0UGFyZW50JiYhZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWlkKSkpe2RlbGV0ZSBFbC5jYWNoZVtlaWRdO2lmKGQmJkV4dC5lbmFibGVMaXN0ZW5lckNvbGxlY3Rpb24pe0UucHVyZ2VFbGVtZW50KGQpfX19fTtFbC5jb2xsZWN0b3JUaHJlYWRJZD1zZXRJbnRlcnZhbChFbC5nYXJiYWdlQ29sbGVjdCwzMDAwMCk7dmFyIGZseUZuPWZ1bmN0aW9uKCl7fTtmbHlGbi5wcm90b3R5cGU9RWwucHJvdG90eXBlO3ZhciBfY2xzPW5ldyBmbHlGbigpO0VsLkZseXdlaWdodD1mdW5jdGlvbihkb20pe3RoaXMuZG9tPWRvbX07RWwuRmx5d2VpZ2h0LnByb3RvdHlwZT1fY2xzO0VsLkZseXdlaWdodC5wcm90b3R5cGUuaXNGbHl3ZWlnaHQ9dHJ1ZTtFbC5fZmx5d2VpZ2h0cz17fTtFbC5mbHk9ZnVuY3Rpb24oZWwsbmFtZWQpe25hbWVkPW5hbWVkfHwiX2dsb2JhbCI7ZWw9RXh0LmdldERvbShlbCk7aWYoIWVsKXtyZXR1cm4gbnVsbH1pZighRWwuX2ZseXdlaWdodHNbbmFtZWRdKXtFbC5fZmx5d2VpZ2h0c1tuYW1lZF09bmV3IEVsLkZseXdlaWdodCgpfUVsLl9mbHl3ZWlnaHRzW25hbWVkXS5kb209ZWw7cmV0dXJuIEVsLl9mbHl3ZWlnaHRzW25hbWVkXX07RXh0LmdldD1FbC5nZXQ7RXh0LmZseT1FbC5mbHk7dmFyIG5vQm94QWRqdXN0PUV4dC5pc1N0cmljdD97c2VsZWN0OjF9OntpbnB1dDoxLHNlbGVjdDoxLHRleHRhcmVhOjF9O2lmKEV4dC5pc0lFfHxFeHQuaXNHZWNrbyl7bm9Cb3hBZGp1c3RbImJ1dHRvbiJdPTF9RXh0LkV2ZW50TWFuYWdlci5vbih3aW5kb3csInVubG9hZCIsZnVuY3Rpb24oKXtkZWxldGUgRWwuY2FjaGU7ZGVsZXRlIEVsLl9mbHl3ZWlnaHRzfSl9KSgpOw0KRXh0LmVuYWJsZUZ4PXRydWU7RXh0LkZ4PXtzbGlkZUluOmZ1bmN0aW9uKEEsQyl7dmFyIEI9dGhpcy5nZXRGeEVsKCk7Qz1DfHx7fTtCLnF1ZXVlRngoQyxmdW5jdGlvbigpe0E9QXx8InQiO3RoaXMuZml4RGlzcGxheSgpO3ZhciBEPXRoaXMuZ2V0RnhSZXN0b3JlKCk7dmFyIEk9dGhpcy5nZXRCb3goKTt0aGlzLnNldFNpemUoSSk7dmFyIEY9dGhpcy5meFdyYXAoRC5wb3MsQywiaGlkZGVuIik7dmFyIEs9dGhpcy5kb20uc3R5bGU7Sy52aXNpYmlsaXR5PSJ2aXNpYmxlIjtLLnBvc2l0aW9uPSJhYnNvbHV0ZSI7dmFyIEU9ZnVuY3Rpb24oKXtCLmZ4VW53cmFwKEYsRC5wb3MsQyk7Sy53aWR0aD1ELndpZHRoO0suaGVpZ2h0PUQuaGVpZ2h0O0IuYWZ0ZXJGeChDKX07dmFyIEosTD17dG86W0kueCxJLnldfSxIPXt0bzpJLndpZHRofSxHPXt0bzpJLmhlaWdodH07c3dpdGNoKEEudG9Mb3dlckNhc2UoKSl7Y2FzZSJ0IjpGLnNldFNpemUoSS53aWR0aCwwKTtLLmxlZnQ9Sy5ib3R0b209IjAiO0o9e2hlaWdodDpHfTticmVhaztjYXNlImwiOkYuc2V0U2l6ZSgwLEkuaGVpZ2h0KTtLLnJpZ2h0PUsudG9wPSIwIjtKPXt3aWR0aDpIfTticmVhaztjYXNlInIiOkYuc2V0U2l6ZSgwLEkuaGVpZ2h0KTtGLnNldFgoSS5yaWdodCk7Sy5sZWZ0PUsudG9wPSIwIjtKPXt3aWR0aDpILHBvaW50czpMfTticmVhaztjYXNlImIiOkYuc2V0U2l6ZShJLndpZHRoLDApO0Yuc2V0WShJLmJvdHRvbSk7Sy5sZWZ0PUsudG9wPSIwIjtKPXtoZWlnaHQ6Ryxwb2ludHM6TH07YnJlYWs7Y2FzZSJ0bCI6Ri5zZXRTaXplKDAsMCk7Sy5yaWdodD1LLmJvdHRvbT0iMCI7Sj17d2lkdGg6SCxoZWlnaHQ6R307YnJlYWs7Y2FzZSJibCI6Ri5zZXRTaXplKDAsMCk7Ri5zZXRZKEkueStJLmhlaWdodCk7Sy5yaWdodD1LLnRvcD0iMCI7Sj17d2lkdGg6SCxoZWlnaHQ6Ryxwb2ludHM6TH07YnJlYWs7Y2FzZSJiciI6Ri5zZXRTaXplKDAsMCk7Ri5zZXRYWShbSS5yaWdodCxJLmJvdHRvbV0pO0subGVmdD1LLnRvcD0iMCI7Sj17d2lkdGg6SCxoZWlnaHQ6Ryxwb2ludHM6TH07YnJlYWs7Y2FzZSJ0ciI6Ri5zZXRTaXplKDAsMCk7Ri5zZXRYKEkueCtJLndpZHRoKTtLLmxlZnQ9Sy5ib3R0b209IjAiO0o9e3dpZHRoOkgsaGVpZ2h0OkcscG9pbnRzOkx9O2JyZWFrfXRoaXMuZG9tLnN0eWxlLnZpc2liaWxpdHk9InZpc2libGUiO0Yuc2hvdygpO2FyZ3VtZW50cy5jYWxsZWUuYW5pbT1GLmZ4YW5pbShKLEMsIm1vdGlvbiIsMC41LCJlYXNlT3V0IixFKX0pO3JldHVybiB0aGlzfSxzbGlkZU91dDpmdW5jdGlvbihBLEMpe3ZhciBCPXRoaXMuZ2V0RnhFbCgpO0M9Q3x8e307Qi5xdWV1ZUZ4KEMsZnVuY3Rpb24oKXtBPUF8fCJ0Ijt2YXIgST10aGlzLmdldEZ4UmVzdG9yZSgpO3ZhciBEPXRoaXMuZ2V0Qm94KCk7dGhpcy5zZXRTaXplKEQpO3ZhciBHPXRoaXMuZnhXcmFwKEkucG9zLEMsInZpc2libGUiKTt2YXIgRj10aGlzLmRvbS5zdHlsZTtGLnZpc2liaWxpdHk9InZpc2libGUiO0YucG9zaXRpb249ImFic29sdXRlIjtHLnNldFNpemUoRCk7dmFyIEo9ZnVuY3Rpb24oKXtpZihDLnVzZURpc3BsYXkpe0Iuc2V0RGlzcGxheWVkKGZhbHNlKX1lbHNle0IuaGlkZSgpfUIuZnhVbndyYXAoRyxJLnBvcyxDKTtGLndpZHRoPUkud2lkdGg7Ri5oZWlnaHQ9SS5oZWlnaHQ7Qi5hZnRlckZ4KEMpfTt2YXIgRSxIPXt0bzowfTtzd2l0Y2goQS50b0xvd2VyQ2FzZSgpKXtjYXNlInQiOkYubGVmdD1GLmJvdHRvbT0iMCI7RT17aGVpZ2h0Okh9O2JyZWFrO2Nhc2UibCI6Ri5yaWdodD1GLnRvcD0iMCI7RT17d2lkdGg6SH07YnJlYWs7Y2FzZSJyIjpGLmxlZnQ9Ri50b3A9IjAiO0U9e3dpZHRoOkgscG9pbnRzOnt0bzpbRC5yaWdodCxELnldfX07YnJlYWs7Y2FzZSJiIjpGLmxlZnQ9Ri50b3A9IjAiO0U9e2hlaWdodDpILHBvaW50czp7dG86W0QueCxELmJvdHRvbV19fTticmVhaztjYXNlInRsIjpGLnJpZ2h0PUYuYm90dG9tPSIwIjtFPXt3aWR0aDpILGhlaWdodDpIfTticmVhaztjYXNlImJsIjpGLnJpZ2h0PUYudG9wPSIwIjtFPXt3aWR0aDpILGhlaWdodDpILHBvaW50czp7dG86W0QueCxELmJvdHRvbV19fTticmVhaztjYXNlImJyIjpGLmxlZnQ9Ri50b3A9IjAiO0U9e3dpZHRoOkgsaGVpZ2h0OkgscG9pbnRzOnt0bzpbRC54K0Qud2lkdGgsRC5ib3R0b21dfX07YnJlYWs7Y2FzZSJ0ciI6Ri5sZWZ0PUYuYm90dG9tPSIwIjtFPXt3aWR0aDpILGhlaWdodDpILHBvaW50czp7dG86W0QucmlnaHQsRC55XX19O2JyZWFrfWFyZ3VtZW50cy5jYWxsZWUuYW5pbT1HLmZ4YW5pbShFLEMsIm1vdGlvbiIsMC41LCJlYXNlT3V0IixKKX0pO3JldHVybiB0aGlzfSxwdWZmOmZ1bmN0aW9uKEIpe3ZhciBBPXRoaXMuZ2V0RnhFbCgpO0I9Qnx8e307QS5xdWV1ZUZ4KEIsZnVuY3Rpb24oKXt0aGlzLmNsZWFyT3BhY2l0eSgpO3RoaXMuc2hvdygpO3ZhciBGPXRoaXMuZ2V0RnhSZXN0b3JlKCk7dmFyIEQ9dGhpcy5kb20uc3R5bGU7dmFyIEc9ZnVuY3Rpb24oKXtpZihCLnVzZURpc3BsYXkpe0Euc2V0RGlzcGxheWVkKGZhbHNlKX1lbHNle0EuaGlkZSgpfUEuY2xlYXJPcGFjaXR5KCk7QS5zZXRQb3NpdGlvbmluZyhGLnBvcyk7RC53aWR0aD1GLndpZHRoO0QuaGVpZ2h0PUYuaGVpZ2h0O0QuZm9udFNpemU9IiI7QS5hZnRlckZ4KEIpfTt2YXIgRT10aGlzLmdldFdpZHRoKCk7dmFyIEM9dGhpcy5nZXRIZWlnaHQoKTthcmd1bWVudHMuY2FsbGVlLmFuaW09dGhpcy5meGFuaW0oe3dpZHRoOnt0bzp0aGlzLmFkanVzdFdpZHRoKEUqMil9LGhlaWdodDp7dG86dGhpcy5hZGp1c3RIZWlnaHQoQyoyKX0scG9pbnRzOntieTpbLShFKjAuNSksLShDKjAuNSldfSxvcGFjaXR5Ont0bzowfSxmb250U2l6ZTp7dG86MjAwLHVuaXQ6IiUifX0sQiwibW90aW9uIiwwLjUsImVhc2VPdXQiLEcpfSk7cmV0dXJuIHRoaXN9LHN3aXRjaE9mZjpmdW5jdGlvbihCKXt2YXIgQT10aGlzLmdldEZ4RWwoKTtCPUJ8fHt9O0EucXVldWVGeChCLGZ1bmN0aW9uKCl7dGhpcy5jbGVhck9wYWNpdHkoKTt0aGlzLmNsaXAoKTt2YXIgRD10aGlzLmdldEZ4UmVzdG9yZSgpO3ZhciBDPXRoaXMuZG9tLnN0eWxlO3ZhciBFPWZ1bmN0aW9uKCl7aWYoQi51c2VEaXNwbGF5KXtBLnNldERpc3BsYXllZChmYWxzZSl9ZWxzZXtBLmhpZGUoKX1BLmNsZWFyT3BhY2l0eSgpO0Euc2V0UG9zaXRpb25pbmcoRC5wb3MpO0Mud2lkdGg9RC53aWR0aDtDLmhlaWdodD1ELmhlaWdodDtBLmFmdGVyRngoQil9O3RoaXMuZnhhbmltKHtvcGFjaXR5Ont0bzowLjN9fSxudWxsLG51bGwsMC4xLG51bGwsZnVuY3Rpb24oKXt0aGlzLmNsZWFyT3BhY2l0eSgpOyhmdW5jdGlvbigpe3RoaXMuZnhhbmltKHtoZWlnaHQ6e3RvOjF9LHBvaW50czp7Ynk6WzAsdGhpcy5nZXRIZWlnaHQoKSowLjVdfX0sQiwibW90aW9uIiwwLjMsImVhc2VJbiIsRSl9KS5kZWZlcigxMDAsdGhpcyl9KX0pO3JldHVybiB0aGlzfSxoaWdobGlnaHQ6ZnVuY3Rpb24oQSxDKXt2YXIgQj10aGlzLmdldEZ4RWwoKTtDPUN8fHt9O0IucXVldWVGeChDLGZ1bmN0aW9uKCl7QT1BfHwiZmZmZjljIjt2YXIgRD1DLmF0dHJ8fCJiYWNrZ3JvdW5kQ29sb3IiO3RoaXMuY2xlYXJPcGFjaXR5KCk7dGhpcy5zaG93KCk7dmFyIEc9dGhpcy5nZXRDb2xvcihEKTt2YXIgSD10aGlzLmRvbS5zdHlsZVtEXTt2YXIgRj0oQy5lbmRDb2xvcnx8Ryl8fCJmZmZmZmYiO3ZhciBJPWZ1bmN0aW9uKCl7Qi5kb20uc3R5bGVbRF09SDtCLmFmdGVyRngoQyl9O3ZhciBFPXt9O0VbRF09e2Zyb206QSx0bzpGfTthcmd1bWVudHMuY2FsbGVlLmFuaW09dGhpcy5meGFuaW0oRSxDLCJjb2xvciIsMSwiZWFzZUluIixJKX0pO3JldHVybiB0aGlzfSxmcmFtZTpmdW5jdGlvbihBLEMsRCl7dmFyIEI9dGhpcy5nZXRGeEVsKCk7RD1EfHx7fTtCLnF1ZXVlRngoRCxmdW5jdGlvbigpe0E9QXx8IiNDM0RBRjkiO2lmKEEubGVuZ3RoPT02KXtBPSIjIitBfUM9Q3x8MTt2YXIgRz1ELmR1cmF0aW9ufHwxO3RoaXMuc2hvdygpO3ZhciBFPXRoaXMuZ2V0Qm94KCk7dmFyIEY9ZnVuY3Rpb24oKXt2YXIgSD1FeHQuZ2V0Qm9keSgpLmNyZWF0ZUNoaWxkKHtzdHlsZTp7dmlzYmlsaXR5OiJoaWRkZW4iLHBvc2l0aW9uOiJhYnNvbHV0ZSIsInotaW5kZXgiOiIzNTAwMCIsYm9yZGVyOiIwcHggc29saWQgIitBfX0pO3ZhciBJPUV4dC5pc0JvcmRlckJveD8yOjE7SC5hbmltYXRlKHt0b3A6e2Zyb206RS55LHRvOkUueS0yMH0sbGVmdDp7ZnJvbTpFLngsdG86RS54LTIwfSxib3JkZXJXaWR0aDp7ZnJvbTowLHRvOjEwfSxvcGFjaXR5Ontmcm9tOjEsdG86MH0saGVpZ2h0Ontmcm9tOkUuaGVpZ2h0LHRvOihFLmhlaWdodCsoMjAqSSkpfSx3aWR0aDp7ZnJvbTpFLndpZHRoLHRvOihFLndpZHRoKygyMCpJKSl9fSxHLGZ1bmN0aW9uKCl7SC5yZW1vdmUoKTtpZigtLUM+MCl7RigpfWVsc2V7Qi5hZnRlckZ4KEQpfX0pfTtGLmNhbGwodGhpcyl9KTtyZXR1cm4gdGhpc30scGF1c2U6ZnVuY3Rpb24oQyl7dmFyIEE9dGhpcy5nZXRGeEVsKCk7dmFyIEI9e307QS5xdWV1ZUZ4KEIsZnVuY3Rpb24oKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7QS5hZnRlckZ4KEIpfSxDKjEwMDApfSk7cmV0dXJuIHRoaXN9LGZhZGVJbjpmdW5jdGlvbihCKXt2YXIgQT10aGlzLmdldEZ4RWwoKTtCPUJ8fHt9O0EucXVldWVGeChCLGZ1bmN0aW9uKCl7dGhpcy5zZXRPcGFjaXR5KDApO3RoaXMuZml4RGlzcGxheSgpO3RoaXMuZG9tLnN0eWxlLnZpc2liaWxpdHk9InZpc2libGUiO3ZhciBDPUIuZW5kT3BhY2l0eXx8MTthcmd1bWVudHMuY2FsbGVlLmFuaW09dGhpcy5meGFuaW0oe29wYWNpdHk6e3RvOkN9fSxCLG51bGwsMC41LCJlYXNlT3V0IixmdW5jdGlvbigpe2lmKEM9PTEpe3RoaXMuY2xlYXJPcGFjaXR5KCl9QS5hZnRlckZ4KEIpfSl9KTtyZXR1cm4gdGhpc30sZmFkZU91dDpmdW5jdGlvbihCKXt2YXIgQT10aGlzLmdldEZ4RWwoKTtCPUJ8fHt9O0EucXVldWVGeChCLGZ1bmN0aW9uKCl7YXJndW1lbnRzLmNhbGxlZS5hbmltPXRoaXMuZnhhbmltKHtvcGFjaXR5Ont0bzpCLmVuZE9wYWNpdHl8fDB9fSxCLG51bGwsMC41LCJlYXNlT3V0IixmdW5jdGlvbigpe2lmKHRoaXMudmlzaWJpbGl0eU1vZGU9PUV4dC5FbGVtZW50LkRJU1BMQVl8fEIudXNlRGlzcGxheSl7dGhpcy5kb20uc3R5bGUuZGlzcGxheT0ibm9uZSJ9ZWxzZXt0aGlzLmRvbS5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4ifXRoaXMuY2xlYXJPcGFjaXR5KCk7QS5hZnRlckZ4KEIpfSl9KTtyZXR1cm4gdGhpc30sc2NhbGU6ZnVuY3Rpb24oQSxCLEMpe3RoaXMuc2hpZnQoRXh0LmFwcGx5KHt9LEMse3dpZHRoOkEsaGVpZ2h0OkJ9KSk7cmV0dXJuIHRoaXN9LHNoaWZ0OmZ1bmN0aW9uKEIpe3ZhciBBPXRoaXMuZ2V0RnhFbCgpO0I9Qnx8e307QS5xdWV1ZUZ4KEIsZnVuY3Rpb24oKXt2YXIgRT17fSxEPUIud2lkdGgsRj1CLmhlaWdodCxDPUIueCxIPUIueSxHPUIub3BhY2l0eTtpZihEIT09dW5kZWZpbmVkKXtFLndpZHRoPXt0bzp0aGlzLmFkanVzdFdpZHRoKEQpfX1pZihGIT09dW5kZWZpbmVkKXtFLmhlaWdodD17dG86dGhpcy5hZGp1c3RIZWlnaHQoRil9fWlmKEMhPT11bmRlZmluZWR8fEghPT11bmRlZmluZWQpe0UucG9pbnRzPXt0bzpbQyE9PXVuZGVmaW5lZD9DOnRoaXMuZ2V0WCgpLEghPT11bmRlZmluZWQ/SDp0aGlzLmdldFkoKV19fWlmKEchPT11bmRlZmluZWQpe0Uub3BhY2l0eT17dG86R319aWYoQi54eSE9PXVuZGVmaW5lZCl7RS5wb2ludHM9e3RvOkIueHl9fWFyZ3VtZW50cy5jYWxsZWUuYW5pbT10aGlzLmZ4YW5pbShFLEIsIm1vdGlvbiIsMC4zNSwiZWFzZU91dCIsZnVuY3Rpb24oKXtBLmFmdGVyRngoQil9KX0pO3JldHVybiB0aGlzfSxnaG9zdDpmdW5jdGlvbihBLEMpe3ZhciBCPXRoaXMuZ2V0RnhFbCgpO0M9Q3x8e307Qi5xdWV1ZUZ4KEMsZnVuY3Rpb24oKXtBPUF8fCJiIjt2YXIgSD10aGlzLmdldEZ4UmVzdG9yZSgpO3ZhciBFPXRoaXMuZ2V0V2lkdGgoKSxHPXRoaXMuZ2V0SGVpZ2h0KCk7dmFyIEY9dGhpcy5kb20uc3R5bGU7dmFyIEo9ZnVuY3Rpb24oKXtpZihDLnVzZURpc3BsYXkpe0Iuc2V0RGlzcGxheWVkKGZhbHNlKX1lbHNle0IuaGlkZSgpfUIuY2xlYXJPcGFjaXR5KCk7Qi5zZXRQb3NpdGlvbmluZyhILnBvcyk7Ri53aWR0aD1ILndpZHRoO0YuaGVpZ2h0PUguaGVpZ2h0O0IuYWZ0ZXJGeChDKX07dmFyIEQ9e29wYWNpdHk6e3RvOjB9LHBvaW50czp7fX0sST1ELnBvaW50cztzd2l0Y2goQS50b0xvd2VyQ2FzZSgpKXtjYXNlInQiOkkuYnk9WzAsLUddO2JyZWFrO2Nhc2UibCI6SS5ieT1bLUUsMF07YnJlYWs7Y2FzZSJyIjpJLmJ5PVtFLDBdO2JyZWFrO2Nhc2UiYiI6SS5ieT1bMCxHXTticmVhaztjYXNlInRsIjpJLmJ5PVstRSwtR107YnJlYWs7Y2FzZSJibCI6SS5ieT1bLUUsR107YnJlYWs7Y2FzZSJiciI6SS5ieT1bRSxHXTticmVhaztjYXNlInRyIjpJLmJ5PVtFLC1HXTticmVha31hcmd1bWVudHMuY2FsbGVlLmFuaW09dGhpcy5meGFuaW0oRCxDLCJtb3Rpb24iLDAuNSwiZWFzZU91dCIsSil9KTtyZXR1cm4gdGhpc30sc3luY0Z4OmZ1bmN0aW9uKCl7dGhpcy5meERlZmF1bHRzPUV4dC5hcHBseSh0aGlzLmZ4RGVmYXVsdHN8fHt9LHtibG9jazpmYWxzZSxjb25jdXJyZW50OnRydWUsc3RvcEZ4OmZhbHNlfSk7cmV0dXJuIHRoaXN9LHNlcXVlbmNlRng6ZnVuY3Rpb24oKXt0aGlzLmZ4RGVmYXVsdHM9RXh0LmFwcGx5KHRoaXMuZnhEZWZhdWx0c3x8e30se2Jsb2NrOmZhbHNlLGNvbmN1cnJlbnQ6ZmFsc2Usc3RvcEZ4OmZhbHNlfSk7cmV0dXJuIHRoaXN9LG5leHRGeDpmdW5jdGlvbigpe3ZhciBBPXRoaXMuZnhRdWV1ZVswXTtpZihBKXtBLmNhbGwodGhpcyl9fSxoYXNBY3RpdmVGeDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZ4UXVldWUmJnRoaXMuZnhRdWV1ZVswXX0sc3RvcEZ4OmZ1bmN0aW9uKCl7aWYodGhpcy5oYXNBY3RpdmVGeCgpKXt2YXIgQT10aGlzLmZ4UXVldWVbMF07aWYoQSYmQS5hbmltJiZBLmFuaW0uaXNBbmltYXRlZCgpKXt0aGlzLmZ4UXVldWU9W0FdO0EuYW5pbS5zdG9wKHRydWUpfX1yZXR1cm4gdGhpc30sYmVmb3JlRng6ZnVuY3Rpb24oQSl7aWYodGhpcy5oYXNBY3RpdmVGeCgpJiYhQS5jb25jdXJyZW50KXtpZihBLnN0b3BGeCl7dGhpcy5zdG9wRngoKTtyZXR1cm4gdHJ1ZX1yZXR1cm4gZmFsc2V9cmV0dXJuIHRydWV9LGhhc0Z4QmxvY2s6ZnVuY3Rpb24oKXt2YXIgQT10aGlzLmZ4UXVldWU7cmV0dXJuIEEmJkFbMF0mJkFbMF0uYmxvY2t9LHF1ZXVlRng6ZnVuY3Rpb24oQyxBKXtpZighdGhpcy5meFF1ZXVlKXt0aGlzLmZ4UXVldWU9W119aWYoIXRoaXMuaGFzRnhCbG9jaygpKXtFeHQuYXBwbHlJZihDLHRoaXMuZnhEZWZhdWx0cyk7aWYoIUMuY29uY3VycmVudCl7dmFyIEI9dGhpcy5iZWZvcmVGeChDKTtBLmJsb2NrPUMuYmxvY2s7dGhpcy5meFF1ZXVlLnB1c2goQSk7aWYoQil7dGhpcy5uZXh0RngoKX19ZWxzZXtBLmNhbGwodGhpcyl9fXJldHVybiB0aGlzfSxmeFdyYXA6ZnVuY3Rpb24oRixELEMpe3ZhciBCO2lmKCFELndyYXB8fCEoQj1FeHQuZ2V0KEQud3JhcCkpKXt2YXIgQTtpZihELmZpeFBvc2l0aW9uKXtBPXRoaXMuZ2V0WFkoKX12YXIgRT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtFLnN0eWxlLnZpc2liaWxpdHk9QztCPUV4dC5nZXQodGhpcy5kb20ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoRSx0aGlzLmRvbSkpO0Iuc2V0UG9zaXRpb25pbmcoRik7aWYoQi5nZXRTdHlsZSgicG9zaXRpb24iKT09InN0YXRpYyIpe0IucG9zaXRpb24oInJlbGF0aXZlIil9dGhpcy5jbGVhclBvc2l0aW9uaW5nKCJhdXRvIik7Qi5jbGlwKCk7Qi5kb20uYXBwZW5kQ2hpbGQodGhpcy5kb20pO2lmKEEpe0Iuc2V0WFkoQSl9fXJldHVybiBCfSxmeFVud3JhcDpmdW5jdGlvbihBLEMsQil7dGhpcy5jbGVhclBvc2l0aW9uaW5nKCk7dGhpcy5zZXRQb3NpdGlvbmluZyhDKTtpZighQi53cmFwKXtBLmRvbS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLmRvbSxBLmRvbSk7QS5yZW1vdmUoKX19LGdldEZ4UmVzdG9yZTpmdW5jdGlvbigpe3ZhciBBPXRoaXMuZG9tLnN0eWxlO3JldHVybntwb3M6dGhpcy5nZXRQb3NpdGlvbmluZygpLHdpZHRoOkEud2lkdGgsaGVpZ2h0OkEuaGVpZ2h0fX0sYWZ0ZXJGeDpmdW5jdGlvbihBKXtpZihBLmFmdGVyU3R5bGUpe3RoaXMuYXBwbHlTdHlsZXMoQS5hZnRlclN0eWxlKX1pZihBLmFmdGVyQ2xzKXt0aGlzLmFkZENsYXNzKEEuYWZ0ZXJDbHMpfWlmKEEucmVtb3ZlPT09dHJ1ZSl7dGhpcy5yZW1vdmUoKX1FeHQuY2FsbGJhY2soQS5jYWxsYmFjayxBLnNjb3BlLFt0aGlzXSk7aWYoIUEuY29uY3VycmVudCl7dGhpcy5meFF1ZXVlLnNoaWZ0KCk7dGhpcy5uZXh0RngoKX19LGdldEZ4RWw6ZnVuY3Rpb24oKXtyZXR1cm4gRXh0LmdldCh0aGlzLmRvbSl9LGZ4YW5pbTpmdW5jdGlvbihELEUsQixGLEMsQSl7Qj1CfHwicnVuIjtFPUV8fHt9O3ZhciBHPUV4dC5saWIuQW5pbVtCXSh0aGlzLmRvbSxELChFLmR1cmF0aW9ufHxGKXx8MC4zNSwoRS5lYXNpbmd8fEMpfHwiZWFzZU91dCIsZnVuY3Rpb24oKXtFeHQuY2FsbGJhY2soQSx0aGlzKX0sdGhpcyk7RS5hbmltPUc7cmV0dXJuIEd9fTtFeHQuRngucmVzaXplPUV4dC5GeC5zY2FsZTtFeHQuYXBwbHkoRXh0LkVsZW1lbnQucHJvdG90eXBlLEV4dC5GeCk7DQpFeHQuQ29tcG9zaXRlRWxlbWVudD1mdW5jdGlvbihBKXt0aGlzLmVsZW1lbnRzPVtdO3RoaXMuYWRkRWxlbWVudHMoQSl9O0V4dC5Db21wb3NpdGVFbGVtZW50LnByb3RvdHlwZT17aXNDb21wb3NpdGU6dHJ1ZSxhZGRFbGVtZW50czpmdW5jdGlvbihFKXtpZighRSl7cmV0dXJuIHRoaXN9aWYodHlwZW9mIEU9PSJzdHJpbmciKXtFPUV4dC5FbGVtZW50LnNlbGVjdG9yRnVuY3Rpb24oRSl9dmFyIEQ9dGhpcy5lbGVtZW50czt2YXIgQj1ELmxlbmd0aC0xO2Zvcih2YXIgQz0wLEE9RS5sZW5ndGg7QzxBO0MrKyl7RFsrK0JdPUV4dC5nZXQoRVtDXSl9cmV0dXJuIHRoaXN9LGZpbGw6ZnVuY3Rpb24oQSl7dGhpcy5lbGVtZW50cz1bXTt0aGlzLmFkZChBKTtyZXR1cm4gdGhpc30sZmlsdGVyOmZ1bmN0aW9uKEEpe3ZhciBCPVtdO3RoaXMuZWFjaChmdW5jdGlvbihDKXtpZihDLmlzKEEpKXtCW0IubGVuZ3RoXT1DLmRvbX19KTt0aGlzLmZpbGwoQik7cmV0dXJuIHRoaXN9LGludm9rZTpmdW5jdGlvbihFLEIpe3ZhciBEPXRoaXMuZWxlbWVudHM7Zm9yKHZhciBDPTAsQT1ELmxlbmd0aDtDPEE7QysrKXtFeHQuRWxlbWVudC5wcm90b3R5cGVbRV0uYXBwbHkoRFtDXSxCKX1yZXR1cm4gdGhpc30sYWRkOmZ1bmN0aW9uKEEpe2lmKHR5cGVvZiBBPT0ic3RyaW5nIil7dGhpcy5hZGRFbGVtZW50cyhFeHQuRWxlbWVudC5zZWxlY3RvckZ1bmN0aW9uKEEpKX1lbHNle2lmKEEubGVuZ3RoIT09dW5kZWZpbmVkKXt0aGlzLmFkZEVsZW1lbnRzKEEpfWVsc2V7dGhpcy5hZGRFbGVtZW50cyhbQV0pfX1yZXR1cm4gdGhpc30sZWFjaDpmdW5jdGlvbihFLEQpe3ZhciBDPXRoaXMuZWxlbWVudHM7Zm9yKHZhciBCPTAsQT1DLmxlbmd0aDtCPEE7QisrKXtpZihFLmNhbGwoRHx8Q1tCXSxDW0JdLHRoaXMsQik9PT1mYWxzZSl7YnJlYWt9fXJldHVybiB0aGlzfSxpdGVtOmZ1bmN0aW9uKEEpe3JldHVybiB0aGlzLmVsZW1lbnRzW0FdfHxudWxsfSxmaXJzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLml0ZW0oMCl9LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pdGVtKHRoaXMuZWxlbWVudHMubGVuZ3RoLTEpfSxnZXRDb3VudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsZW1lbnRzLmxlbmd0aH0sY29udGFpbnM6ZnVuY3Rpb24oQSl7cmV0dXJuIHRoaXMuaW5kZXhPZihBKSE9PS0xfSxpbmRleE9mOmZ1bmN0aW9uKEEpe3JldHVybiB0aGlzLmVsZW1lbnRzLmluZGV4T2YoRXh0LmdldChBKSl9LHJlbW92ZUVsZW1lbnQ6ZnVuY3Rpb24oRCxGKXtpZihFeHQuaXNBcnJheShEKSl7Zm9yKHZhciBDPTAsQT1ELmxlbmd0aDtDPEE7QysrKXt0aGlzLnJlbW92ZUVsZW1lbnQoRFtDXSl9cmV0dXJuIHRoaXN9dmFyIEI9dHlwZW9mIEQ9PSJudW1iZXIiP0Q6dGhpcy5pbmRleE9mKEQpO2lmKEIhPT0tMSYmdGhpcy5lbGVtZW50c1tCXSl7aWYoRil7dmFyIEU9dGhpcy5lbGVtZW50c1tCXTtpZihFLmRvbSl7RS5yZW1vdmUoKX1lbHNle0V4dC5yZW1vdmVOb2RlKEUpfX10aGlzLmVsZW1lbnRzLnNwbGljZShCLDEpfXJldHVybiB0aGlzfSxyZXBsYWNlRWxlbWVudDpmdW5jdGlvbihELEMsQSl7dmFyIEI9dHlwZW9mIEQ9PSJudW1iZXIiP0Q6dGhpcy5pbmRleE9mKEQpO2lmKEIhPT0tMSl7aWYoQSl7dGhpcy5lbGVtZW50c1tCXS5yZXBsYWNlV2l0aChDKX1lbHNle3RoaXMuZWxlbWVudHMuc3BsaWNlKEIsMSxFeHQuZ2V0KEMpKX19cmV0dXJuIHRoaXN9LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50cz1bXX19OyhmdW5jdGlvbigpe0V4dC5Db21wb3NpdGVFbGVtZW50LmNyZWF0ZUNhbGw9ZnVuY3Rpb24oQixDKXtpZighQltDXSl7QltDXT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmludm9rZShDLGFyZ3VtZW50cyl9fX07Zm9yKHZhciBBIGluIEV4dC5FbGVtZW50LnByb3RvdHlwZSl7aWYodHlwZW9mIEV4dC5FbGVtZW50LnByb3RvdHlwZVtBXT09ImZ1bmN0aW9uIil7RXh0LkNvbXBvc2l0ZUVsZW1lbnQuY3JlYXRlQ2FsbChFeHQuQ29tcG9zaXRlRWxlbWVudC5wcm90b3R5cGUsQSl9fX0pKCk7RXh0LkNvbXBvc2l0ZUVsZW1lbnRMaXRlPWZ1bmN0aW9uKEEpe0V4dC5Db21wb3NpdGVFbGVtZW50TGl0ZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxBKTt0aGlzLmVsPW5ldyBFeHQuRWxlbWVudC5GbHl3ZWlnaHQoKX07RXh0LmV4dGVuZChFeHQuQ29tcG9zaXRlRWxlbWVudExpdGUsRXh0LkNvbXBvc2l0ZUVsZW1lbnQse2FkZEVsZW1lbnRzOmZ1bmN0aW9uKEUpe2lmKEUpe2lmKEV4dC5pc0FycmF5KEUpKXt0aGlzLmVsZW1lbnRzPXRoaXMuZWxlbWVudHMuY29uY2F0KEUpfWVsc2V7dmFyIEQ9dGhpcy5lbGVtZW50czt2YXIgQj1ELmxlbmd0aC0xO2Zvcih2YXIgQz0wLEE9RS5sZW5ndGg7QzxBO0MrKyl7RFsrK0JdPUVbQ119fX1yZXR1cm4gdGhpc30saW52b2tlOmZ1bmN0aW9uKEYsQil7dmFyIEQ9dGhpcy5lbGVtZW50czt2YXIgRT10aGlzLmVsO2Zvcih2YXIgQz0wLEE9RC5sZW5ndGg7QzxBO0MrKyl7RS5kb209RFtDXTtFeHQuRWxlbWVudC5wcm90b3R5cGVbRl0uYXBwbHkoRSxCKX1yZXR1cm4gdGhpc30saXRlbTpmdW5jdGlvbihBKXtpZighdGhpcy5lbGVtZW50c1tBXSl7cmV0dXJuIG51bGx9dGhpcy5lbC5kb209dGhpcy5lbGVtZW50c1tBXTtyZXR1cm4gdGhpcy5lbH0sYWRkTGlzdGVuZXI6ZnVuY3Rpb24oQixHLEYsRSl7dmFyIEQ9dGhpcy5lbGVtZW50cztmb3IodmFyIEM9MCxBPUQubGVuZ3RoO0M8QTtDKyspe0V4dC5FdmVudE1hbmFnZXIub24oRFtDXSxCLEcsRnx8RFtDXSxFKX1yZXR1cm4gdGhpc30sZWFjaDpmdW5jdGlvbihGLEUpe3ZhciBDPXRoaXMuZWxlbWVudHM7dmFyIEQ9dGhpcy5lbDtmb3IodmFyIEI9MCxBPUMubGVuZ3RoO0I8QTtCKyspe0QuZG9tPUNbQl07aWYoRi5jYWxsKEV8fEQsRCx0aGlzLEIpPT09ZmFsc2Upe2JyZWFrfX1yZXR1cm4gdGhpc30saW5kZXhPZjpmdW5jdGlvbihBKXtyZXR1cm4gdGhpcy5lbGVtZW50cy5pbmRleE9mKEV4dC5nZXREb20oQSkpfSxyZXBsYWNlRWxlbWVudDpmdW5jdGlvbihELEMsQSl7dmFyIEI9dHlwZW9mIEQ9PSJudW1iZXIiP0Q6dGhpcy5pbmRleE9mKEQpO2lmKEIhPT0tMSl7Qz1FeHQuZ2V0RG9tKEMpO2lmKEEpe3ZhciBFPXRoaXMuZWxlbWVudHNbQl07RS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShDLEUpO0V4dC5yZW1vdmVOb2RlKEUpfXRoaXMuZWxlbWVudHMuc3BsaWNlKEIsMSxDKX1yZXR1cm4gdGhpc319KTtFeHQuQ29tcG9zaXRlRWxlbWVudExpdGUucHJvdG90eXBlLm9uPUV4dC5Db21wb3NpdGVFbGVtZW50TGl0ZS5wcm90b3R5cGUuYWRkTGlzdGVuZXI7aWYoRXh0LkRvbVF1ZXJ5KXtFeHQuRWxlbWVudC5zZWxlY3RvckZ1bmN0aW9uPUV4dC5Eb21RdWVyeS5zZWxlY3R9RXh0LkVsZW1lbnQuc2VsZWN0PWZ1bmN0aW9uKEEsRCxCKXt2YXIgQztpZih0eXBlb2YgQT09InN0cmluZyIpe0M9RXh0LkVsZW1lbnQuc2VsZWN0b3JGdW5jdGlvbihBLEIpfWVsc2V7aWYoQS5sZW5ndGghPT11bmRlZmluZWQpe0M9QX1lbHNle3Rocm93IkludmFsaWQgc2VsZWN0b3IifX1pZihEPT09dHJ1ZSl7cmV0dXJuIG5ldyBFeHQuQ29tcG9zaXRlRWxlbWVudChDKX1lbHNle3JldHVybiBuZXcgRXh0LkNvbXBvc2l0ZUVsZW1lbnRMaXRlKEMpfX07RXh0LnNlbGVjdD1FeHQuRWxlbWVudC5zZWxlY3Q7DQpFeHQuZGF0YS5Db25uZWN0aW9uPWZ1bmN0aW9uKEEpe0V4dC5hcHBseSh0aGlzLEEpO3RoaXMuYWRkRXZlbnRzKCJiZWZvcmVyZXF1ZXN0IiwicmVxdWVzdGNvbXBsZXRlIiwicmVxdWVzdGV4Y2VwdGlvbiIpO0V4dC5kYXRhLkNvbm5lY3Rpb24uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpfTtFeHQuZXh0ZW5kKEV4dC5kYXRhLkNvbm5lY3Rpb24sRXh0LnV0aWwuT2JzZXJ2YWJsZSx7dGltZW91dDozMDAwMCxhdXRvQWJvcnQ6ZmFsc2UsZGlzYWJsZUNhY2hpbmc6dHJ1ZSxyZXF1ZXN0OmZ1bmN0aW9uKEUpe2lmKHRoaXMuZmlyZUV2ZW50KCJiZWZvcmVyZXF1ZXN0Iix0aGlzLEUpIT09ZmFsc2Upe3ZhciBDPUUucGFyYW1zO2lmKHR5cGVvZiBDPT0iZnVuY3Rpb24iKXtDPUMuY2FsbChFLnNjb3BlfHx3aW5kb3csRSl9aWYodHlwZW9mIEM9PSJvYmplY3QiKXtDPUV4dC51cmxFbmNvZGUoQyl9aWYodGhpcy5leHRyYVBhcmFtcyl7dmFyIEc9RXh0LnVybEVuY29kZSh0aGlzLmV4dHJhUGFyYW1zKTtDPUM/KEMrIiYiK0cpOkd9dmFyIEI9RS51cmx8fHRoaXMudXJsO2lmKHR5cGVvZiBCPT0iZnVuY3Rpb24iKXtCPUIuY2FsbChFLnNjb3BlfHx3aW5kb3csRSl9aWYoRS5mb3JtKXt2YXIgRD1FeHQuZ2V0RG9tKEUuZm9ybSk7Qj1CfHxELmFjdGlvbjt2YXIgST1ELmdldEF0dHJpYnV0ZSgiZW5jdHlwZSIpO2lmKEUuaXNVcGxvYWR8fChJJiZJLnRvTG93ZXJDYXNlKCk9PSJtdWx0aXBhcnQvZm9ybS1kYXRhIikpe3JldHVybiB0aGlzLmRvRm9ybVVwbG9hZChFLEMsQil9dmFyIEg9RXh0LmxpYi5BamF4LnNlcmlhbGl6ZUZvcm0oRCk7Qz1DPyhDKyImIitIKTpIfXZhciBKPUUuaGVhZGVycztpZih0aGlzLmRlZmF1bHRIZWFkZXJzKXtKPUV4dC5hcHBseShKfHx7fSx0aGlzLmRlZmF1bHRIZWFkZXJzKTtpZighRS5oZWFkZXJzKXtFLmhlYWRlcnM9Sn19dmFyIEY9e3N1Y2Nlc3M6dGhpcy5oYW5kbGVSZXNwb25zZSxmYWlsdXJlOnRoaXMuaGFuZGxlRmFpbHVyZSxzY29wZTp0aGlzLGFyZ3VtZW50OntvcHRpb25zOkV9LHRpbWVvdXQ6RS50aW1lb3V0fHx0aGlzLnRpbWVvdXR9O3ZhciBBPUUubWV0aG9kfHx0aGlzLm1ldGhvZHx8KEM/IlBPU1QiOiJHRVQiKTtpZihBPT0iR0VUIiYmKHRoaXMuZGlzYWJsZUNhY2hpbmcmJkUuZGlzYWJsZUNhY2hpbmchPT1mYWxzZSl8fEUuZGlzYWJsZUNhY2hpbmc9PT10cnVlKXtCKz0oQi5pbmRleE9mKCI/IikhPS0xPyImIjoiPyIpKyJfZGM9IisobmV3IERhdGUoKS5nZXRUaW1lKCkpfWlmKHR5cGVvZiBFLmF1dG9BYm9ydD09ImJvb2xlYW4iKXtpZihFLmF1dG9BYm9ydCl7dGhpcy5hYm9ydCgpfX1lbHNle2lmKHRoaXMuYXV0b0Fib3J0IT09ZmFsc2Upe3RoaXMuYWJvcnQoKX19aWYoKEE9PSJHRVQiJiZDKXx8RS54bWxEYXRhfHxFLmpzb25EYXRhKXtCKz0oQi5pbmRleE9mKCI/IikhPS0xPyImIjoiPyIpK0M7Qz0iIn10aGlzLnRyYW5zSWQ9RXh0LmxpYi5BamF4LnJlcXVlc3QoQSxCLEYsQyxFKTtyZXR1cm4gdGhpcy50cmFuc0lkfWVsc2V7RXh0LmNhbGxiYWNrKEUuY2FsbGJhY2ssRS5zY29wZSxbRSxudWxsLG51bGxdKTtyZXR1cm4gbnVsbH19LGlzTG9hZGluZzpmdW5jdGlvbihBKXtpZihBKXtyZXR1cm4gRXh0LmxpYi5BamF4LmlzQ2FsbEluUHJvZ3Jlc3MoQSl9ZWxzZXtyZXR1cm4gdGhpcy50cmFuc0lkP3RydWU6ZmFsc2V9fSxhYm9ydDpmdW5jdGlvbihBKXtpZihBfHx0aGlzLmlzTG9hZGluZygpKXtFeHQubGliLkFqYXguYWJvcnQoQXx8dGhpcy50cmFuc0lkKX19LGhhbmRsZVJlc3BvbnNlOmZ1bmN0aW9uKEEpe3RoaXMudHJhbnNJZD1mYWxzZTt2YXIgQj1BLmFyZ3VtZW50Lm9wdGlvbnM7QS5hcmd1bWVudD1CP0IuYXJndW1lbnQ6bnVsbDt0aGlzLmZpcmVFdmVudCgicmVxdWVzdGNvbXBsZXRlIix0aGlzLEEsQik7RXh0LmNhbGxiYWNrKEIuc3VjY2VzcyxCLnNjb3BlLFtBLEJdKTtFeHQuY2FsbGJhY2soQi5jYWxsYmFjayxCLnNjb3BlLFtCLHRydWUsQV0pfSxoYW5kbGVGYWlsdXJlOmZ1bmN0aW9uKEEsQyl7dGhpcy50cmFuc0lkPWZhbHNlO3ZhciBCPUEuYXJndW1lbnQub3B0aW9ucztBLmFyZ3VtZW50PUI/Qi5hcmd1bWVudDpudWxsO3RoaXMuZmlyZUV2ZW50KCJyZXF1ZXN0ZXhjZXB0aW9uIix0aGlzLEEsQixDKTtFeHQuY2FsbGJhY2soQi5mYWlsdXJlLEIuc2NvcGUsW0EsQl0pO0V4dC5jYWxsYmFjayhCLmNhbGxiYWNrLEIuc2NvcGUsW0IsZmFsc2UsQV0pfSxkb0Zvcm1VcGxvYWQ6ZnVuY3Rpb24oRSxBLEIpe3ZhciBDPUV4dC5pZCgpO3ZhciBGPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlmcmFtZSIpO0YuaWQ9QztGLm5hbWU9QztGLmNsYXNzTmFtZT0ieC1oaWRkZW4iO2lmKEV4dC5pc0lFKXtGLnNyYz1FeHQuU1NMX1NFQ1VSRV9VUkx9ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChGKTtpZihFeHQuaXNJRSl7ZG9jdW1lbnQuZnJhbWVzW0NdLm5hbWU9Q312YXIgRD1FeHQuZ2V0RG9tKEUuZm9ybSk7RC50YXJnZXQ9QztELm1ldGhvZD0iUE9TVCI7RC5lbmN0eXBlPUQuZW5jb2Rpbmc9Im11bHRpcGFydC9mb3JtLWRhdGEiO2lmKEIpe0QuYWN0aW9uPUJ9dmFyIEwsSjtpZihBKXtMPVtdO0E9RXh0LnVybERlY29kZShBLGZhbHNlKTtmb3IodmFyIEggaW4gQSl7aWYoQS5oYXNPd25Qcm9wZXJ0eShIKSl7Sj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO0oudHlwZT0iaGlkZGVuIjtKLm5hbWU9SDtKLnZhbHVlPUFbSF07RC5hcHBlbmRDaGlsZChKKTtMLnB1c2goSil9fX1mdW5jdGlvbiBHKCl7dmFyIE09e3Jlc3BvbnNlVGV4dDoiIixyZXNwb25zZVhNTDpudWxsfTtNLmFyZ3VtZW50PUU/RS5hcmd1bWVudDpudWxsO3RyeXt2YXIgTztpZihFeHQuaXNJRSl7Tz1GLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnR9ZWxzZXtPPShGLmNvbnRlbnREb2N1bWVudHx8d2luZG93LmZyYW1lc1tDXS5kb2N1bWVudCl9aWYoTyYmTy5ib2R5KXtNLnJlc3BvbnNlVGV4dD1PLmJvZHkuaW5uZXJIVE1MfWlmKE8mJk8uWE1MRG9jdW1lbnQpe00ucmVzcG9uc2VYTUw9Ty5YTUxEb2N1bWVudH1lbHNle00ucmVzcG9uc2VYTUw9T319Y2F0Y2goTil7fUV4dC5FdmVudE1hbmFnZXIucmVtb3ZlTGlzdGVuZXIoRiwibG9hZCIsRyx0aGlzKTt0aGlzLmZpcmVFdmVudCgicmVxdWVzdGNvbXBsZXRlIix0aGlzLE0sRSk7RXh0LmNhbGxiYWNrKEUuc3VjY2VzcyxFLnNjb3BlLFtNLEVdKTtFeHQuY2FsbGJhY2soRS5jYWxsYmFjayxFLnNjb3BlLFtFLHRydWUsTV0pO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtFeHQucmVtb3ZlTm9kZShGKX0sMTAwKX1FeHQuRXZlbnRNYW5hZ2VyLm9uKEYsImxvYWQiLEcsdGhpcyk7RC5zdWJtaXQoKTtpZihMKXtmb3IodmFyIEk9MCxLPUwubGVuZ3RoO0k8SztJKyspe0V4dC5yZW1vdmVOb2RlKExbSV0pfX19fSk7RXh0LkFqYXg9bmV3IEV4dC5kYXRhLkNvbm5lY3Rpb24oe2F1dG9BYm9ydDpmYWxzZSxzZXJpYWxpemVGb3JtOmZ1bmN0aW9uKEEpe3JldHVybiBFeHQubGliLkFqYXguc2VyaWFsaXplRm9ybShBKX19KTsNCkV4dC5VcGRhdGVyPWZ1bmN0aW9uKEIsQSl7Qj1FeHQuZ2V0KEIpO2lmKCFBJiZCLnVwZGF0ZU1hbmFnZXIpe3JldHVybiBCLnVwZGF0ZU1hbmFnZXJ9dGhpcy5lbD1CO3RoaXMuZGVmYXVsdFVybD1udWxsO3RoaXMuYWRkRXZlbnRzKCJiZWZvcmV1cGRhdGUiLCJ1cGRhdGUiLCJmYWlsdXJlIik7dmFyIEM9RXh0LlVwZGF0ZXIuZGVmYXVsdHM7dGhpcy5zc2xCbGFua1VybD1DLnNzbEJsYW5rVXJsO3RoaXMuZGlzYWJsZUNhY2hpbmc9Qy5kaXNhYmxlQ2FjaGluZzt0aGlzLmluZGljYXRvclRleHQ9Qy5pbmRpY2F0b3JUZXh0O3RoaXMuc2hvd0xvYWRJbmRpY2F0b3I9Qy5zaG93TG9hZEluZGljYXRvcjt0aGlzLnRpbWVvdXQ9Qy50aW1lb3V0O3RoaXMubG9hZFNjcmlwdHM9Qy5sb2FkU2NyaXB0czt0aGlzLnRyYW5zYWN0aW9uPW51bGw7dGhpcy5hdXRvUmVmcmVzaFByb2NJZD1udWxsO3RoaXMucmVmcmVzaERlbGVnYXRlPXRoaXMucmVmcmVzaC5jcmVhdGVEZWxlZ2F0ZSh0aGlzKTt0aGlzLnVwZGF0ZURlbGVnYXRlPXRoaXMudXBkYXRlLmNyZWF0ZURlbGVnYXRlKHRoaXMpO3RoaXMuZm9ybVVwZGF0ZURlbGVnYXRlPXRoaXMuZm9ybVVwZGF0ZS5jcmVhdGVEZWxlZ2F0ZSh0aGlzKTtpZighdGhpcy5yZW5kZXJlcil7dGhpcy5yZW5kZXJlcj1uZXcgRXh0LlVwZGF0ZXIuQmFzaWNSZW5kZXJlcigpfUV4dC5VcGRhdGVyLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKX07RXh0LmV4dGVuZChFeHQuVXBkYXRlcixFeHQudXRpbC5PYnNlcnZhYmxlLHtnZXRFbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsfSx1cGRhdGU6ZnVuY3Rpb24oQixGLEgsRCl7aWYodGhpcy5maXJlRXZlbnQoImJlZm9yZXVwZGF0ZSIsdGhpcy5lbCxCLEYpIT09ZmFsc2Upe3ZhciBHPXRoaXMubWV0aG9kLEEsQztpZih0eXBlb2YgQj09Im9iamVjdCIpe0E9QjtCPUEudXJsO0Y9Rnx8QS5wYXJhbXM7SD1IfHxBLmNhbGxiYWNrO0Q9RHx8QS5kaXNjYXJkVXJsO0M9QS5zY29wZTtpZih0eXBlb2YgQS5tZXRob2QhPSJ1bmRlZmluZWQiKXtHPUEubWV0aG9kfWlmKHR5cGVvZiBBLm5vY2FjaGUhPSJ1bmRlZmluZWQiKXt0aGlzLmRpc2FibGVDYWNoaW5nPUEubm9jYWNoZX1pZih0eXBlb2YgQS50ZXh0IT0idW5kZWZpbmVkIil7dGhpcy5pbmRpY2F0b3JUZXh0PSI8ZGl2IGNsYXNzPVwibG9hZGluZy1pbmRpY2F0b3JcIj4iK0EudGV4dCsiPC9kaXY+In1pZih0eXBlb2YgQS5zY3JpcHRzIT0idW5kZWZpbmVkIil7dGhpcy5sb2FkU2NyaXB0cz1BLnNjcmlwdHN9aWYodHlwZW9mIEEudGltZW91dCE9InVuZGVmaW5lZCIpe3RoaXMudGltZW91dD1BLnRpbWVvdXR9fXRoaXMuc2hvd0xvYWRpbmcoKTtpZighRCl7dGhpcy5kZWZhdWx0VXJsPUJ9aWYodHlwZW9mIEI9PSJmdW5jdGlvbiIpe0I9Qi5jYWxsKHRoaXMpfUc9R3x8KEY/IlBPU1QiOiJHRVQiKTtpZihHPT0iR0VUIil7Qj10aGlzLnByZXBhcmVVcmwoQil9dmFyIEU9RXh0LmFwcGx5KEF8fHt9LHt1cmw6QixwYXJhbXM6KHR5cGVvZiBGPT0iZnVuY3Rpb24iJiZDKT9GLmNyZWF0ZURlbGVnYXRlKEMpOkYsc3VjY2Vzczp0aGlzLnByb2Nlc3NTdWNjZXNzLGZhaWx1cmU6dGhpcy5wcm9jZXNzRmFpbHVyZSxzY29wZTp0aGlzLGNhbGxiYWNrOnVuZGVmaW5lZCx0aW1lb3V0Oih0aGlzLnRpbWVvdXQqMTAwMCksYXJndW1lbnQ6eyJvcHRpb25zIjpBLCJ1cmwiOkIsImZvcm0iOm51bGwsImNhbGxiYWNrIjpILCJzY29wZSI6Q3x8d2luZG93LCJwYXJhbXMiOkZ9fSk7dGhpcy50cmFuc2FjdGlvbj1FeHQuQWpheC5yZXF1ZXN0KEUpfX0sZm9ybVVwZGF0ZTpmdW5jdGlvbihDLEEsQixEKXtpZih0aGlzLmZpcmVFdmVudCgiYmVmb3JldXBkYXRlIix0aGlzLmVsLEMsQSkhPT1mYWxzZSl7aWYodHlwZW9mIEE9PSJmdW5jdGlvbiIpe0E9QS5jYWxsKHRoaXMpfUM9RXh0LmdldERvbShDKTt0aGlzLnRyYW5zYWN0aW9uPUV4dC5BamF4LnJlcXVlc3Qoe2Zvcm06Qyx1cmw6QSxzdWNjZXNzOnRoaXMucHJvY2Vzc1N1Y2Nlc3MsZmFpbHVyZTp0aGlzLnByb2Nlc3NGYWlsdXJlLHNjb3BlOnRoaXMsdGltZW91dDoodGhpcy50aW1lb3V0KjEwMDApLGFyZ3VtZW50OnsidXJsIjpBLCJmb3JtIjpDLCJjYWxsYmFjayI6RCwicmVzZXQiOkJ9fSk7dGhpcy5zaG93TG9hZGluZy5kZWZlcigxLHRoaXMpfX0scmVmcmVzaDpmdW5jdGlvbihBKXtpZih0aGlzLmRlZmF1bHRVcmw9PW51bGwpe3JldHVybiB9dGhpcy51cGRhdGUodGhpcy5kZWZhdWx0VXJsLG51bGwsQSx0cnVlKX0sc3RhcnRBdXRvUmVmcmVzaDpmdW5jdGlvbihCLEMsRCxFLEEpe2lmKEEpe3RoaXMudXBkYXRlKEN8fHRoaXMuZGVmYXVsdFVybCxELEUsdHJ1ZSl9aWYodGhpcy5hdXRvUmVmcmVzaFByb2NJZCl7Y2xlYXJJbnRlcnZhbCh0aGlzLmF1dG9SZWZyZXNoUHJvY0lkKX10aGlzLmF1dG9SZWZyZXNoUHJvY0lkPXNldEludGVydmFsKHRoaXMudXBkYXRlLmNyZWF0ZURlbGVnYXRlKHRoaXMsW0N8fHRoaXMuZGVmYXVsdFVybCxELEUsdHJ1ZV0pLEIqMTAwMCl9LHN0b3BBdXRvUmVmcmVzaDpmdW5jdGlvbigpe2lmKHRoaXMuYXV0b1JlZnJlc2hQcm9jSWQpe2NsZWFySW50ZXJ2YWwodGhpcy5hdXRvUmVmcmVzaFByb2NJZCk7ZGVsZXRlIHRoaXMuYXV0b1JlZnJlc2hQcm9jSWR9fSxpc0F1dG9SZWZyZXNoaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXV0b1JlZnJlc2hQcm9jSWQ/dHJ1ZTpmYWxzZX0sc2hvd0xvYWRpbmc6ZnVuY3Rpb24oKXtpZih0aGlzLnNob3dMb2FkSW5kaWNhdG9yKXt0aGlzLmVsLnVwZGF0ZSh0aGlzLmluZGljYXRvclRleHQpfX0scHJlcGFyZVVybDpmdW5jdGlvbihCKXtpZih0aGlzLmRpc2FibGVDYWNoaW5nKXt2YXIgQT0iX2RjPSIrKG5ldyBEYXRlKCkuZ2V0VGltZSgpKTtpZihCLmluZGV4T2YoIj8iKSE9PS0xKXtCKz0iJiIrQX1lbHNle0IrPSI/IitBfX1yZXR1cm4gQn0scHJvY2Vzc1N1Y2Nlc3M6ZnVuY3Rpb24oQSl7dGhpcy50cmFuc2FjdGlvbj1udWxsO2lmKEEuYXJndW1lbnQuZm9ybSYmQS5hcmd1bWVudC5yZXNldCl7dHJ5e0EuYXJndW1lbnQuZm9ybS5yZXNldCgpfWNhdGNoKEIpe319aWYodGhpcy5sb2FkU2NyaXB0cyl7dGhpcy5yZW5kZXJlci5yZW5kZXIodGhpcy5lbCxBLHRoaXMsdGhpcy51cGRhdGVDb21wbGV0ZS5jcmVhdGVEZWxlZ2F0ZSh0aGlzLFtBXSkpfWVsc2V7dGhpcy5yZW5kZXJlci5yZW5kZXIodGhpcy5lbCxBLHRoaXMpO3RoaXMudXBkYXRlQ29tcGxldGUoQSl9fSx1cGRhdGVDb21wbGV0ZTpmdW5jdGlvbihBKXt0aGlzLmZpcmVFdmVudCgidXBkYXRlIix0aGlzLmVsLEEpO2lmKHR5cGVvZiBBLmFyZ3VtZW50LmNhbGxiYWNrPT0iZnVuY3Rpb24iKXtBLmFyZ3VtZW50LmNhbGxiYWNrLmNhbGwoQS5hcmd1bWVudC5zY29wZSx0aGlzLmVsLHRydWUsQSxBLmFyZ3VtZW50Lm9wdGlvbnMpfX0scHJvY2Vzc0ZhaWx1cmU6ZnVuY3Rpb24oQSl7dGhpcy50cmFuc2FjdGlvbj1udWxsO3RoaXMuZmlyZUV2ZW50KCJmYWlsdXJlIix0aGlzLmVsLEEpO2lmKHR5cGVvZiBBLmFyZ3VtZW50LmNhbGxiYWNrPT0iZnVuY3Rpb24iKXtBLmFyZ3VtZW50LmNhbGxiYWNrLmNhbGwoQS5hcmd1bWVudC5zY29wZSx0aGlzLmVsLGZhbHNlLEEsQS5hcmd1bWVudC5vcHRpb25zKX19LHNldFJlbmRlcmVyOmZ1bmN0aW9uKEEpe3RoaXMucmVuZGVyZXI9QX0sZ2V0UmVuZGVyZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZW5kZXJlcn0sc2V0RGVmYXVsdFVybDpmdW5jdGlvbihBKXt0aGlzLmRlZmF1bHRVcmw9QX0sYWJvcnQ6ZnVuY3Rpb24oKXtpZih0aGlzLnRyYW5zYWN0aW9uKXtFeHQuQWpheC5hYm9ydCh0aGlzLnRyYW5zYWN0aW9uKX19LGlzVXBkYXRpbmc6ZnVuY3Rpb24oKXtpZih0aGlzLnRyYW5zYWN0aW9uKXtyZXR1cm4gRXh0LkFqYXguaXNMb2FkaW5nKHRoaXMudHJhbnNhY3Rpb24pfXJldHVybiBmYWxzZX19KTtFeHQuVXBkYXRlci5kZWZhdWx0cz17dGltZW91dDozMCxsb2FkU2NyaXB0czpmYWxzZSxzc2xCbGFua1VybDooRXh0LlNTTF9TRUNVUkVfVVJMfHwiamF2YXNjcmlwdDpmYWxzZSIpLGRpc2FibGVDYWNoaW5nOmZhbHNlLHNob3dMb2FkSW5kaWNhdG9yOnRydWUsaW5kaWNhdG9yVGV4dDoiPGRpdiBjbGFzcz1cImxvYWRpbmctaW5kaWNhdG9yXCI+TG9hZGluZy4uLjwvZGl2PiJ9O0V4dC5VcGRhdGVyLnVwZGF0ZUVsZW1lbnQ9ZnVuY3Rpb24oRCxDLEUsQil7dmFyIEE9RXh0LmdldChEKS5nZXRVcGRhdGVyKCk7RXh0LmFwcGx5KEEsQik7QS51cGRhdGUoQyxFLEI/Qi5jYWxsYmFjazpudWxsKX07RXh0LlVwZGF0ZXIudXBkYXRlPUV4dC5VcGRhdGVyLnVwZGF0ZUVsZW1lbnQ7RXh0LlVwZGF0ZXIuQmFzaWNSZW5kZXJlcj1mdW5jdGlvbigpe307RXh0LlVwZGF0ZXIuQmFzaWNSZW5kZXJlci5wcm90b3R5cGU9e3JlbmRlcjpmdW5jdGlvbihDLEEsQixEKXtDLnVwZGF0ZShBLnJlc3BvbnNlVGV4dCxCLmxvYWRTY3JpcHRzLEQpfX07RXh0LlVwZGF0ZU1hbmFnZXI9RXh0LlVwZGF0ZXI7DQpEYXRlLnBhcnNlRnVuY3Rpb25zPXtjb3VudDowfTtEYXRlLnBhcnNlUmVnZXhlcz1bXTtEYXRlLmZvcm1hdEZ1bmN0aW9ucz17Y291bnQ6MH07RGF0ZS5wcm90b3R5cGUuZGF0ZUZvcm1hdD1mdW5jdGlvbihCKXtpZihEYXRlLmZvcm1hdEZ1bmN0aW9uc1tCXT09bnVsbCl7RGF0ZS5jcmVhdGVOZXdGb3JtYXQoQil9dmFyIEE9RGF0ZS5mb3JtYXRGdW5jdGlvbnNbQl07cmV0dXJuIHRoaXNbQV0oKX07RGF0ZS5wcm90b3R5cGUuZm9ybWF0PURhdGUucHJvdG90eXBlLmRhdGVGb3JtYXQ7RGF0ZS5jcmVhdGVOZXdGb3JtYXQ9ZnVuY3Rpb24oZm9ybWF0KXt2YXIgZnVuY05hbWU9ImZvcm1hdCIrRGF0ZS5mb3JtYXRGdW5jdGlvbnMuY291bnQrKztEYXRlLmZvcm1hdEZ1bmN0aW9uc1tmb3JtYXRdPWZ1bmNOYW1lO3ZhciBjb2RlPSJEYXRlLnByb3RvdHlwZS4iK2Z1bmNOYW1lKyIgPSBmdW5jdGlvbigpe3JldHVybiAiO3ZhciBzcGVjaWFsPWZhbHNlO3ZhciBjaD0iIjtmb3IodmFyIGk9MDtpPGZvcm1hdC5sZW5ndGg7KytpKXtjaD1mb3JtYXQuY2hhckF0KGkpO2lmKCFzcGVjaWFsJiZjaD09IlxcIil7c3BlY2lhbD10cnVlfWVsc2V7aWYoc3BlY2lhbCl7c3BlY2lhbD1mYWxzZTtjb2RlKz0iJyIrU3RyaW5nLmVzY2FwZShjaCkrIicgKyAifWVsc2V7Y29kZSs9RGF0ZS5nZXRGb3JtYXRDb2RlKGNoKX19fWV2YWwoY29kZS5zdWJzdHJpbmcoMCxjb2RlLmxlbmd0aC0zKSsiO30iKX07RGF0ZS5nZXRGb3JtYXRDb2RlPWZ1bmN0aW9uKEQpe3N3aXRjaChEKXtjYXNlImQiOnJldHVybiJTdHJpbmcubGVmdFBhZCh0aGlzLmdldERhdGUoKSwgMiwgJzAnKSArICI7Y2FzZSJEIjpyZXR1cm4iRGF0ZS5nZXRTaG9ydERheU5hbWUodGhpcy5nZXREYXkoKSkgKyAiO2Nhc2UiaiI6cmV0dXJuInRoaXMuZ2V0RGF0ZSgpICsgIjtjYXNlImwiOnJldHVybiJEYXRlLmRheU5hbWVzW3RoaXMuZ2V0RGF5KCldICsgIjtjYXNlIk4iOnJldHVybiIodGhpcy5nZXREYXkoKSA/IHRoaXMuZ2V0RGF5KCkgOiA3KSArICI7Y2FzZSJTIjpyZXR1cm4idGhpcy5nZXRTdWZmaXgoKSArICI7Y2FzZSJ3IjpyZXR1cm4idGhpcy5nZXREYXkoKSArICI7Y2FzZSJ6IjpyZXR1cm4idGhpcy5nZXREYXlPZlllYXIoKSArICI7Y2FzZSJXIjpyZXR1cm4iU3RyaW5nLmxlZnRQYWQodGhpcy5nZXRXZWVrT2ZZZWFyKCksIDIsICcwJykgKyAiO2Nhc2UiRiI6cmV0dXJuIkRhdGUubW9udGhOYW1lc1t0aGlzLmdldE1vbnRoKCldICsgIjtjYXNlIm0iOnJldHVybiJTdHJpbmcubGVmdFBhZCh0aGlzLmdldE1vbnRoKCkgKyAxLCAyLCAnMCcpICsgIjtjYXNlIk0iOnJldHVybiJEYXRlLmdldFNob3J0TW9udGhOYW1lKHRoaXMuZ2V0TW9udGgoKSkgKyAiO2Nhc2UibiI6cmV0dXJuIih0aGlzLmdldE1vbnRoKCkgKyAxKSArICI7Y2FzZSJ0IjpyZXR1cm4idGhpcy5nZXREYXlzSW5Nb250aCgpICsgIjtjYXNlIkwiOnJldHVybiIodGhpcy5pc0xlYXBZZWFyKCkgPyAxIDogMCkgKyAiO2Nhc2UibyI6cmV0dXJuIih0aGlzLmdldEZ1bGxZZWFyKCkgKyAodGhpcy5nZXRXZWVrT2ZZZWFyKCkgPT0gMSAmJiB0aGlzLmdldE1vbnRoKCkgPiAwID8gKzEgOiAodGhpcy5nZXRXZWVrT2ZZZWFyKCkgPj0gNTIgJiYgdGhpcy5nZXRNb250aCgpIDwgMTEgPyAtMSA6IDApKSkgKyAiO2Nhc2UiWSI6cmV0dXJuInRoaXMuZ2V0RnVsbFllYXIoKSArICI7Y2FzZSJ5IjpyZXR1cm4iKCcnICsgdGhpcy5nZXRGdWxsWWVhcigpKS5zdWJzdHJpbmcoMiwgNCkgKyAiO2Nhc2UiYSI6cmV0dXJuIih0aGlzLmdldEhvdXJzKCkgPCAxMiA/ICdhbScgOiAncG0nKSArICI7Y2FzZSJBIjpyZXR1cm4iKHRoaXMuZ2V0SG91cnMoKSA8IDEyID8gJ0FNJyA6ICdQTScpICsgIjtjYXNlImciOnJldHVybiIoKHRoaXMuZ2V0SG91cnMoKSAlIDEyKSA/IHRoaXMuZ2V0SG91cnMoKSAlIDEyIDogMTIpICsgIjtjYXNlIkciOnJldHVybiJ0aGlzLmdldEhvdXJzKCkgKyAiO2Nhc2UiaCI6cmV0dXJuIlN0cmluZy5sZWZ0UGFkKCh0aGlzLmdldEhvdXJzKCkgJSAxMikgPyB0aGlzLmdldEhvdXJzKCkgJSAxMiA6IDEyLCAyLCAnMCcpICsgIjtjYXNlIkgiOnJldHVybiJTdHJpbmcubGVmdFBhZCh0aGlzLmdldEhvdXJzKCksIDIsICcwJykgKyAiO2Nhc2UiaSI6cmV0dXJuIlN0cmluZy5sZWZ0UGFkKHRoaXMuZ2V0TWludXRlcygpLCAyLCAnMCcpICsgIjtjYXNlInMiOnJldHVybiJTdHJpbmcubGVmdFBhZCh0aGlzLmdldFNlY29uZHMoKSwgMiwgJzAnKSArICI7Y2FzZSJ1IjpyZXR1cm4iU3RyaW5nLmxlZnRQYWQodGhpcy5nZXRNaWxsaXNlY29uZHMoKSwgMywgJzAnKSArICI7Y2FzZSJPIjpyZXR1cm4idGhpcy5nZXRHTVRPZmZzZXQoKSArICI7Y2FzZSJQIjpyZXR1cm4idGhpcy5nZXRHTVRPZmZzZXQodHJ1ZSkgKyAiO2Nhc2UiVCI6cmV0dXJuInRoaXMuZ2V0VGltZXpvbmUoKSArICI7Y2FzZSJaIjpyZXR1cm4iKHRoaXMuZ2V0VGltZXpvbmVPZmZzZXQoKSAqIC02MCkgKyAiO2Nhc2UiYyI6Zm9yKHZhciBGPURhdGUuZ2V0Rm9ybWF0Q29kZSxHPSJZLW0tZFRIOmk6c1AiLEM9IiIsQj0wLEE9Ry5sZW5ndGg7QjxBOysrQil7dmFyIEU9Ry5jaGFyQXQoQik7Qys9RT09IlQiPyInVCcgKyAiOkYoRSl9cmV0dXJuIEM7Y2FzZSJVIjpyZXR1cm4iTWF0aC5yb3VuZCh0aGlzLmdldFRpbWUoKSAvIDEwMDApICsgIjtkZWZhdWx0OnJldHVybiInIitTdHJpbmcuZXNjYXBlKEQpKyInICsgIn19O0RhdGUucGFyc2VEYXRlPWZ1bmN0aW9uKEEsQyl7aWYoRGF0ZS5wYXJzZUZ1bmN0aW9uc1tDXT09bnVsbCl7RGF0ZS5jcmVhdGVQYXJzZXIoQyl9dmFyIEI9RGF0ZS5wYXJzZUZ1bmN0aW9uc1tDXTtyZXR1cm4gRGF0ZVtCXShBKX07RGF0ZS5jcmVhdGVQYXJzZXI9ZnVuY3Rpb24oZm9ybWF0KXt2YXIgZnVuY05hbWU9InBhcnNlIitEYXRlLnBhcnNlRnVuY3Rpb25zLmNvdW50Kys7dmFyIHJlZ2V4TnVtPURhdGUucGFyc2VSZWdleGVzLmxlbmd0aDt2YXIgY3VycmVudEdyb3VwPTE7RGF0ZS5wYXJzZUZ1bmN0aW9uc1tmb3JtYXRdPWZ1bmNOYW1lO3ZhciBjb2RlPSJEYXRlLiIrZnVuY05hbWUrIiA9IGZ1bmN0aW9uKGlucHV0KXtcbiIrInZhciB5ID0gLTEsIG0gPSAtMSwgZCA9IC0xLCBoID0gLTEsIGkgPSAtMSwgcyA9IC0xLCBtcyA9IC0xLCBvLCB6LCB1LCB2O1xuIisiaW5wdXQgPSBTdHJpbmcoaW5wdXQpO3ZhciBkID0gbmV3IERhdGUoKTtcbiIrInkgPSBkLmdldEZ1bGxZZWFyKCk7XG4iKyJtID0gZC5nZXRNb250aCgpO1xuIisiZCA9IGQuZ2V0RGF0ZSgpO1xuIisidmFyIHJlc3VsdHMgPSBpbnB1dC5tYXRjaChEYXRlLnBhcnNlUmVnZXhlc1siK3JlZ2V4TnVtKyJdKTtcbiIrImlmIChyZXN1bHRzICYmIHJlc3VsdHMubGVuZ3RoID4gMCkgeyI7dmFyIHJlZ2V4PSIiO3ZhciBzcGVjaWFsPWZhbHNlO3ZhciBjaD0iIjtmb3IodmFyIGk9MDtpPGZvcm1hdC5sZW5ndGg7KytpKXtjaD1mb3JtYXQuY2hhckF0KGkpO2lmKCFzcGVjaWFsJiZjaD09IlxcIil7c3BlY2lhbD10cnVlfWVsc2V7aWYoc3BlY2lhbCl7c3BlY2lhbD1mYWxzZTtyZWdleCs9U3RyaW5nLmVzY2FwZShjaCl9ZWxzZXt2YXIgb2JqPURhdGUuZm9ybWF0Q29kZVRvUmVnZXgoY2gsY3VycmVudEdyb3VwKTtjdXJyZW50R3JvdXArPW9iai5nO3JlZ2V4Kz1vYmoucztpZihvYmouZyYmb2JqLmMpe2NvZGUrPW9iai5jfX19fWNvZGUrPSJpZiAodSlcbiIrInt2ID0gbmV3IERhdGUodSAqIDEwMDApO30iKyJlbHNlIGlmICh5ID49IDAgJiYgbSA+PSAwICYmIGQgPiAwICYmIGggPj0gMCAmJiBpID49IDAgJiYgcyA+PSAwICYmIG1zID49IDApXG4iKyJ7diA9IG5ldyBEYXRlKHksIG0sIGQsIGgsIGksIHMsIG1zKTt9XG4iKyJlbHNlIGlmICh5ID49IDAgJiYgbSA+PSAwICYmIGQgPiAwICYmIGggPj0gMCAmJiBpID49IDAgJiYgcyA+PSAwKVxuIisie3YgPSBuZXcgRGF0ZSh5LCBtLCBkLCBoLCBpLCBzKTt9XG4iKyJlbHNlIGlmICh5ID49IDAgJiYgbSA+PSAwICYmIGQgPiAwICYmIGggPj0gMCAmJiBpID49IDApXG4iKyJ7diA9IG5ldyBEYXRlKHksIG0sIGQsIGgsIGkpO31cbiIrImVsc2UgaWYgKHkgPj0gMCAmJiBtID49IDAgJiYgZCA+IDAgJiYgaCA+PSAwKVxuIisie3YgPSBuZXcgRGF0ZSh5LCBtLCBkLCBoKTt9XG4iKyJlbHNlIGlmICh5ID49IDAgJiYgbSA+PSAwICYmIGQgPiAwKVxuIisie3YgPSBuZXcgRGF0ZSh5LCBtLCBkKTt9XG4iKyJlbHNlIGlmICh5ID49IDAgJiYgbSA+PSAwKVxuIisie3YgPSBuZXcgRGF0ZSh5LCBtKTt9XG4iKyJlbHNlIGlmICh5ID49IDApXG4iKyJ7diA9IG5ldyBEYXRlKHkpO31cbiIrIn1yZXR1cm4gKHYgJiYgKHogfHwgbykpP1xuIisiICAgICh6ID8gdi5hZGQoRGF0ZS5TRUNPTkQsICh2LmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2MCkgKyAoeioxKSkgOlxuIisiICAgICAgICB2LmFkZChEYXRlLkhPVVIsICh2LmdldEdNVE9mZnNldCgpIC8gMTAwKSArIChvIC8gLTEwMCkpKSA6IHZcbiIrIjt9IjtEYXRlLnBhcnNlUmVnZXhlc1tyZWdleE51bV09bmV3IFJlZ0V4cCgiXiIrcmVnZXgrIiQiLCJpIik7ZXZhbChjb2RlKX07RGF0ZS5mb3JtYXRDb2RlVG9SZWdleD1mdW5jdGlvbihHLEYpe3N3aXRjaChHKXtjYXNlImQiOnJldHVybntnOjEsYzoiZCA9IHBhcnNlSW50KHJlc3VsdHNbIitGKyJdLCAxMCk7XG4iLHM6IihcXGR7Mn0pIn07Y2FzZSJEIjpmb3IodmFyIEM9W10sRT0wO0U8NztDLnB1c2goRGF0ZS5nZXRTaG9ydERheU5hbWUoRSkpLCsrRSl7fXJldHVybntnOjAsYzpudWxsLHM6Iig/OiIrQy5qb2luKCJ8IikrIikifTtjYXNlImoiOnJldHVybntnOjEsYzoiZCA9IHBhcnNlSW50KHJlc3VsdHNbIitGKyJdLCAxMCk7XG4iLHM6IihcXGR7MSwyfSkifTtjYXNlImwiOnJldHVybntnOjAsYzpudWxsLHM6Iig/OiIrRGF0ZS5kYXlOYW1lcy5qb2luKCJ8IikrIikifTtjYXNlIk4iOnJldHVybntnOjAsYzpudWxsLHM6IlsxLTddIn07Y2FzZSJTIjpyZXR1cm57ZzowLGM6bnVsbCxzOiIoPzpzdHxuZHxyZHx0aCkifTtjYXNlInciOnJldHVybntnOjAsYzpudWxsLHM6IlswLTZdIn07Y2FzZSJ6IjpyZXR1cm57ZzowLGM6bnVsbCxzOiIoPzpcXGR7MSwzfSJ9O2Nhc2UiVyI6cmV0dXJue2c6MCxjOm51bGwsczoiKD86XFxkezJ9KSJ9O2Nhc2UiRiI6cmV0dXJue2c6MSxjOiJtID0gcGFyc2VJbnQoRGF0ZS5nZXRNb250aE51bWJlcihyZXN1bHRzWyIrRisiXSksIDEwKTtcbiIsczoiKCIrRGF0ZS5tb250aE5hbWVzLmpvaW4oInwiKSsiKSJ9O2Nhc2UibSI6cmV0dXJue2c6MSxjOiJtID0gcGFyc2VJbnQocmVzdWx0c1siK0YrIl0sIDEwKSAtIDE7XG4iLHM6IihcXGR7Mn0pIn07Y2FzZSJNIjpmb3IodmFyIEM9W10sRT0wO0U8MTI7Qy5wdXNoKERhdGUuZ2V0U2hvcnRNb250aE5hbWUoRSkpLCsrRSl7fXJldHVybntnOjEsYzoibSA9IHBhcnNlSW50KERhdGUuZ2V0TW9udGhOdW1iZXIocmVzdWx0c1siK0YrIl0pLCAxMCk7XG4iLHM6IigiK0Muam9pbigifCIpKyIpIn07Y2FzZSJuIjpyZXR1cm57ZzoxLGM6Im0gPSBwYXJzZUludChyZXN1bHRzWyIrRisiXSwgMTApIC0gMTtcbiIsczoiKFxcZHsxLDJ9KSJ9O2Nhc2UidCI6cmV0dXJue2c6MCxjOm51bGwsczoiKD86XFxkezJ9KSJ9O2Nhc2UiTCI6cmV0dXJue2c6MCxjOm51bGwsczoiKD86MXwwKSJ9O2Nhc2UibyI6Y2FzZSJZIjpyZXR1cm57ZzoxLGM6InkgPSBwYXJzZUludChyZXN1bHRzWyIrRisiXSwgMTApO1xuIixzOiIoXFxkezR9KSJ9O2Nhc2UieSI6cmV0dXJue2c6MSxjOiJ2YXIgdHkgPSBwYXJzZUludChyZXN1bHRzWyIrRisiXSwgMTApO1xuIisieSA9IHR5ID4gRGF0ZS55MmtZZWFyID8gMTkwMCArIHR5IDogMjAwMCArIHR5O1xuIixzOiIoXFxkezEsMn0pIn07Y2FzZSJhIjpyZXR1cm57ZzoxLGM6ImlmIChyZXN1bHRzWyIrRisiXSA9PSAnYW0nKSB7XG4iKyJpZiAoaCA9PSAxMikgeyBoID0gMDsgfVxuIisifSBlbHNlIHsgaWYgKGggPCAxMikgeyBoICs9IDEyOyB9fSIsczoiKGFtfHBtKSJ9O2Nhc2UiQSI6cmV0dXJue2c6MSxjOiJpZiAocmVzdWx0c1siK0YrIl0gPT0gJ0FNJykge1xuIisiaWYgKGggPT0gMTIpIHsgaCA9IDA7IH1cbiIrIn0gZWxzZSB7IGlmIChoIDwgMTIpIHsgaCArPSAxMjsgfX0iLHM6IihBTXxQTSkifTtjYXNlImciOmNhc2UiRyI6cmV0dXJue2c6MSxjOiJoID0gcGFyc2VJbnQocmVzdWx0c1siK0YrIl0sIDEwKTtcbiIsczoiKFxcZHsxLDJ9KSJ9O2Nhc2UiaCI6Y2FzZSJIIjpyZXR1cm57ZzoxLGM6ImggPSBwYXJzZUludChyZXN1bHRzWyIrRisiXSwgMTApO1xuIixzOiIoXFxkezJ9KSJ9O2Nhc2UiaSI6cmV0dXJue2c6MSxjOiJpID0gcGFyc2VJbnQocmVzdWx0c1siK0YrIl0sIDEwKTtcbiIsczoiKFxcZHsyfSkifTtjYXNlInMiOnJldHVybntnOjEsYzoicyA9IHBhcnNlSW50KHJlc3VsdHNbIitGKyJdLCAxMCk7XG4iLHM6IihcXGR7Mn0pIn07Y2FzZSJ1IjpyZXR1cm57ZzoxLGM6Im1zID0gcGFyc2VJbnQocmVzdWx0c1siK0YrIl0sIDEwKTtcbiIsczoiKFxcZHszfSkifTtjYXNlIk8iOnJldHVybntnOjEsYzpbIm8gPSByZXN1bHRzWyIsRiwiXTtcbiIsInZhciBzbiA9IG8uc3Vic3RyaW5nKDAsMSk7XG4iLCJ2YXIgaHIgPSBvLnN1YnN0cmluZygxLDMpKjEgKyBNYXRoLmZsb29yKG8uc3Vic3RyaW5nKDMsNSkgLyA2MCk7XG4iLCJ2YXIgbW4gPSBvLnN1YnN0cmluZygzLDUpICUgNjA7XG4iLCJvID0gKCgtMTIgPD0gKGhyKjYwICsgbW4pLzYwKSAmJiAoKGhyKjYwICsgbW4pLzYwIDw9IDE0KSk/XG4iLCIgICAgKHNuICsgU3RyaW5nLmxlZnRQYWQoaHIsIDIsICcwJykgKyBTdHJpbmcubGVmdFBhZChtbiwgMiwgJzAnKSkgOiBudWxsO1xuIl0uam9pbigiIiksczoiKFsrLV1cXGR7NH0pIn07Y2FzZSJQIjpyZXR1cm57ZzoxLGM6WyJvID0gcmVzdWx0c1siLEYsIl07XG4iLCJ2YXIgc24gPSBvLnN1YnN0cmluZygwLDEpO1xuIiwidmFyIGhyID0gby5zdWJzdHJpbmcoMSwzKSoxICsgTWF0aC5mbG9vcihvLnN1YnN0cmluZyg0LDYpIC8gNjApO1xuIiwidmFyIG1uID0gby5zdWJzdHJpbmcoNCw2KSAlIDYwO1xuIiwibyA9ICgoLTEyIDw9IChocio2MCArIG1uKS82MCkgJiYgKChocio2MCArIG1uKS82MCA8PSAxNCkpP1xuIiwiICAgIChzbiArIFN0cmluZy5sZWZ0UGFkKGhyLCAyLCAnMCcpICsgU3RyaW5nLmxlZnRQYWQobW4sIDIsICcwJykpIDogbnVsbDtcbiJdLmpvaW4oIiIpLHM6IihbKy1dXFxkezJ9OlxcZHsyfSkifTtjYXNlIlQiOnJldHVybntnOjAsYzpudWxsLHM6IltBLVpdezEsNH0ifTtjYXNlIloiOnJldHVybntnOjEsYzoieiA9IHJlc3VsdHNbIitGKyJdICogMTtcbiIrInogPSAoLTQzMjAwIDw9IHogJiYgeiA8PSA1MDQwMCk/IHogOiBudWxsO1xuIixzOiIoWystXT9cXGR7MSw1fSkifTtjYXNlImMiOnZhciBIPURhdGUuZm9ybWF0Q29kZVRvUmVnZXgsRD1bXTt2YXIgQT1bSCgiWSIsMSksSCgibSIsMiksSCgiZCIsMyksSCgiaCIsNCksSCgiaSIsNSksSCgicyIsNiksSCgiUCIsNyldO2Zvcih2YXIgRT0wLEI9QS5sZW5ndGg7RTxCOysrRSl7RC5wdXNoKEFbRV0uYyl9cmV0dXJue2c6MSxjOkQuam9pbigiIiksczpBWzBdLnMrIi0iK0FbMV0ucysiLSIrQVsyXS5zKyJUIitBWzNdLnMrIjoiK0FbNF0ucysiOiIrQVs1XS5zK0FbNl0uc307Y2FzZSJVIjpyZXR1cm57ZzoxLGM6InUgPSBwYXJzZUludChyZXN1bHRzWyIrRisiXSwgMTApO1xuIixzOiIoLT9cXGQrKSJ9O2RlZmF1bHQ6cmV0dXJue2c6MCxjOm51bGwsczpFeHQuZXNjYXBlUmUoRyl9fX07RGF0ZS5wcm90b3R5cGUuZ2V0VGltZXpvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b1N0cmluZygpLnJlcGxhY2UoL14uKiAoPzpcKCguKilcKXwoW0EtWl17MSw0fSkoPzpbXC0rXVswLTldezR9KT8oPzogLT9cZCspPykkLywiJDEkMiIpLnJlcGxhY2UoL1teQS1aXS9nLCIiKX07RGF0ZS5wcm90b3R5cGUuZ2V0R01UT2Zmc2V0PWZ1bmN0aW9uKEEpe3JldHVybih0aGlzLmdldFRpbWV6b25lT2Zmc2V0KCk+MD8iLSI6IisiKStTdHJpbmcubGVmdFBhZChNYXRoLmFicyhNYXRoLmZsb29yKHRoaXMuZ2V0VGltZXpvbmVPZmZzZXQoKS82MCkpLDIsIjAiKSsoQT8iOiI6IiIpK1N0cmluZy5sZWZ0UGFkKHRoaXMuZ2V0VGltZXpvbmVPZmZzZXQoKSU2MCwyLCIwIil9O0RhdGUucHJvdG90eXBlLmdldERheU9mWWVhcj1mdW5jdGlvbigpe3ZhciBBPTA7RGF0ZS5kYXlzSW5Nb250aFsxXT10aGlzLmlzTGVhcFllYXIoKT8yOToyODtmb3IodmFyIEI9MDtCPHRoaXMuZ2V0TW9udGgoKTsrK0Ipe0ErPURhdGUuZGF5c0luTW9udGhbQl19cmV0dXJuIEErdGhpcy5nZXREYXRlKCktMX07RGF0ZS5wcm90b3R5cGUuZ2V0V2Vla09mWWVhcj1mdW5jdGlvbigpe3ZhciBCPTg2NDAwMDAwO3ZhciBDPTcqQjt2YXIgRD1EYXRlLlVUQyh0aGlzLmdldEZ1bGxZZWFyKCksdGhpcy5nZXRNb250aCgpLHRoaXMuZ2V0RGF0ZSgpKzMpL0I7dmFyIEE9TWF0aC5mbG9vcihELzcpO3ZhciBFPW5ldyBEYXRlKEEqQykuZ2V0VVRDRnVsbFllYXIoKTtyZXR1cm4gQS1NYXRoLmZsb29yKERhdGUuVVRDKEUsMCw3KS9DKSsxfTtEYXRlLnByb3RvdHlwZS5pc0xlYXBZZWFyPWZ1bmN0aW9uKCl7dmFyIEE9dGhpcy5nZXRGdWxsWWVhcigpO3JldHVybiAhISgoQSYzKT09MCYmKEElMTAwfHwoQSU0MDA9PTAmJkEpKSl9O0RhdGUucHJvdG90eXBlLmdldEZpcnN0RGF5T2ZNb250aD1mdW5jdGlvbigpe3ZhciBBPSh0aGlzLmdldERheSgpLSh0aGlzLmdldERhdGUoKS0xKSklNztyZXR1cm4oQTwwKT8oQSs3KTpBfTtEYXRlLnByb3RvdHlwZS5nZXRMYXN0RGF5T2ZNb250aD1mdW5jdGlvbigpe3ZhciBBPSh0aGlzLmdldERheSgpKyhEYXRlLmRheXNJbk1vbnRoW3RoaXMuZ2V0TW9udGgoKV0tdGhpcy5nZXREYXRlKCkpKSU3O3JldHVybihBPDApPyhBKzcpOkF9O0RhdGUucHJvdG90eXBlLmdldEZpcnN0RGF0ZU9mTW9udGg9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IERhdGUodGhpcy5nZXRGdWxsWWVhcigpLHRoaXMuZ2V0TW9udGgoKSwxKX07RGF0ZS5wcm90b3R5cGUuZ2V0TGFzdERhdGVPZk1vbnRoPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBEYXRlKHRoaXMuZ2V0RnVsbFllYXIoKSx0aGlzLmdldE1vbnRoKCksdGhpcy5nZXREYXlzSW5Nb250aCgpKX07RGF0ZS5wcm90b3R5cGUuZ2V0RGF5c0luTW9udGg9ZnVuY3Rpb24oKXtEYXRlLmRheXNJbk1vbnRoWzFdPXRoaXMuaXNMZWFwWWVhcigpPzI5OjI4O3JldHVybiBEYXRlLmRheXNJbk1vbnRoW3RoaXMuZ2V0TW9udGgoKV19O0RhdGUucHJvdG90eXBlLmdldFN1ZmZpeD1mdW5jdGlvbigpe3N3aXRjaCh0aGlzLmdldERhdGUoKSl7Y2FzZSAxOmNhc2UgMjE6Y2FzZSAzMTpyZXR1cm4ic3QiO2Nhc2UgMjpjYXNlIDIyOnJldHVybiJuZCI7Y2FzZSAzOmNhc2UgMjM6cmV0dXJuInJkIjtkZWZhdWx0OnJldHVybiJ0aCJ9fTtEYXRlLmRheXNJbk1vbnRoPVszMSwyOCwzMSwzMCwzMSwzMCwzMSwzMSwzMCwzMSwzMCwzMV07RGF0ZS5tb250aE5hbWVzPVsiSmFudWFyeSIsIkZlYnJ1YXJ5IiwiTWFyY2giLCJBcHJpbCIsIk1heSIsIkp1bmUiLCJKdWx5IiwiQXVndXN0IiwiU2VwdGVtYmVyIiwiT2N0b2JlciIsIk5vdmVtYmVyIiwiRGVjZW1iZXIiXTtEYXRlLmdldFNob3J0TW9udGhOYW1lPWZ1bmN0aW9uKEEpe3JldHVybiBEYXRlLm1vbnRoTmFtZXNbQV0uc3Vic3RyaW5nKDAsMyl9O0RhdGUuZGF5TmFtZXM9WyJTdW5kYXkiLCJNb25kYXkiLCJUdWVzZGF5IiwiV2VkbmVzZGF5IiwiVGh1cnNkYXkiLCJGcmlkYXkiLCJTYXR1cmRheSJdO0RhdGUuZ2V0U2hvcnREYXlOYW1lPWZ1bmN0aW9uKEEpe3JldHVybiBEYXRlLmRheU5hbWVzW0FdLnN1YnN0cmluZygwLDMpfTtEYXRlLnkya1llYXI9NTA7RGF0ZS5tb250aE51bWJlcnM9e0phbjowLEZlYjoxLE1hcjoyLEFwcjozLE1heTo0LEp1bjo1LEp1bDo2LEF1Zzo3LFNlcDo4LE9jdDo5LE5vdjoxMCxEZWM6MTF9O0RhdGUuZ2V0TW9udGhOdW1iZXI9ZnVuY3Rpb24oQSl7cmV0dXJuIERhdGUubW9udGhOdW1iZXJzW0Euc3Vic3RyaW5nKDAsMSkudG9VcHBlckNhc2UoKStBLnN1YnN0cmluZygxLDMpLnRvTG93ZXJDYXNlKCldfTtEYXRlLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgRGF0ZSh0aGlzLmdldFRpbWUoKSl9O0RhdGUucHJvdG90eXBlLmNsZWFyVGltZT1mdW5jdGlvbihBKXtpZihBKXtyZXR1cm4gdGhpcy5jbG9uZSgpLmNsZWFyVGltZSgpfXRoaXMuc2V0SG91cnMoMCk7dGhpcy5zZXRNaW51dGVzKDApO3RoaXMuc2V0U2Vjb25kcygwKTt0aGlzLnNldE1pbGxpc2Vjb25kcygwKTtyZXR1cm4gdGhpc307aWYoRXh0LmlzU2FmYXJpKXtEYXRlLmJyb2tlblNldE1vbnRoPURhdGUucHJvdG90eXBlLnNldE1vbnRoO0RhdGUucHJvdG90eXBlLnNldE1vbnRoPWZ1bmN0aW9uKEEpe2lmKEE8PS0xKXt2YXIgRD1NYXRoLmNlaWwoLUEpO3ZhciBDPU1hdGguY2VpbChELzEyKTt2YXIgQj0oRCUxMik/MTItRCUxMjowO3RoaXMuc2V0RnVsbFllYXIodGhpcy5nZXRGdWxsWWVhcigpLUMpO3JldHVybiBEYXRlLmJyb2tlblNldE1vbnRoLmNhbGwodGhpcyxCKX1lbHNle3JldHVybiBEYXRlLmJyb2tlblNldE1vbnRoLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fURhdGUuTUlMTEk9Im1zIjtEYXRlLlNFQ09ORD0icyI7RGF0ZS5NSU5VVEU9Im1pIjtEYXRlLkhPVVI9ImgiO0RhdGUuREFZPSJkIjtEYXRlLk1PTlRIPSJtbyI7RGF0ZS5ZRUFSPSJ5IjtEYXRlLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oQixDKXt2YXIgRD10aGlzLmNsb25lKCk7aWYoIUJ8fEM9PT0wKXtyZXR1cm4gRH1zd2l0Y2goQi50b0xvd2VyQ2FzZSgpKXtjYXNlIERhdGUuTUlMTEk6RC5zZXRNaWxsaXNlY29uZHModGhpcy5nZXRNaWxsaXNlY29uZHMoKStDKTticmVhaztjYXNlIERhdGUuU0VDT05EOkQuc2V0U2Vjb25kcyh0aGlzLmdldFNlY29uZHMoKStDKTticmVhaztjYXNlIERhdGUuTUlOVVRFOkQuc2V0TWludXRlcyh0aGlzLmdldE1pbnV0ZXMoKStDKTticmVhaztjYXNlIERhdGUuSE9VUjpELnNldEhvdXJzKHRoaXMuZ2V0SG91cnMoKStDKTticmVhaztjYXNlIERhdGUuREFZOkQuc2V0RGF0ZSh0aGlzLmdldERhdGUoKStDKTticmVhaztjYXNlIERhdGUuTU9OVEg6dmFyIEE9dGhpcy5nZXREYXRlKCk7aWYoQT4yOCl7QT1NYXRoLm1pbihBLHRoaXMuZ2V0Rmlyc3REYXRlT2ZNb250aCgpLmFkZCgibW8iLEMpLmdldExhc3REYXRlT2ZNb250aCgpLmdldERhdGUoKSl9RC5zZXREYXRlKEEpO0Quc2V0TW9udGgodGhpcy5nZXRNb250aCgpK0MpO2JyZWFrO2Nhc2UgRGF0ZS5ZRUFSOkQuc2V0RnVsbFllYXIodGhpcy5nZXRGdWxsWWVhcigpK0MpO2JyZWFrfXJldHVybiBEfTtEYXRlLnByb3RvdHlwZS5iZXR3ZWVuPWZ1bmN0aW9uKEMsQSl7dmFyIEI9dGhpcy5nZXRUaW1lKCk7cmV0dXJuIEMuZ2V0VGltZSgpPD1CJiZCPD1BLmdldFRpbWUoKX07DQpFeHQudXRpbC5EZWxheWVkVGFzaz1mdW5jdGlvbihFLEQsQSl7dmFyIEc9bnVsbCxGLEI7dmFyIEM9ZnVuY3Rpb24oKXt2YXIgSD1uZXcgRGF0ZSgpLmdldFRpbWUoKTtpZihILUI+PUYpe2NsZWFySW50ZXJ2YWwoRyk7Rz1udWxsO0UuYXBwbHkoRCxBfHxbXSl9fTt0aGlzLmRlbGF5PWZ1bmN0aW9uKEksSyxKLEgpe2lmKEcmJkkhPUYpe3RoaXMuY2FuY2VsKCl9Rj1JO0I9bmV3IERhdGUoKS5nZXRUaW1lKCk7RT1LfHxFO0Q9Snx8RDtBPUh8fEE7aWYoIUcpe0c9c2V0SW50ZXJ2YWwoQyxGKX19O3RoaXMuY2FuY2VsPWZ1bmN0aW9uKCl7aWYoRyl7Y2xlYXJJbnRlcnZhbChHKTtHPW51bGx9fX07DQpFeHQudXRpbC5UYXNrUnVubmVyPWZ1bmN0aW9uKEUpe0U9RXx8MTA7dmFyIEY9W10sQT1bXTt2YXIgQj0wO3ZhciBHPWZhbHNlO3ZhciBEPWZ1bmN0aW9uKCl7Rz1mYWxzZTtjbGVhckludGVydmFsKEIpO0I9MH07dmFyIEg9ZnVuY3Rpb24oKXtpZighRyl7Rz10cnVlO0I9c2V0SW50ZXJ2YWwoSSxFKX19O3ZhciBDPWZ1bmN0aW9uKEope0EucHVzaChKKTtpZihKLm9uU3RvcCl7Si5vblN0b3AuYXBwbHkoSi5zY29wZXx8Sil9fTt2YXIgST1mdW5jdGlvbigpe2lmKEEubGVuZ3RoPjApe2Zvcih2YXIgTz0wLEs9QS5sZW5ndGg7TzxLO08rKyl7Ri5yZW1vdmUoQVtPXSl9QT1bXTtpZihGLmxlbmd0aDwxKXtEKCk7cmV0dXJuIH19dmFyIE09bmV3IERhdGUoKS5nZXRUaW1lKCk7Zm9yKHZhciBPPTAsSz1GLmxlbmd0aDtPPEs7KytPKXt2YXIgTj1GW09dO3ZhciBKPU0tTi50YXNrUnVuVGltZTtpZihOLmludGVydmFsPD1KKXt2YXIgTD1OLnJ1bi5hcHBseShOLnNjb3BlfHxOLE4uYXJnc3x8WysrTi50YXNrUnVuQ291bnRdKTtOLnRhc2tSdW5UaW1lPU07aWYoTD09PWZhbHNlfHxOLnRhc2tSdW5Db3VudD09PU4ucmVwZWF0KXtDKE4pO3JldHVybiB9fWlmKE4uZHVyYXRpb24mJk4uZHVyYXRpb248PShNLU4udGFza1N0YXJ0VGltZSkpe0MoTil9fX07dGhpcy5zdGFydD1mdW5jdGlvbihKKXtGLnB1c2goSik7Si50YXNrU3RhcnRUaW1lPW5ldyBEYXRlKCkuZ2V0VGltZSgpO0oudGFza1J1blRpbWU9MDtKLnRhc2tSdW5Db3VudD0wO0goKTtyZXR1cm4gSn07dGhpcy5zdG9wPWZ1bmN0aW9uKEope0MoSik7cmV0dXJuIEp9O3RoaXMuc3RvcEFsbD1mdW5jdGlvbigpe0QoKTtmb3IodmFyIEs9MCxKPUYubGVuZ3RoO0s8SjtLKyspe2lmKEZbS10ub25TdG9wKXtGW0tdLm9uU3RvcCgpfX1GPVtdO0E9W119fTtFeHQuVGFza01ncj1uZXcgRXh0LnV0aWwuVGFza1J1bm5lcigpOw0KRXh0LnV0aWwuTWl4ZWRDb2xsZWN0aW9uPWZ1bmN0aW9uKEIsQSl7dGhpcy5pdGVtcz1bXTt0aGlzLm1hcD17fTt0aGlzLmtleXM9W107dGhpcy5sZW5ndGg9MDt0aGlzLmFkZEV2ZW50cygiY2xlYXIiLCJhZGQiLCJyZXBsYWNlIiwicmVtb3ZlIiwic29ydCIpO3RoaXMuYWxsb3dGdW5jdGlvbnM9Qj09PXRydWU7aWYoQSl7dGhpcy5nZXRLZXk9QX1FeHQudXRpbC5NaXhlZENvbGxlY3Rpb24uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpfTtFeHQuZXh0ZW5kKEV4dC51dGlsLk1peGVkQ29sbGVjdGlvbixFeHQudXRpbC5PYnNlcnZhYmxlLHthbGxvd0Z1bmN0aW9uczpmYWxzZSxhZGQ6ZnVuY3Rpb24oQixDKXtpZihhcmd1bWVudHMubGVuZ3RoPT0xKXtDPWFyZ3VtZW50c1swXTtCPXRoaXMuZ2V0S2V5KEMpfWlmKHR5cGVvZiBCPT0idW5kZWZpbmVkInx8Qj09PW51bGwpe3RoaXMubGVuZ3RoKys7dGhpcy5pdGVtcy5wdXNoKEMpO3RoaXMua2V5cy5wdXNoKG51bGwpfWVsc2V7dmFyIEE9dGhpcy5tYXBbQl07aWYoQSl7cmV0dXJuIHRoaXMucmVwbGFjZShCLEMpfXRoaXMubGVuZ3RoKys7dGhpcy5pdGVtcy5wdXNoKEMpO3RoaXMubWFwW0JdPUM7dGhpcy5rZXlzLnB1c2goQil9dGhpcy5maXJlRXZlbnQoImFkZCIsdGhpcy5sZW5ndGgtMSxDLEIpO3JldHVybiBDfSxnZXRLZXk6ZnVuY3Rpb24oQSl7cmV0dXJuIEEuaWR9LHJlcGxhY2U6ZnVuY3Rpb24oQyxEKXtpZihhcmd1bWVudHMubGVuZ3RoPT0xKXtEPWFyZ3VtZW50c1swXTtDPXRoaXMuZ2V0S2V5KEQpfXZhciBBPXRoaXMuaXRlbShDKTtpZih0eXBlb2YgQz09InVuZGVmaW5lZCJ8fEM9PT1udWxsfHx0eXBlb2YgQT09InVuZGVmaW5lZCIpe3JldHVybiB0aGlzLmFkZChDLEQpfXZhciBCPXRoaXMuaW5kZXhPZktleShDKTt0aGlzLml0ZW1zW0JdPUQ7dGhpcy5tYXBbQ109RDt0aGlzLmZpcmVFdmVudCgicmVwbGFjZSIsQyxBLEQpO3JldHVybiBEfSxhZGRBbGw6ZnVuY3Rpb24oRSl7aWYoYXJndW1lbnRzLmxlbmd0aD4xfHxFeHQuaXNBcnJheShFKSl7dmFyIEI9YXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50czpFO2Zvcih2YXIgRD0wLEE9Qi5sZW5ndGg7RDxBO0QrKyl7dGhpcy5hZGQoQltEXSl9fWVsc2V7Zm9yKHZhciBDIGluIEUpe2lmKHRoaXMuYWxsb3dGdW5jdGlvbnN8fHR5cGVvZiBFW0NdIT0iZnVuY3Rpb24iKXt0aGlzLmFkZChDLEVbQ10pfX19fSxlYWNoOmZ1bmN0aW9uKEUsRCl7dmFyIEI9W10uY29uY2F0KHRoaXMuaXRlbXMpO2Zvcih2YXIgQz0wLEE9Qi5sZW5ndGg7QzxBO0MrKyl7aWYoRS5jYWxsKER8fEJbQ10sQltDXSxDLEEpPT09ZmFsc2Upe2JyZWFrfX19LGVhY2hLZXk6ZnVuY3Rpb24oRCxDKXtmb3IodmFyIEI9MCxBPXRoaXMua2V5cy5sZW5ndGg7QjxBO0IrKyl7RC5jYWxsKEN8fHdpbmRvdyx0aGlzLmtleXNbQl0sdGhpcy5pdGVtc1tCXSxCLEEpfX0sZmluZDpmdW5jdGlvbihELEMpe2Zvcih2YXIgQj0wLEE9dGhpcy5pdGVtcy5sZW5ndGg7QjxBO0IrKyl7aWYoRC5jYWxsKEN8fHdpbmRvdyx0aGlzLml0ZW1zW0JdLHRoaXMua2V5c1tCXSkpe3JldHVybiB0aGlzLml0ZW1zW0JdfX1yZXR1cm4gbnVsbH0saW5zZXJ0OmZ1bmN0aW9uKEEsQixDKXtpZihhcmd1bWVudHMubGVuZ3RoPT0yKXtDPWFyZ3VtZW50c1sxXTtCPXRoaXMuZ2V0S2V5KEMpfWlmKEE+PXRoaXMubGVuZ3RoKXtyZXR1cm4gdGhpcy5hZGQoQixDKX10aGlzLmxlbmd0aCsrO3RoaXMuaXRlbXMuc3BsaWNlKEEsMCxDKTtpZih0eXBlb2YgQiE9InVuZGVmaW5lZCImJkIhPW51bGwpe3RoaXMubWFwW0JdPUN9dGhpcy5rZXlzLnNwbGljZShBLDAsQik7dGhpcy5maXJlRXZlbnQoImFkZCIsQSxDLEIpO3JldHVybiBDfSxyZW1vdmU6ZnVuY3Rpb24oQSl7cmV0dXJuIHRoaXMucmVtb3ZlQXQodGhpcy5pbmRleE9mKEEpKX0scmVtb3ZlQXQ6ZnVuY3Rpb24oQSl7aWYoQTx0aGlzLmxlbmd0aCYmQT49MCl7dGhpcy5sZW5ndGgtLTt2YXIgQz10aGlzLml0ZW1zW0FdO3RoaXMuaXRlbXMuc3BsaWNlKEEsMSk7dmFyIEI9dGhpcy5rZXlzW0FdO2lmKHR5cGVvZiBCIT0idW5kZWZpbmVkIil7ZGVsZXRlIHRoaXMubWFwW0JdfXRoaXMua2V5cy5zcGxpY2UoQSwxKTt0aGlzLmZpcmVFdmVudCgicmVtb3ZlIixDLEIpO3JldHVybiBDfXJldHVybiBmYWxzZX0scmVtb3ZlS2V5OmZ1bmN0aW9uKEEpe3JldHVybiB0aGlzLnJlbW92ZUF0KHRoaXMuaW5kZXhPZktleShBKSl9LGdldENvdW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RofSxpbmRleE9mOmZ1bmN0aW9uKEEpe3JldHVybiB0aGlzLml0ZW1zLmluZGV4T2YoQSl9LGluZGV4T2ZLZXk6ZnVuY3Rpb24oQSl7cmV0dXJuIHRoaXMua2V5cy5pbmRleE9mKEEpfSxpdGVtOmZ1bmN0aW9uKEEpe3ZhciBCPXR5cGVvZiB0aGlzLm1hcFtBXSE9InVuZGVmaW5lZCI/dGhpcy5tYXBbQV06dGhpcy5pdGVtc1tBXTtyZXR1cm4gdHlwZW9mIEIhPSJmdW5jdGlvbiJ8fHRoaXMuYWxsb3dGdW5jdGlvbnM/QjpudWxsfSxpdGVtQXQ6ZnVuY3Rpb24oQSl7cmV0dXJuIHRoaXMuaXRlbXNbQV19LGtleTpmdW5jdGlvbihBKXtyZXR1cm4gdGhpcy5tYXBbQV19LGNvbnRhaW5zOmZ1bmN0aW9uKEEpe3JldHVybiB0aGlzLmluZGV4T2YoQSkhPS0xfSxjb250YWluc0tleTpmdW5jdGlvbihBKXtyZXR1cm4gdHlwZW9mIHRoaXMubWFwW0FdIT0idW5kZWZpbmVkIn0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLmxlbmd0aD0wO3RoaXMuaXRlbXM9W107dGhpcy5rZXlzPVtdO3RoaXMubWFwPXt9O3RoaXMuZmlyZUV2ZW50KCJjbGVhciIpfSxmaXJzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLml0ZW1zWzBdfSxsYXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXRlbXNbdGhpcy5sZW5ndGgtMV19LF9zb3J0OmZ1bmN0aW9uKEksQSxIKXt2YXIgQz1TdHJpbmcoQSkudG9VcHBlckNhc2UoKT09IkRFU0MiPy0xOjE7SD1IfHxmdW5jdGlvbihLLEope3JldHVybiBLLUp9O3ZhciBHPVtdLEI9dGhpcy5rZXlzLEY9dGhpcy5pdGVtcztmb3IodmFyIEQ9MCxFPUYubGVuZ3RoO0Q8RTtEKyspe0dbRy5sZW5ndGhdPXtrZXk6QltEXSx2YWx1ZTpGW0RdLGluZGV4OkR9fUcuc29ydChmdW5jdGlvbihLLEope3ZhciBMPUgoS1tJXSxKW0ldKSpDO2lmKEw9PTApe0w9KEsuaW5kZXg8Si5pbmRleD8tMToxKX1yZXR1cm4gTH0pO2Zvcih2YXIgRD0wLEU9Ry5sZW5ndGg7RDxFO0QrKyl7RltEXT1HW0RdLnZhbHVlO0JbRF09R1tEXS5rZXl9dGhpcy5maXJlRXZlbnQoInNvcnQiLHRoaXMpfSxzb3J0OmZ1bmN0aW9uKEEsQil7dGhpcy5fc29ydCgidmFsdWUiLEEsQil9LGtleVNvcnQ6ZnVuY3Rpb24oQSxCKXt0aGlzLl9zb3J0KCJrZXkiLEEsQnx8ZnVuY3Rpb24oRCxDKXtyZXR1cm4gU3RyaW5nKEQpLnRvVXBwZXJDYXNlKCktU3RyaW5nKEMpLnRvVXBwZXJDYXNlKCl9KX0sZ2V0UmFuZ2U6ZnVuY3Rpb24oRSxBKXt2YXIgQj10aGlzLml0ZW1zO2lmKEIubGVuZ3RoPDEpe3JldHVybltdfUU9RXx8MDtBPU1hdGgubWluKHR5cGVvZiBBPT0idW5kZWZpbmVkIj90aGlzLmxlbmd0aC0xOkEsdGhpcy5sZW5ndGgtMSk7dmFyIEQ9W107aWYoRTw9QSl7Zm9yKHZhciBDPUU7Qzw9QTtDKyspe0RbRC5sZW5ndGhdPUJbQ119fWVsc2V7Zm9yKHZhciBDPUU7Qz49QTtDLS0pe0RbRC5sZW5ndGhdPUJbQ119fXJldHVybiBEfSxmaWx0ZXI6ZnVuY3Rpb24oQyxCLEQsQSl7aWYoRXh0LmlzRW1wdHkoQixmYWxzZSkpe3JldHVybiB0aGlzLmNsb25lKCl9Qj10aGlzLmNyZWF0ZVZhbHVlTWF0Y2hlcihCLEQsQSk7cmV0dXJuIHRoaXMuZmlsdGVyQnkoZnVuY3Rpb24oRSl7cmV0dXJuIEUmJkIudGVzdChFW0NdKX0pfSxmaWx0ZXJCeTpmdW5jdGlvbihGLEUpe3ZhciBHPW5ldyBFeHQudXRpbC5NaXhlZENvbGxlY3Rpb24oKTtHLmdldEtleT10aGlzLmdldEtleTt2YXIgQj10aGlzLmtleXMsRD10aGlzLml0ZW1zO2Zvcih2YXIgQz0wLEE9RC5sZW5ndGg7QzxBO0MrKyl7aWYoRi5jYWxsKEV8fHRoaXMsRFtDXSxCW0NdKSl7Ry5hZGQoQltDXSxEW0NdKX19cmV0dXJuIEd9LGZpbmRJbmRleDpmdW5jdGlvbihDLEIsRSxELEEpe2lmKEV4dC5pc0VtcHR5KEIsZmFsc2UpKXtyZXR1cm4gLTF9Qj10aGlzLmNyZWF0ZVZhbHVlTWF0Y2hlcihCLEQsQSk7cmV0dXJuIHRoaXMuZmluZEluZGV4QnkoZnVuY3Rpb24oRil7cmV0dXJuIEYmJkIudGVzdChGW0NdKX0sbnVsbCxFKX0sZmluZEluZGV4Qnk6ZnVuY3Rpb24oRixFLEcpe3ZhciBCPXRoaXMua2V5cyxEPXRoaXMuaXRlbXM7Zm9yKHZhciBDPShHfHwwKSxBPUQubGVuZ3RoO0M8QTtDKyspe2lmKEYuY2FsbChFfHx0aGlzLERbQ10sQltDXSkpe3JldHVybiBDfX1pZih0eXBlb2YgRz09Im51bWJlciImJkc+MCl7Zm9yKHZhciBDPTA7QzxHO0MrKyl7aWYoRi5jYWxsKEV8fHRoaXMsRFtDXSxCW0NdKSl7cmV0dXJuIEN9fX1yZXR1cm4gLTF9LGNyZWF0ZVZhbHVlTWF0Y2hlcjpmdW5jdGlvbihCLEMsQSl7aWYoIUIuZXhlYyl7Qj1TdHJpbmcoQik7Qj1uZXcgUmVnRXhwKChDPT09dHJ1ZT8iIjoiXiIpK0V4dC5lc2NhcGVSZShCKSxBPyIiOiJpIil9cmV0dXJuIEJ9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIEU9bmV3IEV4dC51dGlsLk1peGVkQ29sbGVjdGlvbigpO3ZhciBCPXRoaXMua2V5cyxEPXRoaXMuaXRlbXM7Zm9yKHZhciBDPTAsQT1ELmxlbmd0aDtDPEE7QysrKXtFLmFkZChCW0NdLERbQ10pfUUuZ2V0S2V5PXRoaXMuZ2V0S2V5O3JldHVybiBFfX0pO0V4dC51dGlsLk1peGVkQ29sbGVjdGlvbi5wcm90b3R5cGUuZ2V0PUV4dC51dGlsLk1peGVkQ29sbGVjdGlvbi5wcm90b3R5cGUuaXRlbTsNCkV4dC51dGlsLkpTT049bmV3IChmdW5jdGlvbigpe3ZhciB1c2VIYXNPd249e30uaGFzT3duUHJvcGVydHk/dHJ1ZTpmYWxzZTt2YXIgcGFkPWZ1bmN0aW9uKG4pe3JldHVybiBuPDEwPyIwIituOm59O3ZhciBtPXsiXGIiOiJcXGIiLCJcdCI6IlxcdCIsIlxuIjoiXFxuIiwiXGYiOiJcXGYiLCJcciI6IlxcciIsIlwiIjoiXFxcIiIsIlxcIjoiXFxcXCJ9O3ZhciBlbmNvZGVTdHJpbmc9ZnVuY3Rpb24ocyl7aWYoL1siXFxceDAwLVx4MWZdLy50ZXN0KHMpKXtyZXR1cm4iXCIiK3MucmVwbGFjZSgvKFtceDAwLVx4MWZcXCJdKS9nLGZ1bmN0aW9uKGEsYil7dmFyIGM9bVtiXTtpZihjKXtyZXR1cm4gY31jPWIuY2hhckNvZGVBdCgpO3JldHVybiJcXHUwMCIrTWF0aC5mbG9vcihjLzE2KS50b1N0cmluZygxNikrKGMlMTYpLnRvU3RyaW5nKDE2KX0pKyJcIiJ9cmV0dXJuIlwiIitzKyJcIiJ9O3ZhciBlbmNvZGVBcnJheT1mdW5jdGlvbihvKXt2YXIgYT1bIlsiXSxiLGksbD1vLmxlbmd0aCx2O2ZvcihpPTA7aTxsO2krPTEpe3Y9b1tpXTtzd2l0Y2godHlwZW9mIHYpe2Nhc2UidW5kZWZpbmVkIjpjYXNlImZ1bmN0aW9uIjpjYXNlInVua25vd24iOmJyZWFrO2RlZmF1bHQ6aWYoYil7YS5wdXNoKCIsIil9YS5wdXNoKHY9PT1udWxsPyJudWxsIjpFeHQudXRpbC5KU09OLmVuY29kZSh2KSk7Yj10cnVlfX1hLnB1c2goIl0iKTtyZXR1cm4gYS5qb2luKCIiKX07dmFyIGVuY29kZURhdGU9ZnVuY3Rpb24obyl7cmV0dXJuIlwiIitvLmdldEZ1bGxZZWFyKCkrIi0iK3BhZChvLmdldE1vbnRoKCkrMSkrIi0iK3BhZChvLmdldERhdGUoKSkrIlQiK3BhZChvLmdldEhvdXJzKCkpKyI6IitwYWQoby5nZXRNaW51dGVzKCkpKyI6IitwYWQoby5nZXRTZWNvbmRzKCkpKyJcIiJ9O3RoaXMuZW5jb2RlPWZ1bmN0aW9uKG8pe2lmKHR5cGVvZiBvPT0idW5kZWZpbmVkInx8bz09PW51bGwpe3JldHVybiJudWxsIn1lbHNle2lmKEV4dC5pc0FycmF5KG8pKXtyZXR1cm4gZW5jb2RlQXJyYXkobyl9ZWxzZXtpZihFeHQuaXNEYXRlKG8pKXtyZXR1cm4gZW5jb2RlRGF0ZShvKX1lbHNle2lmKHR5cGVvZiBvPT0ic3RyaW5nIil7cmV0dXJuIGVuY29kZVN0cmluZyhvKX1lbHNle2lmKHR5cGVvZiBvPT0ibnVtYmVyIil7cmV0dXJuIGlzRmluaXRlKG8pP1N0cmluZyhvKToibnVsbCJ9ZWxzZXtpZih0eXBlb2Ygbz09ImJvb2xlYW4iKXtyZXR1cm4gU3RyaW5nKG8pfWVsc2V7dmFyIGE9WyJ7Il0sYixpLHY7Zm9yKGkgaW4gbyl7aWYoIXVzZUhhc093bnx8by5oYXNPd25Qcm9wZXJ0eShpKSl7dj1vW2ldO3N3aXRjaCh0eXBlb2Ygdil7Y2FzZSJ1bmRlZmluZWQiOmNhc2UiZnVuY3Rpb24iOmNhc2UidW5rbm93biI6YnJlYWs7ZGVmYXVsdDppZihiKXthLnB1c2goIiwiKX1hLnB1c2godGhpcy5lbmNvZGUoaSksIjoiLHY9PT1udWxsPyJudWxsIjp0aGlzLmVuY29kZSh2KSk7Yj10cnVlfX19YS5wdXNoKCJ9Iik7cmV0dXJuIGEuam9pbigiIil9fX19fX19O3RoaXMuZGVjb2RlPWZ1bmN0aW9uKGpzb24pe3JldHVybiBldmFsKCIoIitqc29uKyIpIil9fSkoKTtFeHQuZW5jb2RlPUV4dC51dGlsLkpTT04uZW5jb2RlO0V4dC5kZWNvZGU9RXh0LnV0aWwuSlNPTi5kZWNvZGU7DQpFeHQudXRpbC5Gb3JtYXQ9ZnVuY3Rpb24oKXt2YXIgdHJpbVJlPS9eXHMrfFxzKyQvZztyZXR1cm57ZWxsaXBzaXM6ZnVuY3Rpb24odmFsdWUsbGVuKXtpZih2YWx1ZSYmdmFsdWUubGVuZ3RoPmxlbil7cmV0dXJuIHZhbHVlLnN1YnN0cigwLGxlbi0zKSsiLi4uIn1yZXR1cm4gdmFsdWV9LHVuZGVmOmZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gdmFsdWUhPT11bmRlZmluZWQ/dmFsdWU6IiJ9LGRlZmF1bHRWYWx1ZTpmdW5jdGlvbih2YWx1ZSxkZWZhdWx0VmFsdWUpe3JldHVybiB2YWx1ZSE9PXVuZGVmaW5lZCYmdmFsdWUhPT0iIj92YWx1ZTpkZWZhdWx0VmFsdWV9LGh0bWxFbmNvZGU6ZnVuY3Rpb24odmFsdWUpe3JldHVybiAhdmFsdWU/dmFsdWU6U3RyaW5nKHZhbHVlKS5yZXBsYWNlKC8mL2csIiZhbXA7IikucmVwbGFjZSgvPi9nLCImZ3Q7IikucmVwbGFjZSgvPC9nLCImbHQ7IikucmVwbGFjZSgvIi9nLCImcXVvdDsiKX0saHRtbERlY29kZTpmdW5jdGlvbih2YWx1ZSl7cmV0dXJuICF2YWx1ZT92YWx1ZTpTdHJpbmcodmFsdWUpLnJlcGxhY2UoLyZhbXA7L2csIiYiKS5yZXBsYWNlKC8mZ3Q7L2csIj4iKS5yZXBsYWNlKC8mbHQ7L2csIjwiKS5yZXBsYWNlKC8mcXVvdDsvZywiXCIiKX0sdHJpbTpmdW5jdGlvbih2YWx1ZSl7cmV0dXJuIFN0cmluZyh2YWx1ZSkucmVwbGFjZSh0cmltUmUsIiIpfSxzdWJzdHI6ZnVuY3Rpb24odmFsdWUsc3RhcnQsbGVuZ3RoKXtyZXR1cm4gU3RyaW5nKHZhbHVlKS5zdWJzdHIoc3RhcnQsbGVuZ3RoKX0sbG93ZXJjYXNlOmZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gU3RyaW5nKHZhbHVlKS50b0xvd2VyQ2FzZSgpfSx1cHBlcmNhc2U6ZnVuY3Rpb24odmFsdWUpe3JldHVybiBTdHJpbmcodmFsdWUpLnRvVXBwZXJDYXNlKCl9LGNhcGl0YWxpemU6ZnVuY3Rpb24odmFsdWUpe3JldHVybiAhdmFsdWU/dmFsdWU6dmFsdWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrdmFsdWUuc3Vic3RyKDEpLnRvTG93ZXJDYXNlKCl9LGNhbGw6ZnVuY3Rpb24odmFsdWUsZm4pe2lmKGFyZ3VtZW50cy5sZW5ndGg+Mil7dmFyIGFyZ3M9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDIpO2FyZ3MudW5zaGlmdCh2YWx1ZSk7cmV0dXJuIGV2YWwoZm4pLmFwcGx5KHdpbmRvdyxhcmdzKX1lbHNle3JldHVybiBldmFsKGZuKS5jYWxsKHdpbmRvdyx2YWx1ZSl9fSx1c01vbmV5OmZ1bmN0aW9uKHYpe3Y9KE1hdGgucm91bmQoKHYtMCkqMTAwKSkvMTAwO3Y9KHY9PU1hdGguZmxvb3IodikpP3YrIi4wMCI6KCh2KjEwPT1NYXRoLmZsb29yKHYqMTApKT92KyIwIjp2KTt2PVN0cmluZyh2KTt2YXIgcHM9di5zcGxpdCgiLiIpO3ZhciB3aG9sZT1wc1swXTt2YXIgc3ViPXBzWzFdPyIuIitwc1sxXToiLjAwIjt2YXIgcj0vKFxkKykoXGR7M30pLzt3aGlsZShyLnRlc3Qod2hvbGUpKXt3aG9sZT13aG9sZS5yZXBsYWNlKHIsIiQxIisiLCIrIiQyIil9dj13aG9sZStzdWI7aWYodi5jaGFyQXQoMCk9PSItIil7cmV0dXJuIi0kIit2LnN1YnN0cigxKX1yZXR1cm4iJCIrdn0sZGF0ZTpmdW5jdGlvbih2LGZvcm1hdCl7aWYoIXYpe3JldHVybiIifWlmKCFFeHQuaXNEYXRlKHYpKXt2PW5ldyBEYXRlKERhdGUucGFyc2UodikpfXJldHVybiB2LmRhdGVGb3JtYXQoZm9ybWF0fHwibS9kL1kiKX0sZGF0ZVJlbmRlcmVyOmZ1bmN0aW9uKGZvcm1hdCl7cmV0dXJuIGZ1bmN0aW9uKHYpe3JldHVybiBFeHQudXRpbC5Gb3JtYXQuZGF0ZSh2LGZvcm1hdCl9fSxzdHJpcFRhZ3NSRTovPFwvP1tePl0rPi9naSxzdHJpcFRhZ3M6ZnVuY3Rpb24odil7cmV0dXJuICF2P3Y6U3RyaW5nKHYpLnJlcGxhY2UodGhpcy5zdHJpcFRhZ3NSRSwiIil9LHN0cmlwU2NyaXB0c1JlOi8oPzo8c2NyaXB0Lio/PikoKFxufFxyfC4pKj8pKD86PFwvc2NyaXB0PikvaWcsc3RyaXBTY3JpcHRzOmZ1bmN0aW9uKHYpe3JldHVybiAhdj92OlN0cmluZyh2KS5yZXBsYWNlKHRoaXMuc3RyaXBTY3JpcHRzUmUsIiIpfSxmaWxlU2l6ZTpmdW5jdGlvbihzaXplKXtpZihzaXplPDEwMjQpe3JldHVybiBzaXplKyIgYnl0ZXMifWVsc2V7aWYoc2l6ZTwxMDQ4NTc2KXtyZXR1cm4oTWF0aC5yb3VuZCgoKHNpemUqMTApLzEwMjQpKS8xMCkrIiBLQiJ9ZWxzZXtyZXR1cm4oTWF0aC5yb3VuZCgoKHNpemUqMTApLzEwNDg1NzYpKS8xMCkrIiBNQiJ9fX0sbWF0aDpmdW5jdGlvbigpe3ZhciBmbnM9e307cmV0dXJuIGZ1bmN0aW9uKHYsYSl7aWYoIWZuc1thXSl7Zm5zW2FdPW5ldyBGdW5jdGlvbigidiIsInJldHVybiB2ICIrYSsiOyIpfXJldHVybiBmbnNbYV0odil9fSgpfX0oKTsNCkV4dC5YVGVtcGxhdGU9ZnVuY3Rpb24oKXtFeHQuWFRlbXBsYXRlLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBQPXRoaXMuaHRtbDtQPVsiPHRwbD4iLFAsIjwvdHBsPiJdLmpvaW4oIiIpO3ZhciBPPS88dHBsXGJbXj5dKj4oKD86KD89KFtePF0rKSlcMnw8KD8hdHBsXGJbXj5dKj4pKSo/KTxcL3RwbD4vO3ZhciBOPS9ePHRwbFxiW14+XSo/Zm9yPSIoLio/KSIvO3ZhciBMPS9ePHRwbFxiW14+XSo/aWY9IiguKj8pIi87dmFyIEo9L148dHBsXGJbXj5dKj9leGVjPSIoLio/KSIvO3ZhciBDLEI9MDt2YXIgRz1bXTt3aGlsZShDPVAubWF0Y2goTykpe3ZhciBNPUNbMF0ubWF0Y2goTik7dmFyIEs9Q1swXS5tYXRjaChMKTt2YXIgST1DWzBdLm1hdGNoKEopO3ZhciBFPW51bGwsSD1udWxsLEQ9bnVsbDt2YXIgQT1NJiZNWzFdP01bMV06IiI7aWYoSyl7RT1LJiZLWzFdP0tbMV06bnVsbDtpZihFKXtIPW5ldyBGdW5jdGlvbigidmFsdWVzIiwicGFyZW50IiwieGluZGV4IiwieGNvdW50Iiwid2l0aCh2YWx1ZXMpeyByZXR1cm4gIisoRXh0LnV0aWwuRm9ybWF0Lmh0bWxEZWNvZGUoRSkpKyI7IH0iKX19aWYoSSl7RT1JJiZJWzFdP0lbMV06bnVsbDtpZihFKXtEPW5ldyBGdW5jdGlvbigidmFsdWVzIiwicGFyZW50IiwieGluZGV4IiwieGNvdW50Iiwid2l0aCh2YWx1ZXMpeyAiKyhFeHQudXRpbC5Gb3JtYXQuaHRtbERlY29kZShFKSkrIjsgfSIpfX1pZihBKXtzd2l0Y2goQSl7Y2FzZSIuIjpBPW5ldyBGdW5jdGlvbigidmFsdWVzIiwicGFyZW50Iiwid2l0aCh2YWx1ZXMpeyByZXR1cm4gdmFsdWVzOyB9Iik7YnJlYWs7Y2FzZSIuLiI6QT1uZXcgRnVuY3Rpb24oInZhbHVlcyIsInBhcmVudCIsIndpdGgodmFsdWVzKXsgcmV0dXJuIHBhcmVudDsgfSIpO2JyZWFrO2RlZmF1bHQ6QT1uZXcgRnVuY3Rpb24oInZhbHVlcyIsInBhcmVudCIsIndpdGgodmFsdWVzKXsgcmV0dXJuICIrQSsiOyB9Iil9fUcucHVzaCh7aWQ6Qix0YXJnZXQ6QSxleGVjOkQsdGVzdDpILGJvZHk6Q1sxXXx8IiJ9KTtQPVAucmVwbGFjZShDWzBdLCJ7eHRwbCIrQisifSIpOysrQn1mb3IodmFyIEY9Ry5sZW5ndGgtMTtGPj0wOy0tRil7dGhpcy5jb21waWxlVHBsKEdbRl0pfXRoaXMubWFzdGVyPUdbRy5sZW5ndGgtMV07dGhpcy50cGxzPUd9O0V4dC5leHRlbmQoRXh0LlhUZW1wbGF0ZSxFeHQuVGVtcGxhdGUse3JlOi9ceyhbXHctXC5cI10rKSg/Olw6KFtcd1wuXSopKD86XCgoLio/KT9cKSk/KT8oXHM/W1wrXC1cKlxcXVxzP1tcZFwuXCtcLVwqXFxcKFwpXSspP1x9L2csY29kZVJlOi9ce1xbKCg/OlxcXF18LnxcbikqPylcXVx9L2csYXBwbHlTdWJUZW1wbGF0ZTpmdW5jdGlvbihBLEgsRyxELEMpe3ZhciBKPXRoaXMudHBsc1tBXTtpZihKLnRlc3QmJiFKLnRlc3QuY2FsbCh0aGlzLEgsRyxELEMpKXtyZXR1cm4iIn1pZihKLmV4ZWMmJkouZXhlYy5jYWxsKHRoaXMsSCxHLEQsQykpe3JldHVybiIifXZhciBJPUoudGFyZ2V0P0oudGFyZ2V0LmNhbGwodGhpcyxILEcpOkg7Rz1KLnRhcmdldD9IOkc7aWYoSi50YXJnZXQmJkV4dC5pc0FycmF5KEkpKXt2YXIgQj1bXTtmb3IodmFyIEU9MCxGPUkubGVuZ3RoO0U8RjtFKyspe0JbQi5sZW5ndGhdPUouY29tcGlsZWQuY2FsbCh0aGlzLElbRV0sRyxFKzEsRil9cmV0dXJuIEIuam9pbigiIil9cmV0dXJuIEouY29tcGlsZWQuY2FsbCh0aGlzLEksRyxELEMpfSxjb21waWxlVHBsOmZ1bmN0aW9uKHRwbCl7dmFyIGZtPUV4dC51dGlsLkZvcm1hdDt2YXIgdXNlRj10aGlzLmRpc2FibGVGb3JtYXRzIT09dHJ1ZTt2YXIgc2VwPUV4dC5pc0dlY2tvPyIrIjoiLCI7dmFyIGZuPWZ1bmN0aW9uKG0sbmFtZSxmb3JtYXQsYXJncyxtYXRoKXtpZihuYW1lLnN1YnN0cigwLDQpPT0ieHRwbCIpe3JldHVybiInIitzZXArInRoaXMuYXBwbHlTdWJUZW1wbGF0ZSgiK25hbWUuc3Vic3RyKDQpKyIsIHZhbHVlcywgcGFyZW50LCB4aW5kZXgsIHhjb3VudCkiK3NlcCsiJyJ9dmFyIHY7aWYobmFtZT09PSIuIil7dj0idmFsdWVzIn1lbHNle2lmKG5hbWU9PT0iIyIpe3Y9InhpbmRleCJ9ZWxzZXtpZihuYW1lLmluZGV4T2YoIi4iKSE9LTEpe3Y9bmFtZX1lbHNle3Y9InZhbHVlc1snIituYW1lKyInXSJ9fX1pZihtYXRoKXt2PSIoIit2K21hdGgrIikifWlmKGZvcm1hdCYmdXNlRil7YXJncz1hcmdzPyIsIithcmdzOiIiO2lmKGZvcm1hdC5zdWJzdHIoMCw1KSE9InRoaXMuIil7Zm9ybWF0PSJmbS4iK2Zvcm1hdCsiKCJ9ZWxzZXtmb3JtYXQ9InRoaXMuY2FsbChcIiIrZm9ybWF0LnN1YnN0cig1KSsiXCIsICI7YXJncz0iLCB2YWx1ZXMifX1lbHNle2FyZ3M9IiI7Zm9ybWF0PSIoIit2KyIgPT09IHVuZGVmaW5lZCA/ICcnIDogIn1yZXR1cm4iJyIrc2VwK2Zvcm1hdCt2K2FyZ3MrIikiK3NlcCsiJyJ9O3ZhciBjb2RlRm49ZnVuY3Rpb24obSxjb2RlKXtyZXR1cm4iJyIrc2VwKyIoIitjb2RlKyIpIitzZXArIicifTt2YXIgYm9keTtpZihFeHQuaXNHZWNrbyl7Ym9keT0idHBsLmNvbXBpbGVkID0gZnVuY3Rpb24odmFsdWVzLCBwYXJlbnQsIHhpbmRleCwgeGNvdW50KXsgcmV0dXJuICciK3RwbC5ib2R5LnJlcGxhY2UoLyhcclxufFxuKS9nLCJcXG4iKS5yZXBsYWNlKC8nL2csIlxcJyIpLnJlcGxhY2UodGhpcy5yZSxmbikucmVwbGFjZSh0aGlzLmNvZGVSZSxjb2RlRm4pKyInO307In1lbHNle2JvZHk9WyJ0cGwuY29tcGlsZWQgPSBmdW5jdGlvbih2YWx1ZXMsIHBhcmVudCwgeGluZGV4LCB4Y291bnQpeyByZXR1cm4gWyciXTtib2R5LnB1c2godHBsLmJvZHkucmVwbGFjZSgvKFxyXG58XG4pL2csIlxcbiIpLnJlcGxhY2UoLycvZywiXFwnIikucmVwbGFjZSh0aGlzLnJlLGZuKS5yZXBsYWNlKHRoaXMuY29kZVJlLGNvZGVGbikpO2JvZHkucHVzaCgiJ10uam9pbignJyk7fTsiKTtib2R5PWJvZHkuam9pbigiIil9ZXZhbChib2R5KTtyZXR1cm4gdGhpc30sYXBwbHk6ZnVuY3Rpb24oQSl7cmV0dXJuIHRoaXMubWFzdGVyLmNvbXBpbGVkLmNhbGwodGhpcyxBLHt9LDEsMSl9LGFwcGx5VGVtcGxhdGU6ZnVuY3Rpb24oQSl7cmV0dXJuIHRoaXMubWFzdGVyLmNvbXBpbGVkLmNhbGwodGhpcyxBLHt9LDEsMSl9LGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319KTtFeHQuWFRlbXBsYXRlLmZyb209ZnVuY3Rpb24oQSl7QT1FeHQuZ2V0RG9tKEEpO3JldHVybiBuZXcgRXh0LlhUZW1wbGF0ZShBLnZhbHVlfHxBLmlubmVySFRNTCl9Ow0KRXh0LnV0aWwuQ1NTPWZ1bmN0aW9uKCl7dmFyIEQ9bnVsbDt2YXIgQz1kb2N1bWVudDt2YXIgQj0vKC1bYS16XSkvZ2k7dmFyIEE9ZnVuY3Rpb24oRSxGKXtyZXR1cm4gRi5jaGFyQXQoMSkudG9VcHBlckNhc2UoKX07cmV0dXJue2NyZWF0ZVN0eWxlU2hlZXQ6ZnVuY3Rpb24oRyxKKXt2YXIgRjt2YXIgRT1DLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF07dmFyIEk9Qy5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO0kuc2V0QXR0cmlidXRlKCJ0eXBlIiwidGV4dC9jc3MiKTtpZihKKXtJLnNldEF0dHJpYnV0ZSgiaWQiLEopfWlmKEV4dC5pc0lFKXtFLmFwcGVuZENoaWxkKEkpO0Y9SS5zdHlsZVNoZWV0O0YuY3NzVGV4dD1HfWVsc2V7dHJ5e0kuYXBwZW5kQ2hpbGQoQy5jcmVhdGVUZXh0Tm9kZShHKSl9Y2F0Y2goSCl7SS5jc3NUZXh0PUd9RS5hcHBlbmRDaGlsZChJKTtGPUkuc3R5bGVTaGVldD9JLnN0eWxlU2hlZXQ6KEkuc2hlZXR8fEMuc3R5bGVTaGVldHNbQy5zdHlsZVNoZWV0cy5sZW5ndGgtMV0pfXRoaXMuY2FjaGVTdHlsZVNoZWV0KEYpO3JldHVybiBGfSxyZW1vdmVTdHlsZVNoZWV0OmZ1bmN0aW9uKEYpe3ZhciBFPUMuZ2V0RWxlbWVudEJ5SWQoRik7aWYoRSl7RS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKEUpfX0sc3dhcFN0eWxlU2hlZXQ6ZnVuY3Rpb24oRyxFKXt0aGlzLnJlbW92ZVN0eWxlU2hlZXQoRyk7dmFyIEY9Qy5jcmVhdGVFbGVtZW50KCJsaW5rIik7Ri5zZXRBdHRyaWJ1dGUoInJlbCIsInN0eWxlc2hlZXQiKTtGLnNldEF0dHJpYnV0ZSgidHlwZSIsInRleHQvY3NzIik7Ri5zZXRBdHRyaWJ1dGUoImlkIixHKTtGLnNldEF0dHJpYnV0ZSgiaHJlZiIsRSk7Qy5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdLmFwcGVuZENoaWxkKEYpfSxyZWZyZXNoQ2FjaGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRSdWxlcyh0cnVlKX0sY2FjaGVTdHlsZVNoZWV0OmZ1bmN0aW9uKEYpe2lmKCFEKXtEPXt9fXRyeXt2YXIgSD1GLmNzc1J1bGVzfHxGLnJ1bGVzO2Zvcih2YXIgRT1ILmxlbmd0aC0xO0U+PTA7LS1FKXtEW0hbRV0uc2VsZWN0b3JUZXh0XT1IW0VdfX1jYXRjaChHKXt9fSxnZXRSdWxlczpmdW5jdGlvbihGKXtpZihEPT1udWxsfHxGKXtEPXt9O3ZhciBIPUMuc3R5bGVTaGVldHM7Zm9yKHZhciBHPTAsRT1ILmxlbmd0aDtHPEU7RysrKXt0cnl7dGhpcy5jYWNoZVN0eWxlU2hlZXQoSFtHXSl9Y2F0Y2goSSl7fX19cmV0dXJuIER9LGdldFJ1bGU6ZnVuY3Rpb24oRSxHKXt2YXIgRj10aGlzLmdldFJ1bGVzKEcpO2lmKCFFeHQuaXNBcnJheShFKSl7cmV0dXJuIEZbRV19Zm9yKHZhciBIPTA7SDxFLmxlbmd0aDtIKyspe2lmKEZbRVtIXV0pe3JldHVybiBGW0VbSF1dfX1yZXR1cm4gbnVsbH0sdXBkYXRlUnVsZTpmdW5jdGlvbihFLEgsRyl7aWYoIUV4dC5pc0FycmF5KEUpKXt2YXIgST10aGlzLmdldFJ1bGUoRSk7aWYoSSl7SS5zdHlsZVtILnJlcGxhY2UoQixBKV09RztyZXR1cm4gdHJ1ZX19ZWxzZXtmb3IodmFyIEY9MDtGPEUubGVuZ3RoO0YrKyl7aWYodGhpcy51cGRhdGVSdWxlKEVbRl0sSCxHKSl7cmV0dXJuIHRydWV9fX1yZXR1cm4gZmFsc2V9fX0oKTsNCkV4dC51dGlsLkNsaWNrUmVwZWF0ZXI9ZnVuY3Rpb24oQixBKXt0aGlzLmVsPUV4dC5nZXQoQik7dGhpcy5lbC51bnNlbGVjdGFibGUoKTtFeHQuYXBwbHkodGhpcyxBKTt0aGlzLmFkZEV2ZW50cygibW91c2Vkb3duIiwiY2xpY2siLCJtb3VzZXVwIik7dGhpcy5lbC5vbigibW91c2Vkb3duIix0aGlzLmhhbmRsZU1vdXNlRG93bix0aGlzKTtpZih0aGlzLnByZXZlbnREZWZhdWx0fHx0aGlzLnN0b3BEZWZhdWx0KXt0aGlzLmVsLm9uKCJjbGljayIsZnVuY3Rpb24oQyl7aWYodGhpcy5wcmV2ZW50RGVmYXVsdCl7Qy5wcmV2ZW50RGVmYXVsdCgpfWlmKHRoaXMuc3RvcERlZmF1bHQpe0Muc3RvcEV2ZW50KCl9fSx0aGlzKX1pZih0aGlzLmhhbmRsZXIpe3RoaXMub24oImNsaWNrIix0aGlzLmhhbmRsZXIsdGhpcy5zY29wZXx8dGhpcyl9RXh0LnV0aWwuQ2xpY2tSZXBlYXRlci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyl9O0V4dC5leHRlbmQoRXh0LnV0aWwuQ2xpY2tSZXBlYXRlcixFeHQudXRpbC5PYnNlcnZhYmxlLHtpbnRlcnZhbDoyMCxkZWxheToyNTAscHJldmVudERlZmF1bHQ6dHJ1ZSxzdG9wRGVmYXVsdDpmYWxzZSx0aW1lcjowLGhhbmRsZU1vdXNlRG93bjpmdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aGlzLnRpbWVyKTt0aGlzLmVsLmJsdXIoKTtpZih0aGlzLnByZXNzQ2xhc3Mpe3RoaXMuZWwuYWRkQ2xhc3ModGhpcy5wcmVzc0NsYXNzKX10aGlzLm1vdXNlZG93blRpbWU9bmV3IERhdGUoKTtFeHQuZ2V0RG9jKCkub24oIm1vdXNldXAiLHRoaXMuaGFuZGxlTW91c2VVcCx0aGlzKTt0aGlzLmVsLm9uKCJtb3VzZW91dCIsdGhpcy5oYW5kbGVNb3VzZU91dCx0aGlzKTt0aGlzLmZpcmVFdmVudCgibW91c2Vkb3duIix0aGlzKTt0aGlzLmZpcmVFdmVudCgiY2xpY2siLHRoaXMpO2lmKHRoaXMuYWNjZWxlcmF0ZSl7dGhpcy5kZWxheT00MDB9dGhpcy50aW1lcj10aGlzLmNsaWNrLmRlZmVyKHRoaXMuZGVsYXl8fHRoaXMuaW50ZXJ2YWwsdGhpcyl9LGNsaWNrOmZ1bmN0aW9uKCl7dGhpcy5maXJlRXZlbnQoImNsaWNrIix0aGlzKTt0aGlzLnRpbWVyPXRoaXMuY2xpY2suZGVmZXIodGhpcy5hY2NlbGVyYXRlP3RoaXMuZWFzZU91dEV4cG8odGhpcy5tb3VzZWRvd25UaW1lLmdldEVsYXBzZWQoKSw0MDAsLTM5MCwxMjAwMCk6dGhpcy5pbnRlcnZhbCx0aGlzKX0sZWFzZU91dEV4cG86ZnVuY3Rpb24oQixBLEQsQyl7cmV0dXJuKEI9PUMpP0ErRDpEKigtTWF0aC5wb3coMiwtMTAqQi9DKSsxKStBfSxoYW5kbGVNb3VzZU91dDpmdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aGlzLnRpbWVyKTtpZih0aGlzLnByZXNzQ2xhc3Mpe3RoaXMuZWwucmVtb3ZlQ2xhc3ModGhpcy5wcmVzc0NsYXNzKX10aGlzLmVsLm9uKCJtb3VzZW92ZXIiLHRoaXMuaGFuZGxlTW91c2VSZXR1cm4sdGhpcyl9LGhhbmRsZU1vdXNlUmV0dXJuOmZ1bmN0aW9uKCl7dGhpcy5lbC51bigibW91c2VvdmVyIix0aGlzLmhhbmRsZU1vdXNlUmV0dXJuKTtpZih0aGlzLnByZXNzQ2xhc3Mpe3RoaXMuZWwuYWRkQ2xhc3ModGhpcy5wcmVzc0NsYXNzKX10aGlzLmNsaWNrKCl9LGhhbmRsZU1vdXNlVXA6ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy50aW1lcik7dGhpcy5lbC51bigibW91c2VvdmVyIix0aGlzLmhhbmRsZU1vdXNlUmV0dXJuKTt0aGlzLmVsLnVuKCJtb3VzZW91dCIsdGhpcy5oYW5kbGVNb3VzZU91dCk7RXh0LmdldERvYygpLnVuKCJtb3VzZXVwIix0aGlzLmhhbmRsZU1vdXNlVXApO3RoaXMuZWwucmVtb3ZlQ2xhc3ModGhpcy5wcmVzc0NsYXNzKTt0aGlzLmZpcmVFdmVudCgibW91c2V1cCIsdGhpcyl9fSk7DQpFeHQuS2V5TmF2PWZ1bmN0aW9uKEIsQSl7dGhpcy5lbD1FeHQuZ2V0KEIpO0V4dC5hcHBseSh0aGlzLEEpO2lmKCF0aGlzLmRpc2FibGVkKXt0aGlzLmRpc2FibGVkPXRydWU7dGhpcy5lbmFibGUoKX19O0V4dC5LZXlOYXYucHJvdG90eXBlPXtkaXNhYmxlZDpmYWxzZSxkZWZhdWx0RXZlbnRBY3Rpb246InN0b3BFdmVudCIsZm9yY2VLZXlEb3duOmZhbHNlLHByZXBhcmVFdmVudDpmdW5jdGlvbihDKXt2YXIgQT1DLmdldEtleSgpO3ZhciBCPXRoaXMua2V5VG9IYW5kbGVyW0FdO2lmKEV4dC5pc1NhZmFyaSYmQiYmQT49MzcmJkE8PTQwKXtDLnN0b3BFdmVudCgpfX0scmVsYXk6ZnVuY3Rpb24oQyl7dmFyIEE9Qy5nZXRLZXkoKTt2YXIgQj10aGlzLmtleVRvSGFuZGxlcltBXTtpZihCJiZ0aGlzW0JdKXtpZih0aGlzLmRvUmVsYXkoQyx0aGlzW0JdLEIpIT09dHJ1ZSl7Q1t0aGlzLmRlZmF1bHRFdmVudEFjdGlvbl0oKX19fSxkb1JlbGF5OmZ1bmN0aW9uKEMsQixBKXtyZXR1cm4gQi5jYWxsKHRoaXMuc2NvcGV8fHRoaXMsQyl9LGVudGVyOmZhbHNlLGxlZnQ6ZmFsc2UscmlnaHQ6ZmFsc2UsdXA6ZmFsc2UsZG93bjpmYWxzZSx0YWI6ZmFsc2UsZXNjOmZhbHNlLHBhZ2VVcDpmYWxzZSxwYWdlRG93bjpmYWxzZSxkZWw6ZmFsc2UsaG9tZTpmYWxzZSxlbmQ6ZmFsc2Usa2V5VG9IYW5kbGVyOnszNzoibGVmdCIsMzk6InJpZ2h0IiwzODoidXAiLDQwOiJkb3duIiwzMzoicGFnZVVwIiwzNDoicGFnZURvd24iLDQ2OiJkZWwiLDM2OiJob21lIiwzNToiZW5kIiwxMzoiZW50ZXIiLDI3OiJlc2MiLDk6InRhYiJ9LGVuYWJsZTpmdW5jdGlvbigpe2lmKHRoaXMuZGlzYWJsZWQpe2lmKHRoaXMuZm9yY2VLZXlEb3dufHxFeHQuaXNJRXx8RXh0LmlzQWlyKXt0aGlzLmVsLm9uKCJrZXlkb3duIix0aGlzLnJlbGF5LHRoaXMpfWVsc2V7dGhpcy5lbC5vbigia2V5ZG93biIsdGhpcy5wcmVwYXJlRXZlbnQsdGhpcyk7dGhpcy5lbC5vbigia2V5cHJlc3MiLHRoaXMucmVsYXksdGhpcyl9dGhpcy5kaXNhYmxlZD1mYWxzZX19LGRpc2FibGU6ZnVuY3Rpb24oKXtpZighdGhpcy5kaXNhYmxlZCl7aWYodGhpcy5mb3JjZUtleURvd258fEV4dC5pc0lFfHxFeHQuaXNBaXIpe3RoaXMuZWwudW4oImtleWRvd24iLHRoaXMucmVsYXkpfWVsc2V7dGhpcy5lbC51bigia2V5ZG93biIsdGhpcy5wcmVwYXJlRXZlbnQpO3RoaXMuZWwudW4oImtleXByZXNzIix0aGlzLnJlbGF5KX10aGlzLmRpc2FibGVkPXRydWV9fX07DQpFeHQuS2V5TWFwPWZ1bmN0aW9uKEMsQixBKXt0aGlzLmVsPUV4dC5nZXQoQyk7dGhpcy5ldmVudE5hbWU9QXx8ImtleWRvd24iO3RoaXMuYmluZGluZ3M9W107aWYoQil7dGhpcy5hZGRCaW5kaW5nKEIpfXRoaXMuZW5hYmxlKCl9O0V4dC5LZXlNYXAucHJvdG90eXBlPXtzdG9wRXZlbnQ6ZmFsc2UsYWRkQmluZGluZzpmdW5jdGlvbihEKXtpZihFeHQuaXNBcnJheShEKSl7Zm9yKHZhciBGPTAsSD1ELmxlbmd0aDtGPEg7RisrKXt0aGlzLmFkZEJpbmRpbmcoRFtGXSl9cmV0dXJuIH12YXIgTj1ELmtleSxDPUQuc2hpZnQsQT1ELmN0cmwsRz1ELmFsdCxKPUQuZm58fEQuaGFuZGxlcixNPUQuc2NvcGU7aWYodHlwZW9mIE49PSJzdHJpbmciKXt2YXIgSz1bXTt2YXIgST1OLnRvVXBwZXJDYXNlKCk7Zm9yKHZhciBFPTAsSD1JLmxlbmd0aDtFPEg7RSsrKXtLLnB1c2goSS5jaGFyQ29kZUF0KEUpKX1OPUt9dmFyIEI9RXh0LmlzQXJyYXkoTik7dmFyIEw9ZnVuY3Rpb24oUil7aWYoKCFDfHxSLnNoaWZ0S2V5KSYmKCFBfHxSLmN0cmxLZXkpJiYoIUd8fFIuYWx0S2V5KSl7dmFyIFA9Ui5nZXRLZXkoKTtpZihCKXtmb3IodmFyIFE9MCxPPU4ubGVuZ3RoO1E8TztRKyspe2lmKE5bUV09PVApe2lmKHRoaXMuc3RvcEV2ZW50KXtSLnN0b3BFdmVudCgpfUouY2FsbChNfHx3aW5kb3csUCxSKTtyZXR1cm4gfX19ZWxzZXtpZihQPT1OKXtpZih0aGlzLnN0b3BFdmVudCl7Ui5zdG9wRXZlbnQoKX1KLmNhbGwoTXx8d2luZG93LFAsUil9fX19O3RoaXMuYmluZGluZ3MucHVzaChMKX0sb246ZnVuY3Rpb24oQixELEMpe3ZhciBHLEEsRSxGO2lmKHR5cGVvZiBCPT0ib2JqZWN0IiYmIUV4dC5pc0FycmF5KEIpKXtHPUIua2V5O0E9Qi5zaGlmdDtFPUIuY3RybDtGPUIuYWx0fWVsc2V7Rz1CfXRoaXMuYWRkQmluZGluZyh7a2V5Okcsc2hpZnQ6QSxjdHJsOkUsYWx0OkYsZm46RCxzY29wZTpDfSl9LGhhbmRsZUtleURvd246ZnVuY3Rpb24oRCl7aWYodGhpcy5lbmFibGVkKXt2YXIgQj10aGlzLmJpbmRpbmdzO2Zvcih2YXIgQz0wLEE9Qi5sZW5ndGg7QzxBO0MrKyl7QltDXS5jYWxsKHRoaXMsRCl9fX0saXNFbmFibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW5hYmxlZH0sZW5hYmxlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuZW5hYmxlZCl7dGhpcy5lbC5vbih0aGlzLmV2ZW50TmFtZSx0aGlzLmhhbmRsZUtleURvd24sdGhpcyk7dGhpcy5lbmFibGVkPXRydWV9fSxkaXNhYmxlOmZ1bmN0aW9uKCl7aWYodGhpcy5lbmFibGVkKXt0aGlzLmVsLnJlbW92ZUxpc3RlbmVyKHRoaXMuZXZlbnROYW1lLHRoaXMuaGFuZGxlS2V5RG93bix0aGlzKTt0aGlzLmVuYWJsZWQ9ZmFsc2V9fX07DQpFeHQudXRpbC5UZXh0TWV0cmljcz1mdW5jdGlvbigpe3ZhciBBO3JldHVybnttZWFzdXJlOmZ1bmN0aW9uKEIsQyxEKXtpZighQSl7QT1FeHQudXRpbC5UZXh0TWV0cmljcy5JbnN0YW5jZShCLEQpfUEuYmluZChCKTtBLnNldEZpeGVkV2lkdGgoRHx8ImF1dG8iKTtyZXR1cm4gQS5nZXRTaXplKEMpfSxjcmVhdGVJbnN0YW5jZTpmdW5jdGlvbihCLEMpe3JldHVybiBFeHQudXRpbC5UZXh0TWV0cmljcy5JbnN0YW5jZShCLEMpfX19KCk7RXh0LnV0aWwuVGV4dE1ldHJpY3MuSW5zdGFuY2U9ZnVuY3Rpb24oQixEKXt2YXIgQz1uZXcgRXh0LkVsZW1lbnQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikpO2RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoQy5kb20pO0MucG9zaXRpb24oImFic29sdXRlIik7Qy5zZXRMZWZ0VG9wKC0xMDAwLC0xMDAwKTtDLmhpZGUoKTtpZihEKXtDLnNldFdpZHRoKEQpfXZhciBBPXtnZXRTaXplOmZ1bmN0aW9uKEYpe0MudXBkYXRlKEYpO3ZhciBFPUMuZ2V0U2l6ZSgpO0MudXBkYXRlKCIiKTtyZXR1cm4gRX0sYmluZDpmdW5jdGlvbihFKXtDLnNldFN0eWxlKEV4dC5mbHkoRSkuZ2V0U3R5bGVzKCJmb250LXNpemUiLCJmb250LXN0eWxlIiwiZm9udC13ZWlnaHQiLCJmb250LWZhbWlseSIsImxpbmUtaGVpZ2h0IikpfSxzZXRGaXhlZFdpZHRoOmZ1bmN0aW9uKEUpe0Muc2V0V2lkdGgoRSl9LGdldFdpZHRoOmZ1bmN0aW9uKEUpe0MuZG9tLnN0eWxlLndpZHRoPSJhdXRvIjtyZXR1cm4gdGhpcy5nZXRTaXplKEUpLndpZHRofSxnZXRIZWlnaHQ6ZnVuY3Rpb24oRSl7cmV0dXJuIHRoaXMuZ2V0U2l6ZShFKS5oZWlnaHR9fTtBLmJpbmQoQik7cmV0dXJuIEF9O0V4dC5FbGVtZW50Lm1lYXN1cmVUZXh0PUV4dC51dGlsLlRleHRNZXRyaWNzLm1lYXN1cmU7DQooZnVuY3Rpb24oKXt2YXIgQT1FeHQuRXZlbnRNYW5hZ2VyO3ZhciBCPUV4dC5saWIuRG9tO0V4dC5kZC5EcmFnRHJvcD1mdW5jdGlvbihFLEMsRCl7aWYoRSl7dGhpcy5pbml0KEUsQyxEKX19O0V4dC5kZC5EcmFnRHJvcC5wcm90b3R5cGU9e2lkOm51bGwsY29uZmlnOm51bGwsZHJhZ0VsSWQ6bnVsbCxoYW5kbGVFbElkOm51bGwsaW52YWxpZEhhbmRsZVR5cGVzOm51bGwsaW52YWxpZEhhbmRsZUlkczpudWxsLGludmFsaWRIYW5kbGVDbGFzc2VzOm51bGwsc3RhcnRQYWdlWDowLHN0YXJ0UGFnZVk6MCxncm91cHM6bnVsbCxsb2NrZWQ6ZmFsc2UsbG9jazpmdW5jdGlvbigpe3RoaXMubG9ja2VkPXRydWV9LHVubG9jazpmdW5jdGlvbigpe3RoaXMubG9ja2VkPWZhbHNlfSxpc1RhcmdldDp0cnVlLHBhZGRpbmc6bnVsbCxfZG9tUmVmOm51bGwsX195Z0RyYWdEcm9wOnRydWUsY29uc3RyYWluWDpmYWxzZSxjb25zdHJhaW5ZOmZhbHNlLG1pblg6MCxtYXhYOjAsbWluWTowLG1heFk6MCxtYWludGFpbk9mZnNldDpmYWxzZSx4VGlja3M6bnVsbCx5VGlja3M6bnVsbCxwcmltYXJ5QnV0dG9uT25seTp0cnVlLGF2YWlsYWJsZTpmYWxzZSxoYXNPdXRlckhhbmRsZXM6ZmFsc2UsYjRTdGFydERyYWc6ZnVuY3Rpb24oQyxEKXt9LHN0YXJ0RHJhZzpmdW5jdGlvbihDLEQpe30sYjREcmFnOmZ1bmN0aW9uKEMpe30sb25EcmFnOmZ1bmN0aW9uKEMpe30sb25EcmFnRW50ZXI6ZnVuY3Rpb24oQyxEKXt9LGI0RHJhZ092ZXI6ZnVuY3Rpb24oQyl7fSxvbkRyYWdPdmVyOmZ1bmN0aW9uKEMsRCl7fSxiNERyYWdPdXQ6ZnVuY3Rpb24oQyl7fSxvbkRyYWdPdXQ6ZnVuY3Rpb24oQyxEKXt9LGI0RHJhZ0Ryb3A6ZnVuY3Rpb24oQyl7fSxvbkRyYWdEcm9wOmZ1bmN0aW9uKEMsRCl7fSxvbkludmFsaWREcm9wOmZ1bmN0aW9uKEMpe30sYjRFbmREcmFnOmZ1bmN0aW9uKEMpe30sZW5kRHJhZzpmdW5jdGlvbihDKXt9LGI0TW91c2VEb3duOmZ1bmN0aW9uKEMpe30sb25Nb3VzZURvd246ZnVuY3Rpb24oQyl7fSxvbk1vdXNlVXA6ZnVuY3Rpb24oQyl7fSxvbkF2YWlsYWJsZTpmdW5jdGlvbigpe30sZGVmYXVsdFBhZGRpbmc6e2xlZnQ6MCxyaWdodDowLHRvcDowLGJvdHRvbTowfSxjb25zdHJhaW5UbzpmdW5jdGlvbihILEYsTSl7aWYodHlwZW9mIEY9PSJudW1iZXIiKXtGPXtsZWZ0OkYscmlnaHQ6Rix0b3A6Rixib3R0b206Rn19Rj1GfHx0aGlzLmRlZmF1bHRQYWRkaW5nO3ZhciBKPUV4dC5nZXQodGhpcy5nZXRFbCgpKS5nZXRCb3goKTt2YXIgQz1FeHQuZ2V0KEgpO3ZhciBMPUMuZ2V0U2Nyb2xsKCk7dmFyIEksRD1DLmRvbTtpZihEPT1kb2N1bWVudC5ib2R5KXtJPXt4OkwubGVmdCx5OkwudG9wLHdpZHRoOkV4dC5saWIuRG9tLmdldFZpZXdXaWR0aCgpLGhlaWdodDpFeHQubGliLkRvbS5nZXRWaWV3SGVpZ2h0KCl9fWVsc2V7dmFyIEs9Qy5nZXRYWSgpO0k9e3g6S1swXStMLmxlZnQseTpLWzFdK0wudG9wLHdpZHRoOkQuY2xpZW50V2lkdGgsaGVpZ2h0OkQuY2xpZW50SGVpZ2h0fX12YXIgRz1KLnktSS55O3ZhciBFPUoueC1JLng7dGhpcy5yZXNldENvbnN0cmFpbnRzKCk7dGhpcy5zZXRYQ29uc3RyYWludChFLShGLmxlZnR8fDApLEkud2lkdGgtRS1KLndpZHRoLShGLnJpZ2h0fHwwKSx0aGlzLnhUaWNrU2l6ZSk7dGhpcy5zZXRZQ29uc3RyYWludChHLShGLnRvcHx8MCksSS5oZWlnaHQtRy1KLmhlaWdodC0oRi5ib3R0b218fDApLHRoaXMueVRpY2tTaXplKX0sZ2V0RWw6ZnVuY3Rpb24oKXtpZighdGhpcy5fZG9tUmVmKXt0aGlzLl9kb21SZWY9RXh0LmdldERvbSh0aGlzLmlkKX1yZXR1cm4gdGhpcy5fZG9tUmVmfSxnZXREcmFnRWw6ZnVuY3Rpb24oKXtyZXR1cm4gRXh0LmdldERvbSh0aGlzLmRyYWdFbElkKX0saW5pdDpmdW5jdGlvbihFLEMsRCl7dGhpcy5pbml0VGFyZ2V0KEUsQyxEKTtBLm9uKHRoaXMuaWQsIm1vdXNlZG93biIsdGhpcy5oYW5kbGVNb3VzZURvd24sdGhpcyl9LGluaXRUYXJnZXQ6ZnVuY3Rpb24oRSxDLEQpe3RoaXMuY29uZmlnPUR8fHt9O3RoaXMuRERNPUV4dC5kZC5ERE07dGhpcy5ncm91cHM9e307aWYodHlwZW9mIEUhPT0ic3RyaW5nIil7RT1FeHQuaWQoRSl9dGhpcy5pZD1FO3RoaXMuYWRkVG9Hcm91cCgoQyk/QzoiZGVmYXVsdCIpO3RoaXMuaGFuZGxlRWxJZD1FO3RoaXMuc2V0RHJhZ0VsSWQoRSk7dGhpcy5pbnZhbGlkSGFuZGxlVHlwZXM9e0E6IkEifTt0aGlzLmludmFsaWRIYW5kbGVJZHM9e307dGhpcy5pbnZhbGlkSGFuZGxlQ2xhc3Nlcz1bXTt0aGlzLmFwcGx5Q29uZmlnKCk7dGhpcy5oYW5kbGVPbkF2YWlsYWJsZSgpfSxhcHBseUNvbmZpZzpmdW5jdGlvbigpe3RoaXMucGFkZGluZz10aGlzLmNvbmZpZy5wYWRkaW5nfHxbMCwwLDAsMF07dGhpcy5pc1RhcmdldD0odGhpcy5jb25maWcuaXNUYXJnZXQhPT1mYWxzZSk7dGhpcy5tYWludGFpbk9mZnNldD0odGhpcy5jb25maWcubWFpbnRhaW5PZmZzZXQpO3RoaXMucHJpbWFyeUJ1dHRvbk9ubHk9KHRoaXMuY29uZmlnLnByaW1hcnlCdXR0b25Pbmx5IT09ZmFsc2UpfSxoYW5kbGVPbkF2YWlsYWJsZTpmdW5jdGlvbigpe3RoaXMuYXZhaWxhYmxlPXRydWU7dGhpcy5yZXNldENvbnN0cmFpbnRzKCk7dGhpcy5vbkF2YWlsYWJsZSgpfSxzZXRQYWRkaW5nOmZ1bmN0aW9uKEUsQyxGLEQpe2lmKCFDJiYwIT09Qyl7dGhpcy5wYWRkaW5nPVtFLEUsRSxFXX1lbHNle2lmKCFGJiYwIT09Ril7dGhpcy5wYWRkaW5nPVtFLEMsRSxDXX1lbHNle3RoaXMucGFkZGluZz1bRSxDLEYsRF19fX0sc2V0SW5pdFBvc2l0aW9uOmZ1bmN0aW9uKEYsRSl7dmFyIEc9dGhpcy5nZXRFbCgpO2lmKCF0aGlzLkRETS52ZXJpZnlFbChHKSl7cmV0dXJuIH12YXIgRD1GfHwwO3ZhciBDPUV8fDA7dmFyIEg9Qi5nZXRYWShHKTt0aGlzLmluaXRQYWdlWD1IWzBdLUQ7dGhpcy5pbml0UGFnZVk9SFsxXS1DO3RoaXMubGFzdFBhZ2VYPUhbMF07dGhpcy5sYXN0UGFnZVk9SFsxXTt0aGlzLnNldFN0YXJ0UG9zaXRpb24oSCl9LHNldFN0YXJ0UG9zaXRpb246ZnVuY3Rpb24oRCl7dmFyIEM9RHx8Qi5nZXRYWSh0aGlzLmdldEVsKCkpO3RoaXMuZGVsdGFTZXRYWT1udWxsO3RoaXMuc3RhcnRQYWdlWD1DWzBdO3RoaXMuc3RhcnRQYWdlWT1DWzFdfSxhZGRUb0dyb3VwOmZ1bmN0aW9uKEMpe3RoaXMuZ3JvdXBzW0NdPXRydWU7dGhpcy5ERE0ucmVnRHJhZ0Ryb3AodGhpcyxDKX0scmVtb3ZlRnJvbUdyb3VwOmZ1bmN0aW9uKEMpe2lmKHRoaXMuZ3JvdXBzW0NdKXtkZWxldGUgdGhpcy5ncm91cHNbQ119dGhpcy5ERE0ucmVtb3ZlRERGcm9tR3JvdXAodGhpcyxDKX0sc2V0RHJhZ0VsSWQ6ZnVuY3Rpb24oQyl7dGhpcy5kcmFnRWxJZD1DfSxzZXRIYW5kbGVFbElkOmZ1bmN0aW9uKEMpe2lmKHR5cGVvZiBDIT09InN0cmluZyIpe0M9RXh0LmlkKEMpfXRoaXMuaGFuZGxlRWxJZD1DO3RoaXMuRERNLnJlZ0hhbmRsZSh0aGlzLmlkLEMpfSxzZXRPdXRlckhhbmRsZUVsSWQ6ZnVuY3Rpb24oQyl7aWYodHlwZW9mIEMhPT0ic3RyaW5nIil7Qz1FeHQuaWQoQyl9QS5vbihDLCJtb3VzZWRvd24iLHRoaXMuaGFuZGxlTW91c2VEb3duLHRoaXMpO3RoaXMuc2V0SGFuZGxlRWxJZChDKTt0aGlzLmhhc091dGVySGFuZGxlcz10cnVlfSx1bnJlZzpmdW5jdGlvbigpe0EudW4odGhpcy5pZCwibW91c2Vkb3duIix0aGlzLmhhbmRsZU1vdXNlRG93bik7dGhpcy5fZG9tUmVmPW51bGw7dGhpcy5ERE0uX3JlbW92ZSh0aGlzKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMudW5yZWcoKX0saXNMb2NrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5ERE0uaXNMb2NrZWQoKXx8dGhpcy5sb2NrZWQpfSxoYW5kbGVNb3VzZURvd246ZnVuY3Rpb24oRSxEKXtpZih0aGlzLnByaW1hcnlCdXR0b25Pbmx5JiZFLmJ1dHRvbiE9MCl7cmV0dXJuIH1pZih0aGlzLmlzTG9ja2VkKCkpe3JldHVybiB9dGhpcy5ERE0ucmVmcmVzaENhY2hlKHRoaXMuZ3JvdXBzKTt2YXIgQz1uZXcgRXh0LmxpYi5Qb2ludChFeHQubGliLkV2ZW50LmdldFBhZ2VYKEUpLEV4dC5saWIuRXZlbnQuZ2V0UGFnZVkoRSkpO2lmKCF0aGlzLmhhc091dGVySGFuZGxlcyYmIXRoaXMuRERNLmlzT3ZlclRhcmdldChDLHRoaXMpKXt9ZWxzZXtpZih0aGlzLmNsaWNrVmFsaWRhdG9yKEUpKXt0aGlzLnNldFN0YXJ0UG9zaXRpb24oKTt0aGlzLmI0TW91c2VEb3duKEUpO3RoaXMub25Nb3VzZURvd24oRSk7dGhpcy5ERE0uaGFuZGxlTW91c2VEb3duKEUsdGhpcyk7dGhpcy5ERE0uc3RvcEV2ZW50KEUpfWVsc2V7fX19LGNsaWNrVmFsaWRhdG9yOmZ1bmN0aW9uKEQpe3ZhciBDPUQuZ2V0VGFyZ2V0KCk7cmV0dXJuKHRoaXMuaXNWYWxpZEhhbmRsZUNoaWxkKEMpJiYodGhpcy5pZD09dGhpcy5oYW5kbGVFbElkfHx0aGlzLkRETS5oYW5kbGVXYXNDbGlja2VkKEMsdGhpcy5pZCkpKX0sYWRkSW52YWxpZEhhbmRsZVR5cGU6ZnVuY3Rpb24oQyl7dmFyIEQ9Qy50b1VwcGVyQ2FzZSgpO3RoaXMuaW52YWxpZEhhbmRsZVR5cGVzW0RdPUR9LGFkZEludmFsaWRIYW5kbGVJZDpmdW5jdGlvbihDKXtpZih0eXBlb2YgQyE9PSJzdHJpbmciKXtDPUV4dC5pZChDKX10aGlzLmludmFsaWRIYW5kbGVJZHNbQ109Q30sYWRkSW52YWxpZEhhbmRsZUNsYXNzOmZ1bmN0aW9uKEMpe3RoaXMuaW52YWxpZEhhbmRsZUNsYXNzZXMucHVzaChDKX0scmVtb3ZlSW52YWxpZEhhbmRsZVR5cGU6ZnVuY3Rpb24oQyl7dmFyIEQ9Qy50b1VwcGVyQ2FzZSgpO2RlbGV0ZSB0aGlzLmludmFsaWRIYW5kbGVUeXBlc1tEXX0scmVtb3ZlSW52YWxpZEhhbmRsZUlkOmZ1bmN0aW9uKEMpe2lmKHR5cGVvZiBDIT09InN0cmluZyIpe0M9RXh0LmlkKEMpfWRlbGV0ZSB0aGlzLmludmFsaWRIYW5kbGVJZHNbQ119LHJlbW92ZUludmFsaWRIYW5kbGVDbGFzczpmdW5jdGlvbihEKXtmb3IodmFyIEU9MCxDPXRoaXMuaW52YWxpZEhhbmRsZUNsYXNzZXMubGVuZ3RoO0U8QzsrK0Upe2lmKHRoaXMuaW52YWxpZEhhbmRsZUNsYXNzZXNbRV09PUQpe2RlbGV0ZSB0aGlzLmludmFsaWRIYW5kbGVDbGFzc2VzW0VdfX19LGlzVmFsaWRIYW5kbGVDaGlsZDpmdW5jdGlvbihGKXt2YXIgRT10cnVlO3ZhciBIO3RyeXtIPUYubm9kZU5hbWUudG9VcHBlckNhc2UoKX1jYXRjaChHKXtIPUYubm9kZU5hbWV9RT1FJiYhdGhpcy5pbnZhbGlkSGFuZGxlVHlwZXNbSF07RT1FJiYhdGhpcy5pbnZhbGlkSGFuZGxlSWRzW0YuaWRdO2Zvcih2YXIgRD0wLEM9dGhpcy5pbnZhbGlkSGFuZGxlQ2xhc3Nlcy5sZW5ndGg7RSYmRDxDOysrRCl7RT0hQi5oYXNDbGFzcyhGLHRoaXMuaW52YWxpZEhhbmRsZUNsYXNzZXNbRF0pfXJldHVybiBFfSxzZXRYVGlja3M6ZnVuY3Rpb24oRixDKXt0aGlzLnhUaWNrcz1bXTt0aGlzLnhUaWNrU2l6ZT1DO3ZhciBFPXt9O2Zvcih2YXIgRD10aGlzLmluaXRQYWdlWDtEPj10aGlzLm1pblg7RD1ELUMpe2lmKCFFW0RdKXt0aGlzLnhUaWNrc1t0aGlzLnhUaWNrcy5sZW5ndGhdPUQ7RVtEXT10cnVlfX1mb3IoRD10aGlzLmluaXRQYWdlWDtEPD10aGlzLm1heFg7RD1EK0Mpe2lmKCFFW0RdKXt0aGlzLnhUaWNrc1t0aGlzLnhUaWNrcy5sZW5ndGhdPUQ7RVtEXT10cnVlfX10aGlzLnhUaWNrcy5zb3J0KHRoaXMuRERNLm51bWVyaWNTb3J0KX0sc2V0WVRpY2tzOmZ1bmN0aW9uKEYsQyl7dGhpcy55VGlja3M9W107dGhpcy55VGlja1NpemU9Qzt2YXIgRT17fTtmb3IodmFyIEQ9dGhpcy5pbml0UGFnZVk7RD49dGhpcy5taW5ZO0Q9RC1DKXtpZighRVtEXSl7dGhpcy55VGlja3NbdGhpcy55VGlja3MubGVuZ3RoXT1EO0VbRF09dHJ1ZX19Zm9yKEQ9dGhpcy5pbml0UGFnZVk7RDw9dGhpcy5tYXhZO0Q9RCtDKXtpZighRVtEXSl7dGhpcy55VGlja3NbdGhpcy55VGlja3MubGVuZ3RoXT1EO0VbRF09dHJ1ZX19dGhpcy55VGlja3Muc29ydCh0aGlzLkRETS5udW1lcmljU29ydCl9LHNldFhDb25zdHJhaW50OmZ1bmN0aW9uKEUsRCxDKXt0aGlzLmxlZnRDb25zdHJhaW50PUU7dGhpcy5yaWdodENvbnN0cmFpbnQ9RDt0aGlzLm1pblg9dGhpcy5pbml0UGFnZVgtRTt0aGlzLm1heFg9dGhpcy5pbml0UGFnZVgrRDtpZihDKXt0aGlzLnNldFhUaWNrcyh0aGlzLmluaXRQYWdlWCxDKX10aGlzLmNvbnN0cmFpblg9dHJ1ZX0sY2xlYXJDb25zdHJhaW50czpmdW5jdGlvbigpe3RoaXMuY29uc3RyYWluWD1mYWxzZTt0aGlzLmNvbnN0cmFpblk9ZmFsc2U7dGhpcy5jbGVhclRpY2tzKCl9LGNsZWFyVGlja3M6ZnVuY3Rpb24oKXt0aGlzLnhUaWNrcz1udWxsO3RoaXMueVRpY2tzPW51bGw7dGhpcy54VGlja1NpemU9MDt0aGlzLnlUaWNrU2l6ZT0wfSxzZXRZQ29uc3RyYWludDpmdW5jdGlvbihDLEUsRCl7dGhpcy50b3BDb25zdHJhaW50PUM7dGhpcy5ib3R0b21Db25zdHJhaW50PUU7dGhpcy5taW5ZPXRoaXMuaW5pdFBhZ2VZLUM7dGhpcy5tYXhZPXRoaXMuaW5pdFBhZ2VZK0U7aWYoRCl7dGhpcy5zZXRZVGlja3ModGhpcy5pbml0UGFnZVksRCl9dGhpcy5jb25zdHJhaW5ZPXRydWV9LHJlc2V0Q29uc3RyYWludHM6ZnVuY3Rpb24oKXtpZih0aGlzLmluaXRQYWdlWHx8dGhpcy5pbml0UGFnZVg9PT0wKXt2YXIgRD0odGhpcy5tYWludGFpbk9mZnNldCk/dGhpcy5sYXN0UGFnZVgtdGhpcy5pbml0UGFnZVg6MDt2YXIgQz0odGhpcy5tYWludGFpbk9mZnNldCk/dGhpcy5sYXN0UGFnZVktdGhpcy5pbml0UGFnZVk6MDt0aGlzLnNldEluaXRQb3NpdGlvbihELEMpfWVsc2V7dGhpcy5zZXRJbml0UG9zaXRpb24oKX1pZih0aGlzLmNvbnN0cmFpblgpe3RoaXMuc2V0WENvbnN0cmFpbnQodGhpcy5sZWZ0Q29uc3RyYWludCx0aGlzLnJpZ2h0Q29uc3RyYWludCx0aGlzLnhUaWNrU2l6ZSl9aWYodGhpcy5jb25zdHJhaW5ZKXt0aGlzLnNldFlDb25zdHJhaW50KHRoaXMudG9wQ29uc3RyYWludCx0aGlzLmJvdHRvbUNvbnN0cmFpbnQsdGhpcy55VGlja1NpemUpfX0sZ2V0VGljazpmdW5jdGlvbihJLEYpe2lmKCFGKXtyZXR1cm4gSX1lbHNle2lmKEZbMF0+PUkpe3JldHVybiBGWzBdfWVsc2V7Zm9yKHZhciBEPTAsQz1GLmxlbmd0aDtEPEM7KytEKXt2YXIgRT1EKzE7aWYoRltFXSYmRltFXT49SSl7dmFyIEg9SS1GW0RdO3ZhciBHPUZbRV0tSTtyZXR1cm4oRz5IKT9GW0RdOkZbRV19fXJldHVybiBGW0YubGVuZ3RoLTFdfX19LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuKCJEcmFnRHJvcCAiK3RoaXMuaWQpfX19KSgpO2lmKCFFeHQuZGQuRHJhZ0Ryb3BNZ3Ipe0V4dC5kZC5EcmFnRHJvcE1ncj1mdW5jdGlvbigpe3ZhciBBPUV4dC5FdmVudE1hbmFnZXI7cmV0dXJue2lkczp7fSxoYW5kbGVJZHM6e30sZHJhZ0N1cnJlbnQ6bnVsbCxkcmFnT3ZlcnM6e30sZGVsdGFYOjAsZGVsdGFZOjAscHJldmVudERlZmF1bHQ6dHJ1ZSxzdG9wUHJvcGFnYXRpb246dHJ1ZSxpbml0YWxpemVkOmZhbHNlLGxvY2tlZDpmYWxzZSxpbml0OmZ1bmN0aW9uKCl7dGhpcy5pbml0aWFsaXplZD10cnVlfSxQT0lOVDowLElOVEVSU0VDVDoxLG1vZGU6MCxfZXhlY09uQWxsOmZ1bmN0aW9uKEQsQyl7Zm9yKHZhciBFIGluIHRoaXMuaWRzKXtmb3IodmFyIEIgaW4gdGhpcy5pZHNbRV0pe3ZhciBGPXRoaXMuaWRzW0VdW0JdO2lmKCF0aGlzLmlzVHlwZU9mREQoRikpe2NvbnRpbnVlfUZbRF0uYXBwbHkoRixDKX19fSxfb25Mb2FkOmZ1bmN0aW9uKCl7dGhpcy5pbml0KCk7QS5vbihkb2N1bWVudCwibW91c2V1cCIsdGhpcy5oYW5kbGVNb3VzZVVwLHRoaXMsdHJ1ZSk7QS5vbihkb2N1bWVudCwibW91c2Vtb3ZlIix0aGlzLmhhbmRsZU1vdXNlTW92ZSx0aGlzLHRydWUpO0Eub24od2luZG93LCJ1bmxvYWQiLHRoaXMuX29uVW5sb2FkLHRoaXMsdHJ1ZSk7QS5vbih3aW5kb3csInJlc2l6ZSIsdGhpcy5fb25SZXNpemUsdGhpcyx0cnVlKX0sX29uUmVzaXplOmZ1bmN0aW9uKEIpe3RoaXMuX2V4ZWNPbkFsbCgicmVzZXRDb25zdHJhaW50cyIsW10pfSxsb2NrOmZ1bmN0aW9uKCl7dGhpcy5sb2NrZWQ9dHJ1ZX0sdW5sb2NrOmZ1bmN0aW9uKCl7dGhpcy5sb2NrZWQ9ZmFsc2V9LGlzTG9ja2VkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG9ja2VkfSxsb2NhdGlvbkNhY2hlOnt9LHVzZUNhY2hlOnRydWUsY2xpY2tQaXhlbFRocmVzaDozLGNsaWNrVGltZVRocmVzaDozNTAsZHJhZ1RocmVzaE1ldDpmYWxzZSxjbGlja1RpbWVvdXQ6bnVsbCxzdGFydFg6MCxzdGFydFk6MCxyZWdEcmFnRHJvcDpmdW5jdGlvbihDLEIpe2lmKCF0aGlzLmluaXRpYWxpemVkKXt0aGlzLmluaXQoKX1pZighdGhpcy5pZHNbQl0pe3RoaXMuaWRzW0JdPXt9fXRoaXMuaWRzW0JdW0MuaWRdPUN9LHJlbW92ZURERnJvbUdyb3VwOmZ1bmN0aW9uKEQsQil7aWYoIXRoaXMuaWRzW0JdKXt0aGlzLmlkc1tCXT17fX12YXIgQz10aGlzLmlkc1tCXTtpZihDJiZDW0QuaWRdKXtkZWxldGUgQ1tELmlkXX19LF9yZW1vdmU6ZnVuY3Rpb24oQyl7Zm9yKHZhciBCIGluIEMuZ3JvdXBzKXtpZihCJiZ0aGlzLmlkc1tCXVtDLmlkXSl7ZGVsZXRlIHRoaXMuaWRzW0JdW0MuaWRdfX1kZWxldGUgdGhpcy5oYW5kbGVJZHNbQy5pZF19LHJlZ0hhbmRsZTpmdW5jdGlvbihDLEIpe2lmKCF0aGlzLmhhbmRsZUlkc1tDXSl7dGhpcy5oYW5kbGVJZHNbQ109e319dGhpcy5oYW5kbGVJZHNbQ11bQl09Qn0saXNEcmFnRHJvcDpmdW5jdGlvbihCKXtyZXR1cm4odGhpcy5nZXREREJ5SWQoQikpP3RydWU6ZmFsc2V9LGdldFJlbGF0ZWQ6ZnVuY3Rpb24oRixDKXt2YXIgRT1bXTtmb3IodmFyIEQgaW4gRi5ncm91cHMpe2ZvcihqIGluIHRoaXMuaWRzW0RdKXt2YXIgQj10aGlzLmlkc1tEXVtqXTtpZighdGhpcy5pc1R5cGVPZkREKEIpKXtjb250aW51ZX1pZighQ3x8Qi5pc1RhcmdldCl7RVtFLmxlbmd0aF09Qn19fXJldHVybiBFfSxpc0xlZ2FsVGFyZ2V0OmZ1bmN0aW9uKEYsRSl7dmFyIEM9dGhpcy5nZXRSZWxhdGVkKEYsdHJ1ZSk7Zm9yKHZhciBEPTAsQj1DLmxlbmd0aDtEPEI7KytEKXtpZihDW0RdLmlkPT1FLmlkKXtyZXR1cm4gdHJ1ZX19cmV0dXJuIGZhbHNlfSxpc1R5cGVPZkREOmZ1bmN0aW9uKEIpe3JldHVybihCJiZCLl9feWdEcmFnRHJvcCl9LGlzSGFuZGxlOmZ1bmN0aW9uKEMsQil7cmV0dXJuKHRoaXMuaGFuZGxlSWRzW0NdJiZ0aGlzLmhhbmRsZUlkc1tDXVtCXSl9LGdldEREQnlJZDpmdW5jdGlvbihDKXtmb3IodmFyIEIgaW4gdGhpcy5pZHMpe2lmKHRoaXMuaWRzW0JdW0NdKXtyZXR1cm4gdGhpcy5pZHNbQl1bQ119fXJldHVybiBudWxsfSxoYW5kbGVNb3VzZURvd246ZnVuY3Rpb24oRCxDKXtpZihFeHQuUXVpY2tUaXBzKXtFeHQuUXVpY2tUaXBzLmRpc2FibGUoKX10aGlzLmN1cnJlbnRUYXJnZXQ9RC5nZXRUYXJnZXQoKTt0aGlzLmRyYWdDdXJyZW50PUM7dmFyIEI9Qy5nZXRFbCgpO3RoaXMuc3RhcnRYPUQuZ2V0UGFnZVgoKTt0aGlzLnN0YXJ0WT1ELmdldFBhZ2VZKCk7dGhpcy5kZWx0YVg9dGhpcy5zdGFydFgtQi5vZmZzZXRMZWZ0O3RoaXMuZGVsdGFZPXRoaXMuc3RhcnRZLUIub2Zmc2V0VG9wO3RoaXMuZHJhZ1RocmVzaE1ldD1mYWxzZTt0aGlzLmNsaWNrVGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIEU9RXh0LmRkLkRETTtFLnN0YXJ0RHJhZyhFLnN0YXJ0WCxFLnN0YXJ0WSl9LHRoaXMuY2xpY2tUaW1lVGhyZXNoKX0sc3RhcnREcmFnOmZ1bmN0aW9uKEIsQyl7Y2xlYXJUaW1lb3V0KHRoaXMuY2xpY2tUaW1lb3V0KTtpZih0aGlzLmRyYWdDdXJyZW50KXt0aGlzLmRyYWdDdXJyZW50LmI0U3RhcnREcmFnKEIsQyk7dGhpcy5kcmFnQ3VycmVudC5zdGFydERyYWcoQixDKX10aGlzLmRyYWdUaHJlc2hNZXQ9dHJ1ZX0saGFuZGxlTW91c2VVcDpmdW5jdGlvbihCKXtpZihFeHQuUXVpY2tUaXBzKXtFeHQuUXVpY2tUaXBzLmVuYWJsZSgpfWlmKCF0aGlzLmRyYWdDdXJyZW50KXtyZXR1cm4gfWNsZWFyVGltZW91dCh0aGlzLmNsaWNrVGltZW91dCk7aWYodGhpcy5kcmFnVGhyZXNoTWV0KXt0aGlzLmZpcmVFdmVudHMoQix0cnVlKX1lbHNle310aGlzLnN0b3BEcmFnKEIpO3RoaXMuc3RvcEV2ZW50KEIpfSxzdG9wRXZlbnQ6ZnVuY3Rpb24oQil7aWYodGhpcy5zdG9wUHJvcGFnYXRpb24pe0Iuc3RvcFByb3BhZ2F0aW9uKCl9aWYodGhpcy5wcmV2ZW50RGVmYXVsdCl7Qi5wcmV2ZW50RGVmYXVsdCgpfX0sc3RvcERyYWc6ZnVuY3Rpb24oQil7aWYodGhpcy5kcmFnQ3VycmVudCl7aWYodGhpcy5kcmFnVGhyZXNoTWV0KXt0aGlzLmRyYWdDdXJyZW50LmI0RW5kRHJhZyhCKTt0aGlzLmRyYWdDdXJyZW50LmVuZERyYWcoQil9dGhpcy5kcmFnQ3VycmVudC5vbk1vdXNlVXAoQil9dGhpcy5kcmFnQ3VycmVudD1udWxsO3RoaXMuZHJhZ092ZXJzPXt9fSxoYW5kbGVNb3VzZU1vdmU6ZnVuY3Rpb24oRCl7aWYoIXRoaXMuZHJhZ0N1cnJlbnQpe3JldHVybiB0cnVlfWlmKEV4dC5pc0lFJiYoRC5idXR0b24hPT0wJiZELmJ1dHRvbiE9PTEmJkQuYnV0dG9uIT09Mikpe3RoaXMuc3RvcEV2ZW50KEQpO3JldHVybiB0aGlzLmhhbmRsZU1vdXNlVXAoRCl9aWYoIXRoaXMuZHJhZ1RocmVzaE1ldCl7dmFyIEM9TWF0aC5hYnModGhpcy5zdGFydFgtRC5nZXRQYWdlWCgpKTt2YXIgQj1NYXRoLmFicyh0aGlzLnN0YXJ0WS1ELmdldFBhZ2VZKCkpO2lmKEM+dGhpcy5jbGlja1BpeGVsVGhyZXNofHxCPnRoaXMuY2xpY2tQaXhlbFRocmVzaCl7dGhpcy5zdGFydERyYWcodGhpcy5zdGFydFgsdGhpcy5zdGFydFkpfX1pZih0aGlzLmRyYWdUaHJlc2hNZXQpe3RoaXMuZHJhZ0N1cnJlbnQuYjREcmFnKEQpO3RoaXMuZHJhZ0N1cnJlbnQub25EcmFnKEQpO2lmKCF0aGlzLmRyYWdDdXJyZW50Lm1vdmVPbmx5KXt0aGlzLmZpcmVFdmVudHMoRCxmYWxzZSl9fXRoaXMuc3RvcEV2ZW50KEQpO3JldHVybiB0cnVlfSxmaXJlRXZlbnRzOmZ1bmN0aW9uKEssTCl7dmFyIE49dGhpcy5kcmFnQ3VycmVudDtpZighTnx8Ti5pc0xvY2tlZCgpKXtyZXR1cm4gfXZhciBPPUsuZ2V0UG9pbnQoKTt2YXIgQj1bXTt2YXIgRT1bXTt2YXIgST1bXTt2YXIgRz1bXTt2YXIgRD1bXTtmb3IodmFyIEYgaW4gdGhpcy5kcmFnT3ZlcnMpe3ZhciBDPXRoaXMuZHJhZ092ZXJzW0ZdO2lmKCF0aGlzLmlzVHlwZU9mREQoQykpe2NvbnRpbnVlfWlmKCF0aGlzLmlzT3ZlclRhcmdldChPLEMsdGhpcy5tb2RlKSl7RS5wdXNoKEMpfUJbRl09dHJ1ZTtkZWxldGUgdGhpcy5kcmFnT3ZlcnNbRl19Zm9yKHZhciBNIGluIE4uZ3JvdXBzKXtpZigic3RyaW5nIiE9dHlwZW9mIE0pe2NvbnRpbnVlfWZvcihGIGluIHRoaXMuaWRzW01dKXt2YXIgSD10aGlzLmlkc1tNXVtGXTtpZighdGhpcy5pc1R5cGVPZkREKEgpKXtjb250aW51ZX1pZihILmlzVGFyZ2V0JiYhSC5pc0xvY2tlZCgpJiZIIT1OKXtpZih0aGlzLmlzT3ZlclRhcmdldChPLEgsdGhpcy5tb2RlKSl7aWYoTCl7Ry5wdXNoKEgpfWVsc2V7aWYoIUJbSC5pZF0pe0QucHVzaChIKX1lbHNle0kucHVzaChIKX10aGlzLmRyYWdPdmVyc1tILmlkXT1IfX19fX1pZih0aGlzLm1vZGUpe2lmKEUubGVuZ3RoKXtOLmI0RHJhZ091dChLLEUpO04ub25EcmFnT3V0KEssRSl9aWYoRC5sZW5ndGgpe04ub25EcmFnRW50ZXIoSyxEKX1pZihJLmxlbmd0aCl7Ti5iNERyYWdPdmVyKEssSSk7Ti5vbkRyYWdPdmVyKEssSSl9aWYoRy5sZW5ndGgpe04uYjREcmFnRHJvcChLLEcpO04ub25EcmFnRHJvcChLLEcpfX1lbHNle3ZhciBKPTA7Zm9yKEY9MCxKPUUubGVuZ3RoO0Y8SjsrK0Ype04uYjREcmFnT3V0KEssRVtGXS5pZCk7Ti5vbkRyYWdPdXQoSyxFW0ZdLmlkKX1mb3IoRj0wLEo9RC5sZW5ndGg7RjxKOysrRil7Ti5vbkRyYWdFbnRlcihLLERbRl0uaWQpfWZvcihGPTAsSj1JLmxlbmd0aDtGPEo7KytGKXtOLmI0RHJhZ092ZXIoSyxJW0ZdLmlkKTtOLm9uRHJhZ092ZXIoSyxJW0ZdLmlkKX1mb3IoRj0wLEo9Ry5sZW5ndGg7RjxKOysrRil7Ti5iNERyYWdEcm9wKEssR1tGXS5pZCk7Ti5vbkRyYWdEcm9wKEssR1tGXS5pZCl9fWlmKEwmJiFHLmxlbmd0aCl7Ti5vbkludmFsaWREcm9wKEspfX0sZ2V0QmVzdE1hdGNoOmZ1bmN0aW9uKEQpe3ZhciBGPW51bGw7dmFyIEM9RC5sZW5ndGg7aWYoQz09MSl7Rj1EWzBdfWVsc2V7Zm9yKHZhciBFPTA7RTxDOysrRSl7dmFyIEI9RFtFXTtpZihCLmN1cnNvcklzT3Zlcil7Rj1CO2JyZWFrfWVsc2V7aWYoIUZ8fEYub3ZlcmxhcC5nZXRBcmVhKCk8Qi5vdmVybGFwLmdldEFyZWEoKSl7Rj1CfX19fXJldHVybiBGfSxyZWZyZXNoQ2FjaGU6ZnVuY3Rpb24oQyl7Zm9yKHZhciBCIGluIEMpe2lmKCJzdHJpbmciIT10eXBlb2YgQil7Y29udGludWV9Zm9yKHZhciBEIGluIHRoaXMuaWRzW0JdKXt2YXIgRT10aGlzLmlkc1tCXVtEXTtpZih0aGlzLmlzVHlwZU9mREQoRSkpe3ZhciBGPXRoaXMuZ2V0TG9jYXRpb24oRSk7aWYoRil7dGhpcy5sb2NhdGlvbkNhY2hlW0UuaWRdPUZ9ZWxzZXtkZWxldGUgdGhpcy5sb2NhdGlvbkNhY2hlW0UuaWRdfX19fX0sdmVyaWZ5RWw6ZnVuY3Rpb24oQyl7aWYoQyl7dmFyIEI7aWYoRXh0LmlzSUUpe3RyeXtCPUMub2Zmc2V0UGFyZW50fWNhdGNoKEQpe319ZWxzZXtCPUMub2Zmc2V0UGFyZW50fWlmKEIpe3JldHVybiB0cnVlfX1yZXR1cm4gZmFsc2V9LGdldExvY2F0aW9uOmZ1bmN0aW9uKEcpe2lmKCF0aGlzLmlzVHlwZU9mREQoRykpe3JldHVybiBudWxsfXZhciBFPUcuZ2V0RWwoKSxKLEQsQyxMLEssTSxCLEksRjt0cnl7Sj1FeHQubGliLkRvbS5nZXRYWShFKX1jYXRjaChIKXt9aWYoIUope3JldHVybiBudWxsfUQ9SlswXTtDPUQrRS5vZmZzZXRXaWR0aDtMPUpbMV07Sz1MK0Uub2Zmc2V0SGVpZ2h0O009TC1HLnBhZGRpbmdbMF07Qj1DK0cucGFkZGluZ1sxXTtJPUsrRy5wYWRkaW5nWzJdO0Y9RC1HLnBhZGRpbmdbM107cmV0dXJuIG5ldyBFeHQubGliLlJlZ2lvbihNLEIsSSxGKX0saXNPdmVyVGFyZ2V0OmZ1bmN0aW9uKEosQixEKXt2YXIgRj10aGlzLmxvY2F0aW9uQ2FjaGVbQi5pZF07aWYoIUZ8fCF0aGlzLnVzZUNhY2hlKXtGPXRoaXMuZ2V0TG9jYXRpb24oQik7dGhpcy5sb2NhdGlvbkNhY2hlW0IuaWRdPUZ9aWYoIUYpe3JldHVybiBmYWxzZX1CLmN1cnNvcklzT3Zlcj1GLmNvbnRhaW5zKEopO3ZhciBJPXRoaXMuZHJhZ0N1cnJlbnQ7aWYoIUl8fCFJLmdldFRhcmdldENvb3JkfHwoIUQmJiFJLmNvbnN0cmFpblgmJiFJLmNvbnN0cmFpblkpKXtyZXR1cm4gQi5jdXJzb3JJc092ZXJ9Qi5vdmVybGFwPW51bGw7dmFyIEc9SS5nZXRUYXJnZXRDb29yZChKLngsSi55KTt2YXIgQz1JLmdldERyYWdFbCgpO3ZhciBFPW5ldyBFeHQubGliLlJlZ2lvbihHLnksRy54K0Mub2Zmc2V0V2lkdGgsRy55K0Mub2Zmc2V0SGVpZ2h0LEcueCk7dmFyIEg9RS5pbnRlcnNlY3QoRik7aWYoSCl7Qi5vdmVybGFwPUg7cmV0dXJuKEQpP3RydWU6Qi5jdXJzb3JJc092ZXJ9ZWxzZXtyZXR1cm4gZmFsc2V9fSxfb25VbmxvYWQ6ZnVuY3Rpb24oQyxCKXtFeHQuZGQuRHJhZ0Ryb3BNZ3IudW5yZWdBbGwoKX0sdW5yZWdBbGw6ZnVuY3Rpb24oKXtpZih0aGlzLmRyYWdDdXJyZW50KXt0aGlzLnN0b3BEcmFnKCk7dGhpcy5kcmFnQ3VycmVudD1udWxsfXRoaXMuX2V4ZWNPbkFsbCgidW5yZWciLFtdKTtmb3IodmFyIEIgaW4gdGhpcy5lbGVtZW50Q2FjaGUpe2RlbGV0ZSB0aGlzLmVsZW1lbnRDYWNoZVtCXX10aGlzLmVsZW1lbnRDYWNoZT17fTt0aGlzLmlkcz17fX0sZWxlbWVudENhY2hlOnt9LGdldEVsV3JhcHBlcjpmdW5jdGlvbihDKXt2YXIgQj10aGlzLmVsZW1lbnRDYWNoZVtDXTtpZighQnx8IUIuZWwpe0I9dGhpcy5lbGVtZW50Q2FjaGVbQ109bmV3IHRoaXMuRWxlbWVudFdyYXBwZXIoRXh0LmdldERvbShDKSl9cmV0dXJuIEJ9LGdldEVsZW1lbnQ6ZnVuY3Rpb24oQil7cmV0dXJuIEV4dC5nZXREb20oQil9LGdldENzczpmdW5jdGlvbihDKXt2YXIgQj1FeHQuZ2V0RG9tKEMpO3JldHVybihCKT9CLnN0eWxlOm51bGx9LEVsZW1lbnRXcmFwcGVyOmZ1bmN0aW9uKEIpe3RoaXMuZWw9Qnx8bnVsbDt0aGlzLmlkPXRoaXMuZWwmJkIuaWQ7dGhpcy5jc3M9dGhpcy5lbCYmQi5zdHlsZX0sZ2V0UG9zWDpmdW5jdGlvbihCKXtyZXR1cm4gRXh0LmxpYi5Eb20uZ2V0WChCKX0sZ2V0UG9zWTpmdW5jdGlvbihCKXtyZXR1cm4gRXh0LmxpYi5Eb20uZ2V0WShCKX0sc3dhcE5vZGU6ZnVuY3Rpb24oRCxCKXtpZihELnN3YXBOb2RlKXtELnN3YXBOb2RlKEIpfWVsc2V7dmFyIEU9Qi5wYXJlbnROb2RlO3ZhciBDPUIubmV4dFNpYmxpbmc7aWYoQz09RCl7RS5pbnNlcnRCZWZvcmUoRCxCKX1lbHNle2lmKEI9PUQubmV4dFNpYmxpbmcpe0UuaW5zZXJ0QmVmb3JlKEIsRCl9ZWxzZXtELnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKEIsRCk7RS5pbnNlcnRCZWZvcmUoRCxDKX19fX0sZ2V0U2Nyb2xsOmZ1bmN0aW9uKCl7dmFyIEQsQixFPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxDPWRvY3VtZW50LmJvZHk7aWYoRSYmKEUuc2Nyb2xsVG9wfHxFLnNjcm9sbExlZnQpKXtEPUUuc2Nyb2xsVG9wO0I9RS5zY3JvbGxMZWZ0fWVsc2V7aWYoQyl7RD1DLnNjcm9sbFRvcDtCPUMuc2Nyb2xsTGVmdH1lbHNle319cmV0dXJue3RvcDpELGxlZnQ6Qn19LGdldFN0eWxlOmZ1bmN0aW9uKEMsQil7cmV0dXJuIEV4dC5mbHkoQykuZ2V0U3R5bGUoQil9LGdldFNjcm9sbFRvcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFNjcm9sbCgpLnRvcH0sZ2V0U2Nyb2xsTGVmdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFNjcm9sbCgpLmxlZnR9LG1vdmVUb0VsOmZ1bmN0aW9uKEIsRCl7dmFyIEM9RXh0LmxpYi5Eb20uZ2V0WFkoRCk7RXh0LmxpYi5Eb20uc2V0WFkoQixDKX0sbnVtZXJpY1NvcnQ6ZnVuY3Rpb24oQyxCKXtyZXR1cm4oQy1CKX0sX3RpbWVvdXRDb3VudDowLF9hZGRMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt2YXIgQj1FeHQuZGQuRERNO2lmKEV4dC5saWIuRXZlbnQmJmRvY3VtZW50KXtCLl9vbkxvYWQoKX1lbHNle2lmKEIuX3RpbWVvdXRDb3VudD4yMDAwKXt9ZWxzZXtzZXRUaW1lb3V0KEIuX2FkZExpc3RlbmVycywxMCk7aWYoZG9jdW1lbnQmJmRvY3VtZW50LmJvZHkpe0IuX3RpbWVvdXRDb3VudCs9MX19fX0saGFuZGxlV2FzQ2xpY2tlZDpmdW5jdGlvbihCLEQpe2lmKHRoaXMuaXNIYW5kbGUoRCxCLmlkKSl7cmV0dXJuIHRydWV9ZWxzZXt2YXIgQz1CLnBhcmVudE5vZGU7d2hpbGUoQyl7aWYodGhpcy5pc0hhbmRsZShELEMuaWQpKXtyZXR1cm4gdHJ1ZX1lbHNle0M9Qy5wYXJlbnROb2RlfX19cmV0dXJuIGZhbHNlfX19KCk7RXh0LmRkLkRETT1FeHQuZGQuRHJhZ0Ryb3BNZ3I7RXh0LmRkLkRETS5fYWRkTGlzdGVuZXJzKCl9RXh0LmRkLkREPWZ1bmN0aW9uKEMsQSxCKXtpZihDKXt0aGlzLmluaXQoQyxBLEIpfX07RXh0LmV4dGVuZChFeHQuZGQuREQsRXh0LmRkLkRyYWdEcm9wLHtzY3JvbGw6dHJ1ZSxhdXRvT2Zmc2V0OmZ1bmN0aW9uKEMsQil7dmFyIEE9Qy10aGlzLnN0YXJ0UGFnZVg7dmFyIEQ9Qi10aGlzLnN0YXJ0UGFnZVk7dGhpcy5zZXREZWx0YShBLEQpfSxzZXREZWx0YTpmdW5jdGlvbihCLEEpe3RoaXMuZGVsdGFYPUI7dGhpcy5kZWx0YVk9QX0sc2V0RHJhZ0VsUG9zOmZ1bmN0aW9uKEMsQil7dmFyIEE9dGhpcy5nZXREcmFnRWwoKTt0aGlzLmFsaWduRWxXaXRoTW91c2UoQSxDLEIpfSxhbGlnbkVsV2l0aE1vdXNlOmZ1bmN0aW9uKEMsRyxGKXt2YXIgRT10aGlzLmdldFRhcmdldENvb3JkKEcsRik7dmFyIEI9Qy5kb20/QzpFeHQuZmx5KEMsIl9kZCIpO2lmKCF0aGlzLmRlbHRhU2V0WFkpe3ZhciBIPVtFLngsRS55XTtCLnNldFhZKEgpO3ZhciBEPUIuZ2V0TGVmdCh0cnVlKTt2YXIgQT1CLmdldFRvcCh0cnVlKTt0aGlzLmRlbHRhU2V0WFk9W0QtRS54LEEtRS55XX1lbHNle0Iuc2V0TGVmdFRvcChFLngrdGhpcy5kZWx0YVNldFhZWzBdLEUueSt0aGlzLmRlbHRhU2V0WFlbMV0pfXRoaXMuY2FjaGVQb3NpdGlvbihFLngsRS55KTt0aGlzLmF1dG9TY3JvbGwoRS54LEUueSxDLm9mZnNldEhlaWdodCxDLm9mZnNldFdpZHRoKTtyZXR1cm4gRX0sY2FjaGVQb3NpdGlvbjpmdW5jdGlvbihCLEEpe2lmKEIpe3RoaXMubGFzdFBhZ2VYPUI7dGhpcy5sYXN0UGFnZVk9QX1lbHNle3ZhciBDPUV4dC5saWIuRG9tLmdldFhZKHRoaXMuZ2V0RWwoKSk7dGhpcy5sYXN0UGFnZVg9Q1swXTt0aGlzLmxhc3RQYWdlWT1DWzFdfX0sYXV0b1Njcm9sbDpmdW5jdGlvbihKLEksRSxLKXtpZih0aGlzLnNjcm9sbCl7dmFyIEw9RXh0LmxpYi5Eb20uZ2V0Vmlld0hlaWdodCgpO3ZhciBCPUV4dC5saWIuRG9tLmdldFZpZXdXaWR0aCgpO3ZhciBOPXRoaXMuRERNLmdldFNjcm9sbFRvcCgpO3ZhciBEPXRoaXMuRERNLmdldFNjcm9sbExlZnQoKTt2YXIgSD1FK0k7dmFyIE09SytKO3ZhciBHPShMK04tSS10aGlzLmRlbHRhWSk7dmFyIEY9KEIrRC1KLXRoaXMuZGVsdGFYKTt2YXIgQz00MDt2YXIgQT0oZG9jdW1lbnQuYWxsKT84MDozMDtpZihIPkwmJkc8Qyl7d2luZG93LnNjcm9sbFRvKEQsTitBKX1pZihJPE4mJk4+MCYmSS1OPEMpe3dpbmRvdy5zY3JvbGxUbyhELE4tQSl9aWYoTT5CJiZGPEMpe3dpbmRvdy5zY3JvbGxUbyhEK0EsTil9aWYoSjxEJiZEPjAmJkotRDxDKXt3aW5kb3cuc2Nyb2xsVG8oRC1BLE4pfX19LGdldFRhcmdldENvb3JkOmZ1bmN0aW9uKEMsQil7dmFyIEE9Qy10aGlzLmRlbHRhWDt2YXIgRD1CLXRoaXMuZGVsdGFZO2lmKHRoaXMuY29uc3RyYWluWCl7aWYoQTx0aGlzLm1pblgpe0E9dGhpcy5taW5YfWlmKEE+dGhpcy5tYXhYKXtBPXRoaXMubWF4WH19aWYodGhpcy5jb25zdHJhaW5ZKXtpZihEPHRoaXMubWluWSl7RD10aGlzLm1pbll9aWYoRD50aGlzLm1heFkpe0Q9dGhpcy5tYXhZfX1BPXRoaXMuZ2V0VGljayhBLHRoaXMueFRpY2tzKTtEPXRoaXMuZ2V0VGljayhELHRoaXMueVRpY2tzKTtyZXR1cm57eDpBLHk6RH19LGFwcGx5Q29uZmlnOmZ1bmN0aW9uKCl7RXh0LmRkLkRELnN1cGVyY2xhc3MuYXBwbHlDb25maWcuY2FsbCh0aGlzKTt0aGlzLnNjcm9sbD0odGhpcy5jb25maWcuc2Nyb2xsIT09ZmFsc2UpfSxiNE1vdXNlRG93bjpmdW5jdGlvbihBKXt0aGlzLmF1dG9PZmZzZXQoQS5nZXRQYWdlWCgpLEEuZ2V0UGFnZVkoKSl9LGI0RHJhZzpmdW5jdGlvbihBKXt0aGlzLnNldERyYWdFbFBvcyhBLmdldFBhZ2VYKCksQS5nZXRQYWdlWSgpKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4oIkREICIrdGhpcy5pZCl9fSk7RXh0LmRkLkREUHJveHk9ZnVuY3Rpb24oQyxBLEIpe2lmKEMpe3RoaXMuaW5pdChDLEEsQik7dGhpcy5pbml0RnJhbWUoKX19O0V4dC5kZC5ERFByb3h5LmRyYWdFbElkPSJ5Z2RkZmRpdiI7RXh0LmV4dGVuZChFeHQuZGQuRERQcm94eSxFeHQuZGQuREQse3Jlc2l6ZUZyYW1lOnRydWUsY2VudGVyRnJhbWU6ZmFsc2UsY3JlYXRlRnJhbWU6ZnVuY3Rpb24oKXt2YXIgQj10aGlzO3ZhciBBPWRvY3VtZW50LmJvZHk7aWYoIUF8fCFBLmZpcnN0Q2hpbGQpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtCLmNyZWF0ZUZyYW1lKCl9LDUwKTtyZXR1cm4gfXZhciBEPXRoaXMuZ2V0RHJhZ0VsKCk7aWYoIUQpe0Q9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7RC5pZD10aGlzLmRyYWdFbElkO3ZhciBDPUQuc3R5bGU7Qy5wb3NpdGlvbj0iYWJzb2x1dGUiO0MudmlzaWJpbGl0eT0iaGlkZGVuIjtDLmN1cnNvcj0ibW92ZSI7Qy5ib3JkZXI9IjJweCBzb2xpZCAjYWFhIjtDLnpJbmRleD05OTk7QS5pbnNlcnRCZWZvcmUoRCxBLmZpcnN0Q2hpbGQpfX0saW5pdEZyYW1lOmZ1bmN0aW9uKCl7dGhpcy5jcmVhdGVGcmFtZSgpfSxhcHBseUNvbmZpZzpmdW5jdGlvbigpe0V4dC5kZC5ERFByb3h5LnN1cGVyY2xhc3MuYXBwbHlDb25maWcuY2FsbCh0aGlzKTt0aGlzLnJlc2l6ZUZyYW1lPSh0aGlzLmNvbmZpZy5yZXNpemVGcmFtZSE9PWZhbHNlKTt0aGlzLmNlbnRlckZyYW1lPSh0aGlzLmNvbmZpZy5jZW50ZXJGcmFtZSk7dGhpcy5zZXREcmFnRWxJZCh0aGlzLmNvbmZpZy5kcmFnRWxJZHx8RXh0LmRkLkREUHJveHkuZHJhZ0VsSWQpfSxzaG93RnJhbWU6ZnVuY3Rpb24oRSxEKXt2YXIgQz10aGlzLmdldEVsKCk7dmFyIEE9dGhpcy5nZXREcmFnRWwoKTt2YXIgQj1BLnN0eWxlO3RoaXMuX3Jlc2l6ZVByb3h5KCk7aWYodGhpcy5jZW50ZXJGcmFtZSl7dGhpcy5zZXREZWx0YShNYXRoLnJvdW5kKHBhcnNlSW50KEIud2lkdGgsMTApLzIpLE1hdGgucm91bmQocGFyc2VJbnQoQi5oZWlnaHQsMTApLzIpKX10aGlzLnNldERyYWdFbFBvcyhFLEQpO0V4dC5mbHkoQSkuc2hvdygpfSxfcmVzaXplUHJveHk6ZnVuY3Rpb24oKXtpZih0aGlzLnJlc2l6ZUZyYW1lKXt2YXIgQT10aGlzLmdldEVsKCk7RXh0LmZseSh0aGlzLmdldERyYWdFbCgpKS5zZXRTaXplKEEub2Zmc2V0V2lkdGgsQS5vZmZzZXRIZWlnaHQpfX0sYjRNb3VzZURvd246ZnVuY3Rpb24oQil7dmFyIEE9Qi5nZXRQYWdlWCgpO3ZhciBDPUIuZ2V0UGFnZVkoKTt0aGlzLmF1dG9PZmZzZXQoQSxDKTt0aGlzLnNldERyYWdFbFBvcyhBLEMpfSxiNFN0YXJ0RHJhZzpmdW5jdGlvbihBLEIpe3RoaXMuc2hvd0ZyYW1lKEEsQil9LGI0RW5kRHJhZzpmdW5jdGlvbihBKXtFeHQuZmx5KHRoaXMuZ2V0RHJhZ0VsKCkpLmhpZGUoKX0sZW5kRHJhZzpmdW5jdGlvbihDKXt2YXIgQj10aGlzLmdldEVsKCk7dmFyIEE9dGhpcy5nZXREcmFnRWwoKTtBLnN0eWxlLnZpc2liaWxpdHk9IiI7dGhpcy5iZWZvcmVNb3ZlKCk7Qi5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iO0V4dC5kZC5ERE0ubW92ZVRvRWwoQixBKTtBLnN0eWxlLnZpc2liaWxpdHk9ImhpZGRlbiI7Qi5zdHlsZS52aXNpYmlsaXR5PSIiO3RoaXMuYWZ0ZXJEcmFnKCl9LGJlZm9yZU1vdmU6ZnVuY3Rpb24oKXt9LGFmdGVyRHJhZzpmdW5jdGlvbigpe30sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4oIkREUHJveHkgIit0aGlzLmlkKX19KTtFeHQuZGQuRERUYXJnZXQ9ZnVuY3Rpb24oQyxBLEIpe2lmKEMpe3RoaXMuaW5pdFRhcmdldChDLEEsQil9fTtFeHQuZXh0ZW5kKEV4dC5kZC5ERFRhcmdldCxFeHQuZGQuRHJhZ0Ryb3Ase3RvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuKCJERFRhcmdldCAiK3RoaXMuaWQpfX0pOw0KRXh0LmRkLkRyYWdUcmFja2VyPWZ1bmN0aW9uKEEpe0V4dC5hcHBseSh0aGlzLEEpO3RoaXMuYWRkRXZlbnRzKCJtb3VzZWRvd24iLCJtb3VzZXVwIiwibW91c2Vtb3ZlIiwiZHJhZ3N0YXJ0IiwiZHJhZ2VuZCIsImRyYWciKTt0aGlzLmRyYWdSZWdpb249bmV3IEV4dC5saWIuUmVnaW9uKDAsMCwwLDApO2lmKHRoaXMuZWwpe3RoaXMuaW5pdEVsKHRoaXMuZWwpfX07RXh0LmV4dGVuZChFeHQuZGQuRHJhZ1RyYWNrZXIsRXh0LnV0aWwuT2JzZXJ2YWJsZSx7YWN0aXZlOmZhbHNlLHRvbGVyYW5jZTo1LGF1dG9TdGFydDpmYWxzZSxpbml0RWw6ZnVuY3Rpb24oQSl7dGhpcy5lbD1FeHQuZ2V0KEEpO0Eub24oIm1vdXNlZG93biIsdGhpcy5vbk1vdXNlRG93bix0aGlzLHRoaXMuZGVsZWdhdGU/e2RlbGVnYXRlOnRoaXMuZGVsZWdhdGV9OnVuZGVmaW5lZCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmVsLnVuKCJtb3VzZWRvd24iLHRoaXMub25Nb3VzZURvd24sdGhpcyl9LG9uTW91c2VEb3duOmZ1bmN0aW9uKEMsQil7aWYodGhpcy5maXJlRXZlbnQoIm1vdXNlZG93biIsdGhpcyxDKSE9PWZhbHNlJiZ0aGlzLm9uQmVmb3JlU3RhcnQoQykhPT1mYWxzZSl7dGhpcy5zdGFydFhZPXRoaXMubGFzdFhZPUMuZ2V0WFkoKTt0aGlzLmRyYWdUYXJnZXQ9dGhpcy5kZWxlZ2F0ZT9COnRoaXMuZWwuZG9tO0MucHJldmVudERlZmF1bHQoKTt2YXIgQT1FeHQuZ2V0RG9jKCk7QS5vbigibW91c2V1cCIsdGhpcy5vbk1vdXNlVXAsdGhpcyk7QS5vbigibW91c2Vtb3ZlIix0aGlzLm9uTW91c2VNb3ZlLHRoaXMpO0Eub24oInNlbGVjdHN0YXJ0Iix0aGlzLnN0b3BTZWxlY3QsdGhpcyk7aWYodGhpcy5hdXRvU3RhcnQpe3RoaXMudGltZXI9dGhpcy50cmlnZ2VyU3RhcnQuZGVmZXIodGhpcy5hdXRvU3RhcnQ9PT10cnVlPzEwMDA6dGhpcy5hdXRvU3RhcnQsdGhpcyl9fX0sb25Nb3VzZU1vdmU6ZnVuY3Rpb24oRCxDKXtELnByZXZlbnREZWZhdWx0KCk7dmFyIEI9RC5nZXRYWSgpLEE9dGhpcy5zdGFydFhZO3RoaXMubGFzdFhZPUI7aWYoIXRoaXMuYWN0aXZlKXtpZihNYXRoLmFicyhBWzBdLUJbMF0pPnRoaXMudG9sZXJhbmNlfHxNYXRoLmFicyhBWzFdLUJbMV0pPnRoaXMudG9sZXJhbmNlKXt0aGlzLnRyaWdnZXJTdGFydCgpfWVsc2V7cmV0dXJuIH19dGhpcy5maXJlRXZlbnQoIm1vdXNlbW92ZSIsdGhpcyxEKTt0aGlzLm9uRHJhZyhEKTt0aGlzLmZpcmVFdmVudCgiZHJhZyIsdGhpcyxEKX0sb25Nb3VzZVVwOmZ1bmN0aW9uKEIpe3ZhciBBPUV4dC5nZXREb2MoKTtBLnVuKCJtb3VzZW1vdmUiLHRoaXMub25Nb3VzZU1vdmUsdGhpcyk7QS51bigibW91c2V1cCIsdGhpcy5vbk1vdXNlVXAsdGhpcyk7QS51bigic2VsZWN0c3RhcnQiLHRoaXMuc3RvcFNlbGVjdCx0aGlzKTtCLnByZXZlbnREZWZhdWx0KCk7dGhpcy5jbGVhclN0YXJ0KCk7dGhpcy5hY3RpdmU9ZmFsc2U7ZGVsZXRlIHRoaXMuZWxSZWdpb247dGhpcy5maXJlRXZlbnQoIm1vdXNldXAiLHRoaXMsQik7dGhpcy5vbkVuZChCKTt0aGlzLmZpcmVFdmVudCgiZHJhZ2VuZCIsdGhpcyxCKX0sdHJpZ2dlclN0YXJ0OmZ1bmN0aW9uKEEpe3RoaXMuY2xlYXJTdGFydCgpO3RoaXMuYWN0aXZlPXRydWU7dGhpcy5vblN0YXJ0KHRoaXMuc3RhcnRYWSk7dGhpcy5maXJlRXZlbnQoImRyYWdzdGFydCIsdGhpcyx0aGlzLnN0YXJ0WFkpfSxjbGVhclN0YXJ0OmZ1bmN0aW9uKCl7aWYodGhpcy50aW1lcil7Y2xlYXJUaW1lb3V0KHRoaXMudGltZXIpO2RlbGV0ZSB0aGlzLnRpbWVyfX0sc3RvcFNlbGVjdDpmdW5jdGlvbihBKXtBLnN0b3BFdmVudCgpO3JldHVybiBmYWxzZX0sb25CZWZvcmVTdGFydDpmdW5jdGlvbihBKXt9LG9uU3RhcnQ6ZnVuY3Rpb24oQSl7fSxvbkRyYWc6ZnVuY3Rpb24oQSl7fSxvbkVuZDpmdW5jdGlvbihBKXt9LGdldERyYWdUYXJnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kcmFnVGFyZ2V0fSxnZXREcmFnQ3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbH0sZ2V0WFk6ZnVuY3Rpb24oQSl7cmV0dXJuIEE/dGhpcy5jb25zdHJhaW5Nb2Rlc1tBXS5jYWxsKHRoaXMsdGhpcy5sYXN0WFkpOnRoaXMubGFzdFhZfSxnZXRPZmZzZXQ6ZnVuY3Rpb24oQyl7dmFyIEI9dGhpcy5nZXRYWShDKTt2YXIgQT10aGlzLnN0YXJ0WFk7cmV0dXJuW0FbMF0tQlswXSxBWzFdLUJbMV1dfSxjb25zdHJhaW5Nb2Rlczp7InBvaW50IjpmdW5jdGlvbihCKXtpZighdGhpcy5lbFJlZ2lvbil7dGhpcy5lbFJlZ2lvbj10aGlzLmdldERyYWdDdCgpLmdldFJlZ2lvbigpfXZhciBBPXRoaXMuZHJhZ1JlZ2lvbjtBLmxlZnQ9QlswXTtBLnRvcD1CWzFdO0EucmlnaHQ9QlswXTtBLmJvdHRvbT1CWzFdO0EuY29uc3RyYWluVG8odGhpcy5lbFJlZ2lvbik7cmV0dXJuW0EubGVmdCxBLnRvcF19fX0pOw0KRXh0LmRkLlNjcm9sbE1hbmFnZXI9ZnVuY3Rpb24oKXt2YXIgQz1FeHQuZGQuRHJhZ0Ryb3BNZ3I7dmFyIEU9e307dmFyIEI9bnVsbDt2YXIgSD17fTt2YXIgRz1mdW5jdGlvbihLKXtCPW51bGw7QSgpfTt2YXIgST1mdW5jdGlvbigpe2lmKEMuZHJhZ0N1cnJlbnQpe0MucmVmcmVzaENhY2hlKEMuZHJhZ0N1cnJlbnQuZ3JvdXBzKX19O3ZhciBEPWZ1bmN0aW9uKCl7aWYoQy5kcmFnQ3VycmVudCl7dmFyIEs9RXh0LmRkLlNjcm9sbE1hbmFnZXI7dmFyIEw9SC5lbC5kZFNjcm9sbENvbmZpZz9ILmVsLmRkU2Nyb2xsQ29uZmlnLmluY3JlbWVudDpLLmluY3JlbWVudDtpZighSy5hbmltYXRlKXtpZihILmVsLnNjcm9sbChILmRpcixMKSl7SSgpfX1lbHNle0guZWwuc2Nyb2xsKEguZGlyLEwsdHJ1ZSxLLmFuaW1EdXJhdGlvbixJKX19fTt2YXIgQT1mdW5jdGlvbigpe2lmKEguaWQpe2NsZWFySW50ZXJ2YWwoSC5pZCl9SC5pZD0wO0guZWw9bnVsbDtILmRpcj0iIn07dmFyIEY9ZnVuY3Rpb24oTCxLKXtBKCk7SC5lbD1MO0guZGlyPUs7SC5pZD1zZXRJbnRlcnZhbChELEV4dC5kZC5TY3JvbGxNYW5hZ2VyLmZyZXF1ZW5jeSl9O3ZhciBKPWZ1bmN0aW9uKE4sUCl7aWYoUHx8IUMuZHJhZ0N1cnJlbnQpe3JldHVybiB9dmFyIFE9RXh0LmRkLlNjcm9sbE1hbmFnZXI7aWYoIUJ8fEIhPUMuZHJhZ0N1cnJlbnQpe0I9Qy5kcmFnQ3VycmVudDtRLnJlZnJlc2hDYWNoZSgpfXZhciBSPUV4dC5saWIuRXZlbnQuZ2V0WFkoTik7dmFyIFM9bmV3IEV4dC5saWIuUG9pbnQoUlswXSxSWzFdKTtmb3IodmFyIEwgaW4gRSl7dmFyIE09RVtMXSxLPU0uX3JlZ2lvbjt2YXIgTz1NLmRkU2Nyb2xsQ29uZmlnP00uZGRTY3JvbGxDb25maWc6UTtpZihLJiZLLmNvbnRhaW5zKFMpJiZNLmlzU2Nyb2xsYWJsZSgpKXtpZihLLmJvdHRvbS1TLnk8PU8udnRocmVzaCl7aWYoSC5lbCE9TSl7RihNLCJkb3duIil9cmV0dXJuIH1lbHNle2lmKEsucmlnaHQtUy54PD1PLmh0aHJlc2gpe2lmKEguZWwhPU0pe0YoTSwibGVmdCIpfXJldHVybiB9ZWxzZXtpZihTLnktSy50b3A8PU8udnRocmVzaCl7aWYoSC5lbCE9TSl7RihNLCJ1cCIpfXJldHVybiB9ZWxzZXtpZihTLngtSy5sZWZ0PD1PLmh0aHJlc2gpe2lmKEguZWwhPU0pe0YoTSwicmlnaHQiKX1yZXR1cm4gfX19fX19QSgpfTtDLmZpcmVFdmVudHM9Qy5maXJlRXZlbnRzLmNyZWF0ZVNlcXVlbmNlKEosQyk7Qy5zdG9wRHJhZz1DLnN0b3BEcmFnLmNyZWF0ZVNlcXVlbmNlKEcsQyk7cmV0dXJue3JlZ2lzdGVyOmZ1bmN0aW9uKE0pe2lmKEV4dC5pc0FycmF5KE0pKXtmb3IodmFyIEw9MCxLPU0ubGVuZ3RoO0w8SztMKyspe3RoaXMucmVnaXN0ZXIoTVtMXSl9fWVsc2V7TT1FeHQuZ2V0KE0pO0VbTS5pZF09TX19LHVucmVnaXN0ZXI6ZnVuY3Rpb24oTSl7aWYoRXh0LmlzQXJyYXkoTSkpe2Zvcih2YXIgTD0wLEs9TS5sZW5ndGg7TDxLO0wrKyl7dGhpcy51bnJlZ2lzdGVyKE1bTF0pfX1lbHNle009RXh0LmdldChNKTtkZWxldGUgRVtNLmlkXX19LHZ0aHJlc2g6MjUsaHRocmVzaDoyNSxpbmNyZW1lbnQ6MTAwLGZyZXF1ZW5jeTo1MDAsYW5pbWF0ZTp0cnVlLGFuaW1EdXJhdGlvbjowLjQscmVmcmVzaENhY2hlOmZ1bmN0aW9uKCl7Zm9yKHZhciBLIGluIEUpe2lmKHR5cGVvZiBFW0tdPT0ib2JqZWN0Iil7RVtLXS5fcmVnaW9uPUVbS10uZ2V0UmVnaW9uKCl9fX19fSgpOw0KRXh0LmRkLlJlZ2lzdHJ5PWZ1bmN0aW9uKCl7dmFyIEQ9e307dmFyIEI9e307dmFyIEE9MDt2YXIgQz1mdW5jdGlvbihGLEUpe2lmKHR5cGVvZiBGPT0ic3RyaW5nIil7cmV0dXJuIEZ9dmFyIEc9Ri5pZDtpZighRyYmRSE9PWZhbHNlKXtHPSJleHRkZC0iKygrK0EpO0YuaWQ9R31yZXR1cm4gR307cmV0dXJue3JlZ2lzdGVyOmZ1bmN0aW9uKEgsSSl7ST1JfHx7fTtpZih0eXBlb2YgSD09InN0cmluZyIpe0g9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoSCl9SS5kZGVsPUg7RFtDKEgpXT1JO2lmKEkuaXNIYW5kbGUhPT1mYWxzZSl7QltJLmRkZWwuaWRdPUl9aWYoSS5oYW5kbGVzKXt2YXIgRz1JLmhhbmRsZXM7Zm9yKHZhciBGPTAsRT1HLmxlbmd0aDtGPEU7RisrKXtCW0MoR1tGXSldPUl9fX0sdW5yZWdpc3RlcjpmdW5jdGlvbihIKXt2YXIgSj1DKEgsZmFsc2UpO3ZhciBJPURbSl07aWYoSSl7ZGVsZXRlIERbSl07aWYoSS5oYW5kbGVzKXt2YXIgRz1JLmhhbmRsZXM7Zm9yKHZhciBGPTAsRT1HLmxlbmd0aDtGPEU7RisrKXtkZWxldGUgQltDKEdbRl0sZmFsc2UpXX19fX0sZ2V0SGFuZGxlOmZ1bmN0aW9uKEUpe2lmKHR5cGVvZiBFIT0ic3RyaW5nIil7RT1FLmlkfXJldHVybiBCW0VdfSxnZXRIYW5kbGVGcm9tRXZlbnQ6ZnVuY3Rpb24oRil7dmFyIEU9RXh0LmxpYi5FdmVudC5nZXRUYXJnZXQoRik7cmV0dXJuIEU/QltFLmlkXTpudWxsfSxnZXRUYXJnZXQ6ZnVuY3Rpb24oRSl7aWYodHlwZW9mIEUhPSJzdHJpbmciKXtFPUUuaWR9cmV0dXJuIERbRV19LGdldFRhcmdldEZyb21FdmVudDpmdW5jdGlvbihGKXt2YXIgRT1FeHQubGliLkV2ZW50LmdldFRhcmdldChGKTtyZXR1cm4gRT9EW0UuaWRdfHxCW0UuaWRdOm51bGx9fX0oKTsNCkV4dC5kZC5TdGF0dXNQcm94eT1mdW5jdGlvbihBKXtFeHQuYXBwbHkodGhpcyxBKTt0aGlzLmlkPXRoaXMuaWR8fEV4dC5pZCgpO3RoaXMuZWw9bmV3IEV4dC5MYXllcih7ZGg6e2lkOnRoaXMuaWQsdGFnOiJkaXYiLGNsczoieC1kZC1kcmFnLXByb3h5ICIrdGhpcy5kcm9wTm90QWxsb3dlZCxjaGlsZHJlbjpbe3RhZzoiZGl2IixjbHM6IngtZGQtZHJvcC1pY29uIn0se3RhZzoiZGl2IixjbHM6IngtZGQtZHJhZy1naG9zdCJ9XX0sc2hhZG93OiFBfHxBLnNoYWRvdyE9PWZhbHNlfSk7dGhpcy5naG9zdD1FeHQuZ2V0KHRoaXMuZWwuZG9tLmNoaWxkTm9kZXNbMV0pO3RoaXMuZHJvcFN0YXR1cz10aGlzLmRyb3BOb3RBbGxvd2VkfTtFeHQuZGQuU3RhdHVzUHJveHkucHJvdG90eXBlPXtkcm9wQWxsb3dlZDoieC1kZC1kcm9wLW9rIixkcm9wTm90QWxsb3dlZDoieC1kZC1kcm9wLW5vZHJvcCIsc2V0U3RhdHVzOmZ1bmN0aW9uKEEpe0E9QXx8dGhpcy5kcm9wTm90QWxsb3dlZDtpZih0aGlzLmRyb3BTdGF0dXMhPUEpe3RoaXMuZWwucmVwbGFjZUNsYXNzKHRoaXMuZHJvcFN0YXR1cyxBKTt0aGlzLmRyb3BTdGF0dXM9QX19LHJlc2V0OmZ1bmN0aW9uKEEpe3RoaXMuZWwuZG9tLmNsYXNzTmFtZT0ieC1kZC1kcmFnLXByb3h5ICIrdGhpcy5kcm9wTm90QWxsb3dlZDt0aGlzLmRyb3BTdGF0dXM9dGhpcy5kcm9wTm90QWxsb3dlZDtpZihBKXt0aGlzLmdob3N0LnVwZGF0ZSgiIil9fSx1cGRhdGU6ZnVuY3Rpb24oQSl7aWYodHlwZW9mIEE9PSJzdHJpbmciKXt0aGlzLmdob3N0LnVwZGF0ZShBKX1lbHNle3RoaXMuZ2hvc3QudXBkYXRlKCIiKTtBLnN0eWxlLm1hcmdpbj0iMCI7dGhpcy5naG9zdC5kb20uYXBwZW5kQ2hpbGQoQSl9fSxnZXRFbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsfSxnZXRHaG9zdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdob3N0fSxoaWRlOmZ1bmN0aW9uKEEpe3RoaXMuZWwuaGlkZSgpO2lmKEEpe3RoaXMucmVzZXQodHJ1ZSl9fSxzdG9wOmZ1bmN0aW9uKCl7aWYodGhpcy5hbmltJiZ0aGlzLmFuaW0uaXNBbmltYXRlZCYmdGhpcy5hbmltLmlzQW5pbWF0ZWQoKSl7dGhpcy5hbmltLnN0b3AoKX19LHNob3c6ZnVuY3Rpb24oKXt0aGlzLmVsLnNob3coKX0sc3luYzpmdW5jdGlvbigpe3RoaXMuZWwuc3luYygpfSxyZXBhaXI6ZnVuY3Rpb24oQixDLEEpe3RoaXMuY2FsbGJhY2s9Qzt0aGlzLnNjb3BlPUE7aWYoQiYmdGhpcy5hbmltUmVwYWlyIT09ZmFsc2Upe3RoaXMuZWwuYWRkQ2xhc3MoIngtZGQtZHJhZy1yZXBhaXIiKTt0aGlzLmVsLmhpZGVVbmRlcnModHJ1ZSk7dGhpcy5hbmltPXRoaXMuZWwuc2hpZnQoe2R1cmF0aW9uOnRoaXMucmVwYWlyRHVyYXRpb258fDAuNSxlYXNpbmc6ImVhc2VPdXQiLHh5OkIsc3RvcEZ4OnRydWUsY2FsbGJhY2s6dGhpcy5hZnRlclJlcGFpcixzY29wZTp0aGlzfSl9ZWxzZXt0aGlzLmFmdGVyUmVwYWlyKCl9fSxhZnRlclJlcGFpcjpmdW5jdGlvbigpe3RoaXMuaGlkZSh0cnVlKTtpZih0eXBlb2YgdGhpcy5jYWxsYmFjaz09ImZ1bmN0aW9uIil7dGhpcy5jYWxsYmFjay5jYWxsKHRoaXMuc2NvcGV8fHRoaXMpfXRoaXMuY2FsbGJhY2s9bnVsbDt0aGlzLnNjb3BlPW51bGx9fTsNCkV4dC5kZC5EcmFnU291cmNlPWZ1bmN0aW9uKEIsQSl7dGhpcy5lbD1FeHQuZ2V0KEIpO2lmKCF0aGlzLmRyYWdEYXRhKXt0aGlzLmRyYWdEYXRhPXt9fUV4dC5hcHBseSh0aGlzLEEpO2lmKCF0aGlzLnByb3h5KXt0aGlzLnByb3h5PW5ldyBFeHQuZGQuU3RhdHVzUHJveHkoKX1FeHQuZGQuRHJhZ1NvdXJjZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyx0aGlzLmVsLmRvbSx0aGlzLmRkR3JvdXB8fHRoaXMuZ3JvdXAse2RyYWdFbElkOnRoaXMucHJveHkuaWQscmVzaXplRnJhbWU6ZmFsc2UsaXNUYXJnZXQ6ZmFsc2Usc2Nyb2xsOnRoaXMuc2Nyb2xsPT09dHJ1ZX0pO3RoaXMuZHJhZ2dpbmc9ZmFsc2V9O0V4dC5leHRlbmQoRXh0LmRkLkRyYWdTb3VyY2UsRXh0LmRkLkREUHJveHkse2Ryb3BBbGxvd2VkOiJ4LWRkLWRyb3Atb2siLGRyb3BOb3RBbGxvd2VkOiJ4LWRkLWRyb3Atbm9kcm9wIixnZXREcmFnRGF0YTpmdW5jdGlvbihBKXtyZXR1cm4gdGhpcy5kcmFnRGF0YX0sb25EcmFnRW50ZXI6ZnVuY3Rpb24oQyxEKXt2YXIgQj1FeHQuZGQuRHJhZ0Ryb3BNZ3IuZ2V0RERCeUlkKEQpO3RoaXMuY2FjaGVkVGFyZ2V0PUI7aWYodGhpcy5iZWZvcmVEcmFnRW50ZXIoQixDLEQpIT09ZmFsc2Upe2lmKEIuaXNOb3RpZnlUYXJnZXQpe3ZhciBBPUIubm90aWZ5RW50ZXIodGhpcyxDLHRoaXMuZHJhZ0RhdGEpO3RoaXMucHJveHkuc2V0U3RhdHVzKEEpfWVsc2V7dGhpcy5wcm94eS5zZXRTdGF0dXModGhpcy5kcm9wQWxsb3dlZCl9aWYodGhpcy5hZnRlckRyYWdFbnRlcil7dGhpcy5hZnRlckRyYWdFbnRlcihCLEMsRCl9fX0sYmVmb3JlRHJhZ0VudGVyOmZ1bmN0aW9uKEIsQSxDKXtyZXR1cm4gdHJ1ZX0sYWxpZ25FbFdpdGhNb3VzZTpmdW5jdGlvbigpe0V4dC5kZC5EcmFnU291cmNlLnN1cGVyY2xhc3MuYWxpZ25FbFdpdGhNb3VzZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5wcm94eS5zeW5jKCl9LG9uRHJhZ092ZXI6ZnVuY3Rpb24oQyxEKXt2YXIgQj10aGlzLmNhY2hlZFRhcmdldHx8RXh0LmRkLkRyYWdEcm9wTWdyLmdldEREQnlJZChEKTtpZih0aGlzLmJlZm9yZURyYWdPdmVyKEIsQyxEKSE9PWZhbHNlKXtpZihCLmlzTm90aWZ5VGFyZ2V0KXt2YXIgQT1CLm5vdGlmeU92ZXIodGhpcyxDLHRoaXMuZHJhZ0RhdGEpO3RoaXMucHJveHkuc2V0U3RhdHVzKEEpfWlmKHRoaXMuYWZ0ZXJEcmFnT3Zlcil7dGhpcy5hZnRlckRyYWdPdmVyKEIsQyxEKX19fSxiZWZvcmVEcmFnT3ZlcjpmdW5jdGlvbihCLEEsQyl7cmV0dXJuIHRydWV9LG9uRHJhZ091dDpmdW5jdGlvbihCLEMpe3ZhciBBPXRoaXMuY2FjaGVkVGFyZ2V0fHxFeHQuZGQuRHJhZ0Ryb3BNZ3IuZ2V0RERCeUlkKEMpO2lmKHRoaXMuYmVmb3JlRHJhZ091dChBLEIsQykhPT1mYWxzZSl7aWYoQS5pc05vdGlmeVRhcmdldCl7QS5ub3RpZnlPdXQodGhpcyxCLHRoaXMuZHJhZ0RhdGEpfXRoaXMucHJveHkucmVzZXQoKTtpZih0aGlzLmFmdGVyRHJhZ091dCl7dGhpcy5hZnRlckRyYWdPdXQoQSxCLEMpfX10aGlzLmNhY2hlZFRhcmdldD1udWxsfSxiZWZvcmVEcmFnT3V0OmZ1bmN0aW9uKEIsQSxDKXtyZXR1cm4gdHJ1ZX0sb25EcmFnRHJvcDpmdW5jdGlvbihCLEMpe3ZhciBBPXRoaXMuY2FjaGVkVGFyZ2V0fHxFeHQuZGQuRHJhZ0Ryb3BNZ3IuZ2V0RERCeUlkKEMpO2lmKHRoaXMuYmVmb3JlRHJhZ0Ryb3AoQSxCLEMpIT09ZmFsc2Upe2lmKEEuaXNOb3RpZnlUYXJnZXQpe2lmKEEubm90aWZ5RHJvcCh0aGlzLEIsdGhpcy5kcmFnRGF0YSkpe3RoaXMub25WYWxpZERyb3AoQSxCLEMpfWVsc2V7dGhpcy5vbkludmFsaWREcm9wKEEsQixDKX19ZWxzZXt0aGlzLm9uVmFsaWREcm9wKEEsQixDKX1pZih0aGlzLmFmdGVyRHJhZ0Ryb3Ape3RoaXMuYWZ0ZXJEcmFnRHJvcChBLEIsQyl9fWRlbGV0ZSB0aGlzLmNhY2hlZFRhcmdldH0sYmVmb3JlRHJhZ0Ryb3A6ZnVuY3Rpb24oQixBLEMpe3JldHVybiB0cnVlfSxvblZhbGlkRHJvcDpmdW5jdGlvbihCLEEsQyl7dGhpcy5oaWRlUHJveHkoKTtpZih0aGlzLmFmdGVyVmFsaWREcm9wKXt0aGlzLmFmdGVyVmFsaWREcm9wKEIsQSxDKX19LGdldFJlcGFpclhZOmZ1bmN0aW9uKEIsQSl7cmV0dXJuIHRoaXMuZWwuZ2V0WFkoKX0sb25JbnZhbGlkRHJvcDpmdW5jdGlvbihCLEEsQyl7dGhpcy5iZWZvcmVJbnZhbGlkRHJvcChCLEEsQyk7aWYodGhpcy5jYWNoZWRUYXJnZXQpe2lmKHRoaXMuY2FjaGVkVGFyZ2V0LmlzTm90aWZ5VGFyZ2V0KXt0aGlzLmNhY2hlZFRhcmdldC5ub3RpZnlPdXQodGhpcyxBLHRoaXMuZHJhZ0RhdGEpfXRoaXMuY2FjaGVUYXJnZXQ9bnVsbH10aGlzLnByb3h5LnJlcGFpcih0aGlzLmdldFJlcGFpclhZKEEsdGhpcy5kcmFnRGF0YSksdGhpcy5hZnRlclJlcGFpcix0aGlzKTtpZih0aGlzLmFmdGVySW52YWxpZERyb3Ape3RoaXMuYWZ0ZXJJbnZhbGlkRHJvcChBLEMpfX0sYWZ0ZXJSZXBhaXI6ZnVuY3Rpb24oKXtpZihFeHQuZW5hYmxlRngpe3RoaXMuZWwuaGlnaGxpZ2h0KHRoaXMuaGxDb2xvcnx8ImMzZGFmOSIpfXRoaXMuZHJhZ2dpbmc9ZmFsc2V9LGJlZm9yZUludmFsaWREcm9wOmZ1bmN0aW9uKEIsQSxDKXtyZXR1cm4gdHJ1ZX0saGFuZGxlTW91c2VEb3duOmZ1bmN0aW9uKEIpe2lmKHRoaXMuZHJhZ2dpbmcpe3JldHVybiB9dmFyIEE9dGhpcy5nZXREcmFnRGF0YShCKTtpZihBJiZ0aGlzLm9uQmVmb3JlRHJhZyhBLEIpIT09ZmFsc2Upe3RoaXMuZHJhZ0RhdGE9QTt0aGlzLnByb3h5LnN0b3AoKTtFeHQuZGQuRHJhZ1NvdXJjZS5zdXBlcmNsYXNzLmhhbmRsZU1vdXNlRG93bi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSxvbkJlZm9yZURyYWc6ZnVuY3Rpb24oQSxCKXtyZXR1cm4gdHJ1ZX0sb25TdGFydERyYWc6RXh0LmVtcHR5Rm4sc3RhcnREcmFnOmZ1bmN0aW9uKEEsQil7dGhpcy5wcm94eS5yZXNldCgpO3RoaXMuZHJhZ2dpbmc9dHJ1ZTt0aGlzLnByb3h5LnVwZGF0ZSgiIik7dGhpcy5vbkluaXREcmFnKEEsQik7dGhpcy5wcm94eS5zaG93KCl9LG9uSW5pdERyYWc6ZnVuY3Rpb24oQSxDKXt2YXIgQj10aGlzLmVsLmRvbS5jbG9uZU5vZGUodHJ1ZSk7Qi5pZD1FeHQuaWQoKTt0aGlzLnByb3h5LnVwZGF0ZShCKTt0aGlzLm9uU3RhcnREcmFnKEEsQyk7cmV0dXJuIHRydWV9LGdldFByb3h5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJveHl9LGhpZGVQcm94eTpmdW5jdGlvbigpe3RoaXMucHJveHkuaGlkZSgpO3RoaXMucHJveHkucmVzZXQodHJ1ZSk7dGhpcy5kcmFnZ2luZz1mYWxzZX0sdHJpZ2dlckNhY2hlUmVmcmVzaDpmdW5jdGlvbigpe0V4dC5kZC5ERE0ucmVmcmVzaENhY2hlKHRoaXMuZ3JvdXBzKX0sYjRFbmREcmFnOmZ1bmN0aW9uKEEpe30sZW5kRHJhZzpmdW5jdGlvbihBKXt0aGlzLm9uRW5kRHJhZyh0aGlzLmRyYWdEYXRhLEEpfSxvbkVuZERyYWc6ZnVuY3Rpb24oQSxCKXt9LGF1dG9PZmZzZXQ6ZnVuY3Rpb24oQSxCKXt0aGlzLnNldERlbHRhKC0xMiwtMjApfX0pOw0KRXh0LmRkLkRyb3BUYXJnZXQ9ZnVuY3Rpb24oQixBKXt0aGlzLmVsPUV4dC5nZXQoQik7RXh0LmFwcGx5KHRoaXMsQSk7aWYodGhpcy5jb250YWluZXJTY3JvbGwpe0V4dC5kZC5TY3JvbGxNYW5hZ2VyLnJlZ2lzdGVyKHRoaXMuZWwpfUV4dC5kZC5Ecm9wVGFyZ2V0LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLHRoaXMuZWwuZG9tLHRoaXMuZGRHcm91cHx8dGhpcy5ncm91cCx7aXNUYXJnZXQ6dHJ1ZX0pfTtFeHQuZXh0ZW5kKEV4dC5kZC5Ecm9wVGFyZ2V0LEV4dC5kZC5ERFRhcmdldCx7ZHJvcEFsbG93ZWQ6IngtZGQtZHJvcC1vayIsZHJvcE5vdEFsbG93ZWQ6IngtZGQtZHJvcC1ub2Ryb3AiLGlzVGFyZ2V0OnRydWUsaXNOb3RpZnlUYXJnZXQ6dHJ1ZSxub3RpZnlFbnRlcjpmdW5jdGlvbihBLEMsQil7aWYodGhpcy5vdmVyQ2xhc3Mpe3RoaXMuZWwuYWRkQ2xhc3ModGhpcy5vdmVyQ2xhc3MpfXJldHVybiB0aGlzLmRyb3BBbGxvd2VkfSxub3RpZnlPdmVyOmZ1bmN0aW9uKEEsQyxCKXtyZXR1cm4gdGhpcy5kcm9wQWxsb3dlZH0sbm90aWZ5T3V0OmZ1bmN0aW9uKEEsQyxCKXtpZih0aGlzLm92ZXJDbGFzcyl7dGhpcy5lbC5yZW1vdmVDbGFzcyh0aGlzLm92ZXJDbGFzcyl9fSxub3RpZnlEcm9wOmZ1bmN0aW9uKEEsQyxCKXtyZXR1cm4gZmFsc2V9fSk7DQpFeHQuZGQuRHJhZ1pvbmU9ZnVuY3Rpb24oQixBKXtFeHQuZGQuRHJhZ1pvbmUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsQixBKTtpZih0aGlzLmNvbnRhaW5lclNjcm9sbCl7RXh0LmRkLlNjcm9sbE1hbmFnZXIucmVnaXN0ZXIodGhpcy5lbCl9fTtFeHQuZXh0ZW5kKEV4dC5kZC5EcmFnWm9uZSxFeHQuZGQuRHJhZ1NvdXJjZSx7Z2V0RHJhZ0RhdGE6ZnVuY3Rpb24oQSl7cmV0dXJuIEV4dC5kZC5SZWdpc3RyeS5nZXRIYW5kbGVGcm9tRXZlbnQoQSl9LG9uSW5pdERyYWc6ZnVuY3Rpb24oQSxCKXt0aGlzLnByb3h5LnVwZGF0ZSh0aGlzLmRyYWdEYXRhLmRkZWwuY2xvbmVOb2RlKHRydWUpKTt0aGlzLm9uU3RhcnREcmFnKEEsQik7cmV0dXJuIHRydWV9LGFmdGVyUmVwYWlyOmZ1bmN0aW9uKCl7aWYoRXh0LmVuYWJsZUZ4KXtFeHQuRWxlbWVudC5mbHkodGhpcy5kcmFnRGF0YS5kZGVsKS5oaWdobGlnaHQodGhpcy5obENvbG9yfHwiYzNkYWY5Iil9dGhpcy5kcmFnZ2luZz1mYWxzZX0sZ2V0UmVwYWlyWFk6ZnVuY3Rpb24oQSl7cmV0dXJuIEV4dC5FbGVtZW50LmZseSh0aGlzLmRyYWdEYXRhLmRkZWwpLmdldFhZKCl9fSk7DQpFeHQuZGQuRHJvcFpvbmU9ZnVuY3Rpb24oQixBKXtFeHQuZGQuRHJvcFpvbmUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsQixBKX07RXh0LmV4dGVuZChFeHQuZGQuRHJvcFpvbmUsRXh0LmRkLkRyb3BUYXJnZXQse2dldFRhcmdldEZyb21FdmVudDpmdW5jdGlvbihBKXtyZXR1cm4gRXh0LmRkLlJlZ2lzdHJ5LmdldFRhcmdldEZyb21FdmVudChBKX0sb25Ob2RlRW50ZXI6ZnVuY3Rpb24oRCxBLEMsQil7fSxvbk5vZGVPdmVyOmZ1bmN0aW9uKEQsQSxDLEIpe3JldHVybiB0aGlzLmRyb3BBbGxvd2VkfSxvbk5vZGVPdXQ6ZnVuY3Rpb24oRCxBLEMsQil7fSxvbk5vZGVEcm9wOmZ1bmN0aW9uKEQsQSxDLEIpe3JldHVybiBmYWxzZX0sb25Db250YWluZXJPdmVyOmZ1bmN0aW9uKEEsQyxCKXtyZXR1cm4gdGhpcy5kcm9wTm90QWxsb3dlZH0sb25Db250YWluZXJEcm9wOmZ1bmN0aW9uKEEsQyxCKXtyZXR1cm4gZmFsc2V9LG5vdGlmeUVudGVyOmZ1bmN0aW9uKEEsQyxCKXtyZXR1cm4gdGhpcy5kcm9wTm90QWxsb3dlZH0sbm90aWZ5T3ZlcjpmdW5jdGlvbihBLEMsQil7dmFyIEQ9dGhpcy5nZXRUYXJnZXRGcm9tRXZlbnQoQyk7aWYoIUQpe2lmKHRoaXMubGFzdE92ZXJOb2RlKXt0aGlzLm9uTm9kZU91dCh0aGlzLmxhc3RPdmVyTm9kZSxBLEMsQik7dGhpcy5sYXN0T3Zlck5vZGU9bnVsbH1yZXR1cm4gdGhpcy5vbkNvbnRhaW5lck92ZXIoQSxDLEIpfWlmKHRoaXMubGFzdE92ZXJOb2RlIT1EKXtpZih0aGlzLmxhc3RPdmVyTm9kZSl7dGhpcy5vbk5vZGVPdXQodGhpcy5sYXN0T3Zlck5vZGUsQSxDLEIpfXRoaXMub25Ob2RlRW50ZXIoRCxBLEMsQik7dGhpcy5sYXN0T3Zlck5vZGU9RH1yZXR1cm4gdGhpcy5vbk5vZGVPdmVyKEQsQSxDLEIpfSxub3RpZnlPdXQ6ZnVuY3Rpb24oQSxDLEIpe2lmKHRoaXMubGFzdE92ZXJOb2RlKXt0aGlzLm9uTm9kZU91dCh0aGlzLmxhc3RPdmVyTm9kZSxBLEMsQik7dGhpcy5sYXN0T3Zlck5vZGU9bnVsbH19LG5vdGlmeURyb3A6ZnVuY3Rpb24oQSxDLEIpe2lmKHRoaXMubGFzdE92ZXJOb2RlKXt0aGlzLm9uTm9kZU91dCh0aGlzLmxhc3RPdmVyTm9kZSxBLEMsQik7dGhpcy5sYXN0T3Zlck5vZGU9bnVsbH12YXIgRD10aGlzLmdldFRhcmdldEZyb21FdmVudChDKTtyZXR1cm4gRD90aGlzLm9uTm9kZURyb3AoRCxBLEMsQik6dGhpcy5vbkNvbnRhaW5lckRyb3AoQSxDLEIpfSx0cmlnZ2VyQ2FjaGVSZWZyZXNoOmZ1bmN0aW9uKCl7RXh0LmRkLkRETS5yZWZyZXNoQ2FjaGUodGhpcy5ncm91cHMpfX0pOw0KRXh0LmRhdGEuU29ydFR5cGVzPXtub25lOmZ1bmN0aW9uKEEpe3JldHVybiBBfSxzdHJpcFRhZ3NSRTovPFwvP1tePl0rPi9naSxhc1RleHQ6ZnVuY3Rpb24oQSl7cmV0dXJuIFN0cmluZyhBKS5yZXBsYWNlKHRoaXMuc3RyaXBUYWdzUkUsIiIpfSxhc1VDVGV4dDpmdW5jdGlvbihBKXtyZXR1cm4gU3RyaW5nKEEpLnRvVXBwZXJDYXNlKCkucmVwbGFjZSh0aGlzLnN0cmlwVGFnc1JFLCIiKX0sYXNVQ1N0cmluZzpmdW5jdGlvbihBKXtyZXR1cm4gU3RyaW5nKEEpLnRvVXBwZXJDYXNlKCl9LGFzRGF0ZTpmdW5jdGlvbihBKXtpZighQSl7cmV0dXJuIDB9aWYoRXh0LmlzRGF0ZShBKSl7cmV0dXJuIEEuZ2V0VGltZSgpfXJldHVybiBEYXRlLnBhcnNlKFN0cmluZyhBKSl9LGFzRmxvYXQ6ZnVuY3Rpb24oQSl7dmFyIEI9cGFyc2VGbG9hdChTdHJpbmcoQSkucmVwbGFjZSgvLC9nLCIiKSk7aWYoaXNOYU4oQikpe0I9MH1yZXR1cm4gQn0sYXNJbnQ6ZnVuY3Rpb24oQSl7dmFyIEI9cGFyc2VJbnQoU3RyaW5nKEEpLnJlcGxhY2UoLywvZywiIikpO2lmKGlzTmFOKEIpKXtCPTB9cmV0dXJuIEJ9fTsNCkV4dC5kYXRhLlJlY29yZD1mdW5jdGlvbihBLEIpe3RoaXMuaWQ9KEJ8fEI9PT0wKT9COisrRXh0LmRhdGEuUmVjb3JkLkFVVE9fSUQ7dGhpcy5kYXRhPUF9O0V4dC5kYXRhLlJlY29yZC5jcmVhdGU9ZnVuY3Rpb24oRSl7dmFyIEM9RXh0LmV4dGVuZChFeHQuZGF0YS5SZWNvcmQse30pO3ZhciBEPUMucHJvdG90eXBlO0QuZmllbGRzPW5ldyBFeHQudXRpbC5NaXhlZENvbGxlY3Rpb24oZmFsc2UsZnVuY3Rpb24oRil7cmV0dXJuIEYubmFtZX0pO2Zvcih2YXIgQj0wLEE9RS5sZW5ndGg7QjxBO0IrKyl7RC5maWVsZHMuYWRkKG5ldyBFeHQuZGF0YS5GaWVsZChFW0JdKSl9Qy5nZXRGaWVsZD1mdW5jdGlvbihGKXtyZXR1cm4gRC5maWVsZHMuZ2V0KEYpfTtyZXR1cm4gQ307RXh0LmRhdGEuUmVjb3JkLkFVVE9fSUQ9MTAwMDtFeHQuZGF0YS5SZWNvcmQuRURJVD0iZWRpdCI7RXh0LmRhdGEuUmVjb3JkLlJFSkVDVD0icmVqZWN0IjtFeHQuZGF0YS5SZWNvcmQuQ09NTUlUPSJjb21taXQiO0V4dC5kYXRhLlJlY29yZC5wcm90b3R5cGU9e2RpcnR5OmZhbHNlLGVkaXRpbmc6ZmFsc2UsZXJyb3I6bnVsbCxtb2RpZmllZDpudWxsLGpvaW46ZnVuY3Rpb24oQSl7dGhpcy5zdG9yZT1BfSxzZXQ6ZnVuY3Rpb24oQSxCKXtpZihTdHJpbmcodGhpcy5kYXRhW0FdKT09U3RyaW5nKEIpKXtyZXR1cm4gfXRoaXMuZGlydHk9dHJ1ZTtpZighdGhpcy5tb2RpZmllZCl7dGhpcy5tb2RpZmllZD17fX1pZih0eXBlb2YgdGhpcy5tb2RpZmllZFtBXT09InVuZGVmaW5lZCIpe3RoaXMubW9kaWZpZWRbQV09dGhpcy5kYXRhW0FdfXRoaXMuZGF0YVtBXT1CO2lmKCF0aGlzLmVkaXRpbmcmJnRoaXMuc3RvcmUpe3RoaXMuc3RvcmUuYWZ0ZXJFZGl0KHRoaXMpfX0sZ2V0OmZ1bmN0aW9uKEEpe3JldHVybiB0aGlzLmRhdGFbQV19LGJlZ2luRWRpdDpmdW5jdGlvbigpe3RoaXMuZWRpdGluZz10cnVlO3RoaXMubW9kaWZpZWQ9e319LGNhbmNlbEVkaXQ6ZnVuY3Rpb24oKXt0aGlzLmVkaXRpbmc9ZmFsc2U7ZGVsZXRlIHRoaXMubW9kaWZpZWR9LGVuZEVkaXQ6ZnVuY3Rpb24oKXt0aGlzLmVkaXRpbmc9ZmFsc2U7aWYodGhpcy5kaXJ0eSYmdGhpcy5zdG9yZSl7dGhpcy5zdG9yZS5hZnRlckVkaXQodGhpcyl9fSxyZWplY3Q6ZnVuY3Rpb24oQil7dmFyIEE9dGhpcy5tb2RpZmllZDtmb3IodmFyIEMgaW4gQSl7aWYodHlwZW9mIEFbQ10hPSJmdW5jdGlvbiIpe3RoaXMuZGF0YVtDXT1BW0NdfX10aGlzLmRpcnR5PWZhbHNlO2RlbGV0ZSB0aGlzLm1vZGlmaWVkO3RoaXMuZWRpdGluZz1mYWxzZTtpZih0aGlzLnN0b3JlJiZCIT09dHJ1ZSl7dGhpcy5zdG9yZS5hZnRlclJlamVjdCh0aGlzKX19LGNvbW1pdDpmdW5jdGlvbihBKXt0aGlzLmRpcnR5PWZhbHNlO2RlbGV0ZSB0aGlzLm1vZGlmaWVkO3RoaXMuZWRpdGluZz1mYWxzZTtpZih0aGlzLnN0b3JlJiZBIT09dHJ1ZSl7dGhpcy5zdG9yZS5hZnRlckNvbW1pdCh0aGlzKX19LGdldENoYW5nZXM6ZnVuY3Rpb24oKXt2YXIgQT10aGlzLm1vZGlmaWVkLEI9e307Zm9yKHZhciBDIGluIEEpe2lmKEEuaGFzT3duUHJvcGVydHkoQykpe0JbQ109dGhpcy5kYXRhW0NdfX1yZXR1cm4gQn0saGFzRXJyb3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcnJvciE9bnVsbH0sY2xlYXJFcnJvcjpmdW5jdGlvbigpe3RoaXMuZXJyb3I9bnVsbH0sY29weTpmdW5jdGlvbihBKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IoRXh0LmFwcGx5KHt9LHRoaXMuZGF0YSksQXx8dGhpcy5pZCl9LGlzTW9kaWZpZWQ6ZnVuY3Rpb24oQSl7cmV0dXJuIHRoaXMubW9kaWZpZWQmJnRoaXMubW9kaWZpZWQuaGFzT3duUHJvcGVydHkoQSl9fTsNCkV4dC5TdG9yZU1ncj1FeHQuYXBwbHkobmV3IEV4dC51dGlsLk1peGVkQ29sbGVjdGlvbigpLHtyZWdpc3RlcjpmdW5jdGlvbigpe2Zvcih2YXIgQT0wLEI7Qj1hcmd1bWVudHNbQV07QSsrKXt0aGlzLmFkZChCKX19LHVucmVnaXN0ZXI6ZnVuY3Rpb24oKXtmb3IodmFyIEE9MCxCO0I9YXJndW1lbnRzW0FdO0ErKyl7dGhpcy5yZW1vdmUodGhpcy5sb29rdXAoQikpfX0sbG9va3VwOmZ1bmN0aW9uKEEpe3JldHVybiB0eXBlb2YgQT09Im9iamVjdCI/QTp0aGlzLmdldChBKX0sZ2V0S2V5OmZ1bmN0aW9uKEEpe3JldHVybiBBLnN0b3JlSWR8fEEuaWR9fSk7DQpFeHQuZGF0YS5TdG9yZT1mdW5jdGlvbihBKXt0aGlzLmRhdGE9bmV3IEV4dC51dGlsLk1peGVkQ29sbGVjdGlvbihmYWxzZSk7dGhpcy5kYXRhLmdldEtleT1mdW5jdGlvbihCKXtyZXR1cm4gQi5pZH07dGhpcy5iYXNlUGFyYW1zPXt9O3RoaXMucGFyYW1OYW1lcz17InN0YXJ0Ijoic3RhcnQiLCJsaW1pdCI6ImxpbWl0Iiwic29ydCI6InNvcnQiLCJkaXIiOiJkaXIifTtpZihBJiZBLmRhdGEpe3RoaXMuaW5saW5lRGF0YT1BLmRhdGE7ZGVsZXRlIEEuZGF0YX1FeHQuYXBwbHkodGhpcyxBKTtpZih0aGlzLnVybCYmIXRoaXMucHJveHkpe3RoaXMucHJveHk9bmV3IEV4dC5kYXRhLkh0dHBQcm94eSh7dXJsOnRoaXMudXJsfSl9aWYodGhpcy5yZWFkZXIpe2lmKCF0aGlzLnJlY29yZFR5cGUpe3RoaXMucmVjb3JkVHlwZT10aGlzLnJlYWRlci5yZWNvcmRUeXBlfWlmKHRoaXMucmVhZGVyLm9uTWV0YUNoYW5nZSl7dGhpcy5yZWFkZXIub25NZXRhQ2hhbmdlPXRoaXMub25NZXRhQ2hhbmdlLmNyZWF0ZURlbGVnYXRlKHRoaXMpfX1pZih0aGlzLnJlY29yZFR5cGUpe3RoaXMuZmllbGRzPXRoaXMucmVjb3JkVHlwZS5wcm90b3R5cGUuZmllbGRzfXRoaXMubW9kaWZpZWQ9W107dGhpcy5hZGRFdmVudHMoImRhdGFjaGFuZ2VkIiwibWV0YWNoYW5nZSIsImFkZCIsInJlbW92ZSIsInVwZGF0ZSIsImNsZWFyIiwiYmVmb3JlbG9hZCIsImxvYWQiLCJsb2FkZXhjZXB0aW9uIik7aWYodGhpcy5wcm94eSl7dGhpcy5yZWxheUV2ZW50cyh0aGlzLnByb3h5LFsibG9hZGV4Y2VwdGlvbiJdKX10aGlzLnNvcnRUb2dnbGU9e307aWYodGhpcy5zb3J0SW5mbyl7dGhpcy5zZXREZWZhdWx0U29ydCh0aGlzLnNvcnRJbmZvLmZpZWxkLHRoaXMuc29ydEluZm8uZGlyZWN0aW9uKX1FeHQuZGF0YS5TdG9yZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7aWYodGhpcy5zdG9yZUlkfHx0aGlzLmlkKXtFeHQuU3RvcmVNZ3IucmVnaXN0ZXIodGhpcyl9aWYodGhpcy5pbmxpbmVEYXRhKXt0aGlzLmxvYWREYXRhKHRoaXMuaW5saW5lRGF0YSk7ZGVsZXRlIHRoaXMuaW5saW5lRGF0YX1lbHNle2lmKHRoaXMuYXV0b0xvYWQpe3RoaXMubG9hZC5kZWZlcigxMCx0aGlzLFt0eXBlb2YgdGhpcy5hdXRvTG9hZD09Im9iamVjdCI/dGhpcy5hdXRvTG9hZDp1bmRlZmluZWRdKX19fTtFeHQuZXh0ZW5kKEV4dC5kYXRhLlN0b3JlLEV4dC51dGlsLk9ic2VydmFibGUse3JlbW90ZVNvcnQ6ZmFsc2UscHJ1bmVNb2RpZmllZFJlY29yZHM6ZmFsc2UsbGFzdE9wdGlvbnM6bnVsbCxkZXN0cm95OmZ1bmN0aW9uKCl7aWYodGhpcy5pZCl7RXh0LlN0b3JlTWdyLnVucmVnaXN0ZXIodGhpcyl9dGhpcy5kYXRhPW51bGw7dGhpcy5wdXJnZUxpc3RlbmVycygpfSxhZGQ6ZnVuY3Rpb24oQil7Qj1bXS5jb25jYXQoQik7aWYoQi5sZW5ndGg8MSl7cmV0dXJuIH1mb3IodmFyIEQ9MCxBPUIubGVuZ3RoO0Q8QTtEKyspe0JbRF0uam9pbih0aGlzKX12YXIgQz10aGlzLmRhdGEubGVuZ3RoO3RoaXMuZGF0YS5hZGRBbGwoQik7aWYodGhpcy5zbmFwc2hvdCl7dGhpcy5zbmFwc2hvdC5hZGRBbGwoQil9dGhpcy5maXJlRXZlbnQoImFkZCIsdGhpcyxCLEMpfSxhZGRTb3J0ZWQ6ZnVuY3Rpb24oQSl7dmFyIEI9dGhpcy5maW5kSW5zZXJ0SW5kZXgoQSk7dGhpcy5pbnNlcnQoQixBKX0scmVtb3ZlOmZ1bmN0aW9uKEEpe3ZhciBCPXRoaXMuZGF0YS5pbmRleE9mKEEpO3RoaXMuZGF0YS5yZW1vdmVBdChCKTtpZih0aGlzLnBydW5lTW9kaWZpZWRSZWNvcmRzKXt0aGlzLm1vZGlmaWVkLnJlbW92ZShBKX1pZih0aGlzLnNuYXBzaG90KXt0aGlzLnNuYXBzaG90LnJlbW92ZShBKX10aGlzLmZpcmVFdmVudCgicmVtb3ZlIix0aGlzLEEsQil9LHJlbW92ZUFsbDpmdW5jdGlvbigpe3RoaXMuZGF0YS5jbGVhcigpO2lmKHRoaXMuc25hcHNob3Qpe3RoaXMuc25hcHNob3QuY2xlYXIoKX1pZih0aGlzLnBydW5lTW9kaWZpZWRSZWNvcmRzKXt0aGlzLm1vZGlmaWVkPVtdfXRoaXMuZmlyZUV2ZW50KCJjbGVhciIsdGhpcyl9LGluc2VydDpmdW5jdGlvbihDLEIpe0I9W10uY29uY2F0KEIpO2Zvcih2YXIgRD0wLEE9Qi5sZW5ndGg7RDxBO0QrKyl7dGhpcy5kYXRhLmluc2VydChDLEJbRF0pO0JbRF0uam9pbih0aGlzKX10aGlzLmZpcmVFdmVudCgiYWRkIix0aGlzLEIsQyl9LGluZGV4T2Y6ZnVuY3Rpb24oQSl7cmV0dXJuIHRoaXMuZGF0YS5pbmRleE9mKEEpfSxpbmRleE9mSWQ6ZnVuY3Rpb24oQSl7cmV0dXJuIHRoaXMuZGF0YS5pbmRleE9mS2V5KEEpfSxnZXRCeUlkOmZ1bmN0aW9uKEEpe3JldHVybiB0aGlzLmRhdGEua2V5KEEpfSxnZXRBdDpmdW5jdGlvbihBKXtyZXR1cm4gdGhpcy5kYXRhLml0ZW1BdChBKX0sZ2V0UmFuZ2U6ZnVuY3Rpb24oQixBKXtyZXR1cm4gdGhpcy5kYXRhLmdldFJhbmdlKEIsQSl9LHN0b3JlT3B0aW9uczpmdW5jdGlvbihBKXtBPUV4dC5hcHBseSh7fSxBKTtkZWxldGUgQS5jYWxsYmFjaztkZWxldGUgQS5zY29wZTt0aGlzLmxhc3RPcHRpb25zPUF9LGxvYWQ6ZnVuY3Rpb24oQil7Qj1CfHx7fTtpZih0aGlzLmZpcmVFdmVudCgiYmVmb3JlbG9hZCIsdGhpcyxCKSE9PWZhbHNlKXt0aGlzLnN0b3JlT3B0aW9ucyhCKTt2YXIgQz1FeHQuYXBwbHkoQi5wYXJhbXN8fHt9LHRoaXMuYmFzZVBhcmFtcyk7aWYodGhpcy5zb3J0SW5mbyYmdGhpcy5yZW1vdGVTb3J0KXt2YXIgQT10aGlzLnBhcmFtTmFtZXM7Q1tBWyJzb3J0Il1dPXRoaXMuc29ydEluZm8uZmllbGQ7Q1tBWyJkaXIiXV09dGhpcy5zb3J0SW5mby5kaXJlY3Rpb259dGhpcy5wcm94eS5sb2FkKEMsdGhpcy5yZWFkZXIsdGhpcy5sb2FkUmVjb3Jkcyx0aGlzLEIpO3JldHVybiB0cnVlfWVsc2V7cmV0dXJuIGZhbHNlfX0scmVsb2FkOmZ1bmN0aW9uKEEpe3RoaXMubG9hZChFeHQuYXBwbHlJZihBfHx7fSx0aGlzLmxhc3RPcHRpb25zKSl9LGxvYWRSZWNvcmRzOmZ1bmN0aW9uKEcsQixGKXtpZighR3x8Rj09PWZhbHNlKXtpZihGIT09ZmFsc2Upe3RoaXMuZmlyZUV2ZW50KCJsb2FkIix0aGlzLFtdLEIpfWlmKEIuY2FsbGJhY2spe0IuY2FsbGJhY2suY2FsbChCLnNjb3BlfHx0aGlzLFtdLEIsZmFsc2UpfXJldHVybiB9dmFyIEU9Ry5yZWNvcmRzLEQ9Ry50b3RhbFJlY29yZHN8fEUubGVuZ3RoO2lmKCFCfHxCLmFkZCE9PXRydWUpe2lmKHRoaXMucHJ1bmVNb2RpZmllZFJlY29yZHMpe3RoaXMubW9kaWZpZWQ9W119Zm9yKHZhciBDPTAsQT1FLmxlbmd0aDtDPEE7QysrKXtFW0NdLmpvaW4odGhpcyl9aWYodGhpcy5zbmFwc2hvdCl7dGhpcy5kYXRhPXRoaXMuc25hcHNob3Q7ZGVsZXRlIHRoaXMuc25hcHNob3R9dGhpcy5kYXRhLmNsZWFyKCk7dGhpcy5kYXRhLmFkZEFsbChFKTt0aGlzLnRvdGFsTGVuZ3RoPUQ7dGhpcy5hcHBseVNvcnQoKTt0aGlzLmZpcmVFdmVudCgiZGF0YWNoYW5nZWQiLHRoaXMpfWVsc2V7dGhpcy50b3RhbExlbmd0aD1NYXRoLm1heChELHRoaXMuZGF0YS5sZW5ndGgrRS5sZW5ndGgpO3RoaXMuYWRkKEUpfXRoaXMuZmlyZUV2ZW50KCJsb2FkIix0aGlzLEUsQik7aWYoQi5jYWxsYmFjayl7Qi5jYWxsYmFjay5jYWxsKEIuc2NvcGV8fHRoaXMsRSxCLHRydWUpfX0sbG9hZERhdGE6ZnVuY3Rpb24oQyxBKXt2YXIgQj10aGlzLnJlYWRlci5yZWFkUmVjb3JkcyhDKTt0aGlzLmxvYWRSZWNvcmRzKEIse2FkZDpBfSx0cnVlKX0sZ2V0Q291bnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhLmxlbmd0aHx8MH0sZ2V0VG90YWxDb3VudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRvdGFsTGVuZ3RofHwwfSxnZXRTb3J0U3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zb3J0SW5mb30sYXBwbHlTb3J0OmZ1bmN0aW9uKCl7aWYodGhpcy5zb3J0SW5mbyYmIXRoaXMucmVtb3RlU29ydCl7dmFyIEE9dGhpcy5zb3J0SW5mbyxCPUEuZmllbGQ7dGhpcy5zb3J0RGF0YShCLEEuZGlyZWN0aW9uKX19LHNvcnREYXRhOmZ1bmN0aW9uKEMsRCl7RD1EfHwiQVNDIjt2YXIgQT10aGlzLmZpZWxkcy5nZXQoQykuc29ydFR5cGU7dmFyIEI9ZnVuY3Rpb24oRixFKXt2YXIgSD1BKEYuZGF0YVtDXSksRz1BKEUuZGF0YVtDXSk7cmV0dXJuIGNvbXBhcmVWYWx1ZUJ5VHlwZShILEcpfTt0aGlzLmRhdGEuc29ydChELEIpO2lmKHRoaXMuc25hcHNob3QmJnRoaXMuc25hcHNob3QhPXRoaXMuZGF0YSl7dGhpcy5zbmFwc2hvdC5zb3J0KEQsQil9fSxzZXREZWZhdWx0U29ydDpmdW5jdGlvbihCLEEpe0E9QT9BLnRvVXBwZXJDYXNlKCk6IkFTQyI7dGhpcy5zb3J0SW5mbz17ZmllbGQ6QixkaXJlY3Rpb246QX07dGhpcy5zb3J0VG9nZ2xlW0JdPUF9LHNvcnQ6ZnVuY3Rpb24oRSxDKXt2YXIgRD10aGlzLmZpZWxkcy5nZXQoRSk7aWYoIUQpe3JldHVybiBmYWxzZX1pZighQyl7aWYodGhpcy5zb3J0SW5mbyYmdGhpcy5zb3J0SW5mby5maWVsZD09RC5uYW1lKXtDPSh0aGlzLnNvcnRUb2dnbGVbRC5uYW1lXXx8IkFTQyIpLnRvZ2dsZSgiQVNDIiwiREVTQyIpfWVsc2V7Qz1ELnNvcnREaXJ9fXZhciBCPSh0aGlzLnNvcnRUb2dnbGUpP3RoaXMuc29ydFRvZ2dsZVtELm5hbWVdOm51bGw7dmFyIEE9KHRoaXMuc29ydEluZm8pP3RoaXMuc29ydEluZm86bnVsbDt0aGlzLnNvcnRUb2dnbGVbRC5uYW1lXT1DO3RoaXMuc29ydEluZm89e2ZpZWxkOkQubmFtZSxkaXJlY3Rpb246Q307aWYoIXRoaXMucmVtb3RlU29ydCl7dGhpcy5hcHBseVNvcnQoKTt0aGlzLmZpcmVFdmVudCgiZGF0YWNoYW5nZWQiLHRoaXMpfWVsc2V7aWYoIXRoaXMubG9hZCh0aGlzLmxhc3RPcHRpb25zKSl7aWYoQil7dGhpcy5zb3J0VG9nZ2xlW0QubmFtZV09Qn1pZihBKXt0aGlzLnNvcnRJbmZvPUF9fX19LGVhY2g6ZnVuY3Rpb24oQixBKXt0aGlzLmRhdGEuZWFjaChCLEEpfSxnZXRNb2RpZmllZFJlY29yZHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tb2RpZmllZH0sY3JlYXRlRmlsdGVyRm46ZnVuY3Rpb24oQyxCLEQsQSl7aWYoRXh0LmlzRW1wdHkoQixmYWxzZSkpe3JldHVybiBmYWxzZX1CPXRoaXMuZGF0YS5jcmVhdGVWYWx1ZU1hdGNoZXIoQixELEEpO3JldHVybiBmdW5jdGlvbihFKXtyZXR1cm4gQi50ZXN0KEUuZGF0YVtDXSl9fSxzdW06ZnVuY3Rpb24oRSxGLEEpe3ZhciBDPXRoaXMuZGF0YS5pdGVtcyxCPTA7Rj1GfHwwO0E9KEF8fEE9PT0wKT9BOkMubGVuZ3RoLTE7Zm9yKHZhciBEPUY7RDw9QTtEKyspe0IrPShDW0RdLmRhdGFbRV18fDApfXJldHVybiBCfSxmaWx0ZXI6ZnVuY3Rpb24oRCxDLEUsQSl7dmFyIEI9dGhpcy5jcmVhdGVGaWx0ZXJGbihELEMsRSxBKTtyZXR1cm4gQj90aGlzLmZpbHRlckJ5KEIpOnRoaXMuY2xlYXJGaWx0ZXIoKX0sZmlsdGVyQnk6ZnVuY3Rpb24oQixBKXt0aGlzLnNuYXBzaG90PXRoaXMuc25hcHNob3R8fHRoaXMuZGF0YTt0aGlzLmRhdGE9dGhpcy5xdWVyeUJ5KEIsQXx8dGhpcyk7dGhpcy5maXJlRXZlbnQoImRhdGFjaGFuZ2VkIix0aGlzKX0scXVlcnk6ZnVuY3Rpb24oRCxDLEUsQSl7dmFyIEI9dGhpcy5jcmVhdGVGaWx0ZXJGbihELEMsRSxBKTtyZXR1cm4gQj90aGlzLnF1ZXJ5QnkoQik6dGhpcy5kYXRhLmNsb25lKCl9LHF1ZXJ5Qnk6ZnVuY3Rpb24oQixBKXt2YXIgQz10aGlzLnNuYXBzaG90fHx0aGlzLmRhdGE7cmV0dXJuIEMuZmlsdGVyQnkoQixBfHx0aGlzKX0sZmluZDpmdW5jdGlvbihELEMsRixFLEEpe3ZhciBCPXRoaXMuY3JlYXRlRmlsdGVyRm4oRCxDLEUsQSk7cmV0dXJuIEI/dGhpcy5kYXRhLmZpbmRJbmRleEJ5KEIsbnVsbCxGKTotMX0sZmluZEJ5OmZ1bmN0aW9uKEIsQSxDKXtyZXR1cm4gdGhpcy5kYXRhLmZpbmRJbmRleEJ5KEIsQSxDKX0sY29sbGVjdDpmdW5jdGlvbihHLEgsQil7dmFyIEY9KEI9PT10cnVlJiZ0aGlzLnNuYXBzaG90KT90aGlzLnNuYXBzaG90Lml0ZW1zOnRoaXMuZGF0YS5pdGVtczt2YXIgSSxKLEE9W10sQz17fTtmb3IodmFyIEQ9MCxFPUYubGVuZ3RoO0Q8RTtEKyspe0k9RltEXS5kYXRhW0ddO0o9U3RyaW5nKEkpO2lmKChIfHwhRXh0LmlzRW1wdHkoSSkpJiYhQ1tKXSl7Q1tKXT10cnVlO0FbQS5sZW5ndGhdPUl9fXJldHVybiBBfSxjbGVhckZpbHRlcjpmdW5jdGlvbihBKXtpZih0aGlzLmlzRmlsdGVyZWQoKSl7dGhpcy5kYXRhPXRoaXMuc25hcHNob3Q7ZGVsZXRlIHRoaXMuc25hcHNob3Q7aWYoQSE9PXRydWUpe3RoaXMuZmlyZUV2ZW50KCJkYXRhY2hhbmdlZCIsdGhpcyl9fX0saXNGaWx0ZXJlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNuYXBzaG90JiZ0aGlzLnNuYXBzaG90IT10aGlzLmRhdGF9LGFmdGVyRWRpdDpmdW5jdGlvbihBKXtpZih0aGlzLm1vZGlmaWVkLmluZGV4T2YoQSk9PS0xKXt0aGlzLm1vZGlmaWVkLnB1c2goQSl9dGhpcy5maXJlRXZlbnQoInVwZGF0ZSIsdGhpcyxBLEV4dC5kYXRhLlJlY29yZC5FRElUKX0sYWZ0ZXJSZWplY3Q6ZnVuY3Rpb24oQSl7dGhpcy5tb2RpZmllZC5yZW1vdmUoQSk7dGhpcy5maXJlRXZlbnQoInVwZGF0ZSIsdGhpcyxBLEV4dC5kYXRhLlJlY29yZC5SRUpFQ1QpfSxhZnRlckNvbW1pdDpmdW5jdGlvbihBKXt0aGlzLm1vZGlmaWVkLnJlbW92ZShBKTt0aGlzLmZpcmVFdmVudCgidXBkYXRlIix0aGlzLEEsRXh0LmRhdGEuUmVjb3JkLkNPTU1JVCl9LGNvbW1pdENoYW5nZXM6ZnVuY3Rpb24oKXt2YXIgQj10aGlzLm1vZGlmaWVkLnNsaWNlKDApO3RoaXMubW9kaWZpZWQ9W107Zm9yKHZhciBDPTAsQT1CLmxlbmd0aDtDPEE7QysrKXtCW0NdLmNvbW1pdCgpfX0scmVqZWN0Q2hhbmdlczpmdW5jdGlvbigpe3ZhciBCPXRoaXMubW9kaWZpZWQuc2xpY2UoMCk7dGhpcy5tb2RpZmllZD1bXTtmb3IodmFyIEM9MCxBPUIubGVuZ3RoO0M8QTtDKyspe0JbQ10ucmVqZWN0KCl9fSxvbk1ldGFDaGFuZ2U6ZnVuY3Rpb24oQixBLEMpe3RoaXMucmVjb3JkVHlwZT1BO3RoaXMuZmllbGRzPUEucHJvdG90eXBlLmZpZWxkcztkZWxldGUgdGhpcy5zbmFwc2hvdDt0aGlzLnNvcnRJbmZvPUIuc29ydEluZm87dGhpcy5tb2RpZmllZD1bXTt0aGlzLmZpcmVFdmVudCgibWV0YWNoYW5nZSIsdGhpcyx0aGlzLnJlYWRlci5tZXRhKX0sZmluZEluc2VydEluZGV4OmZ1bmN0aW9uKEEpe3RoaXMuc3VzcGVuZEV2ZW50cygpO3ZhciBDPXRoaXMuZGF0YS5jbG9uZSgpO3RoaXMuZGF0YS5hZGQoQSk7dGhpcy5hcHBseVNvcnQoKTt2YXIgQj10aGlzLmRhdGEuaW5kZXhPZihBKTt0aGlzLmRhdGE9Qzt0aGlzLnJlc3VtZUV2ZW50cygpO3JldHVybiBCfX0pOw0KRXh0LmRhdGEuU2ltcGxlU3RvcmU9ZnVuY3Rpb24oQSl7RXh0LmRhdGEuU2ltcGxlU3RvcmUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsRXh0LmFwcGx5KEEse3JlYWRlcjpuZXcgRXh0LmRhdGEuQXJyYXlSZWFkZXIoe2lkOkEuaWR9LEV4dC5kYXRhLlJlY29yZC5jcmVhdGUoQS5maWVsZHMpKX0pKX07RXh0LmV4dGVuZChFeHQuZGF0YS5TaW1wbGVTdG9yZSxFeHQuZGF0YS5TdG9yZSx7bG9hZERhdGE6ZnVuY3Rpb24oRSxCKXtpZih0aGlzLmV4cGFuZERhdGE9PT10cnVlKXt2YXIgRD1bXTtmb3IodmFyIEM9MCxBPUUubGVuZ3RoO0M8QTtDKyspe0RbRC5sZW5ndGhdPVtFW0NdXX1FPUR9RXh0LmRhdGEuU2ltcGxlU3RvcmUuc3VwZXJjbGFzcy5sb2FkRGF0YS5jYWxsKHRoaXMsRSxCKX19KTsNCkV4dC5kYXRhLkpzb25TdG9yZT1mdW5jdGlvbihBKXtFeHQuZGF0YS5Kc29uU3RvcmUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsRXh0LmFwcGx5KEEse3Byb3h5OiFBLmRhdGE/bmV3IEV4dC5kYXRhLkh0dHBQcm94eSh7dXJsOkEudXJsfSk6dW5kZWZpbmVkLHJlYWRlcjpuZXcgRXh0LmRhdGEuSnNvblJlYWRlcihBLEEuZmllbGRzKX0pKX07RXh0LmV4dGVuZChFeHQuZGF0YS5Kc29uU3RvcmUsRXh0LmRhdGEuU3RvcmUpOw0KRXh0LmRhdGEuRmllbGQ9ZnVuY3Rpb24oRCl7aWYodHlwZW9mIEQ9PSJzdHJpbmciKXtEPXtuYW1lOkR9fUV4dC5hcHBseSh0aGlzLEQpO2lmKCF0aGlzLnR5cGUpe3RoaXMudHlwZT0iYXV0byJ9dmFyIEM9RXh0LmRhdGEuU29ydFR5cGVzO2lmKHR5cGVvZiB0aGlzLnNvcnRUeXBlPT0ic3RyaW5nIil7dGhpcy5zb3J0VHlwZT1DW3RoaXMuc29ydFR5cGVdfWlmKCF0aGlzLnNvcnRUeXBlKXtzd2l0Y2godGhpcy50eXBlKXtjYXNlInN0cmluZyI6dGhpcy5zb3J0VHlwZT1DLmFzVUNTdHJpbmc7YnJlYWs7Y2FzZSJkYXRlIjp0aGlzLnNvcnRUeXBlPUMuYXNEYXRlO2JyZWFrO2RlZmF1bHQ6dGhpcy5zb3J0VHlwZT1DLm5vbmV9fXZhciBFPS9bXCQsJV0vZztpZighdGhpcy5jb252ZXJ0KXt2YXIgQixBPXRoaXMuZGF0ZUZvcm1hdDtzd2l0Y2godGhpcy50eXBlKXtjYXNlIiI6Y2FzZSJhdXRvIjpjYXNlIHVuZGVmaW5lZDpCPWZ1bmN0aW9uKEYpe3JldHVybiBGfTticmVhaztjYXNlInN0cmluZyI6Qj1mdW5jdGlvbihGKXtyZXR1cm4oRj09PXVuZGVmaW5lZHx8Rj09PW51bGwpPyIiOlN0cmluZyhGKX07YnJlYWs7Y2FzZSJpbnQiOkI9ZnVuY3Rpb24oRil7cmV0dXJuIEYhPT11bmRlZmluZWQmJkYhPT1udWxsJiZGIT09IiI/cGFyc2VJbnQoU3RyaW5nKEYpLnJlcGxhY2UoRSwiIiksMTApOiIifTticmVhaztjYXNlImZsb2F0IjpCPWZ1bmN0aW9uKEYpe3JldHVybiBGIT09dW5kZWZpbmVkJiZGIT09bnVsbCYmRiE9PSIiP3BhcnNlRmxvYXQoU3RyaW5nKEYpLnJlcGxhY2UoRSwiIiksMTApOiIifTticmVhaztjYXNlImJvb2wiOmNhc2UiYm9vbGVhbiI6Qj1mdW5jdGlvbihGKXtyZXR1cm4gRj09PXRydWV8fEY9PT0idHJ1ZSJ8fEY9PTF9O2JyZWFrO2Nhc2UiZGF0ZSI6Qj1mdW5jdGlvbihHKXtpZighRyl7cmV0dXJuIiJ9aWYoRXh0LmlzRGF0ZShHKSl7cmV0dXJuIEd9aWYoQSl7aWYoQT09InRpbWVzdGFtcCIpe3JldHVybiBuZXcgRGF0ZShHKjEwMDApfWlmKEE9PSJ0aW1lIil7cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KEcsMTApKX1yZXR1cm4gRGF0ZS5wYXJzZURhdGUoRyxBKX12YXIgRj1EYXRlLnBhcnNlKEcpO3JldHVybiBGP25ldyBEYXRlKEYpOm51bGx9O2JyZWFrfXRoaXMuY29udmVydD1CfX07RXh0LmRhdGEuRmllbGQucHJvdG90eXBlPXtkYXRlRm9ybWF0Om51bGwsZGVmYXVsdFZhbHVlOiIiLG1hcHBpbmc6bnVsbCxzb3J0VHlwZTpudWxsLHNvcnREaXI6IkFTQyJ9Ow0KRXh0LmRhdGEuRGF0YVJlYWRlcj1mdW5jdGlvbihBLEIpe3RoaXMubWV0YT1BO3RoaXMucmVjb3JkVHlwZT1FeHQuaXNBcnJheShCKT9FeHQuZGF0YS5SZWNvcmQuY3JlYXRlKEIpOkJ9O0V4dC5kYXRhLkRhdGFSZWFkZXIucHJvdG90eXBlPXt9Ow0KRXh0LmRhdGEuRGF0YVByb3h5PWZ1bmN0aW9uKCl7dGhpcy5hZGRFdmVudHMoImJlZm9yZWxvYWQiLCJsb2FkIiwibG9hZGV4Y2VwdGlvbiIpO0V4dC5kYXRhLkRhdGFQcm94eS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyl9O0V4dC5leHRlbmQoRXh0LmRhdGEuRGF0YVByb3h5LEV4dC51dGlsLk9ic2VydmFibGUpOw0KRXh0LmRhdGEuTWVtb3J5UHJveHk9ZnVuY3Rpb24oQSl7RXh0LmRhdGEuTWVtb3J5UHJveHkuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMuZGF0YT1BfTtFeHQuZXh0ZW5kKEV4dC5kYXRhLk1lbW9yeVByb3h5LEV4dC5kYXRhLkRhdGFQcm94eSx7bG9hZDpmdW5jdGlvbihGLEMsRyxELEIpe0Y9Rnx8e307dmFyIEE7dHJ5e0E9Qy5yZWFkUmVjb3Jkcyh0aGlzLmRhdGEpfWNhdGNoKEUpe3RoaXMuZmlyZUV2ZW50KCJsb2FkZXhjZXB0aW9uIix0aGlzLEIsbnVsbCxFKTtHLmNhbGwoRCxudWxsLEIsZmFsc2UpO3JldHVybiB9Ry5jYWxsKEQsQSxCLHRydWUpfSx1cGRhdGU6ZnVuY3Rpb24oQixBKXt9fSk7DQpFeHQuZGF0YS5IdHRwUHJveHk9ZnVuY3Rpb24oQSl7RXh0LmRhdGEuSHR0cFByb3h5LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLmNvbm49QTt0aGlzLnVzZUFqYXg9IUF8fCFBLmV2ZW50c307RXh0LmV4dGVuZChFeHQuZGF0YS5IdHRwUHJveHksRXh0LmRhdGEuRGF0YVByb3h5LHtnZXRDb25uZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudXNlQWpheD9FeHQuQWpheDp0aGlzLmNvbm59LGxvYWQ6ZnVuY3Rpb24oRSxCLEYsQyxBKXtpZih0aGlzLmZpcmVFdmVudCgiYmVmb3JlbG9hZCIsdGhpcyxFKSE9PWZhbHNlKXt2YXIgRD17cGFyYW1zOkV8fHt9LHJlcXVlc3Q6e2NhbGxiYWNrOkYsc2NvcGU6Qyxhcmc6QX0scmVhZGVyOkIsY2FsbGJhY2s6dGhpcy5sb2FkUmVzcG9uc2Usc2NvcGU6dGhpc307aWYodGhpcy51c2VBamF4KXtFeHQuYXBwbHlJZihELHRoaXMuY29ubik7aWYodGhpcy5hY3RpdmVSZXF1ZXN0KXtFeHQuQWpheC5hYm9ydCh0aGlzLmFjdGl2ZVJlcXVlc3QpfXRoaXMuYWN0aXZlUmVxdWVzdD1FeHQuQWpheC5yZXF1ZXN0KEQpfWVsc2V7dGhpcy5jb25uLnJlcXVlc3QoRCl9fWVsc2V7Ri5jYWxsKEN8fHRoaXMsbnVsbCxBLGZhbHNlKX19LGxvYWRSZXNwb25zZTpmdW5jdGlvbihFLEQsQil7ZGVsZXRlIHRoaXMuYWN0aXZlUmVxdWVzdDtpZighRCl7dGhpcy5maXJlRXZlbnQoImxvYWRleGNlcHRpb24iLHRoaXMsRSxCKTtFLnJlcXVlc3QuY2FsbGJhY2suY2FsbChFLnJlcXVlc3Quc2NvcGUsbnVsbCxFLnJlcXVlc3QuYXJnLGZhbHNlKTtyZXR1cm4gfXZhciBBO3RyeXtBPUUucmVhZGVyLnJlYWQoQil9Y2F0Y2goQyl7dGhpcy5maXJlRXZlbnQoImxvYWRleGNlcHRpb24iLHRoaXMsRSxCLEMpO0UucmVxdWVzdC5jYWxsYmFjay5jYWxsKEUucmVxdWVzdC5zY29wZSxudWxsLEUucmVxdWVzdC5hcmcsZmFsc2UpO3JldHVybiB9dGhpcy5maXJlRXZlbnQoImxvYWQiLHRoaXMsRSxFLnJlcXVlc3QuYXJnKTtFLnJlcXVlc3QuY2FsbGJhY2suY2FsbChFLnJlcXVlc3Quc2NvcGUsQSxFLnJlcXVlc3QuYXJnLHRydWUpfSx1cGRhdGU6ZnVuY3Rpb24oQSl7fSx1cGRhdGVSZXNwb25zZTpmdW5jdGlvbihBKXt9fSk7DQpFeHQuZGF0YS5TY3JpcHRUYWdQcm94eT1mdW5jdGlvbihBKXtFeHQuZGF0YS5TY3JpcHRUYWdQcm94eS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7RXh0LmFwcGx5KHRoaXMsQSk7dGhpcy5oZWFkPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF19O0V4dC5kYXRhLlNjcmlwdFRhZ1Byb3h5LlRSQU5TX0lEPTEwMDA7RXh0LmV4dGVuZChFeHQuZGF0YS5TY3JpcHRUYWdQcm94eSxFeHQuZGF0YS5EYXRhUHJveHkse3RpbWVvdXQ6MzAwMDAsY2FsbGJhY2tQYXJhbToiY2FsbGJhY2siLG5vY2FjaGU6dHJ1ZSxsb2FkOmZ1bmN0aW9uKEUsRixILEksSil7aWYodGhpcy5maXJlRXZlbnQoImJlZm9yZWxvYWQiLHRoaXMsRSkhPT1mYWxzZSl7dmFyIEM9RXh0LnVybEVuY29kZShFeHQuYXBwbHkoRSx0aGlzLmV4dHJhUGFyYW1zKSk7dmFyIEI9dGhpcy51cmw7Qis9KEIuaW5kZXhPZigiPyIpIT0tMT8iJiI6Ij8iKStDO2lmKHRoaXMubm9jYWNoZSl7Qis9IiZfZGM9IisobmV3IERhdGUoKS5nZXRUaW1lKCkpfXZhciBBPSsrRXh0LmRhdGEuU2NyaXB0VGFnUHJveHkuVFJBTlNfSUQ7dmFyIEs9e2lkOkEsY2I6InN0Y0NhbGxiYWNrIitBLHNjcmlwdElkOiJzdGNTY3JpcHQiK0EscGFyYW1zOkUsYXJnOkosdXJsOkIsY2FsbGJhY2s6SCxzY29wZTpJLHJlYWRlcjpGfTt2YXIgRD10aGlzO3dpbmRvd1tLLmNiXT1mdW5jdGlvbihMKXtELmhhbmRsZVJlc3BvbnNlKEwsSyl9O0IrPVN0cmluZy5mb3JtYXQoIiZ7MH09ezF9Iix0aGlzLmNhbGxiYWNrUGFyYW0sSy5jYik7aWYodGhpcy5hdXRvQWJvcnQhPT1mYWxzZSl7dGhpcy5hYm9ydCgpfUsudGltZW91dElkPXRoaXMuaGFuZGxlRmFpbHVyZS5kZWZlcih0aGlzLnRpbWVvdXQsdGhpcyxbS10pO3ZhciBHPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpO0cuc2V0QXR0cmlidXRlKCJzcmMiLEIpO0cuc2V0QXR0cmlidXRlKCJ0eXBlIiwidGV4dC9qYXZhc2NyaXB0Iik7Ry5zZXRBdHRyaWJ1dGUoImlkIixLLnNjcmlwdElkKTt0aGlzLmhlYWQuYXBwZW5kQ2hpbGQoRyk7dGhpcy50cmFucz1LfWVsc2V7SC5jYWxsKEl8fHRoaXMsbnVsbCxKLGZhbHNlKX19LGlzTG9hZGluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRyYW5zP3RydWU6ZmFsc2V9LGFib3J0OmZ1bmN0aW9uKCl7aWYodGhpcy5pc0xvYWRpbmcoKSl7dGhpcy5kZXN0cm95VHJhbnModGhpcy50cmFucyl9fSxkZXN0cm95VHJhbnM6ZnVuY3Rpb24oQixBKXt0aGlzLmhlYWQucmVtb3ZlQ2hpbGQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoQi5zY3JpcHRJZCkpO2NsZWFyVGltZW91dChCLnRpbWVvdXRJZCk7aWYoQSl7d2luZG93W0IuY2JdPXVuZGVmaW5lZDt0cnl7ZGVsZXRlIHdpbmRvd1tCLmNiXX1jYXRjaChDKXt9fWVsc2V7d2luZG93W0IuY2JdPWZ1bmN0aW9uKCl7d2luZG93W0IuY2JdPXVuZGVmaW5lZDt0cnl7ZGVsZXRlIHdpbmRvd1tCLmNiXX1jYXRjaChEKXt9fX19LGhhbmRsZVJlc3BvbnNlOmZ1bmN0aW9uKEQsQil7dGhpcy50cmFucz1mYWxzZTt0aGlzLmRlc3Ryb3lUcmFucyhCLHRydWUpO3ZhciBBO3RyeXtBPUIucmVhZGVyLnJlYWRSZWNvcmRzKEQpfWNhdGNoKEMpe3RoaXMuZmlyZUV2ZW50KCJsb2FkZXhjZXB0aW9uIix0aGlzLEQsQi5hcmcsQyk7Qi5jYWxsYmFjay5jYWxsKEIuc2NvcGV8fHdpbmRvdyxudWxsLEIuYXJnLGZhbHNlKTtyZXR1cm4gfXRoaXMuZmlyZUV2ZW50KCJsb2FkIix0aGlzLEQsQi5hcmcpO0IuY2FsbGJhY2suY2FsbChCLnNjb3BlfHx3aW5kb3csQSxCLmFyZyx0cnVlKX0saGFuZGxlRmFpbHVyZTpmdW5jdGlvbihBKXt0aGlzLnRyYW5zPWZhbHNlO3RoaXMuZGVzdHJveVRyYW5zKEEsZmFsc2UpO3RoaXMuZmlyZUV2ZW50KCJsb2FkZXhjZXB0aW9uIix0aGlzLG51bGwsQS5hcmcpO0EuY2FsbGJhY2suY2FsbChBLnNjb3BlfHx3aW5kb3csbnVsbCxBLmFyZyxmYWxzZSl9fSk7DQpFeHQuZGF0YS5Kc29uUmVhZGVyPWZ1bmN0aW9uKEEsQil7QT1BfHx7fTtFeHQuZGF0YS5Kc29uUmVhZGVyLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLEEsQnx8QS5maWVsZHMpfTtFeHQuZXh0ZW5kKEV4dC5kYXRhLkpzb25SZWFkZXIsRXh0LmRhdGEuRGF0YVJlYWRlcix7cmVhZDpmdW5jdGlvbihyZXNwb25zZSl7dmFyIGpzb249cmVzcG9uc2UucmVzcG9uc2VUZXh0O3ZhciBvPWV2YWwoIigiK2pzb24rIikiKTtpZighbyl7dGhyb3cge21lc3NhZ2U6Ikpzb25SZWFkZXIucmVhZDogSnNvbiBvYmplY3Qgbm90IGZvdW5kIn19aWYoby5tZXRhRGF0YSl7ZGVsZXRlIHRoaXMuZWY7dGhpcy5tZXRhPW8ubWV0YURhdGE7dGhpcy5yZWNvcmRUeXBlPUV4dC5kYXRhLlJlY29yZC5jcmVhdGUoby5tZXRhRGF0YS5maWVsZHMpO3RoaXMub25NZXRhQ2hhbmdlKHRoaXMubWV0YSx0aGlzLnJlY29yZFR5cGUsbyl9cmV0dXJuIHRoaXMucmVhZFJlY29yZHMobyl9LG9uTWV0YUNoYW5nZTpmdW5jdGlvbihBLEMsQil7fSxzaW1wbGVBY2Nlc3M6ZnVuY3Rpb24oQixBKXtyZXR1cm4gQltBXX0sZ2V0SnNvbkFjY2Vzc29yOmZ1bmN0aW9uKCl7dmFyIEE9L1tcW1wuXS87cmV0dXJuIGZ1bmN0aW9uKEMpe3RyeXtyZXR1cm4oQS50ZXN0KEMpKT9uZXcgRnVuY3Rpb24oIm9iaiIsInJldHVybiBvYmouIitDKTpmdW5jdGlvbihEKXtyZXR1cm4gRFtDXX19Y2F0Y2goQil7fXJldHVybiBFeHQuZW1wdHlGbn19KCkscmVhZFJlY29yZHM6ZnVuY3Rpb24oSyl7dGhpcy5qc29uRGF0YT1LO3ZhciBIPXRoaXMubWV0YSxBPXRoaXMucmVjb3JkVHlwZSxSPUEucHJvdG90eXBlLmZpZWxkcyxGPVIuaXRlbXMsRT1SLmxlbmd0aDtpZighdGhpcy5lZil7aWYoSC50b3RhbFByb3BlcnR5KXt0aGlzLmdldFRvdGFsPXRoaXMuZ2V0SnNvbkFjY2Vzc29yKEgudG90YWxQcm9wZXJ0eSl9aWYoSC5zdWNjZXNzUHJvcGVydHkpe3RoaXMuZ2V0U3VjY2Vzcz10aGlzLmdldEpzb25BY2Nlc3NvcihILnN1Y2Nlc3NQcm9wZXJ0eSl9dGhpcy5nZXRSb290PUgucm9vdD90aGlzLmdldEpzb25BY2Nlc3NvcihILnJvb3QpOmZ1bmN0aW9uKFUpe3JldHVybiBVfTtpZihILmlkKXt2YXIgUT10aGlzLmdldEpzb25BY2Nlc3NvcihILmlkKTt0aGlzLmdldElkPWZ1bmN0aW9uKFYpe3ZhciBVPVEoVik7cmV0dXJuKFU9PT11bmRlZmluZWR8fFU9PT0iIik/bnVsbDpVfX1lbHNle3RoaXMuZ2V0SWQ9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH19dGhpcy5lZj1bXTtmb3IodmFyIE89MDtPPEU7TysrKXtSPUZbT107dmFyIFQ9KFIubWFwcGluZyE9PXVuZGVmaW5lZCYmUi5tYXBwaW5nIT09bnVsbCk/Ui5tYXBwaW5nOlIubmFtZTt0aGlzLmVmW09dPXRoaXMuZ2V0SnNvbkFjY2Vzc29yKFQpfX12YXIgTT10aGlzLmdldFJvb3QoSyksUz1NLmxlbmd0aCxJPVMsRD10cnVlO2lmKEgudG90YWxQcm9wZXJ0eSl7dmFyIEc9cGFyc2VJbnQodGhpcy5nZXRUb3RhbChLKSwxMCk7aWYoIWlzTmFOKEcpKXtJPUd9fWlmKEguc3VjY2Vzc1Byb3BlcnR5KXt2YXIgRz10aGlzLmdldFN1Y2Nlc3MoSyk7aWYoRz09PWZhbHNlfHxHPT09ImZhbHNlIil7RD1mYWxzZX19dmFyIFA9W107Zm9yKHZhciBPPTA7TzxTO08rKyl7dmFyIEw9TVtPXTt2YXIgQj17fTt2YXIgSj10aGlzLmdldElkKEwpO2Zvcih2YXIgTj0wO048RTtOKyspe1I9RltOXTt2YXIgRz10aGlzLmVmW05dKEwpO0JbUi5uYW1lXT1SLmNvbnZlcnQoKEchPT11bmRlZmluZWQpP0c6Ui5kZWZhdWx0VmFsdWUsTCl9dmFyIEM9bmV3IEEoQixKKTtDLmpzb249TDtQW09dPUN9cmV0dXJue3N1Y2Nlc3M6RCxyZWNvcmRzOlAsdG90YWxSZWNvcmRzOkl9fX0pOw0KRXh0LmRhdGEuWG1sUmVhZGVyPWZ1bmN0aW9uKEEsQil7QT1BfHx7fTtFeHQuZGF0YS5YbWxSZWFkZXIuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsQSxCfHxBLmZpZWxkcyl9O0V4dC5leHRlbmQoRXh0LmRhdGEuWG1sUmVhZGVyLEV4dC5kYXRhLkRhdGFSZWFkZXIse3JlYWQ6ZnVuY3Rpb24oQSl7dmFyIEI9QS5yZXNwb25zZVhNTDtpZighQil7dGhyb3cge21lc3NhZ2U6IlhtbFJlYWRlci5yZWFkOiBYTUwgRG9jdW1lbnQgbm90IGF2YWlsYWJsZSJ9fXJldHVybiB0aGlzLnJlYWRSZWNvcmRzKEIpfSxyZWFkUmVjb3JkczpmdW5jdGlvbihUKXt0aGlzLnhtbERhdGE9VDt2YXIgTj1ULmRvY3VtZW50RWxlbWVudHx8VDt2YXIgST1FeHQuRG9tUXVlcnk7dmFyIEI9dGhpcy5yZWNvcmRUeXBlLEw9Qi5wcm90b3R5cGUuZmllbGRzO3ZhciBEPXRoaXMubWV0YS5pZDt2YXIgRz0wLEU9dHJ1ZTtpZih0aGlzLm1ldGEudG90YWxSZWNvcmRzKXtHPUkuc2VsZWN0TnVtYmVyKHRoaXMubWV0YS50b3RhbFJlY29yZHMsTiwwKX1pZih0aGlzLm1ldGEuc3VjY2Vzcyl7dmFyIEs9SS5zZWxlY3RWYWx1ZSh0aGlzLm1ldGEuc3VjY2VzcyxOLHRydWUpO0U9SyE9PWZhbHNlJiZLIT09ImZhbHNlIn12YXIgUT1bXTt2YXIgVT1JLnNlbGVjdCh0aGlzLm1ldGEucmVjb3JkLE4pO2Zvcih2YXIgUD0wLFI9VS5sZW5ndGg7UDxSO1ArKyl7dmFyIE09VVtQXTt2YXIgQT17fTt2YXIgSj1EP0kuc2VsZWN0VmFsdWUoRCxNKTp1bmRlZmluZWQ7Zm9yKHZhciBPPTAsSD1MLmxlbmd0aDtPPEg7TysrKXt2YXIgUz1MLml0ZW1zW09dO3ZhciBGPUkuc2VsZWN0VmFsdWUoUy5tYXBwaW5nfHxTLm5hbWUsTSxTLmRlZmF1bHRWYWx1ZSk7Rj1TLmNvbnZlcnQoRixNKTtBW1MubmFtZV09Rn12YXIgQz1uZXcgQihBLEopO0Mubm9kZT1NO1FbUS5sZW5ndGhdPUN9cmV0dXJue3N1Y2Nlc3M6RSxyZWNvcmRzOlEsdG90YWxSZWNvcmRzOkd8fFEubGVuZ3RofX19KTsNCkV4dC5kYXRhLkFycmF5UmVhZGVyPUV4dC5leHRlbmQoRXh0LmRhdGEuSnNvblJlYWRlcix7cmVhZFJlY29yZHM6ZnVuY3Rpb24oQyl7dmFyIEI9dGhpcy5tZXRhP3RoaXMubWV0YS5pZDpudWxsO3ZhciBHPXRoaXMucmVjb3JkVHlwZSxLPUcucHJvdG90eXBlLmZpZWxkczt2YXIgRT1bXTt2YXIgTT1DO2Zvcih2YXIgST0wO0k8TS5sZW5ndGg7SSsrKXt2YXIgRD1NW0ldO3ZhciBPPXt9O3ZhciBBPSgoQnx8Qj09PTApJiZEW0JdIT09dW5kZWZpbmVkJiZEW0JdIT09IiI/RFtCXTpudWxsKTtmb3IodmFyIEg9MCxQPUsubGVuZ3RoO0g8UDtIKyspe3ZhciBMPUsuaXRlbXNbSF07dmFyIEY9TC5tYXBwaW5nIT09dW5kZWZpbmVkJiZMLm1hcHBpbmchPT1udWxsP0wubWFwcGluZzpIO3ZhciBOPURbRl0hPT11bmRlZmluZWQ/RFtGXTpMLmRlZmF1bHRWYWx1ZTtOPUwuY29udmVydChOLEQpO09bTC5uYW1lXT1OfXZhciBKPW5ldyBHKE8sQSk7Si5qc29uPUQ7RVtFLmxlbmd0aF09Sn1yZXR1cm57cmVjb3JkczpFLHRvdGFsUmVjb3JkczpFLmxlbmd0aH19fSk7DQpFeHQuZGF0YS5UcmVlPWZ1bmN0aW9uKEEpe3RoaXMubm9kZUhhc2g9e307dGhpcy5yb290PW51bGw7aWYoQSl7dGhpcy5zZXRSb290Tm9kZShBKX10aGlzLmFkZEV2ZW50cygiYXBwZW5kIiwicmVtb3ZlIiwibW92ZSIsImluc2VydCIsImJlZm9yZWFwcGVuZCIsImJlZm9yZXJlbW92ZSIsImJlZm9yZW1vdmUiLCJiZWZvcmVpbnNlcnQiKTtFeHQuZGF0YS5UcmVlLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKX07RXh0LmV4dGVuZChFeHQuZGF0YS5UcmVlLEV4dC51dGlsLk9ic2VydmFibGUse3BhdGhTZXBhcmF0b3I6Ii8iLHByb3h5Tm9kZUV2ZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmlyZUV2ZW50LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZ2V0Um9vdE5vZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb290fSxzZXRSb290Tm9kZTpmdW5jdGlvbihBKXt0aGlzLnJvb3Q9QTtBLm93bmVyVHJlZT10aGlzO0EuaXNSb290PXRydWU7dGhpcy5yZWdpc3Rlck5vZGUoQSk7cmV0dXJuIEF9LGdldE5vZGVCeUlkOmZ1bmN0aW9uKEEpe3JldHVybiB0aGlzLm5vZGVIYXNoW0FdfSxyZWdpc3Rlck5vZGU6ZnVuY3Rpb24oQSl7dGhpcy5ub2RlSGFzaFtBLmlkXT1BfSx1bnJlZ2lzdGVyTm9kZTpmdW5jdGlvbihBKXtkZWxldGUgdGhpcy5ub2RlSGFzaFtBLmlkXX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4iW1RyZWUiKyh0aGlzLmlkPyIgIit0aGlzLmlkOiIiKSsiXSJ9fSk7RXh0LmRhdGEuTm9kZT1mdW5jdGlvbihBKXt0aGlzLmF0dHJpYnV0ZXM9QXx8e307dGhpcy5sZWFmPXRoaXMuYXR0cmlidXRlcy5sZWFmO3RoaXMuaWQ9dGhpcy5hdHRyaWJ1dGVzLmlkO2lmKCF0aGlzLmlkKXt0aGlzLmlkPUV4dC5pZChudWxsLCJ5bm9kZS0iKTt0aGlzLmF0dHJpYnV0ZXMuaWQ9dGhpcy5pZH10aGlzLmNoaWxkTm9kZXM9W107aWYoIXRoaXMuY2hpbGROb2Rlcy5pbmRleE9mKXt0aGlzLmNoaWxkTm9kZXMuaW5kZXhPZj1mdW5jdGlvbihEKXtmb3IodmFyIEM9MCxCPXRoaXMubGVuZ3RoO0M8QjtDKyspe2lmKHRoaXNbQ109PUQpe3JldHVybiBDfX1yZXR1cm4gLTF9fXRoaXMucGFyZW50Tm9kZT1udWxsO3RoaXMuZmlyc3RDaGlsZD1udWxsO3RoaXMubGFzdENoaWxkPW51bGw7dGhpcy5wcmV2aW91c1NpYmxpbmc9bnVsbDt0aGlzLm5leHRTaWJsaW5nPW51bGw7dGhpcy5hZGRFdmVudHMoeyJhcHBlbmQiOnRydWUsInJlbW92ZSI6dHJ1ZSwibW92ZSI6dHJ1ZSwiaW5zZXJ0Ijp0cnVlLCJiZWZvcmVhcHBlbmQiOnRydWUsImJlZm9yZXJlbW92ZSI6dHJ1ZSwiYmVmb3JlbW92ZSI6dHJ1ZSwiYmVmb3JlaW5zZXJ0Ijp0cnVlfSk7dGhpcy5saXN0ZW5lcnM9dGhpcy5hdHRyaWJ1dGVzLmxpc3RlbmVycztFeHQuZGF0YS5Ob2RlLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKX07RXh0LmV4dGVuZChFeHQuZGF0YS5Ob2RlLEV4dC51dGlsLk9ic2VydmFibGUse2ZpcmVFdmVudDpmdW5jdGlvbihCKXtpZihFeHQuZGF0YS5Ob2RlLnN1cGVyY2xhc3MuZmlyZUV2ZW50LmFwcGx5KHRoaXMsYXJndW1lbnRzKT09PWZhbHNlKXtyZXR1cm4gZmFsc2V9dmFyIEE9dGhpcy5nZXRPd25lclRyZWUoKTtpZihBKXtpZihBLnByb3h5Tm9kZUV2ZW50LmFwcGx5KEEsYXJndW1lbnRzKT09PWZhbHNlKXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfSxpc0xlYWY6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZWFmPT09dHJ1ZX0sc2V0Rmlyc3RDaGlsZDpmdW5jdGlvbihBKXt0aGlzLmZpcnN0Q2hpbGQ9QX0sc2V0TGFzdENoaWxkOmZ1bmN0aW9uKEEpe3RoaXMubGFzdENoaWxkPUF9LGlzTGFzdDpmdW5jdGlvbigpe3JldHVybighdGhpcy5wYXJlbnROb2RlP3RydWU6dGhpcy5wYXJlbnROb2RlLmxhc3RDaGlsZD09dGhpcyl9LGlzRmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4oIXRoaXMucGFyZW50Tm9kZT90cnVlOnRoaXMucGFyZW50Tm9kZS5maXJzdENoaWxkPT10aGlzKX0saGFzQ2hpbGROb2RlczpmdW5jdGlvbigpe3JldHVybiAhdGhpcy5pc0xlYWYoKSYmdGhpcy5jaGlsZE5vZGVzLmxlbmd0aD4wfSxhcHBlbmRDaGlsZDpmdW5jdGlvbihFKXt2YXIgRj1mYWxzZTtpZihFeHQuaXNBcnJheShFKSl7Rj1FfWVsc2V7aWYoYXJndW1lbnRzLmxlbmd0aD4xKXtGPWFyZ3VtZW50c319aWYoRil7Zm9yKHZhciBEPTAsQT1GLmxlbmd0aDtEPEE7RCsrKXt0aGlzLmFwcGVuZENoaWxkKEZbRF0pfX1lbHNle2lmKHRoaXMuZmlyZUV2ZW50KCJiZWZvcmVhcHBlbmQiLHRoaXMub3duZXJUcmVlLHRoaXMsRSk9PT1mYWxzZSl7cmV0dXJuIGZhbHNlfXZhciBCPXRoaXMuY2hpbGROb2Rlcy5sZW5ndGg7dmFyIEM9RS5wYXJlbnROb2RlO2lmKEMpe2lmKEUuZmlyZUV2ZW50KCJiZWZvcmVtb3ZlIixFLmdldE93bmVyVHJlZSgpLEUsQyx0aGlzLEIpPT09ZmFsc2Upe3JldHVybiBmYWxzZX1DLnJlbW92ZUNoaWxkKEUpfUI9dGhpcy5jaGlsZE5vZGVzLmxlbmd0aDtpZihCPT0wKXt0aGlzLnNldEZpcnN0Q2hpbGQoRSl9dGhpcy5jaGlsZE5vZGVzLnB1c2goRSk7RS5wYXJlbnROb2RlPXRoaXM7dmFyIEc9dGhpcy5jaGlsZE5vZGVzW0ItMV07aWYoRyl7RS5wcmV2aW91c1NpYmxpbmc9RztHLm5leHRTaWJsaW5nPUV9ZWxzZXtFLnByZXZpb3VzU2libGluZz1udWxsfUUubmV4dFNpYmxpbmc9bnVsbDt0aGlzLnNldExhc3RDaGlsZChFKTtFLnNldE93bmVyVHJlZSh0aGlzLmdldE93bmVyVHJlZSgpKTt0aGlzLmZpcmVFdmVudCgiYXBwZW5kIix0aGlzLm93bmVyVHJlZSx0aGlzLEUsQik7aWYoQyl7RS5maXJlRXZlbnQoIm1vdmUiLHRoaXMub3duZXJUcmVlLEUsQyx0aGlzLEIpfXJldHVybiBFfX0scmVtb3ZlQ2hpbGQ6ZnVuY3Rpb24oQil7dmFyIEE9dGhpcy5jaGlsZE5vZGVzLmluZGV4T2YoQik7aWYoQT09LTEpe3JldHVybiBmYWxzZX1pZih0aGlzLmZpcmVFdmVudCgiYmVmb3JlcmVtb3ZlIix0aGlzLm93bmVyVHJlZSx0aGlzLEIpPT09ZmFsc2Upe3JldHVybiBmYWxzZX10aGlzLmNoaWxkTm9kZXMuc3BsaWNlKEEsMSk7aWYoQi5wcmV2aW91c1NpYmxpbmcpe0IucHJldmlvdXNTaWJsaW5nLm5leHRTaWJsaW5nPUIubmV4dFNpYmxpbmd9aWYoQi5uZXh0U2libGluZyl7Qi5uZXh0U2libGluZy5wcmV2aW91c1NpYmxpbmc9Qi5wcmV2aW91c1NpYmxpbmd9aWYodGhpcy5maXJzdENoaWxkPT1CKXt0aGlzLnNldEZpcnN0Q2hpbGQoQi5uZXh0U2libGluZyl9aWYodGhpcy5sYXN0Q2hpbGQ9PUIpe3RoaXMuc2V0TGFzdENoaWxkKEIucHJldmlvdXNTaWJsaW5nKX1CLnNldE93bmVyVHJlZShudWxsKTtCLnBhcmVudE5vZGU9bnVsbDtCLnByZXZpb3VzU2libGluZz1udWxsO0IubmV4dFNpYmxpbmc9bnVsbDt0aGlzLmZpcmVFdmVudCgicmVtb3ZlIix0aGlzLm93bmVyVHJlZSx0aGlzLEIpO3JldHVybiBCfSxpbnNlcnRCZWZvcmU6ZnVuY3Rpb24oRCxBKXtpZighQSl7cmV0dXJuIHRoaXMuYXBwZW5kQ2hpbGQoRCl9aWYoRD09QSl7cmV0dXJuIGZhbHNlfWlmKHRoaXMuZmlyZUV2ZW50KCJiZWZvcmVpbnNlcnQiLHRoaXMub3duZXJUcmVlLHRoaXMsRCxBKT09PWZhbHNlKXtyZXR1cm4gZmFsc2V9dmFyIEI9dGhpcy5jaGlsZE5vZGVzLmluZGV4T2YoQSk7dmFyIEM9RC5wYXJlbnROb2RlO3ZhciBFPUI7aWYoQz09dGhpcyYmdGhpcy5jaGlsZE5vZGVzLmluZGV4T2YoRCk8Qil7RS0tfWlmKEMpe2lmKEQuZmlyZUV2ZW50KCJiZWZvcmVtb3ZlIixELmdldE93bmVyVHJlZSgpLEQsQyx0aGlzLEIsQSk9PT1mYWxzZSl7cmV0dXJuIGZhbHNlfUMucmVtb3ZlQ2hpbGQoRCl9aWYoRT09MCl7dGhpcy5zZXRGaXJzdENoaWxkKEQpfXRoaXMuY2hpbGROb2Rlcy5zcGxpY2UoRSwwLEQpO0QucGFyZW50Tm9kZT10aGlzO3ZhciBGPXRoaXMuY2hpbGROb2Rlc1tFLTFdO2lmKEYpe0QucHJldmlvdXNTaWJsaW5nPUY7Ri5uZXh0U2libGluZz1EfWVsc2V7RC5wcmV2aW91c1NpYmxpbmc9bnVsbH1ELm5leHRTaWJsaW5nPUE7QS5wcmV2aW91c1NpYmxpbmc9RDtELnNldE93bmVyVHJlZSh0aGlzLmdldE93bmVyVHJlZSgpKTt0aGlzLmZpcmVFdmVudCgiaW5zZXJ0Iix0aGlzLm93bmVyVHJlZSx0aGlzLEQsQSk7aWYoQyl7RC5maXJlRXZlbnQoIm1vdmUiLHRoaXMub3duZXJUcmVlLEQsQyx0aGlzLEUsQSl9cmV0dXJuIER9LHJlbW92ZTpmdW5jdGlvbigpe3RoaXMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzKTtyZXR1cm4gdGhpc30saXRlbTpmdW5jdGlvbihBKXtyZXR1cm4gdGhpcy5jaGlsZE5vZGVzW0FdfSxyZXBsYWNlQ2hpbGQ6ZnVuY3Rpb24oQSxCKXt0aGlzLmluc2VydEJlZm9yZShBLEIpO3RoaXMucmVtb3ZlQ2hpbGQoQik7cmV0dXJuIEJ9LGluZGV4T2Y6ZnVuY3Rpb24oQSl7cmV0dXJuIHRoaXMuY2hpbGROb2Rlcy5pbmRleE9mKEEpfSxnZXRPd25lclRyZWU6ZnVuY3Rpb24oKXtpZighdGhpcy5vd25lclRyZWUpe3ZhciBBPXRoaXM7d2hpbGUoQSl7aWYoQS5vd25lclRyZWUpe3RoaXMub3duZXJUcmVlPUEub3duZXJUcmVlO2JyZWFrfUE9QS5wYXJlbnROb2RlfX1yZXR1cm4gdGhpcy5vd25lclRyZWV9LGdldERlcHRoOmZ1bmN0aW9uKCl7dmFyIEI9MDt2YXIgQT10aGlzO3doaWxlKEEucGFyZW50Tm9kZSl7KytCO0E9QS5wYXJlbnROb2RlfXJldHVybiBCfSxzZXRPd25lclRyZWU6ZnVuY3Rpb24oQil7aWYoQiE9dGhpcy5vd25lclRyZWUpe2lmKHRoaXMub3duZXJUcmVlKXt0aGlzLm93bmVyVHJlZS51bnJlZ2lzdGVyTm9kZSh0aGlzKX10aGlzLm93bmVyVHJlZT1CO3ZhciBEPXRoaXMuY2hpbGROb2Rlcztmb3IodmFyIEM9MCxBPUQubGVuZ3RoO0M8QTtDKyspe0RbQ10uc2V0T3duZXJUcmVlKEIpfWlmKEIpe0IucmVnaXN0ZXJOb2RlKHRoaXMpfX19LGdldFBhdGg6ZnVuY3Rpb24oQil7Qj1CfHwiaWQiO3ZhciBEPXRoaXMucGFyZW50Tm9kZTt2YXIgQT1bdGhpcy5hdHRyaWJ1dGVzW0JdXTt3aGlsZShEKXtBLnVuc2hpZnQoRC5hdHRyaWJ1dGVzW0JdKTtEPUQucGFyZW50Tm9kZX12YXIgQz10aGlzLmdldE93bmVyVHJlZSgpLnBhdGhTZXBhcmF0b3I7cmV0dXJuIEMrQS5qb2luKEMpfSxidWJibGU6ZnVuY3Rpb24oQyxCLEEpe3ZhciBEPXRoaXM7d2hpbGUoRCl7aWYoQy5hcHBseShCfHxELEF8fFtEXSk9PT1mYWxzZSl7YnJlYWt9RD1ELnBhcmVudE5vZGV9fSxjYXNjYWRlOmZ1bmN0aW9uKEYsRSxCKXtpZihGLmFwcGx5KEV8fHRoaXMsQnx8W3RoaXNdKSE9PWZhbHNlKXt2YXIgRD10aGlzLmNoaWxkTm9kZXM7Zm9yKHZhciBDPTAsQT1ELmxlbmd0aDtDPEE7QysrKXtEW0NdLmNhc2NhZGUoRixFLEIpfX19LGVhY2hDaGlsZDpmdW5jdGlvbihGLEUsQil7dmFyIEQ9dGhpcy5jaGlsZE5vZGVzO2Zvcih2YXIgQz0wLEE9RC5sZW5ndGg7QzxBO0MrKyl7aWYoRi5hcHBseShFfHx0aGlzLEJ8fFtEW0NdXSk9PT1mYWxzZSl7YnJlYWt9fX0sZmluZENoaWxkOmZ1bmN0aW9uKEQsRSl7dmFyIEM9dGhpcy5jaGlsZE5vZGVzO2Zvcih2YXIgQj0wLEE9Qy5sZW5ndGg7QjxBO0IrKyl7aWYoQ1tCXS5hdHRyaWJ1dGVzW0RdPT1FKXtyZXR1cm4gQ1tCXX19cmV0dXJuIG51bGx9LGZpbmRDaGlsZEJ5OmZ1bmN0aW9uKEUsRCl7dmFyIEM9dGhpcy5jaGlsZE5vZGVzO2Zvcih2YXIgQj0wLEE9Qy5sZW5ndGg7QjxBO0IrKyl7aWYoRS5jYWxsKER8fENbQl0sQ1tCXSk9PT10cnVlKXtyZXR1cm4gQ1tCXX19cmV0dXJuIG51bGx9LHNvcnQ6ZnVuY3Rpb24oRSxEKXt2YXIgQz10aGlzLmNoaWxkTm9kZXM7dmFyIEE9Qy5sZW5ndGg7aWYoQT4wKXt2YXIgRj1EP2Z1bmN0aW9uKCl7RS5hcHBseShELGFyZ3VtZW50cyl9OkU7Qy5zb3J0KEYpO2Zvcih2YXIgQj0wO0I8QTtCKyspe3ZhciBHPUNbQl07Ry5wcmV2aW91c1NpYmxpbmc9Q1tCLTFdO0cubmV4dFNpYmxpbmc9Q1tCKzFdO2lmKEI9PTApe3RoaXMuc2V0Rmlyc3RDaGlsZChHKX1pZihCPT1BLTEpe3RoaXMuc2V0TGFzdENoaWxkKEcpfX19fSxjb250YWluczpmdW5jdGlvbihBKXtyZXR1cm4gQS5pc0FuY2VzdG9yKHRoaXMpfSxpc0FuY2VzdG9yOmZ1bmN0aW9uKEEpe3ZhciBCPXRoaXMucGFyZW50Tm9kZTt3aGlsZShCKXtpZihCPT1BKXtyZXR1cm4gdHJ1ZX1CPUIucGFyZW50Tm9kZX1yZXR1cm4gZmFsc2V9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIltOb2RlIisodGhpcy5pZD8iICIrdGhpcy5pZDoiIikrIl0ifX0pOw0KRXh0LmRhdGEuR3JvdXBpbmdTdG9yZT1FeHQuZXh0ZW5kKEV4dC5kYXRhLlN0b3JlLHtyZW1vdGVHcm91cDpmYWxzZSxncm91cE9uU29ydDpmYWxzZSxjbGVhckdyb3VwaW5nOmZ1bmN0aW9uKCl7dGhpcy5ncm91cEZpZWxkPWZhbHNlO2lmKHRoaXMucmVtb3RlR3JvdXApe2lmKHRoaXMuYmFzZVBhcmFtcyl7ZGVsZXRlIHRoaXMuYmFzZVBhcmFtcy5ncm91cEJ5fXRoaXMucmVsb2FkKCl9ZWxzZXt0aGlzLmFwcGx5U29ydCgpO3RoaXMuZmlyZUV2ZW50KCJkYXRhY2hhbmdlZCIsdGhpcyl9fSxncm91cEJ5OmZ1bmN0aW9uKEMsQil7aWYodGhpcy5ncm91cEZpZWxkPT1DJiYhQil7cmV0dXJuIH10aGlzLmdyb3VwRmllbGQ9QztpZih0aGlzLnJlbW90ZUdyb3VwKXtpZighdGhpcy5iYXNlUGFyYW1zKXt0aGlzLmJhc2VQYXJhbXM9e319dGhpcy5iYXNlUGFyYW1zWyJncm91cEJ5Il09Q31pZih0aGlzLmdyb3VwT25Tb3J0KXt0aGlzLnNvcnQoQyk7cmV0dXJuIH1pZih0aGlzLnJlbW90ZUdyb3VwKXt0aGlzLnJlbG9hZCgpfWVsc2V7dmFyIEE9dGhpcy5zb3J0SW5mb3x8e307aWYoQS5maWVsZCE9Qyl7dGhpcy5hcHBseVNvcnQoKX1lbHNle3RoaXMuc29ydERhdGEoQyl9dGhpcy5maXJlRXZlbnQoImRhdGFjaGFuZ2VkIix0aGlzKX19LGFwcGx5U29ydDpmdW5jdGlvbigpe0V4dC5kYXRhLkdyb3VwaW5nU3RvcmUuc3VwZXJjbGFzcy5hcHBseVNvcnQuY2FsbCh0aGlzKTtpZighdGhpcy5ncm91cE9uU29ydCYmIXRoaXMucmVtb3RlR3JvdXApe3ZhciBBPXRoaXMuZ2V0R3JvdXBTdGF0ZSgpO2lmKEEmJkEhPXRoaXMuc29ydEluZm8uZmllbGQpe3RoaXMuc29ydERhdGEodGhpcy5ncm91cEZpZWxkKX19fSxhcHBseUdyb3VwaW5nOmZ1bmN0aW9uKEEpe2lmKHRoaXMuZ3JvdXBGaWVsZCE9PWZhbHNlKXt0aGlzLmdyb3VwQnkodGhpcy5ncm91cEZpZWxkLHRydWUpO3JldHVybiB0cnVlfWVsc2V7aWYoQT09PXRydWUpe3RoaXMuZmlyZUV2ZW50KCJkYXRhY2hhbmdlZCIsdGhpcyl9cmV0dXJuIGZhbHNlfX0sZ2V0R3JvdXBTdGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdyb3VwT25Tb3J0JiZ0aGlzLmdyb3VwRmllbGQhPT1mYWxzZT8odGhpcy5zb3J0SW5mbz90aGlzLnNvcnRJbmZvLmZpZWxkOnVuZGVmaW5lZCk6dGhpcy5ncm91cEZpZWxkfX0pOw0KRXh0LkNvbXBvbmVudE1ncj1mdW5jdGlvbigpe3ZhciBCPW5ldyBFeHQudXRpbC5NaXhlZENvbGxlY3Rpb24oKTt2YXIgQT17fTtyZXR1cm57cmVnaXN0ZXI6ZnVuY3Rpb24oQyl7Qi5hZGQoQyl9LHVucmVnaXN0ZXI6ZnVuY3Rpb24oQyl7Qi5yZW1vdmUoQyl9LGdldDpmdW5jdGlvbihDKXtyZXR1cm4gQi5nZXQoQyl9LG9uQXZhaWxhYmxlOmZ1bmN0aW9uKEUsRCxDKXtCLm9uKCJhZGQiLGZ1bmN0aW9uKEYsRyl7aWYoRy5pZD09RSl7RC5jYWxsKEN8fEcsRyk7Qi51bigiYWRkIixELEMpfX0pfSxhbGw6QixyZWdpc3RlclR5cGU6ZnVuY3Rpb24oRCxDKXtBW0RdPUM7Qy54dHlwZT1EfSxjcmVhdGU6ZnVuY3Rpb24oQyxEKXtyZXR1cm4gbmV3IEFbQy54dHlwZXx8RF0oQyl9fX0oKTtFeHQucmVnPUV4dC5Db21wb25lbnRNZ3IucmVnaXN0ZXJUeXBlOw0KRXh0LkNvbXBvbmVudD1mdW5jdGlvbihCKXtCPUJ8fHt9O2lmKEIuaW5pdGlhbENvbmZpZyl7aWYoQi5pc0FjdGlvbil7dGhpcy5iYXNlQWN0aW9uPUJ9Qj1CLmluaXRpYWxDb25maWd9ZWxzZXtpZihCLnRhZ05hbWV8fEIuZG9tfHx0eXBlb2YgQj09InN0cmluZyIpe0I9e2FwcGx5VG86QixpZDpCLmlkfHxCfX19dGhpcy5pbml0aWFsQ29uZmlnPUI7RXh0LmFwcGx5KHRoaXMsQik7dGhpcy5hZGRFdmVudHMoImRpc2FibGUiLCJlbmFibGUiLCJiZWZvcmVzaG93Iiwic2hvdyIsImJlZm9yZWhpZGUiLCJoaWRlIiwiYmVmb3JlcmVuZGVyIiwicmVuZGVyIiwiYmVmb3JlZGVzdHJveSIsImRlc3Ryb3kiLCJiZWZvcmVzdGF0ZXJlc3RvcmUiLCJzdGF0ZXJlc3RvcmUiLCJiZWZvcmVzdGF0ZXNhdmUiLCJzdGF0ZXNhdmUiKTt0aGlzLmdldElkKCk7RXh0LkNvbXBvbmVudE1nci5yZWdpc3Rlcih0aGlzKTtFeHQuQ29tcG9uZW50LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTtpZih0aGlzLmJhc2VBY3Rpb24pe3RoaXMuYmFzZUFjdGlvbi5hZGRDb21wb25lbnQodGhpcyl9dGhpcy5pbml0Q29tcG9uZW50KCk7aWYodGhpcy5wbHVnaW5zKXtpZihFeHQuaXNBcnJheSh0aGlzLnBsdWdpbnMpKXtmb3IodmFyIEM9MCxBPXRoaXMucGx1Z2lucy5sZW5ndGg7QzxBO0MrKyl7dGhpcy5wbHVnaW5zW0NdLmluaXQodGhpcyl9fWVsc2V7dGhpcy5wbHVnaW5zLmluaXQodGhpcyl9fWlmKHRoaXMuc3RhdGVmdWwhPT1mYWxzZSl7dGhpcy5pbml0U3RhdGUoQil9aWYodGhpcy5hcHBseVRvKXt0aGlzLmFwcGx5VG9NYXJrdXAodGhpcy5hcHBseVRvKTtkZWxldGUgdGhpcy5hcHBseVRvfWVsc2V7aWYodGhpcy5yZW5kZXJUbyl7dGhpcy5yZW5kZXIodGhpcy5yZW5kZXJUbyk7ZGVsZXRlIHRoaXMucmVuZGVyVG99fX07RXh0LkNvbXBvbmVudC5BVVRPX0lEPTEwMDA7RXh0LmV4dGVuZChFeHQuQ29tcG9uZW50LEV4dC51dGlsLk9ic2VydmFibGUse2Rpc2FibGVkQ2xhc3M6IngtaXRlbS1kaXNhYmxlZCIsYWxsb3dEb21Nb3ZlOnRydWUsYXV0b1Nob3c6ZmFsc2UsaGlkZU1vZGU6ImRpc3BsYXkiLGhpZGVQYXJlbnQ6ZmFsc2UsaGlkZGVuOmZhbHNlLGRpc2FibGVkOmZhbHNlLHJlbmRlcmVkOmZhbHNlLGN0eXBlOiJFeHQuQ29tcG9uZW50IixhY3Rpb25Nb2RlOiJlbCIsZ2V0QWN0aW9uRWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1t0aGlzLmFjdGlvbk1vZGVdfSxpbml0Q29tcG9uZW50OkV4dC5lbXB0eUZuLHJlbmRlcjpmdW5jdGlvbihCLEEpe2lmKCF0aGlzLnJlbmRlcmVkJiZ0aGlzLmZpcmVFdmVudCgiYmVmb3JlcmVuZGVyIix0aGlzKSE9PWZhbHNlKXtpZighQiYmdGhpcy5lbCl7dGhpcy5lbD1FeHQuZ2V0KHRoaXMuZWwpO0I9dGhpcy5lbC5kb20ucGFyZW50Tm9kZTt0aGlzLmFsbG93RG9tTW92ZT1mYWxzZX10aGlzLmNvbnRhaW5lcj1FeHQuZ2V0KEIpO2lmKHRoaXMuY3RDbHMpe3RoaXMuY29udGFpbmVyLmFkZENsYXNzKHRoaXMuY3RDbHMpfXRoaXMucmVuZGVyZWQ9dHJ1ZTtpZihBIT09dW5kZWZpbmVkKXtpZih0eXBlb2YgQT09Im51bWJlciIpe0E9dGhpcy5jb250YWluZXIuZG9tLmNoaWxkTm9kZXNbQV19ZWxzZXtBPUV4dC5nZXREb20oQSl9fXRoaXMub25SZW5kZXIodGhpcy5jb250YWluZXIsQXx8bnVsbCk7aWYodGhpcy5hdXRvU2hvdyl7dGhpcy5lbC5yZW1vdmVDbGFzcyhbIngtaGlkZGVuIiwieC1oaWRlLSIrdGhpcy5oaWRlTW9kZV0pfWlmKHRoaXMuY2xzKXt0aGlzLmVsLmFkZENsYXNzKHRoaXMuY2xzKTtkZWxldGUgdGhpcy5jbHN9aWYodGhpcy5zdHlsZSl7dGhpcy5lbC5hcHBseVN0eWxlcyh0aGlzLnN0eWxlKTtkZWxldGUgdGhpcy5zdHlsZX10aGlzLmZpcmVFdmVudCgicmVuZGVyIix0aGlzKTt0aGlzLmFmdGVyUmVuZGVyKHRoaXMuY29udGFpbmVyKTtpZih0aGlzLmhpZGRlbil7dGhpcy5oaWRlKCl9aWYodGhpcy5kaXNhYmxlZCl7dGhpcy5kaXNhYmxlKCl9dGhpcy5pbml0U3RhdGVFdmVudHMoKX1yZXR1cm4gdGhpc30saW5pdFN0YXRlOmZ1bmN0aW9uKEEpe2lmKEV4dC5zdGF0ZS5NYW5hZ2VyKXt2YXIgQj1FeHQuc3RhdGUuTWFuYWdlci5nZXQodGhpcy5zdGF0ZUlkfHx0aGlzLmlkKTtpZihCKXtpZih0aGlzLmZpcmVFdmVudCgiYmVmb3Jlc3RhdGVyZXN0b3JlIix0aGlzLEIpIT09ZmFsc2Upe3RoaXMuYXBwbHlTdGF0ZShCKTt0aGlzLmZpcmVFdmVudCgic3RhdGVyZXN0b3JlIix0aGlzLEIpfX19fSxpbml0U3RhdGVFdmVudHM6ZnVuY3Rpb24oKXtpZih0aGlzLnN0YXRlRXZlbnRzKXtmb3IodmFyIEE9MCxCO0I9dGhpcy5zdGF0ZUV2ZW50c1tBXTtBKyspe3RoaXMub24oQix0aGlzLnNhdmVTdGF0ZSx0aGlzLHtkZWxheToxMDB9KX19fSxhcHBseVN0YXRlOmZ1bmN0aW9uKEIsQSl7aWYoQil7RXh0LmFwcGx5KHRoaXMsQil9fSxnZXRTdGF0ZTpmdW5jdGlvbigpe3JldHVybiBudWxsfSxzYXZlU3RhdGU6ZnVuY3Rpb24oKXtpZihFeHQuc3RhdGUuTWFuYWdlcil7dmFyIEE9dGhpcy5nZXRTdGF0ZSgpO2lmKHRoaXMuZmlyZUV2ZW50KCJiZWZvcmVzdGF0ZXNhdmUiLHRoaXMsQSkhPT1mYWxzZSl7RXh0LnN0YXRlLk1hbmFnZXIuc2V0KHRoaXMuc3RhdGVJZHx8dGhpcy5pZCxBKTt0aGlzLmZpcmVFdmVudCgic3RhdGVzYXZlIix0aGlzLEEpfX19LGFwcGx5VG9NYXJrdXA6ZnVuY3Rpb24oQSl7dGhpcy5hbGxvd0RvbU1vdmU9ZmFsc2U7dGhpcy5lbD1FeHQuZ2V0KEEpO3RoaXMucmVuZGVyKHRoaXMuZWwuZG9tLnBhcmVudE5vZGUpfSxhZGRDbGFzczpmdW5jdGlvbihBKXtpZih0aGlzLmVsKXt0aGlzLmVsLmFkZENsYXNzKEEpfWVsc2V7dGhpcy5jbHM9dGhpcy5jbHM/dGhpcy5jbHMrIiAiK0E6QX19LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKEEpe2lmKHRoaXMuZWwpe3RoaXMuZWwucmVtb3ZlQ2xhc3MoQSl9ZWxzZXtpZih0aGlzLmNscyl7dGhpcy5jbHM9dGhpcy5jbHMuc3BsaXQoIiAiKS5yZW1vdmUoQSkuam9pbigiICIpfX19LG9uUmVuZGVyOmZ1bmN0aW9uKEIsQSl7aWYodGhpcy5hdXRvRWwpe2lmKHR5cGVvZiB0aGlzLmF1dG9FbD09InN0cmluZyIpe3RoaXMuZWw9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0aGlzLmF1dG9FbCl9ZWxzZXt2YXIgQz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtFeHQuRG9tSGVscGVyLm92ZXJ3cml0ZShDLHRoaXMuYXV0b0VsKTt0aGlzLmVsPUMuZmlyc3RDaGlsZH1pZighdGhpcy5lbC5pZCl7dGhpcy5lbC5pZD10aGlzLmdldElkKCl9fWlmKHRoaXMuZWwpe3RoaXMuZWw9RXh0LmdldCh0aGlzLmVsKTtpZih0aGlzLmFsbG93RG9tTW92ZSE9PWZhbHNlKXtCLmRvbS5pbnNlcnRCZWZvcmUodGhpcy5lbC5kb20sQSl9fX0sZ2V0QXV0b0NyZWF0ZTpmdW5jdGlvbigpe3ZhciBBPXR5cGVvZiB0aGlzLmF1dG9DcmVhdGU9PSJvYmplY3QiP3RoaXMuYXV0b0NyZWF0ZTpFeHQuYXBwbHkoe30sdGhpcy5kZWZhdWx0QXV0b0NyZWF0ZSk7aWYodGhpcy5pZCYmIUEuaWQpe0EuaWQ9dGhpcy5pZH1yZXR1cm4gQX0sYWZ0ZXJSZW5kZXI6RXh0LmVtcHR5Rm4sZGVzdHJveTpmdW5jdGlvbigpe2lmKHRoaXMuZmlyZUV2ZW50KCJiZWZvcmVkZXN0cm95Iix0aGlzKSE9PWZhbHNlKXt0aGlzLmJlZm9yZURlc3Ryb3koKTtpZih0aGlzLnJlbmRlcmVkKXt0aGlzLmVsLnJlbW92ZUFsbExpc3RlbmVycygpO3RoaXMuZWwucmVtb3ZlKCk7aWYodGhpcy5hY3Rpb25Nb2RlPT0iY29udGFpbmVyIil7dGhpcy5jb250YWluZXIucmVtb3ZlKCl9fXRoaXMub25EZXN0cm95KCk7RXh0LkNvbXBvbmVudE1nci51bnJlZ2lzdGVyKHRoaXMpO3RoaXMuZmlyZUV2ZW50KCJkZXN0cm95Iix0aGlzKTt0aGlzLnB1cmdlTGlzdGVuZXJzKCl9fSxiZWZvcmVEZXN0cm95OkV4dC5lbXB0eUZuLG9uRGVzdHJveTpFeHQuZW1wdHlGbixnZXRFbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsfSxnZXRJZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlkfHwodGhpcy5pZD0iZXh0LWNvbXAtIisoKytFeHQuQ29tcG9uZW50LkFVVE9fSUQpKX0sZ2V0SXRlbUlkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXRlbUlkfHx0aGlzLmdldElkKCl9LGZvY3VzOmZ1bmN0aW9uKEIsQSl7aWYoQSl7dGhpcy5mb2N1cy5kZWZlcih0eXBlb2YgQT09Im51bWJlciI/QToxMCx0aGlzLFtCLGZhbHNlXSk7cmV0dXJuIH1pZih0aGlzLnJlbmRlcmVkKXt0aGlzLmVsLmZvY3VzKCk7aWYoQj09PXRydWUpe3RoaXMuZWwuZG9tLnNlbGVjdCgpfX1yZXR1cm4gdGhpc30sYmx1cjpmdW5jdGlvbigpe2lmKHRoaXMucmVuZGVyZWQpe3RoaXMuZWwuYmx1cigpfXJldHVybiB0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7aWYodGhpcy5yZW5kZXJlZCl7dGhpcy5vbkRpc2FibGUoKX10aGlzLmRpc2FibGVkPXRydWU7dGhpcy5maXJlRXZlbnQoImRpc2FibGUiLHRoaXMpO3JldHVybiB0aGlzfSxvbkRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLmdldEFjdGlvbkVsKCkuYWRkQ2xhc3ModGhpcy5kaXNhYmxlZENsYXNzKTt0aGlzLmVsLmRvbS5kaXNhYmxlZD10cnVlfSxlbmFibGU6ZnVuY3Rpb24oKXtpZih0aGlzLnJlbmRlcmVkKXt0aGlzLm9uRW5hYmxlKCl9dGhpcy5kaXNhYmxlZD1mYWxzZTt0aGlzLmZpcmVFdmVudCgiZW5hYmxlIix0aGlzKTtyZXR1cm4gdGhpc30sb25FbmFibGU6ZnVuY3Rpb24oKXt0aGlzLmdldEFjdGlvbkVsKCkucmVtb3ZlQ2xhc3ModGhpcy5kaXNhYmxlZENsYXNzKTt0aGlzLmVsLmRvbS5kaXNhYmxlZD1mYWxzZX0sc2V0RGlzYWJsZWQ6ZnVuY3Rpb24oQSl7dGhpc1tBPyJkaXNhYmxlIjoiZW5hYmxlIl0oKX0sc2hvdzpmdW5jdGlvbigpe2lmKHRoaXMuZmlyZUV2ZW50KCJiZWZvcmVzaG93Iix0aGlzKSE9PWZhbHNlKXt0aGlzLmhpZGRlbj1mYWxzZTtpZih0aGlzLmF1dG9SZW5kZXIpe3RoaXMucmVuZGVyKHR5cGVvZiB0aGlzLmF1dG9SZW5kZXI9PSJib29sZWFuIj9FeHQuZ2V0Qm9keSgpOnRoaXMuYXV0b1JlbmRlcil9aWYodGhpcy5yZW5kZXJlZCl7dGhpcy5vblNob3coKX10aGlzLmZpcmVFdmVudCgic2hvdyIsdGhpcyl9cmV0dXJuIHRoaXN9LG9uU2hvdzpmdW5jdGlvbigpe2lmKHRoaXMuaGlkZVBhcmVudCl7dGhpcy5jb250YWluZXIucmVtb3ZlQ2xhc3MoIngtaGlkZS0iK3RoaXMuaGlkZU1vZGUpfWVsc2V7dGhpcy5nZXRBY3Rpb25FbCgpLnJlbW92ZUNsYXNzKCJ4LWhpZGUtIit0aGlzLmhpZGVNb2RlKX19LGhpZGU6ZnVuY3Rpb24oKXtpZih0aGlzLmZpcmVFdmVudCgiYmVmb3JlaGlkZSIsdGhpcykhPT1mYWxzZSl7dGhpcy5oaWRkZW49dHJ1ZTtpZih0aGlzLnJlbmRlcmVkKXt0aGlzLm9uSGlkZSgpfXRoaXMuZmlyZUV2ZW50KCJoaWRlIix0aGlzKX1yZXR1cm4gdGhpc30sb25IaWRlOmZ1bmN0aW9uKCl7aWYodGhpcy5oaWRlUGFyZW50KXt0aGlzLmNvbnRhaW5lci5hZGRDbGFzcygieC1oaWRlLSIrdGhpcy5oaWRlTW9kZSl9ZWxzZXt0aGlzLmdldEFjdGlvbkVsKCkuYWRkQ2xhc3MoIngtaGlkZS0iK3RoaXMuaGlkZU1vZGUpfX0sc2V0VmlzaWJsZTpmdW5jdGlvbihBKXtpZihBKXt0aGlzLnNob3coKX1lbHNle3RoaXMuaGlkZSgpfXJldHVybiB0aGlzfSxpc1Zpc2libGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZW5kZXJlZCYmdGhpcy5nZXRBY3Rpb25FbCgpLmlzVmlzaWJsZSgpfSxjbG9uZUNvbmZpZzpmdW5jdGlvbihCKXtCPUJ8fHt9O3ZhciBDPUIuaWR8fEV4dC5pZCgpO3ZhciBBPUV4dC5hcHBseUlmKEIsdGhpcy5pbml0aWFsQ29uZmlnKTtBLmlkPUM7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKEEpfSxnZXRYVHlwZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnh0eXBlfSxpc1hUeXBlOmZ1bmN0aW9uKEIsQSl7cmV0dXJuICFBPygiLyIrdGhpcy5nZXRYVHlwZXMoKSsiLyIpLmluZGV4T2YoIi8iK0IrIi8iKSE9LTE6dGhpcy5jb25zdHJ1Y3Rvci54dHlwZT09Qn0sZ2V0WFR5cGVzOmZ1bmN0aW9uKCl7dmFyIEE9dGhpcy5jb25zdHJ1Y3RvcjtpZighQS54dHlwZXMpe3ZhciBDPVtdLEI9dGhpczt3aGlsZShCJiZCLmNvbnN0cnVjdG9yLnh0eXBlKXtDLnVuc2hpZnQoQi5jb25zdHJ1Y3Rvci54dHlwZSk7Qj1CLmNvbnN0cnVjdG9yLnN1cGVyY2xhc3N9QS54dHlwZUNoYWluPUM7QS54dHlwZXM9Qy5qb2luKCIvIil9cmV0dXJuIEEueHR5cGVzfSxmaW5kUGFyZW50Qnk6ZnVuY3Rpb24oQSl7Zm9yKHZhciBCPXRoaXMub3duZXJDdDsoQiE9bnVsbCkmJiFBKEIsdGhpcyk7Qj1CLm93bmVyQ3Qpe31yZXR1cm4gQnx8bnVsbH0sZmluZFBhcmVudEJ5VHlwZTpmdW5jdGlvbihBKXtyZXR1cm4gdHlwZW9mIEE9PSJmdW5jdGlvbiI/dGhpcy5maW5kUGFyZW50QnkoZnVuY3Rpb24oQil7cmV0dXJuIEIuY29uc3RydWN0b3I9PT1BfSk6dGhpcy5maW5kUGFyZW50QnkoZnVuY3Rpb24oQil7cmV0dXJuIEIuY29uc3RydWN0b3IueHR5cGU9PT1BfSl9fSk7RXh0LnJlZygiY29tcG9uZW50IixFeHQuQ29tcG9uZW50KTsNCkV4dC5BY3Rpb249ZnVuY3Rpb24oQSl7dGhpcy5pbml0aWFsQ29uZmlnPUE7dGhpcy5pdGVtcz1bXX07RXh0LkFjdGlvbi5wcm90b3R5cGU9e2lzQWN0aW9uOnRydWUsc2V0VGV4dDpmdW5jdGlvbihBKXt0aGlzLmluaXRpYWxDb25maWcudGV4dD1BO3RoaXMuY2FsbEVhY2goInNldFRleHQiLFtBXSl9LGdldFRleHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbml0aWFsQ29uZmlnLnRleHR9LHNldEljb25DbGFzczpmdW5jdGlvbihBKXt0aGlzLmluaXRpYWxDb25maWcuaWNvbkNscz1BO3RoaXMuY2FsbEVhY2goInNldEljb25DbGFzcyIsW0FdKX0sZ2V0SWNvbkNsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5pdGlhbENvbmZpZy5pY29uQ2xzfSxzZXREaXNhYmxlZDpmdW5jdGlvbihBKXt0aGlzLmluaXRpYWxDb25maWcuZGlzYWJsZWQ9QTt0aGlzLmNhbGxFYWNoKCJzZXREaXNhYmxlZCIsW0FdKX0sZW5hYmxlOmZ1bmN0aW9uKCl7dGhpcy5zZXREaXNhYmxlZChmYWxzZSl9LGRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLnNldERpc2FibGVkKHRydWUpfSxpc0Rpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5pdGlhbENvbmZpZy5kaXNhYmxlZH0sc2V0SGlkZGVuOmZ1bmN0aW9uKEEpe3RoaXMuaW5pdGlhbENvbmZpZy5oaWRkZW49QTt0aGlzLmNhbGxFYWNoKCJzZXRWaXNpYmxlIixbIUFdKX0sc2hvdzpmdW5jdGlvbigpe3RoaXMuc2V0SGlkZGVuKGZhbHNlKX0saGlkZTpmdW5jdGlvbigpe3RoaXMuc2V0SGlkZGVuKHRydWUpfSxpc0hpZGRlbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmluaXRpYWxDb25maWcuaGlkZGVufSxzZXRIYW5kbGVyOmZ1bmN0aW9uKEIsQSl7dGhpcy5pbml0aWFsQ29uZmlnLmhhbmRsZXI9Qjt0aGlzLmluaXRpYWxDb25maWcuc2NvcGU9QTt0aGlzLmNhbGxFYWNoKCJzZXRIYW5kbGVyIixbQixBXSl9LGVhY2g6ZnVuY3Rpb24oQixBKXtFeHQuZWFjaCh0aGlzLml0ZW1zLEIsQSl9LGNhbGxFYWNoOmZ1bmN0aW9uKEUsQil7dmFyIEQ9dGhpcy5pdGVtcztmb3IodmFyIEM9MCxBPUQubGVuZ3RoO0M8QTtDKyspe0RbQ11bRV0uYXBwbHkoRFtDXSxCKX19LGFkZENvbXBvbmVudDpmdW5jdGlvbihBKXt0aGlzLml0ZW1zLnB1c2goQSk7QS5vbigiZGVzdHJveSIsdGhpcy5yZW1vdmVDb21wb25lbnQsdGhpcyl9LHJlbW92ZUNvbXBvbmVudDpmdW5jdGlvbihBKXt0aGlzLml0ZW1zLnJlbW92ZShBKX0sZXhlY3V0ZTpmdW5jdGlvbigpe3RoaXMuaW5pdGlhbENvbmZpZy5oYW5kbGVyLmFwcGx5KHRoaXMuaW5pdGlhbENvbmZpZy5zY29wZXx8d2luZG93LGFyZ3VtZW50cyl9fTsNCihmdW5jdGlvbigpe0V4dC5MYXllcj1mdW5jdGlvbihELEMpe0Q9RHx8e307dmFyIEU9RXh0LkRvbUhlbHBlcjt2YXIgRz1ELnBhcmVudEVsLEY9Rz9FeHQuZ2V0RG9tKEcpOmRvY3VtZW50LmJvZHk7aWYoQyl7dGhpcy5kb209RXh0LmdldERvbShDKX1pZighdGhpcy5kb20pe3ZhciBIPUQuZGh8fHt0YWc6ImRpdiIsY2xzOiJ4LWxheWVyIn07dGhpcy5kb209RS5hcHBlbmQoRixIKX1pZihELmNscyl7dGhpcy5hZGRDbGFzcyhELmNscyl9dGhpcy5jb25zdHJhaW49RC5jb25zdHJhaW4hPT1mYWxzZTt0aGlzLnZpc2liaWxpdHlNb2RlPUV4dC5FbGVtZW50LlZJU0lCSUxJVFk7aWYoRC5pZCl7dGhpcy5pZD10aGlzLmRvbS5pZD1ELmlkfWVsc2V7dGhpcy5pZD1FeHQuaWQodGhpcy5kb20pfXRoaXMuemluZGV4PUQuemluZGV4fHx0aGlzLmdldFpJbmRleCgpO3RoaXMucG9zaXRpb24oImFic29sdXRlIix0aGlzLnppbmRleCk7aWYoRC5zaGFkb3cpe3RoaXMuc2hhZG93T2Zmc2V0PUQuc2hhZG93T2Zmc2V0fHw0O3RoaXMuc2hhZG93PW5ldyBFeHQuU2hhZG93KHtvZmZzZXQ6dGhpcy5zaGFkb3dPZmZzZXQsbW9kZTpELnNoYWRvd30pfWVsc2V7dGhpcy5zaGFkb3dPZmZzZXQ9MH10aGlzLnVzZVNoaW09RC5zaGltIT09ZmFsc2UmJkV4dC51c2VTaGltczt0aGlzLnVzZURpc3BsYXk9RC51c2VEaXNwbGF5O3RoaXMuaGlkZSgpfTt2YXIgQT1FeHQuRWxlbWVudC5wcm90b3R5cGU7dmFyIEI9W107RXh0LmV4dGVuZChFeHQuTGF5ZXIsRXh0LkVsZW1lbnQse2dldFpJbmRleDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnppbmRleHx8cGFyc2VJbnQodGhpcy5nZXRTdHlsZSgiei1pbmRleCIpLDEwKXx8MTEwMDB9LGdldFNoaW06ZnVuY3Rpb24oKXtpZighdGhpcy51c2VTaGltKXtyZXR1cm4gbnVsbH1pZih0aGlzLnNoaW0pe3JldHVybiB0aGlzLnNoaW19dmFyIEQ9Qi5zaGlmdCgpO2lmKCFEKXtEPXRoaXMuY3JlYXRlU2hpbSgpO0QuZW5hYmxlRGlzcGxheU1vZGUoImJsb2NrIik7RC5kb20uc3R5bGUuZGlzcGxheT0ibm9uZSI7RC5kb20uc3R5bGUudmlzaWJpbGl0eT0idmlzaWJsZSJ9dmFyIEM9dGhpcy5kb20ucGFyZW50Tm9kZTtpZihELmRvbS5wYXJlbnROb2RlIT1DKXtDLmluc2VydEJlZm9yZShELmRvbSx0aGlzLmRvbSl9RC5zZXRTdHlsZSgiei1pbmRleCIsdGhpcy5nZXRaSW5kZXgoKS0yKTt0aGlzLnNoaW09RDtyZXR1cm4gRH0saGlkZVNoaW06ZnVuY3Rpb24oKXtpZih0aGlzLnNoaW0pe3RoaXMuc2hpbS5zZXREaXNwbGF5ZWQoZmFsc2UpO0IucHVzaCh0aGlzLnNoaW0pO2RlbGV0ZSB0aGlzLnNoaW19fSxkaXNhYmxlU2hhZG93OmZ1bmN0aW9uKCl7aWYodGhpcy5zaGFkb3cpe3RoaXMuc2hhZG93RGlzYWJsZWQ9dHJ1ZTt0aGlzLnNoYWRvdy5oaWRlKCk7dGhpcy5sYXN0U2hhZG93T2Zmc2V0PXRoaXMuc2hhZG93T2Zmc2V0O3RoaXMuc2hhZG93T2Zmc2V0PTB9fSxlbmFibGVTaGFkb3c6ZnVuY3Rpb24oQyl7aWYodGhpcy5zaGFkb3cpe3RoaXMuc2hhZG93RGlzYWJsZWQ9ZmFsc2U7dGhpcy5zaGFkb3dPZmZzZXQ9dGhpcy5sYXN0U2hhZG93T2Zmc2V0O2RlbGV0ZSB0aGlzLmxhc3RTaGFkb3dPZmZzZXQ7aWYoQyl7dGhpcy5zeW5jKHRydWUpfX19LHN5bmM6ZnVuY3Rpb24oQyl7dmFyIEk9dGhpcy5zaGFkb3c7aWYoIXRoaXMudXBkYXRpbmcmJnRoaXMuaXNWaXNpYmxlKCkmJihJfHx0aGlzLnVzZVNoaW0pKXt2YXIgRj10aGlzLmdldFNoaW0oKTt2YXIgSD10aGlzLmdldFdpZHRoKCksRT10aGlzLmdldEhlaWdodCgpO3ZhciBEPXRoaXMuZ2V0TGVmdCh0cnVlKSxKPXRoaXMuZ2V0VG9wKHRydWUpO2lmKEkmJiF0aGlzLnNoYWRvd0Rpc2FibGVkKXtpZihDJiYhSS5pc1Zpc2libGUoKSl7SS5zaG93KHRoaXMpfWVsc2V7SS5yZWFsaWduKEQsSixILEUpfWlmKEYpe2lmKEMpe0Yuc2hvdygpfXZhciBHPUkuYWRqdXN0cyxLPUYuZG9tLnN0eWxlO0subGVmdD0oTWF0aC5taW4oRCxEK0cubCkpKyJweCI7Sy50b3A9KE1hdGgubWluKEosSitHLnQpKSsicHgiO0sud2lkdGg9KEgrRy53KSsicHgiO0suaGVpZ2h0PShFK0cuaCkrInB4In19ZWxzZXtpZihGKXtpZihDKXtGLnNob3coKX1GLnNldFNpemUoSCxFKTtGLnNldExlZnRUb3AoRCxKKX19fX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuaGlkZVNoaW0oKTtpZih0aGlzLnNoYWRvdyl7dGhpcy5zaGFkb3cuaGlkZSgpfXRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7RXh0LnJlbW92ZU5vZGUodGhpcy5kb20pO0V4dC5FbGVtZW50LnVuY2FjaGUodGhpcy5pZCl9LHJlbW92ZTpmdW5jdGlvbigpe3RoaXMuZGVzdHJveSgpfSxiZWdpblVwZGF0ZTpmdW5jdGlvbigpe3RoaXMudXBkYXRpbmc9dHJ1ZX0sZW5kVXBkYXRlOmZ1bmN0aW9uKCl7dGhpcy51cGRhdGluZz1mYWxzZTt0aGlzLnN5bmModHJ1ZSl9LGhpZGVVbmRlcnM6ZnVuY3Rpb24oQyl7aWYodGhpcy5zaGFkb3cpe3RoaXMuc2hhZG93LmhpZGUoKX10aGlzLmhpZGVTaGltKCl9LGNvbnN0cmFpblhZOmZ1bmN0aW9uKCl7aWYodGhpcy5jb25zdHJhaW4pe3ZhciBHPUV4dC5saWIuRG9tLmdldFZpZXdXaWR0aCgpLEM9RXh0LmxpYi5Eb20uZ2V0Vmlld0hlaWdodCgpO3ZhciBMPUV4dC5nZXREb2MoKS5nZXRTY3JvbGwoKTt2YXIgSz10aGlzLmdldFhZKCk7dmFyIEg9S1swXSxGPUtbMV07dmFyIEk9dGhpcy5kb20ub2Zmc2V0V2lkdGgrdGhpcy5zaGFkb3dPZmZzZXQsRD10aGlzLmRvbS5vZmZzZXRIZWlnaHQrdGhpcy5zaGFkb3dPZmZzZXQ7dmFyIEU9ZmFsc2U7aWYoKEgrSSk+RytMLmxlZnQpe0g9Ry1JLXRoaXMuc2hhZG93T2Zmc2V0O0U9dHJ1ZX1pZigoRitEKT5DK0wudG9wKXtGPUMtRC10aGlzLnNoYWRvd09mZnNldDtFPXRydWV9aWYoSDxMLmxlZnQpe0g9TC5sZWZ0O0U9dHJ1ZX1pZihGPEwudG9wKXtGPUwudG9wO0U9dHJ1ZX1pZihFKXtpZih0aGlzLmF2b2lkWSl7dmFyIEo9dGhpcy5hdm9pZFk7aWYoRjw9SiYmKEYrRCk+PUope0Y9Si1ELTV9fUs9W0gsRl07dGhpcy5zdG9yZVhZKEspO0Euc2V0WFkuY2FsbCh0aGlzLEspO3RoaXMuc3luYygpfX19LGlzVmlzaWJsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZpc2libGV9LHNob3dBY3Rpb246ZnVuY3Rpb24oKXt0aGlzLnZpc2libGU9dHJ1ZTtpZih0aGlzLnVzZURpc3BsYXk9PT10cnVlKXt0aGlzLnNldERpc3BsYXllZCgiIil9ZWxzZXtpZih0aGlzLmxhc3RYWSl7QS5zZXRYWS5jYWxsKHRoaXMsdGhpcy5sYXN0WFkpfWVsc2V7aWYodGhpcy5sYXN0TFQpe0Euc2V0TGVmdFRvcC5jYWxsKHRoaXMsdGhpcy5sYXN0TFRbMF0sdGhpcy5sYXN0TFRbMV0pfX19fSxoaWRlQWN0aW9uOmZ1bmN0aW9uKCl7dGhpcy52aXNpYmxlPWZhbHNlO2lmKHRoaXMudXNlRGlzcGxheT09PXRydWUpe3RoaXMuc2V0RGlzcGxheWVkKGZhbHNlKX1lbHNle3RoaXMuc2V0TGVmdFRvcCgtMTAwMDAsLTEwMDAwKX19LHNldFZpc2libGU6ZnVuY3Rpb24oRSxELEcsSCxGKXtpZihFKXt0aGlzLnNob3dBY3Rpb24oKX1pZihEJiZFKXt2YXIgQz1mdW5jdGlvbigpe3RoaXMuc3luYyh0cnVlKTtpZihIKXtIKCl9fS5jcmVhdGVEZWxlZ2F0ZSh0aGlzKTtBLnNldFZpc2libGUuY2FsbCh0aGlzLHRydWUsdHJ1ZSxHLEMsRil9ZWxzZXtpZighRSl7dGhpcy5oaWRlVW5kZXJzKHRydWUpfXZhciBDPUg7aWYoRCl7Qz1mdW5jdGlvbigpe3RoaXMuaGlkZUFjdGlvbigpO2lmKEgpe0goKX19LmNyZWF0ZURlbGVnYXRlKHRoaXMpfUEuc2V0VmlzaWJsZS5jYWxsKHRoaXMsRSxELEcsQyxGKTtpZihFKXt0aGlzLnN5bmModHJ1ZSl9ZWxzZXtpZighRCl7dGhpcy5oaWRlQWN0aW9uKCl9fX19LHN0b3JlWFk6ZnVuY3Rpb24oQyl7ZGVsZXRlIHRoaXMubGFzdExUO3RoaXMubGFzdFhZPUN9LHN0b3JlTGVmdFRvcDpmdW5jdGlvbihELEMpe2RlbGV0ZSB0aGlzLmxhc3RYWTt0aGlzLmxhc3RMVD1bRCxDXX0sYmVmb3JlRng6ZnVuY3Rpb24oKXt0aGlzLmJlZm9yZUFjdGlvbigpO3JldHVybiBFeHQuTGF5ZXIuc3VwZXJjbGFzcy5iZWZvcmVGeC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGFmdGVyRng6ZnVuY3Rpb24oKXtFeHQuTGF5ZXIuc3VwZXJjbGFzcy5hZnRlckZ4LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnN5bmModGhpcy5pc1Zpc2libGUoKSl9LGJlZm9yZUFjdGlvbjpmdW5jdGlvbigpe2lmKCF0aGlzLnVwZGF0aW5nJiZ0aGlzLnNoYWRvdyl7dGhpcy5zaGFkb3cuaGlkZSgpfX0sc2V0TGVmdDpmdW5jdGlvbihDKXt0aGlzLnN0b3JlTGVmdFRvcChDLHRoaXMuZ2V0VG9wKHRydWUpKTtBLnNldExlZnQuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuc3luYygpfSxzZXRUb3A6ZnVuY3Rpb24oQyl7dGhpcy5zdG9yZUxlZnRUb3AodGhpcy5nZXRMZWZ0KHRydWUpLEMpO0Euc2V0VG9wLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnN5bmMoKX0sc2V0TGVmdFRvcDpmdW5jdGlvbihELEMpe3RoaXMuc3RvcmVMZWZ0VG9wKEQsQyk7QS5zZXRMZWZ0VG9wLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnN5bmMoKX0sc2V0WFk6ZnVuY3Rpb24oRixELEcsSCxFKXt0aGlzLmZpeERpc3BsYXkoKTt0aGlzLmJlZm9yZUFjdGlvbigpO3RoaXMuc3RvcmVYWShGKTt2YXIgQz10aGlzLmNyZWF0ZUNCKEgpO0Euc2V0WFkuY2FsbCh0aGlzLEYsRCxHLEMsRSk7aWYoIUQpe0MoKX19LGNyZWF0ZUNCOmZ1bmN0aW9uKEQpe3ZhciBDPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKCl7Qy5jb25zdHJhaW5YWSgpO0Muc3luYyh0cnVlKTtpZihEKXtEKCl9fX0sc2V0WDpmdW5jdGlvbihDLEQsRixHLEUpe3RoaXMuc2V0WFkoW0MsdGhpcy5nZXRZKCldLEQsRixHLEUpfSxzZXRZOmZ1bmN0aW9uKEcsQyxFLEYsRCl7dGhpcy5zZXRYWShbdGhpcy5nZXRYKCksR10sQyxFLEYsRCl9LHNldFNpemU6ZnVuY3Rpb24oRSxGLEQsSCxJLEcpe3RoaXMuYmVmb3JlQWN0aW9uKCk7dmFyIEM9dGhpcy5jcmVhdGVDQihJKTtBLnNldFNpemUuY2FsbCh0aGlzLEUsRixELEgsQyxHKTtpZighRCl7QygpfX0sc2V0V2lkdGg6ZnVuY3Rpb24oRSxELEcsSCxGKXt0aGlzLmJlZm9yZUFjdGlvbigpO3ZhciBDPXRoaXMuY3JlYXRlQ0IoSCk7QS5zZXRXaWR0aC5jYWxsKHRoaXMsRSxELEcsQyxGKTtpZighRCl7QygpfX0sc2V0SGVpZ2h0OmZ1bmN0aW9uKEUsRCxHLEgsRil7dGhpcy5iZWZvcmVBY3Rpb24oKTt2YXIgQz10aGlzLmNyZWF0ZUNCKEgpO0Euc2V0SGVpZ2h0LmNhbGwodGhpcyxFLEQsRyxDLEYpO2lmKCFEKXtDKCl9fSxzZXRCb3VuZHM6ZnVuY3Rpb24oSixILEssRCxJLEYsRyxFKXt0aGlzLmJlZm9yZUFjdGlvbigpO3ZhciBDPXRoaXMuY3JlYXRlQ0IoRyk7aWYoIUkpe3RoaXMuc3RvcmVYWShbSixIXSk7QS5zZXRYWS5jYWxsKHRoaXMsW0osSF0pO0Euc2V0U2l6ZS5jYWxsKHRoaXMsSyxELEksRixDLEUpO0MoKX1lbHNle0Euc2V0Qm91bmRzLmNhbGwodGhpcyxKLEgsSyxELEksRixDLEUpfXJldHVybiB0aGlzfSxzZXRaSW5kZXg6ZnVuY3Rpb24oQyl7dGhpcy56aW5kZXg9Qzt0aGlzLnNldFN0eWxlKCJ6LWluZGV4IixDKzIpO2lmKHRoaXMuc2hhZG93KXt0aGlzLnNoYWRvdy5zZXRaSW5kZXgoQysxKX1pZih0aGlzLnNoaW0pe3RoaXMuc2hpbS5zZXRTdHlsZSgiei1pbmRleCIsQyl9fX0pfSkoKTsNCkV4dC5TaGFkb3c9ZnVuY3Rpb24oQyl7RXh0LmFwcGx5KHRoaXMsQyk7aWYodHlwZW9mIHRoaXMubW9kZSE9InN0cmluZyIpe3RoaXMubW9kZT10aGlzLmRlZmF1bHRNb2RlfXZhciBEPXRoaXMub2Zmc2V0LEI9e2g6MH07dmFyIEE9TWF0aC5mbG9vcih0aGlzLm9mZnNldC8yKTtzd2l0Y2godGhpcy5tb2RlLnRvTG93ZXJDYXNlKCkpe2Nhc2UiZHJvcCI6Qi53PTA7Qi5sPUIudD1EO0IudC09MTtpZihFeHQuaXNJRSl7Qi5sLT10aGlzLm9mZnNldCtBO0IudC09dGhpcy5vZmZzZXQrQTtCLnctPUE7Qi5oLT1BO0IudCs9MX1icmVhaztjYXNlInNpZGVzIjpCLnc9KEQqMik7Qi5sPS1EO0IudD1ELTE7aWYoRXh0LmlzSUUpe0IubC09KHRoaXMub2Zmc2V0LUEpO0IudC09dGhpcy5vZmZzZXQrQTtCLmwrPTE7Qi53LT0odGhpcy5vZmZzZXQtQSkqMjtCLnctPUErMTtCLmgtPTF9YnJlYWs7Y2FzZSJmcmFtZSI6Qi53PUIuaD0oRCoyKTtCLmw9Qi50PS1EO0IudCs9MTtCLmgtPTI7aWYoRXh0LmlzSUUpe0IubC09KHRoaXMub2Zmc2V0LUEpO0IudC09KHRoaXMub2Zmc2V0LUEpO0IubCs9MTtCLnctPSh0aGlzLm9mZnNldCtBKzEpO0IuaC09KHRoaXMub2Zmc2V0K0EpO0IuaCs9MX1icmVha310aGlzLmFkanVzdHM9Qn07RXh0LlNoYWRvdy5wcm90b3R5cGU9e29mZnNldDo0LGRlZmF1bHRNb2RlOiJkcm9wIixzaG93OmZ1bmN0aW9uKEEpe0E9RXh0LmdldChBKTtpZighdGhpcy5lbCl7dGhpcy5lbD1FeHQuU2hhZG93LlBvb2wucHVsbCgpO2lmKHRoaXMuZWwuZG9tLm5leHRTaWJsaW5nIT1BLmRvbSl7dGhpcy5lbC5pbnNlcnRCZWZvcmUoQSl9fXRoaXMuZWwuc2V0U3R5bGUoInotaW5kZXgiLHRoaXMuekluZGV4fHxwYXJzZUludChBLmdldFN0eWxlKCJ6LWluZGV4IiksMTApLTEpO2lmKEV4dC5pc0lFKXt0aGlzLmVsLmRvbS5zdHlsZS5maWx0ZXI9InByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5hbHBoYShvcGFjaXR5PTUwKSBwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuQmx1cihwaXhlbHJhZGl1cz0iKyh0aGlzLm9mZnNldCkrIikifXRoaXMucmVhbGlnbihBLmdldExlZnQodHJ1ZSksQS5nZXRUb3AodHJ1ZSksQS5nZXRXaWR0aCgpLEEuZ2V0SGVpZ2h0KCkpO3RoaXMuZWwuZG9tLnN0eWxlLmRpc3BsYXk9ImJsb2NrIn0saXNWaXNpYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWw/dHJ1ZTpmYWxzZX0scmVhbGlnbjpmdW5jdGlvbihBLE0sTCxEKXtpZighdGhpcy5lbCl7cmV0dXJuIH12YXIgST10aGlzLmFkanVzdHMsRz10aGlzLmVsLmRvbSxOPUcuc3R5bGU7dmFyIEU9MDtOLmxlZnQ9KEErSS5sKSsicHgiO04udG9wPShNK0kudCkrInB4Ijt2YXIgSz0oTCtJLncpLEM9KEQrSS5oKSxGPUsrInB4IixKPUMrInB4IjtpZihOLndpZHRoIT1GfHxOLmhlaWdodCE9Sil7Ti53aWR0aD1GO04uaGVpZ2h0PUo7aWYoIUV4dC5pc0lFKXt2YXIgSD1HLmNoaWxkTm9kZXM7dmFyIEI9TWF0aC5tYXgoMCwoSy0xMikpKyJweCI7SFswXS5jaGlsZE5vZGVzWzFdLnN0eWxlLndpZHRoPUI7SFsxXS5jaGlsZE5vZGVzWzFdLnN0eWxlLndpZHRoPUI7SFsyXS5jaGlsZE5vZGVzWzFdLnN0eWxlLndpZHRoPUI7SFsxXS5zdHlsZS5oZWlnaHQ9TWF0aC5tYXgoMCwoQy0xMikpKyJweCJ9fX0saGlkZTpmdW5jdGlvbigpe2lmKHRoaXMuZWwpe3RoaXMuZWwuZG9tLnN0eWxlLmRpc3BsYXk9Im5vbmUiO0V4dC5TaGFkb3cuUG9vbC5wdXNoKHRoaXMuZWwpO2RlbGV0ZSB0aGlzLmVsfX0sc2V0WkluZGV4OmZ1bmN0aW9uKEEpe3RoaXMuekluZGV4PUE7aWYodGhpcy5lbCl7dGhpcy5lbC5zZXRTdHlsZSgiei1pbmRleCIsQSl9fX07RXh0LlNoYWRvdy5Qb29sPWZ1bmN0aW9uKCl7dmFyIEI9W107dmFyIEE9RXh0LmlzSUU/IjxkaXYgY2xhc3M9XCJ4LWllLXNoYWRvd1wiPjwvZGl2PiI6IjxkaXYgY2xhc3M9XCJ4LXNoYWRvd1wiPjxkaXYgY2xhc3M9XCJ4c3RcIj48ZGl2IGNsYXNzPVwieHN0bFwiPjwvZGl2PjxkaXYgY2xhc3M9XCJ4c3RjXCI+PC9kaXY+PGRpdiBjbGFzcz1cInhzdHJcIj48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPVwieHNjXCI+PGRpdiBjbGFzcz1cInhzbWxcIj48L2Rpdj48ZGl2IGNsYXNzPVwieHNtY1wiPjwvZGl2PjxkaXYgY2xhc3M9XCJ4c21yXCI+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cInhzYlwiPjxkaXYgY2xhc3M9XCJ4c2JsXCI+PC9kaXY+PGRpdiBjbGFzcz1cInhzYmNcIj48L2Rpdj48ZGl2IGNsYXNzPVwieHNiclwiPjwvZGl2PjwvZGl2PjwvZGl2PiI7cmV0dXJue3B1bGw6ZnVuY3Rpb24oKXt2YXIgQz1CLnNoaWZ0KCk7aWYoIUMpe0M9RXh0LmdldChFeHQuRG9tSGVscGVyLmluc2VydEh0bWwoImJlZm9yZUJlZ2luIixkb2N1bWVudC5ib2R5LmZpcnN0Q2hpbGQsQSkpO0MuYXV0b0JveEFkanVzdD1mYWxzZX1yZXR1cm4gQ30scHVzaDpmdW5jdGlvbihDKXtCLnB1c2goQyl9fX0oKTsNCkV4dC5Cb3hDb21wb25lbnQ9RXh0LmV4dGVuZChFeHQuQ29tcG9uZW50LHtpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7RXh0LkJveENvbXBvbmVudC5zdXBlcmNsYXNzLmluaXRDb21wb25lbnQuY2FsbCh0aGlzKTt0aGlzLmFkZEV2ZW50cygicmVzaXplIiwibW92ZSIpfSxib3hSZWFkeTpmYWxzZSxkZWZlckhlaWdodDpmYWxzZSxzZXRTaXplOmZ1bmN0aW9uKEIsRCl7aWYodHlwZW9mIEI9PSJvYmplY3QiKXtEPUIuaGVpZ2h0O0I9Qi53aWR0aH1pZighdGhpcy5ib3hSZWFkeSl7dGhpcy53aWR0aD1CO3RoaXMuaGVpZ2h0PUQ7cmV0dXJuIHRoaXN9aWYodGhpcy5sYXN0U2l6ZSYmdGhpcy5sYXN0U2l6ZS53aWR0aD09QiYmdGhpcy5sYXN0U2l6ZS5oZWlnaHQ9PUQpe3JldHVybiB0aGlzfXRoaXMubGFzdFNpemU9e3dpZHRoOkIsaGVpZ2h0OkR9O3ZhciBDPXRoaXMuYWRqdXN0U2l6ZShCLEQpO3ZhciBGPUMud2lkdGgsQT1DLmhlaWdodDtpZihGIT09dW5kZWZpbmVkfHxBIT09dW5kZWZpbmVkKXt2YXIgRT10aGlzLmdldFJlc2l6ZUVsKCk7aWYoIXRoaXMuZGVmZXJIZWlnaHQmJkYhPT11bmRlZmluZWQmJkEhPT11bmRlZmluZWQpe0Uuc2V0U2l6ZShGLEEpfWVsc2V7aWYoIXRoaXMuZGVmZXJIZWlnaHQmJkEhPT11bmRlZmluZWQpe0Uuc2V0SGVpZ2h0KEEpfWVsc2V7aWYoRiE9PXVuZGVmaW5lZCl7RS5zZXRXaWR0aChGKX19fXRoaXMub25SZXNpemUoRixBLEIsRCk7dGhpcy5maXJlRXZlbnQoInJlc2l6ZSIsdGhpcyxGLEEsQixEKX1yZXR1cm4gdGhpc30sc2V0V2lkdGg6ZnVuY3Rpb24oQSl7cmV0dXJuIHRoaXMuc2V0U2l6ZShBKX0sc2V0SGVpZ2h0OmZ1bmN0aW9uKEEpe3JldHVybiB0aGlzLnNldFNpemUodW5kZWZpbmVkLEEpfSxnZXRTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWwuZ2V0U2l6ZSgpfSxnZXRQb3NpdGlvbjpmdW5jdGlvbihBKXtpZihBPT09dHJ1ZSl7cmV0dXJuW3RoaXMuZWwuZ2V0TGVmdCh0cnVlKSx0aGlzLmVsLmdldFRvcCh0cnVlKV19cmV0dXJuIHRoaXMueHl8fHRoaXMuZWwuZ2V0WFkoKX0sZ2V0Qm94OmZ1bmN0aW9uKEEpe3ZhciBCPXRoaXMuZWwuZ2V0U2l6ZSgpO2lmKEE9PT10cnVlKXtCLng9dGhpcy5lbC5nZXRMZWZ0KHRydWUpO0IueT10aGlzLmVsLmdldFRvcCh0cnVlKX1lbHNle3ZhciBDPXRoaXMueHl8fHRoaXMuZWwuZ2V0WFkoKTtCLng9Q1swXTtCLnk9Q1sxXX1yZXR1cm4gQn0sdXBkYXRlQm94OmZ1bmN0aW9uKEEpe3RoaXMuc2V0U2l6ZShBLndpZHRoLEEuaGVpZ2h0KTt0aGlzLnNldFBhZ2VQb3NpdGlvbihBLngsQS55KTtyZXR1cm4gdGhpc30sZ2V0UmVzaXplRWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXNpemVFbHx8dGhpcy5lbH0sZ2V0UG9zaXRpb25FbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBvc2l0aW9uRWx8fHRoaXMuZWx9LHNldFBvc2l0aW9uOmZ1bmN0aW9uKEEsRil7aWYoQSYmdHlwZW9mIEFbMV09PSJudW1iZXIiKXtGPUFbMV07QT1BWzBdfXRoaXMueD1BO3RoaXMueT1GO2lmKCF0aGlzLmJveFJlYWR5KXtyZXR1cm4gdGhpc312YXIgQj10aGlzLmFkanVzdFBvc2l0aW9uKEEsRik7dmFyIEU9Qi54LEQ9Qi55O3ZhciBDPXRoaXMuZ2V0UG9zaXRpb25FbCgpO2lmKEUhPT11bmRlZmluZWR8fEQhPT11bmRlZmluZWQpe2lmKEUhPT11bmRlZmluZWQmJkQhPT11bmRlZmluZWQpe0Muc2V0TGVmdFRvcChFLEQpfWVsc2V7aWYoRSE9PXVuZGVmaW5lZCl7Qy5zZXRMZWZ0KEUpfWVsc2V7aWYoRCE9PXVuZGVmaW5lZCl7Qy5zZXRUb3AoRCl9fX10aGlzLm9uUG9zaXRpb24oRSxEKTt0aGlzLmZpcmVFdmVudCgibW92ZSIsdGhpcyxFLEQpfXJldHVybiB0aGlzfSxzZXRQYWdlUG9zaXRpb246ZnVuY3Rpb24oQSxDKXtpZihBJiZ0eXBlb2YgQVsxXT09Im51bWJlciIpe0M9QVsxXTtBPUFbMF19dGhpcy5wYWdlWD1BO3RoaXMucGFnZVk9QztpZighdGhpcy5ib3hSZWFkeSl7cmV0dXJuIH1pZihBPT09dW5kZWZpbmVkfHxDPT09dW5kZWZpbmVkKXtyZXR1cm4gfXZhciBCPXRoaXMuZWwudHJhbnNsYXRlUG9pbnRzKEEsQyk7dGhpcy5zZXRQb3NpdGlvbihCLmxlZnQsQi50b3ApO3JldHVybiB0aGlzfSxvblJlbmRlcjpmdW5jdGlvbihCLEEpe0V4dC5Cb3hDb21wb25lbnQuc3VwZXJjbGFzcy5vblJlbmRlci5jYWxsKHRoaXMsQixBKTtpZih0aGlzLnJlc2l6ZUVsKXt0aGlzLnJlc2l6ZUVsPUV4dC5nZXQodGhpcy5yZXNpemVFbCl9aWYodGhpcy5wb3NpdGlvbkVsKXt0aGlzLnBvc2l0aW9uRWw9RXh0LmdldCh0aGlzLnBvc2l0aW9uRWwpfX0sYWZ0ZXJSZW5kZXI6ZnVuY3Rpb24oKXtFeHQuQm94Q29tcG9uZW50LnN1cGVyY2xhc3MuYWZ0ZXJSZW5kZXIuY2FsbCh0aGlzKTt0aGlzLmJveFJlYWR5PXRydWU7dGhpcy5zZXRTaXplKHRoaXMud2lkdGgsdGhpcy5oZWlnaHQpO2lmKHRoaXMueHx8dGhpcy55KXt0aGlzLnNldFBvc2l0aW9uKHRoaXMueCx0aGlzLnkpfWVsc2V7aWYodGhpcy5wYWdlWHx8dGhpcy5wYWdlWSl7dGhpcy5zZXRQYWdlUG9zaXRpb24odGhpcy5wYWdlWCx0aGlzLnBhZ2VZKX19fSxzeW5jU2l6ZTpmdW5jdGlvbigpe2RlbGV0ZSB0aGlzLmxhc3RTaXplO3RoaXMuc2V0U2l6ZSh0aGlzLmF1dG9XaWR0aD91bmRlZmluZWQ6dGhpcy5lbC5nZXRXaWR0aCgpLHRoaXMuYXV0b0hlaWdodD91bmRlZmluZWQ6dGhpcy5lbC5nZXRIZWlnaHQoKSk7cmV0dXJuIHRoaXN9LG9uUmVzaXplOmZ1bmN0aW9uKEQsQixBLEMpe30sb25Qb3NpdGlvbjpmdW5jdGlvbihBLEIpe30sYWRqdXN0U2l6ZTpmdW5jdGlvbihBLEIpe2lmKHRoaXMuYXV0b1dpZHRoKXtBPSJhdXRvIn1pZih0aGlzLmF1dG9IZWlnaHQpe0I9ImF1dG8ifXJldHVybnt3aWR0aDpBLGhlaWdodDpCfX0sYWRqdXN0UG9zaXRpb246ZnVuY3Rpb24oQSxCKXtyZXR1cm57eDpBLHk6Qn19fSk7RXh0LnJlZygiYm94IixFeHQuQm94Q29tcG9uZW50KTsNCkV4dC5TcGxpdEJhcj1mdW5jdGlvbihDLEUsQixELEEpe3RoaXMuZWw9RXh0LmdldChDLHRydWUpO3RoaXMuZWwuZG9tLnVuc2VsZWN0YWJsZT0ib24iO3RoaXMucmVzaXppbmdFbD1FeHQuZ2V0KEUsdHJ1ZSk7dGhpcy5vcmllbnRhdGlvbj1CfHxFeHQuU3BsaXRCYXIuSE9SSVpPTlRBTDt0aGlzLm1pblNpemU9MDt0aGlzLm1heFNpemU9MjAwMDt0aGlzLmFuaW1hdGU9ZmFsc2U7dGhpcy51c2VTaGltPWZhbHNlO3RoaXMuc2hpbT1udWxsO2lmKCFBKXt0aGlzLnByb3h5PUV4dC5TcGxpdEJhci5jcmVhdGVQcm94eSh0aGlzLm9yaWVudGF0aW9uKX1lbHNle3RoaXMucHJveHk9RXh0LmdldChBKS5kb219dGhpcy5kZD1uZXcgRXh0LmRkLkREUHJveHkodGhpcy5lbC5kb20uaWQsIlhTcGxpdEJhcnMiLHtkcmFnRWxJZDp0aGlzLnByb3h5LmlkfSk7dGhpcy5kZC5iNFN0YXJ0RHJhZz10aGlzLm9uU3RhcnRQcm94eURyYWcuY3JlYXRlRGVsZWdhdGUodGhpcyk7dGhpcy5kZC5lbmREcmFnPXRoaXMub25FbmRQcm94eURyYWcuY3JlYXRlRGVsZWdhdGUodGhpcyk7dGhpcy5kcmFnU3BlY3M9e307dGhpcy5hZGFwdGVyPW5ldyBFeHQuU3BsaXRCYXIuQmFzaWNMYXlvdXRBZGFwdGVyKCk7dGhpcy5hZGFwdGVyLmluaXQodGhpcyk7aWYodGhpcy5vcmllbnRhdGlvbj09RXh0LlNwbGl0QmFyLkhPUklaT05UQUwpe3RoaXMucGxhY2VtZW50PUR8fCh0aGlzLmVsLmdldFgoKT50aGlzLnJlc2l6aW5nRWwuZ2V0WCgpP0V4dC5TcGxpdEJhci5MRUZUOkV4dC5TcGxpdEJhci5SSUdIVCk7dGhpcy5lbC5hZGRDbGFzcygieC1zcGxpdGJhci1oIil9ZWxzZXt0aGlzLnBsYWNlbWVudD1EfHwodGhpcy5lbC5nZXRZKCk+dGhpcy5yZXNpemluZ0VsLmdldFkoKT9FeHQuU3BsaXRCYXIuVE9QOkV4dC5TcGxpdEJhci5CT1RUT00pO3RoaXMuZWwuYWRkQ2xhc3MoIngtc3BsaXRiYXItdiIpfXRoaXMuYWRkRXZlbnRzKCJyZXNpemUiLCJtb3ZlZCIsImJlZm9yZXJlc2l6ZSIsImJlZm9yZWFwcGx5Iik7RXh0LlNwbGl0QmFyLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKX07RXh0LmV4dGVuZChFeHQuU3BsaXRCYXIsRXh0LnV0aWwuT2JzZXJ2YWJsZSx7b25TdGFydFByb3h5RHJhZzpmdW5jdGlvbihBLEUpe3RoaXMuZmlyZUV2ZW50KCJiZWZvcmVyZXNpemUiLHRoaXMpO3RoaXMub3ZlcmxheT1FeHQuRG9tSGVscGVyLmFwcGVuZChkb2N1bWVudC5ib2R5LHtjbHM6IngtZHJhZy1vdmVybGF5IixodG1sOiImIzE2MDsifSx0cnVlKTt0aGlzLm92ZXJsYXkudW5zZWxlY3RhYmxlKCk7dGhpcy5vdmVybGF5LnNldFNpemUoRXh0LmxpYi5Eb20uZ2V0Vmlld1dpZHRoKHRydWUpLEV4dC5saWIuRG9tLmdldFZpZXdIZWlnaHQodHJ1ZSkpO3RoaXMub3ZlcmxheS5zaG93KCk7RXh0LmdldCh0aGlzLnByb3h5KS5zZXREaXNwbGF5ZWQoImJsb2NrIik7dmFyIEM9dGhpcy5hZGFwdGVyLmdldEVsZW1lbnRTaXplKHRoaXMpO3RoaXMuYWN0aXZlTWluU2l6ZT10aGlzLmdldE1pbmltdW1TaXplKCk7dGhpcy5hY3RpdmVNYXhTaXplPXRoaXMuZ2V0TWF4aW11bVNpemUoKTt2YXIgRD1DLXRoaXMuYWN0aXZlTWluU2l6ZTt2YXIgQj1NYXRoLm1heCh0aGlzLmFjdGl2ZU1heFNpemUtQywwKTtpZih0aGlzLm9yaWVudGF0aW9uPT1FeHQuU3BsaXRCYXIuSE9SSVpPTlRBTCl7dGhpcy5kZC5yZXNldENvbnN0cmFpbnRzKCk7dGhpcy5kZC5zZXRYQ29uc3RyYWludCh0aGlzLnBsYWNlbWVudD09RXh0LlNwbGl0QmFyLkxFRlQ/RDpCLHRoaXMucGxhY2VtZW50PT1FeHQuU3BsaXRCYXIuTEVGVD9COkQpO3RoaXMuZGQuc2V0WUNvbnN0cmFpbnQoMCwwKX1lbHNle3RoaXMuZGQucmVzZXRDb25zdHJhaW50cygpO3RoaXMuZGQuc2V0WENvbnN0cmFpbnQoMCwwKTt0aGlzLmRkLnNldFlDb25zdHJhaW50KHRoaXMucGxhY2VtZW50PT1FeHQuU3BsaXRCYXIuVE9QP0Q6Qix0aGlzLnBsYWNlbWVudD09RXh0LlNwbGl0QmFyLlRPUD9COkQpfXRoaXMuZHJhZ1NwZWNzLnN0YXJ0U2l6ZT1DO3RoaXMuZHJhZ1NwZWNzLnN0YXJ0UG9pbnQ9W0EsRV07RXh0LmRkLkREUHJveHkucHJvdG90eXBlLmI0U3RhcnREcmFnLmNhbGwodGhpcy5kZCxBLEUpfSxvbkVuZFByb3h5RHJhZzpmdW5jdGlvbihDKXtFeHQuZ2V0KHRoaXMucHJveHkpLnNldERpc3BsYXllZChmYWxzZSk7dmFyIEI9RXh0LmxpYi5FdmVudC5nZXRYWShDKTtpZih0aGlzLm92ZXJsYXkpe3RoaXMub3ZlcmxheS5yZW1vdmUoKTtkZWxldGUgdGhpcy5vdmVybGF5fXZhciBBO2lmKHRoaXMub3JpZW50YXRpb249PUV4dC5TcGxpdEJhci5IT1JJWk9OVEFMKXtBPXRoaXMuZHJhZ1NwZWNzLnN0YXJ0U2l6ZSsodGhpcy5wbGFjZW1lbnQ9PUV4dC5TcGxpdEJhci5MRUZUP0JbMF0tdGhpcy5kcmFnU3BlY3Muc3RhcnRQb2ludFswXTp0aGlzLmRyYWdTcGVjcy5zdGFydFBvaW50WzBdLUJbMF0pfWVsc2V7QT10aGlzLmRyYWdTcGVjcy5zdGFydFNpemUrKHRoaXMucGxhY2VtZW50PT1FeHQuU3BsaXRCYXIuVE9QP0JbMV0tdGhpcy5kcmFnU3BlY3Muc3RhcnRQb2ludFsxXTp0aGlzLmRyYWdTcGVjcy5zdGFydFBvaW50WzFdLUJbMV0pfUE9TWF0aC5taW4oTWF0aC5tYXgoQSx0aGlzLmFjdGl2ZU1pblNpemUpLHRoaXMuYWN0aXZlTWF4U2l6ZSk7aWYoQSE9dGhpcy5kcmFnU3BlY3Muc3RhcnRTaXplKXtpZih0aGlzLmZpcmVFdmVudCgiYmVmb3JlYXBwbHkiLHRoaXMsQSkhPT1mYWxzZSl7dGhpcy5hZGFwdGVyLnNldEVsZW1lbnRTaXplKHRoaXMsQSk7dGhpcy5maXJlRXZlbnQoIm1vdmVkIix0aGlzLEEpO3RoaXMuZmlyZUV2ZW50KCJyZXNpemUiLHRoaXMsQSl9fX0sZ2V0QWRhcHRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFkYXB0ZXJ9LHNldEFkYXB0ZXI6ZnVuY3Rpb24oQSl7dGhpcy5hZGFwdGVyPUE7dGhpcy5hZGFwdGVyLmluaXQodGhpcyl9LGdldE1pbmltdW1TaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWluU2l6ZX0sc2V0TWluaW11bVNpemU6ZnVuY3Rpb24oQSl7dGhpcy5taW5TaXplPUF9LGdldE1heGltdW1TaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWF4U2l6ZX0sc2V0TWF4aW11bVNpemU6ZnVuY3Rpb24oQSl7dGhpcy5tYXhTaXplPUF9LHNldEN1cnJlbnRTaXplOmZ1bmN0aW9uKEIpe3ZhciBBPXRoaXMuYW5pbWF0ZTt0aGlzLmFuaW1hdGU9ZmFsc2U7dGhpcy5hZGFwdGVyLnNldEVsZW1lbnRTaXplKHRoaXMsQik7dGhpcy5hbmltYXRlPUF9LGRlc3Ryb3k6ZnVuY3Rpb24oQSl7aWYodGhpcy5zaGltKXt0aGlzLnNoaW0ucmVtb3ZlKCl9dGhpcy5kZC51bnJlZygpO0V4dC5yZW1vdmVOb2RlKHRoaXMucHJveHkpO2lmKEEpe3RoaXMuZWwucmVtb3ZlKCl9fX0pO0V4dC5TcGxpdEJhci5jcmVhdGVQcm94eT1mdW5jdGlvbihCKXt2YXIgQz1uZXcgRXh0LkVsZW1lbnQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikpO0MudW5zZWxlY3RhYmxlKCk7dmFyIEE9Ingtc3BsaXRiYXItcHJveHkiO0MuYWRkQ2xhc3MoQSsiICIrKEI9PUV4dC5TcGxpdEJhci5IT1JJWk9OVEFMP0ErIi1oIjpBKyItdiIpKTtkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKEMuZG9tKTtyZXR1cm4gQy5kb219O0V4dC5TcGxpdEJhci5CYXNpY0xheW91dEFkYXB0ZXI9ZnVuY3Rpb24oKXt9O0V4dC5TcGxpdEJhci5CYXNpY0xheW91dEFkYXB0ZXIucHJvdG90eXBlPXtpbml0OmZ1bmN0aW9uKEEpe30sZ2V0RWxlbWVudFNpemU6ZnVuY3Rpb24oQSl7aWYoQS5vcmllbnRhdGlvbj09RXh0LlNwbGl0QmFyLkhPUklaT05UQUwpe3JldHVybiBBLnJlc2l6aW5nRWwuZ2V0V2lkdGgoKX1lbHNle3JldHVybiBBLnJlc2l6aW5nRWwuZ2V0SGVpZ2h0KCl9fSxzZXRFbGVtZW50U2l6ZTpmdW5jdGlvbihCLEEsQyl7aWYoQi5vcmllbnRhdGlvbj09RXh0LlNwbGl0QmFyLkhPUklaT05UQUwpe2lmKCFCLmFuaW1hdGUpe0IucmVzaXppbmdFbC5zZXRXaWR0aChBKTtpZihDKXtDKEIsQSl9fWVsc2V7Qi5yZXNpemluZ0VsLnNldFdpZHRoKEEsdHJ1ZSwwLjEsQywiZWFzZU91dCIpfX1lbHNle2lmKCFCLmFuaW1hdGUpe0IucmVzaXppbmdFbC5zZXRIZWlnaHQoQSk7aWYoQyl7QyhCLEEpfX1lbHNle0IucmVzaXppbmdFbC5zZXRIZWlnaHQoQSx0cnVlLDAuMSxDLCJlYXNlT3V0Iil9fX19O0V4dC5TcGxpdEJhci5BYnNvbHV0ZUxheW91dEFkYXB0ZXI9ZnVuY3Rpb24oQSl7dGhpcy5iYXNpYz1uZXcgRXh0LlNwbGl0QmFyLkJhc2ljTGF5b3V0QWRhcHRlcigpO3RoaXMuY29udGFpbmVyPUV4dC5nZXQoQSl9O0V4dC5TcGxpdEJhci5BYnNvbHV0ZUxheW91dEFkYXB0ZXIucHJvdG90eXBlPXtpbml0OmZ1bmN0aW9uKEEpe3RoaXMuYmFzaWMuaW5pdChBKX0sZ2V0RWxlbWVudFNpemU6ZnVuY3Rpb24oQSl7cmV0dXJuIHRoaXMuYmFzaWMuZ2V0RWxlbWVudFNpemUoQSl9LHNldEVsZW1lbnRTaXplOmZ1bmN0aW9uKEIsQSxDKXt0aGlzLmJhc2ljLnNldEVsZW1lbnRTaXplKEIsQSx0aGlzLm1vdmVTcGxpdHRlci5jcmVhdGVEZWxlZ2F0ZSh0aGlzLFtCXSkpfSxtb3ZlU3BsaXR0ZXI6ZnVuY3Rpb24oQSl7dmFyIEI9RXh0LlNwbGl0QmFyO3N3aXRjaChBLnBsYWNlbWVudCl7Y2FzZSBCLkxFRlQ6QS5lbC5zZXRYKEEucmVzaXppbmdFbC5nZXRSaWdodCgpKTticmVhaztjYXNlIEIuUklHSFQ6QS5lbC5zZXRTdHlsZSgicmlnaHQiLCh0aGlzLmNvbnRhaW5lci5nZXRXaWR0aCgpLUEucmVzaXppbmdFbC5nZXRMZWZ0KCkpKyJweCIpO2JyZWFrO2Nhc2UgQi5UT1A6QS5lbC5zZXRZKEEucmVzaXppbmdFbC5nZXRCb3R0b20oKSk7YnJlYWs7Y2FzZSBCLkJPVFRPTTpBLmVsLnNldFkoQS5yZXNpemluZ0VsLmdldFRvcCgpLUEuZWwuZ2V0SGVpZ2h0KCkpO2JyZWFrfX19O0V4dC5TcGxpdEJhci5WRVJUSUNBTD0xO0V4dC5TcGxpdEJhci5IT1JJWk9OVEFMPTI7RXh0LlNwbGl0QmFyLkxFRlQ9MTtFeHQuU3BsaXRCYXIuUklHSFQ9MjtFeHQuU3BsaXRCYXIuVE9QPTM7RXh0LlNwbGl0QmFyLkJPVFRPTT00Ow0KRXh0LkNvbnRhaW5lcj1FeHQuZXh0ZW5kKEV4dC5Cb3hDb21wb25lbnQse2F1dG9EZXN0cm95OnRydWUsZGVmYXVsdFR5cGU6InBhbmVsIixpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7RXh0LkNvbnRhaW5lci5zdXBlcmNsYXNzLmluaXRDb21wb25lbnQuY2FsbCh0aGlzKTt0aGlzLmFkZEV2ZW50cygiYWZ0ZXJsYXlvdXQiLCJiZWZvcmVhZGQiLCJiZWZvcmVyZW1vdmUiLCJhZGQiLCJyZW1vdmUiKTt2YXIgQT10aGlzLml0ZW1zO2lmKEEpe2RlbGV0ZSB0aGlzLml0ZW1zO2lmKEV4dC5pc0FycmF5KEEpKXt0aGlzLmFkZC5hcHBseSh0aGlzLEEpfWVsc2V7dGhpcy5hZGQoQSl9fX0saW5pdEl0ZW1zOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaXRlbXMpe3RoaXMuaXRlbXM9bmV3IEV4dC51dGlsLk1peGVkQ29sbGVjdGlvbihmYWxzZSx0aGlzLmdldENvbXBvbmVudElkKTt0aGlzLmdldExheW91dCgpfX0sc2V0TGF5b3V0OmZ1bmN0aW9uKEEpe2lmKHRoaXMubGF5b3V0JiZ0aGlzLmxheW91dCE9QSl7dGhpcy5sYXlvdXQuc2V0Q29udGFpbmVyKG51bGwpfXRoaXMuaW5pdEl0ZW1zKCk7dGhpcy5sYXlvdXQ9QTtBLnNldENvbnRhaW5lcih0aGlzKX0scmVuZGVyOmZ1bmN0aW9uKCl7RXh0LkNvbnRhaW5lci5zdXBlcmNsYXNzLnJlbmRlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYodGhpcy5sYXlvdXQpe2lmKHR5cGVvZiB0aGlzLmxheW91dD09InN0cmluZyIpe3RoaXMubGF5b3V0PW5ldyBFeHQuQ29udGFpbmVyLkxBWU9VVFNbdGhpcy5sYXlvdXQudG9Mb3dlckNhc2UoKV0odGhpcy5sYXlvdXRDb25maWcpfXRoaXMuc2V0TGF5b3V0KHRoaXMubGF5b3V0KTtpZih0aGlzLmFjdGl2ZUl0ZW0hPT11bmRlZmluZWQpe3ZhciBBPXRoaXMuYWN0aXZlSXRlbTtkZWxldGUgdGhpcy5hY3RpdmVJdGVtO3RoaXMubGF5b3V0LnNldEFjdGl2ZUl0ZW0oQSk7cmV0dXJuIH19aWYoIXRoaXMub3duZXJDdCl7dGhpcy5kb0xheW91dCgpfWlmKHRoaXMubW9uaXRvclJlc2l6ZT09PXRydWUpe0V4dC5FdmVudE1hbmFnZXIub25XaW5kb3dSZXNpemUodGhpcy5kb0xheW91dCx0aGlzLFtmYWxzZV0pfX0sZ2V0TGF5b3V0VGFyZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWx9LGdldENvbXBvbmVudElkOmZ1bmN0aW9uKEEpe3JldHVybiBBLml0ZW1JZHx8QS5pZH0sYWRkOmZ1bmN0aW9uKEMpe2lmKCF0aGlzLml0ZW1zKXt0aGlzLmluaXRJdGVtcygpfXZhciBCPWFyZ3VtZW50cyxBPUIubGVuZ3RoO2lmKEE+MSl7Zm9yKHZhciBEPTA7RDxBO0QrKyl7dGhpcy5hZGQoQltEXSl9cmV0dXJuIH12YXIgRj10aGlzLmxvb2t1cENvbXBvbmVudCh0aGlzLmFwcGx5RGVmYXVsdHMoQykpO3ZhciBFPXRoaXMuaXRlbXMubGVuZ3RoO2lmKHRoaXMuZmlyZUV2ZW50KCJiZWZvcmVhZGQiLHRoaXMsRixFKSE9PWZhbHNlJiZ0aGlzLm9uQmVmb3JlQWRkKEYpIT09ZmFsc2Upe3RoaXMuaXRlbXMuYWRkKEYpO0Yub3duZXJDdD10aGlzO3RoaXMuZmlyZUV2ZW50KCJhZGQiLHRoaXMsRixFKX1yZXR1cm4gRn0saW5zZXJ0OmZ1bmN0aW9uKEQsQyl7aWYoIXRoaXMuaXRlbXMpe3RoaXMuaW5pdEl0ZW1zKCl9dmFyIEI9YXJndW1lbnRzLEE9Qi5sZW5ndGg7aWYoQT4yKXtmb3IodmFyIEU9QS0xO0U+PTE7LS1FKXt0aGlzLmluc2VydChELEJbRV0pfXJldHVybiB9dmFyIEY9dGhpcy5sb29rdXBDb21wb25lbnQodGhpcy5hcHBseURlZmF1bHRzKEMpKTtpZihGLm93bmVyQ3Q9PXRoaXMmJnRoaXMuaXRlbXMuaW5kZXhPZihGKTxEKXstLUR9aWYodGhpcy5maXJlRXZlbnQoImJlZm9yZWFkZCIsdGhpcyxGLEQpIT09ZmFsc2UmJnRoaXMub25CZWZvcmVBZGQoRikhPT1mYWxzZSl7dGhpcy5pdGVtcy5pbnNlcnQoRCxGKTtGLm93bmVyQ3Q9dGhpczt0aGlzLmZpcmVFdmVudCgiYWRkIix0aGlzLEYsRCl9cmV0dXJuIEZ9LGFwcGx5RGVmYXVsdHM6ZnVuY3Rpb24oQSl7aWYodGhpcy5kZWZhdWx0cyl7aWYodHlwZW9mIEE9PSJzdHJpbmciKXtBPUV4dC5Db21wb25lbnRNZ3IuZ2V0KEEpO0V4dC5hcHBseShBLHRoaXMuZGVmYXVsdHMpfWVsc2V7aWYoIUEuZXZlbnRzKXtFeHQuYXBwbHlJZihBLHRoaXMuZGVmYXVsdHMpfWVsc2V7RXh0LmFwcGx5KEEsdGhpcy5kZWZhdWx0cyl9fX1yZXR1cm4gQX0sb25CZWZvcmVBZGQ6ZnVuY3Rpb24oQSl7aWYoQS5vd25lckN0KXtBLm93bmVyQ3QucmVtb3ZlKEEsZmFsc2UpfWlmKHRoaXMuaGlkZUJvcmRlcnM9PT10cnVlKXtBLmJvcmRlcj0oQS5ib3JkZXI9PT10cnVlKX19LHJlbW92ZTpmdW5jdGlvbihBLEIpe3ZhciBDPXRoaXMuZ2V0Q29tcG9uZW50KEEpO2lmKEMmJnRoaXMuZmlyZUV2ZW50KCJiZWZvcmVyZW1vdmUiLHRoaXMsQykhPT1mYWxzZSl7dGhpcy5pdGVtcy5yZW1vdmUoQyk7ZGVsZXRlIEMub3duZXJDdDtpZihCPT09dHJ1ZXx8KEIhPT1mYWxzZSYmdGhpcy5hdXRvRGVzdHJveSkpe0MuZGVzdHJveSgpfWlmKHRoaXMubGF5b3V0JiZ0aGlzLmxheW91dC5hY3RpdmVJdGVtPT1DKXtkZWxldGUgdGhpcy5sYXlvdXQuYWN0aXZlSXRlbX10aGlzLmZpcmVFdmVudCgicmVtb3ZlIix0aGlzLEMpfXJldHVybiBDfSxnZXRDb21wb25lbnQ6ZnVuY3Rpb24oQSl7aWYodHlwZW9mIEE9PSJvYmplY3QiKXtyZXR1cm4gQX1yZXR1cm4gdGhpcy5pdGVtcy5nZXQoQSl9LGxvb2t1cENvbXBvbmVudDpmdW5jdGlvbihBKXtpZih0eXBlb2YgQT09InN0cmluZyIpe3JldHVybiBFeHQuQ29tcG9uZW50TWdyLmdldChBKX1lbHNle2lmKCFBLmV2ZW50cyl7cmV0dXJuIHRoaXMuY3JlYXRlQ29tcG9uZW50KEEpfX1yZXR1cm4gQX0sY3JlYXRlQ29tcG9uZW50OmZ1bmN0aW9uKEEpe3JldHVybiBFeHQuQ29tcG9uZW50TWdyLmNyZWF0ZShBLHRoaXMuZGVmYXVsdFR5cGUpfSxkb0xheW91dDpmdW5jdGlvbihEKXtpZih0aGlzLnJlbmRlcmVkJiZ0aGlzLmxheW91dCl7dGhpcy5sYXlvdXQubGF5b3V0KCl9aWYoRCE9PWZhbHNlJiZ0aGlzLml0ZW1zKXt2YXIgQz10aGlzLml0ZW1zLml0ZW1zO2Zvcih2YXIgQj0wLEE9Qy5sZW5ndGg7QjxBO0IrKyl7dmFyIEU9Q1tCXTtpZihFLmRvTGF5b3V0KXtFLmRvTGF5b3V0KCl9fX19LGdldExheW91dDpmdW5jdGlvbigpe2lmKCF0aGlzLmxheW91dCl7dmFyIEE9bmV3IEV4dC5sYXlvdXQuQ29udGFpbmVyTGF5b3V0KHRoaXMubGF5b3V0Q29uZmlnKTt0aGlzLnNldExheW91dChBKX1yZXR1cm4gdGhpcy5sYXlvdXR9LG9uRGVzdHJveTpmdW5jdGlvbigpe2lmKHRoaXMuaXRlbXMpe3ZhciBDPXRoaXMuaXRlbXMuaXRlbXM7Zm9yKHZhciBCPTAsQT1DLmxlbmd0aDtCPEE7QisrKXtFeHQuZGVzdHJveShDW0JdKX19aWYodGhpcy5tb25pdG9yUmVzaXplKXtFeHQuRXZlbnRNYW5hZ2VyLnJlbW92ZVJlc2l6ZUxpc3RlbmVyKHRoaXMuZG9MYXlvdXQsdGhpcyl9RXh0LkNvbnRhaW5lci5zdXBlcmNsYXNzLm9uRGVzdHJveS5jYWxsKHRoaXMpfSxidWJibGU6ZnVuY3Rpb24oQyxCLEEpe3ZhciBEPXRoaXM7d2hpbGUoRCl7aWYoQy5hcHBseShCfHxELEF8fFtEXSk9PT1mYWxzZSl7YnJlYWt9RD1ELm93bmVyQ3R9fSxjYXNjYWRlOmZ1bmN0aW9uKEYsRSxCKXtpZihGLmFwcGx5KEV8fHRoaXMsQnx8W3RoaXNdKSE9PWZhbHNlKXtpZih0aGlzLml0ZW1zKXt2YXIgRD10aGlzLml0ZW1zLml0ZW1zO2Zvcih2YXIgQz0wLEE9RC5sZW5ndGg7QzxBO0MrKyl7aWYoRFtDXS5jYXNjYWRlKXtEW0NdLmNhc2NhZGUoRixFLEIpfWVsc2V7Ri5hcHBseShFfHx0aGlzLEJ8fFtEW0NdXSl9fX19fSxmaW5kQnlJZDpmdW5jdGlvbihDKXt2YXIgQSxCPXRoaXM7dGhpcy5jYXNjYWRlKGZ1bmN0aW9uKEQpe2lmKEIhPUQmJkQuaWQ9PT1DKXtBPUQ7cmV0dXJuIGZhbHNlfX0pO3JldHVybiBBfHxudWxsfSxmaW5kQnlUeXBlOmZ1bmN0aW9uKEEpe3JldHVybiB0eXBlb2YgQT09ImZ1bmN0aW9uIj90aGlzLmZpbmRCeShmdW5jdGlvbihCKXtyZXR1cm4gQi5jb25zdHJ1Y3Rvcj09PUF9KTp0aGlzLmZpbmRCeShmdW5jdGlvbihCKXtyZXR1cm4gQi5jb25zdHJ1Y3Rvci54dHlwZT09PUF9KX0sZmluZDpmdW5jdGlvbihCLEEpe3JldHVybiB0aGlzLmZpbmRCeShmdW5jdGlvbihDKXtyZXR1cm4gQ1tCXT09PUF9KX0sZmluZEJ5OmZ1bmN0aW9uKEQsQyl7dmFyIEE9W10sQj10aGlzO3RoaXMuY2FzY2FkZShmdW5jdGlvbihFKXtpZihCIT1FJiZELmNhbGwoQ3x8RSxFLEIpPT09dHJ1ZSl7QS5wdXNoKEUpfX0pO3JldHVybiBBfX0pO0V4dC5Db250YWluZXIuTEFZT1VUUz17fTtFeHQucmVnKCJjb250YWluZXIiLEV4dC5Db250YWluZXIpOw0KRXh0LmxheW91dC5Db250YWluZXJMYXlvdXQ9ZnVuY3Rpb24oQSl7RXh0LmFwcGx5KHRoaXMsQSl9O0V4dC5sYXlvdXQuQ29udGFpbmVyTGF5b3V0LnByb3RvdHlwZT17bW9uaXRvclJlc2l6ZTpmYWxzZSxhY3RpdmVJdGVtOm51bGwsbGF5b3V0OmZ1bmN0aW9uKCl7dmFyIEE9dGhpcy5jb250YWluZXIuZ2V0TGF5b3V0VGFyZ2V0KCk7dGhpcy5vbkxheW91dCh0aGlzLmNvbnRhaW5lcixBKTt0aGlzLmNvbnRhaW5lci5maXJlRXZlbnQoImFmdGVybGF5b3V0Iix0aGlzLmNvbnRhaW5lcix0aGlzKX0sb25MYXlvdXQ6ZnVuY3Rpb24oQSxCKXt0aGlzLnJlbmRlckFsbChBLEIpfSxpc1ZhbGlkUGFyZW50OmZ1bmN0aW9uKEMsQil7dmFyIEE9Qy5nZXRQb3NpdGlvbkVsP0MuZ2V0UG9zaXRpb25FbCgpOkMuZ2V0RWwoKTtyZXR1cm4gQS5kb20ucGFyZW50Tm9kZT09Qi5kb219LHJlbmRlckFsbDpmdW5jdGlvbihELEUpe3ZhciBCPUQuaXRlbXMuaXRlbXM7Zm9yKHZhciBDPTAsQT1CLmxlbmd0aDtDPEE7QysrKXt2YXIgRj1CW0NdO2lmKEYmJighRi5yZW5kZXJlZHx8IXRoaXMuaXNWYWxpZFBhcmVudChGLEUpKSl7dGhpcy5yZW5kZXJJdGVtKEYsQyxFKX19fSxyZW5kZXJJdGVtOmZ1bmN0aW9uKEQsQSxDKXtpZihEJiYhRC5yZW5kZXJlZCl7RC5yZW5kZXIoQyxBKTtpZih0aGlzLmV4dHJhQ2xzKXt2YXIgQj1ELmdldFBvc2l0aW9uRWw/RC5nZXRQb3NpdGlvbkVsKCk6RDtCLmFkZENsYXNzKHRoaXMuZXh0cmFDbHMpfWlmKHRoaXMucmVuZGVySGlkZGVuJiZEIT10aGlzLmFjdGl2ZUl0ZW0pe0QuaGlkZSgpfX1lbHNle2lmKEQmJiF0aGlzLmlzVmFsaWRQYXJlbnQoRCxDKSl7aWYodGhpcy5leHRyYUNscyl7RC5hZGRDbGFzcyh0aGlzLmV4dHJhQ2xzKX1pZih0eXBlb2YgQT09Im51bWJlciIpe0E9Qy5kb20uY2hpbGROb2Rlc1tBXX1DLmRvbS5pbnNlcnRCZWZvcmUoRC5nZXRFbCgpLmRvbSxBfHxudWxsKTtpZih0aGlzLnJlbmRlckhpZGRlbiYmRCE9dGhpcy5hY3RpdmVJdGVtKXtELmhpZGUoKX19fX0sb25SZXNpemU6ZnVuY3Rpb24oKXtpZih0aGlzLmNvbnRhaW5lci5jb2xsYXBzZWQpe3JldHVybiB9dmFyIEE9dGhpcy5jb250YWluZXIuYnVmZmVyUmVzaXplO2lmKEEpe2lmKCF0aGlzLnJlc2l6ZVRhc2spe3RoaXMucmVzaXplVGFzaz1uZXcgRXh0LnV0aWwuRGVsYXllZFRhc2sodGhpcy5sYXlvdXQsdGhpcyk7dGhpcy5yZXNpemVCdWZmZXI9dHlwZW9mIEE9PSJudW1iZXIiP0E6MTAwfXRoaXMucmVzaXplVGFzay5kZWxheSh0aGlzLnJlc2l6ZUJ1ZmZlcil9ZWxzZXt0aGlzLmxheW91dCgpfX0sc2V0Q29udGFpbmVyOmZ1bmN0aW9uKEEpe2lmKHRoaXMubW9uaXRvclJlc2l6ZSYmQSE9dGhpcy5jb250YWluZXIpe2lmKHRoaXMuY29udGFpbmVyKXt0aGlzLmNvbnRhaW5lci51bigicmVzaXplIix0aGlzLm9uUmVzaXplLHRoaXMpfWlmKEEpe0Eub24oInJlc2l6ZSIsdGhpcy5vblJlc2l6ZSx0aGlzKX19dGhpcy5jb250YWluZXI9QX0scGFyc2VNYXJnaW5zOmZ1bmN0aW9uKEIpe3ZhciBDPUIuc3BsaXQoIiAiKTt2YXIgQT1DLmxlbmd0aDtpZihBPT0xKXtDWzFdPUNbMF07Q1syXT1DWzBdO0NbM109Q1swXX1pZihBPT0yKXtDWzJdPUNbMF07Q1szXT1DWzFdfXJldHVybnt0b3A6cGFyc2VJbnQoQ1swXSwxMCl8fDAscmlnaHQ6cGFyc2VJbnQoQ1sxXSwxMCl8fDAsYm90dG9tOnBhcnNlSW50KENbMl0sMTApfHwwLGxlZnQ6cGFyc2VJbnQoQ1szXSwxMCl8fDB9fX07RXh0LkNvbnRhaW5lci5MQVlPVVRTWyJhdXRvIl09RXh0LmxheW91dC5Db250YWluZXJMYXlvdXQ7DQpFeHQubGF5b3V0LkZpdExheW91dD1FeHQuZXh0ZW5kKEV4dC5sYXlvdXQuQ29udGFpbmVyTGF5b3V0LHttb25pdG9yUmVzaXplOnRydWUsb25MYXlvdXQ6ZnVuY3Rpb24oQSxCKXtFeHQubGF5b3V0LkZpdExheW91dC5zdXBlcmNsYXNzLm9uTGF5b3V0LmNhbGwodGhpcyxBLEIpO2lmKCF0aGlzLmNvbnRhaW5lci5jb2xsYXBzZWQpe3RoaXMuc2V0SXRlbVNpemUodGhpcy5hY3RpdmVJdGVtfHxBLml0ZW1zLml0ZW1BdCgwKSxCLmdldFN0eWxlU2l6ZSgpKX19LHNldEl0ZW1TaXplOmZ1bmN0aW9uKEIsQSl7aWYoQiYmQS5oZWlnaHQ+MCl7Qi5zZXRTaXplKEEpfX19KTtFeHQuQ29udGFpbmVyLkxBWU9VVFNbImZpdCJdPUV4dC5sYXlvdXQuRml0TGF5b3V0Ow0KRXh0LmxheW91dC5DYXJkTGF5b3V0PUV4dC5leHRlbmQoRXh0LmxheW91dC5GaXRMYXlvdXQse2RlZmVycmVkUmVuZGVyOmZhbHNlLHJlbmRlckhpZGRlbjp0cnVlLHNldEFjdGl2ZUl0ZW06ZnVuY3Rpb24oQSl7QT10aGlzLmNvbnRhaW5lci5nZXRDb21wb25lbnQoQSk7aWYodGhpcy5hY3RpdmVJdGVtIT1BKXtpZih0aGlzLmFjdGl2ZUl0ZW0pe3RoaXMuYWN0aXZlSXRlbS5oaWRlKCl9dGhpcy5hY3RpdmVJdGVtPUE7QS5zaG93KCk7dGhpcy5sYXlvdXQoKX19LHJlbmRlckFsbDpmdW5jdGlvbihBLEIpe2lmKHRoaXMuZGVmZXJyZWRSZW5kZXIpe3RoaXMucmVuZGVySXRlbSh0aGlzLmFjdGl2ZUl0ZW0sdW5kZWZpbmVkLEIpfWVsc2V7RXh0LmxheW91dC5DYXJkTGF5b3V0LnN1cGVyY2xhc3MucmVuZGVyQWxsLmNhbGwodGhpcyxBLEIpfX19KTtFeHQuQ29udGFpbmVyLkxBWU9VVFNbImNhcmQiXT1FeHQubGF5b3V0LkNhcmRMYXlvdXQ7DQpFeHQubGF5b3V0LkFuY2hvckxheW91dD1FeHQuZXh0ZW5kKEV4dC5sYXlvdXQuQ29udGFpbmVyTGF5b3V0LHttb25pdG9yUmVzaXplOnRydWUsZ2V0QW5jaG9yVmlld1NpemU6ZnVuY3Rpb24oQSxCKXtyZXR1cm4gQi5kb209PWRvY3VtZW50LmJvZHk/Qi5nZXRWaWV3U2l6ZSgpOkIuZ2V0U3R5bGVTaXplKCl9LG9uTGF5b3V0OmZ1bmN0aW9uKEYsSSl7RXh0LmxheW91dC5BbmNob3JMYXlvdXQuc3VwZXJjbGFzcy5vbkxheW91dC5jYWxsKHRoaXMsRixJKTt2YXIgTz10aGlzLmdldEFuY2hvclZpZXdTaXplKEYsSSk7dmFyIE09Ty53aWR0aCxFPU8uaGVpZ2h0O2lmKE08MjB8fEU8MjApe3JldHVybiB9dmFyIEIsSztpZihGLmFuY2hvclNpemUpe2lmKHR5cGVvZiBGLmFuY2hvclNpemU9PSJudW1iZXIiKXtCPUYuYW5jaG9yU2l6ZX1lbHNle0I9Ri5hbmNob3JTaXplLndpZHRoO0s9Ri5hbmNob3JTaXplLmhlaWdodH19ZWxzZXtCPUYuaW5pdGlhbENvbmZpZy53aWR0aDtLPUYuaW5pdGlhbENvbmZpZy5oZWlnaHR9dmFyIEg9Ri5pdGVtcy5pdGVtcyxHPUgubGVuZ3RoLEQsSixMLEMsQTtmb3IoRD0wO0Q8RztEKyspe0o9SFtEXTtpZihKLmFuY2hvcil7TD1KLmFuY2hvclNwZWM7aWYoIUwpe3ZhciBOPUouYW5jaG9yLnNwbGl0KCIgIik7Si5hbmNob3JTcGVjPUw9e3JpZ2h0OnRoaXMucGFyc2VBbmNob3IoTlswXSxKLmluaXRpYWxDb25maWcud2lkdGgsQiksYm90dG9tOnRoaXMucGFyc2VBbmNob3IoTlsxXSxKLmluaXRpYWxDb25maWcuaGVpZ2h0LEspfX1DPUwucmlnaHQ/dGhpcy5hZGp1c3RXaWR0aEFuY2hvcihMLnJpZ2h0KE0pLEopOnVuZGVmaW5lZDtBPUwuYm90dG9tP3RoaXMuYWRqdXN0SGVpZ2h0QW5jaG9yKEwuYm90dG9tKEUpLEopOnVuZGVmaW5lZDtpZihDfHxBKXtKLnNldFNpemUoQ3x8dW5kZWZpbmVkLEF8fHVuZGVmaW5lZCl9fX19LHBhcnNlQW5jaG9yOmZ1bmN0aW9uKEIsRixBKXtpZihCJiZCIT0ibm9uZSIpe3ZhciBEO2lmKC9eKHJ8cmlnaHR8Ynxib3R0b20pJC9pLnRlc3QoQikpe3ZhciBFPUEtRjtyZXR1cm4gZnVuY3Rpb24oRyl7aWYoRyE9PUQpe0Q9RztyZXR1cm4gRy1FfX19ZWxzZXtpZihCLmluZGV4T2YoIiUiKSE9LTEpe3ZhciBDPXBhcnNlRmxvYXQoQi5yZXBsYWNlKCIlIiwiIikpKjAuMDE7cmV0dXJuIGZ1bmN0aW9uKEcpe2lmKEchPT1EKXtEPUc7cmV0dXJuIE1hdGguZmxvb3IoRypDKX19fWVsc2V7Qj1wYXJzZUludChCLDEwKTtpZighaXNOYU4oQikpe3JldHVybiBmdW5jdGlvbihHKXtpZihHIT09RCl7RD1HO3JldHVybiBHK0J9fX19fX1yZXR1cm4gZmFsc2V9LGFkanVzdFdpZHRoQW5jaG9yOmZ1bmN0aW9uKEIsQSl7cmV0dXJuIEJ9LGFkanVzdEhlaWdodEFuY2hvcjpmdW5jdGlvbihCLEEpe3JldHVybiBCfX0pO0V4dC5Db250YWluZXIuTEFZT1VUU1siYW5jaG9yIl09RXh0LmxheW91dC5BbmNob3JMYXlvdXQ7DQpFeHQubGF5b3V0LkNvbHVtbkxheW91dD1FeHQuZXh0ZW5kKEV4dC5sYXlvdXQuQ29udGFpbmVyTGF5b3V0LHttb25pdG9yUmVzaXplOnRydWUsZXh0cmFDbHM6IngtY29sdW1uIixzY3JvbGxPZmZzZXQ6MCxpc1ZhbGlkUGFyZW50OmZ1bmN0aW9uKEIsQSl7cmV0dXJuIEIuZ2V0RWwoKS5kb20ucGFyZW50Tm9kZT09dGhpcy5pbm5lckN0LmRvbX0sb25MYXlvdXQ6ZnVuY3Rpb24oQyxGKXt2YXIgRD1DLml0ZW1zLml0ZW1zLEU9RC5sZW5ndGgsRyxBO2lmKCF0aGlzLmlubmVyQ3Qpe0YuYWRkQ2xhc3MoIngtY29sdW1uLWxheW91dC1jdCIpO3RoaXMuaW5uZXJDdD1GLmNyZWF0ZUNoaWxkKHtjbHM6IngtY29sdW1uLWlubmVyIn0pO3RoaXMuaW5uZXJDdC5jcmVhdGVDaGlsZCh7Y2xzOiJ4LWNsZWFyIn0pfXRoaXMucmVuZGVyQWxsKEMsdGhpcy5pbm5lckN0KTt2YXIgSj1GLmdldFZpZXdTaXplKCk7aWYoSi53aWR0aDwxJiZKLmhlaWdodDwxKXtyZXR1cm4gfXZhciBIPUoud2lkdGgtRi5nZXRQYWRkaW5nKCJsciIpLXRoaXMuc2Nyb2xsT2Zmc2V0LEI9Si5oZWlnaHQtRi5nZXRQYWRkaW5nKCJ0YiIpLEk9SDt0aGlzLmlubmVyQ3Quc2V0V2lkdGgoSCk7Zm9yKEE9MDtBPEU7QSsrKXtHPURbQV07aWYoIUcuY29sdW1uV2lkdGgpe0ktPShHLmdldFNpemUoKS53aWR0aCtHLmdldEVsKCkuZ2V0TWFyZ2lucygibHIiKSl9fUk9STwwPzA6STtmb3IoQT0wO0E8RTtBKyspe0c9RFtBXTtpZihHLmNvbHVtbldpZHRoKXtHLnNldFNpemUoTWF0aC5mbG9vcihHLmNvbHVtbldpZHRoKkkpLUcuZ2V0RWwoKS5nZXRNYXJnaW5zKCJsciIpKX19fX0pO0V4dC5Db250YWluZXIuTEFZT1VUU1siY29sdW1uIl09RXh0LmxheW91dC5Db2x1bW5MYXlvdXQ7DQpFeHQubGF5b3V0LkJvcmRlckxheW91dD1FeHQuZXh0ZW5kKEV4dC5sYXlvdXQuQ29udGFpbmVyTGF5b3V0LHttb25pdG9yUmVzaXplOnRydWUscmVuZGVyZWQ6ZmFsc2Usb25MYXlvdXQ6ZnVuY3Rpb24oQixYKXt2YXIgQztpZighdGhpcy5yZW5kZXJlZCl7WC5wb3NpdGlvbigpO1guYWRkQ2xhc3MoIngtYm9yZGVyLWxheW91dC1jdCIpO3ZhciBNPUIuaXRlbXMuaXRlbXM7Qz1bXTtmb3IodmFyIFE9MCxSPU0ubGVuZ3RoO1E8UjtRKyspe3ZhciBVPU1bUV07dmFyIEY9VS5yZWdpb247aWYoVS5jb2xsYXBzZWQpe0MucHVzaChVKX1VLmNvbGxhcHNlZD1mYWxzZTtpZighVS5yZW5kZXJlZCl7VS5jbHM9VS5jbHM/VS5jbHMrIiB4LWJvcmRlci1wYW5lbCI6IngtYm9yZGVyLXBhbmVsIjtVLnJlbmRlcihYLFEpfXRoaXNbRl09RiE9ImNlbnRlciImJlUuc3BsaXQ/bmV3IEV4dC5sYXlvdXQuQm9yZGVyTGF5b3V0LlNwbGl0UmVnaW9uKHRoaXMsVS5pbml0aWFsQ29uZmlnLEYpOm5ldyBFeHQubGF5b3V0LkJvcmRlckxheW91dC5SZWdpb24odGhpcyxVLmluaXRpYWxDb25maWcsRik7dGhpc1tGXS5yZW5kZXIoWCxVKX10aGlzLnJlbmRlcmVkPXRydWV9dmFyIEw9WC5nZXRWaWV3U2l6ZSgpO2lmKEwud2lkdGg8MjB8fEwuaGVpZ2h0PDIwKXtpZihDKXt0aGlzLnJlc3RvcmVDb2xsYXBzZWQ9Q31yZXR1cm4gfWVsc2V7aWYodGhpcy5yZXN0b3JlQ29sbGFwc2VkKXtDPXRoaXMucmVzdG9yZUNvbGxhcHNlZDtkZWxldGUgdGhpcy5yZXN0b3JlQ29sbGFwc2VkfX12YXIgSj1MLndpZHRoLFM9TC5oZWlnaHQ7dmFyIEk9SixQPVMsRz0wLEg9MDt2YXIgTj10aGlzLm5vcnRoLEs9dGhpcy5zb3V0aCxFPXRoaXMud2VzdCxUPXRoaXMuZWFzdCxVPXRoaXMuY2VudGVyO2lmKCFVKXt0aHJvdyJObyBjZW50ZXIgcmVnaW9uIGRlZmluZWQgaW4gQm9yZGVyTGF5b3V0ICIrQi5pZH1pZihOJiZOLmlzVmlzaWJsZSgpKXt2YXIgVz1OLmdldFNpemUoKTt2YXIgTz1OLmdldE1hcmdpbnMoKTtXLndpZHRoPUotKE8ubGVmdCtPLnJpZ2h0KTtXLng9Ty5sZWZ0O1cueT1PLnRvcDtHPVcuaGVpZ2h0K1cueStPLmJvdHRvbTtQLT1HO04uYXBwbHlMYXlvdXQoVyl9aWYoSyYmSy5pc1Zpc2libGUoKSl7dmFyIFc9Sy5nZXRTaXplKCk7dmFyIE89Sy5nZXRNYXJnaW5zKCk7Vy53aWR0aD1KLShPLmxlZnQrTy5yaWdodCk7Vy54PU8ubGVmdDt2YXIgVj0oVy5oZWlnaHQrTy50b3ArTy5ib3R0b20pO1cueT1TLVYrTy50b3A7UC09VjtLLmFwcGx5TGF5b3V0KFcpfWlmKEUmJkUuaXNWaXNpYmxlKCkpe3ZhciBXPUUuZ2V0U2l6ZSgpO3ZhciBPPUUuZ2V0TWFyZ2lucygpO1cuaGVpZ2h0PVAtKE8udG9wK08uYm90dG9tKTtXLng9Ty5sZWZ0O1cueT1HK08udG9wO3ZhciBBPShXLndpZHRoK08ubGVmdCtPLnJpZ2h0KTtIKz1BO0ktPUE7RS5hcHBseUxheW91dChXKX1pZihUJiZULmlzVmlzaWJsZSgpKXt2YXIgVz1ULmdldFNpemUoKTt2YXIgTz1ULmdldE1hcmdpbnMoKTtXLmhlaWdodD1QLShPLnRvcCtPLmJvdHRvbSk7dmFyIEE9KFcud2lkdGgrTy5sZWZ0K08ucmlnaHQpO1cueD1KLUErTy5sZWZ0O1cueT1HK08udG9wO0ktPUE7VC5hcHBseUxheW91dChXKX12YXIgTz1VLmdldE1hcmdpbnMoKTt2YXIgRD17eDpIK08ubGVmdCx5OkcrTy50b3Asd2lkdGg6SS0oTy5sZWZ0K08ucmlnaHQpLGhlaWdodDpQLShPLnRvcCtPLmJvdHRvbSl9O1UuYXBwbHlMYXlvdXQoRCk7aWYoQyl7Zm9yKHZhciBRPTAsUj1DLmxlbmd0aDtRPFI7USsrKXtDW1FdLmNvbGxhcHNlKGZhbHNlKX19aWYoRXh0LmlzSUUmJkV4dC5pc1N0cmljdCl7WC5yZXBhaW50KCl9fX0pO0V4dC5sYXlvdXQuQm9yZGVyTGF5b3V0LlJlZ2lvbj1mdW5jdGlvbihCLEEsQyl7RXh0LmFwcGx5KHRoaXMsQSk7dGhpcy5sYXlvdXQ9Qjt0aGlzLnBvc2l0aW9uPUM7dGhpcy5zdGF0ZT17fTtpZih0eXBlb2YgdGhpcy5tYXJnaW5zPT0ic3RyaW5nIil7dGhpcy5tYXJnaW5zPXRoaXMubGF5b3V0LnBhcnNlTWFyZ2lucyh0aGlzLm1hcmdpbnMpfXRoaXMubWFyZ2lucz1FeHQuYXBwbHlJZih0aGlzLm1hcmdpbnN8fHt9LHRoaXMuZGVmYXVsdE1hcmdpbnMpO2lmKHRoaXMuY29sbGFwc2libGUpe2lmKHR5cGVvZiB0aGlzLmNtYXJnaW5zPT0ic3RyaW5nIil7dGhpcy5jbWFyZ2lucz10aGlzLmxheW91dC5wYXJzZU1hcmdpbnModGhpcy5jbWFyZ2lucyl9aWYodGhpcy5jb2xsYXBzZU1vZGU9PSJtaW5pIiYmIXRoaXMuY21hcmdpbnMpe3RoaXMuY21hcmdpbnM9e2xlZnQ6MCx0b3A6MCxyaWdodDowLGJvdHRvbTowfX1lbHNle3RoaXMuY21hcmdpbnM9RXh0LmFwcGx5SWYodGhpcy5jbWFyZ2luc3x8e30sQz09Im5vcnRoInx8Qz09InNvdXRoIj90aGlzLmRlZmF1bHROU0NNYXJnaW5zOnRoaXMuZGVmYXVsdEVXQ01hcmdpbnMpfX19O0V4dC5sYXlvdXQuQm9yZGVyTGF5b3V0LlJlZ2lvbi5wcm90b3R5cGU9e2NvbGxhcHNpYmxlOmZhbHNlLHNwbGl0OmZhbHNlLGZsb2F0YWJsZTp0cnVlLG1pbldpZHRoOjUwLG1pbkhlaWdodDo1MCxkZWZhdWx0TWFyZ2luczp7bGVmdDowLHRvcDowLHJpZ2h0OjAsYm90dG9tOjB9LGRlZmF1bHROU0NNYXJnaW5zOntsZWZ0OjUsdG9wOjUscmlnaHQ6NSxib3R0b206NX0sZGVmYXVsdEVXQ01hcmdpbnM6e2xlZnQ6NSx0b3A6MCxyaWdodDo1LGJvdHRvbTowfSxpc0NvbGxhcHNlZDpmYWxzZSxyZW5kZXI6ZnVuY3Rpb24oQixDKXt0aGlzLnBhbmVsPUM7Qy5lbC5lbmFibGVEaXNwbGF5TW9kZSgpO3RoaXMudGFyZ2V0RWw9Qjt0aGlzLmVsPUMuZWw7dmFyIEE9Qy5nZXRTdGF0ZSxEPXRoaXMucG9zaXRpb247Qy5nZXRTdGF0ZT1mdW5jdGlvbigpe3JldHVybiBFeHQuYXBwbHkoQS5jYWxsKEMpfHx7fSx0aGlzLnN0YXRlKX0uY3JlYXRlRGVsZWdhdGUodGhpcyk7aWYoRCE9ImNlbnRlciIpe0MuYWxsb3dRdWV1ZWRFeHBhbmQ9ZmFsc2U7Qy5vbih7YmVmb3JlY29sbGFwc2U6dGhpcy5iZWZvcmVDb2xsYXBzZSxjb2xsYXBzZTp0aGlzLm9uQ29sbGFwc2UsYmVmb3JlZXhwYW5kOnRoaXMuYmVmb3JlRXhwYW5kLGV4cGFuZDp0aGlzLm9uRXhwYW5kLGhpZGU6dGhpcy5vbkhpZGUsc2hvdzp0aGlzLm9uU2hvdyxzY29wZTp0aGlzfSk7aWYodGhpcy5jb2xsYXBzaWJsZSl7Qy5jb2xsYXBzZUVsPSJlbCI7Qy5zbGlkZUFuY2hvcj10aGlzLmdldFNsaWRlQW5jaG9yKCl9aWYoQy50b29scyYmQy50b29scy50b2dnbGUpe0MudG9vbHMudG9nZ2xlLmFkZENsYXNzKCJ4LXRvb2wtY29sbGFwc2UtIitEKTtDLnRvb2xzLnRvZ2dsZS5hZGRDbGFzc09uT3ZlcigieC10b29sLWNvbGxhcHNlLSIrRCsiLW92ZXIiKX19fSxnZXRDb2xsYXBzZWRFbDpmdW5jdGlvbigpe2lmKCF0aGlzLmNvbGxhcHNlZEVsKXtpZighdGhpcy50b29sVGVtcGxhdGUpe3ZhciBCPW5ldyBFeHQuVGVtcGxhdGUoIjxkaXYgY2xhc3M9XCJ4LXRvb2wgeC10b29sLXtpZH1cIj4mIzE2MDs8L2Rpdj4iKTtCLmRpc2FibGVGb3JtYXRzPXRydWU7Qi5jb21waWxlKCk7RXh0LmxheW91dC5Cb3JkZXJMYXlvdXQuUmVnaW9uLnByb3RvdHlwZS50b29sVGVtcGxhdGU9Qn10aGlzLmNvbGxhcHNlZEVsPXRoaXMudGFyZ2V0RWwuY3JlYXRlQ2hpbGQoe2NsczoieC1sYXlvdXQtY29sbGFwc2VkIHgtbGF5b3V0LWNvbGxhcHNlZC0iK3RoaXMucG9zaXRpb24saWQ6dGhpcy5wYW5lbC5pZCsiLXhjb2xsYXBzZWQifSk7dGhpcy5jb2xsYXBzZWRFbC5lbmFibGVEaXNwbGF5TW9kZSgiYmxvY2siKTtpZih0aGlzLmNvbGxhcHNlTW9kZT09Im1pbmkiKXt0aGlzLmNvbGxhcHNlZEVsLmFkZENsYXNzKCJ4LWxheW91dC1jbWluaS0iK3RoaXMucG9zaXRpb24pO3RoaXMubWluaUNvbGxhcHNlZEVsPXRoaXMuY29sbGFwc2VkRWwuY3JlYXRlQ2hpbGQoe2NsczoieC1sYXlvdXQtbWluaSB4LWxheW91dC1taW5pLSIrdGhpcy5wb3NpdGlvbixodG1sOiImIzE2MDsifSk7dGhpcy5taW5pQ29sbGFwc2VkRWwuYWRkQ2xhc3NPbk92ZXIoIngtbGF5b3V0LW1pbmktb3ZlciIpO3RoaXMuY29sbGFwc2VkRWwuYWRkQ2xhc3NPbk92ZXIoIngtbGF5b3V0LWNvbGxhcHNlZC1vdmVyIik7dGhpcy5jb2xsYXBzZWRFbC5vbigiY2xpY2siLHRoaXMub25FeHBhbmRDbGljayx0aGlzLHtzdG9wRXZlbnQ6dHJ1ZX0pfWVsc2V7dmFyIEE9dGhpcy50b29sVGVtcGxhdGUuYXBwZW5kKHRoaXMuY29sbGFwc2VkRWwuZG9tLHtpZDoiZXhwYW5kLSIrdGhpcy5wb3NpdGlvbn0sdHJ1ZSk7QS5hZGRDbGFzc09uT3ZlcigieC10b29sLWV4cGFuZC0iK3RoaXMucG9zaXRpb24rIi1vdmVyIik7QS5vbigiY2xpY2siLHRoaXMub25FeHBhbmRDbGljayx0aGlzLHtzdG9wRXZlbnQ6dHJ1ZX0pO2lmKHRoaXMuZmxvYXRhYmxlIT09ZmFsc2Upe3RoaXMuY29sbGFwc2VkRWwuYWRkQ2xhc3NPbk92ZXIoIngtbGF5b3V0LWNvbGxhcHNlZC1vdmVyIik7dGhpcy5jb2xsYXBzZWRFbC5vbigiY2xpY2siLHRoaXMuY29sbGFwc2VDbGljayx0aGlzKX19fXJldHVybiB0aGlzLmNvbGxhcHNlZEVsfSxvbkV4cGFuZENsaWNrOmZ1bmN0aW9uKEEpe2lmKHRoaXMuaXNTbGlkKXt0aGlzLmFmdGVyU2xpZGVJbigpO3RoaXMucGFuZWwuZXhwYW5kKGZhbHNlKX1lbHNle3RoaXMucGFuZWwuZXhwYW5kKCl9fSxvbkNvbGxhcHNlQ2xpY2s6ZnVuY3Rpb24oQSl7dGhpcy5wYW5lbC5jb2xsYXBzZSgpfSxiZWZvcmVDb2xsYXBzZTpmdW5jdGlvbihCLEEpe3RoaXMubGFzdEFuaW09QTtpZih0aGlzLnNwbGl0RWwpe3RoaXMuc3BsaXRFbC5oaWRlKCl9dGhpcy5nZXRDb2xsYXBzZWRFbCgpLnNob3coKTt0aGlzLnBhbmVsLmVsLnNldFN0eWxlKCJ6LWluZGV4IiwxMDApO3RoaXMuaXNDb2xsYXBzZWQ9dHJ1ZTt0aGlzLmxheW91dC5sYXlvdXQoKX0sb25Db2xsYXBzZTpmdW5jdGlvbihBKXt0aGlzLnBhbmVsLmVsLnNldFN0eWxlKCJ6LWluZGV4IiwxKTtpZih0aGlzLmxhc3RBbmltPT09ZmFsc2V8fHRoaXMucGFuZWwuYW5pbUNvbGxhcHNlPT09ZmFsc2Upe3RoaXMuZ2V0Q29sbGFwc2VkRWwoKS5kb20uc3R5bGUudmlzaWJpbGl0eT0idmlzaWJsZSJ9ZWxzZXt0aGlzLmdldENvbGxhcHNlZEVsKCkuc2xpZGVJbih0aGlzLnBhbmVsLnNsaWRlQW5jaG9yLHtkdXJhdGlvbjowLjJ9KX10aGlzLnN0YXRlLmNvbGxhcHNlZD10cnVlO3RoaXMucGFuZWwuc2F2ZVN0YXRlKCl9LGJlZm9yZUV4cGFuZDpmdW5jdGlvbihBKXt2YXIgQj10aGlzLmdldENvbGxhcHNlZEVsKCk7dGhpcy5lbC5zaG93KCk7aWYodGhpcy5wb3NpdGlvbj09ImVhc3QifHx0aGlzLnBvc2l0aW9uPT0id2VzdCIpe3RoaXMucGFuZWwuc2V0U2l6ZSh1bmRlZmluZWQsQi5nZXRIZWlnaHQoKSl9ZWxzZXt0aGlzLnBhbmVsLnNldFNpemUoQi5nZXRXaWR0aCgpLHVuZGVmaW5lZCl9Qi5oaWRlKCk7Qi5kb20uc3R5bGUudmlzaWJpbGl0eT0iaGlkZGVuIjt0aGlzLnBhbmVsLmVsLnNldFN0eWxlKCJ6LWluZGV4IiwxMDApfSxvbkV4cGFuZDpmdW5jdGlvbigpe3RoaXMuaXNDb2xsYXBzZWQ9ZmFsc2U7aWYodGhpcy5zcGxpdEVsKXt0aGlzLnNwbGl0RWwuc2hvdygpfXRoaXMubGF5b3V0LmxheW91dCgpO3RoaXMucGFuZWwuZWwuc2V0U3R5bGUoInotaW5kZXgiLDEpO3RoaXMuc3RhdGUuY29sbGFwc2VkPWZhbHNlO3RoaXMucGFuZWwuc2F2ZVN0YXRlKCl9LGNvbGxhcHNlQ2xpY2s6ZnVuY3Rpb24oQSl7aWYodGhpcy5pc1NsaWQpe0Euc3RvcFByb3BhZ2F0aW9uKCk7dGhpcy5zbGlkZUluKCl9ZWxzZXtBLnN0b3BQcm9wYWdhdGlvbigpO3RoaXMuc2xpZGVPdXQoKX19LG9uSGlkZTpmdW5jdGlvbigpe2lmKHRoaXMuaXNDb2xsYXBzZWQpe3RoaXMuZ2V0Q29sbGFwc2VkRWwoKS5oaWRlKCl9ZWxzZXtpZih0aGlzLnNwbGl0RWwpe3RoaXMuc3BsaXRFbC5oaWRlKCl9fX0sb25TaG93OmZ1bmN0aW9uKCl7aWYodGhpcy5pc0NvbGxhcHNlZCl7dGhpcy5nZXRDb2xsYXBzZWRFbCgpLnNob3coKX1lbHNle2lmKHRoaXMuc3BsaXRFbCl7dGhpcy5zcGxpdEVsLnNob3coKX19fSxpc1Zpc2libGU6ZnVuY3Rpb24oKXtyZXR1cm4gIXRoaXMucGFuZWwuaGlkZGVufSxnZXRNYXJnaW5zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNDb2xsYXBzZWQmJnRoaXMuY21hcmdpbnM/dGhpcy5jbWFyZ2luczp0aGlzLm1hcmdpbnN9LGdldFNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0NvbGxhcHNlZD90aGlzLmdldENvbGxhcHNlZEVsKCkuZ2V0U2l6ZSgpOnRoaXMucGFuZWwuZ2V0U2l6ZSgpfSxzZXRQYW5lbDpmdW5jdGlvbihBKXt0aGlzLnBhbmVsPUF9LGdldE1pbldpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWluV2lkdGh9LGdldE1pbkhlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1pbkhlaWdodH0sYXBwbHlMYXlvdXRDb2xsYXBzZWQ6ZnVuY3Rpb24oQSl7dmFyIEI9dGhpcy5nZXRDb2xsYXBzZWRFbCgpO0Iuc2V0TGVmdFRvcChBLngsQS55KTtCLnNldFNpemUoQS53aWR0aCxBLmhlaWdodCl9LGFwcGx5TGF5b3V0OmZ1bmN0aW9uKEEpe2lmKHRoaXMuaXNDb2xsYXBzZWQpe3RoaXMuYXBwbHlMYXlvdXRDb2xsYXBzZWQoQSl9ZWxzZXt0aGlzLnBhbmVsLnNldFBvc2l0aW9uKEEueCxBLnkpO3RoaXMucGFuZWwuc2V0U2l6ZShBLndpZHRoLEEuaGVpZ2h0KX19LGJlZm9yZVNsaWRlOmZ1bmN0aW9uKCl7dGhpcy5wYW5lbC5iZWZvcmVFZmZlY3QoKX0sYWZ0ZXJTbGlkZTpmdW5jdGlvbigpe3RoaXMucGFuZWwuYWZ0ZXJFZmZlY3QoKX0saW5pdEF1dG9IaWRlOmZ1bmN0aW9uKCl7aWYodGhpcy5hdXRvSGlkZSE9PWZhbHNlKXtpZighdGhpcy5hdXRvSGlkZUhkKXt2YXIgQT1uZXcgRXh0LnV0aWwuRGVsYXllZFRhc2sodGhpcy5zbGlkZUluLHRoaXMpO3RoaXMuYXV0b0hpZGVIZD17Im1vdXNlb3V0IjpmdW5jdGlvbihCKXtpZighQi53aXRoaW4odGhpcy5lbCx0cnVlKSl7QS5kZWxheSg1MDApfX0sIm1vdXNlb3ZlciI6ZnVuY3Rpb24oQil7QS5jYW5jZWwoKX0sc2NvcGU6dGhpc319dGhpcy5lbC5vbih0aGlzLmF1dG9IaWRlSGQpfX0sY2xlYXJBdXRvSGlkZTpmdW5jdGlvbigpe2lmKHRoaXMuYXV0b0hpZGUhPT1mYWxzZSl7dGhpcy5lbC51bigibW91c2VvdXQiLHRoaXMuYXV0b0hpZGVIZC5tb3VzZW91dCk7dGhpcy5lbC51bigibW91c2VvdmVyIix0aGlzLmF1dG9IaWRlSGQubW91c2VvdmVyKX19LGNsZWFyTW9uaXRvcjpmdW5jdGlvbigpe0V4dC5nZXREb2MoKS51bigiY2xpY2siLHRoaXMuc2xpZGVJbklmLHRoaXMpfSxzbGlkZU91dDpmdW5jdGlvbigpe2lmKHRoaXMuaXNTbGlkfHx0aGlzLmVsLmhhc0FjdGl2ZUZ4KCkpe3JldHVybiB9dGhpcy5pc1NsaWQ9dHJ1ZTt2YXIgQT10aGlzLnBhbmVsLnRvb2xzO2lmKEEmJkEudG9nZ2xlKXtBLnRvZ2dsZS5oaWRlKCl9dGhpcy5lbC5zaG93KCk7aWYodGhpcy5wb3NpdGlvbj09ImVhc3QifHx0aGlzLnBvc2l0aW9uPT0id2VzdCIpe3RoaXMucGFuZWwuc2V0U2l6ZSh1bmRlZmluZWQsdGhpcy5jb2xsYXBzZWRFbC5nZXRIZWlnaHQoKSl9ZWxzZXt0aGlzLnBhbmVsLnNldFNpemUodGhpcy5jb2xsYXBzZWRFbC5nZXRXaWR0aCgpLHVuZGVmaW5lZCl9dGhpcy5yZXN0b3JlTFQ9W3RoaXMuZWwuZG9tLnN0eWxlLmxlZnQsdGhpcy5lbC5kb20uc3R5bGUudG9wXTt0aGlzLmVsLmFsaWduVG8odGhpcy5jb2xsYXBzZWRFbCx0aGlzLmdldENvbGxhcHNlQW5jaG9yKCkpO3RoaXMuZWwuc2V0U3R5bGUoInotaW5kZXgiLDEwMik7aWYodGhpcy5hbmltRmxvYXQhPT1mYWxzZSl7dGhpcy5iZWZvcmVTbGlkZSgpO3RoaXMuZWwuc2xpZGVJbih0aGlzLmdldFNsaWRlQW5jaG9yKCkse2NhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5hZnRlclNsaWRlKCk7dGhpcy5pbml0QXV0b0hpZGUoKTtFeHQuZ2V0RG9jKCkub24oImNsaWNrIix0aGlzLnNsaWRlSW5JZix0aGlzKX0sc2NvcGU6dGhpcyxibG9jazp0cnVlfSl9ZWxzZXt0aGlzLmluaXRBdXRvSGlkZSgpO0V4dC5nZXREb2MoKS5vbigiY2xpY2siLHRoaXMuc2xpZGVJbklmLHRoaXMpfX0sYWZ0ZXJTbGlkZUluOmZ1bmN0aW9uKCl7dGhpcy5jbGVhckF1dG9IaWRlKCk7dGhpcy5pc1NsaWQ9ZmFsc2U7dGhpcy5jbGVhck1vbml0b3IoKTt0aGlzLmVsLnNldFN0eWxlKCJ6LWluZGV4IiwiIik7dGhpcy5lbC5kb20uc3R5bGUubGVmdD10aGlzLnJlc3RvcmVMVFswXTt0aGlzLmVsLmRvbS5zdHlsZS50b3A9dGhpcy5yZXN0b3JlTFRbMV07dmFyIEE9dGhpcy5wYW5lbC50b29scztpZihBJiZBLnRvZ2dsZSl7QS50b2dnbGUuc2hvdygpfX0sc2xpZGVJbjpmdW5jdGlvbihBKXtpZighdGhpcy5pc1NsaWR8fHRoaXMuZWwuaGFzQWN0aXZlRngoKSl7RXh0LmNhbGxiYWNrKEEpO3JldHVybiB9dGhpcy5pc1NsaWQ9ZmFsc2U7aWYodGhpcy5hbmltRmxvYXQhPT1mYWxzZSl7dGhpcy5iZWZvcmVTbGlkZSgpO3RoaXMuZWwuc2xpZGVPdXQodGhpcy5nZXRTbGlkZUFuY2hvcigpLHtjYWxsYmFjazpmdW5jdGlvbigpe3RoaXMuZWwuaGlkZSgpO3RoaXMuYWZ0ZXJTbGlkZSgpO3RoaXMuYWZ0ZXJTbGlkZUluKCk7RXh0LmNhbGxiYWNrKEEpfSxzY29wZTp0aGlzLGJsb2NrOnRydWV9KX1lbHNle3RoaXMuZWwuaGlkZSgpO3RoaXMuYWZ0ZXJTbGlkZUluKCl9fSxzbGlkZUluSWY6ZnVuY3Rpb24oQSl7aWYoIUEud2l0aGluKHRoaXMuZWwpKXt0aGlzLnNsaWRlSW4oKX19LGFuY2hvcnM6eyJ3ZXN0IjoibGVmdCIsImVhc3QiOiJyaWdodCIsIm5vcnRoIjoidG9wIiwic291dGgiOiJib3R0b20ifSxzYW5jaG9yczp7Indlc3QiOiJsIiwiZWFzdCI6InIiLCJub3J0aCI6InQiLCJzb3V0aCI6ImIifSxjYW5jaG9yczp7Indlc3QiOiJ0bC10ciIsImVhc3QiOiJ0ci10bCIsIm5vcnRoIjoidGwtYmwiLCJzb3V0aCI6ImJsLXRsIn0sZ2V0QW5jaG9yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYW5jaG9yc1t0aGlzLnBvc2l0aW9uXX0sZ2V0Q29sbGFwc2VBbmNob3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jYW5jaG9yc1t0aGlzLnBvc2l0aW9uXX0sZ2V0U2xpZGVBbmNob3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zYW5jaG9yc1t0aGlzLnBvc2l0aW9uXX0sZ2V0QWxpZ25BZGo6ZnVuY3Rpb24oKXt2YXIgQT10aGlzLmNtYXJnaW5zO3N3aXRjaCh0aGlzLnBvc2l0aW9uKXtjYXNlIndlc3QiOnJldHVyblswLDBdO2JyZWFrO2Nhc2UiZWFzdCI6cmV0dXJuWzAsMF07YnJlYWs7Y2FzZSJub3J0aCI6cmV0dXJuWzAsMF07YnJlYWs7Y2FzZSJzb3V0aCI6cmV0dXJuWzAsMF07YnJlYWt9fSxnZXRFeHBhbmRBZGo6ZnVuY3Rpb24oKXt2YXIgQj10aGlzLmNvbGxhcHNlZEVsLEE9dGhpcy5jbWFyZ2lucztzd2l0Y2godGhpcy5wb3NpdGlvbil7Y2FzZSJ3ZXN0IjpyZXR1cm5bLShBLnJpZ2h0K0IuZ2V0V2lkdGgoKStBLmxlZnQpLDBdO2JyZWFrO2Nhc2UiZWFzdCI6cmV0dXJuW0EucmlnaHQrQi5nZXRXaWR0aCgpK0EubGVmdCwwXTticmVhaztjYXNlIm5vcnRoIjpyZXR1cm5bMCwtKEEudG9wK0EuYm90dG9tK0IuZ2V0SGVpZ2h0KCkpXTticmVhaztjYXNlInNvdXRoIjpyZXR1cm5bMCxBLnRvcCtBLmJvdHRvbStCLmdldEhlaWdodCgpXTticmVha319fTtFeHQubGF5b3V0LkJvcmRlckxheW91dC5TcGxpdFJlZ2lvbj1mdW5jdGlvbihCLEEsQyl7RXh0LmxheW91dC5Cb3JkZXJMYXlvdXQuU3BsaXRSZWdpb24uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsQixBLEMpO3RoaXMuYXBwbHlMYXlvdXQ9dGhpcy5hcHBseUZuc1tDXX07RXh0LmV4dGVuZChFeHQubGF5b3V0LkJvcmRlckxheW91dC5TcGxpdFJlZ2lvbixFeHQubGF5b3V0LkJvcmRlckxheW91dC5SZWdpb24se3NwbGl0VGlwOiJEcmFnIHRvIHJlc2l6ZS4iLGNvbGxhcHNpYmxlU3BsaXRUaXA6IkRyYWcgdG8gcmVzaXplLiBEb3VibGUgY2xpY2sgdG8gaGlkZS4iLHVzZVNwbGl0VGlwczpmYWxzZSxzcGxpdFNldHRpbmdzOntub3J0aDp7b3JpZW50YXRpb246RXh0LlNwbGl0QmFyLlZFUlRJQ0FMLHBsYWNlbWVudDpFeHQuU3BsaXRCYXIuVE9QLG1heEZuOiJnZXRWTWF4U2l6ZSIsbWluUHJvcDoibWluSGVpZ2h0IixtYXhQcm9wOiJtYXhIZWlnaHQifSxzb3V0aDp7b3JpZW50YXRpb246RXh0LlNwbGl0QmFyLlZFUlRJQ0FMLHBsYWNlbWVudDpFeHQuU3BsaXRCYXIuQk9UVE9NLG1heEZuOiJnZXRWTWF4U2l6ZSIsbWluUHJvcDoibWluSGVpZ2h0IixtYXhQcm9wOiJtYXhIZWlnaHQifSxlYXN0OntvcmllbnRhdGlvbjpFeHQuU3BsaXRCYXIuSE9SSVpPTlRBTCxwbGFjZW1lbnQ6RXh0LlNwbGl0QmFyLlJJR0hULG1heEZuOiJnZXRITWF4U2l6ZSIsbWluUHJvcDoibWluV2lkdGgiLG1heFByb3A6Im1heFdpZHRoIn0sd2VzdDp7b3JpZW50YXRpb246RXh0LlNwbGl0QmFyLkhPUklaT05UQUwscGxhY2VtZW50OkV4dC5TcGxpdEJhci5MRUZULG1heEZuOiJnZXRITWF4U2l6ZSIsbWluUHJvcDoibWluV2lkdGgiLG1heFByb3A6Im1heFdpZHRoIn19LGFwcGx5Rm5zOnt3ZXN0OmZ1bmN0aW9uKEMpe2lmKHRoaXMuaXNDb2xsYXBzZWQpe3JldHVybiB0aGlzLmFwcGx5TGF5b3V0Q29sbGFwc2VkKEMpfXZhciBEPXRoaXMuc3BsaXRFbC5kb20sQj1ELnN0eWxlO3RoaXMucGFuZWwuc2V0UG9zaXRpb24oQy54LEMueSk7dmFyIEE9RC5vZmZzZXRXaWR0aDtCLmxlZnQ9KEMueCtDLndpZHRoLUEpKyJweCI7Qi50b3A9KEMueSkrInB4IjtCLmhlaWdodD1NYXRoLm1heCgwLEMuaGVpZ2h0KSsicHgiO3RoaXMucGFuZWwuc2V0U2l6ZShDLndpZHRoLUEsQy5oZWlnaHQpfSxlYXN0OmZ1bmN0aW9uKEMpe2lmKHRoaXMuaXNDb2xsYXBzZWQpe3JldHVybiB0aGlzLmFwcGx5TGF5b3V0Q29sbGFwc2VkKEMpfXZhciBEPXRoaXMuc3BsaXRFbC5kb20sQj1ELnN0eWxlO3ZhciBBPUQub2Zmc2V0V2lkdGg7dGhpcy5wYW5lbC5zZXRQb3NpdGlvbihDLngrQSxDLnkpO0IubGVmdD0oQy54KSsicHgiO0IudG9wPShDLnkpKyJweCI7Qi5oZWlnaHQ9TWF0aC5tYXgoMCxDLmhlaWdodCkrInB4Ijt0aGlzLnBhbmVsLnNldFNpemUoQy53aWR0aC1BLEMuaGVpZ2h0KX0sbm9ydGg6ZnVuY3Rpb24oQyl7aWYodGhpcy5pc0NvbGxhcHNlZCl7cmV0dXJuIHRoaXMuYXBwbHlMYXlvdXRDb2xsYXBzZWQoQyl9dmFyIEQ9dGhpcy5zcGxpdEVsLmRvbSxCPUQuc3R5bGU7dmFyIEE9RC5vZmZzZXRIZWlnaHQ7dGhpcy5wYW5lbC5zZXRQb3NpdGlvbihDLngsQy55KTtCLmxlZnQ9KEMueCkrInB4IjtCLnRvcD0oQy55K0MuaGVpZ2h0LUEpKyJweCI7Qi53aWR0aD1NYXRoLm1heCgwLEMud2lkdGgpKyJweCI7dGhpcy5wYW5lbC5zZXRTaXplKEMud2lkdGgsQy5oZWlnaHQtQSl9LHNvdXRoOmZ1bmN0aW9uKEMpe2lmKHRoaXMuaXNDb2xsYXBzZWQpe3JldHVybiB0aGlzLmFwcGx5TGF5b3V0Q29sbGFwc2VkKEMpfXZhciBEPXRoaXMuc3BsaXRFbC5kb20sQj1ELnN0eWxlO3ZhciBBPUQub2Zmc2V0SGVpZ2h0O3RoaXMucGFuZWwuc2V0UG9zaXRpb24oQy54LEMueStBKTtCLmxlZnQ9KEMueCkrInB4IjtCLnRvcD0oQy55KSsicHgiO0Iud2lkdGg9TWF0aC5tYXgoMCxDLndpZHRoKSsicHgiO3RoaXMucGFuZWwuc2V0U2l6ZShDLndpZHRoLEMuaGVpZ2h0LUEpfX0scmVuZGVyOmZ1bmN0aW9uKEEsQyl7RXh0LmxheW91dC5Cb3JkZXJMYXlvdXQuU3BsaXRSZWdpb24uc3VwZXJjbGFzcy5yZW5kZXIuY2FsbCh0aGlzLEEsQyk7dmFyIEQ9dGhpcy5wb3NpdGlvbjt0aGlzLnNwbGl0RWw9QS5jcmVhdGVDaGlsZCh7Y2xzOiJ4LWxheW91dC1zcGxpdCB4LWxheW91dC1zcGxpdC0iK0QsaHRtbDoiJiMxNjA7IixpZDp0aGlzLnBhbmVsLmlkKyIteHNwbGl0In0pO2lmKHRoaXMuY29sbGFwc2VNb2RlPT0ibWluaSIpe3RoaXMubWluaVNwbGl0RWw9dGhpcy5zcGxpdEVsLmNyZWF0ZUNoaWxkKHtjbHM6IngtbGF5b3V0LW1pbmkgeC1sYXlvdXQtbWluaS0iK0QsaHRtbDoiJiMxNjA7In0pO3RoaXMubWluaVNwbGl0RWwuYWRkQ2xhc3NPbk92ZXIoIngtbGF5b3V0LW1pbmktb3ZlciIpO3RoaXMubWluaVNwbGl0RWwub24oImNsaWNrIix0aGlzLm9uQ29sbGFwc2VDbGljayx0aGlzLHtzdG9wRXZlbnQ6dHJ1ZX0pfXZhciBCPXRoaXMuc3BsaXRTZXR0aW5nc1tEXTt0aGlzLnNwbGl0PW5ldyBFeHQuU3BsaXRCYXIodGhpcy5zcGxpdEVsLmRvbSxDLmVsLEIub3JpZW50YXRpb24pO3RoaXMuc3BsaXQucGxhY2VtZW50PUIucGxhY2VtZW50O3RoaXMuc3BsaXQuZ2V0TWF4aW11bVNpemU9dGhpc1tCLm1heEZuXS5jcmVhdGVEZWxlZ2F0ZSh0aGlzKTt0aGlzLnNwbGl0Lm1pblNpemU9dGhpcy5taW5TaXplfHx0aGlzW0IubWluUHJvcF07dGhpcy5zcGxpdC5vbigiYmVmb3JlYXBwbHkiLHRoaXMub25TcGxpdE1vdmUsdGhpcyk7dGhpcy5zcGxpdC51c2VTaGltPXRoaXMudXNlU2hpbT09PXRydWU7dGhpcy5tYXhTaXplPXRoaXMubWF4U2l6ZXx8dGhpc1tCLm1heFByb3BdO2lmKEMuaGlkZGVuKXt0aGlzLnNwbGl0RWwuaGlkZSgpfWlmKHRoaXMudXNlU3BsaXRUaXBzKXt0aGlzLnNwbGl0RWwuZG9tLnRpdGxlPXRoaXMuY29sbGFwc2libGU/dGhpcy5jb2xsYXBzaWJsZVNwbGl0VGlwOnRoaXMuc3BsaXRUaXB9aWYodGhpcy5jb2xsYXBzaWJsZSl7dGhpcy5zcGxpdEVsLm9uKCJkYmxjbGljayIsdGhpcy5vbkNvbGxhcHNlQ2xpY2ssdGhpcyl9fSxnZXRTaXplOmZ1bmN0aW9uKCl7aWYodGhpcy5pc0NvbGxhcHNlZCl7cmV0dXJuIHRoaXMuY29sbGFwc2VkRWwuZ2V0U2l6ZSgpfXZhciBBPXRoaXMucGFuZWwuZ2V0U2l6ZSgpO2lmKHRoaXMucG9zaXRpb249PSJub3J0aCJ8fHRoaXMucG9zaXRpb249PSJzb3V0aCIpe0EuaGVpZ2h0Kz10aGlzLnNwbGl0RWwuZG9tLm9mZnNldEhlaWdodH1lbHNle0Eud2lkdGgrPXRoaXMuc3BsaXRFbC5kb20ub2Zmc2V0V2lkdGh9cmV0dXJuIEF9LGdldEhNYXhTaXplOmZ1bmN0aW9uKCl7dmFyIEI9dGhpcy5tYXhTaXplfHwxMDAwMDt2YXIgQT10aGlzLmxheW91dC5jZW50ZXI7cmV0dXJuIE1hdGgubWluKEIsKHRoaXMuZWwuZ2V0V2lkdGgoKStBLmVsLmdldFdpZHRoKCkpLUEuZ2V0TWluV2lkdGgoKSl9LGdldFZNYXhTaXplOmZ1bmN0aW9uKCl7dmFyIEI9dGhpcy5tYXhTaXplfHwxMDAwMDt2YXIgQT10aGlzLmxheW91dC5jZW50ZXI7cmV0dXJuIE1hdGgubWluKEIsKHRoaXMuZWwuZ2V0SGVpZ2h0KCkrQS5lbC5nZXRIZWlnaHQoKSktQS5nZXRNaW5IZWlnaHQoKSl9LG9uU3BsaXRNb3ZlOmZ1bmN0aW9uKEIsQSl7dmFyIEM9dGhpcy5wYW5lbC5nZXRTaXplKCk7dGhpcy5sYXN0U3BsaXRTaXplPUE7aWYodGhpcy5wb3NpdGlvbj09Im5vcnRoInx8dGhpcy5wb3NpdGlvbj09InNvdXRoIil7dGhpcy5wYW5lbC5zZXRTaXplKEMud2lkdGgsQSk7dGhpcy5zdGF0ZS5oZWlnaHQ9QX1lbHNle3RoaXMucGFuZWwuc2V0U2l6ZShBLEMuaGVpZ2h0KTt0aGlzLnN0YXRlLndpZHRoPUF9dGhpcy5sYXlvdXQubGF5b3V0KCk7dGhpcy5wYW5lbC5zYXZlU3RhdGUoKTtyZXR1cm4gZmFsc2V9LGdldFNwbGl0QmFyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3BsaXR9fSk7RXh0LkNvbnRhaW5lci5MQVlPVVRTWyJib3JkZXIiXT1FeHQubGF5b3V0LkJvcmRlckxheW91dDsNCkV4dC5sYXlvdXQuRm9ybUxheW91dD1FeHQuZXh0ZW5kKEV4dC5sYXlvdXQuQW5jaG9yTGF5b3V0LHtsYWJlbFNlcGFyYXRvcjoiOiIsZ2V0QW5jaG9yVmlld1NpemU6ZnVuY3Rpb24oQSxCKXtyZXR1cm4gQS5ib2R5LmdldFN0eWxlU2l6ZSgpfSxzZXRDb250YWluZXI6ZnVuY3Rpb24oQil7RXh0LmxheW91dC5Gb3JtTGF5b3V0LnN1cGVyY2xhc3Muc2V0Q29udGFpbmVyLmNhbGwodGhpcyxCKTtpZihCLmxhYmVsQWxpZ24pe0IuYWRkQ2xhc3MoIngtZm9ybS1sYWJlbC0iK0IubGFiZWxBbGlnbil9aWYoQi5oaWRlTGFiZWxzKXt0aGlzLmxhYmVsU3R5bGU9ImRpc3BsYXk6bm9uZSI7dGhpcy5lbGVtZW50U3R5bGU9InBhZGRpbmctbGVmdDowOyI7dGhpcy5sYWJlbEFkanVzdD0wfWVsc2V7dGhpcy5sYWJlbFNlcGFyYXRvcj1CLmxhYmVsU2VwYXJhdG9yfHx0aGlzLmxhYmVsU2VwYXJhdG9yO0IubGFiZWxXaWR0aD1CLmxhYmVsV2lkdGh8fDEwMDtpZih0eXBlb2YgQi5sYWJlbFdpZHRoPT0ibnVtYmVyIil7dmFyIEM9KHR5cGVvZiBCLmxhYmVsUGFkPT0ibnVtYmVyIj9CLmxhYmVsUGFkOjUpO3RoaXMubGFiZWxBZGp1c3Q9Qi5sYWJlbFdpZHRoK0M7dGhpcy5sYWJlbFN0eWxlPSJ3aWR0aDoiK0IubGFiZWxXaWR0aCsicHg7Ijt0aGlzLmVsZW1lbnRTdHlsZT0icGFkZGluZy1sZWZ0OiIrKEIubGFiZWxXaWR0aCtDKSsicHgifWlmKEIubGFiZWxBbGlnbj09InRvcCIpe3RoaXMubGFiZWxTdHlsZT0id2lkdGg6YXV0bzsiO3RoaXMubGFiZWxBZGp1c3Q9MDt0aGlzLmVsZW1lbnRTdHlsZT0icGFkZGluZy1sZWZ0OjA7In19aWYoIXRoaXMuZmllbGRUcGwpe3ZhciBBPW5ldyBFeHQuVGVtcGxhdGUoIjxkaXYgY2xhc3M9XCJ4LWZvcm0taXRlbSB7NX1cIiB0YWJJbmRleD1cIi0xXCI+IiwiPGxhYmVsIGZvcj1cInswfVwiIHN0eWxlPVwiezJ9XCIgY2xhc3M9XCJ4LWZvcm0taXRlbS1sYWJlbFwiPnsxfXs0fTwvbGFiZWw+IiwiPGRpdiBjbGFzcz1cIngtZm9ybS1lbGVtZW50XCIgaWQ9XCJ4LWZvcm0tZWwtezB9XCIgc3R5bGU9XCJ7M31cIj4iLCI8L2Rpdj48ZGl2IGNsYXNzPVwiezZ9XCI+PC9kaXY+IiwiPC9kaXY+Iik7QS5kaXNhYmxlRm9ybWF0cz10cnVlO0EuY29tcGlsZSgpO0V4dC5sYXlvdXQuRm9ybUxheW91dC5wcm90b3R5cGUuZmllbGRUcGw9QX19LHJlbmRlckl0ZW06ZnVuY3Rpb24oRCxBLEMpe2lmKEQmJiFELnJlbmRlcmVkJiZELmlzRm9ybUZpZWxkJiZELmlucHV0VHlwZSE9ImhpZGRlbiIpe3ZhciBCPVtELmlkLEQuZmllbGRMYWJlbCxELmxhYmVsU3R5bGV8fHRoaXMubGFiZWxTdHlsZXx8IiIsdGhpcy5lbGVtZW50U3R5bGV8fCIiLHR5cGVvZiBELmxhYmVsU2VwYXJhdG9yPT0idW5kZWZpbmVkIj90aGlzLmxhYmVsU2VwYXJhdG9yOkQubGFiZWxTZXBhcmF0b3IsKEQuaXRlbUNsc3x8dGhpcy5jb250YWluZXIuaXRlbUNsc3x8IiIpKyhELmhpZGVMYWJlbD8iIHgtaGlkZS1sYWJlbCI6IiIpLEQuY2xlYXJDbHN8fCJ4LWZvcm0tY2xlYXItbGVmdCJdO2lmKHR5cGVvZiBBPT0ibnVtYmVyIil7QT1DLmRvbS5jaGlsZE5vZGVzW0FdfHxudWxsfWlmKEEpe3RoaXMuZmllbGRUcGwuaW5zZXJ0QmVmb3JlKEEsQil9ZWxzZXt0aGlzLmZpZWxkVHBsLmFwcGVuZChDLEIpfUQucmVuZGVyKCJ4LWZvcm0tZWwtIitELmlkKX1lbHNle0V4dC5sYXlvdXQuRm9ybUxheW91dC5zdXBlcmNsYXNzLnJlbmRlckl0ZW0uYXBwbHkodGhpcyxhcmd1bWVudHMpfX0sYWRqdXN0V2lkdGhBbmNob3I6ZnVuY3Rpb24oQixBKXtyZXR1cm4gQi0oQS5pc0Zvcm1GaWVsZD8oQS5oaWRlTGFiZWw/MDp0aGlzLmxhYmVsQWRqdXN0KTowKX0saXNWYWxpZFBhcmVudDpmdW5jdGlvbihCLEEpe3JldHVybiB0cnVlfX0pO0V4dC5Db250YWluZXIuTEFZT1VUU1siZm9ybSJdPUV4dC5sYXlvdXQuRm9ybUxheW91dDsNCkV4dC5sYXlvdXQuQWNjb3JkaW9uPUV4dC5leHRlbmQoRXh0LmxheW91dC5GaXRMYXlvdXQse2ZpbGw6dHJ1ZSxhdXRvV2lkdGg6dHJ1ZSx0aXRsZUNvbGxhcHNlOnRydWUsaGlkZUNvbGxhcHNlVG9vbDpmYWxzZSxjb2xsYXBzZUZpcnN0OmZhbHNlLGFuaW1hdGU6ZmFsc2Usc2VxdWVuY2U6ZmFsc2UsYWN0aXZlT25Ub3A6ZmFsc2UscmVuZGVySXRlbTpmdW5jdGlvbihBKXtpZih0aGlzLmFuaW1hdGU9PT1mYWxzZSl7QS5hbmltQ29sbGFwc2U9ZmFsc2V9QS5jb2xsYXBzaWJsZT10cnVlO2lmKHRoaXMuYXV0b1dpZHRoKXtBLmF1dG9XaWR0aD10cnVlfWlmKHRoaXMudGl0bGVDb2xsYXBzZSl7QS50aXRsZUNvbGxhcHNlPXRydWV9aWYodGhpcy5oaWRlQ29sbGFwc2VUb29sKXtBLmhpZGVDb2xsYXBzZVRvb2w9dHJ1ZX1pZih0aGlzLmNvbGxhcHNlRmlyc3QhPT11bmRlZmluZWQpe0EuY29sbGFwc2VGaXJzdD10aGlzLmNvbGxhcHNlRmlyc3R9aWYoIXRoaXMuYWN0aXZlSXRlbSYmIUEuY29sbGFwc2VkKXt0aGlzLmFjdGl2ZUl0ZW09QX1lbHNle2lmKHRoaXMuYWN0aXZlSXRlbSl7QS5jb2xsYXBzZWQ9dHJ1ZX19RXh0LmxheW91dC5BY2NvcmRpb24uc3VwZXJjbGFzcy5yZW5kZXJJdGVtLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtBLmhlYWRlci5hZGRDbGFzcygieC1hY2NvcmRpb24taGQiKTtBLm9uKCJiZWZvcmVleHBhbmQiLHRoaXMuYmVmb3JlRXhwYW5kLHRoaXMpfSxiZWZvcmVFeHBhbmQ6ZnVuY3Rpb24oQyxCKXt2YXIgQT10aGlzLmFjdGl2ZUl0ZW07aWYoQSl7aWYodGhpcy5zZXF1ZW5jZSl7ZGVsZXRlIHRoaXMuYWN0aXZlSXRlbTtBLmNvbGxhcHNlKHtjYWxsYmFjazpmdW5jdGlvbigpe0MuZXhwYW5kKEJ8fHRydWUpfSxzY29wZTp0aGlzfSk7cmV0dXJuIGZhbHNlfWVsc2V7QS5jb2xsYXBzZSh0aGlzLmFuaW1hdGUpfX10aGlzLmFjdGl2ZUl0ZW09QztpZih0aGlzLmFjdGl2ZU9uVG9wKXtDLmVsLmRvbS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShDLmVsLmRvbSxDLmVsLmRvbS5wYXJlbnROb2RlLmZpcnN0Q2hpbGQpfXRoaXMubGF5b3V0KCl9LHNldEl0ZW1TaXplOmZ1bmN0aW9uKEYsRSl7aWYodGhpcy5maWxsJiZGKXt2YXIgQj10aGlzLmNvbnRhaW5lci5pdGVtcy5pdGVtczt2YXIgRD0wO2Zvcih2YXIgQz0wLEE9Qi5sZW5ndGg7QzxBO0MrKyl7dmFyIEc9QltDXTtpZihHIT1GKXtEKz0oRy5nZXRTaXplKCkuaGVpZ2h0LUcuYndyYXAuZ2V0SGVpZ2h0KCkpfX1FLmhlaWdodC09RDtGLnNldFNpemUoRSl9fX0pO0V4dC5Db250YWluZXIuTEFZT1VUU1siYWNjb3JkaW9uIl09RXh0LmxheW91dC5BY2NvcmRpb247DQpFeHQubGF5b3V0LlRhYmxlTGF5b3V0PUV4dC5leHRlbmQoRXh0LmxheW91dC5Db250YWluZXJMYXlvdXQse21vbml0b3JSZXNpemU6ZmFsc2Usc2V0Q29udGFpbmVyOmZ1bmN0aW9uKEEpe0V4dC5sYXlvdXQuVGFibGVMYXlvdXQuc3VwZXJjbGFzcy5zZXRDb250YWluZXIuY2FsbCh0aGlzLEEpO3RoaXMuY3VycmVudFJvdz0wO3RoaXMuY3VycmVudENvbHVtbj0wO3RoaXMuY2VsbHM9W119LG9uTGF5b3V0OmZ1bmN0aW9uKEMsRSl7dmFyIEQ9Qy5pdGVtcy5pdGVtcyxBPUQubGVuZ3RoLEYsQjtpZighdGhpcy50YWJsZSl7RS5hZGRDbGFzcygieC10YWJsZS1sYXlvdXQtY3QiKTt0aGlzLnRhYmxlPUUuY3JlYXRlQ2hpbGQoe3RhZzoidGFibGUiLGNsczoieC10YWJsZS1sYXlvdXQiLGNlbGxzcGFjaW5nOjAsY246e3RhZzoidGJvZHkifX0sbnVsbCx0cnVlKTt0aGlzLnJlbmRlckFsbChDLEUpfX0sZ2V0Um93OmZ1bmN0aW9uKEEpe3ZhciBCPXRoaXMudGFibGUudEJvZGllc1swXS5jaGlsZE5vZGVzW0FdO2lmKCFCKXtCPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRyIik7dGhpcy50YWJsZS50Qm9kaWVzWzBdLmFwcGVuZENoaWxkKEIpfXJldHVybiBCfSxnZXROZXh0Q2VsbDpmdW5jdGlvbihIKXt2YXIgQT10aGlzLmdldE5leHROb25TcGFuKHRoaXMuY3VycmVudENvbHVtbix0aGlzLmN1cnJlbnRSb3cpO3ZhciBFPXRoaXMuY3VycmVudENvbHVtbj1BWzBdLEQ9dGhpcy5jdXJyZW50Um93PUFbMV07Zm9yKHZhciBHPUQ7RzxEKyhILnJvd3NwYW58fDEpO0crKyl7aWYoIXRoaXMuY2VsbHNbR10pe3RoaXMuY2VsbHNbR109W119Zm9yKHZhciBDPUU7QzxFKyhILmNvbHNwYW58fDEpO0MrKyl7dGhpcy5jZWxsc1tHXVtDXT10cnVlfX12YXIgRj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZCIpO2lmKEguY2VsbElkKXtGLmlkPUguY2VsbElkfXZhciBCPSJ4LXRhYmxlLWxheW91dC1jZWxsIjtpZihILmNlbGxDbHMpe0IrPSIgIitILmNlbGxDbHN9Ri5jbGFzc05hbWU9QjtpZihILmNvbHNwYW4pe0YuY29sU3Bhbj1ILmNvbHNwYW59aWYoSC5yb3dzcGFuKXtGLnJvd1NwYW49SC5yb3dzcGFufXRoaXMuZ2V0Um93KEQpLmFwcGVuZENoaWxkKEYpO3JldHVybiBGfSxnZXROZXh0Tm9uU3BhbjpmdW5jdGlvbihBLEMpe3ZhciBCPXRoaXMuY29sdW1uczt3aGlsZSgoQiYmQT49Qil8fCh0aGlzLmNlbGxzW0NdJiZ0aGlzLmNlbGxzW0NdW0FdKSl7aWYoQiYmQT49Qil7QysrO0E9MH1lbHNle0ErK319cmV0dXJuW0EsQ119LHJlbmRlckl0ZW06ZnVuY3Rpb24oQyxBLEIpe2lmKEMmJiFDLnJlbmRlcmVkKXtDLnJlbmRlcih0aGlzLmdldE5leHRDZWxsKEMpKX19LGlzVmFsaWRQYXJlbnQ6ZnVuY3Rpb24oQixBKXtyZXR1cm4gdHJ1ZX19KTtFeHQuQ29udGFpbmVyLkxBWU9VVFNbInRhYmxlIl09RXh0LmxheW91dC5UYWJsZUxheW91dDsNCkV4dC5sYXlvdXQuQWJzb2x1dGVMYXlvdXQ9RXh0LmV4dGVuZChFeHQubGF5b3V0LkFuY2hvckxheW91dCx7ZXh0cmFDbHM6IngtYWJzLWxheW91dC1pdGVtIixpc0Zvcm06ZmFsc2Usc2V0Q29udGFpbmVyOmZ1bmN0aW9uKEEpe0V4dC5sYXlvdXQuQWJzb2x1dGVMYXlvdXQuc3VwZXJjbGFzcy5zZXRDb250YWluZXIuY2FsbCh0aGlzLEEpO2lmKEEuaXNYVHlwZSgiZm9ybSIpKXt0aGlzLmlzRm9ybT10cnVlfX0sb25MYXlvdXQ6ZnVuY3Rpb24oQSxCKXtpZih0aGlzLmlzRm9ybSl7QS5ib2R5LnBvc2l0aW9uKCl9ZWxzZXtCLnBvc2l0aW9uKCl9RXh0LmxheW91dC5BYnNvbHV0ZUxheW91dC5zdXBlcmNsYXNzLm9uTGF5b3V0LmNhbGwodGhpcyxBLEIpfSxnZXRBbmNob3JWaWV3U2l6ZTpmdW5jdGlvbihBLEIpe3JldHVybiB0aGlzLmlzRm9ybT9BLmJvZHkuZ2V0U3R5bGVTaXplKCk6RXh0LmxheW91dC5BYnNvbHV0ZUxheW91dC5zdXBlcmNsYXNzLmdldEFuY2hvclZpZXdTaXplLmNhbGwodGhpcyxBLEIpfSxpc1ZhbGlkUGFyZW50OmZ1bmN0aW9uKEIsQSl7cmV0dXJuIHRoaXMuaXNGb3JtP3RydWU6RXh0LmxheW91dC5BYnNvbHV0ZUxheW91dC5zdXBlcmNsYXNzLmlzVmFsaWRQYXJlbnQuY2FsbCh0aGlzLEIsQSl9LGFkanVzdFdpZHRoQW5jaG9yOmZ1bmN0aW9uKEIsQSl7cmV0dXJuIEI/Qi1BLmdldFBvc2l0aW9uKHRydWUpWzBdOkJ9LGFkanVzdEhlaWdodEFuY2hvcjpmdW5jdGlvbihCLEEpe3JldHVybiBCP0ItQS5nZXRQb3NpdGlvbih0cnVlKVsxXTpCfX0pO0V4dC5Db250YWluZXIuTEFZT1VUU1siYWJzb2x1dGUiXT1FeHQubGF5b3V0LkFic29sdXRlTGF5b3V0Ow0KRXh0LlZpZXdwb3J0PUV4dC5leHRlbmQoRXh0LkNvbnRhaW5lcix7aW5pdENvbXBvbmVudDpmdW5jdGlvbigpe0V4dC5WaWV3cG9ydC5zdXBlcmNsYXNzLmluaXRDb21wb25lbnQuY2FsbCh0aGlzKTtkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaHRtbCIpWzBdLmNsYXNzTmFtZSs9IiB4LXZpZXdwb3J0Ijt0aGlzLmVsPUV4dC5nZXRCb2R5KCk7dGhpcy5lbC5zZXRIZWlnaHQ9RXh0LmVtcHR5Rm47dGhpcy5lbC5zZXRXaWR0aD1FeHQuZW1wdHlGbjt0aGlzLmVsLnNldFNpemU9RXh0LmVtcHR5Rm47dGhpcy5lbC5kb20uc2Nyb2xsPSJubyI7dGhpcy5hbGxvd0RvbU1vdmU9ZmFsc2U7dGhpcy5hdXRvV2lkdGg9dHJ1ZTt0aGlzLmF1dG9IZWlnaHQ9dHJ1ZTtFeHQuRXZlbnRNYW5hZ2VyLm9uV2luZG93UmVzaXplKHRoaXMuZmlyZVJlc2l6ZSx0aGlzKTt0aGlzLnJlbmRlclRvPXRoaXMuZWx9LGZpcmVSZXNpemU6ZnVuY3Rpb24oQSxCKXt0aGlzLmZpcmVFdmVudCgicmVzaXplIix0aGlzLEEsQixBLEIpfX0pO0V4dC5yZWcoInZpZXdwb3J0IixFeHQuVmlld3BvcnQpOw0KRXh0LlBhbmVsPUV4dC5leHRlbmQoRXh0LkNvbnRhaW5lcix7YmFzZUNsczoieC1wYW5lbCIsY29sbGFwc2VkQ2xzOiJ4LXBhbmVsLWNvbGxhcHNlZCIsbWFza0Rpc2FibGVkOnRydWUsYW5pbUNvbGxhcHNlOkV4dC5lbmFibGVGeCxoZWFkZXJBc1RleHQ6dHJ1ZSxidXR0b25BbGlnbjoicmlnaHQiLGNvbGxhcHNlZDpmYWxzZSxjb2xsYXBzZUZpcnN0OnRydWUsbWluQnV0dG9uV2lkdGg6NzUsZWxlbWVudHM6ImJvZHkiLHRvb2xUYXJnZXQ6ImhlYWRlciIsY29sbGFwc2VFbDoiYndyYXAiLHNsaWRlQW5jaG9yOiJ0IixkZWZlckhlaWdodDp0cnVlLGV4cGFuZERlZmF1bHRzOntkdXJhdGlvbjowLjI1fSxjb2xsYXBzZURlZmF1bHRzOntkdXJhdGlvbjowLjI1fSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7RXh0LlBhbmVsLnN1cGVyY2xhc3MuaW5pdENvbXBvbmVudC5jYWxsKHRoaXMpO3RoaXMuYWRkRXZlbnRzKCJib2R5cmVzaXplIiwidGl0bGVjaGFuZ2UiLCJjb2xsYXBzZSIsImV4cGFuZCIsImJlZm9yZWNvbGxhcHNlIiwiYmVmb3JlZXhwYW5kIiwiYmVmb3JlY2xvc2UiLCJjbG9zZSIsImFjdGl2YXRlIiwiZGVhY3RpdmF0ZSIpO2lmKHRoaXMudGJhcil7dGhpcy5lbGVtZW50cys9Iix0YmFyIjtpZih0eXBlb2YgdGhpcy50YmFyPT0ib2JqZWN0Iil7dGhpcy50b3BUb29sYmFyPXRoaXMudGJhcn1kZWxldGUgdGhpcy50YmFyfWlmKHRoaXMuYmJhcil7dGhpcy5lbGVtZW50cys9IixiYmFyIjtpZih0eXBlb2YgdGhpcy5iYmFyPT0ib2JqZWN0Iil7dGhpcy5ib3R0b21Ub29sYmFyPXRoaXMuYmJhcn1kZWxldGUgdGhpcy5iYmFyfWlmKHRoaXMuaGVhZGVyPT09dHJ1ZSl7dGhpcy5lbGVtZW50cys9IixoZWFkZXIiO2RlbGV0ZSB0aGlzLmhlYWRlcn1lbHNle2lmKHRoaXMudGl0bGUmJnRoaXMuaGVhZGVyIT09ZmFsc2Upe3RoaXMuZWxlbWVudHMrPSIsaGVhZGVyIn19aWYodGhpcy5mb290ZXI9PT10cnVlKXt0aGlzLmVsZW1lbnRzKz0iLGZvb3RlciI7ZGVsZXRlIHRoaXMuZm9vdGVyfWlmKHRoaXMuYnV0dG9ucyl7dmFyIEM9dGhpcy5idXR0b25zO3RoaXMuYnV0dG9ucz1bXTtmb3IodmFyIEI9MCxBPUMubGVuZ3RoO0I8QTtCKyspe2lmKENbQl0ucmVuZGVyKXt0aGlzLmJ1dHRvbnMucHVzaChDW0JdKX1lbHNle3RoaXMuYWRkQnV0dG9uKENbQl0pfX19aWYodGhpcy5hdXRvTG9hZCl7dGhpcy5vbigicmVuZGVyIix0aGlzLmRvQXV0b0xvYWQsdGhpcyx7ZGVsYXk6MTB9KX19LGNyZWF0ZUVsZW1lbnQ6ZnVuY3Rpb24oQSxDKXtpZih0aGlzW0FdKXtDLmFwcGVuZENoaWxkKHRoaXNbQV0uZG9tKTtyZXR1cm4gfWlmKEE9PT0iYndyYXAifHx0aGlzLmVsZW1lbnRzLmluZGV4T2YoQSkhPS0xKXtpZih0aGlzW0ErIkNmZyJdKXt0aGlzW0FdPUV4dC5mbHkoQykuY3JlYXRlQ2hpbGQodGhpc1tBKyJDZmciXSl9ZWxzZXt2YXIgQj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtCLmNsYXNzTmFtZT10aGlzW0ErIkNscyJdO3RoaXNbQV09RXh0LmdldChDLmFwcGVuZENoaWxkKEIpKX19fSxvblJlbmRlcjpmdW5jdGlvbihILEcpe0V4dC5QYW5lbC5zdXBlcmNsYXNzLm9uUmVuZGVyLmNhbGwodGhpcyxILEcpO3RoaXMuY3JlYXRlQ2xhc3NlcygpO2lmKHRoaXMuZWwpe3RoaXMuZWwuYWRkQ2xhc3ModGhpcy5iYXNlQ2xzKTt0aGlzLmhlYWRlcj10aGlzLmVsLmRvd24oIi4iK3RoaXMuaGVhZGVyQ2xzKTt0aGlzLmJ3cmFwPXRoaXMuZWwuZG93bigiLiIrdGhpcy5id3JhcENscyk7dmFyIE09dGhpcy5id3JhcD90aGlzLmJ3cmFwOnRoaXMuZWw7dGhpcy50YmFyPU0uZG93bigiLiIrdGhpcy50YmFyQ2xzKTt0aGlzLmJvZHk9TS5kb3duKCIuIit0aGlzLmJvZHlDbHMpO3RoaXMuYmJhcj1NLmRvd24oIi4iK3RoaXMuYmJhckNscyk7dGhpcy5mb290ZXI9TS5kb3duKCIuIit0aGlzLmZvb3RlckNscyk7dGhpcy5mcm9tTWFya3VwPXRydWV9ZWxzZXt0aGlzLmVsPUguY3JlYXRlQ2hpbGQoe2lkOnRoaXMuaWQsY2xzOnRoaXMuYmFzZUNsc30sRyl9dmFyIEE9dGhpcy5lbCxLPUEuZG9tO2lmKHRoaXMuY2xzKXt0aGlzLmVsLmFkZENsYXNzKHRoaXMuY2xzKX1pZih0aGlzLmJ1dHRvbnMpe3RoaXMuZWxlbWVudHMrPSIsZm9vdGVyIn1pZih0aGlzLmZyYW1lKXtBLmluc2VydEh0bWwoImFmdGVyQmVnaW4iLFN0cmluZy5mb3JtYXQoRXh0LkVsZW1lbnQuYm94TWFya3VwLHRoaXMuYmFzZUNscykpO3RoaXMuY3JlYXRlRWxlbWVudCgiaGVhZGVyIixLLmZpcnN0Q2hpbGQuZmlyc3RDaGlsZC5maXJzdENoaWxkKTt0aGlzLmNyZWF0ZUVsZW1lbnQoImJ3cmFwIixLKTt2YXIgTz10aGlzLmJ3cmFwLmRvbTt2YXIgRT1LLmNoaWxkTm9kZXNbMV0sQj1LLmNoaWxkTm9kZXNbMl07Ty5hcHBlbmRDaGlsZChFKTtPLmFwcGVuZENoaWxkKEIpO3ZhciBQPU8uZmlyc3RDaGlsZC5maXJzdENoaWxkLmZpcnN0Q2hpbGQ7dGhpcy5jcmVhdGVFbGVtZW50KCJ0YmFyIixQKTt0aGlzLmNyZWF0ZUVsZW1lbnQoImJvZHkiLFApO3RoaXMuY3JlYXRlRWxlbWVudCgiYmJhciIsUCk7dGhpcy5jcmVhdGVFbGVtZW50KCJmb290ZXIiLE8ubGFzdENoaWxkLmZpcnN0Q2hpbGQuZmlyc3RDaGlsZCk7aWYoIXRoaXMuZm9vdGVyKXt0aGlzLmJ3cmFwLmRvbS5sYXN0Q2hpbGQuY2xhc3NOYW1lKz0iIHgtcGFuZWwtbm9mb290ZXIifX1lbHNle3RoaXMuY3JlYXRlRWxlbWVudCgiaGVhZGVyIixLKTt0aGlzLmNyZWF0ZUVsZW1lbnQoImJ3cmFwIixLKTt2YXIgTz10aGlzLmJ3cmFwLmRvbTt0aGlzLmNyZWF0ZUVsZW1lbnQoInRiYXIiLE8pO3RoaXMuY3JlYXRlRWxlbWVudCgiYm9keSIsTyk7dGhpcy5jcmVhdGVFbGVtZW50KCJiYmFyIixPKTt0aGlzLmNyZWF0ZUVsZW1lbnQoImZvb3RlciIsTyk7aWYoIXRoaXMuaGVhZGVyKXt0aGlzLmJvZHkuYWRkQ2xhc3ModGhpcy5ib2R5Q2xzKyItbm9oZWFkZXIiKTtpZih0aGlzLnRiYXIpe3RoaXMudGJhci5hZGRDbGFzcyh0aGlzLnRiYXJDbHMrIi1ub2hlYWRlciIpfX19aWYodGhpcy5ib3JkZXI9PT1mYWxzZSl7dGhpcy5lbC5hZGRDbGFzcyh0aGlzLmJhc2VDbHMrIi1ub2JvcmRlciIpO3RoaXMuYm9keS5hZGRDbGFzcyh0aGlzLmJvZHlDbHMrIi1ub2JvcmRlciIpO2lmKHRoaXMuaGVhZGVyKXt0aGlzLmhlYWRlci5hZGRDbGFzcyh0aGlzLmhlYWRlckNscysiLW5vYm9yZGVyIil9aWYodGhpcy5mb290ZXIpe3RoaXMuZm9vdGVyLmFkZENsYXNzKHRoaXMuZm9vdGVyQ2xzKyItbm9ib3JkZXIiKX1pZih0aGlzLnRiYXIpe3RoaXMudGJhci5hZGRDbGFzcyh0aGlzLnRiYXJDbHMrIi1ub2JvcmRlciIpfWlmKHRoaXMuYmJhcil7dGhpcy5iYmFyLmFkZENsYXNzKHRoaXMuYmJhckNscysiLW5vYm9yZGVyIil9fWlmKHRoaXMuYm9keUJvcmRlcj09PWZhbHNlKXt0aGlzLmJvZHkuYWRkQ2xhc3ModGhpcy5ib2R5Q2xzKyItbm9ib3JkZXIiKX1pZih0aGlzLmJvZHlTdHlsZSl7dGhpcy5ib2R5LmFwcGx5U3R5bGVzKHRoaXMuYm9keVN0eWxlKX10aGlzLmJ3cmFwLmVuYWJsZURpc3BsYXlNb2RlKCJibG9jayIpO2lmKHRoaXMuaGVhZGVyKXt0aGlzLmhlYWRlci51bnNlbGVjdGFibGUoKTtpZih0aGlzLmhlYWRlckFzVGV4dCl7dGhpcy5oZWFkZXIuZG9tLmlubmVySFRNTD0iPHNwYW4gY2xhc3M9XCIiK3RoaXMuaGVhZGVyVGV4dENscysiXCI+Iit0aGlzLmhlYWRlci5kb20uaW5uZXJIVE1MKyI8L3NwYW4+IjtpZih0aGlzLmljb25DbHMpe3RoaXMuc2V0SWNvbkNsYXNzKHRoaXMuaWNvbkNscyl9fX1pZih0aGlzLmZsb2F0aW5nKXt0aGlzLm1ha2VGbG9hdGluZyh0aGlzLmZsb2F0aW5nKX1pZih0aGlzLmNvbGxhcHNpYmxlKXt0aGlzLnRvb2xzPXRoaXMudG9vbHM/dGhpcy50b29scy5zbGljZSgwKTpbXTtpZighdGhpcy5oaWRlQ29sbGFwc2VUb29sKXt0aGlzLnRvb2xzW3RoaXMuY29sbGFwc2VGaXJzdD8idW5zaGlmdCI6InB1c2giXSh7aWQ6InRvZ2dsZSIsaGFuZGxlcjp0aGlzLnRvZ2dsZUNvbGxhcHNlLHNjb3BlOnRoaXN9KX1pZih0aGlzLnRpdGxlQ29sbGFwc2UmJnRoaXMuaGVhZGVyKXt0aGlzLmhlYWRlci5vbigiY2xpY2siLHRoaXMudG9nZ2xlQ29sbGFwc2UsdGhpcyk7dGhpcy5oZWFkZXIuc2V0U3R5bGUoImN1cnNvciIsInBvaW50ZXIiKX19aWYodGhpcy50b29scyl7dmFyIEo9dGhpcy50b29sczt0aGlzLnRvb2xzPXt9O3RoaXMuYWRkVG9vbC5hcHBseSh0aGlzLEopfWVsc2V7dGhpcy50b29scz17fX1pZih0aGlzLmJ1dHRvbnMmJnRoaXMuYnV0dG9ucy5sZW5ndGg+MCl7dmFyIEQ9dGhpcy5mb290ZXIuY3JlYXRlQ2hpbGQoe2NsczoieC1wYW5lbC1idG5zLWN0Iixjbjp7Y2xzOiJ4LXBhbmVsLWJ0bnMgeC1wYW5lbC1idG5zLSIrdGhpcy5idXR0b25BbGlnbixodG1sOiI8dGFibGUgY2VsbHNwYWNpbmc9XCIwXCI+PHRib2R5Pjx0cj48L3RyPjwvdGJvZHk+PC90YWJsZT48ZGl2IGNsYXNzPVwieC1jbGVhclwiPjwvZGl2PiJ9fSxudWxsLHRydWUpO3ZhciBMPUQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRyIilbMF07Zm9yKHZhciBGPTAsST10aGlzLmJ1dHRvbnMubGVuZ3RoO0Y8STtGKyspe3ZhciBOPXRoaXMuYnV0dG9uc1tGXTt2YXIgQz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZCIpO0MuY2xhc3NOYW1lPSJ4LXBhbmVsLWJ0bi10ZCI7Ti5yZW5kZXIoTC5hcHBlbmRDaGlsZChDKSl9fWlmKHRoaXMudGJhciYmdGhpcy50b3BUb29sYmFyKXtpZihFeHQuaXNBcnJheSh0aGlzLnRvcFRvb2xiYXIpKXt0aGlzLnRvcFRvb2xiYXI9bmV3IEV4dC5Ub29sYmFyKHRoaXMudG9wVG9vbGJhcil9dGhpcy50b3BUb29sYmFyLnJlbmRlcih0aGlzLnRiYXIpfWlmKHRoaXMuYmJhciYmdGhpcy5ib3R0b21Ub29sYmFyKXtpZihFeHQuaXNBcnJheSh0aGlzLmJvdHRvbVRvb2xiYXIpKXt0aGlzLmJvdHRvbVRvb2xiYXI9bmV3IEV4dC5Ub29sYmFyKHRoaXMuYm90dG9tVG9vbGJhcil9dGhpcy5ib3R0b21Ub29sYmFyLnJlbmRlcih0aGlzLmJiYXIpfX0sc2V0SWNvbkNsYXNzOmZ1bmN0aW9uKEIpe3ZhciBBPXRoaXMuaWNvbkNsczt0aGlzLmljb25DbHM9QjtpZih0aGlzLnJlbmRlcmVkJiZ0aGlzLmhlYWRlcil7aWYodGhpcy5mcmFtZSl7dGhpcy5oZWFkZXIuYWRkQ2xhc3MoIngtcGFuZWwtaWNvbiIpO3RoaXMuaGVhZGVyLnJlcGxhY2VDbGFzcyhBLHRoaXMuaWNvbkNscyl9ZWxzZXt2YXIgRD10aGlzLmhlYWRlci5kb207dmFyIEM9RC5maXJzdENoaWxkJiZTdHJpbmcoRC5maXJzdENoaWxkLnRhZ05hbWUpLnRvTG93ZXJDYXNlKCk9PSJpbWciP0QuZmlyc3RDaGlsZDpudWxsO2lmKEMpe0V4dC5mbHkoQykucmVwbGFjZUNsYXNzKEEsdGhpcy5pY29uQ2xzKX1lbHNle0V4dC5Eb21IZWxwZXIuaW5zZXJ0QmVmb3JlKEQuZmlyc3RDaGlsZCx7dGFnOiJpbWciLHNyYzpFeHQuQkxBTktfSU1BR0VfVVJMLGNsczoieC1wYW5lbC1pbmxpbmUtaWNvbiAiK3RoaXMuaWNvbkNsc30pfX19fSxtYWtlRmxvYXRpbmc6ZnVuY3Rpb24oQSl7dGhpcy5mbG9hdGluZz10cnVlO3RoaXMuZWw9bmV3IEV4dC5MYXllcih0eXBlb2YgQT09Im9iamVjdCI/QTp7c2hhZG93OnRoaXMuc2hhZG93IT09dW5kZWZpbmVkP3RoaXMuc2hhZG93OiJzaWRlcyIsc2hhZG93T2Zmc2V0OnRoaXMuc2hhZG93T2Zmc2V0LGNvbnN0cmFpbjpmYWxzZSxzaGltOnRoaXMuc2hpbT09PWZhbHNlP2ZhbHNlOnVuZGVmaW5lZH0sdGhpcy5lbCl9LGdldFRvcFRvb2xiYXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b3BUb29sYmFyfSxnZXRCb3R0b21Ub29sYmFyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYm90dG9tVG9vbGJhcn0sYWRkQnV0dG9uOmZ1bmN0aW9uKEEsRCxDKXt2YXIgRT17aGFuZGxlcjpELHNjb3BlOkMsbWluV2lkdGg6dGhpcy5taW5CdXR0b25XaWR0aCxoaWRlUGFyZW50OnRydWV9O2lmKHR5cGVvZiBBPT0ic3RyaW5nIil7RS50ZXh0PUF9ZWxzZXtFeHQuYXBwbHkoRSxBKX12YXIgQj1uZXcgRXh0LkJ1dHRvbihFKTtCLm93bmVyQ3Q9dGhpcztpZighdGhpcy5idXR0b25zKXt0aGlzLmJ1dHRvbnM9W119dGhpcy5idXR0b25zLnB1c2goQik7cmV0dXJuIEJ9LGFkZFRvb2w6ZnVuY3Rpb24oKXtpZighdGhpc1t0aGlzLnRvb2xUYXJnZXRdKXtyZXR1cm4gfWlmKCF0aGlzLnRvb2xUZW1wbGF0ZSl7dmFyIEY9bmV3IEV4dC5UZW1wbGF0ZSgiPGRpdiBjbGFzcz1cIngtdG9vbCB4LXRvb2wte2lkfVwiPiYjMTYwOzwvZGl2PiIpO0YuZGlzYWJsZUZvcm1hdHM9dHJ1ZTtGLmNvbXBpbGUoKTtFeHQuUGFuZWwucHJvdG90eXBlLnRvb2xUZW1wbGF0ZT1GfWZvcih2YXIgRT0wLEM9YXJndW1lbnRzLEI9Qy5sZW5ndGg7RTxCO0UrKyl7dmFyIEE9Q1tFXSxHPSJ4LXRvb2wtIitBLmlkKyItb3ZlciI7dmFyIEQ9dGhpcy50b29sVGVtcGxhdGUuaW5zZXJ0Rmlyc3QodGhpc1t0aGlzLnRvb2xUYXJnZXRdLEEsdHJ1ZSk7dGhpcy50b29sc1tBLmlkXT1EO0QuZW5hYmxlRGlzcGxheU1vZGUoImJsb2NrIik7RC5vbigiY2xpY2siLHRoaXMuY3JlYXRlVG9vbEhhbmRsZXIoRCxBLEcsdGhpcykpO2lmKEEub24pe0Qub24oQS5vbil9aWYoQS5oaWRkZW4pe0QuaGlkZSgpfWlmKEEucXRpcCl7aWYodHlwZW9mIEEucXRpcD09Im9iamVjdCIpe0V4dC5RdWlja1RpcHMucmVnaXN0ZXIoRXh0LmFwcGx5KHt0YXJnZXQ6RC5pZH0sQS5xdGlwKSl9ZWxzZXtELmRvbS5xdGlwPUEucXRpcH19RC5hZGRDbGFzc09uT3ZlcihHKX19LG9uU2hvdzpmdW5jdGlvbigpe2lmKHRoaXMuZmxvYXRpbmcpe3JldHVybiB0aGlzLmVsLnNob3coKX1FeHQuUGFuZWwuc3VwZXJjbGFzcy5vblNob3cuY2FsbCh0aGlzKX0sb25IaWRlOmZ1bmN0aW9uKCl7aWYodGhpcy5mbG9hdGluZyl7cmV0dXJuIHRoaXMuZWwuaGlkZSgpfUV4dC5QYW5lbC5zdXBlcmNsYXNzLm9uSGlkZS5jYWxsKHRoaXMpfSxjcmVhdGVUb29sSGFuZGxlcjpmdW5jdGlvbihDLEEsRCxCKXtyZXR1cm4gZnVuY3Rpb24oRSl7Qy5yZW1vdmVDbGFzcyhEKTtFLnN0b3BFdmVudCgpO2lmKEEuaGFuZGxlcil7QS5oYW5kbGVyLmNhbGwoQS5zY29wZXx8QyxFLEMsQil9fX0sYWZ0ZXJSZW5kZXI6ZnVuY3Rpb24oKXtpZih0aGlzLmZyb21NYXJrdXAmJnRoaXMuaGVpZ2h0PT09dW5kZWZpbmVkJiYhdGhpcy5hdXRvSGVpZ2h0KXt0aGlzLmhlaWdodD10aGlzLmVsLmdldEhlaWdodCgpfWlmKHRoaXMuZmxvYXRpbmcmJiF0aGlzLmhpZGRlbiYmIXRoaXMuaW5pdEhpZGRlbil7dGhpcy5lbC5zaG93KCl9aWYodGhpcy50aXRsZSl7dGhpcy5zZXRUaXRsZSh0aGlzLnRpdGxlKX10aGlzLnNldEF1dG9TY3JvbGwoKTtpZih0aGlzLmh0bWwpe3RoaXMuYm9keS51cGRhdGUodHlwZW9mIHRoaXMuaHRtbD09Im9iamVjdCI/RXh0LkRvbUhlbHBlci5tYXJrdXAodGhpcy5odG1sKTp0aGlzLmh0bWwpO2RlbGV0ZSB0aGlzLmh0bWx9aWYodGhpcy5jb250ZW50RWwpe3ZhciBBPUV4dC5nZXREb20odGhpcy5jb250ZW50RWwpO0V4dC5mbHkoQSkucmVtb3ZlQ2xhc3MoWyJ4LWhpZGRlbiIsIngtaGlkZS1kaXNwbGF5Il0pO3RoaXMuYm9keS5kb20uYXBwZW5kQ2hpbGQoQSl9aWYodGhpcy5jb2xsYXBzZWQpe3RoaXMuY29sbGFwc2VkPWZhbHNlO3RoaXMuY29sbGFwc2UoZmFsc2UpfUV4dC5QYW5lbC5zdXBlcmNsYXNzLmFmdGVyUmVuZGVyLmNhbGwodGhpcyk7dGhpcy5pbml0RXZlbnRzKCl9LHNldEF1dG9TY3JvbGw6ZnVuY3Rpb24oKXtpZih0aGlzLnJlbmRlcmVkJiZ0aGlzLmF1dG9TY3JvbGwpe3RoaXMuYm9keS5zZXRPdmVyZmxvdygiYXV0byIpfX0sZ2V0S2V5TWFwOmZ1bmN0aW9uKCl7aWYoIXRoaXMua2V5TWFwKXt0aGlzLmtleU1hcD1uZXcgRXh0LktleU1hcCh0aGlzLmVsLHRoaXMua2V5cyl9cmV0dXJuIHRoaXMua2V5TWFwfSxpbml0RXZlbnRzOmZ1bmN0aW9uKCl7aWYodGhpcy5rZXlzKXt0aGlzLmdldEtleU1hcCgpfWlmKHRoaXMuZHJhZ2dhYmxlKXt0aGlzLmluaXREcmFnZ2FibGUoKX19LGluaXREcmFnZ2FibGU6ZnVuY3Rpb24oKXt0aGlzLmRkPW5ldyBFeHQuUGFuZWwuREQodGhpcyx0eXBlb2YgdGhpcy5kcmFnZ2FibGU9PSJib29sZWFuIj9udWxsOnRoaXMuZHJhZ2dhYmxlKX0sYmVmb3JlRWZmZWN0OmZ1bmN0aW9uKCl7aWYodGhpcy5mbG9hdGluZyl7dGhpcy5lbC5iZWZvcmVBY3Rpb24oKX10aGlzLmVsLmFkZENsYXNzKCJ4LXBhbmVsLWFuaW1hdGVkIil9LGFmdGVyRWZmZWN0OmZ1bmN0aW9uKCl7dGhpcy5zeW5jU2hhZG93KCk7dGhpcy5lbC5yZW1vdmVDbGFzcygieC1wYW5lbC1hbmltYXRlZCIpfSxjcmVhdGVFZmZlY3Q6ZnVuY3Rpb24oQixBLEMpe3ZhciBEPXtzY29wZTpDLGJsb2NrOnRydWV9O2lmKEI9PT10cnVlKXtELmNhbGxiYWNrPUE7cmV0dXJuIER9ZWxzZXtpZighQi5jYWxsYmFjayl7RC5jYWxsYmFjaz1BfWVsc2V7RC5jYWxsYmFjaz1mdW5jdGlvbigpe0EuY2FsbChDKTtFeHQuY2FsbGJhY2soQi5jYWxsYmFjayxCLnNjb3BlKX19fXJldHVybiBFeHQuYXBwbHlJZihELEIpfSxjb2xsYXBzZTpmdW5jdGlvbihCKXtpZih0aGlzLmNvbGxhcHNlZHx8dGhpcy5lbC5oYXNGeEJsb2NrKCl8fHRoaXMuZmlyZUV2ZW50KCJiZWZvcmVjb2xsYXBzZSIsdGhpcyxCKT09PWZhbHNlKXtyZXR1cm4gfXZhciBBPUI9PT10cnVlfHwoQiE9PWZhbHNlJiZ0aGlzLmFuaW1Db2xsYXBzZSk7dGhpcy5iZWZvcmVFZmZlY3QoKTt0aGlzLm9uQ29sbGFwc2UoQSxCKTtyZXR1cm4gdGhpc30sb25Db2xsYXBzZTpmdW5jdGlvbihBLEIpe2lmKEEpe3RoaXNbdGhpcy5jb2xsYXBzZUVsXS5zbGlkZU91dCh0aGlzLnNsaWRlQW5jaG9yLEV4dC5hcHBseSh0aGlzLmNyZWF0ZUVmZmVjdChCfHx0cnVlLHRoaXMuYWZ0ZXJDb2xsYXBzZSx0aGlzKSx0aGlzLmNvbGxhcHNlRGVmYXVsdHMpKX1lbHNle3RoaXNbdGhpcy5jb2xsYXBzZUVsXS5oaWRlKCk7dGhpcy5hZnRlckNvbGxhcHNlKCl9fSxhZnRlckNvbGxhcHNlOmZ1bmN0aW9uKCl7dGhpcy5jb2xsYXBzZWQ9dHJ1ZTt0aGlzLmVsLmFkZENsYXNzKHRoaXMuY29sbGFwc2VkQ2xzKTt0aGlzLmFmdGVyRWZmZWN0KCk7dGhpcy5maXJlRXZlbnQoImNvbGxhcHNlIix0aGlzKX0sZXhwYW5kOmZ1bmN0aW9uKEIpe2lmKCF0aGlzLmNvbGxhcHNlZHx8dGhpcy5lbC5oYXNGeEJsb2NrKCl8fHRoaXMuZmlyZUV2ZW50KCJiZWZvcmVleHBhbmQiLHRoaXMsQik9PT1mYWxzZSl7cmV0dXJuIH12YXIgQT1CPT09dHJ1ZXx8KEIhPT1mYWxzZSYmdGhpcy5hbmltQ29sbGFwc2UpO3RoaXMuZWwucmVtb3ZlQ2xhc3ModGhpcy5jb2xsYXBzZWRDbHMpO3RoaXMuYmVmb3JlRWZmZWN0KCk7dGhpcy5vbkV4cGFuZChBLEIpO3JldHVybiB0aGlzfSxvbkV4cGFuZDpmdW5jdGlvbihBLEIpe2lmKEEpe3RoaXNbdGhpcy5jb2xsYXBzZUVsXS5zbGlkZUluKHRoaXMuc2xpZGVBbmNob3IsRXh0LmFwcGx5KHRoaXMuY3JlYXRlRWZmZWN0KEJ8fHRydWUsdGhpcy5hZnRlckV4cGFuZCx0aGlzKSx0aGlzLmV4cGFuZERlZmF1bHRzKSl9ZWxzZXt0aGlzW3RoaXMuY29sbGFwc2VFbF0uc2hvdygpO3RoaXMuYWZ0ZXJFeHBhbmQoKX19LGFmdGVyRXhwYW5kOmZ1bmN0aW9uKCl7dGhpcy5jb2xsYXBzZWQ9ZmFsc2U7dGhpcy5hZnRlckVmZmVjdCgpO3RoaXMuZmlyZUV2ZW50KCJleHBhbmQiLHRoaXMpfSx0b2dnbGVDb2xsYXBzZTpmdW5jdGlvbihBKXt0aGlzW3RoaXMuY29sbGFwc2VkPyJleHBhbmQiOiJjb2xsYXBzZSJdKEEpO3JldHVybiB0aGlzfSxvbkRpc2FibGU6ZnVuY3Rpb24oKXtpZih0aGlzLnJlbmRlcmVkJiZ0aGlzLm1hc2tEaXNhYmxlZCl7dGhpcy5lbC5tYXNrKCl9RXh0LlBhbmVsLnN1cGVyY2xhc3Mub25EaXNhYmxlLmNhbGwodGhpcyl9LG9uRW5hYmxlOmZ1bmN0aW9uKCl7aWYodGhpcy5yZW5kZXJlZCYmdGhpcy5tYXNrRGlzYWJsZWQpe3RoaXMuZWwudW5tYXNrKCl9RXh0LlBhbmVsLnN1cGVyY2xhc3Mub25FbmFibGUuY2FsbCh0aGlzKX0sb25SZXNpemU6ZnVuY3Rpb24oQSxCKXtpZihBIT09dW5kZWZpbmVkfHxCIT09dW5kZWZpbmVkKXtpZighdGhpcy5jb2xsYXBzZWQpe2lmKHR5cGVvZiBBPT0ibnVtYmVyIil7dGhpcy5ib2R5LnNldFdpZHRoKHRoaXMuYWRqdXN0Qm9keVdpZHRoKEEtdGhpcy5nZXRGcmFtZVdpZHRoKCkpKX1lbHNle2lmKEE9PSJhdXRvIil7dGhpcy5ib2R5LnNldFdpZHRoKEEpfX1pZih0eXBlb2YgQj09Im51bWJlciIpe3RoaXMuYm9keS5zZXRIZWlnaHQodGhpcy5hZGp1c3RCb2R5SGVpZ2h0KEItdGhpcy5nZXRGcmFtZUhlaWdodCgpKSl9ZWxzZXtpZihCPT0iYXV0byIpe3RoaXMuYm9keS5zZXRIZWlnaHQoQil9fX1lbHNle3RoaXMucXVldWVkQm9keVNpemU9e3dpZHRoOkEsaGVpZ2h0OkJ9O2lmKCF0aGlzLnF1ZXVlZEV4cGFuZCYmdGhpcy5hbGxvd1F1ZXVlZEV4cGFuZCE9PWZhbHNlKXt0aGlzLnF1ZXVlZEV4cGFuZD10cnVlO3RoaXMub24oImV4cGFuZCIsZnVuY3Rpb24oKXtkZWxldGUgdGhpcy5xdWV1ZWRFeHBhbmQ7dGhpcy5vblJlc2l6ZSh0aGlzLnF1ZXVlZEJvZHlTaXplLndpZHRoLHRoaXMucXVldWVkQm9keVNpemUuaGVpZ2h0KTt0aGlzLmRvTGF5b3V0KCl9LHRoaXMse3NpbmdsZTp0cnVlfSl9fXRoaXMuZmlyZUV2ZW50KCJib2R5cmVzaXplIix0aGlzLEEsQil9dGhpcy5zeW5jU2hhZG93KCl9LGFkanVzdEJvZHlIZWlnaHQ6ZnVuY3Rpb24oQSl7cmV0dXJuIEF9LGFkanVzdEJvZHlXaWR0aDpmdW5jdGlvbihBKXtyZXR1cm4gQX0sb25Qb3NpdGlvbjpmdW5jdGlvbigpe3RoaXMuc3luY1NoYWRvdygpfSxvbkRlc3Ryb3k6ZnVuY3Rpb24oKXtpZih0aGlzLnRvb2xzKXtmb3IodmFyIEIgaW4gdGhpcy50b29scyl7RXh0LmRlc3Ryb3kodGhpcy50b29sc1tCXSl9fWlmKHRoaXMuYnV0dG9ucyl7Zm9yKHZhciBBIGluIHRoaXMuYnV0dG9ucyl7RXh0LmRlc3Ryb3kodGhpcy5idXR0b25zW0FdKX19RXh0LmRlc3Ryb3kodGhpcy50b3BUb29sYmFyLHRoaXMuYm90dG9tVG9vbGJhcik7RXh0LlBhbmVsLnN1cGVyY2xhc3Mub25EZXN0cm95LmNhbGwodGhpcyl9LGdldEZyYW1lV2lkdGg6ZnVuY3Rpb24oKXt2YXIgQj10aGlzLmVsLmdldEZyYW1lV2lkdGgoImxyIik7aWYodGhpcy5mcmFtZSl7dmFyIEE9dGhpcy5id3JhcC5kb20uZmlyc3RDaGlsZDtCKz0oRXh0LmZseShBKS5nZXRGcmFtZVdpZHRoKCJsIikrRXh0LmZseShBLmZpcnN0Q2hpbGQpLmdldEZyYW1lV2lkdGgoInIiKSk7dmFyIEM9dGhpcy5id3JhcC5kb20uZmlyc3RDaGlsZC5maXJzdENoaWxkLmZpcnN0Q2hpbGQ7Qis9RXh0LmZseShDKS5nZXRGcmFtZVdpZHRoKCJsciIpfXJldHVybiBCfSxnZXRGcmFtZUhlaWdodDpmdW5jdGlvbigpe3ZhciBBPXRoaXMuZWwuZ2V0RnJhbWVXaWR0aCgidGIiKTtBKz0odGhpcy50YmFyP3RoaXMudGJhci5nZXRIZWlnaHQoKTowKSsodGhpcy5iYmFyP3RoaXMuYmJhci5nZXRIZWlnaHQoKTowKTtpZih0aGlzLmZyYW1lKXt2YXIgQz10aGlzLmVsLmRvbS5maXJzdENoaWxkO3ZhciBEPXRoaXMuYndyYXAuZG9tLmxhc3RDaGlsZDtBKz0oQy5vZmZzZXRIZWlnaHQrRC5vZmZzZXRIZWlnaHQpO3ZhciBCPXRoaXMuYndyYXAuZG9tLmZpcnN0Q2hpbGQuZmlyc3RDaGlsZC5maXJzdENoaWxkO0ErPUV4dC5mbHkoQikuZ2V0RnJhbWVXaWR0aCgidGIiKX1lbHNle0ErPSh0aGlzLmhlYWRlcj90aGlzLmhlYWRlci5nZXRIZWlnaHQoKTowKSsodGhpcy5mb290ZXI/dGhpcy5mb290ZXIuZ2V0SGVpZ2h0KCk6MCl9cmV0dXJuIEF9LGdldElubmVyV2lkdGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTaXplKCkud2lkdGgtdGhpcy5nZXRGcmFtZVdpZHRoKCl9LGdldElubmVySGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0U2l6ZSgpLmhlaWdodC10aGlzLmdldEZyYW1lSGVpZ2h0KCl9LHN5bmNTaGFkb3c6ZnVuY3Rpb24oKXtpZih0aGlzLmZsb2F0aW5nKXt0aGlzLmVsLnN5bmModHJ1ZSl9fSxnZXRMYXlvdXRUYXJnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ib2R5fSxzZXRUaXRsZTpmdW5jdGlvbihCLEEpe3RoaXMudGl0bGU9QjtpZih0aGlzLmhlYWRlciYmdGhpcy5oZWFkZXJBc1RleHQpe3RoaXMuaGVhZGVyLmNoaWxkKCJzcGFuIikudXBkYXRlKEIpfWlmKEEpe3RoaXMuc2V0SWNvbkNsYXNzKEEpfXRoaXMuZmlyZUV2ZW50KCJ0aXRsZWNoYW5nZSIsdGhpcyxCKTtyZXR1cm4gdGhpc30sZ2V0VXBkYXRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJvZHkuZ2V0VXBkYXRlcigpfSxsb2FkOmZ1bmN0aW9uKCl7dmFyIEE9dGhpcy5ib2R5LmdldFVwZGF0ZXIoKTtBLnVwZGF0ZS5hcHBseShBLGFyZ3VtZW50cyk7cmV0dXJuIHRoaXN9LGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXtFeHQuRWxlbWVudC51bmNhY2hlKHRoaXMuaGVhZGVyLHRoaXMudGJhcix0aGlzLmJiYXIsdGhpcy5mb290ZXIsdGhpcy5ib2R5KX0sY3JlYXRlQ2xhc3NlczpmdW5jdGlvbigpe3RoaXMuaGVhZGVyQ2xzPXRoaXMuYmFzZUNscysiLWhlYWRlciI7dGhpcy5oZWFkZXJUZXh0Q2xzPXRoaXMuYmFzZUNscysiLWhlYWRlci10ZXh0Ijt0aGlzLmJ3cmFwQ2xzPXRoaXMuYmFzZUNscysiLWJ3cmFwIjt0aGlzLnRiYXJDbHM9dGhpcy5iYXNlQ2xzKyItdGJhciI7dGhpcy5ib2R5Q2xzPXRoaXMuYmFzZUNscysiLWJvZHkiO3RoaXMuYmJhckNscz10aGlzLmJhc2VDbHMrIi1iYmFyIjt0aGlzLmZvb3RlckNscz10aGlzLmJhc2VDbHMrIi1mb290ZXIifSxjcmVhdGVHaG9zdDpmdW5jdGlvbihBLEUsQil7dmFyIEQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7RC5jbGFzc05hbWU9IngtcGFuZWwtZ2hvc3QgIisoQT9BOiIiKTtpZih0aGlzLmhlYWRlcil7RC5hcHBlbmRDaGlsZCh0aGlzLmVsLmRvbS5maXJzdENoaWxkLmNsb25lTm9kZSh0cnVlKSl9RXh0LmZseShELmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInVsIikpKS5zZXRIZWlnaHQodGhpcy5id3JhcC5nZXRIZWlnaHQoKSk7RC5zdHlsZS53aWR0aD10aGlzLmVsLmRvbS5vZmZzZXRXaWR0aCsicHgiO2lmKCFCKXt0aGlzLmNvbnRhaW5lci5kb20uYXBwZW5kQ2hpbGQoRCl9ZWxzZXtFeHQuZ2V0RG9tKEIpLmFwcGVuZENoaWxkKEQpfWlmKEUhPT1mYWxzZSYmdGhpcy5lbC51c2VTaGltIT09ZmFsc2Upe3ZhciBDPW5ldyBFeHQuTGF5ZXIoe3NoYWRvdzpmYWxzZSx1c2VEaXNwbGF5OnRydWUsY29uc3RyYWluOmZhbHNlfSxEKTtDLnNob3coKTtyZXR1cm4gQ31lbHNle3JldHVybiBuZXcgRXh0LkVsZW1lbnQoRCl9fSxkb0F1dG9Mb2FkOmZ1bmN0aW9uKCl7dGhpcy5ib2R5LmxvYWQodHlwZW9mIHRoaXMuYXV0b0xvYWQ9PSJvYmplY3QiP3RoaXMuYXV0b0xvYWQ6e3VybDp0aGlzLmF1dG9Mb2FkfSl9fSk7RXh0LnJlZygicGFuZWwiLEV4dC5QYW5lbCk7DQpFeHQuV2luZG93PUV4dC5leHRlbmQoRXh0LlBhbmVsLHtiYXNlQ2xzOiJ4LXdpbmRvdyIscmVzaXphYmxlOnRydWUsZHJhZ2dhYmxlOnRydWUsY2xvc2FibGU6dHJ1ZSxjb25zdHJhaW46ZmFsc2UsY29uc3RyYWluSGVhZGVyOmZhbHNlLHBsYWluOmZhbHNlLG1pbmltaXphYmxlOmZhbHNlLG1heGltaXphYmxlOmZhbHNlLG1pbkhlaWdodDoxMDAsbWluV2lkdGg6MjAwLGV4cGFuZE9uU2hvdzp0cnVlLGNsb3NlQWN0aW9uOiJjbG9zZSIsY29sbGFwc2libGU6ZmFsc2UsaW5pdEhpZGRlbjp0cnVlLG1vbml0b3JSZXNpemU6dHJ1ZSxlbGVtZW50czoiaGVhZGVyLGJvZHkiLGZyYW1lOnRydWUsZmxvYXRpbmc6dHJ1ZSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7RXh0LldpbmRvdy5zdXBlcmNsYXNzLmluaXRDb21wb25lbnQuY2FsbCh0aGlzKTt0aGlzLmFkZEV2ZW50cygicmVzaXplIiwibWF4aW1pemUiLCJtaW5pbWl6ZSIsInJlc3RvcmUiKX0sZ2V0U3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gRXh0LmFwcGx5KEV4dC5XaW5kb3cuc3VwZXJjbGFzcy5nZXRTdGF0ZS5jYWxsKHRoaXMpfHx7fSx0aGlzLmdldEJveCgpKX0sb25SZW5kZXI6ZnVuY3Rpb24oQixBKXtFeHQuV2luZG93LnN1cGVyY2xhc3Mub25SZW5kZXIuY2FsbCh0aGlzLEIsQSk7aWYodGhpcy5wbGFpbil7dGhpcy5lbC5hZGRDbGFzcygieC13aW5kb3ctcGxhaW4iKX10aGlzLmZvY3VzRWw9dGhpcy5lbC5jcmVhdGVDaGlsZCh7dGFnOiJhIixocmVmOiIjIixjbHM6IngtZGxnLWZvY3VzIix0YWJJbmRleDoiLTEiLGh0bWw6IiYjMTYwOyJ9KTt0aGlzLmZvY3VzRWwuc3dhbGxvd0V2ZW50KCJjbGljayIsdHJ1ZSk7dGhpcy5wcm94eT10aGlzLmVsLmNyZWF0ZVByb3h5KCJ4LXdpbmRvdy1wcm94eSIpO3RoaXMucHJveHkuZW5hYmxlRGlzcGxheU1vZGUoImJsb2NrIik7aWYodGhpcy5tb2RhbCl7dGhpcy5tYXNrPXRoaXMuY29udGFpbmVyLmNyZWF0ZUNoaWxkKHtjbHM6ImV4dC1lbC1tYXNrIn0sdGhpcy5lbC5kb20pO3RoaXMubWFzay5lbmFibGVEaXNwbGF5TW9kZSgiYmxvY2siKTt0aGlzLm1hc2suaGlkZSgpfX0saW5pdEV2ZW50czpmdW5jdGlvbigpe0V4dC5XaW5kb3cuc3VwZXJjbGFzcy5pbml0RXZlbnRzLmNhbGwodGhpcyk7aWYodGhpcy5hbmltYXRlVGFyZ2V0KXt0aGlzLnNldEFuaW1hdGVUYXJnZXQodGhpcy5hbmltYXRlVGFyZ2V0KX1pZih0aGlzLnJlc2l6YWJsZSl7dGhpcy5yZXNpemVyPW5ldyBFeHQuUmVzaXphYmxlKHRoaXMuZWwse21pbldpZHRoOnRoaXMubWluV2lkdGgsbWluSGVpZ2h0OnRoaXMubWluSGVpZ2h0LGhhbmRsZXM6dGhpcy5yZXNpemVIYW5kbGVzfHwiYWxsIixwaW5uZWQ6dHJ1ZSxyZXNpemVFbGVtZW50OnRoaXMucmVzaXplckFjdGlvbn0pO3RoaXMucmVzaXplci53aW5kb3c9dGhpczt0aGlzLnJlc2l6ZXIub24oImJlZm9yZXJlc2l6ZSIsdGhpcy5iZWZvcmVSZXNpemUsdGhpcyl9aWYodGhpcy5kcmFnZ2FibGUpe3RoaXMuaGVhZGVyLmFkZENsYXNzKCJ4LXdpbmRvdy1kcmFnZ2FibGUiKX10aGlzLmluaXRUb29scygpO3RoaXMuZWwub24oIm1vdXNlZG93biIsdGhpcy50b0Zyb250LHRoaXMpO3RoaXMubWFuYWdlcj10aGlzLm1hbmFnZXJ8fEV4dC5XaW5kb3dNZ3I7dGhpcy5tYW5hZ2VyLnJlZ2lzdGVyKHRoaXMpO3RoaXMuaGlkZGVuPXRydWU7aWYodGhpcy5tYXhpbWl6ZWQpe3RoaXMubWF4aW1pemVkPWZhbHNlO3RoaXMubWF4aW1pemUoKX1pZih0aGlzLmNsb3NhYmxlKXt2YXIgQT10aGlzLmdldEtleU1hcCgpO0Eub24oMjcsdGhpcy5vbkVzYyx0aGlzKTtBLmRpc2FibGUoKX19LGluaXREcmFnZ2FibGU6ZnVuY3Rpb24oKXt0aGlzLmRkPW5ldyBFeHQuV2luZG93LkREKHRoaXMpfSxvbkVzYzpmdW5jdGlvbigpe3RoaXNbdGhpcy5jbG9zZUFjdGlvbl0oKX0sYmVmb3JlRGVzdHJveTpmdW5jdGlvbigpe0V4dC5kZXN0cm95KHRoaXMucmVzaXplcix0aGlzLmRkLHRoaXMucHJveHksdGhpcy5tYXNrKTtFeHQuV2luZG93LnN1cGVyY2xhc3MuYmVmb3JlRGVzdHJveS5jYWxsKHRoaXMpfSxvbkRlc3Ryb3k6ZnVuY3Rpb24oKXtpZih0aGlzLm1hbmFnZXIpe3RoaXMubWFuYWdlci51bnJlZ2lzdGVyKHRoaXMpfUV4dC5XaW5kb3cuc3VwZXJjbGFzcy5vbkRlc3Ryb3kuY2FsbCh0aGlzKX0saW5pdFRvb2xzOmZ1bmN0aW9uKCl7aWYodGhpcy5taW5pbWl6YWJsZSl7dGhpcy5hZGRUb29sKHtpZDoibWluaW1pemUiLGhhbmRsZXI6dGhpcy5taW5pbWl6ZS5jcmVhdGVEZWxlZ2F0ZSh0aGlzLFtdKX0pfWlmKHRoaXMubWF4aW1pemFibGUpe3RoaXMuYWRkVG9vbCh7aWQ6Im1heGltaXplIixoYW5kbGVyOnRoaXMubWF4aW1pemUuY3JlYXRlRGVsZWdhdGUodGhpcyxbXSl9KTt0aGlzLmFkZFRvb2woe2lkOiJyZXN0b3JlIixoYW5kbGVyOnRoaXMucmVzdG9yZS5jcmVhdGVEZWxlZ2F0ZSh0aGlzLFtdKSxoaWRkZW46dHJ1ZX0pO3RoaXMuaGVhZGVyLm9uKCJkYmxjbGljayIsdGhpcy50b2dnbGVNYXhpbWl6ZSx0aGlzKX1pZih0aGlzLmNsb3NhYmxlKXt0aGlzLmFkZFRvb2woe2lkOiJjbG9zZSIsaGFuZGxlcjp0aGlzW3RoaXMuY2xvc2VBY3Rpb25dLmNyZWF0ZURlbGVnYXRlKHRoaXMsW10pfSl9fSxyZXNpemVyQWN0aW9uOmZ1bmN0aW9uKCl7dmFyIEE9dGhpcy5wcm94eS5nZXRCb3goKTt0aGlzLnByb3h5LmhpZGUoKTt0aGlzLndpbmRvdy5oYW5kbGVSZXNpemUoQSk7cmV0dXJuIEF9LGJlZm9yZVJlc2l6ZTpmdW5jdGlvbigpe3RoaXMucmVzaXplci5taW5IZWlnaHQ9TWF0aC5tYXgodGhpcy5taW5IZWlnaHQsdGhpcy5nZXRGcmFtZUhlaWdodCgpKzQwKTt0aGlzLnJlc2l6ZXIubWluV2lkdGg9TWF0aC5tYXgodGhpcy5taW5XaWR0aCx0aGlzLmdldEZyYW1lV2lkdGgoKSs0MCk7dGhpcy5yZXNpemVCb3g9dGhpcy5lbC5nZXRCb3goKX0sdXBkYXRlSGFuZGxlczpmdW5jdGlvbigpe2lmKEV4dC5pc0lFJiZ0aGlzLnJlc2l6ZXIpe3RoaXMucmVzaXplci5zeW5jSGFuZGxlSGVpZ2h0KCk7dGhpcy5lbC5yZXBhaW50KCl9fSxoYW5kbGVSZXNpemU6ZnVuY3Rpb24oQil7dmFyIEE9dGhpcy5yZXNpemVCb3g7aWYoQS54IT1CLnh8fEEueSE9Qi55KXt0aGlzLnVwZGF0ZUJveChCKX1lbHNle3RoaXMuc2V0U2l6ZShCKX10aGlzLmZvY3VzKCk7dGhpcy51cGRhdGVIYW5kbGVzKCk7dGhpcy5zYXZlU3RhdGUoKTt0aGlzLmZpcmVFdmVudCgicmVzaXplIix0aGlzLEIud2lkdGgsQi5oZWlnaHQpfSxmb2N1czpmdW5jdGlvbigpe3ZhciBDPXRoaXMuZm9jdXNFbCxBPXRoaXMuZGVmYXVsdEJ1dHRvbixCPXR5cGVvZiBBO2lmKEIhPSJ1bmRlZmluZWQiKXtpZihCPT0ibnVtYmVyIil7Qz10aGlzLmJ1dHRvbnNbQV19ZWxzZXtpZihCPT0ic3RyaW5nIil7Qz1FeHQuZ2V0Q21wKEEpfWVsc2V7Qz1BfX19Qy5mb2N1cy5kZWZlcigxMCxDKX0sc2V0QW5pbWF0ZVRhcmdldDpmdW5jdGlvbihBKXtBPUV4dC5nZXQoQSk7dGhpcy5hbmltYXRlVGFyZ2V0PUF9LGJlZm9yZVNob3c6ZnVuY3Rpb24oKXtkZWxldGUgdGhpcy5lbC5sYXN0WFk7ZGVsZXRlIHRoaXMuZWwubGFzdExUO2lmKHRoaXMueD09PXVuZGVmaW5lZHx8dGhpcy55PT09dW5kZWZpbmVkKXt2YXIgQT10aGlzLmVsLmdldEFsaWduVG9YWSh0aGlzLmNvbnRhaW5lciwiYy1jIik7dmFyIEI9dGhpcy5lbC50cmFuc2xhdGVQb2ludHMoQVswXSxBWzFdKTt0aGlzLng9dGhpcy54PT09dW5kZWZpbmVkP0IubGVmdDp0aGlzLng7dGhpcy55PXRoaXMueT09PXVuZGVmaW5lZD9CLnRvcDp0aGlzLnl9dGhpcy5lbC5zZXRMZWZ0VG9wKHRoaXMueCx0aGlzLnkpO2lmKHRoaXMuZXhwYW5kT25TaG93KXt0aGlzLmV4cGFuZChmYWxzZSl9aWYodGhpcy5tb2RhbCl7RXh0LmdldEJvZHkoKS5hZGRDbGFzcygieC1ib2R5LW1hc2tlZCIpO3RoaXMubWFzay5zZXRTaXplKEV4dC5saWIuRG9tLmdldFZpZXdXaWR0aCh0cnVlKSxFeHQubGliLkRvbS5nZXRWaWV3SGVpZ2h0KHRydWUpKTt0aGlzLm1hc2suc2hvdygpfX0sc2hvdzpmdW5jdGlvbihDLEEsQil7aWYoIXRoaXMucmVuZGVyZWQpe3RoaXMucmVuZGVyKEV4dC5nZXRCb2R5KCkpfWlmKHRoaXMuaGlkZGVuPT09ZmFsc2Upe3RoaXMudG9Gcm9udCgpO3JldHVybiB9aWYodGhpcy5maXJlRXZlbnQoImJlZm9yZXNob3ciLHRoaXMpPT09ZmFsc2Upe3JldHVybiB9aWYoQSl7dGhpcy5vbigic2hvdyIsQSxCLHtzaW5nbGU6dHJ1ZX0pfXRoaXMuaGlkZGVuPWZhbHNlO2lmKEMhPT11bmRlZmluZWQpe3RoaXMuc2V0QW5pbWF0ZVRhcmdldChDKX10aGlzLmJlZm9yZVNob3coKTtpZih0aGlzLmFuaW1hdGVUYXJnZXQpe3RoaXMuYW5pbVNob3coKX1lbHNle3RoaXMuYWZ0ZXJTaG93KCl9fSxhZnRlclNob3c6ZnVuY3Rpb24oKXt0aGlzLnByb3h5LmhpZGUoKTt0aGlzLmVsLnNldFN0eWxlKCJkaXNwbGF5IiwiYmxvY2siKTt0aGlzLmVsLnNob3coKTtpZih0aGlzLm1heGltaXplZCl7dGhpcy5maXRDb250YWluZXIoKX1pZihFeHQuaXNNYWMmJkV4dC5pc0dlY2tvKXt0aGlzLmNhc2NhZGUodGhpcy5zZXRBdXRvU2Nyb2xsKX1pZih0aGlzLm1vbml0b3JSZXNpemV8fHRoaXMubW9kYWx8fHRoaXMuY29uc3RyYWlufHx0aGlzLmNvbnN0cmFpbkhlYWRlcil7RXh0LkV2ZW50TWFuYWdlci5vbldpbmRvd1Jlc2l6ZSh0aGlzLm9uV2luZG93UmVzaXplLHRoaXMpfXRoaXMuZG9Db25zdHJhaW4oKTtpZih0aGlzLmxheW91dCl7dGhpcy5kb0xheW91dCgpfWlmKHRoaXMua2V5TWFwKXt0aGlzLmtleU1hcC5lbmFibGUoKX10aGlzLnRvRnJvbnQoKTt0aGlzLnVwZGF0ZUhhbmRsZXMoKTt0aGlzLmZpcmVFdmVudCgic2hvdyIsdGhpcyl9LGFuaW1TaG93OmZ1bmN0aW9uKCl7dGhpcy5wcm94eS5zaG93KCk7dGhpcy5wcm94eS5zZXRCb3godGhpcy5hbmltYXRlVGFyZ2V0LmdldEJveCgpKTt0aGlzLnByb3h5LnNldE9wYWNpdHkoMCk7dmFyIEE9dGhpcy5nZXRCb3goZmFsc2UpO0EuY2FsbGJhY2s9dGhpcy5hZnRlclNob3c7QS5zY29wZT10aGlzO0EuZHVyYXRpb249MC4yNTtBLmVhc2luZz0iZWFzZU5vbmUiO0Eub3BhY2l0eT0wLjU7QS5ibG9jaz10cnVlO3RoaXMuZWwuc2V0U3R5bGUoImRpc3BsYXkiLCJub25lIik7dGhpcy5wcm94eS5zaGlmdChBKX0saGlkZTpmdW5jdGlvbihDLEEsQil7aWYodGhpcy5oaWRkZW58fHRoaXMuZmlyZUV2ZW50KCJiZWZvcmVoaWRlIix0aGlzKT09PWZhbHNlKXtyZXR1cm4gfWlmKEEpe3RoaXMub24oImhpZGUiLEEsQix7c2luZ2xlOnRydWV9KX10aGlzLmhpZGRlbj10cnVlO2lmKEMhPT11bmRlZmluZWQpe3RoaXMuc2V0QW5pbWF0ZVRhcmdldChDKX1pZih0aGlzLmFuaW1hdGVUYXJnZXQpe3RoaXMuYW5pbUhpZGUoKX1lbHNle3RoaXMuZWwuaGlkZSgpO3RoaXMuYWZ0ZXJIaWRlKCl9fSxhZnRlckhpZGU6ZnVuY3Rpb24oKXt0aGlzLnByb3h5LmhpZGUoKTtpZih0aGlzLm1vbml0b3JSZXNpemV8fHRoaXMubW9kYWx8fHRoaXMuY29uc3RyYWlufHx0aGlzLmNvbnN0cmFpbkhlYWRlcil7RXh0LkV2ZW50TWFuYWdlci5yZW1vdmVSZXNpemVMaXN0ZW5lcih0aGlzLm9uV2luZG93UmVzaXplLHRoaXMpfWlmKHRoaXMubW9kYWwpe3RoaXMubWFzay5oaWRlKCk7RXh0LmdldEJvZHkoKS5yZW1vdmVDbGFzcygieC1ib2R5LW1hc2tlZCIpfWlmKHRoaXMua2V5TWFwKXt0aGlzLmtleU1hcC5kaXNhYmxlKCl9dGhpcy5maXJlRXZlbnQoImhpZGUiLHRoaXMpfSxhbmltSGlkZTpmdW5jdGlvbigpe3RoaXMucHJveHkuc2V0T3BhY2l0eSgwLjUpO3RoaXMucHJveHkuc2hvdygpO3ZhciBCPXRoaXMuZ2V0Qm94KGZhbHNlKTt0aGlzLnByb3h5LnNldEJveChCKTt0aGlzLmVsLmhpZGUoKTt2YXIgQT10aGlzLmFuaW1hdGVUYXJnZXQuZ2V0Qm94KCk7QS5jYWxsYmFjaz10aGlzLmFmdGVySGlkZTtBLnNjb3BlPXRoaXM7QS5kdXJhdGlvbj0wLjI1O0EuZWFzaW5nPSJlYXNlTm9uZSI7QS5ibG9jaz10cnVlO0Eub3BhY2l0eT0wO3RoaXMucHJveHkuc2hpZnQoQSl9LG9uV2luZG93UmVzaXplOmZ1bmN0aW9uKCl7aWYodGhpcy5tYXhpbWl6ZWQpe3RoaXMuZml0Q29udGFpbmVyKCl9aWYodGhpcy5tb2RhbCl7dGhpcy5tYXNrLnNldFNpemUoIjEwMCUiLCIxMDAlIik7dmFyIEE9dGhpcy5tYXNrLmRvbS5vZmZzZXRIZWlnaHQ7dGhpcy5tYXNrLnNldFNpemUoRXh0LmxpYi5Eb20uZ2V0Vmlld1dpZHRoKHRydWUpLEV4dC5saWIuRG9tLmdldFZpZXdIZWlnaHQodHJ1ZSkpfXRoaXMuZG9Db25zdHJhaW4oKX0sZG9Db25zdHJhaW46ZnVuY3Rpb24oKXtpZih0aGlzLmNvbnN0cmFpbnx8dGhpcy5jb25zdHJhaW5IZWFkZXIpe3ZhciBCO2lmKHRoaXMuY29uc3RyYWluKXtCPXtyaWdodDp0aGlzLmVsLnNoYWRvd09mZnNldCxsZWZ0OnRoaXMuZWwuc2hhZG93T2Zmc2V0LGJvdHRvbTp0aGlzLmVsLnNoYWRvd09mZnNldH19ZWxzZXt2YXIgQT10aGlzLmdldFNpemUoKTtCPXtyaWdodDotKEEud2lkdGgtMTAwKSxib3R0b206LShBLmhlaWdodC0yNSl9fXZhciBDPXRoaXMuZWwuZ2V0Q29uc3RyYWluVG9YWSh0aGlzLmNvbnRhaW5lcix0cnVlLEIpO2lmKEMpe3RoaXMuc2V0UG9zaXRpb24oQ1swXSxDWzFdKX19fSxnaG9zdDpmdW5jdGlvbihBKXt2YXIgQz10aGlzLmNyZWF0ZUdob3N0KEEpO3ZhciBCPXRoaXMuZ2V0Qm94KHRydWUpO0Muc2V0TGVmdFRvcChCLngsQi55KTtDLnNldFdpZHRoKEIud2lkdGgpO3RoaXMuZWwuaGlkZSgpO3RoaXMuYWN0aXZlR2hvc3Q9QztyZXR1cm4gQ30sdW5naG9zdDpmdW5jdGlvbihCLEEpe2lmKEIhPT1mYWxzZSl7dGhpcy5lbC5zaG93KCk7dGhpcy5mb2N1cygpO2lmKEV4dC5pc01hYyYmRXh0LmlzR2Vja28pe3RoaXMuY2FzY2FkZSh0aGlzLnNldEF1dG9TY3JvbGwpfX1pZihBIT09ZmFsc2Upe3RoaXMuc2V0UG9zaXRpb24odGhpcy5hY3RpdmVHaG9zdC5nZXRMZWZ0KHRydWUpLHRoaXMuYWN0aXZlR2hvc3QuZ2V0VG9wKHRydWUpKX10aGlzLmFjdGl2ZUdob3N0LmhpZGUoKTt0aGlzLmFjdGl2ZUdob3N0LnJlbW92ZSgpO2RlbGV0ZSB0aGlzLmFjdGl2ZUdob3N0fSxtaW5pbWl6ZTpmdW5jdGlvbigpe3RoaXMuZmlyZUV2ZW50KCJtaW5pbWl6ZSIsdGhpcyl9LGNsb3NlOmZ1bmN0aW9uKCl7aWYodGhpcy5maXJlRXZlbnQoImJlZm9yZWNsb3NlIix0aGlzKSE9PWZhbHNlKXt0aGlzLmhpZGUobnVsbCxmdW5jdGlvbigpe3RoaXMuZmlyZUV2ZW50KCJjbG9zZSIsdGhpcyk7dGhpcy5kZXN0cm95KCl9LHRoaXMpfX0sbWF4aW1pemU6ZnVuY3Rpb24oKXtpZighdGhpcy5tYXhpbWl6ZWQpe3RoaXMuZXhwYW5kKGZhbHNlKTt0aGlzLnJlc3RvcmVTaXplPXRoaXMuZ2V0U2l6ZSgpO3RoaXMucmVzdG9yZVBvcz10aGlzLmdldFBvc2l0aW9uKHRydWUpO3RoaXMudG9vbHMubWF4aW1pemUuaGlkZSgpO3RoaXMudG9vbHMucmVzdG9yZS5zaG93KCk7dGhpcy5tYXhpbWl6ZWQ9dHJ1ZTt0aGlzLmVsLmRpc2FibGVTaGFkb3coKTtpZih0aGlzLmRkKXt0aGlzLmRkLmxvY2soKX1pZih0aGlzLmNvbGxhcHNpYmxlKXt0aGlzLnRvb2xzLnRvZ2dsZS5oaWRlKCl9dGhpcy5lbC5hZGRDbGFzcygieC13aW5kb3ctbWF4aW1pemVkIik7dGhpcy5jb250YWluZXIuYWRkQ2xhc3MoIngtd2luZG93LW1heGltaXplZC1jdCIpO3RoaXMuc2V0UG9zaXRpb24oMCwwKTt0aGlzLmZpdENvbnRhaW5lcigpO3RoaXMuZmlyZUV2ZW50KCJtYXhpbWl6ZSIsdGhpcyl9fSxyZXN0b3JlOmZ1bmN0aW9uKCl7aWYodGhpcy5tYXhpbWl6ZWQpe3RoaXMuZWwucmVtb3ZlQ2xhc3MoIngtd2luZG93LW1heGltaXplZCIpO3RoaXMudG9vbHMucmVzdG9yZS5oaWRlKCk7dGhpcy50b29scy5tYXhpbWl6ZS5zaG93KCk7dGhpcy5zZXRQb3NpdGlvbih0aGlzLnJlc3RvcmVQb3NbMF0sdGhpcy5yZXN0b3JlUG9zWzFdKTt0aGlzLnNldFNpemUodGhpcy5yZXN0b3JlU2l6ZS53aWR0aCx0aGlzLnJlc3RvcmVTaXplLmhlaWdodCk7ZGVsZXRlIHRoaXMucmVzdG9yZVBvcztkZWxldGUgdGhpcy5yZXN0b3JlU2l6ZTt0aGlzLm1heGltaXplZD1mYWxzZTt0aGlzLmVsLmVuYWJsZVNoYWRvdyh0cnVlKTtpZih0aGlzLmRkKXt0aGlzLmRkLnVubG9jaygpfWlmKHRoaXMuY29sbGFwc2libGUpe3RoaXMudG9vbHMudG9nZ2xlLnNob3coKX10aGlzLmNvbnRhaW5lci5yZW1vdmVDbGFzcygieC13aW5kb3ctbWF4aW1pemVkLWN0Iik7dGhpcy5kb0NvbnN0cmFpbigpO3RoaXMuZmlyZUV2ZW50KCJyZXN0b3JlIix0aGlzKX19LHRvZ2dsZU1heGltaXplOmZ1bmN0aW9uKCl7dGhpc1t0aGlzLm1heGltaXplZD8icmVzdG9yZSI6Im1heGltaXplIl0oKX0sZml0Q29udGFpbmVyOmZ1bmN0aW9uKCl7dmFyIEE9dGhpcy5jb250YWluZXIuZ2V0Vmlld1NpemUoKTt0aGlzLnNldFNpemUoQS53aWR0aCxBLmhlaWdodCl9LHNldFpJbmRleDpmdW5jdGlvbihBKXtpZih0aGlzLm1vZGFsKXt0aGlzLm1hc2suc2V0U3R5bGUoInotaW5kZXgiLEEpfXRoaXMuZWwuc2V0WkluZGV4KCsrQSk7QSs9NTtpZih0aGlzLnJlc2l6ZXIpe3RoaXMucmVzaXplci5wcm94eS5zZXRTdHlsZSgiei1pbmRleCIsKytBKX10aGlzLmxhc3RaSW5kZXg9QX0sYWxpZ25UbzpmdW5jdGlvbihCLEEsQyl7dmFyIEQ9dGhpcy5lbC5nZXRBbGlnblRvWFkoQixBLEMpO3RoaXMuc2V0UGFnZVBvc2l0aW9uKERbMF0sRFsxXSk7cmV0dXJuIHRoaXN9LGFuY2hvclRvOmZ1bmN0aW9uKEMsRyxELEIsRil7dmFyIEU9ZnVuY3Rpb24oKXt0aGlzLmFsaWduVG8oQyxHLEQpfTtFeHQuRXZlbnRNYW5hZ2VyLm9uV2luZG93UmVzaXplKEUsdGhpcyk7dmFyIEE9dHlwZW9mIEI7aWYoQSE9InVuZGVmaW5lZCIpe0V4dC5FdmVudE1hbmFnZXIub24od2luZG93LCJzY3JvbGwiLEUsdGhpcyx7YnVmZmVyOkE9PSJudW1iZXIiP0I6NTB9KX1FLmNhbGwodGhpcyk7dGhpc1tGXT1FO3JldHVybiB0aGlzfSx0b0Zyb250OmZ1bmN0aW9uKCl7aWYodGhpcy5tYW5hZ2VyLmJyaW5nVG9Gcm9udCh0aGlzKSl7dGhpcy5mb2N1cygpfXJldHVybiB0aGlzfSxzZXRBY3RpdmU6ZnVuY3Rpb24oQSl7aWYoQSl7aWYoIXRoaXMubWF4aW1pemVkKXt0aGlzLmVsLmVuYWJsZVNoYWRvdyh0cnVlKX10aGlzLmZpcmVFdmVudCgiYWN0aXZhdGUiLHRoaXMpfWVsc2V7dGhpcy5lbC5kaXNhYmxlU2hhZG93KCk7dGhpcy5maXJlRXZlbnQoImRlYWN0aXZhdGUiLHRoaXMpfX0sdG9CYWNrOmZ1bmN0aW9uKCl7dGhpcy5tYW5hZ2VyLnNlbmRUb0JhY2sodGhpcyk7cmV0dXJuIHRoaXN9LGNlbnRlcjpmdW5jdGlvbigpe3ZhciBBPXRoaXMuZWwuZ2V0QWxpZ25Ub1hZKHRoaXMuY29udGFpbmVyLCJjLWMiKTt0aGlzLnNldFBhZ2VQb3NpdGlvbihBWzBdLEFbMV0pO3JldHVybiB0aGlzfX0pO0V4dC5yZWcoIndpbmRvdyIsRXh0LldpbmRvdyk7RXh0LldpbmRvdy5ERD1mdW5jdGlvbihBKXt0aGlzLndpbj1BO0V4dC5XaW5kb3cuREQuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsQS5lbC5pZCwiV2luZG93REQtIitBLmlkKTt0aGlzLnNldEhhbmRsZUVsSWQoQS5oZWFkZXIuaWQpO3RoaXMuc2Nyb2xsPWZhbHNlfTtFeHQuZXh0ZW5kKEV4dC5XaW5kb3cuREQsRXh0LmRkLkRELHttb3ZlT25seTp0cnVlLGhlYWRlck9mZnNldHM6WzEwMCwyNV0sc3RhcnREcmFnOmZ1bmN0aW9uKCl7dmFyIEE9dGhpcy53aW47dGhpcy5wcm94eT1BLmdob3N0KCk7aWYoQS5jb25zdHJhaW4hPT1mYWxzZSl7dmFyIEM9QS5lbC5zaGFkb3dPZmZzZXQ7dGhpcy5jb25zdHJhaW5UbyhBLmNvbnRhaW5lcix7cmlnaHQ6QyxsZWZ0OkMsYm90dG9tOkN9KX1lbHNle2lmKEEuY29uc3RyYWluSGVhZGVyIT09ZmFsc2Upe3ZhciBCPXRoaXMucHJveHkuZ2V0U2l6ZSgpO3RoaXMuY29uc3RyYWluVG8oQS5jb250YWluZXIse3JpZ2h0Oi0oQi53aWR0aC10aGlzLmhlYWRlck9mZnNldHNbMF0pLGJvdHRvbTotKEIuaGVpZ2h0LXRoaXMuaGVhZGVyT2Zmc2V0c1sxXSl9KX19fSxiNERyYWc6RXh0LmVtcHR5Rm4sb25EcmFnOmZ1bmN0aW9uKEEpe3RoaXMuYWxpZ25FbFdpdGhNb3VzZSh0aGlzLnByb3h5LEEuZ2V0UGFnZVgoKSxBLmdldFBhZ2VZKCkpfSxlbmREcmFnOmZ1bmN0aW9uKEEpe3RoaXMud2luLnVuZ2hvc3QoKTt0aGlzLndpbi5zYXZlU3RhdGUoKX19KTsNCkV4dC5XaW5kb3dHcm91cD1mdW5jdGlvbigpe3ZhciBGPXt9O3ZhciBEPVtdO3ZhciBFPW51bGw7dmFyIEM9ZnVuY3Rpb24oSSxIKXtyZXR1cm4oIUkuX2xhc3RBY2Nlc3N8fEkuX2xhc3RBY2Nlc3M8SC5fbGFzdEFjY2Vzcyk/LTE6MX07dmFyIEc9ZnVuY3Rpb24oKXt2YXIgSj1ELEg9Si5sZW5ndGg7aWYoSD4wKXtKLnNvcnQoQyk7dmFyIEk9SlswXS5tYW5hZ2VyLnpzZWVkO2Zvcih2YXIgSz0wO0s8SDtLKyspe3ZhciBMPUpbS107aWYoTCYmIUwuaGlkZGVuKXtMLnNldFpJbmRleChJKyhLKjEwKSl9fX1BKCl9O3ZhciBCPWZ1bmN0aW9uKEgpe2lmKEghPUUpe2lmKEUpe0Uuc2V0QWN0aXZlKGZhbHNlKX1FPUg7aWYoSCl7SC5zZXRBY3RpdmUodHJ1ZSl9fX07dmFyIEE9ZnVuY3Rpb24oKXtmb3IodmFyIEg9RC5sZW5ndGgtMTtIPj0wOy0tSCl7aWYoIURbSF0uaGlkZGVuKXtCKERbSF0pO3JldHVybiB9fUIobnVsbCl9O3JldHVybnt6c2VlZDo5MDAwLHJlZ2lzdGVyOmZ1bmN0aW9uKEgpe0ZbSC5pZF09SDtELnB1c2goSCk7SC5vbigiaGlkZSIsQSl9LHVucmVnaXN0ZXI6ZnVuY3Rpb24oSCl7ZGVsZXRlIEZbSC5pZF07SC51bigiaGlkZSIsQSk7RC5yZW1vdmUoSCl9LGdldDpmdW5jdGlvbihIKXtyZXR1cm4gdHlwZW9mIEg9PSJvYmplY3QiP0g6RltIXX0sYnJpbmdUb0Zyb250OmZ1bmN0aW9uKEgpe0g9dGhpcy5nZXQoSCk7aWYoSCE9RSl7SC5fbGFzdEFjY2Vzcz1uZXcgRGF0ZSgpLmdldFRpbWUoKTtHKCk7cmV0dXJuIHRydWV9cmV0dXJuIGZhbHNlfSxzZW5kVG9CYWNrOmZ1bmN0aW9uKEgpe0g9dGhpcy5nZXQoSCk7SC5fbGFzdEFjY2Vzcz0tKG5ldyBEYXRlKCkuZ2V0VGltZSgpKTtHKCk7cmV0dXJuIEh9LGhpZGVBbGw6ZnVuY3Rpb24oKXtmb3IodmFyIEggaW4gRil7aWYoRltIXSYmdHlwZW9mIEZbSF0hPSJmdW5jdGlvbiImJkZbSF0uaXNWaXNpYmxlKCkpe0ZbSF0uaGlkZSgpfX19LGdldEFjdGl2ZTpmdW5jdGlvbigpe3JldHVybiBFfSxnZXRCeTpmdW5jdGlvbihKLEkpe3ZhciBLPVtdO2Zvcih2YXIgSD1ELmxlbmd0aC0xO0g+PTA7LS1IKXt2YXIgTD1EW0hdO2lmKEouY2FsbChJfHxMLEwpIT09ZmFsc2Upe0sucHVzaChMKX19cmV0dXJuIEt9LGVhY2g6ZnVuY3Rpb24oSSxIKXtmb3IodmFyIEogaW4gRil7aWYoRltKXSYmdHlwZW9mIEZbSl0hPSJmdW5jdGlvbiIpe2lmKEkuY2FsbChIfHxGW0pdLEZbSl0pPT09ZmFsc2Upe3JldHVybiB9fX19fX07RXh0LldpbmRvd01ncj1uZXcgRXh0LldpbmRvd0dyb3VwKCk7DQpFeHQuZGQuUGFuZWxQcm94eT1mdW5jdGlvbihBLEIpe3RoaXMucGFuZWw9QTt0aGlzLmlkPXRoaXMucGFuZWwuaWQrIi1kZHByb3h5IjtFeHQuYXBwbHkodGhpcyxCKX07RXh0LmRkLlBhbmVsUHJveHkucHJvdG90eXBlPXtpbnNlcnRQcm94eTp0cnVlLHNldFN0YXR1czpFeHQuZW1wdHlGbixyZXNldDpFeHQuZW1wdHlGbix1cGRhdGU6RXh0LmVtcHR5Rm4sc3RvcDpFeHQuZW1wdHlGbixzeW5jOkV4dC5lbXB0eUZuLGdldEVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2hvc3R9LGdldEdob3N0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2hvc3R9LGdldFByb3h5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJveHl9LGhpZGU6ZnVuY3Rpb24oKXtpZih0aGlzLmdob3N0KXtpZih0aGlzLnByb3h5KXt0aGlzLnByb3h5LnJlbW92ZSgpO2RlbGV0ZSB0aGlzLnByb3h5fXRoaXMucGFuZWwuZWwuZG9tLnN0eWxlLmRpc3BsYXk9IiI7dGhpcy5naG9zdC5yZW1vdmUoKTtkZWxldGUgdGhpcy5naG9zdH19LHNob3c6ZnVuY3Rpb24oKXtpZighdGhpcy5naG9zdCl7dGhpcy5naG9zdD10aGlzLnBhbmVsLmNyZWF0ZUdob3N0KHVuZGVmaW5lZCx1bmRlZmluZWQsRXh0LmdldEJvZHkoKSk7dGhpcy5naG9zdC5zZXRYWSh0aGlzLnBhbmVsLmVsLmdldFhZKCkpO2lmKHRoaXMuaW5zZXJ0UHJveHkpe3RoaXMucHJveHk9dGhpcy5wYW5lbC5lbC5pbnNlcnRTaWJsaW5nKHtjbHM6IngtcGFuZWwtZGQtc3BhY2VyIn0pO3RoaXMucHJveHkuc2V0U2l6ZSh0aGlzLnBhbmVsLmdldFNpemUoKSl9dGhpcy5wYW5lbC5lbC5kb20uc3R5bGUuZGlzcGxheT0ibm9uZSJ9fSxyZXBhaXI6ZnVuY3Rpb24oQixDLEEpe3RoaXMuaGlkZSgpO2lmKHR5cGVvZiBDPT0iZnVuY3Rpb24iKXtDLmNhbGwoQXx8dGhpcyl9fSxtb3ZlUHJveHk6ZnVuY3Rpb24oQSxCKXtpZih0aGlzLnByb3h5KXtBLmluc2VydEJlZm9yZSh0aGlzLnByb3h5LmRvbSxCKX19fTtFeHQuUGFuZWwuREQ9ZnVuY3Rpb24oQixBKXt0aGlzLnBhbmVsPUI7dGhpcy5kcmFnRGF0YT17cGFuZWw6Qn07dGhpcy5wcm94eT1uZXcgRXh0LmRkLlBhbmVsUHJveHkoQixBKTtFeHQuUGFuZWwuREQuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsQi5lbCxBKTt0aGlzLnNldEhhbmRsZUVsSWQoQi5oZWFkZXIuaWQpO0IuaGVhZGVyLnNldFN0eWxlKCJjdXJzb3IiLCJtb3ZlIik7dGhpcy5zY3JvbGw9ZmFsc2V9O0V4dC5leHRlbmQoRXh0LlBhbmVsLkRELEV4dC5kZC5EcmFnU291cmNlLHtzaG93RnJhbWU6RXh0LmVtcHR5Rm4sc3RhcnREcmFnOkV4dC5lbXB0eUZuLGI0U3RhcnREcmFnOmZ1bmN0aW9uKEEsQil7dGhpcy5wcm94eS5zaG93KCl9LGI0TW91c2VEb3duOmZ1bmN0aW9uKEIpe3ZhciBBPUIuZ2V0UGFnZVgoKTt2YXIgQz1CLmdldFBhZ2VZKCk7dGhpcy5hdXRvT2Zmc2V0KEEsQyl9LG9uSW5pdERyYWc6ZnVuY3Rpb24oQSxCKXt0aGlzLm9uU3RhcnREcmFnKEEsQik7cmV0dXJuIHRydWV9LGNyZWF0ZUZyYW1lOkV4dC5lbXB0eUZuLGdldERyYWdFbDpmdW5jdGlvbihBKXtyZXR1cm4gdGhpcy5wcm94eS5naG9zdC5kb219LGVuZERyYWc6ZnVuY3Rpb24oQSl7dGhpcy5wcm94eS5oaWRlKCk7dGhpcy5wYW5lbC5zYXZlU3RhdGUoKX0sYXV0b09mZnNldDpmdW5jdGlvbihBLEIpe0EtPXRoaXMuc3RhcnRQYWdlWDtCLT10aGlzLnN0YXJ0UGFnZVk7dGhpcy5zZXREZWx0YShBLEIpfX0pOw0KRXh0LnN0YXRlLlByb3ZpZGVyPWZ1bmN0aW9uKCl7dGhpcy5hZGRFdmVudHMoInN0YXRlY2hhbmdlIik7dGhpcy5zdGF0ZT17fTtFeHQuc3RhdGUuUHJvdmlkZXIuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpfTtFeHQuZXh0ZW5kKEV4dC5zdGF0ZS5Qcm92aWRlcixFeHQudXRpbC5PYnNlcnZhYmxlLHtnZXQ6ZnVuY3Rpb24oQixBKXtyZXR1cm4gdHlwZW9mIHRoaXMuc3RhdGVbQl09PSJ1bmRlZmluZWQiP0E6dGhpcy5zdGF0ZVtCXX0sY2xlYXI6ZnVuY3Rpb24oQSl7ZGVsZXRlIHRoaXMuc3RhdGVbQV07dGhpcy5maXJlRXZlbnQoInN0YXRlY2hhbmdlIix0aGlzLEEsbnVsbCl9LHNldDpmdW5jdGlvbihBLEIpe3RoaXMuc3RhdGVbQV09Qjt0aGlzLmZpcmVFdmVudCgic3RhdGVjaGFuZ2UiLHRoaXMsQSxCKX0sZGVjb2RlVmFsdWU6ZnVuY3Rpb24oQSl7dmFyIEo9L14oYXxufGR8YnxzfG8pXDooLiopJC87dmFyIEM9Si5leGVjKHVuZXNjYXBlKEEpKTtpZighQ3x8IUNbMV0pe3JldHVybiB9dmFyIEY9Q1sxXTt2YXIgSD1DWzJdO3N3aXRjaChGKXtjYXNlIm4iOnJldHVybiBwYXJzZUZsb2F0KEgpO2Nhc2UiZCI6cmV0dXJuIG5ldyBEYXRlKERhdGUucGFyc2UoSCkpO2Nhc2UiYiI6cmV0dXJuKEg9PSIxIik7Y2FzZSJhIjp2YXIgRz1bXTt2YXIgST1ILnNwbGl0KCJeIik7Zm9yKHZhciBCPTAsRD1JLmxlbmd0aDtCPEQ7QisrKXtHLnB1c2godGhpcy5kZWNvZGVWYWx1ZShJW0JdKSl9cmV0dXJuIEc7Y2FzZSJvIjp2YXIgRz17fTt2YXIgST1ILnNwbGl0KCJeIik7Zm9yKHZhciBCPTAsRD1JLmxlbmd0aDtCPEQ7QisrKXt2YXIgRT1JW0JdLnNwbGl0KCI9Iik7R1tFWzBdXT10aGlzLmRlY29kZVZhbHVlKEVbMV0pfXJldHVybiBHO2RlZmF1bHQ6cmV0dXJuIEh9fSxlbmNvZGVWYWx1ZTpmdW5jdGlvbihDKXt2YXIgQjtpZih0eXBlb2YgQz09Im51bWJlciIpe0I9Im46IitDfWVsc2V7aWYodHlwZW9mIEM9PSJib29sZWFuIil7Qj0iYjoiKyhDPyIxIjoiMCIpfWVsc2V7aWYoRXh0LmlzRGF0ZShDKSl7Qj0iZDoiK0MudG9HTVRTdHJpbmcoKX1lbHNle2lmKEV4dC5pc0FycmF5KEMpKXt2YXIgRj0iIjtmb3IodmFyIEU9MCxBPUMubGVuZ3RoO0U8QTtFKyspe0YrPXRoaXMuZW5jb2RlVmFsdWUoQ1tFXSk7aWYoRSE9QS0xKXtGKz0iXiJ9fUI9ImE6IitGfWVsc2V7aWYodHlwZW9mIEM9PSJvYmplY3QiKXt2YXIgRj0iIjtmb3IodmFyIEQgaW4gQyl7aWYodHlwZW9mIENbRF0hPSJmdW5jdGlvbiImJkNbRF0hPT11bmRlZmluZWQpe0YrPUQrIj0iK3RoaXMuZW5jb2RlVmFsdWUoQ1tEXSkrIl4ifX1CPSJvOiIrRi5zdWJzdHJpbmcoMCxGLmxlbmd0aC0xKX1lbHNle0I9InM6IitDfX19fX1yZXR1cm4gZXNjYXBlKEIpfX0pOw0KRXh0LnN0YXRlLk1hbmFnZXI9ZnVuY3Rpb24oKXt2YXIgQT1uZXcgRXh0LnN0YXRlLlByb3ZpZGVyKCk7cmV0dXJue3NldFByb3ZpZGVyOmZ1bmN0aW9uKEIpe0E9Qn0sZ2V0OmZ1bmN0aW9uKEMsQil7cmV0dXJuIEEuZ2V0KEMsQil9LHNldDpmdW5jdGlvbihCLEMpe0Euc2V0KEIsQyl9LGNsZWFyOmZ1bmN0aW9uKEIpe0EuY2xlYXIoQil9LGdldFByb3ZpZGVyOmZ1bmN0aW9uKCl7cmV0dXJuIEF9fX0oKTsNCkV4dC5zdGF0ZS5Db29raWVQcm92aWRlcj1mdW5jdGlvbihBKXtFeHQuc3RhdGUuQ29va2llUHJvdmlkZXIuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMucGF0aD0iLyI7dGhpcy5leHBpcmVzPW5ldyBEYXRlKG5ldyBEYXRlKCkuZ2V0VGltZSgpKygxMDAwKjYwKjYwKjI0KjcpKTt0aGlzLmRvbWFpbj1udWxsO3RoaXMuc2VjdXJlPWZhbHNlO0V4dC5hcHBseSh0aGlzLEEpO3RoaXMuc3RhdGU9dGhpcy5yZWFkQ29va2llcygpfTtFeHQuZXh0ZW5kKEV4dC5zdGF0ZS5Db29raWVQcm92aWRlcixFeHQuc3RhdGUuUHJvdmlkZXIse3NldDpmdW5jdGlvbihBLEIpe2lmKHR5cGVvZiBCPT0idW5kZWZpbmVkInx8Qj09PW51bGwpe3RoaXMuY2xlYXIoQSk7cmV0dXJuIH10aGlzLnNldENvb2tpZShBLEIpO0V4dC5zdGF0ZS5Db29raWVQcm92aWRlci5zdXBlcmNsYXNzLnNldC5jYWxsKHRoaXMsQSxCKX0sY2xlYXI6ZnVuY3Rpb24oQSl7dGhpcy5jbGVhckNvb2tpZShBKTtFeHQuc3RhdGUuQ29va2llUHJvdmlkZXIuc3VwZXJjbGFzcy5jbGVhci5jYWxsKHRoaXMsQSl9LHJlYWRDb29raWVzOmZ1bmN0aW9uKCl7dmFyIEM9e307dmFyIEY9ZG9jdW1lbnQuY29va2llKyI7Ijt2YXIgQj0vXHM/KC4qPyk9KC4qPyk7L2c7dmFyIEU7d2hpbGUoKEU9Qi5leGVjKEYpKSE9bnVsbCl7dmFyIEE9RVsxXTt2YXIgRD1FWzJdO2lmKEEmJkEuc3Vic3RyaW5nKDAsMyk9PSJ5cy0iKXtDW0Euc3Vic3RyKDMpXT10aGlzLmRlY29kZVZhbHVlKEQpfX1yZXR1cm4gQ30sc2V0Q29va2llOmZ1bmN0aW9uKEEsQil7ZG9jdW1lbnQuY29va2llPSJ5cy0iK0ErIj0iK3RoaXMuZW5jb2RlVmFsdWUoQikrKCh0aGlzLmV4cGlyZXM9PW51bGwpPyIiOigiOyBleHBpcmVzPSIrdGhpcy5leHBpcmVzLnRvR01UU3RyaW5nKCkpKSsoKHRoaXMucGF0aD09bnVsbCk/IiI6KCI7IHBhdGg9Iit0aGlzLnBhdGgpKSsoKHRoaXMuZG9tYWluPT1udWxsKT8iIjooIjsgZG9tYWluPSIrdGhpcy5kb21haW4pKSsoKHRoaXMuc2VjdXJlPT10cnVlKT8iOyBzZWN1cmUiOiIiKX0sY2xlYXJDb29raWU6ZnVuY3Rpb24oQSl7ZG9jdW1lbnQuY29va2llPSJ5cy0iK0ErIj1udWxsOyBleHBpcmVzPVRodSwgMDEtSmFuLTcwIDAwOjAwOjAxIEdNVCIrKCh0aGlzLnBhdGg9PW51bGwpPyIiOigiOyBwYXRoPSIrdGhpcy5wYXRoKSkrKCh0aGlzLmRvbWFpbj09bnVsbCk/IiI6KCI7IGRvbWFpbj0iK3RoaXMuZG9tYWluKSkrKCh0aGlzLnNlY3VyZT09dHJ1ZSk/Ijsgc2VjdXJlIjoiIil9fSk7DQpFeHQuRGF0YVZpZXc9RXh0LmV4dGVuZChFeHQuQm94Q29tcG9uZW50LHtzZWxlY3RlZENsYXNzOiJ4LXZpZXctc2VsZWN0ZWQiLGVtcHR5VGV4dDoiIixsYXN0OmZhbHNlLGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXtFeHQuRGF0YVZpZXcuc3VwZXJjbGFzcy5pbml0Q29tcG9uZW50LmNhbGwodGhpcyk7aWYodHlwZW9mIHRoaXMudHBsPT0ic3RyaW5nIil7dGhpcy50cGw9bmV3IEV4dC5YVGVtcGxhdGUodGhpcy50cGwpfXRoaXMuYWRkRXZlbnRzKCJiZWZvcmVjbGljayIsImNsaWNrIiwiY29udGFpbmVyY2xpY2siLCJkYmxjbGljayIsImNvbnRleHRtZW51Iiwic2VsZWN0aW9uY2hhbmdlIiwiYmVmb3Jlc2VsZWN0Iik7dGhpcy5hbGw9bmV3IEV4dC5Db21wb3NpdGVFbGVtZW50TGl0ZSgpO3RoaXMuc2VsZWN0ZWQ9bmV3IEV4dC5Db21wb3NpdGVFbGVtZW50TGl0ZSgpfSxvblJlbmRlcjpmdW5jdGlvbigpe2lmKCF0aGlzLmVsKXt0aGlzLmVsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpfUV4dC5EYXRhVmlldy5zdXBlcmNsYXNzLm9uUmVuZGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sYWZ0ZXJSZW5kZXI6ZnVuY3Rpb24oKXtFeHQuRGF0YVZpZXcuc3VwZXJjbGFzcy5hZnRlclJlbmRlci5jYWxsKHRoaXMpO3RoaXMuZWwub24oeyJjbGljayI6dGhpcy5vbkNsaWNrLCJkYmxjbGljayI6dGhpcy5vbkRibENsaWNrLCJjb250ZXh0bWVudSI6dGhpcy5vbkNvbnRleHRNZW51LHNjb3BlOnRoaXN9KTtpZih0aGlzLm92ZXJDbGFzcyl7dGhpcy5lbC5vbih7Im1vdXNlb3ZlciI6dGhpcy5vbk1vdXNlT3ZlciwibW91c2VvdXQiOnRoaXMub25Nb3VzZU91dCxzY29wZTp0aGlzfSl9aWYodGhpcy5zdG9yZSl7dGhpcy5zZXRTdG9yZSh0aGlzLnN0b3JlLHRydWUpfX0scmVmcmVzaDpmdW5jdGlvbigpe3RoaXMuY2xlYXJTZWxlY3Rpb25zKGZhbHNlLHRydWUpO3RoaXMuZWwudXBkYXRlKCIiKTt2YXIgQj1bXTt2YXIgQT10aGlzLnN0b3JlLmdldFJhbmdlKCk7aWYoQS5sZW5ndGg8MSl7dGhpcy5lbC51cGRhdGUodGhpcy5lbXB0eVRleHQpO3RoaXMuYWxsLmNsZWFyKCk7cmV0dXJuIH10aGlzLnRwbC5vdmVyd3JpdGUodGhpcy5lbCx0aGlzLmNvbGxlY3REYXRhKEEsMCkpO3RoaXMuYWxsLmZpbGwoRXh0LnF1ZXJ5KHRoaXMuaXRlbVNlbGVjdG9yLHRoaXMuZWwuZG9tKSk7dGhpcy51cGRhdGVJbmRleGVzKDApfSxwcmVwYXJlRGF0YTpmdW5jdGlvbihBKXtyZXR1cm4gQX0sY29sbGVjdERhdGE6ZnVuY3Rpb24oQixFKXt2YXIgRD1bXTtmb3IodmFyIEM9MCxBPUIubGVuZ3RoO0M8QTtDKyspe0RbRC5sZW5ndGhdPXRoaXMucHJlcGFyZURhdGEoQltDXS5kYXRhLEUrQyxCW0NdKX1yZXR1cm4gRH0sYnVmZmVyUmVuZGVyOmZ1bmN0aW9uKEEpe3ZhciBCPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3RoaXMudHBsLm92ZXJ3cml0ZShCLHRoaXMuY29sbGVjdERhdGEoQSkpO3JldHVybiBFeHQucXVlcnkodGhpcy5pdGVtU2VsZWN0b3IsQil9LG9uVXBkYXRlOmZ1bmN0aW9uKEYsQSl7dmFyIEI9dGhpcy5zdG9yZS5pbmRleE9mKEEpO3ZhciBFPXRoaXMuaXNTZWxlY3RlZChCKTt2YXIgQz10aGlzLmFsbC5lbGVtZW50c1tCXTt2YXIgRD10aGlzLmJ1ZmZlclJlbmRlcihbQV0sQilbMF07dGhpcy5hbGwucmVwbGFjZUVsZW1lbnQoQixELHRydWUpO2lmKEUpe3RoaXMuc2VsZWN0ZWQucmVwbGFjZUVsZW1lbnQoQyxEKTt0aGlzLmFsbC5pdGVtKEIpLmFkZENsYXNzKHRoaXMuc2VsZWN0ZWRDbGFzcyl9dGhpcy51cGRhdGVJbmRleGVzKEIsQil9LG9uQWRkOmZ1bmN0aW9uKEQsQixDKXtpZih0aGlzLmFsbC5nZXRDb3VudCgpPT0wKXt0aGlzLnJlZnJlc2goKTtyZXR1cm4gfXZhciBBPXRoaXMuYnVmZmVyUmVuZGVyKEIsQyksRTtpZihDPHRoaXMuYWxsLmdldENvdW50KCkpe0U9dGhpcy5hbGwuaXRlbShDKS5pbnNlcnRTaWJsaW5nKEEsImJlZm9yZSIsdHJ1ZSk7dGhpcy5hbGwuZWxlbWVudHMuc3BsaWNlKEMsMCxFKX1lbHNle0U9dGhpcy5hbGwubGFzdCgpLmluc2VydFNpYmxpbmcoQSwiYWZ0ZXIiLHRydWUpO3RoaXMuYWxsLmVsZW1lbnRzLnB1c2goRSl9dGhpcy51cGRhdGVJbmRleGVzKEMpfSxvblJlbW92ZTpmdW5jdGlvbihDLEEsQil7dGhpcy5kZXNlbGVjdChCKTt0aGlzLmFsbC5yZW1vdmVFbGVtZW50KEIsdHJ1ZSk7dGhpcy51cGRhdGVJbmRleGVzKEIpfSxyZWZyZXNoTm9kZTpmdW5jdGlvbihBKXt0aGlzLm9uVXBkYXRlKHRoaXMuc3RvcmUsdGhpcy5zdG9yZS5nZXRBdChBKSl9LHVwZGF0ZUluZGV4ZXM6ZnVuY3Rpb24oRCxDKXt2YXIgQj10aGlzLmFsbC5lbGVtZW50cztEPUR8fDA7Qz1DfHwoKEM9PT0wKT8wOihCLmxlbmd0aC0xKSk7Zm9yKHZhciBBPUQ7QTw9QztBKyspe0JbQV0udmlld0luZGV4PUF9fSxzZXRTdG9yZTpmdW5jdGlvbihBLEIpe2lmKCFCJiZ0aGlzLnN0b3JlKXt0aGlzLnN0b3JlLnVuKCJiZWZvcmVsb2FkIix0aGlzLm9uQmVmb3JlTG9hZCx0aGlzKTt0aGlzLnN0b3JlLnVuKCJkYXRhY2hhbmdlZCIsdGhpcy5yZWZyZXNoLHRoaXMpO3RoaXMuc3RvcmUudW4oImFkZCIsdGhpcy5vbkFkZCx0aGlzKTt0aGlzLnN0b3JlLnVuKCJyZW1vdmUiLHRoaXMub25SZW1vdmUsdGhpcyk7dGhpcy5zdG9yZS51bigidXBkYXRlIix0aGlzLm9uVXBkYXRlLHRoaXMpO3RoaXMuc3RvcmUudW4oImNsZWFyIix0aGlzLnJlZnJlc2gsdGhpcyl9aWYoQSl7QT1FeHQuU3RvcmVNZ3IubG9va3VwKEEpO0Eub24oImJlZm9yZWxvYWQiLHRoaXMub25CZWZvcmVMb2FkLHRoaXMpO0Eub24oImRhdGFjaGFuZ2VkIix0aGlzLnJlZnJlc2gsdGhpcyk7QS5vbigiYWRkIix0aGlzLm9uQWRkLHRoaXMpO0Eub24oInJlbW92ZSIsdGhpcy5vblJlbW92ZSx0aGlzKTtBLm9uKCJ1cGRhdGUiLHRoaXMub25VcGRhdGUsdGhpcyk7QS5vbigiY2xlYXIiLHRoaXMucmVmcmVzaCx0aGlzKX10aGlzLnN0b3JlPUE7aWYoQSl7dGhpcy5yZWZyZXNoKCl9fSxmaW5kSXRlbUZyb21DaGlsZDpmdW5jdGlvbihBKXtyZXR1cm4gRXh0LmZseShBKS5maW5kUGFyZW50KHRoaXMuaXRlbVNlbGVjdG9yLHRoaXMuZWwpfSxvbkNsaWNrOmZ1bmN0aW9uKEMpe3ZhciBCPUMuZ2V0VGFyZ2V0KHRoaXMuaXRlbVNlbGVjdG9yLHRoaXMuZWwpO2lmKEIpe3ZhciBBPXRoaXMuaW5kZXhPZihCKTtpZih0aGlzLm9uSXRlbUNsaWNrKEIsQSxDKSE9PWZhbHNlKXt0aGlzLmZpcmVFdmVudCgiY2xpY2siLHRoaXMsQSxCLEMpfX1lbHNle2lmKHRoaXMuZmlyZUV2ZW50KCJjb250YWluZXJjbGljayIsdGhpcyxDKSE9PWZhbHNlKXt0aGlzLmNsZWFyU2VsZWN0aW9ucygpfX19LG9uQ29udGV4dE1lbnU6ZnVuY3Rpb24oQil7dmFyIEE9Qi5nZXRUYXJnZXQodGhpcy5pdGVtU2VsZWN0b3IsdGhpcy5lbCk7aWYoQSl7dGhpcy5maXJlRXZlbnQoImNvbnRleHRtZW51Iix0aGlzLHRoaXMuaW5kZXhPZihBKSxBLEIpfX0sb25EYmxDbGljazpmdW5jdGlvbihCKXt2YXIgQT1CLmdldFRhcmdldCh0aGlzLml0ZW1TZWxlY3Rvcix0aGlzLmVsKTtpZihBKXt0aGlzLmZpcmVFdmVudCgiZGJsY2xpY2siLHRoaXMsdGhpcy5pbmRleE9mKEEpLEEsQil9fSxvbk1vdXNlT3ZlcjpmdW5jdGlvbihCKXt2YXIgQT1CLmdldFRhcmdldCh0aGlzLml0ZW1TZWxlY3Rvcix0aGlzLmVsKTtpZihBJiZBIT09dGhpcy5sYXN0SXRlbSl7dGhpcy5sYXN0SXRlbT1BO0V4dC5mbHkoQSkuYWRkQ2xhc3ModGhpcy5vdmVyQ2xhc3MpfX0sb25Nb3VzZU91dDpmdW5jdGlvbihBKXtpZih0aGlzLmxhc3RJdGVtKXtpZighQS53aXRoaW4odGhpcy5sYXN0SXRlbSx0cnVlKSl7RXh0LmZseSh0aGlzLmxhc3RJdGVtKS5yZW1vdmVDbGFzcyh0aGlzLm92ZXJDbGFzcyk7ZGVsZXRlIHRoaXMubGFzdEl0ZW19fX0sb25JdGVtQ2xpY2s6ZnVuY3Rpb24oQixBLEMpe2lmKHRoaXMuZmlyZUV2ZW50KCJiZWZvcmVjbGljayIsdGhpcyxBLEIsQyk9PT1mYWxzZSl7cmV0dXJuIGZhbHNlfWlmKHRoaXMubXVsdGlTZWxlY3Qpe3RoaXMuZG9NdWx0aVNlbGVjdGlvbihCLEEsQyk7Qy5wcmV2ZW50RGVmYXVsdCgpfWVsc2V7aWYodGhpcy5zaW5nbGVTZWxlY3Qpe3RoaXMuZG9TaW5nbGVTZWxlY3Rpb24oQixBLEMpO0MucHJldmVudERlZmF1bHQoKX19cmV0dXJuIHRydWV9LGRvU2luZ2xlU2VsZWN0aW9uOmZ1bmN0aW9uKEIsQSxDKXtpZihDLmN0cmxLZXkmJnRoaXMuaXNTZWxlY3RlZChBKSl7dGhpcy5kZXNlbGVjdChBKX1lbHNle3RoaXMuc2VsZWN0KEEsZmFsc2UpfX0sZG9NdWx0aVNlbGVjdGlvbjpmdW5jdGlvbihDLEEsRCl7aWYoRC5zaGlmdEtleSYmdGhpcy5sYXN0IT09ZmFsc2Upe3ZhciBCPXRoaXMubGFzdDt0aGlzLnNlbGVjdFJhbmdlKEIsQSxELmN0cmxLZXkpO3RoaXMubGFzdD1CfWVsc2V7aWYoKEQuY3RybEtleXx8dGhpcy5zaW1wbGVTZWxlY3QpJiZ0aGlzLmlzU2VsZWN0ZWQoQSkpe3RoaXMuZGVzZWxlY3QoQSl9ZWxzZXt0aGlzLnNlbGVjdChBLEQuY3RybEtleXx8RC5zaGlmdEtleXx8dGhpcy5zaW1wbGVTZWxlY3QpfX19LGdldFNlbGVjdGlvbkNvdW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VsZWN0ZWQuZ2V0Q291bnQoKX0sZ2V0U2VsZWN0ZWROb2RlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbGVjdGVkLmVsZW1lbnRzfSxnZXRTZWxlY3RlZEluZGV4ZXM6ZnVuY3Rpb24oKXt2YXIgQj1bXSxEPXRoaXMuc2VsZWN0ZWQuZWxlbWVudHM7Zm9yKHZhciBDPTAsQT1ELmxlbmd0aDtDPEE7QysrKXtCLnB1c2goRFtDXS52aWV3SW5kZXgpfXJldHVybiBCfSxnZXRTZWxlY3RlZFJlY29yZHM6ZnVuY3Rpb24oKXt2YXIgRD1bXSxDPXRoaXMuc2VsZWN0ZWQuZWxlbWVudHM7Zm9yKHZhciBCPTAsQT1DLmxlbmd0aDtCPEE7QisrKXtEW0QubGVuZ3RoXT10aGlzLnN0b3JlLmdldEF0KENbQl0udmlld0luZGV4KX1yZXR1cm4gRH0sZ2V0UmVjb3JkczpmdW5jdGlvbihCKXt2YXIgRT1bXSxEPUI7Zm9yKHZhciBDPTAsQT1ELmxlbmd0aDtDPEE7QysrKXtFW0UubGVuZ3RoXT10aGlzLnN0b3JlLmdldEF0KERbQ10udmlld0luZGV4KX1yZXR1cm4gRX0sZ2V0UmVjb3JkOmZ1bmN0aW9uKEEpe3JldHVybiB0aGlzLnN0b3JlLmdldEF0KEEudmlld0luZGV4KX0sY2xlYXJTZWxlY3Rpb25zOmZ1bmN0aW9uKEEsQil7aWYodGhpcy5tdWx0aVNlbGVjdHx8dGhpcy5zaW5nbGVTZWxlY3Qpe2lmKCFCKXt0aGlzLnNlbGVjdGVkLnJlbW92ZUNsYXNzKHRoaXMuc2VsZWN0ZWRDbGFzcyl9dGhpcy5zZWxlY3RlZC5jbGVhcigpO3RoaXMubGFzdD1mYWxzZTtpZighQSl7dGhpcy5maXJlRXZlbnQoInNlbGVjdGlvbmNoYW5nZSIsdGhpcyx0aGlzLnNlbGVjdGVkLmVsZW1lbnRzKX19fSxpc1NlbGVjdGVkOmZ1bmN0aW9uKEEpe3JldHVybiB0aGlzLnNlbGVjdGVkLmNvbnRhaW5zKHRoaXMuZ2V0Tm9kZShBKSl9LGRlc2VsZWN0OmZ1bmN0aW9uKEEpe2lmKHRoaXMuaXNTZWxlY3RlZChBKSl7dmFyIEE9dGhpcy5nZXROb2RlKEEpO3RoaXMuc2VsZWN0ZWQucmVtb3ZlRWxlbWVudChBKTtpZih0aGlzLmxhc3Q9PUEudmlld0luZGV4KXt0aGlzLmxhc3Q9ZmFsc2V9RXh0LmZseShBKS5yZW1vdmVDbGFzcyh0aGlzLnNlbGVjdGVkQ2xhc3MpO3RoaXMuZmlyZUV2ZW50KCJzZWxlY3Rpb25jaGFuZ2UiLHRoaXMsdGhpcy5zZWxlY3RlZC5lbGVtZW50cyl9fSxzZWxlY3Q6ZnVuY3Rpb24oRCxGLEIpe2lmKEV4dC5pc0FycmF5KEQpKXtpZighRil7dGhpcy5jbGVhclNlbGVjdGlvbnModHJ1ZSl9Zm9yKHZhciBDPTAsQT1ELmxlbmd0aDtDPEE7QysrKXt0aGlzLnNlbGVjdChEW0NdLHRydWUsdHJ1ZSl9fWVsc2V7dmFyIEU9dGhpcy5nZXROb2RlKEQpO2lmKCFGKXt0aGlzLmNsZWFyU2VsZWN0aW9ucyh0cnVlKX1pZihFJiYhdGhpcy5pc1NlbGVjdGVkKEUpKXtpZih0aGlzLmZpcmVFdmVudCgiYmVmb3Jlc2VsZWN0Iix0aGlzLEUsdGhpcy5zZWxlY3RlZC5lbGVtZW50cykhPT1mYWxzZSl7RXh0LmZseShFKS5hZGRDbGFzcyh0aGlzLnNlbGVjdGVkQ2xhc3MpO3RoaXMuc2VsZWN0ZWQuYWRkKEUpO3RoaXMubGFzdD1FLnZpZXdJbmRleDtpZighQil7dGhpcy5maXJlRXZlbnQoInNlbGVjdGlvbmNoYW5nZSIsdGhpcyx0aGlzLnNlbGVjdGVkLmVsZW1lbnRzKX19fX19LHNlbGVjdFJhbmdlOmZ1bmN0aW9uKEMsQSxCKXtpZighQil7dGhpcy5jbGVhclNlbGVjdGlvbnModHJ1ZSl9dGhpcy5zZWxlY3QodGhpcy5nZXROb2RlcyhDLEEpLHRydWUpfSxnZXROb2RlOmZ1bmN0aW9uKEEpe2lmKHR5cGVvZiBBPT0ic3RyaW5nIil7cmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKEEpfWVsc2V7aWYodHlwZW9mIEE9PSJudW1iZXIiKXtyZXR1cm4gdGhpcy5hbGwuZWxlbWVudHNbQV19fXJldHVybiBBfSxnZXROb2RlczpmdW5jdGlvbihFLEEpe3ZhciBEPXRoaXMuYWxsLmVsZW1lbnRzO0U9RXx8MDtBPXR5cGVvZiBBPT0idW5kZWZpbmVkIj9ELmxlbmd0aC0xOkE7dmFyIEI9W10sQztpZihFPD1BKXtmb3IoQz1FO0M8PUE7QysrKXtCLnB1c2goRFtDXSl9fWVsc2V7Zm9yKEM9RTtDPj1BO0MtLSl7Qi5wdXNoKERbQ10pfX1yZXR1cm4gQn0saW5kZXhPZjpmdW5jdGlvbihBKXtBPXRoaXMuZ2V0Tm9kZShBKTtpZih0eXBlb2YgQS52aWV3SW5kZXg9PSJudW1iZXIiKXtyZXR1cm4gQS52aWV3SW5kZXh9cmV0dXJuIHRoaXMuYWxsLmluZGV4T2YoQSl9LG9uQmVmb3JlTG9hZDpmdW5jdGlvbigpe2lmKHRoaXMubG9hZGluZ1RleHQpe3RoaXMuY2xlYXJTZWxlY3Rpb25zKGZhbHNlLHRydWUpO3RoaXMuZWwudXBkYXRlKCI8ZGl2IGNsYXNzPVwibG9hZGluZy1pbmRpY2F0b3JcIj4iK3RoaXMubG9hZGluZ1RleHQrIjwvZGl2PiIpO3RoaXMuYWxsLmNsZWFyKCl9fX0pO0V4dC5yZWcoImRhdGF2aWV3IixFeHQuRGF0YVZpZXcpOw0KRXh0LkNvbG9yUGFsZXR0ZT1mdW5jdGlvbihBKXtFeHQuQ29sb3JQYWxldHRlLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLEEpO3RoaXMuYWRkRXZlbnRzKCJzZWxlY3QiKTtpZih0aGlzLmhhbmRsZXIpe3RoaXMub24oInNlbGVjdCIsdGhpcy5oYW5kbGVyLHRoaXMuc2NvcGUsdHJ1ZSl9fTtFeHQuZXh0ZW5kKEV4dC5Db2xvclBhbGV0dGUsRXh0LkNvbXBvbmVudCx7aXRlbUNsczoieC1jb2xvci1wYWxldHRlIix2YWx1ZTpudWxsLGNsaWNrRXZlbnQ6ImNsaWNrIixjdHlwZToiRXh0LkNvbG9yUGFsZXR0ZSIsYWxsb3dSZXNlbGVjdDpmYWxzZSxjb2xvcnM6WyIwMDAwMDAiLCI5OTMzMDAiLCIzMzMzMDAiLCIwMDMzMDAiLCIwMDMzNjYiLCIwMDAwODAiLCIzMzMzOTkiLCIzMzMzMzMiLCI4MDAwMDAiLCJGRjY2MDAiLCI4MDgwMDAiLCIwMDgwMDAiLCIwMDgwODAiLCIwMDAwRkYiLCI2NjY2OTkiLCI4MDgwODAiLCJGRjAwMDAiLCJGRjk5MDAiLCI5OUNDMDAiLCIzMzk5NjYiLCIzM0NDQ0MiLCIzMzY2RkYiLCI4MDAwODAiLCI5Njk2OTYiLCJGRjAwRkYiLCJGRkNDMDAiLCJGRkZGMDAiLCIwMEZGMDAiLCIwMEZGRkYiLCIwMENDRkYiLCI5OTMzNjYiLCJDMEMwQzAiLCJGRjk5Q0MiLCJGRkNDOTkiLCJGRkZGOTkiLCJDQ0ZGQ0MiLCJDQ0ZGRkYiLCI5OUNDRkYiLCJDQzk5RkYiLCJGRkZGRkYiXSxvblJlbmRlcjpmdW5jdGlvbihCLEEpe3ZhciBDPXRoaXMudHBsfHxuZXcgRXh0LlhUZW1wbGF0ZSgiPHRwbCBmb3I9XCIuXCI+PGEgaHJlZj1cIiNcIiBjbGFzcz1cImNvbG9yLXsufVwiIGhpZGVmb2N1cz1cIm9uXCI+PGVtPjxzcGFuIHN0eWxlPVwiYmFja2dyb3VuZDojey59XCIgdW5zZWxlY3RhYmxlPVwib25cIj4mIzE2MDs8L3NwYW4+PC9lbT48L2E+PC90cGw+Iik7dmFyIEQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7RC5jbGFzc05hbWU9dGhpcy5pdGVtQ2xzO0Mub3ZlcndyaXRlKEQsdGhpcy5jb2xvcnMpO0IuZG9tLmluc2VydEJlZm9yZShELEEpO3RoaXMuZWw9RXh0LmdldChEKTt0aGlzLmVsLm9uKHRoaXMuY2xpY2tFdmVudCx0aGlzLmhhbmRsZUNsaWNrLHRoaXMse2RlbGVnYXRlOiJhIn0pO2lmKHRoaXMuY2xpY2tFdmVudCE9ImNsaWNrIil7dGhpcy5lbC5vbigiY2xpY2siLEV4dC5lbXB0eUZuLHRoaXMse2RlbGVnYXRlOiJhIixwcmV2ZW50RGVmYXVsdDp0cnVlfSl9fSxhZnRlclJlbmRlcjpmdW5jdGlvbigpe0V4dC5Db2xvclBhbGV0dGUuc3VwZXJjbGFzcy5hZnRlclJlbmRlci5jYWxsKHRoaXMpO2lmKHRoaXMudmFsdWUpe3ZhciBBPXRoaXMudmFsdWU7dGhpcy52YWx1ZT1udWxsO3RoaXMuc2VsZWN0KEEpfX0saGFuZGxlQ2xpY2s6ZnVuY3Rpb24oQixBKXtCLnByZXZlbnREZWZhdWx0KCk7aWYoIXRoaXMuZGlzYWJsZWQpe3ZhciBDPUEuY2xhc3NOYW1lLm1hdGNoKC8oPzpefFxzKWNvbG9yLSguezZ9KSg/OlxzfCQpLylbMV07dGhpcy5zZWxlY3QoQy50b1VwcGVyQ2FzZSgpKX19LHNlbGVjdDpmdW5jdGlvbihBKXtBPUEucmVwbGFjZSgiIyIsIiIpO2lmKEEhPXRoaXMudmFsdWV8fHRoaXMuYWxsb3dSZXNlbGVjdCl7dmFyIEI9dGhpcy5lbDtpZih0aGlzLnZhbHVlKXtCLmNoaWxkKCJhLmNvbG9yLSIrdGhpcy52YWx1ZSkucmVtb3ZlQ2xhc3MoIngtY29sb3ItcGFsZXR0ZS1zZWwiKX1CLmNoaWxkKCJhLmNvbG9yLSIrQSkuYWRkQ2xhc3MoIngtY29sb3ItcGFsZXR0ZS1zZWwiKTt0aGlzLnZhbHVlPUE7dGhpcy5maXJlRXZlbnQoInNlbGVjdCIsdGhpcyxBKX19fSk7RXh0LnJlZygiY29sb3JwYWxldHRlIixFeHQuQ29sb3JQYWxldHRlKTsNCkV4dC5EYXRlUGlja2VyPUV4dC5leHRlbmQoRXh0LkNvbXBvbmVudCx7dG9kYXlUZXh0OiJUb2RheSIsb2tUZXh0OiImIzE2MDtPSyYjMTYwOyIsY2FuY2VsVGV4dDoiQ2FuY2VsIix0b2RheVRpcDoiezB9IChTcGFjZWJhcikiLG1pbkRhdGU6bnVsbCxtYXhEYXRlOm51bGwsbWluVGV4dDoiVGhpcyBkYXRlIGlzIGJlZm9yZSB0aGUgbWluaW11bSBkYXRlIixtYXhUZXh0OiJUaGlzIGRhdGUgaXMgYWZ0ZXIgdGhlIG1heGltdW0gZGF0ZSIsZm9ybWF0OiJtL2QveSIsZGlzYWJsZWREYXlzOm51bGwsZGlzYWJsZWREYXlzVGV4dDoiIixkaXNhYmxlZERhdGVzUkU6bnVsbCxkaXNhYmxlZERhdGVzVGV4dDoiIixjb25zdHJhaW5Ub1ZpZXdwb3J0OnRydWUsbW9udGhOYW1lczpEYXRlLm1vbnRoTmFtZXMsZGF5TmFtZXM6RGF0ZS5kYXlOYW1lcyxuZXh0VGV4dDoiTmV4dCBNb250aCAoQ29udHJvbCtSaWdodCkiLHByZXZUZXh0OiJQcmV2aW91cyBNb250aCAoQ29udHJvbCtMZWZ0KSIsbW9udGhZZWFyVGV4dDoiQ2hvb3NlIGEgbW9udGggKENvbnRyb2wrVXAvRG93biB0byBtb3ZlIHllYXJzKSIsc3RhcnREYXk6MCxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7RXh0LkRhdGVQaWNrZXIuc3VwZXJjbGFzcy5pbml0Q29tcG9uZW50LmNhbGwodGhpcyk7dGhpcy52YWx1ZT10aGlzLnZhbHVlP3RoaXMudmFsdWUuY2xlYXJUaW1lKCk6bmV3IERhdGUoKS5jbGVhclRpbWUoKTt0aGlzLmFkZEV2ZW50cygic2VsZWN0Iik7aWYodGhpcy5oYW5kbGVyKXt0aGlzLm9uKCJzZWxlY3QiLHRoaXMuaGFuZGxlcix0aGlzLnNjb3BlfHx0aGlzKX10aGlzLmluaXREaXNhYmxlZERheXMoKX0saW5pdERpc2FibGVkRGF5czpmdW5jdGlvbigpe2lmKCF0aGlzLmRpc2FibGVkRGF0ZXNSRSYmdGhpcy5kaXNhYmxlZERhdGVzKXt2YXIgQT10aGlzLmRpc2FibGVkRGF0ZXM7dmFyIEM9Iig/OiI7Zm9yKHZhciBCPTA7QjxBLmxlbmd0aDtCKyspe0MrPUFbQl07aWYoQiE9QS5sZW5ndGgtMSl7Qys9InwifX10aGlzLmRpc2FibGVkRGF0ZXNSRT1uZXcgUmVnRXhwKEMrIikiKX19LHNldFZhbHVlOmZ1bmN0aW9uKEIpe3ZhciBBPXRoaXMudmFsdWU7dGhpcy52YWx1ZT1CLmNsZWFyVGltZSh0cnVlKTtpZih0aGlzLmVsKXt0aGlzLnVwZGF0ZSh0aGlzLnZhbHVlKX19LGdldFZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWV9LGZvY3VzOmZ1bmN0aW9uKCl7aWYodGhpcy5lbCl7dGhpcy51cGRhdGUodGhpcy5hY3RpdmVEYXRlKX19LG9uUmVuZGVyOmZ1bmN0aW9uKEEsRil7dmFyIEM9WyI8dGFibGUgY2VsbHNwYWNpbmc9XCIwXCI+IiwiPHRyPjx0ZCBjbGFzcz1cIngtZGF0ZS1sZWZ0XCI+PGEgaHJlZj1cIiNcIiB0aXRsZT1cIiIsdGhpcy5wcmV2VGV4dCwiXCI+JiMxNjA7PC9hPjwvdGQ+PHRkIGNsYXNzPVwieC1kYXRlLW1pZGRsZVwiIGFsaWduPVwiY2VudGVyXCI+PC90ZD48dGQgY2xhc3M9XCJ4LWRhdGUtcmlnaHRcIj48YSBocmVmPVwiI1wiIHRpdGxlPVwiIix0aGlzLm5leHRUZXh0LCJcIj4mIzE2MDs8L2E+PC90ZD48L3RyPiIsIjx0cj48dGQgY29sc3Bhbj1cIjNcIj48dGFibGUgY2xhc3M9XCJ4LWRhdGUtaW5uZXJcIiBjZWxsc3BhY2luZz1cIjBcIj48dGhlYWQ+PHRyPiJdO3ZhciBFPXRoaXMuZGF5TmFtZXM7Zm9yKHZhciBEPTA7RDw3O0QrKyl7dmFyIEc9dGhpcy5zdGFydERheStEO2lmKEc+Nil7Rz1HLTd9Qy5wdXNoKCI8dGg+PHNwYW4+IixFW0ddLnN1YnN0cigwLDEpLCI8L3NwYW4+PC90aD4iKX1DW0MubGVuZ3RoXT0iPC90cj48L3RoZWFkPjx0Ym9keT48dHI+Ijtmb3IodmFyIEQ9MDtEPDQyO0QrKyl7aWYoRCU3PT0wJiZEIT0wKXtDW0MubGVuZ3RoXT0iPC90cj48dHI+In1DW0MubGVuZ3RoXT0iPHRkPjxhIGhyZWY9XCIjXCIgaGlkZWZvY3VzPVwib25cIiBjbGFzcz1cIngtZGF0ZS1kYXRlXCIgdGFiSW5kZXg9XCIxXCI+PGVtPjxzcGFuPjwvc3Bhbj48L2VtPjwvYT48L3RkPiJ9Q1tDLmxlbmd0aF09IjwvdHI+PC90Ym9keT48L3RhYmxlPjwvdGQ+PC90cj48dHI+PHRkIGNvbHNwYW49XCIzXCIgY2xhc3M9XCJ4LWRhdGUtYm90dG9tXCIgYWxpZ249XCJjZW50ZXJcIj48L3RkPjwvdHI+PC90YWJsZT48ZGl2IGNsYXNzPVwieC1kYXRlLW1wXCI+PC9kaXY+Ijt2YXIgQj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtCLmNsYXNzTmFtZT0ieC1kYXRlLXBpY2tlciI7Qi5pbm5lckhUTUw9Qy5qb2luKCIiKTtBLmRvbS5pbnNlcnRCZWZvcmUoQixGKTt0aGlzLmVsPUV4dC5nZXQoQik7dGhpcy5ldmVudEVsPUV4dC5nZXQoQi5maXJzdENoaWxkKTtuZXcgRXh0LnV0aWwuQ2xpY2tSZXBlYXRlcih0aGlzLmVsLmNoaWxkKCJ0ZC54LWRhdGUtbGVmdCBhIikse2hhbmRsZXI6dGhpcy5zaG93UHJldk1vbnRoLHNjb3BlOnRoaXMscHJldmVudERlZmF1bHQ6dHJ1ZSxzdG9wRGVmYXVsdDp0cnVlfSk7bmV3IEV4dC51dGlsLkNsaWNrUmVwZWF0ZXIodGhpcy5lbC5jaGlsZCgidGQueC1kYXRlLXJpZ2h0IGEiKSx7aGFuZGxlcjp0aGlzLnNob3dOZXh0TW9udGgsc2NvcGU6dGhpcyxwcmV2ZW50RGVmYXVsdDp0cnVlLHN0b3BEZWZhdWx0OnRydWV9KTt0aGlzLmV2ZW50RWwub24oIm1vdXNld2hlZWwiLHRoaXMuaGFuZGxlTW91c2VXaGVlbCx0aGlzKTt0aGlzLm1vbnRoUGlja2VyPXRoaXMuZWwuZG93bigiZGl2LngtZGF0ZS1tcCIpO3RoaXMubW9udGhQaWNrZXIuZW5hYmxlRGlzcGxheU1vZGUoImJsb2NrIik7dmFyIEk9bmV3IEV4dC5LZXlOYXYodGhpcy5ldmVudEVsLHsibGVmdCI6ZnVuY3Rpb24oSil7Si5jdHJsS2V5P3RoaXMuc2hvd1ByZXZNb250aCgpOnRoaXMudXBkYXRlKHRoaXMuYWN0aXZlRGF0ZS5hZGQoImQiLC0xKSl9LCJyaWdodCI6ZnVuY3Rpb24oSil7Si5jdHJsS2V5P3RoaXMuc2hvd05leHRNb250aCgpOnRoaXMudXBkYXRlKHRoaXMuYWN0aXZlRGF0ZS5hZGQoImQiLDEpKX0sInVwIjpmdW5jdGlvbihKKXtKLmN0cmxLZXk/dGhpcy5zaG93TmV4dFllYXIoKTp0aGlzLnVwZGF0ZSh0aGlzLmFjdGl2ZURhdGUuYWRkKCJkIiwtNykpfSwiZG93biI6ZnVuY3Rpb24oSil7Si5jdHJsS2V5P3RoaXMuc2hvd1ByZXZZZWFyKCk6dGhpcy51cGRhdGUodGhpcy5hY3RpdmVEYXRlLmFkZCgiZCIsNykpfSwicGFnZVVwIjpmdW5jdGlvbihKKXt0aGlzLnNob3dOZXh0TW9udGgoKX0sInBhZ2VEb3duIjpmdW5jdGlvbihKKXt0aGlzLnNob3dQcmV2TW9udGgoKX0sImVudGVyIjpmdW5jdGlvbihKKXtKLnN0b3BQcm9wYWdhdGlvbigpO3JldHVybiB0cnVlfSxzY29wZTp0aGlzfSk7dGhpcy5ldmVudEVsLm9uKCJjbGljayIsdGhpcy5oYW5kbGVEYXRlQ2xpY2ssdGhpcyx7ZGVsZWdhdGU6ImEueC1kYXRlLWRhdGUifSk7dGhpcy5ldmVudEVsLmFkZEtleUxpc3RlbmVyKEV4dC5FdmVudE9iamVjdC5TUEFDRSx0aGlzLnNlbGVjdFRvZGF5LHRoaXMpO3RoaXMuZWwudW5zZWxlY3RhYmxlKCk7dGhpcy5jZWxscz10aGlzLmVsLnNlbGVjdCgidGFibGUueC1kYXRlLWlubmVyIHRib2R5IHRkIik7dGhpcy50ZXh0Tm9kZXM9dGhpcy5lbC5xdWVyeSgidGFibGUueC1kYXRlLWlubmVyIHRib2R5IHNwYW4iKTt0aGlzLm1idG49bmV3IEV4dC5CdXR0b24oe3RleHQ6IiYjMTYwOyIsdG9vbHRpcDp0aGlzLm1vbnRoWWVhclRleHQscmVuZGVyVG86dGhpcy5lbC5jaGlsZCgidGQueC1kYXRlLW1pZGRsZSIsdHJ1ZSl9KTt0aGlzLm1idG4ub24oImNsaWNrIix0aGlzLnNob3dNb250aFBpY2tlcix0aGlzKTt0aGlzLm1idG4uZWwuY2hpbGQodGhpcy5tYnRuLm1lbnVDbGFzc1RhcmdldCkuYWRkQ2xhc3MoIngtYnRuLXdpdGgtbWVudSIpO3ZhciBIPShuZXcgRGF0ZSgpKS5kYXRlRm9ybWF0KHRoaXMuZm9ybWF0KTt0aGlzLnRvZGF5QnRuPW5ldyBFeHQuQnV0dG9uKHtyZW5kZXJUbzp0aGlzLmVsLmNoaWxkKCJ0ZC54LWRhdGUtYm90dG9tIix0cnVlKSx0ZXh0OlN0cmluZy5mb3JtYXQodGhpcy50b2RheVRleHQsSCksdG9vbHRpcDpTdHJpbmcuZm9ybWF0KHRoaXMudG9kYXlUaXAsSCksaGFuZGxlcjp0aGlzLnNlbGVjdFRvZGF5LHNjb3BlOnRoaXN9KTtpZihFeHQuaXNJRSl7dGhpcy5lbC5yZXBhaW50KCl9dGhpcy51cGRhdGUodGhpcy52YWx1ZSl9LGNyZWF0ZU1vbnRoUGlja2VyOmZ1bmN0aW9uKCl7aWYoIXRoaXMubW9udGhQaWNrZXIuZG9tLmZpcnN0Q2hpbGQpe3ZhciBBPVsiPHRhYmxlIGJvcmRlcj1cIjBcIiBjZWxsc3BhY2luZz1cIjBcIj4iXTtmb3IodmFyIEI9MDtCPDY7QisrKXtBLnB1c2goIjx0cj48dGQgY2xhc3M9XCJ4LWRhdGUtbXAtbW9udGhcIj48YSBocmVmPVwiI1wiPiIsdGhpcy5tb250aE5hbWVzW0JdLnN1YnN0cigwLDMpLCI8L2E+PC90ZD4iLCI8dGQgY2xhc3M9XCJ4LWRhdGUtbXAtbW9udGggeC1kYXRlLW1wLXNlcFwiPjxhIGhyZWY9XCIjXCI+Iix0aGlzLm1vbnRoTmFtZXNbQis2XS5zdWJzdHIoMCwzKSwiPC9hPjwvdGQ+IixCPT0wPyI8dGQgY2xhc3M9XCJ4LWRhdGUtbXAteWJ0blwiIGFsaWduPVwiY2VudGVyXCI+PGEgY2xhc3M9XCJ4LWRhdGUtbXAtcHJldlwiPjwvYT48L3RkPjx0ZCBjbGFzcz1cIngtZGF0ZS1tcC15YnRuXCIgYWxpZ249XCJjZW50ZXJcIj48YSBjbGFzcz1cIngtZGF0ZS1tcC1uZXh0XCI+PC9hPjwvdGQ+PC90cj4iOiI8dGQgY2xhc3M9XCJ4LWRhdGUtbXAteWVhclwiPjxhIGhyZWY9XCIjXCI+PC9hPjwvdGQ+PHRkIGNsYXNzPVwieC1kYXRlLW1wLXllYXJcIj48YSBocmVmPVwiI1wiPjwvYT48L3RkPjwvdHI+Iil9QS5wdXNoKCI8dHIgY2xhc3M9XCJ4LWRhdGUtbXAtYnRuc1wiPjx0ZCBjb2xzcGFuPVwiNFwiPjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwieC1kYXRlLW1wLW9rXCI+Iix0aGlzLm9rVGV4dCwiPC9idXR0b24+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJ4LWRhdGUtbXAtY2FuY2VsXCI+Iix0aGlzLmNhbmNlbFRleHQsIjwvYnV0dG9uPjwvdGQ+PC90cj4iLCI8L3RhYmxlPiIpO3RoaXMubW9udGhQaWNrZXIudXBkYXRlKEEuam9pbigiIikpO3RoaXMubW9udGhQaWNrZXIub24oImNsaWNrIix0aGlzLm9uTW9udGhDbGljayx0aGlzKTt0aGlzLm1vbnRoUGlja2VyLm9uKCJkYmxjbGljayIsdGhpcy5vbk1vbnRoRGJsQ2xpY2ssdGhpcyk7dGhpcy5tcE1vbnRocz10aGlzLm1vbnRoUGlja2VyLnNlbGVjdCgidGQueC1kYXRlLW1wLW1vbnRoIik7dGhpcy5tcFllYXJzPXRoaXMubW9udGhQaWNrZXIuc2VsZWN0KCJ0ZC54LWRhdGUtbXAteWVhciIpO3RoaXMubXBNb250aHMuZWFjaChmdW5jdGlvbihDLEQsRSl7RSs9MTtpZigoRSUyKT09MCl7Qy5kb20ueG1vbnRoPTUrTWF0aC5yb3VuZChFKjAuNSl9ZWxzZXtDLmRvbS54bW9udGg9TWF0aC5yb3VuZCgoRS0xKSowLjUpfX0pfX0sc2hvd01vbnRoUGlja2VyOmZ1bmN0aW9uKCl7dGhpcy5jcmVhdGVNb250aFBpY2tlcigpO3ZhciBBPXRoaXMuZWwuZ2V0U2l6ZSgpO3RoaXMubW9udGhQaWNrZXIuc2V0U2l6ZShBKTt0aGlzLm1vbnRoUGlja2VyLmNoaWxkKCJ0YWJsZSIpLnNldFNpemUoQSk7dGhpcy5tcFNlbE1vbnRoPSh0aGlzLmFjdGl2ZURhdGV8fHRoaXMudmFsdWUpLmdldE1vbnRoKCk7dGhpcy51cGRhdGVNUE1vbnRoKHRoaXMubXBTZWxNb250aCk7dGhpcy5tcFNlbFllYXI9KHRoaXMuYWN0aXZlRGF0ZXx8dGhpcy52YWx1ZSkuZ2V0RnVsbFllYXIoKTt0aGlzLnVwZGF0ZU1QWWVhcih0aGlzLm1wU2VsWWVhcik7dGhpcy5tb250aFBpY2tlci5zbGlkZUluKCJ0Iix7ZHVyYXRpb246MC4yfSl9LHVwZGF0ZU1QWWVhcjpmdW5jdGlvbihFKXt0aGlzLm1weWVhcj1FO3ZhciBDPXRoaXMubXBZZWFycy5lbGVtZW50cztmb3IodmFyIEI9MTtCPD0xMDtCKyspe3ZhciBEPUNbQi0xXSxBO2lmKChCJTIpPT0wKXtBPUUrTWF0aC5yb3VuZChCKjAuNSk7RC5maXJzdENoaWxkLmlubmVySFRNTD1BO0QueHllYXI9QX1lbHNle0E9RS0oNS1NYXRoLnJvdW5kKEIqMC41KSk7RC5maXJzdENoaWxkLmlubmVySFRNTD1BO0QueHllYXI9QX10aGlzLm1wWWVhcnMuaXRlbShCLTEpW0E9PXRoaXMubXBTZWxZZWFyPyJhZGRDbGFzcyI6InJlbW92ZUNsYXNzIl0oIngtZGF0ZS1tcC1zZWwiKX19LHVwZGF0ZU1QTW9udGg6ZnVuY3Rpb24oQSl7dGhpcy5tcE1vbnRocy5lYWNoKGZ1bmN0aW9uKEIsQyxEKXtCW0IuZG9tLnhtb250aD09QT8iYWRkQ2xhc3MiOiJyZW1vdmVDbGFzcyJdKCJ4LWRhdGUtbXAtc2VsIil9KX0sc2VsZWN0TVBNb250aDpmdW5jdGlvbihBKXt9LG9uTW9udGhDbGljazpmdW5jdGlvbihELEIpe0Quc3RvcEV2ZW50KCk7dmFyIEM9bmV3IEV4dC5FbGVtZW50KEIpLEE7aWYoQy5pcygiYnV0dG9uLngtZGF0ZS1tcC1jYW5jZWwiKSl7dGhpcy5oaWRlTW9udGhQaWNrZXIoKX1lbHNle2lmKEMuaXMoImJ1dHRvbi54LWRhdGUtbXAtb2siKSl7dGhpcy51cGRhdGUobmV3IERhdGUodGhpcy5tcFNlbFllYXIsdGhpcy5tcFNlbE1vbnRoLCh0aGlzLmFjdGl2ZURhdGV8fHRoaXMudmFsdWUpLmdldERhdGUoKSkpO3RoaXMuaGlkZU1vbnRoUGlja2VyKCl9ZWxzZXtpZihBPUMudXAoInRkLngtZGF0ZS1tcC1tb250aCIsMikpe3RoaXMubXBNb250aHMucmVtb3ZlQ2xhc3MoIngtZGF0ZS1tcC1zZWwiKTtBLmFkZENsYXNzKCJ4LWRhdGUtbXAtc2VsIik7dGhpcy5tcFNlbE1vbnRoPUEuZG9tLnhtb250aH1lbHNle2lmKEE9Qy51cCgidGQueC1kYXRlLW1wLXllYXIiLDIpKXt0aGlzLm1wWWVhcnMucmVtb3ZlQ2xhc3MoIngtZGF0ZS1tcC1zZWwiKTtBLmFkZENsYXNzKCJ4LWRhdGUtbXAtc2VsIik7dGhpcy5tcFNlbFllYXI9QS5kb20ueHllYXJ9ZWxzZXtpZihDLmlzKCJhLngtZGF0ZS1tcC1wcmV2Iikpe3RoaXMudXBkYXRlTVBZZWFyKHRoaXMubXB5ZWFyLTEwKX1lbHNle2lmKEMuaXMoImEueC1kYXRlLW1wLW5leHQiKSl7dGhpcy51cGRhdGVNUFllYXIodGhpcy5tcHllYXIrMTApfX19fX19fSxvbk1vbnRoRGJsQ2xpY2s6ZnVuY3Rpb24oRCxCKXtELnN0b3BFdmVudCgpO3ZhciBDPW5ldyBFeHQuRWxlbWVudChCKSxBO2lmKEE9Qy51cCgidGQueC1kYXRlLW1wLW1vbnRoIiwyKSl7dGhpcy51cGRhdGUobmV3IERhdGUodGhpcy5tcFNlbFllYXIsQS5kb20ueG1vbnRoLCh0aGlzLmFjdGl2ZURhdGV8fHRoaXMudmFsdWUpLmdldERhdGUoKSkpO3RoaXMuaGlkZU1vbnRoUGlja2VyKCl9ZWxzZXtpZihBPUMudXAoInRkLngtZGF0ZS1tcC15ZWFyIiwyKSl7dGhpcy51cGRhdGUobmV3IERhdGUoQS5kb20ueHllYXIsdGhpcy5tcFNlbE1vbnRoLCh0aGlzLmFjdGl2ZURhdGV8fHRoaXMudmFsdWUpLmdldERhdGUoKSkpO3RoaXMuaGlkZU1vbnRoUGlja2VyKCl9fX0saGlkZU1vbnRoUGlja2VyOmZ1bmN0aW9uKEEpe2lmKHRoaXMubW9udGhQaWNrZXIpe2lmKEE9PT10cnVlKXt0aGlzLm1vbnRoUGlja2VyLmhpZGUoKX1lbHNle3RoaXMubW9udGhQaWNrZXIuc2xpZGVPdXQoInQiLHtkdXJhdGlvbjowLjJ9KX19fSxzaG93UHJldk1vbnRoOmZ1bmN0aW9uKEEpe3RoaXMudXBkYXRlKHRoaXMuYWN0aXZlRGF0ZS5hZGQoIm1vIiwtMSkpfSxzaG93TmV4dE1vbnRoOmZ1bmN0aW9uKEEpe3RoaXMudXBkYXRlKHRoaXMuYWN0aXZlRGF0ZS5hZGQoIm1vIiwxKSl9LHNob3dQcmV2WWVhcjpmdW5jdGlvbigpe3RoaXMudXBkYXRlKHRoaXMuYWN0aXZlRGF0ZS5hZGQoInkiLC0xKSl9LHNob3dOZXh0WWVhcjpmdW5jdGlvbigpe3RoaXMudXBkYXRlKHRoaXMuYWN0aXZlRGF0ZS5hZGQoInkiLDEpKX0saGFuZGxlTW91c2VXaGVlbDpmdW5jdGlvbihBKXt2YXIgQj1BLmdldFdoZWVsRGVsdGEoKTtpZihCPjApe3RoaXMuc2hvd1ByZXZNb250aCgpO0Euc3RvcEV2ZW50KCl9ZWxzZXtpZihCPDApe3RoaXMuc2hvd05leHRNb250aCgpO0Euc3RvcEV2ZW50KCl9fX0saGFuZGxlRGF0ZUNsaWNrOmZ1bmN0aW9uKEIsQSl7Qi5zdG9wRXZlbnQoKTtpZihBLmRhdGVWYWx1ZSYmIUV4dC5mbHkoQS5wYXJlbnROb2RlKS5oYXNDbGFzcygieC1kYXRlLWRpc2FibGVkIikpe3RoaXMuc2V0VmFsdWUobmV3IERhdGUoQS5kYXRlVmFsdWUpKTt0aGlzLmZpcmVFdmVudCgic2VsZWN0Iix0aGlzLHRoaXMudmFsdWUpfX0sc2VsZWN0VG9kYXk6ZnVuY3Rpb24oKXt0aGlzLnNldFZhbHVlKG5ldyBEYXRlKCkuY2xlYXJUaW1lKCkpO3RoaXMuZmlyZUV2ZW50KCJzZWxlY3QiLHRoaXMsdGhpcy52YWx1ZSl9LHVwZGF0ZTpmdW5jdGlvbihXKXt2YXIgQT10aGlzLmFjdGl2ZURhdGU7dGhpcy5hY3RpdmVEYXRlPVc7aWYoQSYmdGhpcy5lbCl7dmFyIEk9Vy5nZXRUaW1lKCk7aWYoQS5nZXRNb250aCgpPT1XLmdldE1vbnRoKCkmJkEuZ2V0RnVsbFllYXIoKT09Vy5nZXRGdWxsWWVhcigpKXt0aGlzLmNlbGxzLnJlbW92ZUNsYXNzKCJ4LWRhdGUtc2VsZWN0ZWQiKTt0aGlzLmNlbGxzLmVhY2goZnVuY3Rpb24oYSl7aWYoYS5kb20uZmlyc3RDaGlsZC5kYXRlVmFsdWU9PUkpe2EuYWRkQ2xhc3MoIngtZGF0ZS1zZWxlY3RlZCIpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0cnl7YS5kb20uZmlyc3RDaGlsZC5mb2N1cygpfWNhdGNoKGIpe319LDUwKTtyZXR1cm4gZmFsc2V9fSk7cmV0dXJuIH19dmFyIEY9Vy5nZXREYXlzSW5Nb250aCgpO3ZhciBKPVcuZ2V0Rmlyc3REYXRlT2ZNb250aCgpO3ZhciBDPUouZ2V0RGF5KCktdGhpcy5zdGFydERheTtpZihDPD10aGlzLnN0YXJ0RGF5KXtDKz03fXZhciBTPVcuYWRkKCJtbyIsLTEpO3ZhciBEPVMuZ2V0RGF5c0luTW9udGgoKS1DO3ZhciBCPXRoaXMuY2VsbHMuZWxlbWVudHM7dmFyIEs9dGhpcy50ZXh0Tm9kZXM7Ris9Qzt2YXIgUD04NjQwMDAwMDt2YXIgVT0obmV3IERhdGUoUy5nZXRGdWxsWWVhcigpLFMuZ2V0TW9udGgoKSxEKSkuY2xlYXJUaW1lKCk7dmFyIFQ9bmV3IERhdGUoKS5jbGVhclRpbWUoKS5nZXRUaW1lKCk7dmFyIE49Vy5jbGVhclRpbWUoKS5nZXRUaW1lKCk7dmFyIE09dGhpcy5taW5EYXRlP3RoaXMubWluRGF0ZS5jbGVhclRpbWUoKTpOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7dmFyIFE9dGhpcy5tYXhEYXRlP3RoaXMubWF4RGF0ZS5jbGVhclRpbWUoKTpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7dmFyIFg9dGhpcy5kaXNhYmxlZERhdGVzUkU7dmFyIEw9dGhpcy5kaXNhYmxlZERhdGVzVGV4dDt2YXIgWj10aGlzLmRpc2FibGVkRGF5cz90aGlzLmRpc2FibGVkRGF5cy5qb2luKCIiKTpmYWxzZTt2YXIgVj10aGlzLmRpc2FibGVkRGF5c1RleHQ7dmFyIFI9dGhpcy5mb3JtYXQ7dmFyIEc9ZnVuY3Rpb24oZCxhKXthLnRpdGxlPSIiO3ZhciBiPVUuZ2V0VGltZSgpO2EuZmlyc3RDaGlsZC5kYXRlVmFsdWU9YjtpZihiPT1UKXthLmNsYXNzTmFtZSs9IiB4LWRhdGUtdG9kYXkiO2EudGl0bGU9ZC50b2RheVRleHR9aWYoYj09Til7YS5jbGFzc05hbWUrPSIgeC1kYXRlLXNlbGVjdGVkIjtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dHJ5e2EuZmlyc3RDaGlsZC5mb2N1cygpfWNhdGNoKGYpe319LDUwKX1pZihiPE0pe2EuY2xhc3NOYW1lPSIgeC1kYXRlLWRpc2FibGVkIjthLnRpdGxlPWQubWluVGV4dDtyZXR1cm4gfWlmKGI+USl7YS5jbGFzc05hbWU9IiB4LWRhdGUtZGlzYWJsZWQiO2EudGl0bGU9ZC5tYXhUZXh0O3JldHVybiB9aWYoWil7aWYoWi5pbmRleE9mKFUuZ2V0RGF5KCkpIT0tMSl7YS50aXRsZT1WO2EuY2xhc3NOYW1lPSIgeC1kYXRlLWRpc2FibGVkIn19aWYoWCYmUil7dmFyIGM9VS5kYXRlRm9ybWF0KFIpO2lmKFgudGVzdChjKSl7YS50aXRsZT1MLnJlcGxhY2UoIiUwIixjKTthLmNsYXNzTmFtZT0iIHgtZGF0ZS1kaXNhYmxlZCJ9fX07dmFyIE89MDtmb3IoO088QztPKyspe0tbT10uaW5uZXJIVE1MPSgrK0QpO1Uuc2V0RGF0ZShVLmdldERhdGUoKSsxKTtCW09dLmNsYXNzTmFtZT0ieC1kYXRlLXByZXZkYXkiO0codGhpcyxCW09dKX1mb3IoO088RjtPKyspe2ludERheT1PLUMrMTtLW09dLmlubmVySFRNTD0oaW50RGF5KTtVLnNldERhdGUoVS5nZXREYXRlKCkrMSk7QltPXS5jbGFzc05hbWU9IngtZGF0ZS1hY3RpdmUiO0codGhpcyxCW09dKX12YXIgWT0wO2Zvcig7Tzw0MjtPKyspe0tbT10uaW5uZXJIVE1MPSgrK1kpO1Uuc2V0RGF0ZShVLmdldERhdGUoKSsxKTtCW09dLmNsYXNzTmFtZT0ieC1kYXRlLW5leHRkYXkiO0codGhpcyxCW09dKX10aGlzLm1idG4uc2V0VGV4dCh0aGlzLm1vbnRoTmFtZXNbVy5nZXRNb250aCgpXSsiICIrVy5nZXRGdWxsWWVhcigpKTtpZighdGhpcy5pbnRlcm5hbFJlbmRlcil7dmFyIEU9dGhpcy5lbC5kb20uZmlyc3RDaGlsZDt2YXIgSD1FLm9mZnNldFdpZHRoO3RoaXMuZWwuc2V0V2lkdGgoSCt0aGlzLmVsLmdldEJvcmRlcldpZHRoKCJsciIpKTtFeHQuZmx5KEUpLnNldFdpZHRoKEgpO3RoaXMuaW50ZXJuYWxSZW5kZXI9dHJ1ZTtpZihFeHQuaXNPcGVyYSYmIXRoaXMuc2Vjb25kUGFzcyl7RS5yb3dzWzBdLmNlbGxzWzFdLnN0eWxlLndpZHRoPShILShFLnJvd3NbMF0uY2VsbHNbMF0ub2Zmc2V0V2lkdGgrRS5yb3dzWzBdLmNlbGxzWzJdLm9mZnNldFdpZHRoKSkrInB4Ijt0aGlzLnNlY29uZFBhc3M9dHJ1ZTt0aGlzLnVwZGF0ZS5kZWZlcigxMCx0aGlzLFtXXSl9fX0sYmVmb3JlRGVzdHJveTpmdW5jdGlvbigpe3RoaXMubWJ0bi5kZXN0cm95KCk7dGhpcy50b2RheUJ0bi5kZXN0cm95KCl9fSk7RXh0LnJlZygiZGF0ZXBpY2tlciIsRXh0LkRhdGVQaWNrZXIpOw0KRXh0LlRhYlBhbmVsPUV4dC5leHRlbmQoRXh0LlBhbmVsLHttb25pdG9yUmVzaXplOnRydWUsZGVmZXJyZWRSZW5kZXI6dHJ1ZSx0YWJXaWR0aDoxMjAsbWluVGFiV2lkdGg6MzAscmVzaXplVGFiczpmYWxzZSxlbmFibGVUYWJTY3JvbGw6ZmFsc2Usc2Nyb2xsSW5jcmVtZW50OjAsc2Nyb2xsUmVwZWF0SW50ZXJ2YWw6NDAwLHNjcm9sbER1cmF0aW9uOjAuMzUsYW5pbVNjcm9sbDp0cnVlLHRhYlBvc2l0aW9uOiJ0b3AiLGJhc2VDbHM6IngtdGFiLXBhbmVsIixhdXRvVGFiczpmYWxzZSxhdXRvVGFiU2VsZWN0b3I6ImRpdi54LXRhYiIsYWN0aXZlVGFiOm51bGwsdGFiTWFyZ2luOjIscGxhaW46ZmFsc2Usd2hlZWxJbmNyZW1lbnQ6MjAsaWREZWxpbWl0ZXI6Il9fIixpdGVtQ2xzOiJ4LXRhYi1pdGVtIixlbGVtZW50czoiYm9keSIsaGVhZGVyQXNUZXh0OmZhbHNlLGZyYW1lOmZhbHNlLGhpZGVCb3JkZXJzOnRydWUsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe3RoaXMuZnJhbWU9ZmFsc2U7RXh0LlRhYlBhbmVsLnN1cGVyY2xhc3MuaW5pdENvbXBvbmVudC5jYWxsKHRoaXMpO3RoaXMuYWRkRXZlbnRzKCJiZWZvcmV0YWJjaGFuZ2UiLCJ0YWJjaGFuZ2UiLCJjb250ZXh0bWVudSIpO3RoaXMuc2V0TGF5b3V0KG5ldyBFeHQubGF5b3V0LkNhcmRMYXlvdXQoe2RlZmVycmVkUmVuZGVyOnRoaXMuZGVmZXJyZWRSZW5kZXJ9KSk7aWYodGhpcy50YWJQb3NpdGlvbj09InRvcCIpe3RoaXMuZWxlbWVudHMrPSIsaGVhZGVyIjt0aGlzLnN0cmlwVGFyZ2V0PSJoZWFkZXIifWVsc2V7dGhpcy5lbGVtZW50cys9Iixmb290ZXIiO3RoaXMuc3RyaXBUYXJnZXQ9ImZvb3RlciJ9aWYoIXRoaXMuc3RhY2spe3RoaXMuc3RhY2s9RXh0LlRhYlBhbmVsLkFjY2Vzc1N0YWNrKCl9dGhpcy5pbml0SXRlbXMoKX0scmVuZGVyOmZ1bmN0aW9uKCl7RXh0LlRhYlBhbmVsLnN1cGVyY2xhc3MucmVuZGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZih0aGlzLmFjdGl2ZVRhYiE9PXVuZGVmaW5lZCl7dmFyIEE9dGhpcy5hY3RpdmVUYWI7ZGVsZXRlIHRoaXMuYWN0aXZlVGFiO3RoaXMuc2V0QWN0aXZlVGFiKEEpfX0sb25SZW5kZXI6ZnVuY3Rpb24oQyxBKXtFeHQuVGFiUGFuZWwuc3VwZXJjbGFzcy5vblJlbmRlci5jYWxsKHRoaXMsQyxBKTtpZih0aGlzLnBsYWluKXt2YXIgRT10aGlzLnRhYlBvc2l0aW9uPT0idG9wIj8iaGVhZGVyIjoiZm9vdGVyIjt0aGlzW0VdLmFkZENsYXNzKCJ4LXRhYi1wYW5lbC0iK0UrIi1wbGFpbiIpfXZhciBCPXRoaXNbdGhpcy5zdHJpcFRhcmdldF07dGhpcy5zdHJpcFdyYXA9Qi5jcmVhdGVDaGlsZCh7Y2xzOiJ4LXRhYi1zdHJpcC13cmFwIixjbjp7dGFnOiJ1bCIsY2xzOiJ4LXRhYi1zdHJpcCB4LXRhYi1zdHJpcC0iK3RoaXMudGFiUG9zaXRpb259fSk7dGhpcy5zdHJpcFNwYWNlcj1CLmNyZWF0ZUNoaWxkKHtjbHM6IngtdGFiLXN0cmlwLXNwYWNlciJ9KTt0aGlzLnN0cmlwPW5ldyBFeHQuRWxlbWVudCh0aGlzLnN0cmlwV3JhcC5kb20uZmlyc3RDaGlsZCk7dGhpcy5lZGdlPXRoaXMuc3RyaXAuY3JlYXRlQ2hpbGQoe3RhZzoibGkiLGNsczoieC10YWItZWRnZSJ9KTt0aGlzLnN0cmlwLmNyZWF0ZUNoaWxkKHtjbHM6IngtY2xlYXIifSk7dGhpcy5ib2R5LmFkZENsYXNzKCJ4LXRhYi1wYW5lbC1ib2R5LSIrdGhpcy50YWJQb3NpdGlvbik7aWYoIXRoaXMuaXRlbVRwbCl7dmFyIEQ9bmV3IEV4dC5UZW1wbGF0ZSgiPGxpIGNsYXNzPVwie2Nsc31cIiBpZD1cIntpZH1cIj48YSBjbGFzcz1cIngtdGFiLXN0cmlwLWNsb3NlXCIgb25jbGljaz1cInJldHVybiBmYWxzZTtcIj48L2E+IiwiPGEgY2xhc3M9XCJ4LXRhYi1yaWdodFwiIGhyZWY9XCIjXCIgb25jbGljaz1cInJldHVybiBmYWxzZTtcIj48ZW0gY2xhc3M9XCJ4LXRhYi1sZWZ0XCI+IiwiPHNwYW4gY2xhc3M9XCJ4LXRhYi1zdHJpcC1pbm5lclwiPjxzcGFuIGNsYXNzPVwieC10YWItc3RyaXAtdGV4dCB7aWNvbkNsc31cIj57dGV4dH08L3NwYW4+PC9zcGFuPiIsIjwvZW0+PC9hPjwvbGk+Iik7RC5kaXNhYmxlRm9ybWF0cz10cnVlO0QuY29tcGlsZSgpO0V4dC5UYWJQYW5lbC5wcm90b3R5cGUuaXRlbVRwbD1EfXRoaXMuaXRlbXMuZWFjaCh0aGlzLmluaXRUYWIsdGhpcyl9LGFmdGVyUmVuZGVyOmZ1bmN0aW9uKCl7RXh0LlRhYlBhbmVsLnN1cGVyY2xhc3MuYWZ0ZXJSZW5kZXIuY2FsbCh0aGlzKTtpZih0aGlzLmF1dG9UYWJzKXt0aGlzLnJlYWRUYWJzKGZhbHNlKX19LGluaXRFdmVudHM6ZnVuY3Rpb24oKXtFeHQuVGFiUGFuZWwuc3VwZXJjbGFzcy5pbml0RXZlbnRzLmNhbGwodGhpcyk7dGhpcy5vbigiYWRkIix0aGlzLm9uQWRkLHRoaXMpO3RoaXMub24oInJlbW92ZSIsdGhpcy5vblJlbW92ZSx0aGlzKTt0aGlzLnN0cmlwLm9uKCJtb3VzZWRvd24iLHRoaXMub25TdHJpcE1vdXNlRG93bix0aGlzKTt0aGlzLnN0cmlwLm9uKCJjbGljayIsdGhpcy5vblN0cmlwQ2xpY2ssdGhpcyk7dGhpcy5zdHJpcC5vbigiY29udGV4dG1lbnUiLHRoaXMub25TdHJpcENvbnRleHRNZW51LHRoaXMpO2lmKHRoaXMuZW5hYmxlVGFiU2Nyb2xsKXt0aGlzLnN0cmlwLm9uKCJtb3VzZXdoZWVsIix0aGlzLm9uV2hlZWwsdGhpcyl9fSxmaW5kVGFyZ2V0czpmdW5jdGlvbihDKXt2YXIgQj1udWxsO3ZhciBBPUMuZ2V0VGFyZ2V0KCJsaSIsdGhpcy5zdHJpcCk7aWYoQSl7Qj10aGlzLmdldENvbXBvbmVudChBLmlkLnNwbGl0KHRoaXMuaWREZWxpbWl0ZXIpWzFdKTtpZihCLmRpc2FibGVkKXtyZXR1cm57Y2xvc2U6bnVsbCxpdGVtOm51bGwsZWw6bnVsbH19fXJldHVybntjbG9zZTpDLmdldFRhcmdldCgiLngtdGFiLXN0cmlwLWNsb3NlIix0aGlzLnN0cmlwKSxpdGVtOkIsZWw6QX19LG9uU3RyaXBNb3VzZURvd246ZnVuY3Rpb24oQil7Qi5wcmV2ZW50RGVmYXVsdCgpO2lmKEIuYnV0dG9uIT0wKXtyZXR1cm4gfXZhciBBPXRoaXMuZmluZFRhcmdldHMoQik7aWYoQS5jbG9zZSl7dGhpcy5yZW1vdmUoQS5pdGVtKTtyZXR1cm4gfWlmKEEuaXRlbSYmQS5pdGVtIT10aGlzLmFjdGl2ZVRhYil7dGhpcy5zZXRBY3RpdmVUYWIoQS5pdGVtKX19LG9uU3RyaXBDbGljazpmdW5jdGlvbihCKXt2YXIgQT10aGlzLmZpbmRUYXJnZXRzKEIpO2lmKCFBLmNsb3NlJiZBLml0ZW0mJkEuaXRlbSE9dGhpcy5hY3RpdmVUYWIpe3RoaXMuc2V0QWN0aXZlVGFiKEEuaXRlbSl9fSxvblN0cmlwQ29udGV4dE1lbnU6ZnVuY3Rpb24oQil7Qi5wcmV2ZW50RGVmYXVsdCgpO3ZhciBBPXRoaXMuZmluZFRhcmdldHMoQik7aWYoQS5pdGVtKXt0aGlzLmZpcmVFdmVudCgiY29udGV4dG1lbnUiLHRoaXMsQS5pdGVtLEIpfX0scmVhZFRhYnM6ZnVuY3Rpb24oRCl7aWYoRD09PXRydWUpe3RoaXMuaXRlbXMuZWFjaChmdW5jdGlvbihHKXt0aGlzLnJlbW92ZShHKX0sdGhpcyl9dmFyIEM9dGhpcy5lbC5xdWVyeSh0aGlzLmF1dG9UYWJTZWxlY3Rvcik7Zm9yKHZhciBCPTAsQT1DLmxlbmd0aDtCPEE7QisrKXt2YXIgRT1DW0JdO3ZhciBGPUUuZ2V0QXR0cmlidXRlKCJ0aXRsZSIpO0UucmVtb3ZlQXR0cmlidXRlKCJ0aXRsZSIpO3RoaXMuYWRkKHt0aXRsZTpGLGVsOkV9KX19LGluaXRUYWI6ZnVuY3Rpb24oRCxCKXt2YXIgRT10aGlzLnN0cmlwLmRvbS5jaGlsZE5vZGVzW0JdO3ZhciBBPUQuY2xvc2FibGU/IngtdGFiLXN0cmlwLWNsb3NhYmxlIjoiIjtpZihELmRpc2FibGVkKXtBKz0iIHgtaXRlbS1kaXNhYmxlZCJ9aWYoRC5pY29uQ2xzKXtBKz0iIHgtdGFiLXdpdGgtaWNvbiJ9aWYoRC50YWJDbHMpe0ErPSIgIitELnRhYkNsc312YXIgRj17aWQ6dGhpcy5pZCt0aGlzLmlkRGVsaW1pdGVyK0QuZ2V0SXRlbUlkKCksdGV4dDpELnRpdGxlLGNsczpBLGljb25DbHM6RC5pY29uQ2xzfHwiIn07dmFyIEM9RT90aGlzLml0ZW1UcGwuaW5zZXJ0QmVmb3JlKEUsRik6dGhpcy5pdGVtVHBsLmFwcGVuZCh0aGlzLnN0cmlwLEYpO0V4dC5mbHkoQykuYWRkQ2xhc3NPbk92ZXIoIngtdGFiLXN0cmlwLW92ZXIiKTtpZihELnRhYlRpcCl7RXh0LmZseShDKS5jaGlsZCgic3Bhbi54LXRhYi1zdHJpcC10ZXh0Iix0cnVlKS5xdGlwPUQudGFiVGlwfUQub24oImRpc2FibGUiLHRoaXMub25JdGVtRGlzYWJsZWQsdGhpcyk7RC5vbigiZW5hYmxlIix0aGlzLm9uSXRlbUVuYWJsZWQsdGhpcyk7RC5vbigidGl0bGVjaGFuZ2UiLHRoaXMub25JdGVtVGl0bGVDaGFuZ2VkLHRoaXMpO0Qub24oImJlZm9yZXNob3ciLHRoaXMub25CZWZvcmVTaG93SXRlbSx0aGlzKX0sb25BZGQ6ZnVuY3Rpb24oQyxCLEEpe3RoaXMuaW5pdFRhYihCLEEpO2lmKHRoaXMuaXRlbXMuZ2V0Q291bnQoKT09MSl7dGhpcy5zeW5jU2l6ZSgpfXRoaXMuZGVsZWdhdGVVcGRhdGVzKCl9LG9uQmVmb3JlQWRkOmZ1bmN0aW9uKEIpe3ZhciBBPUIuZXZlbnRzPyh0aGlzLml0ZW1zLmNvbnRhaW5zS2V5KEIuZ2V0SXRlbUlkKCkpP0I6bnVsbCk6dGhpcy5pdGVtcy5nZXQoQik7aWYoQSl7dGhpcy5zZXRBY3RpdmVUYWIoQik7cmV0dXJuIGZhbHNlfUV4dC5UYWJQYW5lbC5zdXBlcmNsYXNzLm9uQmVmb3JlQWRkLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgQz1CLmVsZW1lbnRzO0IuZWxlbWVudHM9Qz9DLnJlcGxhY2UoIixoZWFkZXIiLCIiKTpDO0IuYm9yZGVyPShCLmJvcmRlcj09PXRydWUpfSxvblJlbW92ZTpmdW5jdGlvbihDLEIpe0V4dC5yZW1vdmVOb2RlKHRoaXMuZ2V0VGFiRWwoQikpO3RoaXMuc3RhY2sucmVtb3ZlKEIpO2lmKEI9PXRoaXMuYWN0aXZlVGFiKXt2YXIgQT10aGlzLnN0YWNrLm5leHQoKTtpZihBKXt0aGlzLnNldEFjdGl2ZVRhYihBKX1lbHNle3RoaXMuc2V0QWN0aXZlVGFiKDApfX10aGlzLmRlbGVnYXRlVXBkYXRlcygpfSxvbkJlZm9yZVNob3dJdGVtOmZ1bmN0aW9uKEEpe2lmKEEhPXRoaXMuYWN0aXZlVGFiKXt0aGlzLnNldEFjdGl2ZVRhYihBKTtyZXR1cm4gZmFsc2V9fSxvbkl0ZW1EaXNhYmxlZDpmdW5jdGlvbihCKXt2YXIgQT10aGlzLmdldFRhYkVsKEIpO2lmKEEpe0V4dC5mbHkoQSkuYWRkQ2xhc3MoIngtaXRlbS1kaXNhYmxlZCIpfXRoaXMuc3RhY2sucmVtb3ZlKEIpfSxvbkl0ZW1FbmFibGVkOmZ1bmN0aW9uKEIpe3ZhciBBPXRoaXMuZ2V0VGFiRWwoQik7aWYoQSl7RXh0LmZseShBKS5yZW1vdmVDbGFzcygieC1pdGVtLWRpc2FibGVkIil9fSxvbkl0ZW1UaXRsZUNoYW5nZWQ6ZnVuY3Rpb24oQil7dmFyIEE9dGhpcy5nZXRUYWJFbChCKTtpZihBKXtFeHQuZmx5KEEpLmNoaWxkKCJzcGFuLngtdGFiLXN0cmlwLXRleHQiLHRydWUpLmlubmVySFRNTD1CLnRpdGxlfX0sZ2V0VGFiRWw6ZnVuY3Rpb24oQSl7dmFyIEI9KHR5cGVvZiBBPT09Im51bWJlciIpP3RoaXMuaXRlbXMuaXRlbXNbQV0uZ2V0SXRlbUlkKCk6QS5nZXRJdGVtSWQoKTtyZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5pZCt0aGlzLmlkRGVsaW1pdGVyK0IpfSxvblJlc2l6ZTpmdW5jdGlvbigpe0V4dC5UYWJQYW5lbC5zdXBlcmNsYXNzLm9uUmVzaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmRlbGVnYXRlVXBkYXRlcygpfSxiZWdpblVwZGF0ZTpmdW5jdGlvbigpe3RoaXMuc3VzcGVuZFVwZGF0ZXM9dHJ1ZX0sZW5kVXBkYXRlOmZ1bmN0aW9uKCl7dGhpcy5zdXNwZW5kVXBkYXRlcz1mYWxzZTt0aGlzLmRlbGVnYXRlVXBkYXRlcygpfSxoaWRlVGFiU3RyaXBJdGVtOmZ1bmN0aW9uKEIpe0I9dGhpcy5nZXRDb21wb25lbnQoQik7dmFyIEE9dGhpcy5nZXRUYWJFbChCKTtpZihBKXtBLnN0eWxlLmRpc3BsYXk9Im5vbmUiO3RoaXMuZGVsZWdhdGVVcGRhdGVzKCl9fSx1bmhpZGVUYWJTdHJpcEl0ZW06ZnVuY3Rpb24oQil7Qj10aGlzLmdldENvbXBvbmVudChCKTt2YXIgQT10aGlzLmdldFRhYkVsKEIpO2lmKEEpe0Euc3R5bGUuZGlzcGxheT0iIjt0aGlzLmRlbGVnYXRlVXBkYXRlcygpfX0sZGVsZWdhdGVVcGRhdGVzOmZ1bmN0aW9uKCl7aWYodGhpcy5zdXNwZW5kVXBkYXRlcyl7cmV0dXJuIH1pZih0aGlzLnJlc2l6ZVRhYnMmJnRoaXMucmVuZGVyZWQpe3RoaXMuYXV0b1NpemVUYWJzKCl9aWYodGhpcy5lbmFibGVUYWJTY3JvbGwmJnRoaXMucmVuZGVyZWQpe3RoaXMuYXV0b1Njcm9sbFRhYnMoKX19LGF1dG9TaXplVGFiczpmdW5jdGlvbigpe3ZhciBHPXRoaXMuaXRlbXMubGVuZ3RoO3ZhciBCPXRoaXMudGFiUG9zaXRpb24hPSJib3R0b20iPyJoZWFkZXIiOiJmb290ZXIiO3ZhciBDPXRoaXNbQl0uZG9tLm9mZnNldFdpZHRoO3ZhciBBPXRoaXNbQl0uZG9tLmNsaWVudFdpZHRoO2lmKCF0aGlzLnJlc2l6ZVRhYnN8fEc8MXx8IUEpe3JldHVybiB9dmFyIEk9TWF0aC5tYXgoTWF0aC5taW4oTWF0aC5mbG9vcigoQS00KS9HKS10aGlzLnRhYk1hcmdpbix0aGlzLnRhYldpZHRoKSx0aGlzLm1pblRhYldpZHRoKTt0aGlzLmxhc3RUYWJXaWR0aD1JO3ZhciBLPXRoaXMuc3RyaXBXcmFwLmRvbS5nZXRFbGVtZW50c0J5VGFnTmFtZSgibGkiKTtmb3IodmFyIEU9MCxIPUsubGVuZ3RoLTE7RTxIO0UrKyl7dmFyIEo9S1tFXTt2YXIgTD1KLmNoaWxkTm9kZXNbMV0uZmlyc3RDaGlsZC5maXJzdENoaWxkO3ZhciBGPUoub2Zmc2V0V2lkdGg7dmFyIEQ9TC5vZmZzZXRXaWR0aDtMLnN0eWxlLndpZHRoPShJLShGLUQpKSsicHgifX0sYWRqdXN0Qm9keVdpZHRoOmZ1bmN0aW9uKEEpe2lmKHRoaXMuaGVhZGVyKXt0aGlzLmhlYWRlci5zZXRXaWR0aChBKX1pZih0aGlzLmZvb3Rlcil7dGhpcy5mb290ZXIuc2V0V2lkdGgoQSl9cmV0dXJuIEF9LHNldEFjdGl2ZVRhYjpmdW5jdGlvbihDKXtDPXRoaXMuZ2V0Q29tcG9uZW50KEMpO2lmKCFDfHx0aGlzLmZpcmVFdmVudCgiYmVmb3JldGFiY2hhbmdlIix0aGlzLEMsdGhpcy5hY3RpdmVUYWIpPT09ZmFsc2Upe3JldHVybiB9aWYoIXRoaXMucmVuZGVyZWQpe3RoaXMuYWN0aXZlVGFiPUM7cmV0dXJuIH1pZih0aGlzLmFjdGl2ZVRhYiE9Qyl7aWYodGhpcy5hY3RpdmVUYWIpe3ZhciBBPXRoaXMuZ2V0VGFiRWwodGhpcy5hY3RpdmVUYWIpO2lmKEEpe0V4dC5mbHkoQSkucmVtb3ZlQ2xhc3MoIngtdGFiLXN0cmlwLWFjdGl2ZSIpfXRoaXMuYWN0aXZlVGFiLmZpcmVFdmVudCgiZGVhY3RpdmF0ZSIsdGhpcy5hY3RpdmVUYWIpfXZhciBCPXRoaXMuZ2V0VGFiRWwoQyk7RXh0LmZseShCKS5hZGRDbGFzcygieC10YWItc3RyaXAtYWN0aXZlIik7dGhpcy5hY3RpdmVUYWI9Qzt0aGlzLnN0YWNrLmFkZChDKTt0aGlzLmxheW91dC5zZXRBY3RpdmVJdGVtKEMpO2lmKHRoaXMubGF5b3V0T25UYWJDaGFuZ2UmJkMuZG9MYXlvdXQpe0MuZG9MYXlvdXQoKX1pZih0aGlzLnNjcm9sbGluZyl7dGhpcy5zY3JvbGxUb1RhYihDLHRoaXMuYW5pbVNjcm9sbCl9Qy5maXJlRXZlbnQoImFjdGl2YXRlIixDKTt0aGlzLmZpcmVFdmVudCgidGFiY2hhbmdlIix0aGlzLEMpfX0sZ2V0QWN0aXZlVGFiOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWN0aXZlVGFifHxudWxsfSxnZXRJdGVtOmZ1bmN0aW9uKEEpe3JldHVybiB0aGlzLmdldENvbXBvbmVudChBKX0sYXV0b1Njcm9sbFRhYnM6ZnVuY3Rpb24oKXt2YXIgRz10aGlzLml0ZW1zLmxlbmd0aDt2YXIgRD10aGlzLmhlYWRlci5kb20ub2Zmc2V0V2lkdGg7dmFyIEM9dGhpcy5oZWFkZXIuZG9tLmNsaWVudFdpZHRoO3ZhciBGPXRoaXMuc3RyaXBXcmFwO3ZhciBFPUYuZG9tO3ZhciBCPUUub2Zmc2V0V2lkdGg7dmFyIEg9dGhpcy5nZXRTY3JvbGxQb3MoKTt2YXIgQT10aGlzLmVkZ2UuZ2V0T2Zmc2V0c1RvKHRoaXMuc3RyaXBXcmFwKVswXStIO2lmKCF0aGlzLmVuYWJsZVRhYlNjcm9sbHx8RzwxfHxCPDIwKXtyZXR1cm4gfWlmKEE8PUMpe0Uuc2Nyb2xsTGVmdD0wO0Yuc2V0V2lkdGgoQyk7aWYodGhpcy5zY3JvbGxpbmcpe3RoaXMuc2Nyb2xsaW5nPWZhbHNlO3RoaXMuaGVhZGVyLnJlbW92ZUNsYXNzKCJ4LXRhYi1zY3JvbGxpbmciKTt0aGlzLnNjcm9sbExlZnQuaGlkZSgpO3RoaXMuc2Nyb2xsUmlnaHQuaGlkZSgpO2lmKEV4dC5pc0Fpcil7RS5zdHlsZS5tYXJnaW5MZWZ0PSIiO0Uuc3R5bGUubWFyZ2luUmlnaHQ9IiJ9fX1lbHNle2lmKCF0aGlzLnNjcm9sbGluZyl7dGhpcy5oZWFkZXIuYWRkQ2xhc3MoIngtdGFiLXNjcm9sbGluZyIpO2lmKEV4dC5pc0Fpcil7RS5zdHlsZS5tYXJnaW5MZWZ0PSIxOHB4IjtFLnN0eWxlLm1hcmdpblJpZ2h0PSIxOHB4In19Qy09Ri5nZXRNYXJnaW5zKCJsciIpO0Yuc2V0V2lkdGgoQz4yMD9DOjIwKTtpZighdGhpcy5zY3JvbGxpbmcpe2lmKCF0aGlzLnNjcm9sbExlZnQpe3RoaXMuY3JlYXRlU2Nyb2xsZXJzKCl9ZWxzZXt0aGlzLnNjcm9sbExlZnQuc2hvdygpO3RoaXMuc2Nyb2xsUmlnaHQuc2hvdygpfX10aGlzLnNjcm9sbGluZz10cnVlO2lmKEg+KEEtQykpe0Uuc2Nyb2xsTGVmdD1BLUN9ZWxzZXt0aGlzLnNjcm9sbFRvVGFiKHRoaXMuYWN0aXZlVGFiLGZhbHNlKX10aGlzLnVwZGF0ZVNjcm9sbEJ1dHRvbnMoKX19LGNyZWF0ZVNjcm9sbGVyczpmdW5jdGlvbigpe3ZhciBDPXRoaXMuc3RyaXBXcmFwLmRvbS5vZmZzZXRIZWlnaHQ7dmFyIEE9dGhpcy5oZWFkZXIuaW5zZXJ0Rmlyc3Qoe2NsczoieC10YWItc2Nyb2xsZXItbGVmdCJ9KTtBLnNldEhlaWdodChDKTtBLmFkZENsYXNzT25PdmVyKCJ4LXRhYi1zY3JvbGxlci1sZWZ0LW92ZXIiKTt0aGlzLmxlZnRSZXBlYXRlcj1uZXcgRXh0LnV0aWwuQ2xpY2tSZXBlYXRlcihBLHtpbnRlcnZhbDp0aGlzLnNjcm9sbFJlcGVhdEludGVydmFsLGhhbmRsZXI6dGhpcy5vblNjcm9sbExlZnQsc2NvcGU6dGhpc30pO3RoaXMuc2Nyb2xsTGVmdD1BO3ZhciBCPXRoaXMuaGVhZGVyLmluc2VydEZpcnN0KHtjbHM6IngtdGFiLXNjcm9sbGVyLXJpZ2h0In0pO0Iuc2V0SGVpZ2h0KEMpO0IuYWRkQ2xhc3NPbk92ZXIoIngtdGFiLXNjcm9sbGVyLXJpZ2h0LW92ZXIiKTt0aGlzLnJpZ2h0UmVwZWF0ZXI9bmV3IEV4dC51dGlsLkNsaWNrUmVwZWF0ZXIoQix7aW50ZXJ2YWw6dGhpcy5zY3JvbGxSZXBlYXRJbnRlcnZhbCxoYW5kbGVyOnRoaXMub25TY3JvbGxSaWdodCxzY29wZTp0aGlzfSk7dGhpcy5zY3JvbGxSaWdodD1CfSxnZXRTY3JvbGxXaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVkZ2UuZ2V0T2Zmc2V0c1RvKHRoaXMuc3RyaXBXcmFwKVswXSt0aGlzLmdldFNjcm9sbFBvcygpfSxnZXRTY3JvbGxQb3M6ZnVuY3Rpb24oKXtyZXR1cm4gcGFyc2VJbnQodGhpcy5zdHJpcFdyYXAuZG9tLnNjcm9sbExlZnQsMTApfHwwfSxnZXRTY3JvbGxBcmVhOmZ1bmN0aW9uKCl7cmV0dXJuIHBhcnNlSW50KHRoaXMuc3RyaXBXcmFwLmRvbS5jbGllbnRXaWR0aCwxMCl8fDB9LGdldFNjcm9sbEFuaW06ZnVuY3Rpb24oKXtyZXR1cm57ZHVyYXRpb246dGhpcy5zY3JvbGxEdXJhdGlvbixjYWxsYmFjazp0aGlzLnVwZGF0ZVNjcm9sbEJ1dHRvbnMsc2NvcGU6dGhpc319LGdldFNjcm9sbEluY3JlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNjcm9sbEluY3JlbWVudHx8KHRoaXMucmVzaXplVGFicz90aGlzLmxhc3RUYWJXaWR0aCsyOjEwMCl9LHNjcm9sbFRvVGFiOmZ1bmN0aW9uKEUsQSl7aWYoIUUpe3JldHVybiB9dmFyIEM9dGhpcy5nZXRUYWJFbChFKTt2YXIgRz10aGlzLmdldFNjcm9sbFBvcygpLEQ9dGhpcy5nZXRTY3JvbGxBcmVhKCk7dmFyIEY9RXh0LmZseShDKS5nZXRPZmZzZXRzVG8odGhpcy5zdHJpcFdyYXApWzBdK0c7dmFyIEI9RitDLm9mZnNldFdpZHRoO2lmKEY8Ryl7dGhpcy5zY3JvbGxUbyhGLEEpfWVsc2V7aWYoQj4oRytEKSl7dGhpcy5zY3JvbGxUbyhCLUQsQSl9fX0sc2Nyb2xsVG86ZnVuY3Rpb24oQixBKXt0aGlzLnN0cmlwV3JhcC5zY3JvbGxUbygibGVmdCIsQixBP3RoaXMuZ2V0U2Nyb2xsQW5pbSgpOmZhbHNlKTtpZighQSl7dGhpcy51cGRhdGVTY3JvbGxCdXR0b25zKCl9fSxvbldoZWVsOmZ1bmN0aW9uKEQpe3ZhciBFPUQuZ2V0V2hlZWxEZWx0YSgpKnRoaXMud2hlZWxJbmNyZW1lbnQqLTE7RC5zdG9wRXZlbnQoKTt2YXIgRj10aGlzLmdldFNjcm9sbFBvcygpO3ZhciBDPUYrRTt2YXIgQT10aGlzLmdldFNjcm9sbFdpZHRoKCktdGhpcy5nZXRTY3JvbGxBcmVhKCk7dmFyIEI9TWF0aC5tYXgoMCxNYXRoLm1pbihBLEMpKTtpZihCIT1GKXt0aGlzLnNjcm9sbFRvKEIsZmFsc2UpfX0sb25TY3JvbGxSaWdodDpmdW5jdGlvbigpe3ZhciBBPXRoaXMuZ2V0U2Nyb2xsV2lkdGgoKS10aGlzLmdldFNjcm9sbEFyZWEoKTt2YXIgQz10aGlzLmdldFNjcm9sbFBvcygpO3ZhciBCPU1hdGgubWluKEEsQyt0aGlzLmdldFNjcm9sbEluY3JlbWVudCgpKTtpZihCIT1DKXt0aGlzLnNjcm9sbFRvKEIsdGhpcy5hbmltU2Nyb2xsKX19LG9uU2Nyb2xsTGVmdDpmdW5jdGlvbigpe3ZhciBCPXRoaXMuZ2V0U2Nyb2xsUG9zKCk7dmFyIEE9TWF0aC5tYXgoMCxCLXRoaXMuZ2V0U2Nyb2xsSW5jcmVtZW50KCkpO2lmKEEhPUIpe3RoaXMuc2Nyb2xsVG8oQSx0aGlzLmFuaW1TY3JvbGwpfX0sdXBkYXRlU2Nyb2xsQnV0dG9uczpmdW5jdGlvbigpe3ZhciBBPXRoaXMuZ2V0U2Nyb2xsUG9zKCk7dGhpcy5zY3JvbGxMZWZ0W0E9PTA/ImFkZENsYXNzIjoicmVtb3ZlQ2xhc3MiXSgieC10YWItc2Nyb2xsZXItbGVmdC1kaXNhYmxlZCIpO3RoaXMuc2Nyb2xsUmlnaHRbQT49KHRoaXMuZ2V0U2Nyb2xsV2lkdGgoKS10aGlzLmdldFNjcm9sbEFyZWEoKSk/ImFkZENsYXNzIjoicmVtb3ZlQ2xhc3MiXSgieC10YWItc2Nyb2xsZXItcmlnaHQtZGlzYWJsZWQiKX19KTtFeHQucmVnKCJ0YWJwYW5lbCIsRXh0LlRhYlBhbmVsKTtFeHQuVGFiUGFuZWwucHJvdG90eXBlLmFjdGl2YXRlPUV4dC5UYWJQYW5lbC5wcm90b3R5cGUuc2V0QWN0aXZlVGFiO0V4dC5UYWJQYW5lbC5BY2Nlc3NTdGFjaz1mdW5jdGlvbigpe3ZhciBBPVtdO3JldHVybnthZGQ6ZnVuY3Rpb24oQil7QS5wdXNoKEIpO2lmKEEubGVuZ3RoPjEwKXtBLnNoaWZ0KCl9fSxyZW1vdmU6ZnVuY3Rpb24oRSl7dmFyIEQ9W107Zm9yKHZhciBDPTAsQj1BLmxlbmd0aDtDPEI7QysrKXtpZihBW0NdIT1FKXtELnB1c2goQVtDXSl9fUE9RH0sbmV4dDpmdW5jdGlvbigpe3JldHVybiBBLnBvcCgpfX19Ow0KRXh0LkJ1dHRvbj1FeHQuZXh0ZW5kKEV4dC5Db21wb25lbnQse2hpZGRlbjpmYWxzZSxkaXNhYmxlZDpmYWxzZSxwcmVzc2VkOmZhbHNlLGVuYWJsZVRvZ2dsZTpmYWxzZSxtZW51QWxpZ246InRsLWJsPyIsdHlwZToiYnV0dG9uIixtZW51Q2xhc3NUYXJnZXQ6InRyIixjbGlja0V2ZW50OiJjbGljayIsaGFuZGxlTW91c2VFdmVudHM6dHJ1ZSx0b29sdGlwVHlwZToicXRpcCIsYnV0dG9uU2VsZWN0b3I6ImJ1dHRvbjpmaXJzdCIsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe0V4dC5CdXR0b24uc3VwZXJjbGFzcy5pbml0Q29tcG9uZW50LmNhbGwodGhpcyk7dGhpcy5hZGRFdmVudHMoImNsaWNrIiwidG9nZ2xlIiwibW91c2VvdmVyIiwibW91c2VvdXQiLCJtZW51c2hvdyIsIm1lbnVoaWRlIiwibWVudXRyaWdnZXJvdmVyIiwibWVudXRyaWdnZXJvdXQiKTtpZih0aGlzLm1lbnUpe3RoaXMubWVudT1FeHQubWVudS5NZW51TWdyLmdldCh0aGlzLm1lbnUpfWlmKHR5cGVvZiB0aGlzLnRvZ2dsZUdyb3VwPT09InN0cmluZyIpe3RoaXMuZW5hYmxlVG9nZ2xlPXRydWV9fSxvblJlbmRlcjpmdW5jdGlvbihDLEEpe2lmKCF0aGlzLnRlbXBsYXRlKXtpZighRXh0LkJ1dHRvbi5idXR0b25UZW1wbGF0ZSl7RXh0LkJ1dHRvbi5idXR0b25UZW1wbGF0ZT1uZXcgRXh0LlRlbXBsYXRlKCI8dGFibGUgYm9yZGVyPVwiMFwiIGNlbGxwYWRkaW5nPVwiMFwiIGNlbGxzcGFjaW5nPVwiMFwiIGNsYXNzPVwieC1idG4td3JhcFwiPjx0Ym9keT48dHI+IiwiPHRkIGNsYXNzPVwieC1idG4tbGVmdFwiPjxpPiYjMTYwOzwvaT48L3RkPjx0ZCBjbGFzcz1cIngtYnRuLWNlbnRlclwiPjxlbSB1bnNlbGVjdGFibGU9XCJvblwiPjxidXR0b24gY2xhc3M9XCJ4LWJ0bi10ZXh0XCIgdHlwZT1cInsxfVwiPnswfTwvYnV0dG9uPjwvZW0+PC90ZD48dGQgY2xhc3M9XCJ4LWJ0bi1yaWdodFwiPjxpPiYjMTYwOzwvaT48L3RkPiIsIjwvdHI+PC90Ym9keT48L3RhYmxlPiIpfXRoaXMudGVtcGxhdGU9RXh0LkJ1dHRvbi5idXR0b25UZW1wbGF0ZX12YXIgQixFPVt0aGlzLnRleHR8fCImIzE2MDsiLHRoaXMudHlwZV07aWYoQSl7Qj10aGlzLnRlbXBsYXRlLmluc2VydEJlZm9yZShBLEUsdHJ1ZSl9ZWxzZXtCPXRoaXMudGVtcGxhdGUuYXBwZW5kKEMsRSx0cnVlKX12YXIgRD1CLmNoaWxkKHRoaXMuYnV0dG9uU2VsZWN0b3IpO0Qub24oImZvY3VzIix0aGlzLm9uRm9jdXMsdGhpcyk7RC5vbigiYmx1ciIsdGhpcy5vbkJsdXIsdGhpcyk7dGhpcy5pbml0QnV0dG9uRWwoQixEKTtpZih0aGlzLm1lbnUpe3RoaXMuZWwuY2hpbGQodGhpcy5tZW51Q2xhc3NUYXJnZXQpLmFkZENsYXNzKCJ4LWJ0bi13aXRoLW1lbnUiKX1FeHQuQnV0dG9uVG9nZ2xlTWdyLnJlZ2lzdGVyKHRoaXMpfSxpbml0QnV0dG9uRWw6ZnVuY3Rpb24oQixDKXt0aGlzLmVsPUI7Qi5hZGRDbGFzcygieC1idG4iKTtpZih0aGlzLmljb24pe0Muc2V0U3R5bGUoImJhY2tncm91bmQtaW1hZ2UiLCJ1cmwoIit0aGlzLmljb24rIikiKX1pZih0aGlzLmljb25DbHMpe0MuYWRkQ2xhc3ModGhpcy5pY29uQ2xzKTtpZighdGhpcy5jbHMpe0IuYWRkQ2xhc3ModGhpcy50ZXh0PyJ4LWJ0bi10ZXh0LWljb24iOiJ4LWJ0bi1pY29uIil9fWlmKHRoaXMudGFiSW5kZXghPT11bmRlZmluZWQpe0MuZG9tLnRhYkluZGV4PXRoaXMudGFiSW5kZXh9aWYodGhpcy50b29sdGlwKXtpZih0eXBlb2YgdGhpcy50b29sdGlwPT0ib2JqZWN0Iil7RXh0LlF1aWNrVGlwcy5yZWdpc3RlcihFeHQuYXBwbHkoe3RhcmdldDpDLmlkfSx0aGlzLnRvb2x0aXApKX1lbHNle0MuZG9tW3RoaXMudG9vbHRpcFR5cGVdPXRoaXMudG9vbHRpcH19aWYodGhpcy5wcmVzc2VkKXt0aGlzLmVsLmFkZENsYXNzKCJ4LWJ0bi1wcmVzc2VkIil9aWYodGhpcy5oYW5kbGVNb3VzZUV2ZW50cyl7Qi5vbigibW91c2VvdmVyIix0aGlzLm9uTW91c2VPdmVyLHRoaXMpO0Iub24oIm1vdXNlZG93biIsdGhpcy5vbk1vdXNlRG93bix0aGlzKX1pZih0aGlzLm1lbnUpe3RoaXMubWVudS5vbigic2hvdyIsdGhpcy5vbk1lbnVTaG93LHRoaXMpO3RoaXMubWVudS5vbigiaGlkZSIsdGhpcy5vbk1lbnVIaWRlLHRoaXMpfWlmKHRoaXMuaWQpe3RoaXMuZWwuZG9tLmlkPXRoaXMuZWwuaWQ9dGhpcy5pZH1pZih0aGlzLnJlcGVhdCl7dmFyIEE9bmV3IEV4dC51dGlsLkNsaWNrUmVwZWF0ZXIoQix0eXBlb2YgdGhpcy5yZXBlYXQ9PSJvYmplY3QiP3RoaXMucmVwZWF0Ont9KTtBLm9uKCJjbGljayIsdGhpcy5vbkNsaWNrLHRoaXMpfUIub24odGhpcy5jbGlja0V2ZW50LHRoaXMub25DbGljayx0aGlzKX0sYWZ0ZXJSZW5kZXI6ZnVuY3Rpb24oKXtFeHQuQnV0dG9uLnN1cGVyY2xhc3MuYWZ0ZXJSZW5kZXIuY2FsbCh0aGlzKTtpZihFeHQuaXNJRTYpe3RoaXMuYXV0b1dpZHRoLmRlZmVyKDEsdGhpcyl9ZWxzZXt0aGlzLmF1dG9XaWR0aCgpfX0sc2V0SWNvbkNsYXNzOmZ1bmN0aW9uKEEpe2lmKHRoaXMuZWwpe3RoaXMuZWwuY2hpbGQodGhpcy5idXR0b25TZWxlY3RvcikucmVwbGFjZUNsYXNzKHRoaXMuaWNvbkNscyxBKX10aGlzLmljb25DbHM9QX0sYmVmb3JlRGVzdHJveTpmdW5jdGlvbigpe2lmKHRoaXMucmVuZGVyZWQpe3ZhciBBPXRoaXMuZWwuY2hpbGQodGhpcy5idXR0b25TZWxlY3Rvcik7aWYoQSl7QS5yZW1vdmVBbGxMaXN0ZW5lcnMoKX19aWYodGhpcy5tZW51KXtFeHQuZGVzdHJveSh0aGlzLm1lbnUpfX0sb25EZXN0cm95OmZ1bmN0aW9uKCl7aWYodGhpcy5yZW5kZXJlZCl7RXh0LkJ1dHRvblRvZ2dsZU1nci51bnJlZ2lzdGVyKHRoaXMpfX0sYXV0b1dpZHRoOmZ1bmN0aW9uKCl7aWYodGhpcy5lbCl7dGhpcy5lbC5zZXRXaWR0aCgiYXV0byIpO2lmKEV4dC5pc0lFNyYmRXh0LmlzU3RyaWN0KXt2YXIgQT10aGlzLmVsLmNoaWxkKHRoaXMuYnV0dG9uU2VsZWN0b3IpO2lmKEEmJkEuZ2V0V2lkdGgoKT4yMCl7QS5jbGlwKCk7QS5zZXRXaWR0aChFeHQudXRpbC5UZXh0TWV0cmljcy5tZWFzdXJlKEEsdGhpcy50ZXh0KS53aWR0aCtBLmdldEZyYW1lV2lkdGgoImxyIikpfX1pZih0aGlzLm1pbldpZHRoKXtpZih0aGlzLmVsLmdldFdpZHRoKCk8dGhpcy5taW5XaWR0aCl7dGhpcy5lbC5zZXRXaWR0aCh0aGlzLm1pbldpZHRoKX19fX0sc2V0SGFuZGxlcjpmdW5jdGlvbihCLEEpe3RoaXMuaGFuZGxlcj1CO3RoaXMuc2NvcGU9QX0sc2V0VGV4dDpmdW5jdGlvbihBKXt0aGlzLnRleHQ9QTtpZih0aGlzLmVsKXt0aGlzLmVsLmNoaWxkKCJ0ZC54LWJ0bi1jZW50ZXIgIit0aGlzLmJ1dHRvblNlbGVjdG9yKS51cGRhdGUoQSl9dGhpcy5hdXRvV2lkdGgoKX0sZ2V0VGV4dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHR9LHRvZ2dsZTpmdW5jdGlvbihBKXtBPUE9PT11bmRlZmluZWQ/IXRoaXMucHJlc3NlZDpBO2lmKEEhPXRoaXMucHJlc3NlZCl7aWYoQSl7dGhpcy5lbC5hZGRDbGFzcygieC1idG4tcHJlc3NlZCIpO3RoaXMucHJlc3NlZD10cnVlO3RoaXMuZmlyZUV2ZW50KCJ0b2dnbGUiLHRoaXMsdHJ1ZSl9ZWxzZXt0aGlzLmVsLnJlbW92ZUNsYXNzKCJ4LWJ0bi1wcmVzc2VkIik7dGhpcy5wcmVzc2VkPWZhbHNlO3RoaXMuZmlyZUV2ZW50KCJ0b2dnbGUiLHRoaXMsZmFsc2UpfWlmKHRoaXMudG9nZ2xlSGFuZGxlcil7dGhpcy50b2dnbGVIYW5kbGVyLmNhbGwodGhpcy5zY29wZXx8dGhpcyx0aGlzLEEpfX19LGZvY3VzOmZ1bmN0aW9uKCl7dGhpcy5lbC5jaGlsZCh0aGlzLmJ1dHRvblNlbGVjdG9yKS5mb2N1cygpfSxvbkRpc2FibGU6ZnVuY3Rpb24oKXtpZih0aGlzLmVsKXtpZighRXh0LmlzSUU2fHwhdGhpcy50ZXh0KXt0aGlzLmVsLmFkZENsYXNzKHRoaXMuZGlzYWJsZWRDbGFzcyl9dGhpcy5lbC5kb20uZGlzYWJsZWQ9dHJ1ZX10aGlzLmRpc2FibGVkPXRydWV9LG9uRW5hYmxlOmZ1bmN0aW9uKCl7aWYodGhpcy5lbCl7aWYoIUV4dC5pc0lFNnx8IXRoaXMudGV4dCl7dGhpcy5lbC5yZW1vdmVDbGFzcyh0aGlzLmRpc2FibGVkQ2xhc3MpfXRoaXMuZWwuZG9tLmRpc2FibGVkPWZhbHNlfXRoaXMuZGlzYWJsZWQ9ZmFsc2V9LHNob3dNZW51OmZ1bmN0aW9uKCl7aWYodGhpcy5tZW51KXt0aGlzLm1lbnUuc2hvdyh0aGlzLmVsLHRoaXMubWVudUFsaWduKX1yZXR1cm4gdGhpc30saGlkZU1lbnU6ZnVuY3Rpb24oKXtpZih0aGlzLm1lbnUpe3RoaXMubWVudS5oaWRlKCl9cmV0dXJuIHRoaXN9LGhhc1Zpc2libGVNZW51OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWVudSYmdGhpcy5tZW51LmlzVmlzaWJsZSgpfSxvbkNsaWNrOmZ1bmN0aW9uKEEpe2lmKEEpe0EucHJldmVudERlZmF1bHQoKX1pZihBLmJ1dHRvbiE9MCl7cmV0dXJuIH1pZighdGhpcy5kaXNhYmxlZCl7aWYodGhpcy5lbmFibGVUb2dnbGUmJih0aGlzLmFsbG93RGVwcmVzcyE9PWZhbHNlfHwhdGhpcy5wcmVzc2VkKSl7dGhpcy50b2dnbGUoKX1pZih0aGlzLm1lbnUmJiF0aGlzLm1lbnUuaXNWaXNpYmxlKCkmJiF0aGlzLmlnbm9yZU5leHRDbGljayl7dGhpcy5zaG93TWVudSgpfXRoaXMuZmlyZUV2ZW50KCJjbGljayIsdGhpcyxBKTtpZih0aGlzLmhhbmRsZXIpe3RoaXMuaGFuZGxlci5jYWxsKHRoaXMuc2NvcGV8fHRoaXMsdGhpcyxBKX19fSxpc01lbnVUcmlnZ2VyT3ZlcjpmdW5jdGlvbihCLEEpe3JldHVybiB0aGlzLm1lbnUmJiFBfSxpc01lbnVUcmlnZ2VyT3V0OmZ1bmN0aW9uKEIsQSl7cmV0dXJuIHRoaXMubWVudSYmIUF9LG9uTW91c2VPdmVyOmZ1bmN0aW9uKEIpe2lmKCF0aGlzLmRpc2FibGVkKXt2YXIgQT1CLndpdGhpbih0aGlzLmVsLHRydWUpO2lmKCFBKXt0aGlzLmVsLmFkZENsYXNzKCJ4LWJ0bi1vdmVyIik7RXh0LmdldERvYygpLm9uKCJtb3VzZW92ZXIiLHRoaXMubW9uaXRvck1vdXNlT3Zlcix0aGlzKTt0aGlzLmZpcmVFdmVudCgibW91c2VvdmVyIix0aGlzLEIpfWlmKHRoaXMuaXNNZW51VHJpZ2dlck92ZXIoQixBKSl7dGhpcy5maXJlRXZlbnQoIm1lbnV0cmlnZ2Vyb3ZlciIsdGhpcyx0aGlzLm1lbnUsQil9fX0sbW9uaXRvck1vdXNlT3ZlcjpmdW5jdGlvbihBKXtpZihBLnRhcmdldCE9dGhpcy5lbC5kb20mJiFBLndpdGhpbih0aGlzLmVsKSl7RXh0LmdldERvYygpLnVuKCJtb3VzZW92ZXIiLHRoaXMubW9uaXRvck1vdXNlT3Zlcix0aGlzKTt0aGlzLm9uTW91c2VPdXQoQSl9fSxvbk1vdXNlT3V0OmZ1bmN0aW9uKEIpe3ZhciBBPUIud2l0aGluKHRoaXMuZWwpJiZCLnRhcmdldCE9dGhpcy5lbC5kb207dGhpcy5lbC5yZW1vdmVDbGFzcygieC1idG4tb3ZlciIpO3RoaXMuZmlyZUV2ZW50KCJtb3VzZW91dCIsdGhpcyxCKTtpZih0aGlzLmlzTWVudVRyaWdnZXJPdXQoQixBKSl7dGhpcy5maXJlRXZlbnQoIm1lbnV0cmlnZ2Vyb3V0Iix0aGlzLHRoaXMubWVudSxCKX19LG9uRm9jdXM6ZnVuY3Rpb24oQSl7aWYoIXRoaXMuZGlzYWJsZWQpe3RoaXMuZWwuYWRkQ2xhc3MoIngtYnRuLWZvY3VzIil9fSxvbkJsdXI6ZnVuY3Rpb24oQSl7dGhpcy5lbC5yZW1vdmVDbGFzcygieC1idG4tZm9jdXMiKX0sZ2V0Q2xpY2tFbDpmdW5jdGlvbihCLEEpe3JldHVybiB0aGlzLmVsfSxvbk1vdXNlRG93bjpmdW5jdGlvbihBKXtpZighdGhpcy5kaXNhYmxlZCYmQS5idXR0b249PTApe3RoaXMuZ2V0Q2xpY2tFbChBKS5hZGRDbGFzcygieC1idG4tY2xpY2siKTtFeHQuZ2V0RG9jKCkub24oIm1vdXNldXAiLHRoaXMub25Nb3VzZVVwLHRoaXMpfX0sb25Nb3VzZVVwOmZ1bmN0aW9uKEEpe2lmKEEuYnV0dG9uPT0wKXt0aGlzLmdldENsaWNrRWwoQSx0cnVlKS5yZW1vdmVDbGFzcygieC1idG4tY2xpY2siKTtFeHQuZ2V0RG9jKCkudW4oIm1vdXNldXAiLHRoaXMub25Nb3VzZVVwLHRoaXMpfX0sb25NZW51U2hvdzpmdW5jdGlvbihBKXt0aGlzLmlnbm9yZU5leHRDbGljaz0wO3RoaXMuZWwuYWRkQ2xhc3MoIngtYnRuLW1lbnUtYWN0aXZlIik7dGhpcy5maXJlRXZlbnQoIm1lbnVzaG93Iix0aGlzLHRoaXMubWVudSl9LG9uTWVudUhpZGU6ZnVuY3Rpb24oQSl7dGhpcy5lbC5yZW1vdmVDbGFzcygieC1idG4tbWVudS1hY3RpdmUiKTt0aGlzLmlnbm9yZU5leHRDbGljaz10aGlzLnJlc3RvcmVDbGljay5kZWZlcigyNTAsdGhpcyk7dGhpcy5maXJlRXZlbnQoIm1lbnVoaWRlIix0aGlzLHRoaXMubWVudSl9LHJlc3RvcmVDbGljazpmdW5jdGlvbigpe3RoaXMuaWdub3JlTmV4dENsaWNrPTB9fSk7RXh0LnJlZygiYnV0dG9uIixFeHQuQnV0dG9uKTtFeHQuQnV0dG9uVG9nZ2xlTWdyPWZ1bmN0aW9uKCl7dmFyIEE9e307ZnVuY3Rpb24gQihFLEcpe2lmKEcpe3ZhciBGPUFbRS50b2dnbGVHcm91cF07Zm9yKHZhciBEPTAsQz1GLmxlbmd0aDtEPEM7RCsrKXtpZihGW0RdIT1FKXtGW0RdLnRvZ2dsZShmYWxzZSl9fX19cmV0dXJue3JlZ2lzdGVyOmZ1bmN0aW9uKEMpe2lmKCFDLnRvZ2dsZUdyb3VwKXtyZXR1cm4gfXZhciBEPUFbQy50b2dnbGVHcm91cF07aWYoIUQpe0Q9QVtDLnRvZ2dsZUdyb3VwXT1bXX1ELnB1c2goQyk7Qy5vbigidG9nZ2xlIixCKX0sdW5yZWdpc3RlcjpmdW5jdGlvbihDKXtpZighQy50b2dnbGVHcm91cCl7cmV0dXJuIH12YXIgRD1BW0MudG9nZ2xlR3JvdXBdO2lmKEQpe0QucmVtb3ZlKEMpO0MudW4oInRvZ2dsZSIsQil9fX19KCk7DQpFeHQuU3BsaXRCdXR0b249RXh0LmV4dGVuZChFeHQuQnV0dG9uLHthcnJvd1NlbGVjdG9yOiJidXR0b246bGFzdCIsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe0V4dC5TcGxpdEJ1dHRvbi5zdXBlcmNsYXNzLmluaXRDb21wb25lbnQuY2FsbCh0aGlzKTt0aGlzLmFkZEV2ZW50cygiYXJyb3djbGljayIpfSxvblJlbmRlcjpmdW5jdGlvbihELEEpe3ZhciBCPW5ldyBFeHQuVGVtcGxhdGUoIjx0YWJsZSBjZWxsc3BhY2luZz1cIjBcIiBjbGFzcz1cIngtYnRuLW1lbnUtd3JhcCB4LWJ0blwiPjx0cj48dGQ+IiwiPHRhYmxlIGNlbGxzcGFjaW5nPVwiMFwiIGNsYXNzPVwieC1idG4td3JhcCB4LWJ0bi1tZW51LXRleHQtd3JhcFwiPjx0Ym9keT4iLCI8dHI+PHRkIGNsYXNzPVwieC1idG4tbGVmdFwiPjxpPiYjMTYwOzwvaT48L3RkPjx0ZCBjbGFzcz1cIngtYnRuLWNlbnRlclwiPjxidXR0b24gY2xhc3M9XCJ4LWJ0bi10ZXh0XCIgdHlwZT1cInsxfVwiPnswfTwvYnV0dG9uPjwvdGQ+PC90cj4iLCI8L3Rib2R5PjwvdGFibGU+PC90ZD48dGQ+IiwiPHRhYmxlIGNlbGxzcGFjaW5nPVwiMFwiIGNsYXNzPVwieC1idG4td3JhcCB4LWJ0bi1tZW51LWFycm93LXdyYXBcIj48dGJvZHk+IiwiPHRyPjx0ZCBjbGFzcz1cIngtYnRuLWNlbnRlclwiPjxidXR0b24gY2xhc3M9XCJ4LWJ0bi1tZW51LWFycm93LWVsXCIgdHlwZT1cImJ1dHRvblwiPiYjMTYwOzwvYnV0dG9uPjwvdGQ+PHRkIGNsYXNzPVwieC1idG4tcmlnaHRcIj48aT4mIzE2MDs8L2k+PC90ZD48L3RyPiIsIjwvdGJvZHk+PC90YWJsZT48L3RkPjwvdHI+PC90YWJsZT4iKTt2YXIgQyxGPVt0aGlzLnRleHR8fCImIzE2MDsiLHRoaXMudHlwZV07aWYoQSl7Qz1CLmluc2VydEJlZm9yZShBLEYsdHJ1ZSl9ZWxzZXtDPUIuYXBwZW5kKEQsRix0cnVlKX12YXIgRT1DLmNoaWxkKHRoaXMuYnV0dG9uU2VsZWN0b3IpO3RoaXMuaW5pdEJ1dHRvbkVsKEMsRSk7dGhpcy5hcnJvd0J0blRhYmxlPUMuY2hpbGQoInRhYmxlOmxhc3QiKTtpZih0aGlzLmFycm93VG9vbHRpcCl7Qy5jaGlsZCh0aGlzLmFycm93U2VsZWN0b3IpLmRvbVt0aGlzLnRvb2x0aXBUeXBlXT10aGlzLmFycm93VG9vbHRpcH19LGF1dG9XaWR0aDpmdW5jdGlvbigpe2lmKHRoaXMuZWwpe3ZhciBDPXRoaXMuZWwuY2hpbGQoInRhYmxlOmZpcnN0Iik7dmFyIEI9dGhpcy5lbC5jaGlsZCgidGFibGU6bGFzdCIpO3RoaXMuZWwuc2V0V2lkdGgoImF1dG8iKTtDLnNldFdpZHRoKCJhdXRvIik7aWYoRXh0LmlzSUU3JiZFeHQuaXNTdHJpY3Qpe3ZhciBBPXRoaXMuZWwuY2hpbGQodGhpcy5idXR0b25TZWxlY3Rvcik7aWYoQSYmQS5nZXRXaWR0aCgpPjIwKXtBLmNsaXAoKTtBLnNldFdpZHRoKEV4dC51dGlsLlRleHRNZXRyaWNzLm1lYXN1cmUoQSx0aGlzLnRleHQpLndpZHRoK0EuZ2V0RnJhbWVXaWR0aCgibHIiKSl9fWlmKHRoaXMubWluV2lkdGgpe2lmKChDLmdldFdpZHRoKCkrQi5nZXRXaWR0aCgpKTx0aGlzLm1pbldpZHRoKXtDLnNldFdpZHRoKHRoaXMubWluV2lkdGgtQi5nZXRXaWR0aCgpKX19dGhpcy5lbC5zZXRXaWR0aChDLmdldFdpZHRoKCkrQi5nZXRXaWR0aCgpKX19LHNldEFycm93SGFuZGxlcjpmdW5jdGlvbihCLEEpe3RoaXMuYXJyb3dIYW5kbGVyPUI7dGhpcy5zY29wZT1BfSxvbkNsaWNrOmZ1bmN0aW9uKEEpe0EucHJldmVudERlZmF1bHQoKTtpZighdGhpcy5kaXNhYmxlZCl7aWYoQS5nZXRUYXJnZXQoIi54LWJ0bi1tZW51LWFycm93LXdyYXAiKSl7aWYodGhpcy5tZW51JiYhdGhpcy5tZW51LmlzVmlzaWJsZSgpJiYhdGhpcy5pZ25vcmVOZXh0Q2xpY2spe3RoaXMuc2hvd01lbnUoKX10aGlzLmZpcmVFdmVudCgiYXJyb3djbGljayIsdGhpcyxBKTtpZih0aGlzLmFycm93SGFuZGxlcil7dGhpcy5hcnJvd0hhbmRsZXIuY2FsbCh0aGlzLnNjb3BlfHx0aGlzLHRoaXMsQSl9fWVsc2V7aWYodGhpcy5lbmFibGVUb2dnbGUpe3RoaXMudG9nZ2xlKCl9dGhpcy5maXJlRXZlbnQoImNsaWNrIix0aGlzLEEpO2lmKHRoaXMuaGFuZGxlcil7dGhpcy5oYW5kbGVyLmNhbGwodGhpcy5zY29wZXx8dGhpcyx0aGlzLEEpfX19fSxnZXRDbGlja0VsOmZ1bmN0aW9uKEIsQSl7aWYoIUEpe3JldHVybih0aGlzLmxhc3RDbGlja0VsPUIuZ2V0VGFyZ2V0KCJ0YWJsZSIsMTAsdHJ1ZSkpfXJldHVybiB0aGlzLmxhc3RDbGlja0VsfSxvbkRpc2FibGU6ZnVuY3Rpb24oKXtpZih0aGlzLmVsKXtpZighRXh0LmlzSUU2KXt0aGlzLmVsLmFkZENsYXNzKCJ4LWl0ZW0tZGlzYWJsZWQiKX10aGlzLmVsLmNoaWxkKHRoaXMuYnV0dG9uU2VsZWN0b3IpLmRvbS5kaXNhYmxlZD10cnVlO3RoaXMuZWwuY2hpbGQodGhpcy5hcnJvd1NlbGVjdG9yKS5kb20uZGlzYWJsZWQ9dHJ1ZX10aGlzLmRpc2FibGVkPXRydWV9LG9uRW5hYmxlOmZ1bmN0aW9uKCl7aWYodGhpcy5lbCl7aWYoIUV4dC5pc0lFNil7dGhpcy5lbC5yZW1vdmVDbGFzcygieC1pdGVtLWRpc2FibGVkIil9dGhpcy5lbC5jaGlsZCh0aGlzLmJ1dHRvblNlbGVjdG9yKS5kb20uZGlzYWJsZWQ9ZmFsc2U7dGhpcy5lbC5jaGlsZCh0aGlzLmFycm93U2VsZWN0b3IpLmRvbS5kaXNhYmxlZD1mYWxzZX10aGlzLmRpc2FibGVkPWZhbHNlfSxpc01lbnVUcmlnZ2VyT3ZlcjpmdW5jdGlvbihBKXtyZXR1cm4gdGhpcy5tZW51JiZBLndpdGhpbih0aGlzLmFycm93QnRuVGFibGUpJiYhQS53aXRoaW4odGhpcy5hcnJvd0J0blRhYmxlLHRydWUpfSxpc01lbnVUcmlnZ2VyT3V0OmZ1bmN0aW9uKEIsQSl7cmV0dXJuIHRoaXMubWVudSYmIUIud2l0aGluKHRoaXMuYXJyb3dCdG5UYWJsZSl9LG9uRGVzdHJveTpmdW5jdGlvbigpe0V4dC5kZXN0cm95KHRoaXMuYXJyb3dCdG5UYWJsZSk7RXh0LlNwbGl0QnV0dG9uLnN1cGVyY2xhc3Mub25EZXN0cm95LmNhbGwodGhpcyl9fSk7RXh0Lk1lbnVCdXR0b249RXh0LlNwbGl0QnV0dG9uO0V4dC5yZWcoInNwbGl0YnV0dG9uIixFeHQuU3BsaXRCdXR0b24pOw0KRXh0LkN5Y2xlQnV0dG9uPUV4dC5leHRlbmQoRXh0LlNwbGl0QnV0dG9uLHtnZXRJdGVtVGV4dDpmdW5jdGlvbihBKXtpZihBJiZ0aGlzLnNob3dUZXh0PT09dHJ1ZSl7dmFyIEI9IiI7aWYodGhpcy5wcmVwZW5kVGV4dCl7Qis9dGhpcy5wcmVwZW5kVGV4dH1CKz1BLnRleHQ7cmV0dXJuIEJ9cmV0dXJuIHVuZGVmaW5lZH0sc2V0QWN0aXZlSXRlbTpmdW5jdGlvbihDLEEpe2lmKHR5cGVvZiBDIT0ib2JqZWN0Iil7Qz10aGlzLm1lbnUuaXRlbXMuZ2V0KEMpfWlmKEMpe2lmKCF0aGlzLnJlbmRlcmVkKXt0aGlzLnRleHQ9dGhpcy5nZXRJdGVtVGV4dChDKTt0aGlzLmljb25DbHM9Qy5pY29uQ2xzfWVsc2V7dmFyIEI9dGhpcy5nZXRJdGVtVGV4dChDKTtpZihCKXt0aGlzLnNldFRleHQoQil9dGhpcy5zZXRJY29uQ2xhc3MoQy5pY29uQ2xzKX10aGlzLmFjdGl2ZUl0ZW09QztpZighQy5jaGVja2VkKXtDLnNldENoZWNrZWQodHJ1ZSx0cnVlKX1pZih0aGlzLmZvcmNlSWNvbil7dGhpcy5zZXRJY29uQ2xhc3ModGhpcy5mb3JjZUljb24pfWlmKCFBKXt0aGlzLmZpcmVFdmVudCgiY2hhbmdlIix0aGlzLEMpfX19LGdldEFjdGl2ZUl0ZW06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hY3RpdmVJdGVtfSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7dGhpcy5hZGRFdmVudHMoImNoYW5nZSIpO2lmKHRoaXMuY2hhbmdlSGFuZGxlcil7dGhpcy5vbigiY2hhbmdlIix0aGlzLmNoYW5nZUhhbmRsZXIsdGhpcy5zY29wZXx8dGhpcyk7ZGVsZXRlIHRoaXMuY2hhbmdlSGFuZGxlcn10aGlzLml0ZW1Db3VudD10aGlzLml0ZW1zLmxlbmd0aDt0aGlzLm1lbnU9e2NsczoieC1jeWNsZS1tZW51IixpdGVtczpbXX07dmFyIEQ7Zm9yKHZhciBCPTAsQT10aGlzLml0ZW1Db3VudDtCPEE7QisrKXt2YXIgQz10aGlzLml0ZW1zW0JdO0MuZ3JvdXA9Qy5ncm91cHx8dGhpcy5pZDtDLml0ZW1JbmRleD1CO0MuY2hlY2tIYW5kbGVyPXRoaXMuY2hlY2tIYW5kbGVyO0Muc2NvcGU9dGhpcztDLmNoZWNrZWQ9Qy5jaGVja2VkfHxmYWxzZTt0aGlzLm1lbnUuaXRlbXMucHVzaChDKTtpZihDLmNoZWNrZWQpe0Q9Q319dGhpcy5zZXRBY3RpdmVJdGVtKEQsdHJ1ZSk7RXh0LkN5Y2xlQnV0dG9uLnN1cGVyY2xhc3MuaW5pdENvbXBvbmVudC5jYWxsKHRoaXMpO3RoaXMub24oImNsaWNrIix0aGlzLnRvZ2dsZVNlbGVjdGVkLHRoaXMpfSxjaGVja0hhbmRsZXI6ZnVuY3Rpb24oQSxCKXtpZihCKXt0aGlzLnNldEFjdGl2ZUl0ZW0oQSl9fSx0b2dnbGVTZWxlY3RlZDpmdW5jdGlvbigpe3RoaXMubWVudS5yZW5kZXIoKTt2YXIgQyxBO2Zvcih2YXIgQj0xO0I8dGhpcy5pdGVtQ291bnQ7QisrKXtDPSh0aGlzLmFjdGl2ZUl0ZW0uaXRlbUluZGV4K0IpJXRoaXMuaXRlbUNvdW50O0E9dGhpcy5tZW51Lml0ZW1zLml0ZW1BdChDKTtpZighQS5kaXNhYmxlZCl7QS5zZXRDaGVja2VkKHRydWUpO2JyZWFrfX19fSk7RXh0LnJlZygiY3ljbGUiLEV4dC5DeWNsZUJ1dHRvbik7DQpFeHQuVG9vbGJhcj1mdW5jdGlvbihBKXtpZihFeHQuaXNBcnJheShBKSl7QT17YnV0dG9uczpBfX1FeHQuVG9vbGJhci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxBKX07KGZ1bmN0aW9uKCl7dmFyIEE9RXh0LlRvb2xiYXI7RXh0LmV4dGVuZChBLEV4dC5Cb3hDb21wb25lbnQse3RyYWNrTWVudXM6dHJ1ZSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7QS5zdXBlcmNsYXNzLmluaXRDb21wb25lbnQuY2FsbCh0aGlzKTtpZih0aGlzLml0ZW1zKXt0aGlzLmJ1dHRvbnM9dGhpcy5pdGVtc310aGlzLml0ZW1zPW5ldyBFeHQudXRpbC5NaXhlZENvbGxlY3Rpb24oZmFsc2UsZnVuY3Rpb24oQil7cmV0dXJuIEIuaXRlbUlkfHxCLmlkfHxFeHQuaWQoKX0pfSxhdXRvQ3JlYXRlOntjbHM6IngtdG9vbGJhciB4LXNtYWxsLWVkaXRvciIsaHRtbDoiPHRhYmxlIGNlbGxzcGFjaW5nPVwiMFwiPjx0cj48L3RyPjwvdGFibGU+In0sb25SZW5kZXI6ZnVuY3Rpb24oQyxCKXt0aGlzLmVsPUMuY3JlYXRlQ2hpbGQoRXh0LmFwcGx5KHtpZDp0aGlzLmlkfSx0aGlzLmF1dG9DcmVhdGUpLEIpO3RoaXMudHI9dGhpcy5lbC5jaGlsZCgidHIiLHRydWUpfSxhZnRlclJlbmRlcjpmdW5jdGlvbigpe0Euc3VwZXJjbGFzcy5hZnRlclJlbmRlci5jYWxsKHRoaXMpO2lmKHRoaXMuYnV0dG9ucyl7dGhpcy5hZGQuYXBwbHkodGhpcyx0aGlzLmJ1dHRvbnMpO2RlbGV0ZSB0aGlzLmJ1dHRvbnN9fSxhZGQ6ZnVuY3Rpb24oKXt2YXIgQz1hcmd1bWVudHMsQj1DLmxlbmd0aDtmb3IodmFyIEQ9MDtEPEI7RCsrKXt2YXIgRT1DW0RdO2lmKEUuaXNGb3JtRmllbGQpe3RoaXMuYWRkRmllbGQoRSl9ZWxzZXtpZihFLnJlbmRlcil7dGhpcy5hZGRJdGVtKEUpfWVsc2V7aWYodHlwZW9mIEU9PSJzdHJpbmciKXtpZihFPT0ic2VwYXJhdG9yInx8RT09Ii0iKXt0aGlzLmFkZFNlcGFyYXRvcigpfWVsc2V7aWYoRT09IiAiKXt0aGlzLmFkZFNwYWNlcigpfWVsc2V7aWYoRT09Ii0+Iil7dGhpcy5hZGRGaWxsKCl9ZWxzZXt0aGlzLmFkZFRleHQoRSl9fX19ZWxzZXtpZihFLnRhZ05hbWUpe3RoaXMuYWRkRWxlbWVudChFKX1lbHNle2lmKHR5cGVvZiBFPT0ib2JqZWN0Iil7aWYoRS54dHlwZSl7dGhpcy5hZGRGaWVsZChFeHQuQ29tcG9uZW50TWdyLmNyZWF0ZShFLCJidXR0b24iKSl9ZWxzZXt0aGlzLmFkZEJ1dHRvbihFKX19fX19fX19LGFkZFNlcGFyYXRvcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFkZEl0ZW0obmV3IEEuU2VwYXJhdG9yKCkpfSxhZGRTcGFjZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hZGRJdGVtKG5ldyBBLlNwYWNlcigpKX0sYWRkRmlsbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFkZEl0ZW0obmV3IEEuRmlsbCgpKX0sYWRkRWxlbWVudDpmdW5jdGlvbihCKXtyZXR1cm4gdGhpcy5hZGRJdGVtKG5ldyBBLkl0ZW0oQikpfSxhZGRJdGVtOmZ1bmN0aW9uKEIpe3ZhciBDPXRoaXMubmV4dEJsb2NrKCk7dGhpcy5pbml0TWVudVRyYWNraW5nKEIpO0IucmVuZGVyKEMpO3RoaXMuaXRlbXMuYWRkKEIpO3JldHVybiBCfSxhZGRCdXR0b246ZnVuY3Rpb24oRCl7aWYoRXh0LmlzQXJyYXkoRCkpe3ZhciBGPVtdO2Zvcih2YXIgRT0wLEM9RC5sZW5ndGg7RTxDO0UrKyl7Ri5wdXNoKHRoaXMuYWRkQnV0dG9uKERbRV0pKX1yZXR1cm4gRn12YXIgQj1EO2lmKCEoRCBpbnN0YW5jZW9mIEEuQnV0dG9uKSl7Qj1ELnNwbGl0P25ldyBBLlNwbGl0QnV0dG9uKEQpOm5ldyBBLkJ1dHRvbihEKX12YXIgRz10aGlzLm5leHRCbG9jaygpO3RoaXMuaW5pdE1lbnVUcmFja2luZyhCKTtCLnJlbmRlcihHKTt0aGlzLml0ZW1zLmFkZChCKTtyZXR1cm4gQn0saW5pdE1lbnVUcmFja2luZzpmdW5jdGlvbihCKXtpZih0aGlzLnRyYWNrTWVudXMmJkIubWVudSl7Qi5vbih7Im1lbnV0cmlnZ2Vyb3ZlciI6dGhpcy5vbkJ1dHRvblRyaWdnZXJPdmVyLCJtZW51c2hvdyI6dGhpcy5vbkJ1dHRvbk1lbnVTaG93LCJtZW51aGlkZSI6dGhpcy5vbkJ1dHRvbk1lbnVIaWRlLHNjb3BlOnRoaXN9KX19LGFkZFRleHQ6ZnVuY3Rpb24oQil7cmV0dXJuIHRoaXMuYWRkSXRlbShuZXcgQS5UZXh0SXRlbShCKSl9LGluc2VydEJ1dHRvbjpmdW5jdGlvbihDLEYpe2lmKEV4dC5pc0FycmF5KEYpKXt2YXIgRT1bXTtmb3IodmFyIEQ9MCxCPUYubGVuZ3RoO0Q8QjtEKyspe0UucHVzaCh0aGlzLmluc2VydEJ1dHRvbihDK0QsRltEXSkpfXJldHVybiBFfWlmKCEoRiBpbnN0YW5jZW9mIEEuQnV0dG9uKSl7Rj1uZXcgQS5CdXR0b24oRil9dmFyIEc9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGQiKTt0aGlzLnRyLmluc2VydEJlZm9yZShHLHRoaXMudHIuY2hpbGROb2Rlc1tDXSk7dGhpcy5pbml0TWVudVRyYWNraW5nKEYpO0YucmVuZGVyKEcpO3RoaXMuaXRlbXMuaW5zZXJ0KEMsRik7cmV0dXJuIEZ9LGFkZERvbTpmdW5jdGlvbihDLEIpe3ZhciBFPXRoaXMubmV4dEJsb2NrKCk7RXh0LkRvbUhlbHBlci5vdmVyd3JpdGUoRSxDKTt2YXIgRD1uZXcgQS5JdGVtKEUuZmlyc3RDaGlsZCk7RC5yZW5kZXIoRSk7dGhpcy5pdGVtcy5hZGQoRCk7cmV0dXJuIER9LGFkZEZpZWxkOmZ1bmN0aW9uKEMpe3ZhciBEPXRoaXMubmV4dEJsb2NrKCk7Qy5yZW5kZXIoRCk7dmFyIEI9bmV3IEEuSXRlbShELmZpcnN0Q2hpbGQpO0IucmVuZGVyKEQpO3RoaXMuaXRlbXMuYWRkKEIpO3JldHVybiBCfSxuZXh0QmxvY2s6ZnVuY3Rpb24oKXt2YXIgQj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZCIpO3RoaXMudHIuYXBwZW5kQ2hpbGQoQik7cmV0dXJuIEJ9LG9uRGVzdHJveTpmdW5jdGlvbigpe0V4dC5Ub29sYmFyLnN1cGVyY2xhc3Mub25EZXN0cm95LmNhbGwodGhpcyk7aWYodGhpcy5yZW5kZXJlZCl7aWYodGhpcy5pdGVtcyl7RXh0LmRlc3Ryb3kuYXBwbHkoRXh0LHRoaXMuaXRlbXMuaXRlbXMpfUV4dC5FbGVtZW50LnVuY2FjaGUodGhpcy50cil9fSxvbkRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLml0ZW1zLmVhY2goZnVuY3Rpb24oQil7aWYoQi5kaXNhYmxlKXtCLmRpc2FibGUoKX19KX0sb25FbmFibGU6ZnVuY3Rpb24oKXt0aGlzLml0ZW1zLmVhY2goZnVuY3Rpb24oQil7aWYoQi5lbmFibGUpe0IuZW5hYmxlKCl9fSl9LG9uQnV0dG9uVHJpZ2dlck92ZXI6ZnVuY3Rpb24oQil7aWYodGhpcy5hY3RpdmVNZW51QnRuJiZ0aGlzLmFjdGl2ZU1lbnVCdG4hPUIpe3RoaXMuYWN0aXZlTWVudUJ0bi5oaWRlTWVudSgpO0Iuc2hvd01lbnUoKTt0aGlzLmFjdGl2ZU1lbnVCdG49Qn19LG9uQnV0dG9uTWVudVNob3c6ZnVuY3Rpb24oQil7dGhpcy5hY3RpdmVNZW51QnRuPUJ9LG9uQnV0dG9uTWVudUhpZGU6ZnVuY3Rpb24oQil7ZGVsZXRlIHRoaXMuYWN0aXZlTWVudUJ0bn19KTtFeHQucmVnKCJ0b29sYmFyIixFeHQuVG9vbGJhcik7QS5JdGVtPWZ1bmN0aW9uKEIpe3RoaXMuZWw9RXh0LmdldERvbShCKTt0aGlzLmlkPUV4dC5pZCh0aGlzLmVsKTt0aGlzLmhpZGRlbj1mYWxzZX07QS5JdGVtLnByb3RvdHlwZT17Z2V0RWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbH0scmVuZGVyOmZ1bmN0aW9uKEIpe3RoaXMudGQ9QjtCLmFwcGVuZENoaWxkKHRoaXMuZWwpfSxkZXN0cm95OmZ1bmN0aW9uKCl7aWYodGhpcy50ZCYmdGhpcy50ZC5wYXJlbnROb2RlKXt0aGlzLnRkLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy50ZCl9fSxzaG93OmZ1bmN0aW9uKCl7dGhpcy5oaWRkZW49ZmFsc2U7dGhpcy50ZC5zdHlsZS5kaXNwbGF5PSIifSxoaWRlOmZ1bmN0aW9uKCl7dGhpcy5oaWRkZW49dHJ1ZTt0aGlzLnRkLnN0eWxlLmRpc3BsYXk9Im5vbmUifSxzZXRWaXNpYmxlOmZ1bmN0aW9uKEIpe2lmKEIpe3RoaXMuc2hvdygpfWVsc2V7dGhpcy5oaWRlKCl9fSxmb2N1czpmdW5jdGlvbigpe0V4dC5mbHkodGhpcy5lbCkuZm9jdXMoKX0sZGlzYWJsZTpmdW5jdGlvbigpe0V4dC5mbHkodGhpcy50ZCkuYWRkQ2xhc3MoIngtaXRlbS1kaXNhYmxlZCIpO3RoaXMuZGlzYWJsZWQ9dHJ1ZTt0aGlzLmVsLmRpc2FibGVkPXRydWV9LGVuYWJsZTpmdW5jdGlvbigpe0V4dC5mbHkodGhpcy50ZCkucmVtb3ZlQ2xhc3MoIngtaXRlbS1kaXNhYmxlZCIpO3RoaXMuZGlzYWJsZWQ9ZmFsc2U7dGhpcy5lbC5kaXNhYmxlZD1mYWxzZX19O0V4dC5yZWcoInRiaXRlbSIsQS5JdGVtKTtBLlNlcGFyYXRvcj1mdW5jdGlvbigpe3ZhciBCPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTtCLmNsYXNzTmFtZT0ieXRiLXNlcCI7QS5TZXBhcmF0b3Iuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsQil9O0V4dC5leHRlbmQoQS5TZXBhcmF0b3IsQS5JdGVtLHtlbmFibGU6RXh0LmVtcHR5Rm4sZGlzYWJsZTpFeHQuZW1wdHlGbixmb2N1czpFeHQuZW1wdHlGbn0pO0V4dC5yZWcoInRic2VwYXJhdG9yIixBLlNlcGFyYXRvcik7QS5TcGFjZXI9ZnVuY3Rpb24oKXt2YXIgQj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtCLmNsYXNzTmFtZT0ieXRiLXNwYWNlciI7QS5TcGFjZXIuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsQil9O0V4dC5leHRlbmQoQS5TcGFjZXIsQS5JdGVtLHtlbmFibGU6RXh0LmVtcHR5Rm4sZGlzYWJsZTpFeHQuZW1wdHlGbixmb2N1czpFeHQuZW1wdHlGbn0pO0V4dC5yZWcoInRic3BhY2VyIixBLlNwYWNlcik7QS5GaWxsPUV4dC5leHRlbmQoQS5TcGFjZXIse3JlbmRlcjpmdW5jdGlvbihCKXtCLnN0eWxlLndpZHRoPSIxMDAlIjtBLkZpbGwuc3VwZXJjbGFzcy5yZW5kZXIuY2FsbCh0aGlzLEIpfX0pO0V4dC5yZWcoInRiZmlsbCIsQS5GaWxsKTtBLlRleHRJdGVtPWZ1bmN0aW9uKEIpe3ZhciBDPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTtDLmNsYXNzTmFtZT0ieXRiLXRleHQiO0MuaW5uZXJIVE1MPUIudGV4dD9CLnRleHQ6QjtBLlRleHRJdGVtLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLEMpfTtFeHQuZXh0ZW5kKEEuVGV4dEl0ZW0sQS5JdGVtLHtlbmFibGU6RXh0LmVtcHR5Rm4sZGlzYWJsZTpFeHQuZW1wdHlGbixmb2N1czpFeHQuZW1wdHlGbn0pO0V4dC5yZWcoInRidGV4dCIsQS5UZXh0SXRlbSk7QS5CdXR0b249RXh0LmV4dGVuZChFeHQuQnV0dG9uLHtoaWRlUGFyZW50OnRydWUsb25EZXN0cm95OmZ1bmN0aW9uKCl7QS5CdXR0b24uc3VwZXJjbGFzcy5vbkRlc3Ryb3kuY2FsbCh0aGlzKTtpZih0aGlzLmNvbnRhaW5lcil7dGhpcy5jb250YWluZXIucmVtb3ZlKCl9fX0pO0V4dC5yZWcoInRiYnV0dG9uIixBLkJ1dHRvbik7QS5TcGxpdEJ1dHRvbj1FeHQuZXh0ZW5kKEV4dC5TcGxpdEJ1dHRvbix7aGlkZVBhcmVudDp0cnVlLG9uRGVzdHJveTpmdW5jdGlvbigpe0EuU3BsaXRCdXR0b24uc3VwZXJjbGFzcy5vbkRlc3Ryb3kuY2FsbCh0aGlzKTtpZih0aGlzLmNvbnRhaW5lcil7dGhpcy5jb250YWluZXIucmVtb3ZlKCl9fX0pO0V4dC5yZWcoInRic3BsaXQiLEEuU3BsaXRCdXR0b24pO0EuTWVudUJ1dHRvbj1BLlNwbGl0QnV0dG9ufSkoKTsNCkV4dC5QYWdpbmdUb29sYmFyPUV4dC5leHRlbmQoRXh0LlRvb2xiYXIse3BhZ2VTaXplOjIwLGRpc3BsYXlNc2c6IkRpc3BsYXlpbmcgezB9IC0gezF9IG9mIHsyfSIsZW1wdHlNc2c6Ik5vIGRhdGEgdG8gZGlzcGxheSIsYmVmb3JlUGFnZVRleHQ6IlBhZ2UiLGFmdGVyUGFnZVRleHQ6Im9mIHswfSIsZmlyc3RUZXh0OiJGaXJzdCBQYWdlIixwcmV2VGV4dDoiUHJldmlvdXMgUGFnZSIsbmV4dFRleHQ6Ik5leHQgUGFnZSIsbGFzdFRleHQ6Ikxhc3QgUGFnZSIscmVmcmVzaFRleHQ6IlJlZnJlc2giLHBhcmFtTmFtZXM6e3N0YXJ0OiJzdGFydCIsbGltaXQ6ImxpbWl0In0saW5pdENvbXBvbmVudDpmdW5jdGlvbigpe0V4dC5QYWdpbmdUb29sYmFyLnN1cGVyY2xhc3MuaW5pdENvbXBvbmVudC5jYWxsKHRoaXMpO3RoaXMuY3Vyc29yPTA7dGhpcy5iaW5kKHRoaXMuc3RvcmUpfSxvblJlbmRlcjpmdW5jdGlvbihCLEEpe0V4dC5QYWdpbmdUb29sYmFyLnN1cGVyY2xhc3Mub25SZW5kZXIuY2FsbCh0aGlzLEIsQSk7dGhpcy5maXJzdD10aGlzLmFkZEJ1dHRvbih7dG9vbHRpcDp0aGlzLmZpcnN0VGV4dCxpY29uQ2xzOiJ4LXRiYXItcGFnZS1maXJzdCIsZGlzYWJsZWQ6dHJ1ZSxoYW5kbGVyOnRoaXMub25DbGljay5jcmVhdGVEZWxlZ2F0ZSh0aGlzLFsiZmlyc3QiXSl9KTt0aGlzLnByZXY9dGhpcy5hZGRCdXR0b24oe3Rvb2x0aXA6dGhpcy5wcmV2VGV4dCxpY29uQ2xzOiJ4LXRiYXItcGFnZS1wcmV2IixkaXNhYmxlZDp0cnVlLGhhbmRsZXI6dGhpcy5vbkNsaWNrLmNyZWF0ZURlbGVnYXRlKHRoaXMsWyJwcmV2Il0pfSk7dGhpcy5hZGRTZXBhcmF0b3IoKTt0aGlzLmFkZCh0aGlzLmJlZm9yZVBhZ2VUZXh0KTt0aGlzLmZpZWxkPUV4dC5nZXQodGhpcy5hZGREb20oe3RhZzoiaW5wdXQiLHR5cGU6InRleHQiLHNpemU6IjMiLHZhbHVlOiIxIixjbHM6IngtdGJhci1wYWdlLW51bWJlciJ9KS5lbCk7dGhpcy5maWVsZC5vbigia2V5ZG93biIsdGhpcy5vblBhZ2luZ0tleWRvd24sdGhpcyk7dGhpcy5maWVsZC5vbigiZm9jdXMiLGZ1bmN0aW9uKCl7dGhpcy5kb20uc2VsZWN0KCl9KTt0aGlzLmFmdGVyVGV4dEVsPXRoaXMuYWRkVGV4dChTdHJpbmcuZm9ybWF0KHRoaXMuYWZ0ZXJQYWdlVGV4dCwxKSk7dGhpcy5maWVsZC5zZXRIZWlnaHQoMTgpO3RoaXMuYWRkU2VwYXJhdG9yKCk7dGhpcy5uZXh0PXRoaXMuYWRkQnV0dG9uKHt0b29sdGlwOnRoaXMubmV4dFRleHQsaWNvbkNsczoieC10YmFyLXBhZ2UtbmV4dCIsZGlzYWJsZWQ6dHJ1ZSxoYW5kbGVyOnRoaXMub25DbGljay5jcmVhdGVEZWxlZ2F0ZSh0aGlzLFsibmV4dCJdKX0pO3RoaXMubGFzdD10aGlzLmFkZEJ1dHRvbih7dG9vbHRpcDp0aGlzLmxhc3RUZXh0LGljb25DbHM6IngtdGJhci1wYWdlLWxhc3QiLGRpc2FibGVkOnRydWUsaGFuZGxlcjp0aGlzLm9uQ2xpY2suY3JlYXRlRGVsZWdhdGUodGhpcyxbImxhc3QiXSl9KTt0aGlzLmFkZFNlcGFyYXRvcigpO3RoaXMubG9hZGluZz10aGlzLmFkZEJ1dHRvbih7dG9vbHRpcDp0aGlzLnJlZnJlc2hUZXh0LGljb25DbHM6IngtdGJhci1sb2FkaW5nIixoYW5kbGVyOnRoaXMub25DbGljay5jcmVhdGVEZWxlZ2F0ZSh0aGlzLFsicmVmcmVzaCJdKX0pO2lmKHRoaXMuZGlzcGxheUluZm8pe3RoaXMuZGlzcGxheUVsPUV4dC5mbHkodGhpcy5lbC5kb20pLmNyZWF0ZUNoaWxkKHtjbHM6IngtcGFnaW5nLWluZm8ifSl9aWYodGhpcy5kc0xvYWRlZCl7dGhpcy5vbkxvYWQuYXBwbHkodGhpcyx0aGlzLmRzTG9hZGVkKX19LHVwZGF0ZUluZm86ZnVuY3Rpb24oKXtpZih0aGlzLmRpc3BsYXlFbCl7dmFyIEE9dGhpcy5zdG9yZS5nZXRDb3VudCgpO3ZhciBCPUE9PTA/dGhpcy5lbXB0eU1zZzpTdHJpbmcuZm9ybWF0KHRoaXMuZGlzcGxheU1zZyx0aGlzLmN1cnNvcisxLHRoaXMuY3Vyc29yK0EsdGhpcy5zdG9yZS5nZXRUb3RhbENvdW50KCkpO3RoaXMuZGlzcGxheUVsLnVwZGF0ZShCKX19LG9uTG9hZDpmdW5jdGlvbihBLEMsRil7aWYoIXRoaXMucmVuZGVyZWQpe3RoaXMuZHNMb2FkZWQ9W0EsQyxGXTtyZXR1cm4gfXRoaXMuY3Vyc29yPUYucGFyYW1zP0YucGFyYW1zW3RoaXMucGFyYW1OYW1lcy5zdGFydF06MDt2YXIgRT10aGlzLmdldFBhZ2VEYXRhKCksQj1FLmFjdGl2ZVBhZ2UsRD1FLnBhZ2VzO3RoaXMuYWZ0ZXJUZXh0RWwuZWwuaW5uZXJIVE1MPVN0cmluZy5mb3JtYXQodGhpcy5hZnRlclBhZ2VUZXh0LEUucGFnZXMpO3RoaXMuZmllbGQuZG9tLnZhbHVlPUI7dGhpcy5maXJzdC5zZXREaXNhYmxlZChCPT0xKTt0aGlzLnByZXYuc2V0RGlzYWJsZWQoQj09MSk7dGhpcy5uZXh0LnNldERpc2FibGVkKEI9PUQpO3RoaXMubGFzdC5zZXREaXNhYmxlZChCPT1EKTt0aGlzLmxvYWRpbmcuZW5hYmxlKCk7dGhpcy51cGRhdGVJbmZvKCl9LGdldFBhZ2VEYXRhOmZ1bmN0aW9uKCl7dmFyIEE9dGhpcy5zdG9yZS5nZXRUb3RhbENvdW50KCk7cmV0dXJue3RvdGFsOkEsYWN0aXZlUGFnZTpNYXRoLmNlaWwoKHRoaXMuY3Vyc29yK3RoaXMucGFnZVNpemUpL3RoaXMucGFnZVNpemUpLHBhZ2VzOkE8dGhpcy5wYWdlU2l6ZT8xOk1hdGguY2VpbChBL3RoaXMucGFnZVNpemUpfX0sb25Mb2FkRXJyb3I6ZnVuY3Rpb24oKXtpZighdGhpcy5yZW5kZXJlZCl7cmV0dXJuIH10aGlzLmxvYWRpbmcuZW5hYmxlKCl9LHJlYWRQYWdlOmZ1bmN0aW9uKEMpe3ZhciBBPXRoaXMuZmllbGQuZG9tLnZhbHVlLEI7aWYoIUF8fGlzTmFOKEI9cGFyc2VJbnQoQSwxMCkpKXt0aGlzLmZpZWxkLmRvbS52YWx1ZT1DLmFjdGl2ZVBhZ2U7cmV0dXJuIGZhbHNlfXJldHVybiBCfSxvblBhZ2luZ0tleWRvd246ZnVuY3Rpb24oRCl7dmFyIEI9RC5nZXRLZXkoKSxFPXRoaXMuZ2V0UGFnZURhdGEoKSxDO2lmKEI9PUQuUkVUVVJOKXtELnN0b3BFdmVudCgpO2lmKEM9dGhpcy5yZWFkUGFnZShFKSl7Qz1NYXRoLm1pbihNYXRoLm1heCgxLEMpLEUucGFnZXMpLTE7dGhpcy5kb0xvYWQoQyp0aGlzLnBhZ2VTaXplKX19ZWxzZXtpZihCPT1ELkhPTUV8fEI9PUQuRU5EKXtELnN0b3BFdmVudCgpO0M9Qj09RC5IT01FPzE6RS5wYWdlczt0aGlzLmZpZWxkLmRvbS52YWx1ZT1DfWVsc2V7aWYoQj09RC5VUHx8Qj09RC5QQUdFVVB8fEI9PUQuRE9XTnx8Qj09RC5QQUdFRE9XTil7RC5zdG9wRXZlbnQoKTtpZihDPXRoaXMucmVhZFBhZ2UoRSkpe3ZhciBBPUQuc2hpZnRLZXk/MTA6MTtpZihCPT1ELkRPV058fEI9PUQuUEFHRURPV04pe0EqPS0xfUMrPUE7aWYoQz49MSZDPD1FLnBhZ2VzKXt0aGlzLmZpZWxkLmRvbS52YWx1ZT1DfX19fX19LGJlZm9yZUxvYWQ6ZnVuY3Rpb24oKXtpZih0aGlzLnJlbmRlcmVkJiZ0aGlzLmxvYWRpbmcpe3RoaXMubG9hZGluZy5kaXNhYmxlKCl9fSxkb0xvYWQ6ZnVuY3Rpb24oQyl7dmFyIEI9e30sQT10aGlzLnBhcmFtTmFtZXM7QltBLnN0YXJ0XT1DO0JbQS5saW1pdF09dGhpcy5wYWdlU2l6ZTt0aGlzLnN0b3JlLmxvYWQoe3BhcmFtczpCfSl9LG9uQ2xpY2s6ZnVuY3Rpb24oRSl7dmFyIEI9dGhpcy5zdG9yZTtzd2l0Y2goRSl7Y2FzZSJmaXJzdCI6dGhpcy5kb0xvYWQoMCk7YnJlYWs7Y2FzZSJwcmV2Ijp0aGlzLmRvTG9hZChNYXRoLm1heCgwLHRoaXMuY3Vyc29yLXRoaXMucGFnZVNpemUpKTticmVhaztjYXNlIm5leHQiOnRoaXMuZG9Mb2FkKHRoaXMuY3Vyc29yK3RoaXMucGFnZVNpemUpO2JyZWFrO2Nhc2UibGFzdCI6dmFyIEQ9Qi5nZXRUb3RhbENvdW50KCk7dmFyIEE9RCV0aGlzLnBhZ2VTaXplO3ZhciBDPUE/KEQtQSk6RC10aGlzLnBhZ2VTaXplO3RoaXMuZG9Mb2FkKEMpO2JyZWFrO2Nhc2UicmVmcmVzaCI6dGhpcy5kb0xvYWQodGhpcy5jdXJzb3IpO2JyZWFrfX0sdW5iaW5kOmZ1bmN0aW9uKEEpe0E9RXh0LlN0b3JlTWdyLmxvb2t1cChBKTtBLnVuKCJiZWZvcmVsb2FkIix0aGlzLmJlZm9yZUxvYWQsdGhpcyk7QS51bigibG9hZCIsdGhpcy5vbkxvYWQsdGhpcyk7QS51bigibG9hZGV4Y2VwdGlvbiIsdGhpcy5vbkxvYWRFcnJvcix0aGlzKTt0aGlzLnN0b3JlPXVuZGVmaW5lZH0sYmluZDpmdW5jdGlvbihBKXtBPUV4dC5TdG9yZU1nci5sb29rdXAoQSk7QS5vbigiYmVmb3JlbG9hZCIsdGhpcy5iZWZvcmVMb2FkLHRoaXMpO0Eub24oImxvYWQiLHRoaXMub25Mb2FkLHRoaXMpO0Eub24oImxvYWRleGNlcHRpb24iLHRoaXMub25Mb2FkRXJyb3IsdGhpcyk7dGhpcy5zdG9yZT1BfX0pO0V4dC5yZWcoInBhZ2luZyIsRXh0LlBhZ2luZ1Rvb2xiYXIpOw0KRXh0LlJlc2l6YWJsZT1mdW5jdGlvbihELEUpe3RoaXMuZWw9RXh0LmdldChEKTtpZihFJiZFLndyYXApe0UucmVzaXplQ2hpbGQ9dGhpcy5lbDt0aGlzLmVsPXRoaXMuZWwud3JhcCh0eXBlb2YgRS53cmFwPT0ib2JqZWN0Ij9FLndyYXA6e2NsczoieHJlc2l6YWJsZS13cmFwIn0pO3RoaXMuZWwuaWQ9dGhpcy5lbC5kb20uaWQ9RS5yZXNpemVDaGlsZC5pZCsiLXJ6d3JhcCI7dGhpcy5lbC5zZXRTdHlsZSgib3ZlcmZsb3ciLCJoaWRkZW4iKTt0aGlzLmVsLnNldFBvc2l0aW9uaW5nKEUucmVzaXplQ2hpbGQuZ2V0UG9zaXRpb25pbmcoKSk7RS5yZXNpemVDaGlsZC5jbGVhclBvc2l0aW9uaW5nKCk7aWYoIUUud2lkdGh8fCFFLmhlaWdodCl7dmFyIEY9RS5yZXNpemVDaGlsZC5nZXRTaXplKCk7dGhpcy5lbC5zZXRTaXplKEYud2lkdGgsRi5oZWlnaHQpfWlmKEUucGlubmVkJiYhRS5hZGp1c3RtZW50cyl7RS5hZGp1c3RtZW50cz0iYXV0byJ9fXRoaXMucHJveHk9dGhpcy5lbC5jcmVhdGVQcm94eSh7dGFnOiJkaXYiLGNsczoieC1yZXNpemFibGUtcHJveHkiLGlkOnRoaXMuZWwuaWQrIi1yenByb3h5In0pO3RoaXMucHJveHkudW5zZWxlY3RhYmxlKCk7dGhpcy5wcm94eS5lbmFibGVEaXNwbGF5TW9kZSgiYmxvY2siKTtFeHQuYXBwbHkodGhpcyxFKTtpZih0aGlzLnBpbm5lZCl7dGhpcy5kaXNhYmxlVHJhY2tPdmVyPXRydWU7dGhpcy5lbC5hZGRDbGFzcygieC1yZXNpemFibGUtcGlubmVkIil9dmFyIEk9dGhpcy5lbC5nZXRTdHlsZSgicG9zaXRpb24iKTtpZihJIT0iYWJzb2x1dGUiJiZJIT0iZml4ZWQiKXt0aGlzLmVsLnNldFN0eWxlKCJwb3NpdGlvbiIsInJlbGF0aXZlIil9aWYoIXRoaXMuaGFuZGxlcyl7dGhpcy5oYW5kbGVzPSJzLGUsc2UiO2lmKHRoaXMubXVsdGlEaXJlY3Rpb25hbCl7dGhpcy5oYW5kbGVzKz0iLG4sdyJ9fWlmKHRoaXMuaGFuZGxlcz09ImFsbCIpe3RoaXMuaGFuZGxlcz0ibiBzIGUgdyBuZSBudyBzZSBzdyJ9dmFyIE09dGhpcy5oYW5kbGVzLnNwbGl0KC9ccyo/Wyw7XVxzKj98IC8pO3ZhciBDPUV4dC5SZXNpemFibGUucG9zaXRpb25zO2Zvcih2YXIgSD0wLEo9TS5sZW5ndGg7SDxKO0grKyl7aWYoTVtIXSYmQ1tNW0hdXSl7dmFyIEw9Q1tNW0hdXTt0aGlzW0xdPW5ldyBFeHQuUmVzaXphYmxlLkhhbmRsZSh0aGlzLEwsdGhpcy5kaXNhYmxlVHJhY2tPdmVyLHRoaXMudHJhbnNwYXJlbnQpfX10aGlzLmNvcm5lcj10aGlzLnNvdXRoZWFzdDtpZih0aGlzLmhhbmRsZXMuaW5kZXhPZigibiIpIT0tMXx8dGhpcy5oYW5kbGVzLmluZGV4T2YoInciKSE9LTEpe3RoaXMudXBkYXRlQm94PXRydWV9dGhpcy5hY3RpdmVIYW5kbGU9bnVsbDtpZih0aGlzLnJlc2l6ZUNoaWxkKXtpZih0eXBlb2YgdGhpcy5yZXNpemVDaGlsZD09ImJvb2xlYW4iKXt0aGlzLnJlc2l6ZUNoaWxkPUV4dC5nZXQodGhpcy5lbC5kb20uZmlyc3RDaGlsZCx0cnVlKX1lbHNle3RoaXMucmVzaXplQ2hpbGQ9RXh0LmdldCh0aGlzLnJlc2l6ZUNoaWxkLHRydWUpfX1pZih0aGlzLmFkanVzdG1lbnRzPT0iYXV0byIpe3ZhciBCPXRoaXMucmVzaXplQ2hpbGQ7dmFyIEs9dGhpcy53ZXN0LEc9dGhpcy5lYXN0LEE9dGhpcy5ub3J0aCxNPXRoaXMuc291dGg7aWYoQiYmKEt8fEEpKXtCLnBvc2l0aW9uKCJyZWxhdGl2ZSIpO0Iuc2V0TGVmdChLP0suZWwuZ2V0V2lkdGgoKTowKTtCLnNldFRvcChBP0EuZWwuZ2V0SGVpZ2h0KCk6MCl9dGhpcy5hZGp1c3RtZW50cz1bKEc/LUcuZWwuZ2V0V2lkdGgoKTowKSsoSz8tSy5lbC5nZXRXaWR0aCgpOjApLChBPy1BLmVsLmdldEhlaWdodCgpOjApKyhNPy1NLmVsLmdldEhlaWdodCgpOjApLTFdfWlmKHRoaXMuZHJhZ2dhYmxlKXt0aGlzLmRkPXRoaXMuZHluYW1pYz90aGlzLmVsLmluaXRERChudWxsKTp0aGlzLmVsLmluaXRERFByb3h5KG51bGwse2RyYWdFbElkOnRoaXMucHJveHkuaWR9KTt0aGlzLmRkLnNldEhhbmRsZUVsSWQodGhpcy5yZXNpemVDaGlsZD90aGlzLnJlc2l6ZUNoaWxkLmlkOnRoaXMuZWwuaWQpfXRoaXMuYWRkRXZlbnRzKCJiZWZvcmVyZXNpemUiLCJyZXNpemUiKTtpZih0aGlzLndpZHRoIT09bnVsbCYmdGhpcy5oZWlnaHQhPT1udWxsKXt0aGlzLnJlc2l6ZVRvKHRoaXMud2lkdGgsdGhpcy5oZWlnaHQpfWVsc2V7dGhpcy51cGRhdGVDaGlsZFNpemUoKX1pZihFeHQuaXNJRSl7dGhpcy5lbC5kb20uc3R5bGUuem9vbT0xfUV4dC5SZXNpemFibGUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpfTtFeHQuZXh0ZW5kKEV4dC5SZXNpemFibGUsRXh0LnV0aWwuT2JzZXJ2YWJsZSx7cmVzaXplQ2hpbGQ6ZmFsc2UsYWRqdXN0bWVudHM6WzAsMF0sbWluV2lkdGg6NSxtaW5IZWlnaHQ6NSxtYXhXaWR0aDoxMDAwMCxtYXhIZWlnaHQ6MTAwMDAsZW5hYmxlZDp0cnVlLGFuaW1hdGU6ZmFsc2UsZHVyYXRpb246MC4zNSxkeW5hbWljOmZhbHNlLGhhbmRsZXM6ZmFsc2UsbXVsdGlEaXJlY3Rpb25hbDpmYWxzZSxkaXNhYmxlVHJhY2tPdmVyOmZhbHNlLGVhc2luZzoiZWFzZU91dFN0cm9uZyIsd2lkdGhJbmNyZW1lbnQ6MCxoZWlnaHRJbmNyZW1lbnQ6MCxwaW5uZWQ6ZmFsc2Usd2lkdGg6bnVsbCxoZWlnaHQ6bnVsbCxwcmVzZXJ2ZVJhdGlvOmZhbHNlLHRyYW5zcGFyZW50OmZhbHNlLG1pblg6MCxtaW5ZOjAsZHJhZ2dhYmxlOmZhbHNlLHJlc2l6ZVRvOmZ1bmN0aW9uKEIsQSl7dGhpcy5lbC5zZXRTaXplKEIsQSk7dGhpcy51cGRhdGVDaGlsZFNpemUoKTt0aGlzLmZpcmVFdmVudCgicmVzaXplIix0aGlzLEIsQSxudWxsKX0sc3RhcnRTaXppbmc6ZnVuY3Rpb24oQyxCKXt0aGlzLmZpcmVFdmVudCgiYmVmb3JlcmVzaXplIix0aGlzLEMpO2lmKHRoaXMuZW5hYmxlZCl7aWYoIXRoaXMub3ZlcmxheSl7dGhpcy5vdmVybGF5PXRoaXMuZWwuY3JlYXRlUHJveHkoe3RhZzoiZGl2IixjbHM6IngtcmVzaXphYmxlLW92ZXJsYXkiLGh0bWw6IiYjMTYwOyJ9LEV4dC5nZXRCb2R5KCkpO3RoaXMub3ZlcmxheS51bnNlbGVjdGFibGUoKTt0aGlzLm92ZXJsYXkuZW5hYmxlRGlzcGxheU1vZGUoImJsb2NrIik7dGhpcy5vdmVybGF5Lm9uKCJtb3VzZW1vdmUiLHRoaXMub25Nb3VzZU1vdmUsdGhpcyk7dGhpcy5vdmVybGF5Lm9uKCJtb3VzZXVwIix0aGlzLm9uTW91c2VVcCx0aGlzKX10aGlzLm92ZXJsYXkuc2V0U3R5bGUoImN1cnNvciIsQi5lbC5nZXRTdHlsZSgiY3Vyc29yIikpO3RoaXMucmVzaXppbmc9dHJ1ZTt0aGlzLnN0YXJ0Qm94PXRoaXMuZWwuZ2V0Qm94KCk7dGhpcy5zdGFydFBvaW50PUMuZ2V0WFkoKTt0aGlzLm9mZnNldHM9Wyh0aGlzLnN0YXJ0Qm94LngrdGhpcy5zdGFydEJveC53aWR0aCktdGhpcy5zdGFydFBvaW50WzBdLCh0aGlzLnN0YXJ0Qm94LnkrdGhpcy5zdGFydEJveC5oZWlnaHQpLXRoaXMuc3RhcnRQb2ludFsxXV07dGhpcy5vdmVybGF5LnNldFNpemUoRXh0LmxpYi5Eb20uZ2V0Vmlld1dpZHRoKHRydWUpLEV4dC5saWIuRG9tLmdldFZpZXdIZWlnaHQodHJ1ZSkpO3RoaXMub3ZlcmxheS5zaG93KCk7aWYodGhpcy5jb25zdHJhaW5Ubyl7dmFyIEE9RXh0LmdldCh0aGlzLmNvbnN0cmFpblRvKTt0aGlzLnJlc2l6ZVJlZ2lvbj1BLmdldFJlZ2lvbigpLmFkanVzdChBLmdldEZyYW1lV2lkdGgoInQiKSxBLmdldEZyYW1lV2lkdGgoImwiKSwtQS5nZXRGcmFtZVdpZHRoKCJiIiksLUEuZ2V0RnJhbWVXaWR0aCgiciIpKX10aGlzLnByb3h5LnNldFN0eWxlKCJ2aXNpYmlsaXR5IiwiaGlkZGVuIik7dGhpcy5wcm94eS5zaG93KCk7dGhpcy5wcm94eS5zZXRCb3godGhpcy5zdGFydEJveCk7aWYoIXRoaXMuZHluYW1pYyl7dGhpcy5wcm94eS5zZXRTdHlsZSgidmlzaWJpbGl0eSIsInZpc2libGUiKX19fSxvbk1vdXNlRG93bjpmdW5jdGlvbihBLEIpe2lmKHRoaXMuZW5hYmxlZCl7Qi5zdG9wRXZlbnQoKTt0aGlzLmFjdGl2ZUhhbmRsZT1BO3RoaXMuc3RhcnRTaXppbmcoQixBKX19LG9uTW91c2VVcDpmdW5jdGlvbihCKXt2YXIgQT10aGlzLnJlc2l6ZUVsZW1lbnQoKTt0aGlzLnJlc2l6aW5nPWZhbHNlO3RoaXMuaGFuZGxlT3V0KCk7dGhpcy5vdmVybGF5LmhpZGUoKTt0aGlzLnByb3h5LmhpZGUoKTt0aGlzLmZpcmVFdmVudCgicmVzaXplIix0aGlzLEEud2lkdGgsQS5oZWlnaHQsQil9LHVwZGF0ZUNoaWxkU2l6ZTpmdW5jdGlvbigpe2lmKHRoaXMucmVzaXplQ2hpbGQpe3ZhciBDPXRoaXMuZWw7dmFyIEQ9dGhpcy5yZXNpemVDaGlsZDt2YXIgQj10aGlzLmFkanVzdG1lbnRzO2lmKEMuZG9tLm9mZnNldFdpZHRoKXt2YXIgQT1DLmdldFNpemUodHJ1ZSk7RC5zZXRTaXplKEEud2lkdGgrQlswXSxBLmhlaWdodCtCWzFdKX1pZihFeHQuaXNJRSl7c2V0VGltZW91dChmdW5jdGlvbigpe2lmKEMuZG9tLm9mZnNldFdpZHRoKXt2YXIgRT1DLmdldFNpemUodHJ1ZSk7RC5zZXRTaXplKEUud2lkdGgrQlswXSxFLmhlaWdodCtCWzFdKX19LDEwKX19fSxzbmFwOmZ1bmN0aW9uKEMsRSxCKXtpZighRXx8IUMpe3JldHVybiBDfXZhciBEPUM7dmFyIEE9QyVFO2lmKEE+MCl7aWYoQT4oRS8yKSl7RD1DKyhFLUEpfWVsc2V7RD1DLUF9fXJldHVybiBNYXRoLm1heChCLEQpfSxyZXNpemVFbGVtZW50OmZ1bmN0aW9uKCl7dmFyIEE9dGhpcy5wcm94eS5nZXRCb3goKTtpZih0aGlzLnVwZGF0ZUJveCl7dGhpcy5lbC5zZXRCb3goQSxmYWxzZSx0aGlzLmFuaW1hdGUsdGhpcy5kdXJhdGlvbixudWxsLHRoaXMuZWFzaW5nKX1lbHNle3RoaXMuZWwuc2V0U2l6ZShBLndpZHRoLEEuaGVpZ2h0LHRoaXMuYW5pbWF0ZSx0aGlzLmR1cmF0aW9uLG51bGwsdGhpcy5lYXNpbmcpfXRoaXMudXBkYXRlQ2hpbGRTaXplKCk7aWYoIXRoaXMuZHluYW1pYyl7dGhpcy5wcm94eS5oaWRlKCl9cmV0dXJuIEF9LGNvbnN0cmFpbjpmdW5jdGlvbihCLEMsQSxEKXtpZihCLUM8QSl7Qz1CLUF9ZWxzZXtpZihCLUM+RCl7Qz1ELUJ9fXJldHVybiBDfSxvbk1vdXNlTW92ZTpmdW5jdGlvbihTKXtpZih0aGlzLmVuYWJsZWQpe3RyeXtpZih0aGlzLnJlc2l6ZVJlZ2lvbiYmIXRoaXMucmVzaXplUmVnaW9uLmNvbnRhaW5zKFMuZ2V0UG9pbnQoKSkpe3JldHVybiB9dmFyIFE9dGhpcy5jdXJTaXplfHx0aGlzLnN0YXJ0Qm94O3ZhciBJPXRoaXMuc3RhcnRCb3gueCxIPXRoaXMuc3RhcnRCb3gueTt2YXIgQz1JLEI9SDt2YXIgSj1RLndpZHRoLFI9US5oZWlnaHQ7dmFyIEQ9SixMPVI7dmFyIEs9dGhpcy5taW5XaWR0aCxUPXRoaXMubWluSGVpZ2h0O3ZhciBQPXRoaXMubWF4V2lkdGgsVz10aGlzLm1heEhlaWdodDt2YXIgRj10aGlzLndpZHRoSW5jcmVtZW50O3ZhciBBPXRoaXMuaGVpZ2h0SW5jcmVtZW50O3ZhciBVPVMuZ2V0WFkoKTt2YXIgTz0tKHRoaXMuc3RhcnRQb2ludFswXS1NYXRoLm1heCh0aGlzLm1pblgsVVswXSkpO3ZhciBNPS0odGhpcy5zdGFydFBvaW50WzFdLU1hdGgubWF4KHRoaXMubWluWSxVWzFdKSk7dmFyIEc9dGhpcy5hY3RpdmVIYW5kbGUucG9zaXRpb247c3dpdGNoKEcpe2Nhc2UiZWFzdCI6Sis9TztKPU1hdGgubWluKE1hdGgubWF4KEssSiksUCk7YnJlYWs7Y2FzZSJzb3V0aCI6Uis9TTtSPU1hdGgubWluKE1hdGgubWF4KFQsUiksVyk7YnJlYWs7Y2FzZSJzb3V0aGVhc3QiOkorPU87Uis9TTtKPU1hdGgubWluKE1hdGgubWF4KEssSiksUCk7Uj1NYXRoLm1pbihNYXRoLm1heChULFIpLFcpO2JyZWFrO2Nhc2Uibm9ydGgiOk09dGhpcy5jb25zdHJhaW4oUixNLFQsVyk7SCs9TTtSLT1NO2JyZWFrO2Nhc2Uid2VzdCI6Tz10aGlzLmNvbnN0cmFpbihKLE8sSyxQKTtJKz1PO0otPU87YnJlYWs7Y2FzZSJub3J0aGVhc3QiOkorPU87Sj1NYXRoLm1pbihNYXRoLm1heChLLEopLFApO009dGhpcy5jb25zdHJhaW4oUixNLFQsVyk7SCs9TTtSLT1NO2JyZWFrO2Nhc2Uibm9ydGh3ZXN0IjpPPXRoaXMuY29uc3RyYWluKEosTyxLLFApO009dGhpcy5jb25zdHJhaW4oUixNLFQsVyk7SCs9TTtSLT1NO0krPU87Si09TzticmVhaztjYXNlInNvdXRod2VzdCI6Tz10aGlzLmNvbnN0cmFpbihKLE8sSyxQKTtSKz1NO1I9TWF0aC5taW4oTWF0aC5tYXgoVCxSKSxXKTtJKz1PO0otPU87YnJlYWt9dmFyIE49dGhpcy5zbmFwKEosRixLKTt2YXIgVj10aGlzLnNuYXAoUixBLFQpO2lmKE4hPUp8fFYhPVIpe3N3aXRjaChHKXtjYXNlIm5vcnRoZWFzdCI6SC09Vi1SO2JyZWFrO2Nhc2Uibm9ydGgiOkgtPVYtUjticmVhaztjYXNlInNvdXRod2VzdCI6SS09Ti1KO2JyZWFrO2Nhc2Uid2VzdCI6SS09Ti1KO2JyZWFrO2Nhc2Uibm9ydGh3ZXN0IjpJLT1OLUo7SC09Vi1SO2JyZWFrfUo9TjtSPVZ9aWYodGhpcy5wcmVzZXJ2ZVJhdGlvKXtzd2l0Y2goRyl7Y2FzZSJzb3V0aGVhc3QiOmNhc2UiZWFzdCI6Uj1MKihKL0QpO1I9TWF0aC5taW4oTWF0aC5tYXgoVCxSKSxXKTtKPUQqKFIvTCk7YnJlYWs7Y2FzZSJzb3V0aCI6Sj1EKihSL0wpO0o9TWF0aC5taW4oTWF0aC5tYXgoSyxKKSxQKTtSPUwqKEovRCk7YnJlYWs7Y2FzZSJub3J0aGVhc3QiOko9RCooUi9MKTtKPU1hdGgubWluKE1hdGgubWF4KEssSiksUCk7Uj1MKihKL0QpO2JyZWFrO2Nhc2Uibm9ydGgiOnZhciBYPUo7Sj1EKihSL0wpO0o9TWF0aC5taW4oTWF0aC5tYXgoSyxKKSxQKTtSPUwqKEovRCk7SSs9KFgtSikvMjticmVhaztjYXNlInNvdXRod2VzdCI6Uj1MKihKL0QpO1I9TWF0aC5taW4oTWF0aC5tYXgoVCxSKSxXKTt2YXIgWD1KO0o9RCooUi9MKTtJKz1YLUo7YnJlYWs7Y2FzZSJ3ZXN0Ijp2YXIgRT1SO1I9TCooSi9EKTtSPU1hdGgubWluKE1hdGgubWF4KFQsUiksVyk7SCs9KEUtUikvMjt2YXIgWD1KO0o9RCooUi9MKTtJKz1YLUo7YnJlYWs7Y2FzZSJub3J0aHdlc3QiOnZhciBYPUo7dmFyIEU9UjtSPUwqKEovRCk7Uj1NYXRoLm1pbihNYXRoLm1heChULFIpLFcpO0o9RCooUi9MKTtIKz1FLVI7SSs9WC1KO2JyZWFrfX10aGlzLnByb3h5LnNldEJvdW5kcyhJLEgsSixSKTtpZih0aGlzLmR5bmFtaWMpe3RoaXMucmVzaXplRWxlbWVudCgpfX1jYXRjaChTKXt9fX0saGFuZGxlT3ZlcjpmdW5jdGlvbigpe2lmKHRoaXMuZW5hYmxlZCl7dGhpcy5lbC5hZGRDbGFzcygieC1yZXNpemFibGUtb3ZlciIpfX0saGFuZGxlT3V0OmZ1bmN0aW9uKCl7aWYoIXRoaXMucmVzaXppbmcpe3RoaXMuZWwucmVtb3ZlQ2xhc3MoIngtcmVzaXphYmxlLW92ZXIiKX19LGdldEVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWx9LGdldFJlc2l6ZUNoaWxkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVzaXplQ2hpbGR9LGRlc3Ryb3k6ZnVuY3Rpb24oQyl7dGhpcy5wcm94eS5yZW1vdmUoKTtpZih0aGlzLm92ZXJsYXkpe3RoaXMub3ZlcmxheS5yZW1vdmVBbGxMaXN0ZW5lcnMoKTt0aGlzLm92ZXJsYXkucmVtb3ZlKCl9dmFyIEQ9RXh0LlJlc2l6YWJsZS5wb3NpdGlvbnM7Zm9yKHZhciBBIGluIEQpe2lmKHR5cGVvZiBEW0FdIT0iZnVuY3Rpb24iJiZ0aGlzW0RbQV1dKXt2YXIgQj10aGlzW0RbQV1dO0IuZWwucmVtb3ZlQWxsTGlzdGVuZXJzKCk7Qi5lbC5yZW1vdmUoKX19aWYoQyl7dGhpcy5lbC51cGRhdGUoIiIpO3RoaXMuZWwucmVtb3ZlKCl9fSxzeW5jSGFuZGxlSGVpZ2h0OmZ1bmN0aW9uKCl7dmFyIEE9dGhpcy5lbC5nZXRIZWlnaHQodHJ1ZSk7aWYodGhpcy53ZXN0KXt0aGlzLndlc3QuZWwuc2V0SGVpZ2h0KEEpfWlmKHRoaXMuZWFzdCl7dGhpcy5lYXN0LmVsLnNldEhlaWdodChBKX19fSk7RXh0LlJlc2l6YWJsZS5wb3NpdGlvbnM9e246Im5vcnRoIixzOiJzb3V0aCIsZToiZWFzdCIsdzoid2VzdCIsc2U6InNvdXRoZWFzdCIsc3c6InNvdXRod2VzdCIsbnc6Im5vcnRod2VzdCIsbmU6Im5vcnRoZWFzdCJ9O0V4dC5SZXNpemFibGUuSGFuZGxlPWZ1bmN0aW9uKEMsRSxCLEQpe2lmKCF0aGlzLnRwbCl7dmFyIEE9RXh0LkRvbUhlbHBlci5jcmVhdGVUZW1wbGF0ZSh7dGFnOiJkaXYiLGNsczoieC1yZXNpemFibGUtaGFuZGxlIHgtcmVzaXphYmxlLWhhbmRsZS17MH0ifSk7QS5jb21waWxlKCk7RXh0LlJlc2l6YWJsZS5IYW5kbGUucHJvdG90eXBlLnRwbD1BfXRoaXMucG9zaXRpb249RTt0aGlzLnJ6PUM7dGhpcy5lbD10aGlzLnRwbC5hcHBlbmQoQy5lbC5kb20sW3RoaXMucG9zaXRpb25dLHRydWUpO3RoaXMuZWwudW5zZWxlY3RhYmxlKCk7aWYoRCl7dGhpcy5lbC5zZXRPcGFjaXR5KDApfXRoaXMuZWwub24oIm1vdXNlZG93biIsdGhpcy5vbk1vdXNlRG93bix0aGlzKTtpZighQil7dGhpcy5lbC5vbigibW91c2VvdmVyIix0aGlzLm9uTW91c2VPdmVyLHRoaXMpO3RoaXMuZWwub24oIm1vdXNlb3V0Iix0aGlzLm9uTW91c2VPdXQsdGhpcyl9fTtFeHQuUmVzaXphYmxlLkhhbmRsZS5wcm90b3R5cGU9e2FmdGVyUmVzaXplOmZ1bmN0aW9uKEEpe30sb25Nb3VzZURvd246ZnVuY3Rpb24oQSl7dGhpcy5yei5vbk1vdXNlRG93bih0aGlzLEEpfSxvbk1vdXNlT3ZlcjpmdW5jdGlvbihBKXt0aGlzLnJ6LmhhbmRsZU92ZXIodGhpcyxBKX0sb25Nb3VzZU91dDpmdW5jdGlvbihBKXt0aGlzLnJ6LmhhbmRsZU91dCh0aGlzLEEpfX07DQpFeHQuRWRpdG9yPWZ1bmN0aW9uKEIsQSl7dGhpcy5maWVsZD1CO0V4dC5FZGl0b3Iuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsQSl9O0V4dC5leHRlbmQoRXh0LkVkaXRvcixFeHQuQ29tcG9uZW50LHt2YWx1ZToiIixhbGlnbm1lbnQ6ImMtYz8iLHNoYWRvdzoiZnJhbWUiLGNvbnN0cmFpbjpmYWxzZSxzd2FsbG93S2V5czp0cnVlLGNvbXBsZXRlT25FbnRlcjpmYWxzZSxjYW5jZWxPbkVzYzpmYWxzZSx1cGRhdGVFbDpmYWxzZSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7RXh0LkVkaXRvci5zdXBlcmNsYXNzLmluaXRDb21wb25lbnQuY2FsbCh0aGlzKTt0aGlzLmFkZEV2ZW50cygiYmVmb3Jlc3RhcnRlZGl0Iiwic3RhcnRlZGl0IiwiYmVmb3JlY29tcGxldGUiLCJjb21wbGV0ZSIsInNwZWNpYWxrZXkiKX0sb25SZW5kZXI6ZnVuY3Rpb24oQixBKXt0aGlzLmVsPW5ldyBFeHQuTGF5ZXIoe3NoYWRvdzp0aGlzLnNoYWRvdyxjbHM6IngtZWRpdG9yIixwYXJlbnRFbDpCLHNoaW06dGhpcy5zaGltLHNoYWRvd09mZnNldDo0LGlkOnRoaXMuaWQsY29uc3RyYWluOnRoaXMuY29uc3RyYWlufSk7dGhpcy5lbC5zZXRTdHlsZSgib3ZlcmZsb3ciLEV4dC5pc0dlY2tvPyJhdXRvIjoiaGlkZGVuIik7aWYodGhpcy5maWVsZC5tc2dUYXJnZXQhPSJ0aXRsZSIpe3RoaXMuZmllbGQubXNnVGFyZ2V0PSJxdGlwIn10aGlzLmZpZWxkLmluRWRpdG9yPXRydWU7dGhpcy5maWVsZC5yZW5kZXIodGhpcy5lbCk7aWYoRXh0LmlzR2Vja28pe3RoaXMuZmllbGQuZWwuZG9tLnNldEF0dHJpYnV0ZSgiYXV0b2NvbXBsZXRlIiwib2ZmIil9dGhpcy5maWVsZC5vbigic3BlY2lhbGtleSIsdGhpcy5vblNwZWNpYWxLZXksdGhpcyk7aWYodGhpcy5zd2FsbG93S2V5cyl7dGhpcy5maWVsZC5lbC5zd2FsbG93RXZlbnQoWyJrZXlkb3duIiwia2V5cHJlc3MiXSl9dGhpcy5maWVsZC5zaG93KCk7dGhpcy5maWVsZC5vbigiYmx1ciIsdGhpcy5vbkJsdXIsdGhpcyk7aWYodGhpcy5maWVsZC5ncm93KXt0aGlzLmZpZWxkLm9uKCJhdXRvc2l6ZSIsdGhpcy5lbC5zeW5jLHRoaXMuZWwse2RlbGF5OjF9KX19LG9uU3BlY2lhbEtleTpmdW5jdGlvbihCLEEpe2lmKHRoaXMuY29tcGxldGVPbkVudGVyJiZBLmdldEtleSgpPT1BLkVOVEVSKXtBLnN0b3BFdmVudCgpO3RoaXMuY29tcGxldGVFZGl0KCl9ZWxzZXtpZih0aGlzLmNhbmNlbE9uRXNjJiZBLmdldEtleSgpPT1BLkVTQyl7dGhpcy5jYW5jZWxFZGl0KCl9ZWxzZXt0aGlzLmZpcmVFdmVudCgic3BlY2lhbGtleSIsQixBKX19fSxzdGFydEVkaXQ6ZnVuY3Rpb24oQixDKXtpZih0aGlzLmVkaXRpbmcpe3RoaXMuY29tcGxldGVFZGl0KCl9dGhpcy5ib3VuZEVsPUV4dC5nZXQoQik7dmFyIEE9QyE9PXVuZGVmaW5lZD9DOnRoaXMuYm91bmRFbC5kb20uaW5uZXJIVE1MO2lmKCF0aGlzLnJlbmRlcmVkKXt0aGlzLnJlbmRlcih0aGlzLnBhcmVudEVsfHxkb2N1bWVudC5ib2R5KX1pZih0aGlzLmZpcmVFdmVudCgiYmVmb3Jlc3RhcnRlZGl0Iix0aGlzLHRoaXMuYm91bmRFbCxBKT09PWZhbHNlKXtyZXR1cm4gfXRoaXMuc3RhcnRWYWx1ZT1BO3RoaXMuZmllbGQuc2V0VmFsdWUoQSk7dGhpcy5kb0F1dG9TaXplKCk7dGhpcy5lbC5hbGlnblRvKHRoaXMuYm91bmRFbCx0aGlzLmFsaWdubWVudCk7dGhpcy5lZGl0aW5nPXRydWU7dGhpcy5zaG93KCl9LGRvQXV0b1NpemU6ZnVuY3Rpb24oKXtpZih0aGlzLmF1dG9TaXplKXt2YXIgQT10aGlzLmJvdW5kRWwuZ2V0U2l6ZSgpO3N3aXRjaCh0aGlzLmF1dG9TaXplKXtjYXNlIndpZHRoIjp0aGlzLnNldFNpemUoQS53aWR0aCwiIik7YnJlYWs7Y2FzZSJoZWlnaHQiOnRoaXMuc2V0U2l6ZSgiIixBLmhlaWdodCk7YnJlYWs7ZGVmYXVsdDp0aGlzLnNldFNpemUoQS53aWR0aCxBLmhlaWdodCl9fX0sc2V0U2l6ZTpmdW5jdGlvbihBLEIpe2RlbGV0ZSB0aGlzLmZpZWxkLmxhc3RTaXplO3RoaXMuZmllbGQuc2V0U2l6ZShBLEIpO2lmKHRoaXMuZWwpe3RoaXMuZWwuc3luYygpfX0scmVhbGlnbjpmdW5jdGlvbigpe3RoaXMuZWwuYWxpZ25Ubyh0aGlzLmJvdW5kRWwsdGhpcy5hbGlnbm1lbnQpfSxjb21wbGV0ZUVkaXQ6ZnVuY3Rpb24oQSl7aWYoIXRoaXMuZWRpdGluZyl7cmV0dXJuIH12YXIgQj10aGlzLmdldFZhbHVlKCk7aWYodGhpcy5yZXZlcnRJbnZhbGlkIT09ZmFsc2UmJiF0aGlzLmZpZWxkLmlzVmFsaWQoKSl7Qj10aGlzLnN0YXJ0VmFsdWU7dGhpcy5jYW5jZWxFZGl0KHRydWUpfWlmKFN0cmluZyhCKT09PVN0cmluZyh0aGlzLnN0YXJ0VmFsdWUpJiZ0aGlzLmlnbm9yZU5vQ2hhbmdlKXt0aGlzLmVkaXRpbmc9ZmFsc2U7dGhpcy5oaWRlKCk7cmV0dXJuIH1pZih0aGlzLmZpcmVFdmVudCgiYmVmb3JlY29tcGxldGUiLHRoaXMsQix0aGlzLnN0YXJ0VmFsdWUpIT09ZmFsc2Upe3RoaXMuZWRpdGluZz1mYWxzZTtpZih0aGlzLnVwZGF0ZUVsJiZ0aGlzLmJvdW5kRWwpe3RoaXMuYm91bmRFbC51cGRhdGUoQil9aWYoQSE9PXRydWUpe3RoaXMuaGlkZSgpfXRoaXMuZmlyZUV2ZW50KCJjb21wbGV0ZSIsdGhpcyxCLHRoaXMuc3RhcnRWYWx1ZSl9fSxvblNob3c6ZnVuY3Rpb24oKXt0aGlzLmVsLnNob3coKTtpZih0aGlzLmhpZGVFbCE9PWZhbHNlKXt0aGlzLmJvdW5kRWwuaGlkZSgpfXRoaXMuZmllbGQuc2hvdygpO2lmKEV4dC5pc0lFJiYhdGhpcy5maXhJRUZvY3VzKXt0aGlzLmZpeElFRm9jdXM9dHJ1ZTt0aGlzLmRlZmVycmVkRm9jdXMuZGVmZXIoNTAsdGhpcyl9ZWxzZXt0aGlzLmZpZWxkLmZvY3VzKCl9dGhpcy5maXJlRXZlbnQoInN0YXJ0ZWRpdCIsdGhpcy5ib3VuZEVsLHRoaXMuc3RhcnRWYWx1ZSl9LGRlZmVycmVkRm9jdXM6ZnVuY3Rpb24oKXtpZih0aGlzLmVkaXRpbmcpe3RoaXMuZmllbGQuZm9jdXMoKX19LGNhbmNlbEVkaXQ6ZnVuY3Rpb24oQSl7aWYodGhpcy5lZGl0aW5nKXt0aGlzLnNldFZhbHVlKHRoaXMuc3RhcnRWYWx1ZSk7aWYoQSE9PXRydWUpe3RoaXMuaGlkZSgpfX19LG9uQmx1cjpmdW5jdGlvbigpe2lmKHRoaXMuYWxsb3dCbHVyIT09dHJ1ZSYmdGhpcy5lZGl0aW5nKXt0aGlzLmNvbXBsZXRlRWRpdCgpfX0sb25IaWRlOmZ1bmN0aW9uKCl7aWYodGhpcy5lZGl0aW5nKXt0aGlzLmNvbXBsZXRlRWRpdCgpO3JldHVybiB9dGhpcy5maWVsZC5ibHVyKCk7aWYodGhpcy5maWVsZC5jb2xsYXBzZSl7dGhpcy5maWVsZC5jb2xsYXBzZSgpfXRoaXMuZWwuaGlkZSgpO2lmKHRoaXMuaGlkZUVsIT09ZmFsc2Upe3RoaXMuYm91bmRFbC5zaG93KCl9fSxzZXRWYWx1ZTpmdW5jdGlvbihBKXt0aGlzLmZpZWxkLnNldFZhbHVlKEEpfSxnZXRWYWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpZWxkLmdldFZhbHVlKCl9LGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmZpZWxkLmRlc3Ryb3koKTt0aGlzLmZpZWxkPW51bGx9fSk7RXh0LnJlZygiZWRpdG9yIixFeHQuRWRpdG9yKTsNCkV4dC5NZXNzYWdlQm94PWZ1bmN0aW9uKCl7dmFyIFIsQixOLFE7dmFyIEcsSixQLEEsSyxNLEgsRjt2YXIgTyxTLEwsQz0iIjt2YXIgRD1mdW5jdGlvbihVKXtSLmhpZGUoKTtFeHQuY2FsbGJhY2soQi5mbixCLnNjb3BlfHx3aW5kb3csW1UsUy5kb20udmFsdWVdLDEpfTt2YXIgVD1mdW5jdGlvbigpe2lmKEImJkIuY2xzKXtSLmVsLnJlbW92ZUNsYXNzKEIuY2xzKX1LLnJlc2V0KCl9O3ZhciBFPWZ1bmN0aW9uKFcsVSxWKXtpZihCJiZCLmNsb3NhYmxlIT09ZmFsc2Upe1IuaGlkZSgpfWlmKFYpe1Yuc3RvcEV2ZW50KCl9fTt2YXIgST1mdW5jdGlvbihVKXt2YXIgVz0wO2lmKCFVKXtPWyJvayJdLmhpZGUoKTtPWyJjYW5jZWwiXS5oaWRlKCk7T1sieWVzIl0uaGlkZSgpO09bIm5vIl0uaGlkZSgpO3JldHVybiBXfVIuZm9vdGVyLmRvbS5zdHlsZS5kaXNwbGF5PSIiO2Zvcih2YXIgViBpbiBPKXtpZih0eXBlb2YgT1tWXSE9ImZ1bmN0aW9uIil7aWYoVVtWXSl7T1tWXS5zaG93KCk7T1tWXS5zZXRUZXh0KHR5cGVvZiBVW1ZdPT0ic3RyaW5nIj9VW1ZdOkV4dC5NZXNzYWdlQm94LmJ1dHRvblRleHRbVl0pO1crPU9bVl0uZWwuZ2V0V2lkdGgoKSsxNX1lbHNle09bVl0uaGlkZSgpfX19cmV0dXJuIFd9O3JldHVybntnZXREaWFsb2c6ZnVuY3Rpb24oVSl7aWYoIVIpe1I9bmV3IEV4dC5XaW5kb3coe2F1dG9DcmVhdGU6dHJ1ZSx0aXRsZTpVLHJlc2l6YWJsZTpmYWxzZSxjb25zdHJhaW46dHJ1ZSxjb25zdHJhaW5IZWFkZXI6dHJ1ZSxtaW5pbWl6YWJsZTpmYWxzZSxtYXhpbWl6YWJsZTpmYWxzZSxzdGF0ZWZ1bDpmYWxzZSxtb2RhbDp0cnVlLHNoaW06dHJ1ZSxidXR0b25BbGlnbjoiY2VudGVyIix3aWR0aDo0MDAsaGVpZ2h0OjEwMCxtaW5IZWlnaHQ6ODAscGxhaW46dHJ1ZSxmb290ZXI6dHJ1ZSxjbG9zYWJsZTp0cnVlLGNsb3NlOmZ1bmN0aW9uKCl7aWYoQiYmQi5idXR0b25zJiZCLmJ1dHRvbnMubm8mJiFCLmJ1dHRvbnMuY2FuY2VsKXtEKCJubyIpfWVsc2V7RCgiY2FuY2VsIil9fX0pO089e307dmFyIFY9dGhpcy5idXR0b25UZXh0O09bIm9rIl09Ui5hZGRCdXR0b24oVlsib2siXSxELmNyZWF0ZUNhbGxiYWNrKCJvayIpKTtPWyJ5ZXMiXT1SLmFkZEJ1dHRvbihWWyJ5ZXMiXSxELmNyZWF0ZUNhbGxiYWNrKCJ5ZXMiKSk7T1sibm8iXT1SLmFkZEJ1dHRvbihWWyJubyJdLEQuY3JlYXRlQ2FsbGJhY2soIm5vIikpO09bImNhbmNlbCJdPVIuYWRkQnV0dG9uKFZbImNhbmNlbCJdLEQuY3JlYXRlQ2FsbGJhY2soImNhbmNlbCIpKTtPWyJvayJdLmhpZGVNb2RlPU9bInllcyJdLmhpZGVNb2RlPU9bIm5vIl0uaGlkZU1vZGU9T1siY2FuY2VsIl0uaGlkZU1vZGU9Im9mZnNldHMiO1IucmVuZGVyKGRvY3VtZW50LmJvZHkpO1IuZ2V0RWwoKS5hZGRDbGFzcygieC13aW5kb3ctZGxnIik7Tj1SLm1hc2s7Rz1SLmJvZHkuY3JlYXRlQ2hpbGQoe2h0bWw6IjxkaXYgY2xhc3M9XCJleHQtbWItaWNvblwiPjwvZGl2PjxkaXYgY2xhc3M9XCJleHQtbWItY29udGVudFwiPjxzcGFuIGNsYXNzPVwiZXh0LW1iLXRleHRcIj48L3NwYW4+PGJyIC8+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJleHQtbWItaW5wdXRcIiAvPjx0ZXh0YXJlYSBjbGFzcz1cImV4dC1tYi10ZXh0YXJlYVwiPjwvdGV4dGFyZWE+PC9kaXY+In0pO0g9RXh0LmdldChHLmRvbS5maXJzdENoaWxkKTt2YXIgVz1HLmRvbS5jaGlsZE5vZGVzWzFdO0o9RXh0LmdldChXLmZpcnN0Q2hpbGQpO1A9RXh0LmdldChXLmNoaWxkTm9kZXNbMl0pO1AuZW5hYmxlRGlzcGxheU1vZGUoKTtQLmFkZEtleUxpc3RlbmVyKFsxMCwxM10sZnVuY3Rpb24oKXtpZihSLmlzVmlzaWJsZSgpJiZCJiZCLmJ1dHRvbnMpe2lmKEIuYnV0dG9ucy5vayl7RCgib2siKX1lbHNle2lmKEIuYnV0dG9ucy55ZXMpe0QoInllcyIpfX19fSk7QT1FeHQuZ2V0KFcuY2hpbGROb2Rlc1szXSk7QS5lbmFibGVEaXNwbGF5TW9kZSgpO0s9bmV3IEV4dC5Qcm9ncmVzc0Jhcih7cmVuZGVyVG86R30pO0cuY3JlYXRlQ2hpbGQoe2NsczoieC1jbGVhciJ9KX1yZXR1cm4gUn0sdXBkYXRlVGV4dDpmdW5jdGlvbihYKXtpZighUi5pc1Zpc2libGUoKSYmIUIud2lkdGgpe1Iuc2V0U2l6ZSh0aGlzLm1heFdpZHRoLDEwMCl9Si51cGRhdGUoWHx8IiYjMTYwOyIpO3ZhciBWPUMhPSIiPyhILmdldFdpZHRoKCkrSC5nZXRNYXJnaW5zKCJsciIpKTowO3ZhciBaPUouZ2V0V2lkdGgoKStKLmdldE1hcmdpbnMoImxyIik7dmFyIFc9Ui5nZXRGcmFtZVdpZHRoKCJsciIpO3ZhciBZPVIuYm9keS5nZXRGcmFtZVdpZHRoKCJsciIpO2lmKEV4dC5pc0lFJiZWPjApe1YrPTN9dmFyIFU9TWF0aC5tYXgoTWF0aC5taW4oQi53aWR0aHx8VitaK1crWSx0aGlzLm1heFdpZHRoKSxNYXRoLm1heChCLm1pbldpZHRofHx0aGlzLm1pbldpZHRoLEx8fDApKTtpZihCLnByb21wdD09PXRydWUpe1Muc2V0V2lkdGgoVS1WLVctWSl9aWYoQi5wcm9ncmVzcz09PXRydWV8fEIud2FpdD09PXRydWUpe0suc2V0U2l6ZShVLVYtVy1ZKX1SLnNldFNpemUoVSwiYXV0byIpLmNlbnRlcigpO3JldHVybiB0aGlzfSx1cGRhdGVQcm9ncmVzczpmdW5jdGlvbihWLFUsVyl7Sy51cGRhdGVQcm9ncmVzcyhWLFUpO2lmKFcpe3RoaXMudXBkYXRlVGV4dChXKX1yZXR1cm4gdGhpc30saXNWaXNpYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIFImJlIuaXNWaXNpYmxlKCl9LGhpZGU6ZnVuY3Rpb24oKXtpZih0aGlzLmlzVmlzaWJsZSgpKXtSLmhpZGUoKTtUKCl9cmV0dXJuIHRoaXN9LHNob3c6ZnVuY3Rpb24oWCl7aWYodGhpcy5pc1Zpc2libGUoKSl7dGhpcy5oaWRlKCl9Qj1YO3ZhciBZPXRoaXMuZ2V0RGlhbG9nKEIudGl0bGV8fCImIzE2MDsiKTtZLnNldFRpdGxlKEIudGl0bGV8fCImIzE2MDsiKTt2YXIgVT0oQi5jbG9zYWJsZSE9PWZhbHNlJiZCLnByb2dyZXNzIT09dHJ1ZSYmQi53YWl0IT09dHJ1ZSk7WS50b29scy5jbG9zZS5zZXREaXNwbGF5ZWQoVSk7Uz1QO0IucHJvbXB0PUIucHJvbXB0fHwoQi5tdWx0aWxpbmU/dHJ1ZTpmYWxzZSk7aWYoQi5wcm9tcHQpe2lmKEIubXVsdGlsaW5lKXtQLmhpZGUoKTtBLnNob3coKTtBLnNldEhlaWdodCh0eXBlb2YgQi5tdWx0aWxpbmU9PSJudW1iZXIiP0IubXVsdGlsaW5lOnRoaXMuZGVmYXVsdFRleHRIZWlnaHQpO1M9QX1lbHNle1Auc2hvdygpO0EuaGlkZSgpfX1lbHNle1AuaGlkZSgpO0EuaGlkZSgpfVMuZG9tLnZhbHVlPUIudmFsdWV8fCIiO2lmKEIucHJvbXB0KXtZLmZvY3VzRWw9U31lbHNle3ZhciBXPUIuYnV0dG9uczt2YXIgVj1udWxsO2lmKFcmJlcub2spe1Y9T1sib2siXX1lbHNle2lmKFcmJlcueWVzKXtWPU9bInllcyJdfX1pZihWKXtZLmZvY3VzRWw9Vn19dGhpcy5zZXRJY29uKEIuaWNvbik7TD1JKEIuYnV0dG9ucyk7Sy5zZXRWaXNpYmxlKEIucHJvZ3Jlc3M9PT10cnVlfHxCLndhaXQ9PT10cnVlKTt0aGlzLnVwZGF0ZVByb2dyZXNzKDAsQi5wcm9ncmVzc1RleHQpO3RoaXMudXBkYXRlVGV4dChCLm1zZyk7aWYoQi5jbHMpe1kuZWwuYWRkQ2xhc3MoQi5jbHMpfVkucHJveHlEcmFnPUIucHJveHlEcmFnPT09dHJ1ZTtZLm1vZGFsPUIubW9kYWwhPT1mYWxzZTtZLm1hc2s9Qi5tb2RhbCE9PWZhbHNlP046ZmFsc2U7aWYoIVkuaXNWaXNpYmxlKCkpe2RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoUi5lbC5kb20pO1kuc2V0QW5pbWF0ZVRhcmdldChCLmFuaW1FbCk7WS5zaG93KEIuYW5pbUVsKX1ZLm9uKCJzaG93IixmdW5jdGlvbigpe2lmKFU9PT10cnVlKXtZLmtleU1hcC5lbmFibGUoKX1lbHNle1kua2V5TWFwLmRpc2FibGUoKX19LHRoaXMse3NpbmdsZTp0cnVlfSk7aWYoQi53YWl0PT09dHJ1ZSl7Sy53YWl0KEIud2FpdENvbmZpZyl9cmV0dXJuIHRoaXN9LHNldEljb246ZnVuY3Rpb24oVSl7aWYoVSYmVSE9IiIpe0gucmVtb3ZlQ2xhc3MoIngtaGlkZGVuIik7SC5yZXBsYWNlQ2xhc3MoQyxVKTtDPVV9ZWxzZXtILnJlcGxhY2VDbGFzcyhDLCJ4LWhpZGRlbiIpO0M9IiJ9cmV0dXJuIHRoaXN9LHByb2dyZXNzOmZ1bmN0aW9uKFcsVixVKXt0aGlzLnNob3coe3RpdGxlOlcsbXNnOlYsYnV0dG9uczpmYWxzZSxwcm9ncmVzczp0cnVlLGNsb3NhYmxlOmZhbHNlLG1pbldpZHRoOnRoaXMubWluUHJvZ3Jlc3NXaWR0aCxwcm9ncmVzc1RleHQ6VX0pO3JldHVybiB0aGlzfSx3YWl0OmZ1bmN0aW9uKFcsVixVKXt0aGlzLnNob3coe3RpdGxlOlYsbXNnOlcsYnV0dG9uczpmYWxzZSxjbG9zYWJsZTpmYWxzZSx3YWl0OnRydWUsbW9kYWw6dHJ1ZSxtaW5XaWR0aDp0aGlzLm1pblByb2dyZXNzV2lkdGgsd2FpdENvbmZpZzpVfSk7cmV0dXJuIHRoaXN9LGFsZXJ0OmZ1bmN0aW9uKFgsVyxWLFUpe3RoaXMuc2hvdyh7dGl0bGU6WCxtc2c6VyxidXR0b25zOnRoaXMuT0ssZm46VixzY29wZTpVfSk7cmV0dXJuIHRoaXN9LGNvbmZpcm06ZnVuY3Rpb24oWCxXLFYsVSl7dGhpcy5zaG93KHt0aXRsZTpYLG1zZzpXLGJ1dHRvbnM6dGhpcy5ZRVNOTyxmbjpWLHNjb3BlOlUsaWNvbjp0aGlzLlFVRVNUSU9OfSk7cmV0dXJuIHRoaXN9LHByb21wdDpmdW5jdGlvbihZLFgsVyxWLFUpe3RoaXMuc2hvdyh7dGl0bGU6WSxtc2c6WCxidXR0b25zOnRoaXMuT0tDQU5DRUwsZm46VyxtaW5XaWR0aDoyNTAsc2NvcGU6Vixwcm9tcHQ6dHJ1ZSxtdWx0aWxpbmU6VX0pO3JldHVybiB0aGlzfSxPSzp7b2s6dHJ1ZX0sQ0FOQ0VMOntjYW5jZWw6dHJ1ZX0sT0tDQU5DRUw6e29rOnRydWUsY2FuY2VsOnRydWV9LFlFU05POnt5ZXM6dHJ1ZSxubzp0cnVlfSxZRVNOT0NBTkNFTDp7eWVzOnRydWUsbm86dHJ1ZSxjYW5jZWw6dHJ1ZX0sSU5GTzoiZXh0LW1iLWluZm8iLFdBUk5JTkc6ImV4dC1tYi13YXJuaW5nIixRVUVTVElPTjoiZXh0LW1iLXF1ZXN0aW9uIixFUlJPUjoiZXh0LW1iLWVycm9yIixkZWZhdWx0VGV4dEhlaWdodDo3NSxtYXhXaWR0aDo2MDAsbWluV2lkdGg6MTAwLG1pblByb2dyZXNzV2lkdGg6MjUwLGJ1dHRvblRleHQ6e29rOiJPSyIsY2FuY2VsOiJDYW5jZWwiLHllczoiWWVzIixubzoiTm8ifX19KCk7RXh0Lk1zZz1FeHQuTWVzc2FnZUJveDsNCkV4dC5UaXA9RXh0LmV4dGVuZChFeHQuUGFuZWwse21pbldpZHRoOjQwLG1heFdpZHRoOjMwMCxzaGFkb3c6InNpZGVzIixkZWZhdWx0QWxpZ246InRsLWJsPyIsYXV0b1JlbmRlcjp0cnVlLHF1aWNrU2hvd0ludGVydmFsOjI1MCxmcmFtZTp0cnVlLGhpZGRlbjp0cnVlLGJhc2VDbHM6IngtdGlwIixmbG9hdGluZzp7c2hhZG93OnRydWUsc2hpbTp0cnVlLHVzZURpc3BsYXk6dHJ1ZSxjb25zdHJhaW46ZmFsc2V9LGF1dG9IZWlnaHQ6dHJ1ZSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7RXh0LlRpcC5zdXBlcmNsYXNzLmluaXRDb21wb25lbnQuY2FsbCh0aGlzKTtpZih0aGlzLmNsb3NhYmxlJiYhdGhpcy50aXRsZSl7dGhpcy5lbGVtZW50cys9IixoZWFkZXIifX0sYWZ0ZXJSZW5kZXI6ZnVuY3Rpb24oKXtFeHQuVGlwLnN1cGVyY2xhc3MuYWZ0ZXJSZW5kZXIuY2FsbCh0aGlzKTtpZih0aGlzLmNsb3NhYmxlKXt0aGlzLmFkZFRvb2woe2lkOiJjbG9zZSIsaGFuZGxlcjp0aGlzLmhpZGUsc2NvcGU6dGhpc30pfX0sc2hvd0F0OmZ1bmN0aW9uKEEpe0V4dC5UaXAuc3VwZXJjbGFzcy5zaG93LmNhbGwodGhpcyk7aWYodGhpcy5tZWFzdXJlV2lkdGghPT1mYWxzZSYmKCF0aGlzLmluaXRpYWxDb25maWd8fHR5cGVvZiB0aGlzLmluaXRpYWxDb25maWcud2lkdGghPSJudW1iZXIiKSl7dmFyIEI9dGhpcy5ib2R5LmdldFRleHRXaWR0aCgpO2lmKHRoaXMudGl0bGUpe0I9TWF0aC5tYXgoQix0aGlzLmhlYWRlci5jaGlsZCgic3BhbiIpLmdldFRleHRXaWR0aCh0aGlzLnRpdGxlKSl9Qis9dGhpcy5nZXRGcmFtZVdpZHRoKCkrKHRoaXMuY2xvc2FibGU/MjA6MCkrdGhpcy5ib2R5LmdldFBhZGRpbmcoImxyIik7dGhpcy5zZXRXaWR0aChCLmNvbnN0cmFpbih0aGlzLm1pbldpZHRoLHRoaXMubWF4V2lkdGgpKX1pZih0aGlzLmNvbnN0cmFpblBvc2l0aW9uKXtBPXRoaXMuZWwuYWRqdXN0Rm9yQ29uc3RyYWludHMoQSl9dGhpcy5zZXRQYWdlUG9zaXRpb24oQVswXSxBWzFdKX0sc2hvd0J5OmZ1bmN0aW9uKEEsQil7aWYoIXRoaXMucmVuZGVyZWQpe3RoaXMucmVuZGVyKEV4dC5nZXRCb2R5KCkpfXRoaXMuc2hvd0F0KHRoaXMuZWwuZ2V0QWxpZ25Ub1hZKEEsQnx8dGhpcy5kZWZhdWx0QWxpZ24pKX0saW5pdERyYWdnYWJsZTpmdW5jdGlvbigpe3RoaXMuZGQ9bmV3IEV4dC5UaXAuREQodGhpcyx0eXBlb2YgdGhpcy5kcmFnZ2FibGU9PSJib29sZWFuIj9udWxsOnRoaXMuZHJhZ2dhYmxlKTt0aGlzLmhlYWRlci5hZGRDbGFzcygieC10aXAtZHJhZ2dhYmxlIil9fSk7RXh0LlRpcC5ERD1mdW5jdGlvbihCLEEpe0V4dC5hcHBseSh0aGlzLEEpO3RoaXMudGlwPUI7RXh0LlRpcC5ERC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxCLmVsLmlkLCJXaW5kb3dERC0iK0IuaWQpO3RoaXMuc2V0SGFuZGxlRWxJZChCLmhlYWRlci5pZCk7dGhpcy5zY3JvbGw9ZmFsc2V9O0V4dC5leHRlbmQoRXh0LlRpcC5ERCxFeHQuZGQuREQse21vdmVPbmx5OnRydWUsc2Nyb2xsOmZhbHNlLGhlYWRlck9mZnNldHM6WzEwMCwyNV0sc3RhcnREcmFnOmZ1bmN0aW9uKCl7dGhpcy50aXAuZWwuZGlzYWJsZVNoYWRvdygpfSxlbmREcmFnOmZ1bmN0aW9uKEEpe3RoaXMudGlwLmVsLmVuYWJsZVNoYWRvdyh0cnVlKX19KTsNCkV4dC5Ub29sVGlwPUV4dC5leHRlbmQoRXh0LlRpcCx7c2hvd0RlbGF5OjUwMCxoaWRlRGVsYXk6MjAwLGRpc21pc3NEZWxheTo1MDAwLG1vdXNlT2Zmc2V0OlsxNSwxOF0sdHJhY2tNb3VzZTpmYWxzZSxjb25zdHJhaW5Qb3NpdGlvbjp0cnVlLGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXtFeHQuVG9vbFRpcC5zdXBlcmNsYXNzLmluaXRDb21wb25lbnQuY2FsbCh0aGlzKTt0aGlzLmxhc3RBY3RpdmU9bmV3IERhdGUoKTt0aGlzLmluaXRUYXJnZXQoKX0saW5pdFRhcmdldDpmdW5jdGlvbigpe2lmKHRoaXMudGFyZ2V0KXt0aGlzLnRhcmdldD1FeHQuZ2V0KHRoaXMudGFyZ2V0KTt0aGlzLnRhcmdldC5vbigibW91c2VvdmVyIix0aGlzLm9uVGFyZ2V0T3Zlcix0aGlzKTt0aGlzLnRhcmdldC5vbigibW91c2VvdXQiLHRoaXMub25UYXJnZXRPdXQsdGhpcyk7dGhpcy50YXJnZXQub24oIm1vdXNlbW92ZSIsdGhpcy5vbk1vdXNlTW92ZSx0aGlzKX19LG9uTW91c2VNb3ZlOmZ1bmN0aW9uKEEpe3RoaXMudGFyZ2V0WFk9QS5nZXRYWSgpO2lmKCF0aGlzLmhpZGRlbiYmdGhpcy50cmFja01vdXNlKXt0aGlzLnNldFBhZ2VQb3NpdGlvbih0aGlzLmdldFRhcmdldFhZKCkpfX0sZ2V0VGFyZ2V0WFk6ZnVuY3Rpb24oKXtyZXR1cm5bdGhpcy50YXJnZXRYWVswXSt0aGlzLm1vdXNlT2Zmc2V0WzBdLHRoaXMudGFyZ2V0WFlbMV0rdGhpcy5tb3VzZU9mZnNldFsxXV19LG9uVGFyZ2V0T3ZlcjpmdW5jdGlvbihBKXtpZih0aGlzLmRpc2FibGVkfHxBLndpdGhpbih0aGlzLnRhcmdldC5kb20sdHJ1ZSkpe3JldHVybiB9dGhpcy5jbGVhclRpbWVyKCJoaWRlIik7dGhpcy50YXJnZXRYWT1BLmdldFhZKCk7dGhpcy5kZWxheVNob3coKX0sZGVsYXlTaG93OmZ1bmN0aW9uKCl7aWYodGhpcy5oaWRkZW4mJiF0aGlzLnNob3dUaW1lcil7aWYodGhpcy5sYXN0QWN0aXZlLmdldEVsYXBzZWQoKTx0aGlzLnF1aWNrU2hvd0ludGVydmFsKXt0aGlzLnNob3coKX1lbHNle3RoaXMuc2hvd1RpbWVyPXRoaXMuc2hvdy5kZWZlcih0aGlzLnNob3dEZWxheSx0aGlzKX19ZWxzZXtpZighdGhpcy5oaWRkZW4mJnRoaXMuYXV0b0hpZGUhPT1mYWxzZSl7dGhpcy5zaG93KCl9fX0sb25UYXJnZXRPdXQ6ZnVuY3Rpb24oQSl7aWYodGhpcy5kaXNhYmxlZHx8QS53aXRoaW4odGhpcy50YXJnZXQuZG9tLHRydWUpKXtyZXR1cm4gfXRoaXMuY2xlYXJUaW1lcigic2hvdyIpO2lmKHRoaXMuYXV0b0hpZGUhPT1mYWxzZSl7dGhpcy5kZWxheUhpZGUoKX19LGRlbGF5SGlkZTpmdW5jdGlvbigpe2lmKCF0aGlzLmhpZGRlbiYmIXRoaXMuaGlkZVRpbWVyKXt0aGlzLmhpZGVUaW1lcj10aGlzLmhpZGUuZGVmZXIodGhpcy5oaWRlRGVsYXksdGhpcyl9fSxoaWRlOmZ1bmN0aW9uKCl7dGhpcy5jbGVhclRpbWVyKCJkaXNtaXNzIik7dGhpcy5sYXN0QWN0aXZlPW5ldyBEYXRlKCk7RXh0LlRvb2xUaXAuc3VwZXJjbGFzcy5oaWRlLmNhbGwodGhpcyl9LHNob3c6ZnVuY3Rpb24oKXt0aGlzLnNob3dBdCh0aGlzLmdldFRhcmdldFhZKCkpfSxzaG93QXQ6ZnVuY3Rpb24oQSl7dGhpcy5sYXN0QWN0aXZlPW5ldyBEYXRlKCk7dGhpcy5jbGVhclRpbWVycygpO0V4dC5Ub29sVGlwLnN1cGVyY2xhc3Muc2hvd0F0LmNhbGwodGhpcyxBKTtpZih0aGlzLmRpc21pc3NEZWxheSYmdGhpcy5hdXRvSGlkZSE9PWZhbHNlKXt0aGlzLmRpc21pc3NUaW1lcj10aGlzLmhpZGUuZGVmZXIodGhpcy5kaXNtaXNzRGVsYXksdGhpcyl9fSxjbGVhclRpbWVyOmZ1bmN0aW9uKEEpe0E9QSsiVGltZXIiO2NsZWFyVGltZW91dCh0aGlzW0FdKTtkZWxldGUgdGhpc1tBXX0sY2xlYXJUaW1lcnM6ZnVuY3Rpb24oKXt0aGlzLmNsZWFyVGltZXIoInNob3ciKTt0aGlzLmNsZWFyVGltZXIoImRpc21pc3MiKTt0aGlzLmNsZWFyVGltZXIoImhpZGUiKX0sb25TaG93OmZ1bmN0aW9uKCl7RXh0LlRvb2xUaXAuc3VwZXJjbGFzcy5vblNob3cuY2FsbCh0aGlzKTtFeHQuZ2V0RG9jKCkub24oIm1vdXNlZG93biIsdGhpcy5vbkRvY01vdXNlRG93bix0aGlzKX0sb25IaWRlOmZ1bmN0aW9uKCl7RXh0LlRvb2xUaXAuc3VwZXJjbGFzcy5vbkhpZGUuY2FsbCh0aGlzKTtFeHQuZ2V0RG9jKCkudW4oIm1vdXNlZG93biIsdGhpcy5vbkRvY01vdXNlRG93bix0aGlzKX0sb25Eb2NNb3VzZURvd246ZnVuY3Rpb24oQSl7aWYodGhpcy5hdXRvSGlkZSE9PWZhbHNlJiYhQS53aXRoaW4odGhpcy5lbC5kb20pKXt0aGlzLmRpc2FibGUoKTt0aGlzLmVuYWJsZS5kZWZlcigxMDAsdGhpcyl9fSxvbkRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLmNsZWFyVGltZXJzKCk7dGhpcy5oaWRlKCl9LGFkanVzdFBvc2l0aW9uOmZ1bmN0aW9uKEEsRCl7dmFyIEM9dGhpcy50YXJnZXRYWVsxXSxCPXRoaXMuZ2V0U2l6ZSgpLmhlaWdodDtpZih0aGlzLmNvbnN0cmFpblBvc2l0aW9uJiZEPD1DJiYoRCtCKT49Qyl7RD1DLUItNX1yZXR1cm57eDpBLHk6RH19LG9uRGVzdHJveTpmdW5jdGlvbigpe0V4dC5Ub29sVGlwLnN1cGVyY2xhc3Mub25EZXN0cm95LmNhbGwodGhpcyk7aWYodGhpcy50YXJnZXQpe3RoaXMudGFyZ2V0LnVuKCJtb3VzZW92ZXIiLHRoaXMub25UYXJnZXRPdmVyLHRoaXMpO3RoaXMudGFyZ2V0LnVuKCJtb3VzZW91dCIsdGhpcy5vblRhcmdldE91dCx0aGlzKTt0aGlzLnRhcmdldC51bigibW91c2Vtb3ZlIix0aGlzLm9uTW91c2VNb3ZlLHRoaXMpfX19KTsNCkV4dC5RdWlja1RpcD1FeHQuZXh0ZW5kKEV4dC5Ub29sVGlwLHtpbnRlcmNlcHRUaXRsZXM6ZmFsc2UsdGFnQ29uZmlnOntuYW1lc3BhY2U6ImV4dCIsYXR0cmlidXRlOiJxdGlwIix3aWR0aDoicXdpZHRoIix0YXJnZXQ6InRhcmdldCIsdGl0bGU6InF0aXRsZSIsaGlkZToiaGlkZSIsY2xzOiJxY2xhc3MiLGFsaWduOiJxYWxpZ24ifSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7dGhpcy50YXJnZXQ9dGhpcy50YXJnZXR8fEV4dC5nZXREb2MoKTt0aGlzLnRhcmdldHM9dGhpcy50YXJnZXRzfHx7fTtFeHQuUXVpY2tUaXAuc3VwZXJjbGFzcy5pbml0Q29tcG9uZW50LmNhbGwodGhpcyl9LHJlZ2lzdGVyOmZ1bmN0aW9uKEQpe3ZhciBGPUV4dC5pc0FycmF5KEQpP0Q6YXJndW1lbnRzO2Zvcih2YXIgRT0wLEE9Ri5sZW5ndGg7RTxBO0UrKyl7dmFyIEg9RltFXTt2YXIgRz1ILnRhcmdldDtpZihHKXtpZihFeHQuaXNBcnJheShHKSl7Zm9yKHZhciBDPTAsQj1HLmxlbmd0aDtDPEI7QysrKXt0aGlzLnRhcmdldHNbRXh0LmlkKEdbQ10pXT1IfX1lbHNle3RoaXMudGFyZ2V0c1tFeHQuaWQoRyldPUh9fX19LHVucmVnaXN0ZXI6ZnVuY3Rpb24oQSl7ZGVsZXRlIHRoaXMudGFyZ2V0c1tFeHQuaWQoQSldfSxvblRhcmdldE92ZXI6ZnVuY3Rpb24oRyl7aWYodGhpcy5kaXNhYmxlZCl7cmV0dXJuIH10aGlzLnRhcmdldFhZPUcuZ2V0WFkoKTt2YXIgQz1HLmdldFRhcmdldCgpO2lmKCFDfHxDLm5vZGVUeXBlIT09MXx8Qz09ZG9jdW1lbnR8fEM9PWRvY3VtZW50LmJvZHkpe3JldHVybiB9aWYodGhpcy5hY3RpdmVUYXJnZXQmJkM9PXRoaXMuYWN0aXZlVGFyZ2V0LmVsKXt0aGlzLmNsZWFyVGltZXIoImhpZGUiKTt0aGlzLnNob3coKTtyZXR1cm4gfWlmKEMmJnRoaXMudGFyZ2V0c1tDLmlkXSl7dGhpcy5hY3RpdmVUYXJnZXQ9dGhpcy50YXJnZXRzW0MuaWRdO3RoaXMuYWN0aXZlVGFyZ2V0LmVsPUM7dGhpcy5kZWxheVNob3coKTtyZXR1cm4gfXZhciBFLEY9RXh0LmZseShDKSxCPXRoaXMudGFnQ29uZmlnO3ZhciBEPUIubmFtZXNwYWNlO2lmKHRoaXMuaW50ZXJjZXB0VGl0bGVzJiZDLnRpdGxlKXtFPUMudGl0bGU7Qy5xdGlwPUU7Qy5yZW1vdmVBdHRyaWJ1dGUoInRpdGxlIik7Ry5wcmV2ZW50RGVmYXVsdCgpfWVsc2V7RT1DLnF0aXB8fEYuZ2V0QXR0cmlidXRlTlMoRCxCLmF0dHJpYnV0ZSl9aWYoRSl7dmFyIEE9Ri5nZXRBdHRyaWJ1dGVOUyhELEIuaGlkZSk7dGhpcy5hY3RpdmVUYXJnZXQ9e2VsOkMsdGV4dDpFLHdpZHRoOkYuZ2V0QXR0cmlidXRlTlMoRCxCLndpZHRoKSxhdXRvSGlkZTpBIT0idXNlciImJkEhPT0iZmFsc2UiLHRpdGxlOkYuZ2V0QXR0cmlidXRlTlMoRCxCLnRpdGxlKSxjbHM6Ri5nZXRBdHRyaWJ1dGVOUyhELEIuY2xzKSxhbGlnbjpGLmdldEF0dHJpYnV0ZU5TKEQsQi5hbGlnbil9O3RoaXMuZGVsYXlTaG93KCl9fSxvblRhcmdldE91dDpmdW5jdGlvbihBKXt0aGlzLmNsZWFyVGltZXIoInNob3ciKTtpZih0aGlzLmF1dG9IaWRlIT09ZmFsc2Upe3RoaXMuZGVsYXlIaWRlKCl9fSxzaG93QXQ6ZnVuY3Rpb24oQil7dmFyIEE9dGhpcy5hY3RpdmVUYXJnZXQ7aWYoQSl7aWYoIXRoaXMucmVuZGVyZWQpe3RoaXMucmVuZGVyKEV4dC5nZXRCb2R5KCkpO3RoaXMuYWN0aXZlVGFyZ2V0PUF9aWYoQS53aWR0aCl7dGhpcy5zZXRXaWR0aChBLndpZHRoKTt0aGlzLmJvZHkuc2V0V2lkdGgodGhpcy5hZGp1c3RCb2R5V2lkdGgoQS53aWR0aC10aGlzLmdldEZyYW1lV2lkdGgoKSkpO3RoaXMubWVhc3VyZVdpZHRoPWZhbHNlfWVsc2V7dGhpcy5tZWFzdXJlV2lkdGg9dHJ1ZX10aGlzLnNldFRpdGxlKEEudGl0bGV8fCIiKTt0aGlzLmJvZHkudXBkYXRlKEEudGV4dCk7dGhpcy5hdXRvSGlkZT1BLmF1dG9IaWRlO3RoaXMuZGlzbWlzc0RlbGF5PUEuZGlzbWlzc0RlbGF5fHx0aGlzLmRpc21pc3NEZWxheTtpZih0aGlzLmxhc3RDbHMpe3RoaXMuZWwucmVtb3ZlQ2xhc3ModGhpcy5sYXN0Q2xzKTtkZWxldGUgdGhpcy5sYXN0Q2xzfWlmKEEuY2xzKXt0aGlzLmVsLmFkZENsYXNzKEEuY2xzKTt0aGlzLmxhc3RDbHM9QS5jbHN9aWYoQS5hbGlnbil7Qj10aGlzLmVsLmdldEFsaWduVG9YWShBLmVsLEEuYWxpZ24pO3RoaXMuY29uc3RyYWluUG9zaXRpb249ZmFsc2V9ZWxzZXt0aGlzLmNvbnN0cmFpblBvc2l0aW9uPXRydWV9fUV4dC5RdWlja1RpcC5zdXBlcmNsYXNzLnNob3dBdC5jYWxsKHRoaXMsQil9LGhpZGU6ZnVuY3Rpb24oKXtkZWxldGUgdGhpcy5hY3RpdmVUYXJnZXQ7RXh0LlF1aWNrVGlwLnN1cGVyY2xhc3MuaGlkZS5jYWxsKHRoaXMpfX0pOw0KRXh0LlF1aWNrVGlwcz1mdW5jdGlvbigpe3ZhciBCLEE9W107cmV0dXJue2luaXQ6ZnVuY3Rpb24oKXtpZighQil7Qj1uZXcgRXh0LlF1aWNrVGlwKHtlbGVtZW50czoiaGVhZGVyLGJvZHkifSl9fSxlbmFibGU6ZnVuY3Rpb24oKXtpZihCKXtBLnBvcCgpO2lmKEEubGVuZ3RoPDEpe0IuZW5hYmxlKCl9fX0sZGlzYWJsZTpmdW5jdGlvbigpe2lmKEIpe0IuZGlzYWJsZSgpfUEucHVzaCgxKX0saXNFbmFibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIEImJiFCLmRpc2FibGVkfSxnZXRRdWlja1RpcDpmdW5jdGlvbigpe3JldHVybiBCfSxyZWdpc3RlcjpmdW5jdGlvbigpe0IucmVnaXN0ZXIuYXBwbHkoQixhcmd1bWVudHMpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKCl7Qi51bnJlZ2lzdGVyLmFwcGx5KEIsYXJndW1lbnRzKX0sdGlwczpmdW5jdGlvbigpe0IucmVnaXN0ZXIuYXBwbHkoQixhcmd1bWVudHMpfX19KCk7DQpFeHQudHJlZS5UcmVlUGFuZWw9RXh0LmV4dGVuZChFeHQuUGFuZWwse3Jvb3RWaXNpYmxlOnRydWUsYW5pbWF0ZTpFeHQuZW5hYmxlRngsbGluZXM6dHJ1ZSxlbmFibGVERDpmYWxzZSxobERyb3A6RXh0LmVuYWJsZUZ4LHBhdGhTZXBhcmF0b3I6Ii8iLGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXtFeHQudHJlZS5UcmVlUGFuZWwuc3VwZXJjbGFzcy5pbml0Q29tcG9uZW50LmNhbGwodGhpcyk7aWYoIXRoaXMuZXZlbnRNb2RlbCl7dGhpcy5ldmVudE1vZGVsPW5ldyBFeHQudHJlZS5UcmVlRXZlbnRNb2RlbCh0aGlzKX10aGlzLm5vZGVIYXNoPXt9O2lmKHRoaXMucm9vdCl7dGhpcy5zZXRSb290Tm9kZSh0aGlzLnJvb3QpfXRoaXMuYWRkRXZlbnRzKCJhcHBlbmQiLCJyZW1vdmUiLCJtb3Zlbm9kZSIsImluc2VydCIsImJlZm9yZWFwcGVuZCIsImJlZm9yZXJlbW92ZSIsImJlZm9yZW1vdmVub2RlIiwiYmVmb3JlaW5zZXJ0IiwiYmVmb3JlbG9hZCIsImxvYWQiLCJ0ZXh0Y2hhbmdlIiwiYmVmb3JlZXhwYW5kbm9kZSIsImJlZm9yZWNvbGxhcHNlbm9kZSIsImV4cGFuZG5vZGUiLCJkaXNhYmxlZGNoYW5nZSIsImNvbGxhcHNlbm9kZSIsImJlZm9yZWNsaWNrIiwiY2xpY2siLCJjaGVja2NoYW5nZSIsImRibGNsaWNrIiwiY29udGV4dG1lbnUiLCJiZWZvcmVjaGlsZHJlbnJlbmRlcmVkIiwic3RhcnRkcmFnIiwiZW5kZHJhZyIsImRyYWdkcm9wIiwiYmVmb3Jlbm9kZWRyb3AiLCJub2RlZHJvcCIsIm5vZGVkcmFnb3ZlciIpO2lmKHRoaXMuc2luZ2xlRXhwYW5kKXt0aGlzLm9uKCJiZWZvcmVleHBhbmRub2RlIix0aGlzLnJlc3RyaWN0RXhwYW5kLHRoaXMpfX0scHJveHlOb2RlRXZlbnQ6ZnVuY3Rpb24oQyxCLEEsRyxGLEUsRCl7aWYoQz09ImNvbGxhcHNlInx8Qz09ImV4cGFuZCJ8fEM9PSJiZWZvcmVjb2xsYXBzZSJ8fEM9PSJiZWZvcmVleHBhbmQifHxDPT0ibW92ZSJ8fEM9PSJiZWZvcmVtb3ZlIil7Qz1DKyJub2RlIn1yZXR1cm4gdGhpcy5maXJlRXZlbnQoQyxCLEEsRyxGLEUsRCl9LGdldFJvb3ROb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucm9vdH0sc2V0Um9vdE5vZGU6ZnVuY3Rpb24oQil7dGhpcy5yb290PUI7Qi5vd25lclRyZWU9dGhpcztCLmlzUm9vdD10cnVlO3RoaXMucmVnaXN0ZXJOb2RlKEIpO2lmKCF0aGlzLnJvb3RWaXNpYmxlKXt2YXIgQT1CLmF0dHJpYnV0ZXMudWlQcm92aWRlcjtCLnVpPUE/bmV3IEEoQik6bmV3IEV4dC50cmVlLlJvb3RUcmVlTm9kZVVJKEIpfXJldHVybiBCfSxnZXROb2RlQnlJZDpmdW5jdGlvbihBKXtyZXR1cm4gdGhpcy5ub2RlSGFzaFtBXX0scmVnaXN0ZXJOb2RlOmZ1bmN0aW9uKEEpe3RoaXMubm9kZUhhc2hbQS5pZF09QX0sdW5yZWdpc3Rlck5vZGU6ZnVuY3Rpb24oQSl7ZGVsZXRlIHRoaXMubm9kZUhhc2hbQS5pZF19LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIltUcmVlIisodGhpcy5pZD8iICIrdGhpcy5pZDoiIikrIl0ifSxyZXN0cmljdEV4cGFuZDpmdW5jdGlvbihBKXt2YXIgQj1BLnBhcmVudE5vZGU7aWYoQil7aWYoQi5leHBhbmRlZENoaWxkJiZCLmV4cGFuZGVkQ2hpbGQucGFyZW50Tm9kZT09Qil7Qi5leHBhbmRlZENoaWxkLmNvbGxhcHNlKCl9Qi5leHBhbmRlZENoaWxkPUF9fSxnZXRDaGVja2VkOmZ1bmN0aW9uKEEsQil7Qj1CfHx0aGlzLnJvb3Q7dmFyIEM9W107dmFyIEQ9ZnVuY3Rpb24oKXtpZih0aGlzLmF0dHJpYnV0ZXMuY2hlY2tlZCl7Qy5wdXNoKCFBP3RoaXM6KEE9PSJpZCI/dGhpcy5pZDp0aGlzLmF0dHJpYnV0ZXNbQV0pKX19O0IuY2FzY2FkZShEKTtyZXR1cm4gQ30sZ2V0RWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbH0sZ2V0TG9hZGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG9hZGVyfSxleHBhbmRBbGw6ZnVuY3Rpb24oKXt0aGlzLnJvb3QuZXhwYW5kKHRydWUpfSxjb2xsYXBzZUFsbDpmdW5jdGlvbigpe3RoaXMucm9vdC5jb2xsYXBzZSh0cnVlKX0sZ2V0U2VsZWN0aW9uTW9kZWw6ZnVuY3Rpb24oKXtpZighdGhpcy5zZWxNb2RlbCl7dGhpcy5zZWxNb2RlbD1uZXcgRXh0LnRyZWUuRGVmYXVsdFNlbGVjdGlvbk1vZGVsKCl9cmV0dXJuIHRoaXMuc2VsTW9kZWx9LGV4cGFuZFBhdGg6ZnVuY3Rpb24oRixBLEcpe0E9QXx8ImlkIjt2YXIgRD1GLnNwbGl0KHRoaXMucGF0aFNlcGFyYXRvcik7dmFyIEM9dGhpcy5yb290O2lmKEMuYXR0cmlidXRlc1tBXSE9RFsxXSl7aWYoRyl7RyhmYWxzZSxudWxsKX1yZXR1cm4gfXZhciBCPTE7dmFyIEU9ZnVuY3Rpb24oKXtpZigrK0I9PUQubGVuZ3RoKXtpZihHKXtHKHRydWUsQyl9cmV0dXJuIH12YXIgSD1DLmZpbmRDaGlsZChBLERbQl0pO2lmKCFIKXtpZihHKXtHKGZhbHNlLEMpfXJldHVybiB9Qz1IO0guZXhwYW5kKGZhbHNlLGZhbHNlLEUpfTtDLmV4cGFuZChmYWxzZSxmYWxzZSxFKX0sc2VsZWN0UGF0aDpmdW5jdGlvbihFLEEsRil7QT1BfHwiaWQiO3ZhciBDPUUuc3BsaXQodGhpcy5wYXRoU2VwYXJhdG9yKTt2YXIgQj1DLnBvcCgpO2lmKEMubGVuZ3RoPjApe3ZhciBEPWZ1bmN0aW9uKEgsRyl7aWYoSCYmRyl7dmFyIEk9Ry5maW5kQ2hpbGQoQSxCKTtpZihJKXtJLnNlbGVjdCgpO2lmKEYpe0YodHJ1ZSxJKX19ZWxzZXtpZihGKXtGKGZhbHNlLEkpfX19ZWxzZXtpZihGKXtGKGZhbHNlLEkpfX19O3RoaXMuZXhwYW5kUGF0aChDLmpvaW4odGhpcy5wYXRoU2VwYXJhdG9yKSxBLEQpfWVsc2V7dGhpcy5yb290LnNlbGVjdCgpO2lmKEYpe0YodHJ1ZSx0aGlzLnJvb3QpfX19LGdldFRyZWVFbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJvZHl9LG9uUmVuZGVyOmZ1bmN0aW9uKEIsQSl7RXh0LnRyZWUuVHJlZVBhbmVsLnN1cGVyY2xhc3Mub25SZW5kZXIuY2FsbCh0aGlzLEIsQSk7dGhpcy5lbC5hZGRDbGFzcygieC10cmVlIik7dGhpcy5pbm5lckN0PXRoaXMuYm9keS5jcmVhdGVDaGlsZCh7dGFnOiJ1bCIsY2xzOiJ4LXRyZWUtcm9vdC1jdCAiKyh0aGlzLnVzZUFycm93cz8ieC10cmVlLWFycm93cyI6dGhpcy5saW5lcz8ieC10cmVlLWxpbmVzIjoieC10cmVlLW5vLWxpbmVzIil9KX0saW5pdEV2ZW50czpmdW5jdGlvbigpe0V4dC50cmVlLlRyZWVQYW5lbC5zdXBlcmNsYXNzLmluaXRFdmVudHMuY2FsbCh0aGlzKTtpZih0aGlzLmNvbnRhaW5lclNjcm9sbCl7RXh0LmRkLlNjcm9sbE1hbmFnZXIucmVnaXN0ZXIodGhpcy5ib2R5KX1pZigodGhpcy5lbmFibGVERHx8dGhpcy5lbmFibGVEcm9wKSYmIXRoaXMuZHJvcFpvbmUpe3RoaXMuZHJvcFpvbmU9bmV3IEV4dC50cmVlLlRyZWVEcm9wWm9uZSh0aGlzLHRoaXMuZHJvcENvbmZpZ3x8e2RkR3JvdXA6dGhpcy5kZEdyb3VwfHwiVHJlZUREIixhcHBlbmRPbmx5OnRoaXMuZGRBcHBlbmRPbmx5PT09dHJ1ZX0pfWlmKCh0aGlzLmVuYWJsZUREfHx0aGlzLmVuYWJsZURyYWcpJiYhdGhpcy5kcmFnWm9uZSl7dGhpcy5kcmFnWm9uZT1uZXcgRXh0LnRyZWUuVHJlZURyYWdab25lKHRoaXMsdGhpcy5kcmFnQ29uZmlnfHx7ZGRHcm91cDp0aGlzLmRkR3JvdXB8fCJUcmVlREQiLHNjcm9sbDp0aGlzLmRkU2Nyb2xsfSl9dGhpcy5nZXRTZWxlY3Rpb25Nb2RlbCgpLmluaXQodGhpcyl9LGFmdGVyUmVuZGVyOmZ1bmN0aW9uKCl7RXh0LnRyZWUuVHJlZVBhbmVsLnN1cGVyY2xhc3MuYWZ0ZXJSZW5kZXIuY2FsbCh0aGlzKTt0aGlzLnJvb3QucmVuZGVyKCk7aWYoIXRoaXMucm9vdFZpc2libGUpe3RoaXMucm9vdC5yZW5kZXJDaGlsZHJlbigpfX0sb25EZXN0cm95OmZ1bmN0aW9uKCl7aWYodGhpcy5yZW5kZXJlZCl7dGhpcy5ib2R5LnJlbW92ZUFsbExpc3RlbmVycygpO0V4dC5kZC5TY3JvbGxNYW5hZ2VyLnVucmVnaXN0ZXIodGhpcy5ib2R5KTtpZih0aGlzLmRyb3Bab25lKXt0aGlzLmRyb3Bab25lLnVucmVnKCl9aWYodGhpcy5kcmFnWm9uZSl7dGhpcy5kcmFnWm9uZS51bnJlZygpfX10aGlzLnJvb3QuZGVzdHJveSgpO3RoaXMubm9kZUhhc2g9bnVsbDtFeHQudHJlZS5UcmVlUGFuZWwuc3VwZXJjbGFzcy5vbkRlc3Ryb3kuY2FsbCh0aGlzKX19KTtFeHQucmVnKCJ0cmVlcGFuZWwiLEV4dC50cmVlLlRyZWVQYW5lbCk7DQpFeHQudHJlZS5UcmVlRXZlbnRNb2RlbD1mdW5jdGlvbihBKXt0aGlzLnRyZWU9QTt0aGlzLnRyZWUub24oInJlbmRlciIsdGhpcy5pbml0RXZlbnRzLHRoaXMpfTtFeHQudHJlZS5UcmVlRXZlbnRNb2RlbC5wcm90b3R5cGU9e2luaXRFdmVudHM6ZnVuY3Rpb24oKXt2YXIgQT10aGlzLnRyZWUuZ2V0VHJlZUVsKCk7QS5vbigiY2xpY2siLHRoaXMuZGVsZWdhdGVDbGljayx0aGlzKTtpZih0aGlzLnRyZWUudHJhY2tNb3VzZU92ZXIhPT1mYWxzZSl7QS5vbigibW91c2VvdmVyIix0aGlzLmRlbGVnYXRlT3Zlcix0aGlzKTtBLm9uKCJtb3VzZW91dCIsdGhpcy5kZWxlZ2F0ZU91dCx0aGlzKX1BLm9uKCJkYmxjbGljayIsdGhpcy5kZWxlZ2F0ZURibENsaWNrLHRoaXMpO0Eub24oImNvbnRleHRtZW51Iix0aGlzLmRlbGVnYXRlQ29udGV4dE1lbnUsdGhpcyl9LGdldE5vZGU6ZnVuY3Rpb24oQil7dmFyIEE7aWYoQT1CLmdldFRhcmdldCgiLngtdHJlZS1ub2RlLWVsIiwxMCkpe3ZhciBDPUV4dC5mbHkoQSwiX3RyZWVFdmVudHMiKS5nZXRBdHRyaWJ1dGVOUygiZXh0IiwidHJlZS1ub2RlLWlkIik7aWYoQyl7cmV0dXJuIHRoaXMudHJlZS5nZXROb2RlQnlJZChDKX19cmV0dXJuIG51bGx9LGdldE5vZGVUYXJnZXQ6ZnVuY3Rpb24oQil7dmFyIEE9Qi5nZXRUYXJnZXQoIi54LXRyZWUtbm9kZS1pY29uIiwxKTtpZighQSl7QT1CLmdldFRhcmdldCgiLngtdHJlZS1ub2RlLWVsIiw2KX1yZXR1cm4gQX0sZGVsZWdhdGVPdXQ6ZnVuY3Rpb24oQixBKXtpZighdGhpcy5iZWZvcmVFdmVudChCKSl7cmV0dXJuIH1pZihCLmdldFRhcmdldCgiLngtdHJlZS1lYy1pY29uIiwxKSl7dmFyIEM9dGhpcy5nZXROb2RlKEIpO3RoaXMub25JY29uT3V0KEIsQyk7aWYoQz09dGhpcy5sYXN0RWNPdmVyKXtkZWxldGUgdGhpcy5sYXN0RWNPdmVyfX1pZigoQT10aGlzLmdldE5vZGVUYXJnZXQoQikpJiYhQi53aXRoaW4oQSx0cnVlKSl7dGhpcy5vbk5vZGVPdXQoQix0aGlzLmdldE5vZGUoQikpfX0sZGVsZWdhdGVPdmVyOmZ1bmN0aW9uKEIsQSl7aWYoIXRoaXMuYmVmb3JlRXZlbnQoQikpe3JldHVybiB9aWYodGhpcy5sYXN0RWNPdmVyKXt0aGlzLm9uSWNvbk91dChCLHRoaXMubGFzdEVjT3Zlcik7ZGVsZXRlIHRoaXMubGFzdEVjT3Zlcn1pZihCLmdldFRhcmdldCgiLngtdHJlZS1lYy1pY29uIiwxKSl7dGhpcy5sYXN0RWNPdmVyPXRoaXMuZ2V0Tm9kZShCKTt0aGlzLm9uSWNvbk92ZXIoQix0aGlzLmxhc3RFY092ZXIpfWlmKEE9dGhpcy5nZXROb2RlVGFyZ2V0KEIpKXt0aGlzLm9uTm9kZU92ZXIoQix0aGlzLmdldE5vZGUoQikpfX0sZGVsZWdhdGVDbGljazpmdW5jdGlvbihCLEEpe2lmKCF0aGlzLmJlZm9yZUV2ZW50KEIpKXtyZXR1cm4gfWlmKEIuZ2V0VGFyZ2V0KCJpbnB1dFt0eXBlPWNoZWNrYm94XSIsMSkpe3RoaXMub25DaGVja2JveENsaWNrKEIsdGhpcy5nZXROb2RlKEIpKX1lbHNle2lmKEIuZ2V0VGFyZ2V0KCIueC10cmVlLWVjLWljb24iLDEpKXt0aGlzLm9uSWNvbkNsaWNrKEIsdGhpcy5nZXROb2RlKEIpKX1lbHNle2lmKHRoaXMuZ2V0Tm9kZVRhcmdldChCKSl7dGhpcy5vbk5vZGVDbGljayhCLHRoaXMuZ2V0Tm9kZShCKSl9fX19LGRlbGVnYXRlRGJsQ2xpY2s6ZnVuY3Rpb24oQixBKXtpZih0aGlzLmJlZm9yZUV2ZW50KEIpJiZ0aGlzLmdldE5vZGVUYXJnZXQoQikpe3RoaXMub25Ob2RlRGJsQ2xpY2soQix0aGlzLmdldE5vZGUoQikpfX0sZGVsZWdhdGVDb250ZXh0TWVudTpmdW5jdGlvbihCLEEpe2lmKHRoaXMuYmVmb3JlRXZlbnQoQikmJnRoaXMuZ2V0Tm9kZVRhcmdldChCKSl7dGhpcy5vbk5vZGVDb250ZXh0TWVudShCLHRoaXMuZ2V0Tm9kZShCKSl9fSxvbk5vZGVDbGljazpmdW5jdGlvbihCLEEpe0EudWkub25DbGljayhCKX0sb25Ob2RlT3ZlcjpmdW5jdGlvbihCLEEpe0EudWkub25PdmVyKEIpfSxvbk5vZGVPdXQ6ZnVuY3Rpb24oQixBKXtBLnVpLm9uT3V0KEIpfSxvbkljb25PdmVyOmZ1bmN0aW9uKEIsQSl7QS51aS5hZGRDbGFzcygieC10cmVlLWVjLW92ZXIiKX0sb25JY29uT3V0OmZ1bmN0aW9uKEIsQSl7QS51aS5yZW1vdmVDbGFzcygieC10cmVlLWVjLW92ZXIiKX0sb25JY29uQ2xpY2s6ZnVuY3Rpb24oQixBKXtBLnVpLmVjQ2xpY2soQil9LG9uQ2hlY2tib3hDbGljazpmdW5jdGlvbihCLEEpe0EudWkub25DaGVja0NoYW5nZShCKX0sb25Ob2RlRGJsQ2xpY2s6ZnVuY3Rpb24oQixBKXtBLnVpLm9uRGJsQ2xpY2soQil9LG9uTm9kZUNvbnRleHRNZW51OmZ1bmN0aW9uKEIsQSl7QS51aS5vbkNvbnRleHRNZW51KEIpfSxiZWZvcmVFdmVudDpmdW5jdGlvbihBKXtpZih0aGlzLmRpc2FibGVkKXtBLnN0b3BFdmVudCgpO3JldHVybiBmYWxzZX1yZXR1cm4gdHJ1ZX0sZGlzYWJsZTpmdW5jdGlvbigpe3RoaXMuZGlzYWJsZWQ9dHJ1ZX0sZW5hYmxlOmZ1bmN0aW9uKCl7dGhpcy5kaXNhYmxlZD1mYWxzZX19Ow0KRXh0LnRyZWUuRGVmYXVsdFNlbGVjdGlvbk1vZGVsPWZ1bmN0aW9uKEEpe3RoaXMuc2VsTm9kZT1udWxsO3RoaXMuYWRkRXZlbnRzKCJzZWxlY3Rpb25jaGFuZ2UiLCJiZWZvcmVzZWxlY3QiKTtFeHQuYXBwbHkodGhpcyxBKTtFeHQudHJlZS5EZWZhdWx0U2VsZWN0aW9uTW9kZWwuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpfTtFeHQuZXh0ZW5kKEV4dC50cmVlLkRlZmF1bHRTZWxlY3Rpb25Nb2RlbCxFeHQudXRpbC5PYnNlcnZhYmxlLHtpbml0OmZ1bmN0aW9uKEEpe3RoaXMudHJlZT1BO0EuZ2V0VHJlZUVsKCkub24oImtleWRvd24iLHRoaXMub25LZXlEb3duLHRoaXMpO0Eub24oImNsaWNrIix0aGlzLm9uTm9kZUNsaWNrLHRoaXMpfSxvbk5vZGVDbGljazpmdW5jdGlvbihBLEIpe3RoaXMuc2VsZWN0KEEpfSxzZWxlY3Q6ZnVuY3Rpb24oQil7dmFyIEE9dGhpcy5zZWxOb2RlO2lmKEEhPUImJnRoaXMuZmlyZUV2ZW50KCJiZWZvcmVzZWxlY3QiLHRoaXMsQixBKSE9PWZhbHNlKXtpZihBKXtBLnVpLm9uU2VsZWN0ZWRDaGFuZ2UoZmFsc2UpfXRoaXMuc2VsTm9kZT1CO0IudWkub25TZWxlY3RlZENoYW5nZSh0cnVlKTt0aGlzLmZpcmVFdmVudCgic2VsZWN0aW9uY2hhbmdlIix0aGlzLEIsQSl9cmV0dXJuIEJ9LHVuc2VsZWN0OmZ1bmN0aW9uKEEpe2lmKHRoaXMuc2VsTm9kZT09QSl7dGhpcy5jbGVhclNlbGVjdGlvbnMoKX19LGNsZWFyU2VsZWN0aW9uczpmdW5jdGlvbigpe3ZhciBBPXRoaXMuc2VsTm9kZTtpZihBKXtBLnVpLm9uU2VsZWN0ZWRDaGFuZ2UoZmFsc2UpO3RoaXMuc2VsTm9kZT1udWxsO3RoaXMuZmlyZUV2ZW50KCJzZWxlY3Rpb25jaGFuZ2UiLHRoaXMsbnVsbCl9cmV0dXJuIEF9LGdldFNlbGVjdGVkTm9kZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbE5vZGV9LGlzU2VsZWN0ZWQ6ZnVuY3Rpb24oQSl7cmV0dXJuIHRoaXMuc2VsTm9kZT09QX0sc2VsZWN0UHJldmlvdXM6ZnVuY3Rpb24oKXt2YXIgQT10aGlzLnNlbE5vZGV8fHRoaXMubGFzdFNlbE5vZGU7aWYoIUEpe3JldHVybiBudWxsfXZhciBDPUEucHJldmlvdXNTaWJsaW5nO2lmKEMpe2lmKCFDLmlzRXhwYW5kZWQoKXx8Qy5jaGlsZE5vZGVzLmxlbmd0aDwxKXtyZXR1cm4gdGhpcy5zZWxlY3QoQyl9ZWxzZXt2YXIgQj1DLmxhc3RDaGlsZDt3aGlsZShCJiZCLmlzRXhwYW5kZWQoKSYmQi5jaGlsZE5vZGVzLmxlbmd0aD4wKXtCPUIubGFzdENoaWxkfXJldHVybiB0aGlzLnNlbGVjdChCKX19ZWxzZXtpZihBLnBhcmVudE5vZGUmJih0aGlzLnRyZWUucm9vdFZpc2libGV8fCFBLnBhcmVudE5vZGUuaXNSb290KSl7cmV0dXJuIHRoaXMuc2VsZWN0KEEucGFyZW50Tm9kZSl9fXJldHVybiBudWxsfSxzZWxlY3ROZXh0OmZ1bmN0aW9uKCl7dmFyIEI9dGhpcy5zZWxOb2RlfHx0aGlzLmxhc3RTZWxOb2RlO2lmKCFCKXtyZXR1cm4gbnVsbH1pZihCLmZpcnN0Q2hpbGQmJkIuaXNFeHBhbmRlZCgpKXtyZXR1cm4gdGhpcy5zZWxlY3QoQi5maXJzdENoaWxkKX1lbHNle2lmKEIubmV4dFNpYmxpbmcpe3JldHVybiB0aGlzLnNlbGVjdChCLm5leHRTaWJsaW5nKX1lbHNle2lmKEIucGFyZW50Tm9kZSl7dmFyIEE9bnVsbDtCLnBhcmVudE5vZGUuYnViYmxlKGZ1bmN0aW9uKCl7aWYodGhpcy5uZXh0U2libGluZyl7QT10aGlzLmdldE93bmVyVHJlZSgpLnNlbE1vZGVsLnNlbGVjdCh0aGlzLm5leHRTaWJsaW5nKTtyZXR1cm4gZmFsc2V9fSk7cmV0dXJuIEF9fX1yZXR1cm4gbnVsbH0sb25LZXlEb3duOmZ1bmN0aW9uKEMpe3ZhciBCPXRoaXMuc2VsTm9kZXx8dGhpcy5sYXN0U2VsTm9kZTt2YXIgRD10aGlzO2lmKCFCKXtyZXR1cm4gfXZhciBBPUMuZ2V0S2V5KCk7c3dpdGNoKEEpe2Nhc2UgQy5ET1dOOkMuc3RvcEV2ZW50KCk7dGhpcy5zZWxlY3ROZXh0KCk7YnJlYWs7Y2FzZSBDLlVQOkMuc3RvcEV2ZW50KCk7dGhpcy5zZWxlY3RQcmV2aW91cygpO2JyZWFrO2Nhc2UgQy5SSUdIVDpDLnByZXZlbnREZWZhdWx0KCk7aWYoQi5oYXNDaGlsZE5vZGVzKCkpe2lmKCFCLmlzRXhwYW5kZWQoKSl7Qi5leHBhbmQoKX1lbHNle2lmKEIuZmlyc3RDaGlsZCl7dGhpcy5zZWxlY3QoQi5maXJzdENoaWxkLEMpfX19YnJlYWs7Y2FzZSBDLkxFRlQ6Qy5wcmV2ZW50RGVmYXVsdCgpO2lmKEIuaGFzQ2hpbGROb2RlcygpJiZCLmlzRXhwYW5kZWQoKSl7Qi5jb2xsYXBzZSgpfWVsc2V7aWYoQi5wYXJlbnROb2RlJiYodGhpcy50cmVlLnJvb3RWaXNpYmxlfHxCLnBhcmVudE5vZGUhPXRoaXMudHJlZS5nZXRSb290Tm9kZSgpKSl7dGhpcy5zZWxlY3QoQi5wYXJlbnROb2RlLEMpfX1icmVha319fSk7RXh0LnRyZWUuTXVsdGlTZWxlY3Rpb25Nb2RlbD1mdW5jdGlvbihBKXt0aGlzLnNlbE5vZGVzPVtdO3RoaXMuc2VsTWFwPXt9O3RoaXMuYWRkRXZlbnRzKCJzZWxlY3Rpb25jaGFuZ2UiKTtFeHQuYXBwbHkodGhpcyxBKTtFeHQudHJlZS5NdWx0aVNlbGVjdGlvbk1vZGVsLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKX07RXh0LmV4dGVuZChFeHQudHJlZS5NdWx0aVNlbGVjdGlvbk1vZGVsLEV4dC51dGlsLk9ic2VydmFibGUse2luaXQ6ZnVuY3Rpb24oQSl7dGhpcy50cmVlPUE7QS5nZXRUcmVlRWwoKS5vbigia2V5ZG93biIsdGhpcy5vbktleURvd24sdGhpcyk7QS5vbigiY2xpY2siLHRoaXMub25Ob2RlQ2xpY2ssdGhpcyl9LG9uTm9kZUNsaWNrOmZ1bmN0aW9uKEEsQil7dGhpcy5zZWxlY3QoQSxCLEIuY3RybEtleSl9LHNlbGVjdDpmdW5jdGlvbihBLEMsQil7aWYoQiE9PXRydWUpe3RoaXMuY2xlYXJTZWxlY3Rpb25zKHRydWUpfWlmKHRoaXMuaXNTZWxlY3RlZChBKSl7dGhpcy5sYXN0U2VsTm9kZT1BO3JldHVybiBBfXRoaXMuc2VsTm9kZXMucHVzaChBKTt0aGlzLnNlbE1hcFtBLmlkXT1BO3RoaXMubGFzdFNlbE5vZGU9QTtBLnVpLm9uU2VsZWN0ZWRDaGFuZ2UodHJ1ZSk7dGhpcy5maXJlRXZlbnQoInNlbGVjdGlvbmNoYW5nZSIsdGhpcyx0aGlzLnNlbE5vZGVzKTtyZXR1cm4gQX0sdW5zZWxlY3Q6ZnVuY3Rpb24oQil7aWYodGhpcy5zZWxNYXBbQi5pZF0pe0IudWkub25TZWxlY3RlZENoYW5nZShmYWxzZSk7dmFyIEM9dGhpcy5zZWxOb2Rlczt2YXIgQT1DLmluZGV4T2YoQik7aWYoQSE9LTEpe3RoaXMuc2VsTm9kZXMuc3BsaWNlKEEsMSl9ZGVsZXRlIHRoaXMuc2VsTWFwW0IuaWRdO3RoaXMuZmlyZUV2ZW50KCJzZWxlY3Rpb25jaGFuZ2UiLHRoaXMsdGhpcy5zZWxOb2Rlcyl9fSxjbGVhclNlbGVjdGlvbnM6ZnVuY3Rpb24oQil7dmFyIEQ9dGhpcy5zZWxOb2RlcztpZihELmxlbmd0aD4wKXtmb3IodmFyIEM9MCxBPUQubGVuZ3RoO0M8QTtDKyspe0RbQ10udWkub25TZWxlY3RlZENoYW5nZShmYWxzZSl9dGhpcy5zZWxOb2Rlcz1bXTt0aGlzLnNlbE1hcD17fTtpZihCIT09dHJ1ZSl7dGhpcy5maXJlRXZlbnQoInNlbGVjdGlvbmNoYW5nZSIsdGhpcyx0aGlzLnNlbE5vZGVzKX19fSxpc1NlbGVjdGVkOmZ1bmN0aW9uKEEpe3JldHVybiB0aGlzLnNlbE1hcFtBLmlkXT90cnVlOmZhbHNlfSxnZXRTZWxlY3RlZE5vZGVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VsTm9kZXN9LG9uS2V5RG93bjpFeHQudHJlZS5EZWZhdWx0U2VsZWN0aW9uTW9kZWwucHJvdG90eXBlLm9uS2V5RG93bixzZWxlY3ROZXh0OkV4dC50cmVlLkRlZmF1bHRTZWxlY3Rpb25Nb2RlbC5wcm90b3R5cGUuc2VsZWN0TmV4dCxzZWxlY3RQcmV2aW91czpFeHQudHJlZS5EZWZhdWx0U2VsZWN0aW9uTW9kZWwucHJvdG90eXBlLnNlbGVjdFByZXZpb3VzfSk7DQpFeHQudHJlZS5UcmVlTm9kZT1mdW5jdGlvbihBKXtBPUF8fHt9O2lmKHR5cGVvZiBBPT0ic3RyaW5nIil7QT17dGV4dDpBfX10aGlzLmNoaWxkcmVuUmVuZGVyZWQ9ZmFsc2U7dGhpcy5yZW5kZXJlZD1mYWxzZTtFeHQudHJlZS5UcmVlTm9kZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxBKTt0aGlzLmV4cGFuZGVkPUEuZXhwYW5kZWQ9PT10cnVlO3RoaXMuaXNUYXJnZXQ9QS5pc1RhcmdldCE9PWZhbHNlO3RoaXMuZHJhZ2dhYmxlPUEuZHJhZ2dhYmxlIT09ZmFsc2UmJkEuYWxsb3dEcmFnIT09ZmFsc2U7dGhpcy5hbGxvd0NoaWxkcmVuPUEuYWxsb3dDaGlsZHJlbiE9PWZhbHNlJiZBLmFsbG93RHJvcCE9PWZhbHNlO3RoaXMudGV4dD1BLnRleHQ7dGhpcy5kaXNhYmxlZD1BLmRpc2FibGVkPT09dHJ1ZTt0aGlzLmFkZEV2ZW50cygidGV4dGNoYW5nZSIsImJlZm9yZWV4cGFuZCIsImJlZm9yZWNvbGxhcHNlIiwiZXhwYW5kIiwiZGlzYWJsZWRjaGFuZ2UiLCJjb2xsYXBzZSIsImJlZm9yZWNsaWNrIiwiY2xpY2siLCJjaGVja2NoYW5nZSIsImRibGNsaWNrIiwiY29udGV4dG1lbnUiLCJiZWZvcmVjaGlsZHJlbnJlbmRlcmVkIik7dmFyIEI9dGhpcy5hdHRyaWJ1dGVzLnVpUHJvdmlkZXJ8fHRoaXMuZGVmYXVsdFVJfHxFeHQudHJlZS5UcmVlTm9kZVVJO3RoaXMudWk9bmV3IEIodGhpcyl9O0V4dC5leHRlbmQoRXh0LnRyZWUuVHJlZU5vZGUsRXh0LmRhdGEuTm9kZSx7cHJldmVudEhTY3JvbGw6dHJ1ZSxpc0V4cGFuZGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXhwYW5kZWR9LGdldFVJOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudWl9LHNldEZpcnN0Q2hpbGQ6ZnVuY3Rpb24oQSl7dmFyIEI9dGhpcy5maXJzdENoaWxkO0V4dC50cmVlLlRyZWVOb2RlLnN1cGVyY2xhc3Muc2V0Rmlyc3RDaGlsZC5jYWxsKHRoaXMsQSk7aWYodGhpcy5jaGlsZHJlblJlbmRlcmVkJiZCJiZBIT1CKXtCLnJlbmRlckluZGVudCh0cnVlLHRydWUpfWlmKHRoaXMucmVuZGVyZWQpe3RoaXMucmVuZGVySW5kZW50KHRydWUsdHJ1ZSl9fSxzZXRMYXN0Q2hpbGQ6ZnVuY3Rpb24oQil7dmFyIEE9dGhpcy5sYXN0Q2hpbGQ7RXh0LnRyZWUuVHJlZU5vZGUuc3VwZXJjbGFzcy5zZXRMYXN0Q2hpbGQuY2FsbCh0aGlzLEIpO2lmKHRoaXMuY2hpbGRyZW5SZW5kZXJlZCYmQSYmQiE9QSl7QS5yZW5kZXJJbmRlbnQodHJ1ZSx0cnVlKX1pZih0aGlzLnJlbmRlcmVkKXt0aGlzLnJlbmRlckluZGVudCh0cnVlLHRydWUpfX0sYXBwZW5kQ2hpbGQ6ZnVuY3Rpb24oKXt2YXIgQT1FeHQudHJlZS5UcmVlTm9kZS5zdXBlcmNsYXNzLmFwcGVuZENoaWxkLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZihBJiZ0aGlzLmNoaWxkcmVuUmVuZGVyZWQpe0EucmVuZGVyKCl9dGhpcy51aS51cGRhdGVFeHBhbmRJY29uKCk7cmV0dXJuIEF9LHJlbW92ZUNoaWxkOmZ1bmN0aW9uKEEpe3RoaXMub3duZXJUcmVlLmdldFNlbGVjdGlvbk1vZGVsKCkudW5zZWxlY3QoQSk7RXh0LnRyZWUuVHJlZU5vZGUuc3VwZXJjbGFzcy5yZW1vdmVDaGlsZC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYodGhpcy5jaGlsZHJlblJlbmRlcmVkKXtBLnVpLnJlbW92ZSgpfWlmKHRoaXMuY2hpbGROb2Rlcy5sZW5ndGg8MSl7dGhpcy5jb2xsYXBzZShmYWxzZSxmYWxzZSl9ZWxzZXt0aGlzLnVpLnVwZGF0ZUV4cGFuZEljb24oKX1pZighdGhpcy5maXJzdENoaWxkJiYhdGhpcy5pc0hpZGRlblJvb3QoKSl7dGhpcy5jaGlsZHJlblJlbmRlcmVkPWZhbHNlfXJldHVybiBBfSxpbnNlcnRCZWZvcmU6ZnVuY3Rpb24oQyxBKXt2YXIgQj1FeHQudHJlZS5UcmVlTm9kZS5zdXBlcmNsYXNzLmluc2VydEJlZm9yZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoQiYmQSYmdGhpcy5jaGlsZHJlblJlbmRlcmVkKXtDLnJlbmRlcigpfXRoaXMudWkudXBkYXRlRXhwYW5kSWNvbigpO3JldHVybiBCfSxzZXRUZXh0OmZ1bmN0aW9uKEIpe3ZhciBBPXRoaXMudGV4dDt0aGlzLnRleHQ9Qjt0aGlzLmF0dHJpYnV0ZXMudGV4dD1CO2lmKHRoaXMucmVuZGVyZWQpe3RoaXMudWkub25UZXh0Q2hhbmdlKHRoaXMsQixBKX10aGlzLmZpcmVFdmVudCgidGV4dGNoYW5nZSIsdGhpcyxCLEEpfSxzZWxlY3Q6ZnVuY3Rpb24oKXt0aGlzLmdldE93bmVyVHJlZSgpLmdldFNlbGVjdGlvbk1vZGVsKCkuc2VsZWN0KHRoaXMpfSx1bnNlbGVjdDpmdW5jdGlvbigpe3RoaXMuZ2V0T3duZXJUcmVlKCkuZ2V0U2VsZWN0aW9uTW9kZWwoKS51bnNlbGVjdCh0aGlzKX0saXNTZWxlY3RlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldE93bmVyVHJlZSgpLmdldFNlbGVjdGlvbk1vZGVsKCkuaXNTZWxlY3RlZCh0aGlzKX0sZXhwYW5kOmZ1bmN0aW9uKEEsQixDKXtpZighdGhpcy5leHBhbmRlZCl7aWYodGhpcy5maXJlRXZlbnQoImJlZm9yZWV4cGFuZCIsdGhpcyxBLEIpPT09ZmFsc2Upe3JldHVybiB9aWYoIXRoaXMuY2hpbGRyZW5SZW5kZXJlZCl7dGhpcy5yZW5kZXJDaGlsZHJlbigpfXRoaXMuZXhwYW5kZWQ9dHJ1ZTtpZighdGhpcy5pc0hpZGRlblJvb3QoKSYmKHRoaXMuZ2V0T3duZXJUcmVlKCkuYW5pbWF0ZSYmQiE9PWZhbHNlKXx8Qil7dGhpcy51aS5hbmltRXhwYW5kKGZ1bmN0aW9uKCl7dGhpcy5maXJlRXZlbnQoImV4cGFuZCIsdGhpcyk7aWYodHlwZW9mIEM9PSJmdW5jdGlvbiIpe0ModGhpcyl9aWYoQT09PXRydWUpe3RoaXMuZXhwYW5kQ2hpbGROb2Rlcyh0cnVlKX19LmNyZWF0ZURlbGVnYXRlKHRoaXMpKTtyZXR1cm4gfWVsc2V7dGhpcy51aS5leHBhbmQoKTt0aGlzLmZpcmVFdmVudCgiZXhwYW5kIix0aGlzKTtpZih0eXBlb2YgQz09ImZ1bmN0aW9uIil7Qyh0aGlzKX19fWVsc2V7aWYodHlwZW9mIEM9PSJmdW5jdGlvbiIpe0ModGhpcyl9fWlmKEE9PT10cnVlKXt0aGlzLmV4cGFuZENoaWxkTm9kZXModHJ1ZSl9fSxpc0hpZGRlblJvb3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc1Jvb3QmJiF0aGlzLmdldE93bmVyVHJlZSgpLnJvb3RWaXNpYmxlfSxjb2xsYXBzZTpmdW5jdGlvbihCLEUpe2lmKHRoaXMuZXhwYW5kZWQmJiF0aGlzLmlzSGlkZGVuUm9vdCgpKXtpZih0aGlzLmZpcmVFdmVudCgiYmVmb3JlY29sbGFwc2UiLHRoaXMsQixFKT09PWZhbHNlKXtyZXR1cm4gfXRoaXMuZXhwYW5kZWQ9ZmFsc2U7aWYoKHRoaXMuZ2V0T3duZXJUcmVlKCkuYW5pbWF0ZSYmRSE9PWZhbHNlKXx8RSl7dGhpcy51aS5hbmltQ29sbGFwc2UoZnVuY3Rpb24oKXt0aGlzLmZpcmVFdmVudCgiY29sbGFwc2UiLHRoaXMpO2lmKEI9PT10cnVlKXt0aGlzLmNvbGxhcHNlQ2hpbGROb2Rlcyh0cnVlKX19LmNyZWF0ZURlbGVnYXRlKHRoaXMpKTtyZXR1cm4gfWVsc2V7dGhpcy51aS5jb2xsYXBzZSgpO3RoaXMuZmlyZUV2ZW50KCJjb2xsYXBzZSIsdGhpcyl9fWlmKEI9PT10cnVlKXt2YXIgRD10aGlzLmNoaWxkTm9kZXM7Zm9yKHZhciBDPTAsQT1ELmxlbmd0aDtDPEE7QysrKXtEW0NdLmNvbGxhcHNlKHRydWUsZmFsc2UpfX19LGRlbGF5ZWRFeHBhbmQ6ZnVuY3Rpb24oQSl7aWYoIXRoaXMuZXhwYW5kUHJvY0lkKXt0aGlzLmV4cGFuZFByb2NJZD10aGlzLmV4cGFuZC5kZWZlcihBLHRoaXMpfX0sY2FuY2VsRXhwYW5kOmZ1bmN0aW9uKCl7aWYodGhpcy5leHBhbmRQcm9jSWQpe2NsZWFyVGltZW91dCh0aGlzLmV4cGFuZFByb2NJZCl9dGhpcy5leHBhbmRQcm9jSWQ9ZmFsc2V9LHRvZ2dsZTpmdW5jdGlvbigpe2lmKHRoaXMuZXhwYW5kZWQpe3RoaXMuY29sbGFwc2UoKX1lbHNle3RoaXMuZXhwYW5kKCl9fSxlbnN1cmVWaXNpYmxlOmZ1bmN0aW9uKEIpe3ZhciBBPXRoaXMuZ2V0T3duZXJUcmVlKCk7QS5leHBhbmRQYXRoKHRoaXMucGFyZW50Tm9kZS5nZXRQYXRoKCksZmFsc2UsZnVuY3Rpb24oKXt2YXIgQz1BLmdldE5vZGVCeUlkKHRoaXMuaWQpO0EuZ2V0VHJlZUVsKCkuc2Nyb2xsQ2hpbGRJbnRvVmlldyhDLnVpLmFuY2hvcik7RXh0LmNhbGxiYWNrKEIpfS5jcmVhdGVEZWxlZ2F0ZSh0aGlzKSl9LGV4cGFuZENoaWxkTm9kZXM6ZnVuY3Rpb24oQil7dmFyIEQ9dGhpcy5jaGlsZE5vZGVzO2Zvcih2YXIgQz0wLEE9RC5sZW5ndGg7QzxBO0MrKyl7RFtDXS5leHBhbmQoQil9fSxjb2xsYXBzZUNoaWxkTm9kZXM6ZnVuY3Rpb24oQil7dmFyIEQ9dGhpcy5jaGlsZE5vZGVzO2Zvcih2YXIgQz0wLEE9RC5sZW5ndGg7QzxBO0MrKyl7RFtDXS5jb2xsYXBzZShCKX19LGRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLmRpc2FibGVkPXRydWU7dGhpcy51bnNlbGVjdCgpO2lmKHRoaXMucmVuZGVyZWQmJnRoaXMudWkub25EaXNhYmxlQ2hhbmdlKXt0aGlzLnVpLm9uRGlzYWJsZUNoYW5nZSh0aGlzLHRydWUpfXRoaXMuZmlyZUV2ZW50KCJkaXNhYmxlZGNoYW5nZSIsdGhpcyx0cnVlKX0sZW5hYmxlOmZ1bmN0aW9uKCl7dGhpcy5kaXNhYmxlZD1mYWxzZTtpZih0aGlzLnJlbmRlcmVkJiZ0aGlzLnVpLm9uRGlzYWJsZUNoYW5nZSl7dGhpcy51aS5vbkRpc2FibGVDaGFuZ2UodGhpcyxmYWxzZSl9dGhpcy5maXJlRXZlbnQoImRpc2FibGVkY2hhbmdlIix0aGlzLGZhbHNlKX0scmVuZGVyQ2hpbGRyZW46ZnVuY3Rpb24oQil7aWYoQiE9PWZhbHNlKXt0aGlzLmZpcmVFdmVudCgiYmVmb3JlY2hpbGRyZW5yZW5kZXJlZCIsdGhpcyl9dmFyIEQ9dGhpcy5jaGlsZE5vZGVzO2Zvcih2YXIgQz0wLEE9RC5sZW5ndGg7QzxBO0MrKyl7RFtDXS5yZW5kZXIodHJ1ZSl9dGhpcy5jaGlsZHJlblJlbmRlcmVkPXRydWV9LHNvcnQ6ZnVuY3Rpb24oRSxEKXtFeHQudHJlZS5UcmVlTm9kZS5zdXBlcmNsYXNzLnNvcnQuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKHRoaXMuY2hpbGRyZW5SZW5kZXJlZCl7dmFyIEM9dGhpcy5jaGlsZE5vZGVzO2Zvcih2YXIgQj0wLEE9Qy5sZW5ndGg7QjxBO0IrKyl7Q1tCXS5yZW5kZXIodHJ1ZSl9fX0scmVuZGVyOmZ1bmN0aW9uKEEpe3RoaXMudWkucmVuZGVyKEEpO2lmKCF0aGlzLnJlbmRlcmVkKXt0aGlzLmdldE93bmVyVHJlZSgpLnJlZ2lzdGVyTm9kZSh0aGlzKTt0aGlzLnJlbmRlcmVkPXRydWU7aWYodGhpcy5leHBhbmRlZCl7dGhpcy5leHBhbmRlZD1mYWxzZTt0aGlzLmV4cGFuZChmYWxzZSxmYWxzZSl9fX0scmVuZGVySW5kZW50OmZ1bmN0aW9uKEIsRSl7aWYoRSl7dGhpcy51aS5jaGlsZEluZGVudD1udWxsfXRoaXMudWkucmVuZGVySW5kZW50KCk7aWYoQj09PXRydWUmJnRoaXMuY2hpbGRyZW5SZW5kZXJlZCl7dmFyIEQ9dGhpcy5jaGlsZE5vZGVzO2Zvcih2YXIgQz0wLEE9RC5sZW5ndGg7QzxBO0MrKyl7RFtDXS5yZW5kZXJJbmRlbnQodHJ1ZSxFKX19fSxiZWdpblVwZGF0ZTpmdW5jdGlvbigpe3RoaXMuY2hpbGRyZW5SZW5kZXJlZD1mYWxzZX0sZW5kVXBkYXRlOmZ1bmN0aW9uKCl7aWYodGhpcy5leHBhbmRlZCl7dGhpcy5yZW5kZXJDaGlsZHJlbigpfX0sZGVzdHJveTpmdW5jdGlvbigpe2Zvcih2YXIgQj0wLEE9dGhpcy5jaGlsZE5vZGVzLmxlbmd0aDtCPEE7QisrKXt0aGlzLmNoaWxkTm9kZXNbQl0uZGVzdHJveSgpfXRoaXMuY2hpbGROb2Rlcz1udWxsO2lmKHRoaXMudWkuZGVzdHJveSl7dGhpcy51aS5kZXN0cm95KCl9fX0pOw0KRXh0LnRyZWUuQXN5bmNUcmVlTm9kZT1mdW5jdGlvbihBKXt0aGlzLmxvYWRlZD1mYWxzZTt0aGlzLmxvYWRpbmc9ZmFsc2U7RXh0LnRyZWUuQXN5bmNUcmVlTm9kZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmFkZEV2ZW50cygiYmVmb3JlbG9hZCIsImxvYWQiKX07RXh0LmV4dGVuZChFeHQudHJlZS5Bc3luY1RyZWVOb2RlLEV4dC50cmVlLlRyZWVOb2RlLHtleHBhbmQ6ZnVuY3Rpb24oQixELEYpe2lmKHRoaXMubG9hZGluZyl7dmFyIEU7dmFyIEM9ZnVuY3Rpb24oKXtpZighdGhpcy5sb2FkaW5nKXtjbGVhckludGVydmFsKEUpO3RoaXMuZXhwYW5kKEIsRCxGKX19LmNyZWF0ZURlbGVnYXRlKHRoaXMpO0U9c2V0SW50ZXJ2YWwoQywyMDApO3JldHVybiB9aWYoIXRoaXMubG9hZGVkKXtpZih0aGlzLmZpcmVFdmVudCgiYmVmb3JlbG9hZCIsdGhpcyk9PT1mYWxzZSl7cmV0dXJuIH10aGlzLmxvYWRpbmc9dHJ1ZTt0aGlzLnVpLmJlZm9yZUxvYWQodGhpcyk7dmFyIEE9dGhpcy5sb2FkZXJ8fHRoaXMuYXR0cmlidXRlcy5sb2FkZXJ8fHRoaXMuZ2V0T3duZXJUcmVlKCkuZ2V0TG9hZGVyKCk7aWYoQSl7QS5sb2FkKHRoaXMsdGhpcy5sb2FkQ29tcGxldGUuY3JlYXRlRGVsZWdhdGUodGhpcyxbQixELEZdKSk7cmV0dXJuIH19RXh0LnRyZWUuQXN5bmNUcmVlTm9kZS5zdXBlcmNsYXNzLmV4cGFuZC5jYWxsKHRoaXMsQixELEYpfSxpc0xvYWRpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sb2FkaW5nfSxsb2FkQ29tcGxldGU6ZnVuY3Rpb24oQSxCLEMpe3RoaXMubG9hZGluZz1mYWxzZTt0aGlzLmxvYWRlZD10cnVlO3RoaXMudWkuYWZ0ZXJMb2FkKHRoaXMpO3RoaXMuZmlyZUV2ZW50KCJsb2FkIix0aGlzKTt0aGlzLmV4cGFuZChBLEIsQyl9LGlzTG9hZGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG9hZGVkfSxoYXNDaGlsZE5vZGVzOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNMZWFmKCkmJiF0aGlzLmxvYWRlZCl7cmV0dXJuIHRydWV9ZWxzZXtyZXR1cm4gRXh0LnRyZWUuQXN5bmNUcmVlTm9kZS5zdXBlcmNsYXNzLmhhc0NoaWxkTm9kZXMuY2FsbCh0aGlzKX19LHJlbG9hZDpmdW5jdGlvbihBKXt0aGlzLmNvbGxhcHNlKGZhbHNlLGZhbHNlKTt3aGlsZSh0aGlzLmZpcnN0Q2hpbGQpe3RoaXMucmVtb3ZlQ2hpbGQodGhpcy5maXJzdENoaWxkKX10aGlzLmNoaWxkcmVuUmVuZGVyZWQ9ZmFsc2U7dGhpcy5sb2FkZWQ9ZmFsc2U7aWYodGhpcy5pc0hpZGRlblJvb3QoKSl7dGhpcy5leHBhbmRlZD1mYWxzZX10aGlzLmV4cGFuZChmYWxzZSxmYWxzZSxBKX19KTsNCkV4dC50cmVlLlRyZWVOb2RlVUk9ZnVuY3Rpb24oQSl7dGhpcy5ub2RlPUE7dGhpcy5yZW5kZXJlZD1mYWxzZTt0aGlzLmFuaW1hdGluZz1mYWxzZTt0aGlzLndhc0xlYWY9dHJ1ZTt0aGlzLmVjYz0ieC10cmVlLWVjLWljb24geC10cmVlLWVsYm93Ijt0aGlzLmVtcHR5SWNvbj1FeHQuQkxBTktfSU1BR0VfVVJMfTtFeHQudHJlZS5UcmVlTm9kZVVJLnByb3RvdHlwZT17cmVtb3ZlQ2hpbGQ6ZnVuY3Rpb24oQSl7aWYodGhpcy5yZW5kZXJlZCl7dGhpcy5jdE5vZGUucmVtb3ZlQ2hpbGQoQS51aS5nZXRFbCgpKX19LGJlZm9yZUxvYWQ6ZnVuY3Rpb24oKXt0aGlzLmFkZENsYXNzKCJ4LXRyZWUtbm9kZS1sb2FkaW5nIil9LGFmdGVyTG9hZDpmdW5jdGlvbigpe3RoaXMucmVtb3ZlQ2xhc3MoIngtdHJlZS1ub2RlLWxvYWRpbmciKX0sb25UZXh0Q2hhbmdlOmZ1bmN0aW9uKEIsQyxBKXtpZih0aGlzLnJlbmRlcmVkKXt0aGlzLnRleHROb2RlLmlubmVySFRNTD1DfX0sb25EaXNhYmxlQ2hhbmdlOmZ1bmN0aW9uKEEsQil7dGhpcy5kaXNhYmxlZD1CO2lmKHRoaXMuY2hlY2tib3gpe3RoaXMuY2hlY2tib3guZGlzYWJsZWQ9Qn1pZihCKXt0aGlzLmFkZENsYXNzKCJ4LXRyZWUtbm9kZS1kaXNhYmxlZCIpfWVsc2V7dGhpcy5yZW1vdmVDbGFzcygieC10cmVlLW5vZGUtZGlzYWJsZWQiKX19LG9uU2VsZWN0ZWRDaGFuZ2U6ZnVuY3Rpb24oQSl7aWYoQSl7dGhpcy5mb2N1cygpO3RoaXMuYWRkQ2xhc3MoIngtdHJlZS1zZWxlY3RlZCIpfWVsc2V7dGhpcy5yZW1vdmVDbGFzcygieC10cmVlLXNlbGVjdGVkIil9fSxvbk1vdmU6ZnVuY3Rpb24oQSxHLEUsRixELEIpe3RoaXMuY2hpbGRJbmRlbnQ9bnVsbDtpZih0aGlzLnJlbmRlcmVkKXt2YXIgSD1GLnVpLmdldENvbnRhaW5lcigpO2lmKCFIKXt0aGlzLmhvbGRlcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTt0aGlzLmhvbGRlci5hcHBlbmRDaGlsZCh0aGlzLndyYXApO3JldHVybiB9dmFyIEM9Qj9CLnVpLmdldEVsKCk6bnVsbDtpZihDKXtILmluc2VydEJlZm9yZSh0aGlzLndyYXAsQyl9ZWxzZXtILmFwcGVuZENoaWxkKHRoaXMud3JhcCl9dGhpcy5ub2RlLnJlbmRlckluZGVudCh0cnVlKX19LGFkZENsYXNzOmZ1bmN0aW9uKEEpe2lmKHRoaXMuZWxOb2RlKXtFeHQuZmx5KHRoaXMuZWxOb2RlKS5hZGRDbGFzcyhBKX19LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKEEpe2lmKHRoaXMuZWxOb2RlKXtFeHQuZmx5KHRoaXMuZWxOb2RlKS5yZW1vdmVDbGFzcyhBKX19LHJlbW92ZTpmdW5jdGlvbigpe2lmKHRoaXMucmVuZGVyZWQpe3RoaXMuaG9sZGVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3RoaXMuaG9sZGVyLmFwcGVuZENoaWxkKHRoaXMud3JhcCl9fSxmaXJlRXZlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlLmZpcmVFdmVudC5hcHBseSh0aGlzLm5vZGUsYXJndW1lbnRzKX0saW5pdEV2ZW50czpmdW5jdGlvbigpe3RoaXMubm9kZS5vbigibW92ZSIsdGhpcy5vbk1vdmUsdGhpcyk7aWYodGhpcy5ub2RlLmRpc2FibGVkKXt0aGlzLmFkZENsYXNzKCJ4LXRyZWUtbm9kZS1kaXNhYmxlZCIpO2lmKHRoaXMuY2hlY2tib3gpe3RoaXMuY2hlY2tib3guZGlzYWJsZWQ9dHJ1ZX19aWYodGhpcy5ub2RlLmhpZGRlbil7dGhpcy5oaWRlKCl9dmFyIEI9dGhpcy5ub2RlLmdldE93bmVyVHJlZSgpO3ZhciBBPUIuZW5hYmxlRER8fEIuZW5hYmxlRHJhZ3x8Qi5lbmFibGVEcm9wO2lmKEEmJighdGhpcy5ub2RlLmlzUm9vdHx8Qi5yb290VmlzaWJsZSkpe0V4dC5kZC5SZWdpc3RyeS5yZWdpc3Rlcih0aGlzLmVsTm9kZSx7bm9kZTp0aGlzLm5vZGUsaGFuZGxlczp0aGlzLmdldERESGFuZGxlcygpLGlzSGFuZGxlOmZhbHNlfSl9fSxnZXREREhhbmRsZXM6ZnVuY3Rpb24oKXtyZXR1cm5bdGhpcy5pY29uTm9kZSx0aGlzLnRleHROb2RlLHRoaXMuZWxOb2RlXX0saGlkZTpmdW5jdGlvbigpe3RoaXMubm9kZS5oaWRkZW49dHJ1ZTtpZih0aGlzLndyYXApe3RoaXMud3JhcC5zdHlsZS5kaXNwbGF5PSJub25lIn19LHNob3c6ZnVuY3Rpb24oKXt0aGlzLm5vZGUuaGlkZGVuPWZhbHNlO2lmKHRoaXMud3JhcCl7dGhpcy53cmFwLnN0eWxlLmRpc3BsYXk9IiJ9fSxvbkNvbnRleHRNZW51OmZ1bmN0aW9uKEEpe2lmKHRoaXMubm9kZS5oYXNMaXN0ZW5lcigiY29udGV4dG1lbnUiKXx8dGhpcy5ub2RlLmdldE93bmVyVHJlZSgpLmhhc0xpc3RlbmVyKCJjb250ZXh0bWVudSIpKXtBLnByZXZlbnREZWZhdWx0KCk7dGhpcy5mb2N1cygpO3RoaXMuZmlyZUV2ZW50KCJjb250ZXh0bWVudSIsdGhpcy5ub2RlLEEpfX0sb25DbGljazpmdW5jdGlvbihCKXtpZih0aGlzLmRyb3BwaW5nKXtCLnN0b3BFdmVudCgpO3JldHVybiB9aWYodGhpcy5maXJlRXZlbnQoImJlZm9yZWNsaWNrIix0aGlzLm5vZGUsQikhPT1mYWxzZSl7dmFyIEE9Qi5nZXRUYXJnZXQoImEiKTtpZighdGhpcy5kaXNhYmxlZCYmdGhpcy5ub2RlLmF0dHJpYnV0ZXMuaHJlZiYmQSl7dGhpcy5maXJlRXZlbnQoImNsaWNrIix0aGlzLm5vZGUsQik7cmV0dXJuIH1lbHNle2lmKEEmJkIuY3RybEtleSl7Qi5zdG9wRXZlbnQoKX19Qi5wcmV2ZW50RGVmYXVsdCgpO2lmKHRoaXMuZGlzYWJsZWQpe3JldHVybiB9aWYodGhpcy5ub2RlLmF0dHJpYnV0ZXMuc2luZ2xlQ2xpY2tFeHBhbmQmJiF0aGlzLmFuaW1hdGluZyYmdGhpcy5ub2RlLmhhc0NoaWxkTm9kZXMoKSl7dGhpcy5ub2RlLnRvZ2dsZSgpfXRoaXMuZmlyZUV2ZW50KCJjbGljayIsdGhpcy5ub2RlLEIpfWVsc2V7Qi5zdG9wRXZlbnQoKX19LG9uRGJsQ2xpY2s6ZnVuY3Rpb24oQSl7QS5wcmV2ZW50RGVmYXVsdCgpO2lmKHRoaXMuZGlzYWJsZWQpe3JldHVybiB9aWYodGhpcy5jaGVja2JveCl7dGhpcy50b2dnbGVDaGVjaygpfWlmKCF0aGlzLmFuaW1hdGluZyYmdGhpcy5ub2RlLmhhc0NoaWxkTm9kZXMoKSl7dGhpcy5ub2RlLnRvZ2dsZSgpfXRoaXMuZmlyZUV2ZW50KCJkYmxjbGljayIsdGhpcy5ub2RlLEEpfSxvbk92ZXI6ZnVuY3Rpb24oQSl7dGhpcy5hZGRDbGFzcygieC10cmVlLW5vZGUtb3ZlciIpfSxvbk91dDpmdW5jdGlvbihBKXt0aGlzLnJlbW92ZUNsYXNzKCJ4LXRyZWUtbm9kZS1vdmVyIil9LG9uQ2hlY2tDaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgQT10aGlzLmNoZWNrYm94LmNoZWNrZWQ7dGhpcy5ub2RlLmF0dHJpYnV0ZXMuY2hlY2tlZD1BO3RoaXMuZmlyZUV2ZW50KCJjaGVja2NoYW5nZSIsdGhpcy5ub2RlLEEpfSxlY0NsaWNrOmZ1bmN0aW9uKEEpe2lmKCF0aGlzLmFuaW1hdGluZyYmKHRoaXMubm9kZS5oYXNDaGlsZE5vZGVzKCl8fHRoaXMubm9kZS5hdHRyaWJ1dGVzLmV4cGFuZGFibGUpKXt0aGlzLm5vZGUudG9nZ2xlKCl9fSxzdGFydERyb3A6ZnVuY3Rpb24oKXt0aGlzLmRyb3BwaW5nPXRydWV9LGVuZERyb3A6ZnVuY3Rpb24oKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhpcy5kcm9wcGluZz1mYWxzZX0uY3JlYXRlRGVsZWdhdGUodGhpcyksNTApfSxleHBhbmQ6ZnVuY3Rpb24oKXt0aGlzLnVwZGF0ZUV4cGFuZEljb24oKTt0aGlzLmN0Tm9kZS5zdHlsZS5kaXNwbGF5PSIifSxmb2N1czpmdW5jdGlvbigpe2lmKCF0aGlzLm5vZGUucHJldmVudEhTY3JvbGwpe3RyeXt0aGlzLmFuY2hvci5mb2N1cygpfWNhdGNoKEMpe319ZWxzZXtpZighRXh0LmlzSUUpe3RyeXt2YXIgQj10aGlzLm5vZGUuZ2V0T3duZXJUcmVlKCkuZ2V0VHJlZUVsKCkuZG9tO3ZhciBBPUIuc2Nyb2xsTGVmdDt0aGlzLmFuY2hvci5mb2N1cygpO0Iuc2Nyb2xsTGVmdD1BfWNhdGNoKEMpe319fX0sdG9nZ2xlQ2hlY2s6ZnVuY3Rpb24oQil7dmFyIEE9dGhpcy5jaGVja2JveDtpZihBKXtBLmNoZWNrZWQ9KEI9PT11bmRlZmluZWQ/IUEuY2hlY2tlZDpCKX19LGJsdXI6ZnVuY3Rpb24oKXt0cnl7dGhpcy5hbmNob3IuYmx1cigpfWNhdGNoKEEpe319LGFuaW1FeHBhbmQ6ZnVuY3Rpb24oQil7dmFyIEE9RXh0LmdldCh0aGlzLmN0Tm9kZSk7QS5zdG9wRngoKTtpZighdGhpcy5ub2RlLmhhc0NoaWxkTm9kZXMoKSl7dGhpcy51cGRhdGVFeHBhbmRJY29uKCk7dGhpcy5jdE5vZGUuc3R5bGUuZGlzcGxheT0iIjtFeHQuY2FsbGJhY2soQik7cmV0dXJuIH10aGlzLmFuaW1hdGluZz10cnVlO3RoaXMudXBkYXRlRXhwYW5kSWNvbigpO0Euc2xpZGVJbigidCIse2NhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5hbmltYXRpbmc9ZmFsc2U7RXh0LmNhbGxiYWNrKEIpfSxzY29wZTp0aGlzLGR1cmF0aW9uOnRoaXMubm9kZS5vd25lclRyZWUuZHVyYXRpb258fDAuMjV9KX0saGlnaGxpZ2h0OmZ1bmN0aW9uKCl7dmFyIEE9dGhpcy5ub2RlLmdldE93bmVyVHJlZSgpO0V4dC5mbHkodGhpcy53cmFwKS5oaWdobGlnaHQoQS5obENvbG9yfHwiQzNEQUY5Iix7ZW5kQ29sb3I6QS5obEJhc2VDb2xvcn0pfSxjb2xsYXBzZTpmdW5jdGlvbigpe3RoaXMudXBkYXRlRXhwYW5kSWNvbigpO3RoaXMuY3ROb2RlLnN0eWxlLmRpc3BsYXk9Im5vbmUifSxhbmltQ29sbGFwc2U6ZnVuY3Rpb24oQil7dmFyIEE9RXh0LmdldCh0aGlzLmN0Tm9kZSk7QS5lbmFibGVEaXNwbGF5TW9kZSgiYmxvY2siKTtBLnN0b3BGeCgpO3RoaXMuYW5pbWF0aW5nPXRydWU7dGhpcy51cGRhdGVFeHBhbmRJY29uKCk7QS5zbGlkZU91dCgidCIse2NhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5hbmltYXRpbmc9ZmFsc2U7RXh0LmNhbGxiYWNrKEIpfSxzY29wZTp0aGlzLGR1cmF0aW9uOnRoaXMubm9kZS5vd25lclRyZWUuZHVyYXRpb258fDAuMjV9KX0sZ2V0Q29udGFpbmVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3ROb2RlfSxnZXRFbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLndyYXB9LGFwcGVuZERER2hvc3Q6ZnVuY3Rpb24oQSl7QS5hcHBlbmRDaGlsZCh0aGlzLmVsTm9kZS5jbG9uZU5vZGUodHJ1ZSkpfSxnZXRERFJlcGFpclhZOmZ1bmN0aW9uKCl7cmV0dXJuIEV4dC5saWIuRG9tLmdldFhZKHRoaXMuaWNvbk5vZGUpfSxvblJlbmRlcjpmdW5jdGlvbigpe3RoaXMucmVuZGVyKCl9LHJlbmRlcjpmdW5jdGlvbihCKXt2YXIgRD10aGlzLm5vZGUsQT1ELmF0dHJpYnV0ZXM7dmFyIEM9RC5wYXJlbnROb2RlP0QucGFyZW50Tm9kZS51aS5nZXRDb250YWluZXIoKTpELm93bmVyVHJlZS5pbm5lckN0LmRvbTtpZighdGhpcy5yZW5kZXJlZCl7dGhpcy5yZW5kZXJlZD10cnVlO3RoaXMucmVuZGVyRWxlbWVudHMoRCxBLEMsQik7aWYoQS5xdGlwKXtpZih0aGlzLnRleHROb2RlLnNldEF0dHJpYnV0ZU5TKXt0aGlzLnRleHROb2RlLnNldEF0dHJpYnV0ZU5TKCJleHQiLCJxdGlwIixBLnF0aXApO2lmKEEucXRpcFRpdGxlKXt0aGlzLnRleHROb2RlLnNldEF0dHJpYnV0ZU5TKCJleHQiLCJxdGl0bGUiLEEucXRpcFRpdGxlKX19ZWxzZXt0aGlzLnRleHROb2RlLnNldEF0dHJpYnV0ZSgiZXh0OnF0aXAiLEEucXRpcCk7aWYoQS5xdGlwVGl0bGUpe3RoaXMudGV4dE5vZGUuc2V0QXR0cmlidXRlKCJleHQ6cXRpdGxlIixBLnF0aXBUaXRsZSl9fX1lbHNle2lmKEEucXRpcENmZyl7QS5xdGlwQ2ZnLnRhcmdldD1FeHQuaWQodGhpcy50ZXh0Tm9kZSk7RXh0LlF1aWNrVGlwcy5yZWdpc3RlcihBLnF0aXBDZmcpfX10aGlzLmluaXRFdmVudHMoKTtpZighdGhpcy5ub2RlLmV4cGFuZGVkKXt0aGlzLnVwZGF0ZUV4cGFuZEljb24odHJ1ZSl9fWVsc2V7aWYoQj09PXRydWUpe0MuYXBwZW5kQ2hpbGQodGhpcy53cmFwKX19fSxyZW5kZXJFbGVtZW50czpmdW5jdGlvbihELEksSCxKKXt0aGlzLmluZGVudE1hcmt1cD1ELnBhcmVudE5vZGU/RC5wYXJlbnROb2RlLnVpLmdldENoaWxkSW5kZW50KCk6IiI7dmFyIEU9dHlwZW9mIEkuY2hlY2tlZD09ImJvb2xlYW4iO3ZhciBCPUkuaHJlZj9JLmhyZWY6RXh0LmlzR2Vja28/IiI6IiMiO3ZhciBDPVsiPGxpIGNsYXNzPVwieC10cmVlLW5vZGVcIj48ZGl2IGV4dDp0cmVlLW5vZGUtaWQ9XCIiLEQuaWQsIlwiIGNsYXNzPVwieC10cmVlLW5vZGUtZWwgeC10cmVlLW5vZGUtbGVhZiB4LXVuc2VsZWN0YWJsZSAiLEkuY2xzLCJcIiB1bnNlbGVjdGFibGU9XCJvblwiPiIsIjxzcGFuIGNsYXNzPVwieC10cmVlLW5vZGUtaW5kZW50XCI+Iix0aGlzLmluZGVudE1hcmt1cCwiPC9zcGFuPiIsIjxpbWcgc3JjPVwiIix0aGlzLmVtcHR5SWNvbiwiXCIgY2xhc3M9XCJ4LXRyZWUtZWMtaWNvbiB4LXRyZWUtZWxib3dcIiAvPiIsIjxpbWcgc3JjPVwiIixJLmljb258fHRoaXMuZW1wdHlJY29uLCJcIiBjbGFzcz1cIngtdHJlZS1ub2RlLWljb24iLChJLmljb24/IiB4LXRyZWUtbm9kZS1pbmxpbmUtaWNvbiI6IiIpLChJLmljb25DbHM/IiAiK0kuaWNvbkNsczoiIiksIlwiIHVuc2VsZWN0YWJsZT1cIm9uXCIgLz4iLEU/KCI8aW5wdXQgY2xhc3M9XCJ4LXRyZWUtbm9kZS1jYlwiIHR5cGU9XCJjaGVja2JveFwiICIrKEkuY2hlY2tlZD8iY2hlY2tlZD1cImNoZWNrZWRcIiAvPiI6Ii8+IikpOiIiLCI8YSBoaWRlZm9jdXM9XCJvblwiIGNsYXNzPVwieC10cmVlLW5vZGUtYW5jaG9yXCIgaHJlZj1cIiIsQiwiXCIgdGFiSW5kZXg9XCIxXCIgIixJLmhyZWZUYXJnZXQ/IiB0YXJnZXQ9XCIiK0kuaHJlZlRhcmdldCsiXCIiOiIiLCI+PHNwYW4gdW5zZWxlY3RhYmxlPVwib25cIj4iLEQudGV4dCwiPC9zcGFuPjwvYT48L2Rpdj4iLCI8dWwgY2xhc3M9XCJ4LXRyZWUtbm9kZS1jdFwiIHN0eWxlPVwiZGlzcGxheTpub25lO1wiPjwvdWw+IiwiPC9saT4iXS5qb2luKCIiKTt2YXIgQTtpZihKIT09dHJ1ZSYmRC5uZXh0U2libGluZyYmKEE9RC5uZXh0U2libGluZy51aS5nZXRFbCgpKSl7dGhpcy53cmFwPUV4dC5Eb21IZWxwZXIuaW5zZXJ0SHRtbCgiYmVmb3JlQmVnaW4iLEEsQyl9ZWxzZXt0aGlzLndyYXA9RXh0LkRvbUhlbHBlci5pbnNlcnRIdG1sKCJiZWZvcmVFbmQiLEgsQyl9dGhpcy5lbE5vZGU9dGhpcy53cmFwLmNoaWxkTm9kZXNbMF07dGhpcy5jdE5vZGU9dGhpcy53cmFwLmNoaWxkTm9kZXNbMV07dmFyIEc9dGhpcy5lbE5vZGUuY2hpbGROb2Rlczt0aGlzLmluZGVudE5vZGU9R1swXTt0aGlzLmVjTm9kZT1HWzFdO3RoaXMuaWNvbk5vZGU9R1syXTt2YXIgRj0zO2lmKEUpe3RoaXMuY2hlY2tib3g9R1szXTtGKyt9dGhpcy5hbmNob3I9R1tGXTt0aGlzLnRleHROb2RlPUdbRl0uZmlyc3RDaGlsZH0sZ2V0QW5jaG9yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYW5jaG9yfSxnZXRUZXh0RWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0Tm9kZX0sZ2V0SWNvbkVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaWNvbk5vZGV9LGlzQ2hlY2tlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNoZWNrYm94P3RoaXMuY2hlY2tib3guY2hlY2tlZDpmYWxzZX0sdXBkYXRlRXhwYW5kSWNvbjpmdW5jdGlvbigpe2lmKHRoaXMucmVuZGVyZWQpe3ZhciBGPXRoaXMubm9kZSxELEM7dmFyIEE9Ri5pc0xhc3QoKT8ieC10cmVlLWVsYm93LWVuZCI6IngtdHJlZS1lbGJvdyI7dmFyIEU9Ri5oYXNDaGlsZE5vZGVzKCk7aWYoRXx8Ri5hdHRyaWJ1dGVzLmV4cGFuZGFibGUpe2lmKEYuZXhwYW5kZWQpe0ErPSItbWludXMiO0Q9IngtdHJlZS1ub2RlLWNvbGxhcHNlZCI7Qz0ieC10cmVlLW5vZGUtZXhwYW5kZWQifWVsc2V7QSs9Ii1wbHVzIjtEPSJ4LXRyZWUtbm9kZS1leHBhbmRlZCI7Qz0ieC10cmVlLW5vZGUtY29sbGFwc2VkIn1pZih0aGlzLndhc0xlYWYpe3RoaXMucmVtb3ZlQ2xhc3MoIngtdHJlZS1ub2RlLWxlYWYiKTt0aGlzLndhc0xlYWY9ZmFsc2V9aWYodGhpcy5jMSE9RHx8dGhpcy5jMiE9Qyl7RXh0LmZseSh0aGlzLmVsTm9kZSkucmVwbGFjZUNsYXNzKEQsQyk7dGhpcy5jMT1EO3RoaXMuYzI9Q319ZWxzZXtpZighdGhpcy53YXNMZWFmKXtFeHQuZmx5KHRoaXMuZWxOb2RlKS5yZXBsYWNlQ2xhc3MoIngtdHJlZS1ub2RlLWV4cGFuZGVkIiwieC10cmVlLW5vZGUtbGVhZiIpO2RlbGV0ZSB0aGlzLmMxO2RlbGV0ZSB0aGlzLmMyO3RoaXMud2FzTGVhZj10cnVlfX12YXIgQj0ieC10cmVlLWVjLWljb24gIitBO2lmKHRoaXMuZWNjIT1CKXt0aGlzLmVjTm9kZS5jbGFzc05hbWU9Qjt0aGlzLmVjYz1CfX19LGdldENoaWxkSW5kZW50OmZ1bmN0aW9uKCl7aWYoIXRoaXMuY2hpbGRJbmRlbnQpe3ZhciBBPVtdO3ZhciBCPXRoaXMubm9kZTt3aGlsZShCKXtpZighQi5pc1Jvb3R8fChCLmlzUm9vdCYmQi5vd25lclRyZWUucm9vdFZpc2libGUpKXtpZighQi5pc0xhc3QoKSl7QS51bnNoaWZ0KCI8aW1nIHNyYz1cIiIrdGhpcy5lbXB0eUljb24rIlwiIGNsYXNzPVwieC10cmVlLWVsYm93LWxpbmVcIiAvPiIpfWVsc2V7QS51bnNoaWZ0KCI8aW1nIHNyYz1cIiIrdGhpcy5lbXB0eUljb24rIlwiIGNsYXNzPVwieC10cmVlLWljb25cIiAvPiIpfX1CPUIucGFyZW50Tm9kZX10aGlzLmNoaWxkSW5kZW50PUEuam9pbigiIil9cmV0dXJuIHRoaXMuY2hpbGRJbmRlbnR9LHJlbmRlckluZGVudDpmdW5jdGlvbigpe2lmKHRoaXMucmVuZGVyZWQpe3ZhciBBPSIiO3ZhciBCPXRoaXMubm9kZS5wYXJlbnROb2RlO2lmKEIpe0E9Qi51aS5nZXRDaGlsZEluZGVudCgpfWlmKHRoaXMuaW5kZW50TWFya3VwIT1BKXt0aGlzLmluZGVudE5vZGUuaW5uZXJIVE1MPUE7dGhpcy5pbmRlbnRNYXJrdXA9QX10aGlzLnVwZGF0ZUV4cGFuZEljb24oKX19LGRlc3Ryb3k6ZnVuY3Rpb24oKXtpZih0aGlzLmVsTm9kZSl7RXh0LmRkLlJlZ2lzdHJ5LnVucmVnaXN0ZXIodGhpcy5lbE5vZGUuaWQpfWRlbGV0ZSB0aGlzLmVsTm9kZTtkZWxldGUgdGhpcy5jdE5vZGU7ZGVsZXRlIHRoaXMuaW5kZW50Tm9kZTtkZWxldGUgdGhpcy5lY05vZGU7ZGVsZXRlIHRoaXMuaWNvbk5vZGU7ZGVsZXRlIHRoaXMuY2hlY2tib3g7ZGVsZXRlIHRoaXMuYW5jaG9yO2RlbGV0ZSB0aGlzLnRleHROb2RlO0V4dC5yZW1vdmVOb2RlKHRoaXMuY3ROb2RlKX19O0V4dC50cmVlLlJvb3RUcmVlTm9kZVVJPUV4dC5leHRlbmQoRXh0LnRyZWUuVHJlZU5vZGVVSSx7cmVuZGVyOmZ1bmN0aW9uKCl7aWYoIXRoaXMucmVuZGVyZWQpe3ZhciBBPXRoaXMubm9kZS5vd25lclRyZWUuaW5uZXJDdC5kb207dGhpcy5ub2RlLmV4cGFuZGVkPXRydWU7QS5pbm5lckhUTUw9IjxkaXYgY2xhc3M9XCJ4LXRyZWUtcm9vdC1ub2RlXCI+PC9kaXY+Ijt0aGlzLndyYXA9dGhpcy5jdE5vZGU9QS5maXJzdENoaWxkfX0sY29sbGFwc2U6RXh0LmVtcHR5Rm4sZXhwYW5kOkV4dC5lbXB0eUZufSk7DQpFeHQudHJlZS5UcmVlTG9hZGVyPWZ1bmN0aW9uKEEpe3RoaXMuYmFzZVBhcmFtcz17fTt0aGlzLnJlcXVlc3RNZXRob2Q9IlBPU1QiO0V4dC5hcHBseSh0aGlzLEEpO3RoaXMuYWRkRXZlbnRzKCJiZWZvcmVsb2FkIiwibG9hZCIsImxvYWRleGNlcHRpb24iKTtFeHQudHJlZS5UcmVlTG9hZGVyLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKX07RXh0LmV4dGVuZChFeHQudHJlZS5UcmVlTG9hZGVyLEV4dC51dGlsLk9ic2VydmFibGUse3VpUHJvdmlkZXJzOnt9LGNsZWFyT25Mb2FkOnRydWUsbG9hZDpmdW5jdGlvbihBLEIpe2lmKHRoaXMuY2xlYXJPbkxvYWQpe3doaWxlKEEuZmlyc3RDaGlsZCl7QS5yZW1vdmVDaGlsZChBLmZpcnN0Q2hpbGQpfX1pZih0aGlzLmRvUHJlbG9hZChBKSl7aWYodHlwZW9mIEI9PSJmdW5jdGlvbiIpe0IoKX19ZWxzZXtpZih0aGlzLmRhdGFVcmx8fHRoaXMudXJsKXt0aGlzLnJlcXVlc3REYXRhKEEsQil9fX0sZG9QcmVsb2FkOmZ1bmN0aW9uKEQpe2lmKEQuYXR0cmlidXRlcy5jaGlsZHJlbil7aWYoRC5jaGlsZE5vZGVzLmxlbmd0aDwxKXt2YXIgQz1ELmF0dHJpYnV0ZXMuY2hpbGRyZW47RC5iZWdpblVwZGF0ZSgpO2Zvcih2YXIgQj0wLEE9Qy5sZW5ndGg7QjxBO0IrKyl7dmFyIEU9RC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZU5vZGUoQ1tCXSkpO2lmKHRoaXMucHJlbG9hZENoaWxkcmVuKXt0aGlzLmRvUHJlbG9hZChFKX19RC5lbmRVcGRhdGUoKX1yZXR1cm4gdHJ1ZX1lbHNle3JldHVybiBmYWxzZX19LGdldFBhcmFtczpmdW5jdGlvbihEKXt2YXIgQT1bXSxDPXRoaXMuYmFzZVBhcmFtcztmb3IodmFyIEIgaW4gQyl7aWYodHlwZW9mIENbQl0hPSJmdW5jdGlvbiIpe0EucHVzaChlbmNvZGVVUklDb21wb25lbnQoQiksIj0iLGVuY29kZVVSSUNvbXBvbmVudChDW0JdKSwiJiIpfX1BLnB1c2goIm5vZGU9IixlbmNvZGVVUklDb21wb25lbnQoRC5pZCkpO3JldHVybiBBLmpvaW4oIiIpfSxyZXF1ZXN0RGF0YTpmdW5jdGlvbihBLEIpe2lmKHRoaXMuZmlyZUV2ZW50KCJiZWZvcmVsb2FkIix0aGlzLEEsQikhPT1mYWxzZSl7dGhpcy50cmFuc0lkPUV4dC5BamF4LnJlcXVlc3Qoe21ldGhvZDp0aGlzLnJlcXVlc3RNZXRob2QsdXJsOnRoaXMuZGF0YVVybHx8dGhpcy51cmwsc3VjY2Vzczp0aGlzLmhhbmRsZVJlc3BvbnNlLGZhaWx1cmU6dGhpcy5oYW5kbGVGYWlsdXJlLHNjb3BlOnRoaXMsYXJndW1lbnQ6e2NhbGxiYWNrOkIsbm9kZTpBfSxwYXJhbXM6dGhpcy5nZXRQYXJhbXMoQSl9KX1lbHNle2lmKHR5cGVvZiBCPT0iZnVuY3Rpb24iKXtCKCl9fX0saXNMb2FkaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJhbnNJZD90cnVlOmZhbHNlfSxhYm9ydDpmdW5jdGlvbigpe2lmKHRoaXMuaXNMb2FkaW5nKCkpe0V4dC5BamF4LmFib3J0KHRoaXMudHJhbnNJZCl9fSxjcmVhdGVOb2RlOmZ1bmN0aW9uKGF0dHIpe2lmKHRoaXMuYmFzZUF0dHJzKXtFeHQuYXBwbHlJZihhdHRyLHRoaXMuYmFzZUF0dHJzKX1pZih0aGlzLmFwcGx5TG9hZGVyIT09ZmFsc2Upe2F0dHIubG9hZGVyPXRoaXN9aWYodHlwZW9mIGF0dHIudWlQcm92aWRlcj09InN0cmluZyIpe2F0dHIudWlQcm92aWRlcj10aGlzLnVpUHJvdmlkZXJzW2F0dHIudWlQcm92aWRlcl18fGV2YWwoYXR0ci51aVByb3ZpZGVyKX1yZXR1cm4oYXR0ci5sZWFmP25ldyBFeHQudHJlZS5UcmVlTm9kZShhdHRyKTpuZXcgRXh0LnRyZWUuQXN5bmNUcmVlTm9kZShhdHRyKSl9LHByb2Nlc3NSZXNwb25zZTpmdW5jdGlvbihyZXNwb25zZSxub2RlLGNhbGxiYWNrKXt2YXIganNvbj1yZXNwb25zZS5yZXNwb25zZVRleHQ7dHJ5e3ZhciBvPWV2YWwoIigiK2pzb24rIikiKTtub2RlLmJlZ2luVXBkYXRlKCk7Zm9yKHZhciBpPTAsbGVuPW8ubGVuZ3RoO2k8bGVuO2krKyl7dmFyIG49dGhpcy5jcmVhdGVOb2RlKG9baV0pO2lmKG4pe25vZGUuYXBwZW5kQ2hpbGQobil9fW5vZGUuZW5kVXBkYXRlKCk7aWYodHlwZW9mIGNhbGxiYWNrPT0iZnVuY3Rpb24iKXtjYWxsYmFjayh0aGlzLG5vZGUpfX1jYXRjaChlKXt0aGlzLmhhbmRsZUZhaWx1cmUocmVzcG9uc2UpfX0saGFuZGxlUmVzcG9uc2U6ZnVuY3Rpb24oQil7dGhpcy50cmFuc0lkPWZhbHNlO3ZhciBBPUIuYXJndW1lbnQ7dGhpcy5wcm9jZXNzUmVzcG9uc2UoQixBLm5vZGUsQS5jYWxsYmFjayk7dGhpcy5maXJlRXZlbnQoImxvYWQiLHRoaXMsQS5ub2RlLEIpfSxoYW5kbGVGYWlsdXJlOmZ1bmN0aW9uKEIpe3RoaXMudHJhbnNJZD1mYWxzZTt2YXIgQT1CLmFyZ3VtZW50O3RoaXMuZmlyZUV2ZW50KCJsb2FkZXhjZXB0aW9uIix0aGlzLEEubm9kZSxCKTtpZih0eXBlb2YgQS5jYWxsYmFjaz09ImZ1bmN0aW9uIil7QS5jYWxsYmFjayh0aGlzLEEubm9kZSl9fX0pOw0KRXh0LnRyZWUuVHJlZUZpbHRlcj1mdW5jdGlvbihBLEIpe3RoaXMudHJlZT1BO3RoaXMuZmlsdGVyZWQ9e307RXh0LmFwcGx5KHRoaXMsQil9O0V4dC50cmVlLlRyZWVGaWx0ZXIucHJvdG90eXBlPXtjbGVhckJsYW5rOmZhbHNlLHJldmVyc2U6ZmFsc2UsYXV0b0NsZWFyOmZhbHNlLHJlbW92ZTpmYWxzZSxmaWx0ZXI6ZnVuY3Rpb24oRCxBLEIpe0E9QXx8InRleHQiO3ZhciBDO2lmKHR5cGVvZiBEPT0ic3RyaW5nIil7dmFyIEU9RC5sZW5ndGg7aWYoRT09MCYmdGhpcy5jbGVhckJsYW5rKXt0aGlzLmNsZWFyKCk7cmV0dXJuIH1EPUQudG9Mb3dlckNhc2UoKTtDPWZ1bmN0aW9uKEYpe3JldHVybiBGLmF0dHJpYnV0ZXNbQV0uc3Vic3RyKDAsRSkudG9Mb3dlckNhc2UoKT09RH19ZWxzZXtpZihELmV4ZWMpe0M9ZnVuY3Rpb24oRil7cmV0dXJuIEQudGVzdChGLmF0dHJpYnV0ZXNbQV0pfX1lbHNle3Rocm93IklsbGVnYWwgZmlsdGVyIHR5cGUsIG11c3QgYmUgc3RyaW5nIG9yIHJlZ2V4In19dGhpcy5maWx0ZXJCeShDLG51bGwsQil9LGZpbHRlckJ5OmZ1bmN0aW9uKEQsQyxCKXtCPUJ8fHRoaXMudHJlZS5yb290O2lmKHRoaXMuYXV0b0NsZWFyKXt0aGlzLmNsZWFyKCl9dmFyIEE9dGhpcy5maWx0ZXJlZCxIPXRoaXMucmV2ZXJzZTt2YXIgRT1mdW5jdGlvbihKKXtpZihKPT1CKXtyZXR1cm4gdHJ1ZX1pZihBW0ouaWRdKXtyZXR1cm4gZmFsc2V9dmFyIEk9RC5jYWxsKEN8fEosSik7aWYoIUl8fEgpe0FbSi5pZF09SjtKLnVpLmhpZGUoKTtyZXR1cm4gZmFsc2V9cmV0dXJuIHRydWV9O0IuY2FzY2FkZShFKTtpZih0aGlzLnJlbW92ZSl7Zm9yKHZhciBHIGluIEEpe2lmKHR5cGVvZiBHIT0iZnVuY3Rpb24iKXt2YXIgRj1BW0ddO2lmKEYmJkYucGFyZW50Tm9kZSl7Ri5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKEYpfX19fX0sY2xlYXI6ZnVuY3Rpb24oKXt2YXIgQj10aGlzLnRyZWU7dmFyIEE9dGhpcy5maWx0ZXJlZDtmb3IodmFyIEQgaW4gQSl7aWYodHlwZW9mIEQhPSJmdW5jdGlvbiIpe3ZhciBDPUFbRF07aWYoQyl7Qy51aS5zaG93KCl9fX10aGlzLmZpbHRlcmVkPXt9fX07DQpFeHQudHJlZS5UcmVlU29ydGVyPWZ1bmN0aW9uKEIsQyl7RXh0LmFwcGx5KHRoaXMsQyk7Qi5vbigiYmVmb3JlY2hpbGRyZW5yZW5kZXJlZCIsdGhpcy5kb1NvcnQsdGhpcyk7Qi5vbigiYXBwZW5kIix0aGlzLnVwZGF0ZVNvcnQsdGhpcyk7Qi5vbigiaW5zZXJ0Iix0aGlzLnVwZGF0ZVNvcnQsdGhpcyk7Qi5vbigidGV4dGNoYW5nZSIsdGhpcy51cGRhdGVTb3J0UGFyZW50LHRoaXMpO3ZhciBFPXRoaXMuZGlyJiZ0aGlzLmRpci50b0xvd2VyQ2FzZSgpPT0iZGVzYyI7dmFyIEY9dGhpcy5wcm9wZXJ0eXx8InRleHQiO3ZhciBHPXRoaXMuc29ydFR5cGU7dmFyIEE9dGhpcy5mb2xkZXJTb3J0O3ZhciBEPXRoaXMuY2FzZVNlbnNpdGl2ZT09PXRydWU7dmFyIEg9dGhpcy5sZWFmQXR0cnx8ImxlYWYiO3RoaXMuc29ydEZuPWZ1bmN0aW9uKEosSSl7aWYoQSl7aWYoSi5hdHRyaWJ1dGVzW0hdJiYhSS5hdHRyaWJ1dGVzW0hdKXtyZXR1cm4gMX1pZighSi5hdHRyaWJ1dGVzW0hdJiZJLmF0dHJpYnV0ZXNbSF0pe3JldHVybiAtMX19dmFyIEw9Rz9HKEopOihEP0ouYXR0cmlidXRlc1tGXTpKLmF0dHJpYnV0ZXNbRl0udG9VcHBlckNhc2UoKSk7dmFyIEs9Rz9HKEkpOihEP0kuYXR0cmlidXRlc1tGXTpJLmF0dHJpYnV0ZXNbRl0udG9VcHBlckNhc2UoKSk7aWYoTDxLKXtyZXR1cm4gRT8rMTotMX1lbHNle2lmKEw+Syl7cmV0dXJuIEU/LTE6KzF9ZWxzZXtyZXR1cm4gMH19fX07RXh0LnRyZWUuVHJlZVNvcnRlci5wcm90b3R5cGU9e2RvU29ydDpmdW5jdGlvbihBKXtBLnNvcnQodGhpcy5zb3J0Rm4pfSxjb21wYXJlTm9kZXM6ZnVuY3Rpb24oQixBKXtyZXR1cm4oQi50ZXh0LnRvVXBwZXJDYXNlKCk+QS50ZXh0LnRvVXBwZXJDYXNlKCk/MTotMSl9LHVwZGF0ZVNvcnQ6ZnVuY3Rpb24oQSxCKXtpZihCLmNoaWxkcmVuUmVuZGVyZWQpe3RoaXMuZG9Tb3J0LmRlZmVyKDEsdGhpcyxbQl0pfX0sdXBkYXRlU29ydFBhcmVudDpmdW5jdGlvbihBKXt2YXIgQj1BLnBhcmVudE5vZGU7aWYoQiYmQi5jaGlsZHJlblJlbmRlcmVkKXt0aGlzLmRvU29ydC5kZWZlcigxLHRoaXMsW0JdKX19fTsNCmlmKEV4dC5kZC5Ecm9wWm9uZSl7RXh0LnRyZWUuVHJlZURyb3Bab25lPWZ1bmN0aW9uKEEsQil7dGhpcy5hbGxvd1BhcmVudEluc2VydD1mYWxzZTt0aGlzLmFsbG93Q29udGFpbmVyRHJvcD1mYWxzZTt0aGlzLmFwcGVuZE9ubHk9ZmFsc2U7RXh0LnRyZWUuVHJlZURyb3Bab25lLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLEEuaW5uZXJDdCxCKTt0aGlzLnRyZWU9QTt0aGlzLmRyYWdPdmVyRGF0YT17fTt0aGlzLmxhc3RJbnNlcnRDbGFzcz0ieC10cmVlLW5vLXN0YXR1cyJ9O0V4dC5leHRlbmQoRXh0LnRyZWUuVHJlZURyb3Bab25lLEV4dC5kZC5Ecm9wWm9uZSx7ZGRHcm91cDoiVHJlZUREIixleHBhbmREZWxheToxMDAwLGV4cGFuZE5vZGU6ZnVuY3Rpb24oQSl7aWYoQS5oYXNDaGlsZE5vZGVzKCkmJiFBLmlzRXhwYW5kZWQoKSl7QS5leHBhbmQoZmFsc2UsbnVsbCx0aGlzLnRyaWdnZXJDYWNoZVJlZnJlc2guY3JlYXRlRGVsZWdhdGUodGhpcykpfX0scXVldWVFeHBhbmQ6ZnVuY3Rpb24oQSl7dGhpcy5leHBhbmRQcm9jSWQ9dGhpcy5leHBhbmROb2RlLmRlZmVyKHRoaXMuZXhwYW5kRGVsYXksdGhpcyxbQV0pfSxjYW5jZWxFeHBhbmQ6ZnVuY3Rpb24oKXtpZih0aGlzLmV4cGFuZFByb2NJZCl7Y2xlYXJUaW1lb3V0KHRoaXMuZXhwYW5kUHJvY0lkKTt0aGlzLmV4cGFuZFByb2NJZD1mYWxzZX19LGlzVmFsaWREcm9wUG9pbnQ6ZnVuY3Rpb24oQSxJLEcsRCxDKXtpZighQXx8IUMpe3JldHVybiBmYWxzZX12YXIgRT1BLm5vZGU7dmFyIEY9Qy5ub2RlO2lmKCEoRSYmRS5pc1RhcmdldCYmSSkpe3JldHVybiBmYWxzZX1pZihJPT0iYXBwZW5kIiYmRS5hbGxvd0NoaWxkcmVuPT09ZmFsc2Upe3JldHVybiBmYWxzZX1pZigoST09ImFib3ZlInx8ST09ImJlbG93IikmJihFLnBhcmVudE5vZGUmJkUucGFyZW50Tm9kZS5hbGxvd0NoaWxkcmVuPT09ZmFsc2UpKXtyZXR1cm4gZmFsc2V9aWYoRiYmKEU9PUZ8fEYuY29udGFpbnMoRSkpKXtyZXR1cm4gZmFsc2V9dmFyIEI9dGhpcy5kcmFnT3ZlckRhdGE7Qi50cmVlPXRoaXMudHJlZTtCLnRhcmdldD1FO0IuZGF0YT1DO0IucG9pbnQ9STtCLnNvdXJjZT1HO0IucmF3RXZlbnQ9RDtCLmRyb3BOb2RlPUY7Qi5jYW5jZWw9ZmFsc2U7dmFyIEg9dGhpcy50cmVlLmZpcmVFdmVudCgibm9kZWRyYWdvdmVyIixCKTtyZXR1cm4gQi5jYW5jZWw9PT1mYWxzZSYmSCE9PWZhbHNlfSxnZXREcm9wUG9pbnQ6ZnVuY3Rpb24oRSxELEkpe3ZhciBKPUQubm9kZTtpZihKLmlzUm9vdCl7cmV0dXJuIEouYWxsb3dDaGlsZHJlbiE9PWZhbHNlPyJhcHBlbmQiOmZhbHNlfXZhciBCPUQuZGRlbDt2YXIgSz1FeHQubGliLkRvbS5nZXRZKEIpLEc9SytCLm9mZnNldEhlaWdodDt2YXIgRj1FeHQubGliLkV2ZW50LmdldFBhZ2VZKEUpO3ZhciBIPUouYWxsb3dDaGlsZHJlbj09PWZhbHNlfHxKLmlzTGVhZigpO2lmKHRoaXMuYXBwZW5kT25seXx8Si5wYXJlbnROb2RlLmFsbG93Q2hpbGRyZW49PT1mYWxzZSl7cmV0dXJuIEg/ZmFsc2U6ImFwcGVuZCJ9dmFyIEM9ZmFsc2U7aWYoIXRoaXMuYWxsb3dQYXJlbnRJbnNlcnQpe0M9Si5oYXNDaGlsZE5vZGVzKCkmJkouaXNFeHBhbmRlZCgpfXZhciBBPShHLUspLyhIPzI6Myk7aWYoRj49SyYmRjwoSytBKSl7cmV0dXJuImFib3ZlIn1lbHNle2lmKCFDJiYoSHx8Rj49Ry1BJiZGPD1HKSl7cmV0dXJuImJlbG93In1lbHNle3JldHVybiJhcHBlbmQifX19LG9uTm9kZUVudGVyOmZ1bmN0aW9uKEQsQSxDLEIpe3RoaXMuY2FuY2VsRXhwYW5kKCl9LG9uTm9kZU92ZXI6ZnVuY3Rpb24oQixHLEYsRSl7dmFyIEk9dGhpcy5nZXREcm9wUG9pbnQoRixCLEcpO3ZhciBDPUIubm9kZTtpZighdGhpcy5leHBhbmRQcm9jSWQmJkk9PSJhcHBlbmQiJiZDLmhhc0NoaWxkTm9kZXMoKSYmIUIubm9kZS5pc0V4cGFuZGVkKCkpe3RoaXMucXVldWVFeHBhbmQoQyl9ZWxzZXtpZihJIT0iYXBwZW5kIil7dGhpcy5jYW5jZWxFeHBhbmQoKX19dmFyIEQ9dGhpcy5kcm9wTm90QWxsb3dlZDtpZih0aGlzLmlzVmFsaWREcm9wUG9pbnQoQixJLEcsRixFKSl7aWYoSSl7dmFyIEE9Qi5kZGVsO3ZhciBIO2lmKEk9PSJhYm92ZSIpe0Q9Qi5ub2RlLmlzRmlyc3QoKT8ieC10cmVlLWRyb3Atb2stYWJvdmUiOiJ4LXRyZWUtZHJvcC1vay1iZXR3ZWVuIjtIPSJ4LXRyZWUtZHJhZy1pbnNlcnQtYWJvdmUifWVsc2V7aWYoST09ImJlbG93Iil7RD1CLm5vZGUuaXNMYXN0KCk/IngtdHJlZS1kcm9wLW9rLWJlbG93IjoieC10cmVlLWRyb3Atb2stYmV0d2VlbiI7SD0ieC10cmVlLWRyYWctaW5zZXJ0LWJlbG93In1lbHNle0Q9IngtdHJlZS1kcm9wLW9rLWFwcGVuZCI7SD0ieC10cmVlLWRyYWctYXBwZW5kIn19aWYodGhpcy5sYXN0SW5zZXJ0Q2xhc3MhPUgpe0V4dC5mbHkoQSkucmVwbGFjZUNsYXNzKHRoaXMubGFzdEluc2VydENsYXNzLEgpO3RoaXMubGFzdEluc2VydENsYXNzPUh9fX1yZXR1cm4gRH0sb25Ob2RlT3V0OmZ1bmN0aW9uKEQsQSxDLEIpe3RoaXMuY2FuY2VsRXhwYW5kKCk7dGhpcy5yZW1vdmVEcm9wSW5kaWNhdG9ycyhEKX0sb25Ob2RlRHJvcDpmdW5jdGlvbihDLEksRSxEKXt2YXIgSD10aGlzLmdldERyb3BQb2ludChFLEMsSSk7dmFyIEY9Qy5ub2RlO0YudWkuc3RhcnREcm9wKCk7aWYoIXRoaXMuaXNWYWxpZERyb3BQb2ludChDLEgsSSxFLEQpKXtGLnVpLmVuZERyb3AoKTtyZXR1cm4gZmFsc2V9dmFyIEc9RC5ub2RlfHwoSS5nZXRUcmVlTm9kZT9JLmdldFRyZWVOb2RlKEQsRixILEUpOm51bGwpO3ZhciBCPXt0cmVlOnRoaXMudHJlZSx0YXJnZXQ6RixkYXRhOkQscG9pbnQ6SCxzb3VyY2U6SSxyYXdFdmVudDpFLGRyb3BOb2RlOkcsY2FuY2VsOiFHLGRyb3BTdGF0dXM6ZmFsc2V9O3ZhciBBPXRoaXMudHJlZS5maXJlRXZlbnQoImJlZm9yZW5vZGVkcm9wIixCKTtpZihBPT09ZmFsc2V8fEIuY2FuY2VsPT09dHJ1ZXx8IUIuZHJvcE5vZGUpe0YudWkuZW5kRHJvcCgpO3JldHVybiBCLmRyb3BTdGF0dXN9Rj1CLnRhcmdldDtpZihIPT0iYXBwZW5kIiYmIUYuaXNFeHBhbmRlZCgpKXtGLmV4cGFuZChmYWxzZSxudWxsLGZ1bmN0aW9uKCl7dGhpcy5jb21wbGV0ZURyb3AoQil9LmNyZWF0ZURlbGVnYXRlKHRoaXMpKX1lbHNle3RoaXMuY29tcGxldGVEcm9wKEIpfXJldHVybiB0cnVlfSxjb21wbGV0ZURyb3A6ZnVuY3Rpb24oRyl7dmFyIEQ9Ry5kcm9wTm9kZSxFPUcucG9pbnQsQz1HLnRhcmdldDtpZighRXh0LmlzQXJyYXkoRCkpe0Q9W0RdfXZhciBGO2Zvcih2YXIgQj0wLEE9RC5sZW5ndGg7QjxBO0IrKyl7Rj1EW0JdO2lmKEU9PSJhYm92ZSIpe0MucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoRixDKX1lbHNle2lmKEU9PSJiZWxvdyIpe0MucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoRixDLm5leHRTaWJsaW5nKX1lbHNle0MuYXBwZW5kQ2hpbGQoRil9fX1GLnVpLmZvY3VzKCk7aWYodGhpcy50cmVlLmhsRHJvcCl7Ri51aS5oaWdobGlnaHQoKX1DLnVpLmVuZERyb3AoKTt0aGlzLnRyZWUuZmlyZUV2ZW50KCJub2RlZHJvcCIsRyl9LGFmdGVyTm9kZU1vdmVkOmZ1bmN0aW9uKEEsQyxFLEQsQil7aWYodGhpcy50cmVlLmhsRHJvcCl7Qi51aS5mb2N1cygpO0IudWkuaGlnaGxpZ2h0KCl9dGhpcy50cmVlLmZpcmVFdmVudCgibm9kZWRyb3AiLHRoaXMudHJlZSxELEMsQSxFKX0sZ2V0VHJlZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRyZWV9LHJlbW92ZURyb3BJbmRpY2F0b3JzOmZ1bmN0aW9uKEIpe2lmKEImJkIuZGRlbCl7dmFyIEE9Qi5kZGVsO0V4dC5mbHkoQSkucmVtb3ZlQ2xhc3MoWyJ4LXRyZWUtZHJhZy1pbnNlcnQtYWJvdmUiLCJ4LXRyZWUtZHJhZy1pbnNlcnQtYmVsb3ciLCJ4LXRyZWUtZHJhZy1hcHBlbmQiXSk7dGhpcy5sYXN0SW5zZXJ0Q2xhc3M9Il9ub2NsYXNzIn19LGJlZm9yZURyYWdEcm9wOmZ1bmN0aW9uKEIsQSxDKXt0aGlzLmNhbmNlbEV4cGFuZCgpO3JldHVybiB0cnVlfSxhZnRlclJlcGFpcjpmdW5jdGlvbihBKXtpZihBJiZFeHQuZW5hYmxlRngpe0Eubm9kZS51aS5oaWdobGlnaHQoKX10aGlzLmhpZGVQcm94eSgpfX0pfTsNCmlmKEV4dC5kZC5EcmFnWm9uZSl7RXh0LnRyZWUuVHJlZURyYWdab25lPWZ1bmN0aW9uKEEsQil7RXh0LnRyZWUuVHJlZURyYWdab25lLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLEEuZ2V0VHJlZUVsKCksQik7dGhpcy50cmVlPUF9O0V4dC5leHRlbmQoRXh0LnRyZWUuVHJlZURyYWdab25lLEV4dC5kZC5EcmFnWm9uZSx7ZGRHcm91cDoiVHJlZUREIixvbkJlZm9yZURyYWc6ZnVuY3Rpb24oQSxCKXt2YXIgQz1BLm5vZGU7cmV0dXJuIEMmJkMuZHJhZ2dhYmxlJiYhQy5kaXNhYmxlZH0sb25Jbml0RHJhZzpmdW5jdGlvbihCKXt2YXIgQT10aGlzLmRyYWdEYXRhO3RoaXMudHJlZS5nZXRTZWxlY3Rpb25Nb2RlbCgpLnNlbGVjdChBLm5vZGUpO3RoaXMudHJlZS5ldmVudE1vZGVsLmRpc2FibGUoKTt0aGlzLnByb3h5LnVwZGF0ZSgiIik7QS5ub2RlLnVpLmFwcGVuZERER2hvc3QodGhpcy5wcm94eS5naG9zdC5kb20pO3RoaXMudHJlZS5maXJlRXZlbnQoInN0YXJ0ZHJhZyIsdGhpcy50cmVlLEEubm9kZSxCKX0sZ2V0UmVwYWlyWFk6ZnVuY3Rpb24oQixBKXtyZXR1cm4gQS5ub2RlLnVpLmdldEREUmVwYWlyWFkoKX0sb25FbmREcmFnOmZ1bmN0aW9uKEEsQil7dGhpcy50cmVlLmV2ZW50TW9kZWwuZW5hYmxlLmRlZmVyKDEwMCx0aGlzLnRyZWUuZXZlbnRNb2RlbCk7dGhpcy50cmVlLmZpcmVFdmVudCgiZW5kZHJhZyIsdGhpcy50cmVlLEEubm9kZSxCKX0sb25WYWxpZERyb3A6ZnVuY3Rpb24oQSxCLEMpe3RoaXMudHJlZS5maXJlRXZlbnQoImRyYWdkcm9wIix0aGlzLnRyZWUsdGhpcy5kcmFnRGF0YS5ub2RlLEEsQik7dGhpcy5oaWRlUHJveHkoKX0sYmVmb3JlSW52YWxpZERyb3A6ZnVuY3Rpb24oQSxDKXt2YXIgQj10aGlzLnRyZWUuZ2V0U2VsZWN0aW9uTW9kZWwoKTtCLmNsZWFyU2VsZWN0aW9ucygpO0Iuc2VsZWN0KHRoaXMuZHJhZ0RhdGEubm9kZSl9fSl9Ow0KRXh0LnRyZWUuVHJlZUVkaXRvcj1mdW5jdGlvbihBLEIpe0I9Qnx8e307dmFyIEM9Qi5ldmVudHM/QjpuZXcgRXh0LmZvcm0uVGV4dEZpZWxkKEIpO0V4dC50cmVlLlRyZWVFZGl0b3Iuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsQyk7dGhpcy50cmVlPUE7aWYoIUEucmVuZGVyZWQpe0Eub24oInJlbmRlciIsdGhpcy5pbml0RWRpdG9yLHRoaXMpfWVsc2V7dGhpcy5pbml0RWRpdG9yKEEpfX07RXh0LmV4dGVuZChFeHQudHJlZS5UcmVlRWRpdG9yLEV4dC5FZGl0b3Ise2FsaWdubWVudDoibC1sIixhdXRvU2l6ZTpmYWxzZSxoaWRlRWw6ZmFsc2UsY2xzOiJ4LXNtYWxsLWVkaXRvciB4LXRyZWUtZWRpdG9yIixzaGltOmZhbHNlLHNoYWRvdzoiZnJhbWUiLG1heFdpZHRoOjI1MCxlZGl0RGVsYXk6MzUwLGluaXRFZGl0b3I6ZnVuY3Rpb24oQSl7QS5vbigiYmVmb3JlY2xpY2siLHRoaXMuYmVmb3JlTm9kZUNsaWNrLHRoaXMpO0Eub24oImRibGNsaWNrIix0aGlzLm9uTm9kZURibENsaWNrLHRoaXMpO3RoaXMub24oImNvbXBsZXRlIix0aGlzLnVwZGF0ZU5vZGUsdGhpcyk7dGhpcy5vbigiYmVmb3Jlc3RhcnRlZGl0Iix0aGlzLmZpdFRvVHJlZSx0aGlzKTt0aGlzLm9uKCJzdGFydGVkaXQiLHRoaXMuYmluZFNjcm9sbCx0aGlzLHtkZWxheToxMH0pO3RoaXMub24oInNwZWNpYWxrZXkiLHRoaXMub25TcGVjaWFsS2V5LHRoaXMpfSxmaXRUb1RyZWU6ZnVuY3Rpb24oQixDKXt2YXIgRT10aGlzLnRyZWUuZ2V0VHJlZUVsKCkuZG9tLEQ9Qy5kb207aWYoRS5zY3JvbGxMZWZ0PkQub2Zmc2V0TGVmdCl7RS5zY3JvbGxMZWZ0PUQub2Zmc2V0TGVmdH12YXIgQT1NYXRoLm1pbih0aGlzLm1heFdpZHRoLChFLmNsaWVudFdpZHRoPjIwP0UuY2xpZW50V2lkdGg6RS5vZmZzZXRXaWR0aCktTWF0aC5tYXgoMCxELm9mZnNldExlZnQtRS5zY3JvbGxMZWZ0KS01KTt0aGlzLnNldFNpemUoQSwiIil9LHRyaWdnZXJFZGl0OmZ1bmN0aW9uKEEsQil7dGhpcy5jb21wbGV0ZUVkaXQoKTtpZihBLmF0dHJpYnV0ZXMuZWRpdGFibGUhPT1mYWxzZSl7dGhpcy5lZGl0Tm9kZT1BO3RoaXMuYXV0b0VkaXRUaW1lcj10aGlzLnN0YXJ0RWRpdC5kZWZlcih0aGlzLmVkaXREZWxheSx0aGlzLFtBLnVpLnRleHROb2RlLEEudGV4dF0pO3JldHVybiBmYWxzZX19LGJpbmRTY3JvbGw6ZnVuY3Rpb24oKXt0aGlzLnRyZWUuZ2V0VHJlZUVsKCkub24oInNjcm9sbCIsdGhpcy5jYW5jZWxFZGl0LHRoaXMpfSxiZWZvcmVOb2RlQ2xpY2s6ZnVuY3Rpb24oQSxCKXtjbGVhclRpbWVvdXQodGhpcy5hdXRvRWRpdFRpbWVyKTtpZih0aGlzLnRyZWUuZ2V0U2VsZWN0aW9uTW9kZWwoKS5pc1NlbGVjdGVkKEEpKXtCLnN0b3BFdmVudCgpO3JldHVybiB0aGlzLnRyaWdnZXJFZGl0KEEpfX0sb25Ob2RlRGJsQ2xpY2s6ZnVuY3Rpb24oQSxCKXtjbGVhclRpbWVvdXQodGhpcy5hdXRvRWRpdFRpbWVyKX0sdXBkYXRlTm9kZTpmdW5jdGlvbihBLEIpe3RoaXMudHJlZS5nZXRUcmVlRWwoKS51bigic2Nyb2xsIix0aGlzLmNhbmNlbEVkaXQsdGhpcyk7dGhpcy5lZGl0Tm9kZS5zZXRUZXh0KEIpfSxvbkhpZGU6ZnVuY3Rpb24oKXtFeHQudHJlZS5UcmVlRWRpdG9yLnN1cGVyY2xhc3Mub25IaWRlLmNhbGwodGhpcyk7aWYodGhpcy5lZGl0Tm9kZSl7dGhpcy5lZGl0Tm9kZS51aS5mb2N1cy5kZWZlcig1MCx0aGlzLmVkaXROb2RlLnVpKX19LG9uU3BlY2lhbEtleTpmdW5jdGlvbihDLEIpe3ZhciBBPUIuZ2V0S2V5KCk7aWYoQT09Qi5FU0Mpe0Iuc3RvcEV2ZW50KCk7dGhpcy5jYW5jZWxFZGl0KCl9ZWxzZXtpZihBPT1CLkVOVEVSJiYhQi5oYXNNb2RpZmllcigpKXtCLnN0b3BFdmVudCgpO3RoaXMuY29tcGxldGVFZGl0KCl9fX19KTsNCkV4dC5tZW51Lk1lbnU9ZnVuY3Rpb24oQSl7aWYoRXh0LmlzQXJyYXkoQSkpe0E9e2l0ZW1zOkF9fUV4dC5hcHBseSh0aGlzLEEpO3RoaXMuaWQ9dGhpcy5pZHx8RXh0LmlkKCk7dGhpcy5hZGRFdmVudHMoImJlZm9yZXNob3ciLCJiZWZvcmVoaWRlIiwic2hvdyIsImhpZGUiLCJjbGljayIsIm1vdXNlb3ZlciIsIm1vdXNlb3V0IiwiaXRlbWNsaWNrIik7RXh0Lm1lbnUuTWVudU1nci5yZWdpc3Rlcih0aGlzKTtFeHQubWVudS5NZW51LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgQj10aGlzLml0ZW1zO3RoaXMuaXRlbXM9bmV3IEV4dC51dGlsLk1peGVkQ29sbGVjdGlvbigpO2lmKEIpe3RoaXMuYWRkLmFwcGx5KHRoaXMsQil9fTtFeHQuZXh0ZW5kKEV4dC5tZW51Lk1lbnUsRXh0LnV0aWwuT2JzZXJ2YWJsZSx7bWluV2lkdGg6MTIwLHNoYWRvdzoic2lkZXMiLHN1Yk1lbnVBbGlnbjoidGwtdHI/IixkZWZhdWx0QWxpZ246InRsLWJsPyIsYWxsb3dPdGhlck1lbnVzOmZhbHNlLGhpZGRlbjp0cnVlLGNyZWF0ZUVsOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBFeHQuTGF5ZXIoe2NsczoieC1tZW51IixzaGFkb3c6dGhpcy5zaGFkb3csY29uc3RyYWluOmZhbHNlLHBhcmVudEVsOnRoaXMucGFyZW50RWx8fGRvY3VtZW50LmJvZHksemluZGV4OjE1MDAwfSl9LHJlbmRlcjpmdW5jdGlvbigpe2lmKHRoaXMuZWwpe3JldHVybiB9dmFyIEI9dGhpcy5lbD10aGlzLmNyZWF0ZUVsKCk7aWYoIXRoaXMua2V5TmF2KXt0aGlzLmtleU5hdj1uZXcgRXh0Lm1lbnUuTWVudU5hdih0aGlzKX1pZih0aGlzLnBsYWluKXtCLmFkZENsYXNzKCJ4LW1lbnUtcGxhaW4iKX1pZih0aGlzLmNscyl7Qi5hZGRDbGFzcyh0aGlzLmNscyl9dGhpcy5mb2N1c0VsPUIuY3JlYXRlQ2hpbGQoe3RhZzoiYSIsY2xzOiJ4LW1lbnUtZm9jdXMiLGhyZWY6IiMiLG9uY2xpY2s6InJldHVybiBmYWxzZTsiLHRhYkluZGV4OiItMSJ9KTt2YXIgQT1CLmNyZWF0ZUNoaWxkKHt0YWc6InVsIixjbHM6IngtbWVudS1saXN0In0pO0Eub24oImNsaWNrIix0aGlzLm9uQ2xpY2ssdGhpcyk7QS5vbigibW91c2VvdmVyIix0aGlzLm9uTW91c2VPdmVyLHRoaXMpO0Eub24oIm1vdXNlb3V0Iix0aGlzLm9uTW91c2VPdXQsdGhpcyk7dGhpcy5pdGVtcy5lYWNoKGZ1bmN0aW9uKEQpe3ZhciBDPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpIik7Qy5jbGFzc05hbWU9IngtbWVudS1saXN0LWl0ZW0iO0EuZG9tLmFwcGVuZENoaWxkKEMpO0QucmVuZGVyKEMsdGhpcyl9LHRoaXMpO3RoaXMudWw9QTt0aGlzLmF1dG9XaWR0aCgpfSxhdXRvV2lkdGg6ZnVuY3Rpb24oKXt2YXIgRD10aGlzLmVsLEM9dGhpcy51bDtpZighRCl7cmV0dXJuIH12YXIgQT10aGlzLndpZHRoO2lmKEEpe0Quc2V0V2lkdGgoQSl9ZWxzZXtpZihFeHQuaXNJRSl7RC5zZXRXaWR0aCh0aGlzLm1pbldpZHRoKTt2YXIgQj1ELmRvbS5vZmZzZXRXaWR0aDtELnNldFdpZHRoKEMuZ2V0V2lkdGgoKStELmdldEZyYW1lV2lkdGgoImxyIikpfX19LGRlbGF5QXV0b1dpZHRoOmZ1bmN0aW9uKCl7aWYodGhpcy5lbCl7aWYoIXRoaXMuYXdUYXNrKXt0aGlzLmF3VGFzaz1uZXcgRXh0LnV0aWwuRGVsYXllZFRhc2sodGhpcy5hdXRvV2lkdGgsdGhpcyl9dGhpcy5hd1Rhc2suZGVsYXkoMjApfX0sZmluZFRhcmdldEl0ZW06ZnVuY3Rpb24oQil7dmFyIEE9Qi5nZXRUYXJnZXQoIi54LW1lbnUtbGlzdC1pdGVtIix0aGlzLnVsLHRydWUpO2lmKEEmJkEubWVudUl0ZW1JZCl7cmV0dXJuIHRoaXMuaXRlbXMuZ2V0KEEubWVudUl0ZW1JZCl9fSxvbkNsaWNrOmZ1bmN0aW9uKEIpe3ZhciBBO2lmKEE9dGhpcy5maW5kVGFyZ2V0SXRlbShCKSl7QS5vbkNsaWNrKEIpO3RoaXMuZmlyZUV2ZW50KCJjbGljayIsdGhpcyxBLEIpfX0sc2V0QWN0aXZlSXRlbTpmdW5jdGlvbihBLEIpe2lmKEEhPXRoaXMuYWN0aXZlSXRlbSl7aWYodGhpcy5hY3RpdmVJdGVtKXt0aGlzLmFjdGl2ZUl0ZW0uZGVhY3RpdmF0ZSgpfXRoaXMuYWN0aXZlSXRlbT1BO0EuYWN0aXZhdGUoQil9ZWxzZXtpZihCKXtBLmV4cGFuZE1lbnUoKX19fSx0cnlBY3RpdmF0ZTpmdW5jdGlvbihGLEUpe3ZhciBCPXRoaXMuaXRlbXM7Zm9yKHZhciBDPUYsQT1CLmxlbmd0aDtDPj0wJiZDPEE7Qys9RSl7dmFyIEQ9Qi5nZXQoQyk7aWYoIUQuZGlzYWJsZWQmJkQuY2FuQWN0aXZhdGUpe3RoaXMuc2V0QWN0aXZlSXRlbShELGZhbHNlKTtyZXR1cm4gRH19cmV0dXJuIGZhbHNlfSxvbk1vdXNlT3ZlcjpmdW5jdGlvbihCKXt2YXIgQTtpZihBPXRoaXMuZmluZFRhcmdldEl0ZW0oQikpe2lmKEEuY2FuQWN0aXZhdGUmJiFBLmRpc2FibGVkKXt0aGlzLnNldEFjdGl2ZUl0ZW0oQSx0cnVlKX19dGhpcy5maXJlRXZlbnQoIm1vdXNlb3ZlciIsdGhpcyxCLEEpfSxvbk1vdXNlT3V0OmZ1bmN0aW9uKEIpe3ZhciBBO2lmKEE9dGhpcy5maW5kVGFyZ2V0SXRlbShCKSl7aWYoQT09dGhpcy5hY3RpdmVJdGVtJiZBLnNob3VsZERlYWN0aXZhdGUoQikpe3RoaXMuYWN0aXZlSXRlbS5kZWFjdGl2YXRlKCk7ZGVsZXRlIHRoaXMuYWN0aXZlSXRlbX19dGhpcy5maXJlRXZlbnQoIm1vdXNlb3V0Iix0aGlzLEIsQSl9LGlzVmlzaWJsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsJiYhdGhpcy5oaWRkZW59LHNob3c6ZnVuY3Rpb24oQixDLEEpe3RoaXMucGFyZW50TWVudT1BO2lmKCF0aGlzLmVsKXt0aGlzLnJlbmRlcigpfXRoaXMuZmlyZUV2ZW50KCJiZWZvcmVzaG93Iix0aGlzKTt0aGlzLnNob3dBdCh0aGlzLmVsLmdldEFsaWduVG9YWShCLEN8fHRoaXMuZGVmYXVsdEFsaWduKSxBLGZhbHNlKX0sc2hvd0F0OmZ1bmN0aW9uKEMsQixBKXt0aGlzLnBhcmVudE1lbnU9QjtpZighdGhpcy5lbCl7dGhpcy5yZW5kZXIoKX1pZihBIT09ZmFsc2Upe3RoaXMuZmlyZUV2ZW50KCJiZWZvcmVzaG93Iix0aGlzKTtDPXRoaXMuZWwuYWRqdXN0Rm9yQ29uc3RyYWludHMoQyl9dGhpcy5lbC5zZXRYWShDKTt0aGlzLmVsLnNob3coKTt0aGlzLmhpZGRlbj1mYWxzZTt0aGlzLmZvY3VzKCk7dGhpcy5maXJlRXZlbnQoInNob3ciLHRoaXMpfSxmb2N1czpmdW5jdGlvbigpe2lmKCF0aGlzLmhpZGRlbil7dGhpcy5kb0ZvY3VzLmRlZmVyKDUwLHRoaXMpfX0sZG9Gb2N1czpmdW5jdGlvbigpe2lmKCF0aGlzLmhpZGRlbil7dGhpcy5mb2N1c0VsLmZvY3VzKCl9fSxoaWRlOmZ1bmN0aW9uKEEpe2lmKHRoaXMuZWwmJnRoaXMuaXNWaXNpYmxlKCkpe3RoaXMuZmlyZUV2ZW50KCJiZWZvcmVoaWRlIix0aGlzKTtpZih0aGlzLmFjdGl2ZUl0ZW0pe3RoaXMuYWN0aXZlSXRlbS5kZWFjdGl2YXRlKCk7dGhpcy5hY3RpdmVJdGVtPW51bGx9dGhpcy5lbC5oaWRlKCk7dGhpcy5oaWRkZW49dHJ1ZTt0aGlzLmZpcmVFdmVudCgiaGlkZSIsdGhpcyl9aWYoQT09PXRydWUmJnRoaXMucGFyZW50TWVudSl7dGhpcy5wYXJlbnRNZW51LmhpZGUodHJ1ZSl9fSxhZGQ6ZnVuY3Rpb24oKXt2YXIgQj1hcmd1bWVudHMsQT1CLmxlbmd0aCxFO2Zvcih2YXIgQz0wO0M8QTtDKyspe3ZhciBEPUJbQ107aWYoRC5yZW5kZXIpe0U9dGhpcy5hZGRJdGVtKEQpfWVsc2V7aWYodHlwZW9mIEQ9PSJzdHJpbmciKXtpZihEPT0ic2VwYXJhdG9yInx8RD09Ii0iKXtFPXRoaXMuYWRkU2VwYXJhdG9yKCl9ZWxzZXtFPXRoaXMuYWRkVGV4dChEKX19ZWxzZXtpZihELnRhZ05hbWV8fEQuZWwpe0U9dGhpcy5hZGRFbGVtZW50KEQpfWVsc2V7aWYodHlwZW9mIEQ9PSJvYmplY3QiKXtFeHQuYXBwbHlJZihELHRoaXMuZGVmYXVsdHMpO0U9dGhpcy5hZGRNZW51SXRlbShEKX19fX19cmV0dXJuIEV9LGdldEVsOmZ1bmN0aW9uKCl7aWYoIXRoaXMuZWwpe3RoaXMucmVuZGVyKCl9cmV0dXJuIHRoaXMuZWx9LGFkZFNlcGFyYXRvcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFkZEl0ZW0obmV3IEV4dC5tZW51LlNlcGFyYXRvcigpKX0sYWRkRWxlbWVudDpmdW5jdGlvbihBKXtyZXR1cm4gdGhpcy5hZGRJdGVtKG5ldyBFeHQubWVudS5CYXNlSXRlbShBKSl9LGFkZEl0ZW06ZnVuY3Rpb24oQil7dGhpcy5pdGVtcy5hZGQoQik7aWYodGhpcy51bCl7dmFyIEE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGkiKTtBLmNsYXNzTmFtZT0ieC1tZW51LWxpc3QtaXRlbSI7dGhpcy51bC5kb20uYXBwZW5kQ2hpbGQoQSk7Qi5yZW5kZXIoQSx0aGlzKTt0aGlzLmRlbGF5QXV0b1dpZHRoKCl9cmV0dXJuIEJ9LGFkZE1lbnVJdGVtOmZ1bmN0aW9uKEEpe2lmKCEoQSBpbnN0YW5jZW9mIEV4dC5tZW51Lkl0ZW0pKXtpZih0eXBlb2YgQS5jaGVja2VkPT0iYm9vbGVhbiIpe0E9bmV3IEV4dC5tZW51LkNoZWNrSXRlbShBKX1lbHNle0E9bmV3IEV4dC5tZW51Lkl0ZW0oQSl9fXJldHVybiB0aGlzLmFkZEl0ZW0oQSl9LGFkZFRleHQ6ZnVuY3Rpb24oQSl7cmV0dXJuIHRoaXMuYWRkSXRlbShuZXcgRXh0Lm1lbnUuVGV4dEl0ZW0oQSkpfSxpbnNlcnQ6ZnVuY3Rpb24oQixDKXt0aGlzLml0ZW1zLmluc2VydChCLEMpO2lmKHRoaXMudWwpe3ZhciBBPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpIik7QS5jbGFzc05hbWU9IngtbWVudS1saXN0LWl0ZW0iO3RoaXMudWwuZG9tLmluc2VydEJlZm9yZShBLHRoaXMudWwuZG9tLmNoaWxkTm9kZXNbQl0pO0MucmVuZGVyKEEsdGhpcyk7dGhpcy5kZWxheUF1dG9XaWR0aCgpfXJldHVybiBDfSxyZW1vdmU6ZnVuY3Rpb24oQSl7dGhpcy5pdGVtcy5yZW1vdmVLZXkoQS5pZCk7QS5kZXN0cm95KCl9LHJlbW92ZUFsbDpmdW5jdGlvbigpe3ZhciBBO3doaWxlKEE9dGhpcy5pdGVtcy5maXJzdCgpKXt0aGlzLnJlbW92ZShBKX19LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmJlZm9yZURlc3Ryb3koKTtFeHQubWVudS5NZW51TWdyLnVucmVnaXN0ZXIodGhpcyk7aWYodGhpcy5rZXlOYXYpe3RoaXMua2V5TmF2LmRpc2FibGUoKX10aGlzLnJlbW92ZUFsbCgpO2lmKHRoaXMudWwpe3RoaXMudWwucmVtb3ZlQWxsTGlzdGVuZXJzKCl9aWYodGhpcy5lbCl7dGhpcy5lbC5kZXN0cm95KCl9fSxiZWZvcmVEZXN0cm95OkV4dC5lbXB0eUZufSk7RXh0Lm1lbnUuTWVudU5hdj1mdW5jdGlvbihBKXtFeHQubWVudS5NZW51TmF2LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLEEuZWwpO3RoaXMuc2NvcGU9dGhpcy5tZW51PUF9O0V4dC5leHRlbmQoRXh0Lm1lbnUuTWVudU5hdixFeHQuS2V5TmF2LHtkb1JlbGF5OmZ1bmN0aW9uKEMsQil7dmFyIEE9Qy5nZXRLZXkoKTtpZighdGhpcy5tZW51LmFjdGl2ZUl0ZW0mJkMuaXNOYXZLZXlQcmVzcygpJiZBIT1DLlNQQUNFJiZBIT1DLlJFVFVSTil7dGhpcy5tZW51LnRyeUFjdGl2YXRlKDAsMSk7cmV0dXJuIGZhbHNlfXJldHVybiBCLmNhbGwodGhpcy5zY29wZXx8dGhpcyxDLHRoaXMubWVudSl9LHVwOmZ1bmN0aW9uKEIsQSl7aWYoIUEudHJ5QWN0aXZhdGUoQS5pdGVtcy5pbmRleE9mKEEuYWN0aXZlSXRlbSktMSwtMSkpe0EudHJ5QWN0aXZhdGUoQS5pdGVtcy5sZW5ndGgtMSwtMSl9fSxkb3duOmZ1bmN0aW9uKEIsQSl7aWYoIUEudHJ5QWN0aXZhdGUoQS5pdGVtcy5pbmRleE9mKEEuYWN0aXZlSXRlbSkrMSwxKSl7QS50cnlBY3RpdmF0ZSgwLDEpfX0scmlnaHQ6ZnVuY3Rpb24oQixBKXtpZihBLmFjdGl2ZUl0ZW0pe0EuYWN0aXZlSXRlbS5leHBhbmRNZW51KHRydWUpfX0sbGVmdDpmdW5jdGlvbihCLEEpe0EuaGlkZSgpO2lmKEEucGFyZW50TWVudSYmQS5wYXJlbnRNZW51LmFjdGl2ZUl0ZW0pe0EucGFyZW50TWVudS5hY3RpdmVJdGVtLmFjdGl2YXRlKCl9fSxlbnRlcjpmdW5jdGlvbihCLEEpe2lmKEEuYWN0aXZlSXRlbSl7Qi5zdG9wUHJvcGFnYXRpb24oKTtBLmFjdGl2ZUl0ZW0ub25DbGljayhCKTtBLmZpcmVFdmVudCgiY2xpY2siLHRoaXMsQS5hY3RpdmVJdGVtKTtyZXR1cm4gdHJ1ZX19fSk7DQpFeHQubWVudS5NZW51TWdyPWZ1bmN0aW9uKCl7dmFyIEYsRCxDPXt9LEE9ZmFsc2UsSz1uZXcgRGF0ZSgpO2Z1bmN0aW9uIE0oKXtGPXt9O0Q9bmV3IEV4dC51dGlsLk1peGVkQ29sbGVjdGlvbigpO0V4dC5nZXREb2MoKS5hZGRLZXlMaXN0ZW5lcigyNyxmdW5jdGlvbigpe2lmKEQubGVuZ3RoPjApe0goKX19KX1mdW5jdGlvbiBIKCl7aWYoRCYmRC5sZW5ndGg+MCl7dmFyIE49RC5jbG9uZSgpO04uZWFjaChmdW5jdGlvbihPKXtPLmhpZGUoKX0pfX1mdW5jdGlvbiBFKE4pe0QucmVtb3ZlKE4pO2lmKEQubGVuZ3RoPDEpe0V4dC5nZXREb2MoKS51bigibW91c2Vkb3duIixMKTtBPWZhbHNlfX1mdW5jdGlvbiBKKE4pe3ZhciBPPUQubGFzdCgpO0s9bmV3IERhdGUoKTtELmFkZChOKTtpZighQSl7RXh0LmdldERvYygpLm9uKCJtb3VzZWRvd24iLEwpO0E9dHJ1ZX1pZihOLnBhcmVudE1lbnUpe04uZ2V0RWwoKS5zZXRaSW5kZXgocGFyc2VJbnQoTi5wYXJlbnRNZW51LmdldEVsKCkuZ2V0U3R5bGUoInotaW5kZXgiKSwxMCkrMyk7Ti5wYXJlbnRNZW51LmFjdGl2ZUNoaWxkPU59ZWxzZXtpZihPJiZPLmlzVmlzaWJsZSgpKXtOLmdldEVsKCkuc2V0WkluZGV4KHBhcnNlSW50KE8uZ2V0RWwoKS5nZXRTdHlsZSgiei1pbmRleCIpLDEwKSszKX19fWZ1bmN0aW9uIEIoTil7aWYoTi5hY3RpdmVDaGlsZCl7Ti5hY3RpdmVDaGlsZC5oaWRlKCl9aWYoTi5hdXRvSGlkZVRpbWVyKXtjbGVhclRpbWVvdXQoTi5hdXRvSGlkZVRpbWVyKTtkZWxldGUgTi5hdXRvSGlkZVRpbWVyfX1mdW5jdGlvbiBHKE4pe3ZhciBPPU4ucGFyZW50TWVudTtpZighTyYmIU4uYWxsb3dPdGhlck1lbnVzKXtIKCl9ZWxzZXtpZihPJiZPLmFjdGl2ZUNoaWxkKXtPLmFjdGl2ZUNoaWxkLmhpZGUoKX19fWZ1bmN0aW9uIEwoTil7aWYoSy5nZXRFbGFwc2VkKCk+NTAmJkQubGVuZ3RoPjAmJiFOLmdldFRhcmdldCgiLngtbWVudSIpKXtIKCl9fWZ1bmN0aW9uIEkoTyxSKXtpZihSKXt2YXIgUT1DW08uZ3JvdXBdO2Zvcih2YXIgUD0wLE49US5sZW5ndGg7UDxOO1ArKyl7aWYoUVtQXSE9Tyl7UVtQXS5zZXRDaGVja2VkKGZhbHNlKX19fX1yZXR1cm57aGlkZUFsbDpmdW5jdGlvbigpe0goKX0scmVnaXN0ZXI6ZnVuY3Rpb24oTyl7aWYoIUYpe00oKX1GW08uaWRdPU87Ty5vbigiYmVmb3JlaGlkZSIsQik7Ty5vbigiaGlkZSIsRSk7Ty5vbigiYmVmb3Jlc2hvdyIsRyk7Ty5vbigic2hvdyIsSik7dmFyIE49Ty5ncm91cDtpZihOJiZPLmV2ZW50c1siY2hlY2tjaGFuZ2UiXSl7aWYoIUNbTl0pe0NbTl09W119Q1tOXS5wdXNoKE8pO08ub24oImNoZWNrY2hhbmdlIixvbkNoZWNrKX19LGdldDpmdW5jdGlvbihOKXtpZih0eXBlb2YgTj09InN0cmluZyIpe2lmKCFGKXtyZXR1cm4gbnVsbH1yZXR1cm4gRltOXX1lbHNle2lmKE4uZXZlbnRzKXtyZXR1cm4gTn1lbHNle2lmKHR5cGVvZiBOLmxlbmd0aD09Im51bWJlciIpe3JldHVybiBuZXcgRXh0Lm1lbnUuTWVudSh7aXRlbXM6Tn0pfWVsc2V7cmV0dXJuIG5ldyBFeHQubWVudS5NZW51KE4pfX19fSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKE8pe2RlbGV0ZSBGW08uaWRdO08udW4oImJlZm9yZWhpZGUiLEIpO08udW4oImhpZGUiLEUpO08udW4oImJlZm9yZXNob3ciLEcpO08udW4oInNob3ciLEopO3ZhciBOPU8uZ3JvdXA7aWYoTiYmTy5ldmVudHNbImNoZWNrY2hhbmdlIl0pe0NbTl0ucmVtb3ZlKE8pO08udW4oImNoZWNrY2hhbmdlIixvbkNoZWNrKX19LHJlZ2lzdGVyQ2hlY2thYmxlOmZ1bmN0aW9uKE4pe3ZhciBPPU4uZ3JvdXA7aWYoTyl7aWYoIUNbT10pe0NbT109W119Q1tPXS5wdXNoKE4pO04ub24oImJlZm9yZWNoZWNrY2hhbmdlIixJKX19LHVucmVnaXN0ZXJDaGVja2FibGU6ZnVuY3Rpb24oTil7dmFyIE89Ti5ncm91cDtpZihPKXtDW09dLnJlbW92ZShOKTtOLnVuKCJiZWZvcmVjaGVja2NoYW5nZSIsSSl9fSxnZXRDaGVja2VkSXRlbTpmdW5jdGlvbihQKXt2YXIgUT1DW1BdO2lmKFEpe2Zvcih2YXIgTz0wLE49US5sZW5ndGg7TzxOO08rKyl7aWYoUVtPXS5jaGVja2VkKXtyZXR1cm4gUVtPXX19fXJldHVybiBudWxsfSxzZXRDaGVja2VkSXRlbTpmdW5jdGlvbihQLFIpe3ZhciBRPUNbUF07aWYoUSl7Zm9yKHZhciBPPTAsTj1RLmxlbmd0aDtPPE47TysrKXtpZihRW09dLmlkPT1SKXtRW09dLnNldENoZWNrZWQodHJ1ZSl9fX1yZXR1cm4gbnVsbH19fSgpOw0KRXh0Lm1lbnUuQmFzZUl0ZW09ZnVuY3Rpb24oQSl7RXh0Lm1lbnUuQmFzZUl0ZW0uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsQSk7dGhpcy5hZGRFdmVudHMoImNsaWNrIiwiYWN0aXZhdGUiLCJkZWFjdGl2YXRlIik7aWYodGhpcy5oYW5kbGVyKXt0aGlzLm9uKCJjbGljayIsdGhpcy5oYW5kbGVyLHRoaXMuc2NvcGUpfX07RXh0LmV4dGVuZChFeHQubWVudS5CYXNlSXRlbSxFeHQuQ29tcG9uZW50LHtjYW5BY3RpdmF0ZTpmYWxzZSxhY3RpdmVDbGFzczoieC1tZW51LWl0ZW0tYWN0aXZlIixoaWRlT25DbGljazp0cnVlLGhpZGVEZWxheToxMDAsY3R5cGU6IkV4dC5tZW51LkJhc2VJdGVtIixhY3Rpb25Nb2RlOiJjb250YWluZXIiLHJlbmRlcjpmdW5jdGlvbihBLEIpe3RoaXMucGFyZW50TWVudT1CO0V4dC5tZW51LkJhc2VJdGVtLnN1cGVyY2xhc3MucmVuZGVyLmNhbGwodGhpcyxBKTt0aGlzLmNvbnRhaW5lci5tZW51SXRlbUlkPXRoaXMuaWR9LG9uUmVuZGVyOmZ1bmN0aW9uKEIsQSl7dGhpcy5lbD1FeHQuZ2V0KHRoaXMuZWwpO0IuZG9tLmFwcGVuZENoaWxkKHRoaXMuZWwuZG9tKX0sc2V0SGFuZGxlcjpmdW5jdGlvbihCLEEpe2lmKHRoaXMuaGFuZGxlcil7dGhpcy51bigiY2xpY2siLHRoaXMuaGFuZGxlcix0aGlzLnNjb3BlKX10aGlzLm9uKCJjbGljayIsdGhpcy5oYW5kbGVyPUIsdGhpcy5zY29wZT1BKX0sb25DbGljazpmdW5jdGlvbihBKXtpZighdGhpcy5kaXNhYmxlZCYmdGhpcy5maXJlRXZlbnQoImNsaWNrIix0aGlzLEEpIT09ZmFsc2UmJnRoaXMucGFyZW50TWVudS5maXJlRXZlbnQoIml0ZW1jbGljayIsdGhpcyxBKSE9PWZhbHNlKXt0aGlzLmhhbmRsZUNsaWNrKEEpfWVsc2V7QS5zdG9wRXZlbnQoKX19LGFjdGl2YXRlOmZ1bmN0aW9uKCl7aWYodGhpcy5kaXNhYmxlZCl7cmV0dXJuIGZhbHNlfXZhciBBPXRoaXMuY29udGFpbmVyO0EuYWRkQ2xhc3ModGhpcy5hY3RpdmVDbGFzcyk7dGhpcy5yZWdpb249QS5nZXRSZWdpb24oKS5hZGp1c3QoMiwyLC0yLC0yKTt0aGlzLmZpcmVFdmVudCgiYWN0aXZhdGUiLHRoaXMpO3JldHVybiB0cnVlfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dGhpcy5jb250YWluZXIucmVtb3ZlQ2xhc3ModGhpcy5hY3RpdmVDbGFzcyk7dGhpcy5maXJlRXZlbnQoImRlYWN0aXZhdGUiLHRoaXMpfSxzaG91bGREZWFjdGl2YXRlOmZ1bmN0aW9uKEEpe3JldHVybiAhdGhpcy5yZWdpb258fCF0aGlzLnJlZ2lvbi5jb250YWlucyhBLmdldFBvaW50KCkpfSxoYW5kbGVDbGljazpmdW5jdGlvbihBKXtpZih0aGlzLmhpZGVPbkNsaWNrKXt0aGlzLnBhcmVudE1lbnUuaGlkZS5kZWZlcih0aGlzLmhpZGVEZWxheSx0aGlzLnBhcmVudE1lbnUsW3RydWVdKX19LGV4cGFuZE1lbnU6ZnVuY3Rpb24oQSl7fSxoaWRlTWVudTpmdW5jdGlvbigpe319KTsNCkV4dC5tZW51LlRleHRJdGVtPWZ1bmN0aW9uKEEpe3RoaXMudGV4dD1BO0V4dC5tZW51LlRleHRJdGVtLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKX07RXh0LmV4dGVuZChFeHQubWVudS5UZXh0SXRlbSxFeHQubWVudS5CYXNlSXRlbSx7aGlkZU9uQ2xpY2s6ZmFsc2UsaXRlbUNsczoieC1tZW51LXRleHQiLG9uUmVuZGVyOmZ1bmN0aW9uKCl7dmFyIEE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpO0EuY2xhc3NOYW1lPXRoaXMuaXRlbUNscztBLmlubmVySFRNTD10aGlzLnRleHQ7dGhpcy5lbD1BO0V4dC5tZW51LlRleHRJdGVtLnN1cGVyY2xhc3Mub25SZW5kZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pOw0KRXh0Lm1lbnUuU2VwYXJhdG9yPWZ1bmN0aW9uKEEpe0V4dC5tZW51LlNlcGFyYXRvci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxBKX07RXh0LmV4dGVuZChFeHQubWVudS5TZXBhcmF0b3IsRXh0Lm1lbnUuQmFzZUl0ZW0se2l0ZW1DbHM6IngtbWVudS1zZXAiLGhpZGVPbkNsaWNrOmZhbHNlLG9uUmVuZGVyOmZ1bmN0aW9uKEEpe3ZhciBCPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTtCLmNsYXNzTmFtZT10aGlzLml0ZW1DbHM7Qi5pbm5lckhUTUw9IiYjMTYwOyI7dGhpcy5lbD1CO0EuYWRkQ2xhc3MoIngtbWVudS1zZXAtbGkiKTtFeHQubWVudS5TZXBhcmF0b3Iuc3VwZXJjbGFzcy5vblJlbmRlci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSk7DQpFeHQubWVudS5JdGVtPWZ1bmN0aW9uKEEpe0V4dC5tZW51Lkl0ZW0uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsQSk7aWYodGhpcy5tZW51KXt0aGlzLm1lbnU9RXh0Lm1lbnUuTWVudU1nci5nZXQodGhpcy5tZW51KX19O0V4dC5leHRlbmQoRXh0Lm1lbnUuSXRlbSxFeHQubWVudS5CYXNlSXRlbSx7aXRlbUNsczoieC1tZW51LWl0ZW0iLGNhbkFjdGl2YXRlOnRydWUsc2hvd0RlbGF5OjIwMCxoaWRlRGVsYXk6MjAwLGN0eXBlOiJFeHQubWVudS5JdGVtIixvblJlbmRlcjpmdW5jdGlvbihCLEEpe3ZhciBDPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTtDLmhpZGVGb2N1cz10cnVlO0MudW5zZWxlY3RhYmxlPSJvbiI7Qy5ocmVmPXRoaXMuaHJlZnx8IiMiO2lmKHRoaXMuaHJlZlRhcmdldCl7Qy50YXJnZXQ9dGhpcy5ocmVmVGFyZ2V0fUMuY2xhc3NOYW1lPXRoaXMuaXRlbUNscysodGhpcy5tZW51PyIgeC1tZW51LWl0ZW0tYXJyb3ciOiIiKSsodGhpcy5jbHM/IiAiK3RoaXMuY2xzOiIiKTtDLmlubmVySFRNTD1TdHJpbmcuZm9ybWF0KCI8aW1nIHNyYz1cInswfVwiIGNsYXNzPVwieC1tZW51LWl0ZW0taWNvbiB7Mn1cIiAvPnsxfSIsdGhpcy5pY29ufHxFeHQuQkxBTktfSU1BR0VfVVJMLHRoaXMuaXRlbVRleHR8fHRoaXMudGV4dCx0aGlzLmljb25DbHN8fCIiKTt0aGlzLmVsPUM7RXh0Lm1lbnUuSXRlbS5zdXBlcmNsYXNzLm9uUmVuZGVyLmNhbGwodGhpcyxCLEEpfSxzZXRUZXh0OmZ1bmN0aW9uKEEpe3RoaXMudGV4dD1BO2lmKHRoaXMucmVuZGVyZWQpe3RoaXMuZWwudXBkYXRlKFN0cmluZy5mb3JtYXQoIjxpbWcgc3JjPVwiezB9XCIgY2xhc3M9XCJ4LW1lbnUtaXRlbS1pY29uIHsyfVwiPnsxfSIsdGhpcy5pY29ufHxFeHQuQkxBTktfSU1BR0VfVVJMLHRoaXMudGV4dCx0aGlzLmljb25DbHN8fCIiKSk7dGhpcy5wYXJlbnRNZW51LmF1dG9XaWR0aCgpfX0sc2V0SWNvbkNsYXNzOmZ1bmN0aW9uKEEpe3ZhciBCPXRoaXMuaWNvbkNsczt0aGlzLmljb25DbHM9QTtpZih0aGlzLnJlbmRlcmVkKXt0aGlzLmVsLmNoaWxkKCJpbWcueC1tZW51LWl0ZW0taWNvbiIpLnJlcGxhY2VDbGFzcyhCLHRoaXMuaWNvbkNscyl9fSxoYW5kbGVDbGljazpmdW5jdGlvbihBKXtpZighdGhpcy5ocmVmKXtBLnN0b3BFdmVudCgpfUV4dC5tZW51Lkl0ZW0uc3VwZXJjbGFzcy5oYW5kbGVDbGljay5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGFjdGl2YXRlOmZ1bmN0aW9uKEEpe2lmKEV4dC5tZW51Lkl0ZW0uc3VwZXJjbGFzcy5hY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpe3RoaXMuZm9jdXMoKTtpZihBKXt0aGlzLmV4cGFuZE1lbnUoKX19cmV0dXJuIHRydWV9LHNob3VsZERlYWN0aXZhdGU6ZnVuY3Rpb24oQSl7aWYoRXh0Lm1lbnUuSXRlbS5zdXBlcmNsYXNzLnNob3VsZERlYWN0aXZhdGUuY2FsbCh0aGlzLEEpKXtpZih0aGlzLm1lbnUmJnRoaXMubWVudS5pc1Zpc2libGUoKSl7cmV0dXJuICF0aGlzLm1lbnUuZ2V0RWwoKS5nZXRSZWdpb24oKS5jb250YWlucyhBLmdldFBvaW50KCkpfXJldHVybiB0cnVlfXJldHVybiBmYWxzZX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe0V4dC5tZW51Lkl0ZW0uc3VwZXJjbGFzcy5kZWFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmhpZGVNZW51KCl9LGV4cGFuZE1lbnU6ZnVuY3Rpb24oQSl7aWYoIXRoaXMuZGlzYWJsZWQmJnRoaXMubWVudSl7Y2xlYXJUaW1lb3V0KHRoaXMuaGlkZVRpbWVyKTtkZWxldGUgdGhpcy5oaWRlVGltZXI7aWYoIXRoaXMubWVudS5pc1Zpc2libGUoKSYmIXRoaXMuc2hvd1RpbWVyKXt0aGlzLnNob3dUaW1lcj10aGlzLmRlZmVyRXhwYW5kLmRlZmVyKHRoaXMuc2hvd0RlbGF5LHRoaXMsW0FdKX1lbHNle2lmKHRoaXMubWVudS5pc1Zpc2libGUoKSYmQSl7dGhpcy5tZW51LnRyeUFjdGl2YXRlKDAsMSl9fX19LGRlZmVyRXhwYW5kOmZ1bmN0aW9uKEEpe2RlbGV0ZSB0aGlzLnNob3dUaW1lcjt0aGlzLm1lbnUuc2hvdyh0aGlzLmNvbnRhaW5lcix0aGlzLnBhcmVudE1lbnUuc3ViTWVudUFsaWdufHwidGwtdHI/Iix0aGlzLnBhcmVudE1lbnUpO2lmKEEpe3RoaXMubWVudS50cnlBY3RpdmF0ZSgwLDEpfX0saGlkZU1lbnU6ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy5zaG93VGltZXIpO2RlbGV0ZSB0aGlzLnNob3dUaW1lcjtpZighdGhpcy5oaWRlVGltZXImJnRoaXMubWVudSYmdGhpcy5tZW51LmlzVmlzaWJsZSgpKXt0aGlzLmhpZGVUaW1lcj10aGlzLmRlZmVySGlkZS5kZWZlcih0aGlzLmhpZGVEZWxheSx0aGlzKX19LGRlZmVySGlkZTpmdW5jdGlvbigpe2RlbGV0ZSB0aGlzLmhpZGVUaW1lcjt0aGlzLm1lbnUuaGlkZSgpfX0pOw0KRXh0Lm1lbnUuQ2hlY2tJdGVtPWZ1bmN0aW9uKEEpe0V4dC5tZW51LkNoZWNrSXRlbS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxBKTt0aGlzLmFkZEV2ZW50cygiYmVmb3JlY2hlY2tjaGFuZ2UiLCJjaGVja2NoYW5nZSIpO2lmKHRoaXMuY2hlY2tIYW5kbGVyKXt0aGlzLm9uKCJjaGVja2NoYW5nZSIsdGhpcy5jaGVja0hhbmRsZXIsdGhpcy5zY29wZSl9RXh0Lm1lbnUuTWVudU1nci5yZWdpc3RlckNoZWNrYWJsZSh0aGlzKX07RXh0LmV4dGVuZChFeHQubWVudS5DaGVja0l0ZW0sRXh0Lm1lbnUuSXRlbSx7aXRlbUNsczoieC1tZW51LWl0ZW0geC1tZW51LWNoZWNrLWl0ZW0iLGdyb3VwQ2xhc3M6IngtbWVudS1ncm91cC1pdGVtIixjaGVja2VkOmZhbHNlLGN0eXBlOiJFeHQubWVudS5DaGVja0l0ZW0iLG9uUmVuZGVyOmZ1bmN0aW9uKEEpe0V4dC5tZW51LkNoZWNrSXRlbS5zdXBlcmNsYXNzLm9uUmVuZGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZih0aGlzLmdyb3VwKXt0aGlzLmVsLmFkZENsYXNzKHRoaXMuZ3JvdXBDbGFzcyl9aWYodGhpcy5jaGVja2VkKXt0aGlzLmNoZWNrZWQ9ZmFsc2U7dGhpcy5zZXRDaGVja2VkKHRydWUsdHJ1ZSl9fSxkZXN0cm95OmZ1bmN0aW9uKCl7RXh0Lm1lbnUuTWVudU1nci51bnJlZ2lzdGVyQ2hlY2thYmxlKHRoaXMpO0V4dC5tZW51LkNoZWNrSXRlbS5zdXBlcmNsYXNzLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxzZXRDaGVja2VkOmZ1bmN0aW9uKEIsQSl7aWYodGhpcy5jaGVja2VkIT1CJiZ0aGlzLmZpcmVFdmVudCgiYmVmb3JlY2hlY2tjaGFuZ2UiLHRoaXMsQikhPT1mYWxzZSl7aWYodGhpcy5jb250YWluZXIpe3RoaXMuY29udGFpbmVyW0I/ImFkZENsYXNzIjoicmVtb3ZlQ2xhc3MiXSgieC1tZW51LWl0ZW0tY2hlY2tlZCIpfXRoaXMuY2hlY2tlZD1CO2lmKEEhPT10cnVlKXt0aGlzLmZpcmVFdmVudCgiY2hlY2tjaGFuZ2UiLHRoaXMsQil9fX0saGFuZGxlQ2xpY2s6ZnVuY3Rpb24oQSl7aWYoIXRoaXMuZGlzYWJsZWQmJiEodGhpcy5jaGVja2VkJiZ0aGlzLmdyb3VwKSl7dGhpcy5zZXRDaGVja2VkKCF0aGlzLmNoZWNrZWQpfUV4dC5tZW51LkNoZWNrSXRlbS5zdXBlcmNsYXNzLmhhbmRsZUNsaWNrLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KTsNCkV4dC5tZW51LkFkYXB0ZXI9ZnVuY3Rpb24oQixBKXtFeHQubWVudS5BZGFwdGVyLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLEEpO3RoaXMuY29tcG9uZW50PUJ9O0V4dC5leHRlbmQoRXh0Lm1lbnUuQWRhcHRlcixFeHQubWVudS5CYXNlSXRlbSx7Y2FuQWN0aXZhdGU6dHJ1ZSxvblJlbmRlcjpmdW5jdGlvbihCLEEpe3RoaXMuY29tcG9uZW50LnJlbmRlcihCKTt0aGlzLmVsPXRoaXMuY29tcG9uZW50LmdldEVsKCl9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7aWYodGhpcy5kaXNhYmxlZCl7cmV0dXJuIGZhbHNlfXRoaXMuY29tcG9uZW50LmZvY3VzKCk7dGhpcy5maXJlRXZlbnQoImFjdGl2YXRlIix0aGlzKTtyZXR1cm4gdHJ1ZX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe3RoaXMuZmlyZUV2ZW50KCJkZWFjdGl2YXRlIix0aGlzKX0sZGlzYWJsZTpmdW5jdGlvbigpe3RoaXMuY29tcG9uZW50LmRpc2FibGUoKTtFeHQubWVudS5BZGFwdGVyLnN1cGVyY2xhc3MuZGlzYWJsZS5jYWxsKHRoaXMpfSxlbmFibGU6ZnVuY3Rpb24oKXt0aGlzLmNvbXBvbmVudC5lbmFibGUoKTtFeHQubWVudS5BZGFwdGVyLnN1cGVyY2xhc3MuZW5hYmxlLmNhbGwodGhpcyl9fSk7DQpFeHQubWVudS5EYXRlSXRlbT1mdW5jdGlvbihBKXtFeHQubWVudS5EYXRlSXRlbS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxuZXcgRXh0LkRhdGVQaWNrZXIoQSksQSk7dGhpcy5waWNrZXI9dGhpcy5jb21wb25lbnQ7dGhpcy5hZGRFdmVudHMoInNlbGVjdCIpO3RoaXMucGlja2VyLm9uKCJyZW5kZXIiLGZ1bmN0aW9uKEIpe0IuZ2V0RWwoKS5zd2FsbG93RXZlbnQoImNsaWNrIik7Qi5jb250YWluZXIuYWRkQ2xhc3MoIngtbWVudS1kYXRlLWl0ZW0iKX0pO3RoaXMucGlja2VyLm9uKCJzZWxlY3QiLHRoaXMub25TZWxlY3QsdGhpcyl9O0V4dC5leHRlbmQoRXh0Lm1lbnUuRGF0ZUl0ZW0sRXh0Lm1lbnUuQWRhcHRlcix7b25TZWxlY3Q6ZnVuY3Rpb24oQixBKXt0aGlzLmZpcmVFdmVudCgic2VsZWN0Iix0aGlzLEEsQik7RXh0Lm1lbnUuRGF0ZUl0ZW0uc3VwZXJjbGFzcy5oYW5kbGVDbGljay5jYWxsKHRoaXMpfX0pOw0KRXh0Lm1lbnUuQ29sb3JJdGVtPWZ1bmN0aW9uKEEpe0V4dC5tZW51LkNvbG9ySXRlbS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxuZXcgRXh0LkNvbG9yUGFsZXR0ZShBKSxBKTt0aGlzLnBhbGV0dGU9dGhpcy5jb21wb25lbnQ7dGhpcy5yZWxheUV2ZW50cyh0aGlzLnBhbGV0dGUsWyJzZWxlY3QiXSk7aWYodGhpcy5zZWxlY3RIYW5kbGVyKXt0aGlzLm9uKCJzZWxlY3QiLHRoaXMuc2VsZWN0SGFuZGxlcix0aGlzLnNjb3BlKX19O0V4dC5leHRlbmQoRXh0Lm1lbnUuQ29sb3JJdGVtLEV4dC5tZW51LkFkYXB0ZXIpOw0KRXh0Lm1lbnUuRGF0ZU1lbnU9ZnVuY3Rpb24oQSl7RXh0Lm1lbnUuRGF0ZU1lbnUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsQSk7dGhpcy5wbGFpbj10cnVlO3ZhciBCPW5ldyBFeHQubWVudS5EYXRlSXRlbShBKTt0aGlzLmFkZChCKTt0aGlzLnBpY2tlcj1CLnBpY2tlcjt0aGlzLnJlbGF5RXZlbnRzKEIsWyJzZWxlY3QiXSk7dGhpcy5vbigiYmVmb3Jlc2hvdyIsZnVuY3Rpb24oKXtpZih0aGlzLnBpY2tlcil7dGhpcy5waWNrZXIuaGlkZU1vbnRoUGlja2VyKHRydWUpfX0sdGhpcyl9O0V4dC5leHRlbmQoRXh0Lm1lbnUuRGF0ZU1lbnUsRXh0Lm1lbnUuTWVudSx7Y2xzOiJ4LWRhdGUtbWVudSIsYmVmb3JlRGVzdHJveTpmdW5jdGlvbigpe3RoaXMucGlja2VyLmRlc3Ryb3koKX19KTsNCkV4dC5tZW51LkNvbG9yTWVudT1mdW5jdGlvbihBKXtFeHQubWVudS5Db2xvck1lbnUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsQSk7dGhpcy5wbGFpbj10cnVlO3ZhciBCPW5ldyBFeHQubWVudS5Db2xvckl0ZW0oQSk7dGhpcy5hZGQoQik7dGhpcy5wYWxldHRlPUIucGFsZXR0ZTt0aGlzLnJlbGF5RXZlbnRzKEIsWyJzZWxlY3QiXSl9O0V4dC5leHRlbmQoRXh0Lm1lbnUuQ29sb3JNZW51LEV4dC5tZW51Lk1lbnUpOw0KRXh0LmZvcm0uRmllbGQ9RXh0LmV4dGVuZChFeHQuQm94Q29tcG9uZW50LHtpbnZhbGlkQ2xhc3M6IngtZm9ybS1pbnZhbGlkIixpbnZhbGlkVGV4dDoiVGhlIHZhbHVlIGluIHRoaXMgZmllbGQgaXMgaW52YWxpZCIsZm9jdXNDbGFzczoieC1mb3JtLWZvY3VzIix2YWxpZGF0aW9uRXZlbnQ6ImtleXVwIix2YWxpZGF0ZU9uQmx1cjp0cnVlLHZhbGlkYXRpb25EZWxheToyNTAsZGVmYXVsdEF1dG9DcmVhdGU6e3RhZzoiaW5wdXQiLHR5cGU6InRleHQiLHNpemU6IjIwIixhdXRvY29tcGxldGU6Im9mZiJ9LGZpZWxkQ2xhc3M6IngtZm9ybS1maWVsZCIsbXNnVGFyZ2V0OiJxdGlwIixtc2dGeDoibm9ybWFsIixyZWFkT25seTpmYWxzZSxkaXNhYmxlZDpmYWxzZSxpc0Zvcm1GaWVsZDp0cnVlLGhhc0ZvY3VzOmZhbHNlLGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXtFeHQuZm9ybS5GaWVsZC5zdXBlcmNsYXNzLmluaXRDb21wb25lbnQuY2FsbCh0aGlzKTt0aGlzLmFkZEV2ZW50cygiZm9jdXMiLCJibHVyIiwic3BlY2lhbGtleSIsImNoYW5nZSIsImludmFsaWQiLCJ2YWxpZCIpfSxnZXROYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVuZGVyZWQmJnRoaXMuZWwuZG9tLm5hbWU/dGhpcy5lbC5kb20ubmFtZToodGhpcy5oaWRkZW5OYW1lfHwiIil9LG9uUmVuZGVyOmZ1bmN0aW9uKEMsQSl7RXh0LmZvcm0uRmllbGQuc3VwZXJjbGFzcy5vblJlbmRlci5jYWxsKHRoaXMsQyxBKTtpZighdGhpcy5lbCl7dmFyIEI9dGhpcy5nZXRBdXRvQ3JlYXRlKCk7aWYoIUIubmFtZSl7Qi5uYW1lPXRoaXMubmFtZXx8dGhpcy5pZH1pZih0aGlzLmlucHV0VHlwZSl7Qi50eXBlPXRoaXMuaW5wdXRUeXBlfXRoaXMuZWw9Qy5jcmVhdGVDaGlsZChCLEEpfXZhciBEPXRoaXMuZWwuZG9tLnR5cGU7aWYoRCl7aWYoRD09InBhc3N3b3JkIil7RD0idGV4dCJ9dGhpcy5lbC5hZGRDbGFzcygieC1mb3JtLSIrRCl9aWYodGhpcy5yZWFkT25seSl7dGhpcy5lbC5kb20ucmVhZE9ubHk9dHJ1ZX1pZih0aGlzLnRhYkluZGV4IT09dW5kZWZpbmVkKXt0aGlzLmVsLmRvbS5zZXRBdHRyaWJ1dGUoInRhYkluZGV4Iix0aGlzLnRhYkluZGV4KX10aGlzLmVsLmFkZENsYXNzKFt0aGlzLmZpZWxkQ2xhc3MsdGhpcy5jbHNdKTt0aGlzLmluaXRWYWx1ZSgpfSxpbml0VmFsdWU6ZnVuY3Rpb24oKXtpZih0aGlzLnZhbHVlIT09dW5kZWZpbmVkKXt0aGlzLnNldFZhbHVlKHRoaXMudmFsdWUpfWVsc2V7aWYodGhpcy5lbC5kb20udmFsdWUubGVuZ3RoPjApe3RoaXMuc2V0VmFsdWUodGhpcy5lbC5kb20udmFsdWUpfX19LGlzRGlydHk6ZnVuY3Rpb24oKXtpZih0aGlzLmRpc2FibGVkKXtyZXR1cm4gZmFsc2V9cmV0dXJuIFN0cmluZyh0aGlzLmdldFZhbHVlKCkpIT09U3RyaW5nKHRoaXMub3JpZ2luYWxWYWx1ZSl9LGFmdGVyUmVuZGVyOmZ1bmN0aW9uKCl7RXh0LmZvcm0uRmllbGQuc3VwZXJjbGFzcy5hZnRlclJlbmRlci5jYWxsKHRoaXMpO3RoaXMuaW5pdEV2ZW50cygpfSxmaXJlS2V5OmZ1bmN0aW9uKEEpe2lmKEEuaXNTcGVjaWFsS2V5KCkpe3RoaXMuZmlyZUV2ZW50KCJzcGVjaWFsa2V5Iix0aGlzLEEpfX0scmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLnNldFZhbHVlKHRoaXMub3JpZ2luYWxWYWx1ZSk7dGhpcy5jbGVhckludmFsaWQoKX0saW5pdEV2ZW50czpmdW5jdGlvbigpe3RoaXMuZWwub24oRXh0LmlzSUU/ImtleWRvd24iOiJrZXlwcmVzcyIsdGhpcy5maXJlS2V5LHRoaXMpO3RoaXMuZWwub24oImZvY3VzIix0aGlzLm9uRm9jdXMsdGhpcyk7dGhpcy5lbC5vbigiYmx1ciIsdGhpcy5vbkJsdXIsdGhpcyk7dGhpcy5vcmlnaW5hbFZhbHVlPXRoaXMuZ2V0VmFsdWUoKX0sb25Gb2N1czpmdW5jdGlvbigpe2lmKCFFeHQuaXNPcGVyYSYmdGhpcy5mb2N1c0NsYXNzKXt0aGlzLmVsLmFkZENsYXNzKHRoaXMuZm9jdXNDbGFzcyl9aWYoIXRoaXMuaGFzRm9jdXMpe3RoaXMuaGFzRm9jdXM9dHJ1ZTt0aGlzLnN0YXJ0VmFsdWU9dGhpcy5nZXRWYWx1ZSgpO3RoaXMuZmlyZUV2ZW50KCJmb2N1cyIsdGhpcyl9fSxiZWZvcmVCbHVyOkV4dC5lbXB0eUZuLG9uQmx1cjpmdW5jdGlvbigpe3RoaXMuYmVmb3JlQmx1cigpO2lmKCFFeHQuaXNPcGVyYSYmdGhpcy5mb2N1c0NsYXNzKXt0aGlzLmVsLnJlbW92ZUNsYXNzKHRoaXMuZm9jdXNDbGFzcyl9dGhpcy5oYXNGb2N1cz1mYWxzZTtpZih0aGlzLnZhbGlkYXRpb25FdmVudCE9PWZhbHNlJiZ0aGlzLnZhbGlkYXRlT25CbHVyJiZ0aGlzLnZhbGlkYXRpb25FdmVudCE9ImJsdXIiKXt0aGlzLnZhbGlkYXRlKCl9dmFyIEE9dGhpcy5nZXRWYWx1ZSgpO2lmKFN0cmluZyhBKSE9PVN0cmluZyh0aGlzLnN0YXJ0VmFsdWUpKXt0aGlzLmZpcmVFdmVudCgiY2hhbmdlIix0aGlzLEEsdGhpcy5zdGFydFZhbHVlKX10aGlzLmZpcmVFdmVudCgiYmx1ciIsdGhpcyl9LGlzVmFsaWQ6ZnVuY3Rpb24oQSl7aWYodGhpcy5kaXNhYmxlZCl7cmV0dXJuIHRydWV9dmFyIEM9dGhpcy5wcmV2ZW50TWFyazt0aGlzLnByZXZlbnRNYXJrPUE9PT10cnVlO3ZhciBCPXRoaXMudmFsaWRhdGVWYWx1ZSh0aGlzLnByb2Nlc3NWYWx1ZSh0aGlzLmdldFJhd1ZhbHVlKCkpKTt0aGlzLnByZXZlbnRNYXJrPUM7cmV0dXJuIEJ9LHZhbGlkYXRlOmZ1bmN0aW9uKCl7aWYodGhpcy5kaXNhYmxlZHx8dGhpcy52YWxpZGF0ZVZhbHVlKHRoaXMucHJvY2Vzc1ZhbHVlKHRoaXMuZ2V0UmF3VmFsdWUoKSkpKXt0aGlzLmNsZWFySW52YWxpZCgpO3JldHVybiB0cnVlfXJldHVybiBmYWxzZX0scHJvY2Vzc1ZhbHVlOmZ1bmN0aW9uKEEpe3JldHVybiBBfSx2YWxpZGF0ZVZhbHVlOmZ1bmN0aW9uKEEpe3JldHVybiB0cnVlfSxtYXJrSW52YWxpZDpmdW5jdGlvbihDKXtpZighdGhpcy5yZW5kZXJlZHx8dGhpcy5wcmV2ZW50TWFyayl7cmV0dXJuIH10aGlzLmVsLmFkZENsYXNzKHRoaXMuaW52YWxpZENsYXNzKTtDPUN8fHRoaXMuaW52YWxpZFRleHQ7c3dpdGNoKHRoaXMubXNnVGFyZ2V0KXtjYXNlInF0aXAiOnRoaXMuZWwuZG9tLnF0aXA9Qzt0aGlzLmVsLmRvbS5xY2xhc3M9IngtZm9ybS1pbnZhbGlkLXRpcCI7aWYoRXh0LlF1aWNrVGlwcyl7RXh0LlF1aWNrVGlwcy5lbmFibGUoKX1icmVhaztjYXNlInRpdGxlIjp0aGlzLmVsLmRvbS50aXRsZT1DO2JyZWFrO2Nhc2UidW5kZXIiOmlmKCF0aGlzLmVycm9yRWwpe3ZhciBCPXRoaXMuZWwuZmluZFBhcmVudCgiLngtZm9ybS1lbGVtZW50Iiw1LHRydWUpO3RoaXMuZXJyb3JFbD1CLmNyZWF0ZUNoaWxkKHtjbHM6IngtZm9ybS1pbnZhbGlkLW1zZyJ9KTt0aGlzLmVycm9yRWwuc2V0V2lkdGgoQi5nZXRXaWR0aCh0cnVlKS0yMCl9dGhpcy5lcnJvckVsLnVwZGF0ZShDKTtFeHQuZm9ybS5GaWVsZC5tc2dGeFt0aGlzLm1zZ0Z4XS5zaG93KHRoaXMuZXJyb3JFbCx0aGlzKTticmVhaztjYXNlInNpZGUiOmlmKCF0aGlzLmVycm9ySWNvbil7dmFyIEI9dGhpcy5lbC5maW5kUGFyZW50KCIueC1mb3JtLWVsZW1lbnQiLDUsdHJ1ZSk7dGhpcy5lcnJvckljb249Qi5jcmVhdGVDaGlsZCh7Y2xzOiJ4LWZvcm0taW52YWxpZC1pY29uIn0pfXRoaXMuYWxpZ25FcnJvckljb24oKTt0aGlzLmVycm9ySWNvbi5kb20ucXRpcD1DO3RoaXMuZXJyb3JJY29uLmRvbS5xY2xhc3M9IngtZm9ybS1pbnZhbGlkLXRpcCI7dGhpcy5lcnJvckljb24uc2hvdygpO3RoaXMub24oInJlc2l6ZSIsdGhpcy5hbGlnbkVycm9ySWNvbix0aGlzKTticmVhaztkZWZhdWx0OnZhciBBPUV4dC5nZXREb20odGhpcy5tc2dUYXJnZXQpO0EuaW5uZXJIVE1MPUM7QS5zdHlsZS5kaXNwbGF5PXRoaXMubXNnRGlzcGxheTticmVha310aGlzLmZpcmVFdmVudCgiaW52YWxpZCIsdGhpcyxDKX0sYWxpZ25FcnJvckljb246ZnVuY3Rpb24oKXt0aGlzLmVycm9ySWNvbi5hbGlnblRvKHRoaXMuZWwsInRsLXRyIixbMiwwXSl9LGNsZWFySW52YWxpZDpmdW5jdGlvbigpe2lmKCF0aGlzLnJlbmRlcmVkfHx0aGlzLnByZXZlbnRNYXJrKXtyZXR1cm4gfXRoaXMuZWwucmVtb3ZlQ2xhc3ModGhpcy5pbnZhbGlkQ2xhc3MpO3N3aXRjaCh0aGlzLm1zZ1RhcmdldCl7Y2FzZSJxdGlwIjp0aGlzLmVsLmRvbS5xdGlwPSIiO2JyZWFrO2Nhc2UidGl0bGUiOnRoaXMuZWwuZG9tLnRpdGxlPSIiO2JyZWFrO2Nhc2UidW5kZXIiOmlmKHRoaXMuZXJyb3JFbCl7RXh0LmZvcm0uRmllbGQubXNnRnhbdGhpcy5tc2dGeF0uaGlkZSh0aGlzLmVycm9yRWwsdGhpcyl9YnJlYWs7Y2FzZSJzaWRlIjppZih0aGlzLmVycm9ySWNvbil7dGhpcy5lcnJvckljb24uZG9tLnF0aXA9IiI7dGhpcy5lcnJvckljb24uaGlkZSgpO3RoaXMudW4oInJlc2l6ZSIsdGhpcy5hbGlnbkVycm9ySWNvbix0aGlzKX1icmVhaztkZWZhdWx0OnZhciBBPUV4dC5nZXREb20odGhpcy5tc2dUYXJnZXQpO0EuaW5uZXJIVE1MPSIiO0Euc3R5bGUuZGlzcGxheT0ibm9uZSI7YnJlYWt9dGhpcy5maXJlRXZlbnQoInZhbGlkIix0aGlzKX0sZ2V0UmF3VmFsdWU6ZnVuY3Rpb24oKXt2YXIgQT10aGlzLnJlbmRlcmVkP3RoaXMuZWwuZ2V0VmFsdWUoKTpFeHQudmFsdWUodGhpcy52YWx1ZSwiIik7aWYoQT09PXRoaXMuZW1wdHlUZXh0KXtBPSIifXJldHVybiBBfSxnZXRWYWx1ZTpmdW5jdGlvbigpe2lmKCF0aGlzLnJlbmRlcmVkKXtyZXR1cm4gdGhpcy52YWx1ZX12YXIgQT10aGlzLmVsLmdldFZhbHVlKCk7aWYoQT09PXRoaXMuZW1wdHlUZXh0fHxBPT09dW5kZWZpbmVkKXtBPSIifXJldHVybiBBfSxzZXRSYXdWYWx1ZTpmdW5jdGlvbihBKXtyZXR1cm4gdGhpcy5lbC5kb20udmFsdWU9KEE9PT1udWxsfHxBPT09dW5kZWZpbmVkPyIiOkEpfSxzZXRWYWx1ZTpmdW5jdGlvbihBKXt0aGlzLnZhbHVlPUE7aWYodGhpcy5yZW5kZXJlZCl7dGhpcy5lbC5kb20udmFsdWU9KEE9PT1udWxsfHxBPT09dW5kZWZpbmVkPyIiOkEpO3RoaXMudmFsaWRhdGUoKX19LGFkanVzdFNpemU6ZnVuY3Rpb24oQSxDKXt2YXIgQj1FeHQuZm9ybS5GaWVsZC5zdXBlcmNsYXNzLmFkanVzdFNpemUuY2FsbCh0aGlzLEEsQyk7Qi53aWR0aD10aGlzLmFkanVzdFdpZHRoKHRoaXMuZWwuZG9tLnRhZ05hbWUsQi53aWR0aCk7cmV0dXJuIEJ9LGFkanVzdFdpZHRoOmZ1bmN0aW9uKEEsQil7QT1BLnRvTG93ZXJDYXNlKCk7aWYodHlwZW9mIEI9PSJudW1iZXIiJiYhRXh0LmlzU2FmYXJpKXtpZihFeHQuaXNJRSYmKEE9PSJpbnB1dCJ8fEE9PSJ0ZXh0YXJlYSIpKXtpZihBPT0iaW5wdXQiJiYhRXh0LmlzU3RyaWN0KXtyZXR1cm4gdGhpcy5pbkVkaXRvcj9COkItM31pZihBPT0iaW5wdXQiJiZFeHQuaXNTdHJpY3Qpe3JldHVybiBCLShFeHQuaXNJRTY/NDoxKX1pZihBPSJ0ZXh0YXJlYSImJkV4dC5pc1N0cmljdCl7cmV0dXJuIEItMn19ZWxzZXtpZihFeHQuaXNPcGVyYSYmRXh0LmlzU3RyaWN0KXtpZihBPT0iaW5wdXQiKXtyZXR1cm4gQisyfWlmKEE9InRleHRhcmVhIil7cmV0dXJuIEItMn19fX1yZXR1cm4gQn19KTtFeHQuZm9ybS5GaWVsZC5tc2dGeD17bm9ybWFsOntzaG93OmZ1bmN0aW9uKEEsQil7QS5zZXREaXNwbGF5ZWQoImJsb2NrIil9LGhpZGU6ZnVuY3Rpb24oQSxCKXtBLnNldERpc3BsYXllZChmYWxzZSkudXBkYXRlKCIiKX19LHNsaWRlOntzaG93OmZ1bmN0aW9uKEEsQil7QS5zbGlkZUluKCJ0Iix7c3RvcEZ4OnRydWV9KX0saGlkZTpmdW5jdGlvbihBLEIpe0Euc2xpZGVPdXQoInQiLHtzdG9wRng6dHJ1ZSx1c2VEaXNwbGF5OnRydWV9KX19LHNsaWRlUmlnaHQ6e3Nob3c6ZnVuY3Rpb24oQSxCKXtBLmZpeERpc3BsYXkoKTtBLmFsaWduVG8oQi5lbCwidGwtdHIiKTtBLnNsaWRlSW4oImwiLHtzdG9wRng6dHJ1ZX0pfSxoaWRlOmZ1bmN0aW9uKEEsQil7QS5zbGlkZU91dCgibCIse3N0b3BGeDp0cnVlLHVzZURpc3BsYXk6dHJ1ZX0pfX19O0V4dC5yZWcoImZpZWxkIixFeHQuZm9ybS5GaWVsZCk7DQpFeHQuZm9ybS5UZXh0RmllbGQ9RXh0LmV4dGVuZChFeHQuZm9ybS5GaWVsZCx7Z3JvdzpmYWxzZSxncm93TWluOjMwLGdyb3dNYXg6ODAwLHZ0eXBlOm51bGwsbWFza1JlOm51bGwsZGlzYWJsZUtleUZpbHRlcjpmYWxzZSxhbGxvd0JsYW5rOnRydWUsbWluTGVuZ3RoOjAsbWF4TGVuZ3RoOk51bWJlci5NQVhfVkFMVUUsbWluTGVuZ3RoVGV4dDoiVGhlIG1pbmltdW0gbGVuZ3RoIGZvciB0aGlzIGZpZWxkIGlzIHswfSIsbWF4TGVuZ3RoVGV4dDoiVGhlIG1heGltdW0gbGVuZ3RoIGZvciB0aGlzIGZpZWxkIGlzIHswfSIsc2VsZWN0T25Gb2N1czpmYWxzZSxibGFua1RleHQ6IlRoaXMgZmllbGQgaXMgcmVxdWlyZWQiLHZhbGlkYXRvcjpudWxsLHJlZ2V4Om51bGwscmVnZXhUZXh0OiIiLGVtcHR5VGV4dDpudWxsLGVtcHR5Q2xhc3M6IngtZm9ybS1lbXB0eS1maWVsZCIsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe0V4dC5mb3JtLlRleHRGaWVsZC5zdXBlcmNsYXNzLmluaXRDb21wb25lbnQuY2FsbCh0aGlzKTt0aGlzLmFkZEV2ZW50cygiYXV0b3NpemUiKX0saW5pdEV2ZW50czpmdW5jdGlvbigpe0V4dC5mb3JtLlRleHRGaWVsZC5zdXBlcmNsYXNzLmluaXRFdmVudHMuY2FsbCh0aGlzKTtpZih0aGlzLnZhbGlkYXRpb25FdmVudD09ImtleXVwIil7dGhpcy52YWxpZGF0aW9uVGFzaz1uZXcgRXh0LnV0aWwuRGVsYXllZFRhc2sodGhpcy52YWxpZGF0ZSx0aGlzKTt0aGlzLmVsLm9uKCJrZXl1cCIsdGhpcy5maWx0ZXJWYWxpZGF0aW9uLHRoaXMpfWVsc2V7aWYodGhpcy52YWxpZGF0aW9uRXZlbnQhPT1mYWxzZSl7dGhpcy5lbC5vbih0aGlzLnZhbGlkYXRpb25FdmVudCx0aGlzLnZhbGlkYXRlLHRoaXMse2J1ZmZlcjp0aGlzLnZhbGlkYXRpb25EZWxheX0pfX1pZih0aGlzLnNlbGVjdE9uRm9jdXN8fHRoaXMuZW1wdHlUZXh0KXt0aGlzLm9uKCJmb2N1cyIsdGhpcy5wcmVGb2N1cyx0aGlzKTtpZih0aGlzLmVtcHR5VGV4dCl7dGhpcy5vbigiYmx1ciIsdGhpcy5wb3N0Qmx1cix0aGlzKTt0aGlzLmFwcGx5RW1wdHlUZXh0KCl9fWlmKHRoaXMubWFza1JlfHwodGhpcy52dHlwZSYmdGhpcy5kaXNhYmxlS2V5RmlsdGVyIT09dHJ1ZSYmKHRoaXMubWFza1JlPUV4dC5mb3JtLlZUeXBlc1t0aGlzLnZ0eXBlKyJNYXNrIl0pKSl7dGhpcy5lbC5vbigia2V5cHJlc3MiLHRoaXMuZmlsdGVyS2V5cyx0aGlzKX1pZih0aGlzLmdyb3cpe3RoaXMuZWwub24oImtleXVwIix0aGlzLm9uS2V5VXAsdGhpcyx7YnVmZmVyOjUwfSk7dGhpcy5lbC5vbigiY2xpY2siLHRoaXMuYXV0b1NpemUsdGhpcyl9fSxwcm9jZXNzVmFsdWU6ZnVuY3Rpb24oQSl7aWYodGhpcy5zdHJpcENoYXJzUmUpe3ZhciBCPUEucmVwbGFjZSh0aGlzLnN0cmlwQ2hhcnNSZSwiIik7aWYoQiE9PUEpe3RoaXMuc2V0UmF3VmFsdWUoQik7cmV0dXJuIEJ9fXJldHVybiBBfSxmaWx0ZXJWYWxpZGF0aW9uOmZ1bmN0aW9uKEEpe2lmKCFBLmlzTmF2S2V5UHJlc3MoKSl7dGhpcy52YWxpZGF0aW9uVGFzay5kZWxheSh0aGlzLnZhbGlkYXRpb25EZWxheSl9fSxvbktleVVwOmZ1bmN0aW9uKEEpe2lmKCFBLmlzTmF2S2V5UHJlc3MoKSl7dGhpcy5hdXRvU2l6ZSgpfX0scmVzZXQ6ZnVuY3Rpb24oKXtFeHQuZm9ybS5UZXh0RmllbGQuc3VwZXJjbGFzcy5yZXNldC5jYWxsKHRoaXMpO3RoaXMuYXBwbHlFbXB0eVRleHQoKX0sYXBwbHlFbXB0eVRleHQ6ZnVuY3Rpb24oKXtpZih0aGlzLnJlbmRlcmVkJiZ0aGlzLmVtcHR5VGV4dCYmdGhpcy5nZXRSYXdWYWx1ZSgpLmxlbmd0aDwxKXt0aGlzLnNldFJhd1ZhbHVlKHRoaXMuZW1wdHlUZXh0KTt0aGlzLmVsLmFkZENsYXNzKHRoaXMuZW1wdHlDbGFzcyl9fSxwcmVGb2N1czpmdW5jdGlvbigpe2lmKHRoaXMuZW1wdHlUZXh0KXtpZih0aGlzLmVsLmRvbS52YWx1ZT09dGhpcy5lbXB0eVRleHQpe3RoaXMuc2V0UmF3VmFsdWUoIiIpfXRoaXMuZWwucmVtb3ZlQ2xhc3ModGhpcy5lbXB0eUNsYXNzKX1pZih0aGlzLnNlbGVjdE9uRm9jdXMpe3RoaXMuZWwuZG9tLnNlbGVjdCgpfX0scG9zdEJsdXI6ZnVuY3Rpb24oKXt0aGlzLmFwcGx5RW1wdHlUZXh0KCl9LGZpbHRlcktleXM6ZnVuY3Rpb24oQil7dmFyIEE9Qi5nZXRLZXkoKTtpZighRXh0LmlzSUUmJihCLmlzTmF2S2V5UHJlc3MoKXx8QT09Qi5CQUNLU1BBQ0V8fChBPT1CLkRFTEVURSYmQi5idXR0b249PS0xKSkpe3JldHVybiB9dmFyIEQ9Qi5nZXRDaGFyQ29kZSgpLEM9U3RyaW5nLmZyb21DaGFyQ29kZShEKTtpZihFeHQuaXNJRSYmKEIuaXNTcGVjaWFsS2V5KCl8fCFDKSl7cmV0dXJuIH1pZighdGhpcy5tYXNrUmUudGVzdChDKSl7Qi5zdG9wRXZlbnQoKX19LHNldFZhbHVlOmZ1bmN0aW9uKEEpe2lmKHRoaXMuZW1wdHlUZXh0JiZ0aGlzLmVsJiZBIT09dW5kZWZpbmVkJiZBIT09bnVsbCYmQSE9PSIiKXt0aGlzLmVsLnJlbW92ZUNsYXNzKHRoaXMuZW1wdHlDbGFzcyl9RXh0LmZvcm0uVGV4dEZpZWxkLnN1cGVyY2xhc3Muc2V0VmFsdWUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuYXBwbHlFbXB0eVRleHQoKTt0aGlzLmF1dG9TaXplKCl9LHZhbGlkYXRlVmFsdWU6ZnVuY3Rpb24oQSl7aWYoQS5sZW5ndGg8MXx8QT09PXRoaXMuZW1wdHlUZXh0KXtpZih0aGlzLmFsbG93Qmxhbmspe3RoaXMuY2xlYXJJbnZhbGlkKCk7cmV0dXJuIHRydWV9ZWxzZXt0aGlzLm1hcmtJbnZhbGlkKHRoaXMuYmxhbmtUZXh0KTtyZXR1cm4gZmFsc2V9fWlmKEEubGVuZ3RoPHRoaXMubWluTGVuZ3RoKXt0aGlzLm1hcmtJbnZhbGlkKFN0cmluZy5mb3JtYXQodGhpcy5taW5MZW5ndGhUZXh0LHRoaXMubWluTGVuZ3RoKSk7cmV0dXJuIGZhbHNlfWlmKEEubGVuZ3RoPnRoaXMubWF4TGVuZ3RoKXt0aGlzLm1hcmtJbnZhbGlkKFN0cmluZy5mb3JtYXQodGhpcy5tYXhMZW5ndGhUZXh0LHRoaXMubWF4TGVuZ3RoKSk7cmV0dXJuIGZhbHNlfWlmKHRoaXMudnR5cGUpe3ZhciBDPUV4dC5mb3JtLlZUeXBlcztpZighQ1t0aGlzLnZ0eXBlXShBLHRoaXMpKXt0aGlzLm1hcmtJbnZhbGlkKHRoaXMudnR5cGVUZXh0fHxDW3RoaXMudnR5cGUrIlRleHQiXSk7cmV0dXJuIGZhbHNlfX1pZih0eXBlb2YgdGhpcy52YWxpZGF0b3I9PSJmdW5jdGlvbiIpe3ZhciBCPXRoaXMudmFsaWRhdG9yKEEpO2lmKEIhPT10cnVlKXt0aGlzLm1hcmtJbnZhbGlkKEIpO3JldHVybiBmYWxzZX19aWYodGhpcy5yZWdleCYmIXRoaXMucmVnZXgudGVzdChBKSl7dGhpcy5tYXJrSW52YWxpZCh0aGlzLnJlZ2V4VGV4dCk7cmV0dXJuIGZhbHNlfXJldHVybiB0cnVlfSxzZWxlY3RUZXh0OmZ1bmN0aW9uKEUsQSl7dmFyIEM9dGhpcy5nZXRSYXdWYWx1ZSgpO2lmKEMubGVuZ3RoPjApe0U9RT09PXVuZGVmaW5lZD8wOkU7QT1BPT09dW5kZWZpbmVkP0MubGVuZ3RoOkE7dmFyIEQ9dGhpcy5lbC5kb207aWYoRC5zZXRTZWxlY3Rpb25SYW5nZSl7RC5zZXRTZWxlY3Rpb25SYW5nZShFLEEpfWVsc2V7aWYoRC5jcmVhdGVUZXh0UmFuZ2Upe3ZhciBCPUQuY3JlYXRlVGV4dFJhbmdlKCk7Qi5tb3ZlU3RhcnQoImNoYXJhY3RlciIsRSk7Qi5tb3ZlRW5kKCJjaGFyYWN0ZXIiLEEtQy5sZW5ndGgpO0Iuc2VsZWN0KCl9fX19LGF1dG9TaXplOmZ1bmN0aW9uKCl7aWYoIXRoaXMuZ3Jvd3x8IXRoaXMucmVuZGVyZWQpe3JldHVybiB9aWYoIXRoaXMubWV0cmljcyl7dGhpcy5tZXRyaWNzPUV4dC51dGlsLlRleHRNZXRyaWNzLmNyZWF0ZUluc3RhbmNlKHRoaXMuZWwpfXZhciBDPXRoaXMuZWw7dmFyIEI9Qy5kb20udmFsdWU7dmFyIEQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7RC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShCKSk7Qj1ELmlubmVySFRNTDtEPW51bGw7Qis9IiYjMTYwOyI7dmFyIEE9TWF0aC5taW4odGhpcy5ncm93TWF4LE1hdGgubWF4KHRoaXMubWV0cmljcy5nZXRXaWR0aChCKSsxMCx0aGlzLmdyb3dNaW4pKTt0aGlzLmVsLnNldFdpZHRoKEEpO3RoaXMuZmlyZUV2ZW50KCJhdXRvc2l6ZSIsdGhpcyxBKX19KTtFeHQucmVnKCJ0ZXh0ZmllbGQiLEV4dC5mb3JtLlRleHRGaWVsZCk7DQpFeHQuZm9ybS5UcmlnZ2VyRmllbGQ9RXh0LmV4dGVuZChFeHQuZm9ybS5UZXh0RmllbGQse2RlZmF1bHRBdXRvQ3JlYXRlOnt0YWc6ImlucHV0Iix0eXBlOiJ0ZXh0IixzaXplOiIxNiIsYXV0b2NvbXBsZXRlOiJvZmYifSxoaWRlVHJpZ2dlcjpmYWxzZSxhdXRvU2l6ZTpFeHQuZW1wdHlGbixtb25pdG9yVGFiOnRydWUsZGVmZXJIZWlnaHQ6dHJ1ZSxtaW1pY2luZzpmYWxzZSxvblJlc2l6ZTpmdW5jdGlvbihBLEIpe0V4dC5mb3JtLlRyaWdnZXJGaWVsZC5zdXBlcmNsYXNzLm9uUmVzaXplLmNhbGwodGhpcyxBLEIpO2lmKHR5cGVvZiBBPT0ibnVtYmVyIil7dGhpcy5lbC5zZXRXaWR0aCh0aGlzLmFkanVzdFdpZHRoKCJpbnB1dCIsQS10aGlzLnRyaWdnZXIuZ2V0V2lkdGgoKSkpfXRoaXMud3JhcC5zZXRXaWR0aCh0aGlzLmVsLmdldFdpZHRoKCkrdGhpcy50cmlnZ2VyLmdldFdpZHRoKCkpfSxhZGp1c3RTaXplOkV4dC5Cb3hDb21wb25lbnQucHJvdG90eXBlLmFkanVzdFNpemUsZ2V0UmVzaXplRWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53cmFwfSxnZXRQb3NpdGlvbkVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud3JhcH0sYWxpZ25FcnJvckljb246ZnVuY3Rpb24oKXt0aGlzLmVycm9ySWNvbi5hbGlnblRvKHRoaXMud3JhcCwidGwtdHIiLFsyLDBdKX0sb25SZW5kZXI6ZnVuY3Rpb24oQixBKXtFeHQuZm9ybS5UcmlnZ2VyRmllbGQuc3VwZXJjbGFzcy5vblJlbmRlci5jYWxsKHRoaXMsQixBKTt0aGlzLndyYXA9dGhpcy5lbC53cmFwKHtjbHM6IngtZm9ybS1maWVsZC13cmFwIn0pO3RoaXMudHJpZ2dlcj10aGlzLndyYXAuY3JlYXRlQ2hpbGQodGhpcy50cmlnZ2VyQ29uZmlnfHx7dGFnOiJpbWciLHNyYzpFeHQuQkxBTktfSU1BR0VfVVJMLGFsdDoiIixjbHM6IngtZm9ybS10cmlnZ2VyICIrdGhpcy50cmlnZ2VyQ2xhc3N9KTtpZih0aGlzLmhpZGVUcmlnZ2VyKXt0aGlzLnRyaWdnZXIuc2V0RGlzcGxheWVkKGZhbHNlKX10aGlzLmluaXRUcmlnZ2VyKCk7aWYoIXRoaXMud2lkdGgpe3RoaXMud3JhcC5zZXRXaWR0aCh0aGlzLmVsLmdldFdpZHRoKCkrdGhpcy50cmlnZ2VyLmdldFdpZHRoKCkpfX0saW5pdFRyaWdnZXI6ZnVuY3Rpb24oKXt0aGlzLnRyaWdnZXIub24oImNsaWNrIix0aGlzLm9uVHJpZ2dlckNsaWNrLHRoaXMse3ByZXZlbnREZWZhdWx0OnRydWV9KTt0aGlzLnRyaWdnZXIuYWRkQ2xhc3NPbk92ZXIoIngtZm9ybS10cmlnZ2VyLW92ZXIiKTt0aGlzLnRyaWdnZXIuYWRkQ2xhc3NPbkNsaWNrKCJ4LWZvcm0tdHJpZ2dlci1jbGljayIpfSxvbkRlc3Ryb3k6ZnVuY3Rpb24oKXtpZih0aGlzLnRyaWdnZXIpe3RoaXMudHJpZ2dlci5yZW1vdmVBbGxMaXN0ZW5lcnMoKTt0aGlzLnRyaWdnZXIucmVtb3ZlKCl9aWYodGhpcy53cmFwKXt0aGlzLndyYXAucmVtb3ZlKCl9RXh0LmZvcm0uVHJpZ2dlckZpZWxkLnN1cGVyY2xhc3Mub25EZXN0cm95LmNhbGwodGhpcyl9LG9uRm9jdXM6ZnVuY3Rpb24oKXtFeHQuZm9ybS5UcmlnZ2VyRmllbGQuc3VwZXJjbGFzcy5vbkZvY3VzLmNhbGwodGhpcyk7aWYoIXRoaXMubWltaWNpbmcpe3RoaXMud3JhcC5hZGRDbGFzcygieC10cmlnZ2VyLXdyYXAtZm9jdXMiKTt0aGlzLm1pbWljaW5nPXRydWU7RXh0LmdldChFeHQuaXNJRT9kb2N1bWVudC5ib2R5OmRvY3VtZW50KS5vbigibW91c2Vkb3duIix0aGlzLm1pbWljQmx1cix0aGlzLHtkZWxheToxMH0pO2lmKHRoaXMubW9uaXRvclRhYil7dGhpcy5lbC5vbigia2V5ZG93biIsdGhpcy5jaGVja1RhYix0aGlzKX19fSxjaGVja1RhYjpmdW5jdGlvbihBKXtpZihBLmdldEtleSgpPT1BLlRBQil7dGhpcy50cmlnZ2VyQmx1cigpfX0sb25CbHVyOmZ1bmN0aW9uKCl7fSxtaW1pY0JsdXI6ZnVuY3Rpb24oQSl7aWYoIXRoaXMud3JhcC5jb250YWlucyhBLnRhcmdldCkmJnRoaXMudmFsaWRhdGVCbHVyKEEpKXt0aGlzLnRyaWdnZXJCbHVyKCl9fSx0cmlnZ2VyQmx1cjpmdW5jdGlvbigpe3RoaXMubWltaWNpbmc9ZmFsc2U7RXh0LmdldChFeHQuaXNJRT9kb2N1bWVudC5ib2R5OmRvY3VtZW50KS51bigibW91c2Vkb3duIix0aGlzLm1pbWljQmx1cik7aWYodGhpcy5tb25pdG9yVGFiKXt0aGlzLmVsLnVuKCJrZXlkb3duIix0aGlzLmNoZWNrVGFiLHRoaXMpfXRoaXMuYmVmb3JlQmx1cigpO3RoaXMud3JhcC5yZW1vdmVDbGFzcygieC10cmlnZ2VyLXdyYXAtZm9jdXMiKTtFeHQuZm9ybS5UcmlnZ2VyRmllbGQuc3VwZXJjbGFzcy5vbkJsdXIuY2FsbCh0aGlzKX0sYmVmb3JlQmx1cjpFeHQuZW1wdHlGbix2YWxpZGF0ZUJsdXI6ZnVuY3Rpb24oQSl7cmV0dXJuIHRydWV9LG9uRGlzYWJsZTpmdW5jdGlvbigpe0V4dC5mb3JtLlRyaWdnZXJGaWVsZC5zdXBlcmNsYXNzLm9uRGlzYWJsZS5jYWxsKHRoaXMpO2lmKHRoaXMud3JhcCl7dGhpcy53cmFwLmFkZENsYXNzKCJ4LWl0ZW0tZGlzYWJsZWQiKX19LG9uRW5hYmxlOmZ1bmN0aW9uKCl7RXh0LmZvcm0uVHJpZ2dlckZpZWxkLnN1cGVyY2xhc3Mub25FbmFibGUuY2FsbCh0aGlzKTtpZih0aGlzLndyYXApe3RoaXMud3JhcC5yZW1vdmVDbGFzcygieC1pdGVtLWRpc2FibGVkIil9fSxvblNob3c6ZnVuY3Rpb24oKXtpZih0aGlzLndyYXApe3RoaXMud3JhcC5kb20uc3R5bGUuZGlzcGxheT0iIjt0aGlzLndyYXAuZG9tLnN0eWxlLnZpc2liaWxpdHk9InZpc2libGUifX0sb25IaWRlOmZ1bmN0aW9uKCl7dGhpcy53cmFwLmRvbS5zdHlsZS5kaXNwbGF5PSJub25lIn0sb25UcmlnZ2VyQ2xpY2s6RXh0LmVtcHR5Rm59KTtFeHQuZm9ybS5Ud2luVHJpZ2dlckZpZWxkPUV4dC5leHRlbmQoRXh0LmZvcm0uVHJpZ2dlckZpZWxkLHtpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7RXh0LmZvcm0uVHdpblRyaWdnZXJGaWVsZC5zdXBlcmNsYXNzLmluaXRDb21wb25lbnQuY2FsbCh0aGlzKTt0aGlzLnRyaWdnZXJDb25maWc9e3RhZzoic3BhbiIsY2xzOiJ4LWZvcm0tdHdpbi10cmlnZ2VycyIsY246W3t0YWc6ImltZyIsc3JjOkV4dC5CTEFOS19JTUFHRV9VUkwsY2xzOiJ4LWZvcm0tdHJpZ2dlciAiK3RoaXMudHJpZ2dlcjFDbGFzc30se3RhZzoiaW1nIixzcmM6RXh0LkJMQU5LX0lNQUdFX1VSTCxjbHM6IngtZm9ybS10cmlnZ2VyICIrdGhpcy50cmlnZ2VyMkNsYXNzfV19fSxnZXRUcmlnZ2VyOmZ1bmN0aW9uKEEpe3JldHVybiB0aGlzLnRyaWdnZXJzW0FdfSxpbml0VHJpZ2dlcjpmdW5jdGlvbigpe3ZhciBBPXRoaXMudHJpZ2dlci5zZWxlY3QoIi54LWZvcm0tdHJpZ2dlciIsdHJ1ZSk7dGhpcy53cmFwLnNldFN0eWxlKCJvdmVyZmxvdyIsImhpZGRlbiIpO3ZhciBCPXRoaXM7QS5lYWNoKGZ1bmN0aW9uKEQsRixDKXtELmhpZGU9ZnVuY3Rpb24oKXt2YXIgRz1CLndyYXAuZ2V0V2lkdGgoKTt0aGlzLmRvbS5zdHlsZS5kaXNwbGF5PSJub25lIjtCLmVsLnNldFdpZHRoKEctQi50cmlnZ2VyLmdldFdpZHRoKCkpfTtELnNob3c9ZnVuY3Rpb24oKXt2YXIgRz1CLndyYXAuZ2V0V2lkdGgoKTt0aGlzLmRvbS5zdHlsZS5kaXNwbGF5PSIiO0IuZWwuc2V0V2lkdGgoRy1CLnRyaWdnZXIuZ2V0V2lkdGgoKSl9O3ZhciBFPSJUcmlnZ2VyIisoQysxKTtpZih0aGlzWyJoaWRlIitFXSl7RC5kb20uc3R5bGUuZGlzcGxheT0ibm9uZSJ9RC5vbigiY2xpY2siLHRoaXNbIm9uIitFKyJDbGljayJdLHRoaXMse3ByZXZlbnREZWZhdWx0OnRydWV9KTtELmFkZENsYXNzT25PdmVyKCJ4LWZvcm0tdHJpZ2dlci1vdmVyIik7RC5hZGRDbGFzc09uQ2xpY2soIngtZm9ybS10cmlnZ2VyLWNsaWNrIil9LHRoaXMpO3RoaXMudHJpZ2dlcnM9QS5lbGVtZW50c30sb25UcmlnZ2VyMUNsaWNrOkV4dC5lbXB0eUZuLG9uVHJpZ2dlcjJDbGljazpFeHQuZW1wdHlGbn0pO0V4dC5yZWcoInRyaWdnZXIiLEV4dC5mb3JtLlRyaWdnZXJGaWVsZCk7DQpFeHQuZm9ybS5UZXh0QXJlYT1FeHQuZXh0ZW5kKEV4dC5mb3JtLlRleHRGaWVsZCx7Z3Jvd01pbjo2MCxncm93TWF4OjEwMDAsZ3Jvd0FwcGVuZDoiJiMxNjA7XG4mIzE2MDsiLGdyb3dQYWQ6MCxlbnRlcklzU3BlY2lhbDpmYWxzZSxwcmV2ZW50U2Nyb2xsYmFyczpmYWxzZSxvblJlbmRlcjpmdW5jdGlvbihCLEEpe2lmKCF0aGlzLmVsKXt0aGlzLmRlZmF1bHRBdXRvQ3JlYXRlPXt0YWc6InRleHRhcmVhIixzdHlsZToid2lkdGg6MTAwcHg7aGVpZ2h0OjYwcHg7IixhdXRvY29tcGxldGU6Im9mZiJ9fUV4dC5mb3JtLlRleHRBcmVhLnN1cGVyY2xhc3Mub25SZW5kZXIuY2FsbCh0aGlzLEIsQSk7aWYodGhpcy5ncm93KXt0aGlzLnRleHRTaXplRWw9RXh0LkRvbUhlbHBlci5hcHBlbmQoZG9jdW1lbnQuYm9keSx7dGFnOiJwcmUiLGNsczoieC1mb3JtLWdyb3ctc2l6ZXIifSk7aWYodGhpcy5wcmV2ZW50U2Nyb2xsYmFycyl7dGhpcy5lbC5zZXRTdHlsZSgib3ZlcmZsb3ciLCJoaWRkZW4iKX10aGlzLmVsLnNldEhlaWdodCh0aGlzLmdyb3dNaW4pfX0sb25EZXN0cm95OmZ1bmN0aW9uKCl7aWYodGhpcy50ZXh0U2l6ZUVsKXtFeHQucmVtb3ZlTm9kZSh0aGlzLnRleHRTaXplRWwpfUV4dC5mb3JtLlRleHRBcmVhLnN1cGVyY2xhc3Mub25EZXN0cm95LmNhbGwodGhpcyl9LGZpcmVLZXk6ZnVuY3Rpb24oQSl7aWYoQS5pc1NwZWNpYWxLZXkoKSYmKHRoaXMuZW50ZXJJc1NwZWNpYWx8fChBLmdldEtleSgpIT1BLkVOVEVSfHxBLmhhc01vZGlmaWVyKCkpKSl7dGhpcy5maXJlRXZlbnQoInNwZWNpYWxrZXkiLHRoaXMsQSl9fSxvbktleVVwOmZ1bmN0aW9uKEEpe2lmKCFBLmlzTmF2S2V5UHJlc3MoKXx8QS5nZXRLZXkoKT09QS5FTlRFUil7dGhpcy5hdXRvU2l6ZSgpfX0sYXV0b1NpemU6ZnVuY3Rpb24oKXtpZighdGhpcy5ncm93fHwhdGhpcy50ZXh0U2l6ZUVsKXtyZXR1cm4gfXZhciBDPXRoaXMuZWw7dmFyIEE9Qy5kb20udmFsdWU7dmFyIEQ9dGhpcy50ZXh0U2l6ZUVsO0QuaW5uZXJIVE1MPSIiO0QuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoQSkpO0E9RC5pbm5lckhUTUw7RXh0LmZseShEKS5zZXRXaWR0aCh0aGlzLmVsLmdldFdpZHRoKCkpO2lmKEEubGVuZ3RoPDEpe0E9IiYjMTYwOyYjMTYwOyJ9ZWxzZXtpZihFeHQuaXNJRSl7QT1BLnJlcGxhY2UoL1xuL2csIjxwPiYjMTYwOzwvcD4iKX1BKz10aGlzLmdyb3dBcHBlbmR9RC5pbm5lckhUTUw9QTt2YXIgQj1NYXRoLm1pbih0aGlzLmdyb3dNYXgsTWF0aC5tYXgoRC5vZmZzZXRIZWlnaHQsdGhpcy5ncm93TWluKSt0aGlzLmdyb3dQYWQpO2lmKEIhPXRoaXMubGFzdEhlaWdodCl7dGhpcy5sYXN0SGVpZ2h0PUI7dGhpcy5lbC5zZXRIZWlnaHQoQik7dGhpcy5maXJlRXZlbnQoImF1dG9zaXplIix0aGlzLEIpfX19KTtFeHQucmVnKCJ0ZXh0YXJlYSIsRXh0LmZvcm0uVGV4dEFyZWEpOw0KRXh0LmZvcm0uTnVtYmVyRmllbGQ9RXh0LmV4dGVuZChFeHQuZm9ybS5UZXh0RmllbGQse2ZpZWxkQ2xhc3M6IngtZm9ybS1maWVsZCB4LWZvcm0tbnVtLWZpZWxkIixhbGxvd0RlY2ltYWxzOnRydWUsZGVjaW1hbFNlcGFyYXRvcjoiLiIsZGVjaW1hbFByZWNpc2lvbjoyLGFsbG93TmVnYXRpdmU6dHJ1ZSxtaW5WYWx1ZTpOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksbWF4VmFsdWU6TnVtYmVyLk1BWF9WQUxVRSxtaW5UZXh0OiJUaGUgbWluaW11bSB2YWx1ZSBmb3IgdGhpcyBmaWVsZCBpcyB7MH0iLG1heFRleHQ6IlRoZSBtYXhpbXVtIHZhbHVlIGZvciB0aGlzIGZpZWxkIGlzIHswfSIsbmFuVGV4dDoiezB9IGlzIG5vdCBhIHZhbGlkIG51bWJlciIsYmFzZUNoYXJzOiIwMTIzNDU2Nzg5Iixpbml0RXZlbnRzOmZ1bmN0aW9uKCl7RXh0LmZvcm0uTnVtYmVyRmllbGQuc3VwZXJjbGFzcy5pbml0RXZlbnRzLmNhbGwodGhpcyk7dmFyIEI9dGhpcy5iYXNlQ2hhcnMrIiI7aWYodGhpcy5hbGxvd0RlY2ltYWxzKXtCKz10aGlzLmRlY2ltYWxTZXBhcmF0b3J9aWYodGhpcy5hbGxvd05lZ2F0aXZlKXtCKz0iLSJ9dGhpcy5zdHJpcENoYXJzUmU9bmV3IFJlZ0V4cCgiW14iK0IrIl0iLCJnaSIpO3ZhciBBPWZ1bmN0aW9uKEQpe3ZhciBDPUQuZ2V0S2V5KCk7aWYoIUV4dC5pc0lFJiYoRC5pc1NwZWNpYWxLZXkoKXx8Qz09RC5CQUNLU1BBQ0V8fEM9PUQuREVMRVRFKSl7cmV0dXJuIH12YXIgRT1ELmdldENoYXJDb2RlKCk7aWYoQi5pbmRleE9mKFN0cmluZy5mcm9tQ2hhckNvZGUoRSkpPT09LTEpe0Quc3RvcEV2ZW50KCl9fTt0aGlzLmVsLm9uKCJrZXlwcmVzcyIsQSx0aGlzKX0sdmFsaWRhdGVWYWx1ZTpmdW5jdGlvbihCKXtpZighRXh0LmZvcm0uTnVtYmVyRmllbGQuc3VwZXJjbGFzcy52YWxpZGF0ZVZhbHVlLmNhbGwodGhpcyxCKSl7cmV0dXJuIGZhbHNlfWlmKEIubGVuZ3RoPDEpe3JldHVybiB0cnVlfUI9U3RyaW5nKEIpLnJlcGxhY2UodGhpcy5kZWNpbWFsU2VwYXJhdG9yLCIuIik7aWYoaXNOYU4oQikpe3RoaXMubWFya0ludmFsaWQoU3RyaW5nLmZvcm1hdCh0aGlzLm5hblRleHQsQikpO3JldHVybiBmYWxzZX12YXIgQT10aGlzLnBhcnNlVmFsdWUoQik7aWYoQTx0aGlzLm1pblZhbHVlKXt0aGlzLm1hcmtJbnZhbGlkKFN0cmluZy5mb3JtYXQodGhpcy5taW5UZXh0LHRoaXMubWluVmFsdWUpKTtyZXR1cm4gZmFsc2V9aWYoQT50aGlzLm1heFZhbHVlKXt0aGlzLm1hcmtJbnZhbGlkKFN0cmluZy5mb3JtYXQodGhpcy5tYXhUZXh0LHRoaXMubWF4VmFsdWUpKTtyZXR1cm4gZmFsc2V9cmV0dXJuIHRydWV9LGdldFZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZml4UHJlY2lzaW9uKHRoaXMucGFyc2VWYWx1ZShFeHQuZm9ybS5OdW1iZXJGaWVsZC5zdXBlcmNsYXNzLmdldFZhbHVlLmNhbGwodGhpcykpKX0sc2V0VmFsdWU6ZnVuY3Rpb24oQSl7QT1wYXJzZUZsb2F0KEEpO0E9aXNOYU4oQSk/IiI6U3RyaW5nKEEpLnJlcGxhY2UoIi4iLHRoaXMuZGVjaW1hbFNlcGFyYXRvcik7RXh0LmZvcm0uTnVtYmVyRmllbGQuc3VwZXJjbGFzcy5zZXRWYWx1ZS5jYWxsKHRoaXMsQSl9LHBhcnNlVmFsdWU6ZnVuY3Rpb24oQSl7QT1wYXJzZUZsb2F0KFN0cmluZyhBKS5yZXBsYWNlKHRoaXMuZGVjaW1hbFNlcGFyYXRvciwiLiIpKTtyZXR1cm4gaXNOYU4oQSk/IiI6QX0sZml4UHJlY2lzaW9uOmZ1bmN0aW9uKEIpe3ZhciBBPWlzTmFOKEIpO2lmKCF0aGlzLmFsbG93RGVjaW1hbHN8fHRoaXMuZGVjaW1hbFByZWNpc2lvbj09LTF8fEF8fCFCKXtyZXR1cm4gQT8iIjpCfXJldHVybiBwYXJzZUZsb2F0KHBhcnNlRmxvYXQoQikudG9GaXhlZCh0aGlzLmRlY2ltYWxQcmVjaXNpb24pKX0sYmVmb3JlQmx1cjpmdW5jdGlvbigpe3ZhciBBPXRoaXMucGFyc2VWYWx1ZSh0aGlzLmdldFJhd1ZhbHVlKCkpO2lmKEEpe3RoaXMuc2V0VmFsdWUodGhpcy5maXhQcmVjaXNpb24oQSkpfX19KTtFeHQucmVnKCJudW1iZXJmaWVsZCIsRXh0LmZvcm0uTnVtYmVyRmllbGQpOw0KRXh0LmZvcm0uRGF0ZUZpZWxkPUV4dC5leHRlbmQoRXh0LmZvcm0uVHJpZ2dlckZpZWxkLHtmb3JtYXQ6Im0vZC95IixhbHRGb3JtYXRzOiJtL2QvWXxuL2ovWXxuL2oveXxtL2oveXxuL2QveXxtL2ovWXxuL2QvWXxtLWQteXxtLWQtWXxtL2R8bS1kfG1kfG1keXxtZFl8ZHxZLW0tZCIsZGlzYWJsZWREYXlzOm51bGwsZGlzYWJsZWREYXlzVGV4dDoiRGlzYWJsZWQiLGRpc2FibGVkRGF0ZXM6bnVsbCxkaXNhYmxlZERhdGVzVGV4dDoiRGlzYWJsZWQiLG1pblZhbHVlOm51bGwsbWF4VmFsdWU6bnVsbCxtaW5UZXh0OiJUaGUgZGF0ZSBpbiB0aGlzIGZpZWxkIG11c3QgYmUgZXF1YWwgdG8gb3IgYWZ0ZXIgezB9IixtYXhUZXh0OiJUaGUgZGF0ZSBpbiB0aGlzIGZpZWxkIG11c3QgYmUgZXF1YWwgdG8gb3IgYmVmb3JlIHswfSIsaW52YWxpZFRleHQ6InswfSBpcyBub3QgYSB2YWxpZCBkYXRlIC0gaXQgbXVzdCBiZSBpbiB0aGUgZm9ybWF0IHsxfSIsdHJpZ2dlckNsYXNzOiJ4LWZvcm0tZGF0ZS10cmlnZ2VyIixkZWZhdWx0QXV0b0NyZWF0ZTp7dGFnOiJpbnB1dCIsdHlwZToidGV4dCIsc2l6ZToiMTAiLGF1dG9jb21wbGV0ZToib2ZmIn0saW5pdENvbXBvbmVudDpmdW5jdGlvbigpe0V4dC5mb3JtLkRhdGVGaWVsZC5zdXBlcmNsYXNzLmluaXRDb21wb25lbnQuY2FsbCh0aGlzKTtpZih0eXBlb2YgdGhpcy5taW5WYWx1ZT09InN0cmluZyIpe3RoaXMubWluVmFsdWU9dGhpcy5wYXJzZURhdGUodGhpcy5taW5WYWx1ZSl9aWYodHlwZW9mIHRoaXMubWF4VmFsdWU9PSJzdHJpbmciKXt0aGlzLm1heFZhbHVlPXRoaXMucGFyc2VEYXRlKHRoaXMubWF4VmFsdWUpfXRoaXMuZGRNYXRjaD1udWxsO2lmKHRoaXMuZGlzYWJsZWREYXRlcyl7dmFyIEE9dGhpcy5kaXNhYmxlZERhdGVzO3ZhciBDPSIoPzoiO2Zvcih2YXIgQj0wO0I8QS5sZW5ndGg7QisrKXtDKz1BW0JdO2lmKEIhPUEubGVuZ3RoLTEpe0MrPSJ8In19dGhpcy5kZE1hdGNoPW5ldyBSZWdFeHAoQysiKSIpfX0sdmFsaWRhdGVWYWx1ZTpmdW5jdGlvbihFKXtFPXRoaXMuZm9ybWF0RGF0ZShFKTtpZighRXh0LmZvcm0uRGF0ZUZpZWxkLnN1cGVyY2xhc3MudmFsaWRhdGVWYWx1ZS5jYWxsKHRoaXMsRSkpe3JldHVybiBmYWxzZX1pZihFLmxlbmd0aDwxKXtyZXR1cm4gdHJ1ZX12YXIgQz1FO0U9dGhpcy5wYXJzZURhdGUoRSk7aWYoIUUpe3RoaXMubWFya0ludmFsaWQoU3RyaW5nLmZvcm1hdCh0aGlzLmludmFsaWRUZXh0LEMsdGhpcy5mb3JtYXQpKTtyZXR1cm4gZmFsc2V9dmFyIEY9RS5nZXRUaW1lKCk7aWYodGhpcy5taW5WYWx1ZSYmRjx0aGlzLm1pblZhbHVlLmdldFRpbWUoKSl7dGhpcy5tYXJrSW52YWxpZChTdHJpbmcuZm9ybWF0KHRoaXMubWluVGV4dCx0aGlzLmZvcm1hdERhdGUodGhpcy5taW5WYWx1ZSkpKTtyZXR1cm4gZmFsc2V9aWYodGhpcy5tYXhWYWx1ZSYmRj50aGlzLm1heFZhbHVlLmdldFRpbWUoKSl7dGhpcy5tYXJrSW52YWxpZChTdHJpbmcuZm9ybWF0KHRoaXMubWF4VGV4dCx0aGlzLmZvcm1hdERhdGUodGhpcy5tYXhWYWx1ZSkpKTtyZXR1cm4gZmFsc2V9aWYodGhpcy5kaXNhYmxlZERheXMpe3ZhciBBPUUuZ2V0RGF5KCk7Zm9yKHZhciBCPTA7Qjx0aGlzLmRpc2FibGVkRGF5cy5sZW5ndGg7QisrKXtpZihBPT09dGhpcy5kaXNhYmxlZERheXNbQl0pe3RoaXMubWFya0ludmFsaWQodGhpcy5kaXNhYmxlZERheXNUZXh0KTtyZXR1cm4gZmFsc2V9fX12YXIgRD10aGlzLmZvcm1hdERhdGUoRSk7aWYodGhpcy5kZE1hdGNoJiZ0aGlzLmRkTWF0Y2gudGVzdChEKSl7dGhpcy5tYXJrSW52YWxpZChTdHJpbmcuZm9ybWF0KHRoaXMuZGlzYWJsZWREYXRlc1RleHQsRCkpO3JldHVybiBmYWxzZX1yZXR1cm4gdHJ1ZX0sdmFsaWRhdGVCbHVyOmZ1bmN0aW9uKCl7cmV0dXJuICF0aGlzLm1lbnV8fCF0aGlzLm1lbnUuaXNWaXNpYmxlKCl9LGdldFZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyc2VEYXRlKEV4dC5mb3JtLkRhdGVGaWVsZC5zdXBlcmNsYXNzLmdldFZhbHVlLmNhbGwodGhpcykpfHwiIn0sc2V0VmFsdWU6ZnVuY3Rpb24oQSl7RXh0LmZvcm0uRGF0ZUZpZWxkLnN1cGVyY2xhc3Muc2V0VmFsdWUuY2FsbCh0aGlzLHRoaXMuZm9ybWF0RGF0ZSh0aGlzLnBhcnNlRGF0ZShBKSkpfSxwYXJzZURhdGU6ZnVuY3Rpb24oRCl7aWYoIUR8fEV4dC5pc0RhdGUoRCkpe3JldHVybiBEfXZhciBCPURhdGUucGFyc2VEYXRlKEQsdGhpcy5mb3JtYXQpO2lmKCFCJiZ0aGlzLmFsdEZvcm1hdHMpe2lmKCF0aGlzLmFsdEZvcm1hdHNBcnJheSl7dGhpcy5hbHRGb3JtYXRzQXJyYXk9dGhpcy5hbHRGb3JtYXRzLnNwbGl0KCJ8Iil9Zm9yKHZhciBDPTAsQT10aGlzLmFsdEZvcm1hdHNBcnJheS5sZW5ndGg7QzxBJiYhQjtDKyspe0I9RGF0ZS5wYXJzZURhdGUoRCx0aGlzLmFsdEZvcm1hdHNBcnJheVtDXSl9fXJldHVybiBCfSxvbkRlc3Ryb3k6ZnVuY3Rpb24oKXtpZih0aGlzLm1lbnUpe3RoaXMubWVudS5kZXN0cm95KCl9aWYodGhpcy53cmFwKXt0aGlzLndyYXAucmVtb3ZlKCl9RXh0LmZvcm0uRGF0ZUZpZWxkLnN1cGVyY2xhc3Mub25EZXN0cm95LmNhbGwodGhpcyl9LGZvcm1hdERhdGU6ZnVuY3Rpb24oQSl7cmV0dXJuIEV4dC5pc0RhdGUoQSk/QS5kYXRlRm9ybWF0KHRoaXMuZm9ybWF0KTpBfSxtZW51TGlzdGVuZXJzOntzZWxlY3Q6ZnVuY3Rpb24oQSxCKXt0aGlzLnNldFZhbHVlKEIpfSxzaG93OmZ1bmN0aW9uKCl7dGhpcy5vbkZvY3VzKCl9LGhpZGU6ZnVuY3Rpb24oKXt0aGlzLmZvY3VzLmRlZmVyKDEwLHRoaXMpO3ZhciBBPXRoaXMubWVudUxpc3RlbmVyczt0aGlzLm1lbnUudW4oInNlbGVjdCIsQS5zZWxlY3QsdGhpcyk7dGhpcy5tZW51LnVuKCJzaG93IixBLnNob3csdGhpcyk7dGhpcy5tZW51LnVuKCJoaWRlIixBLmhpZGUsdGhpcyl9fSxvblRyaWdnZXJDbGljazpmdW5jdGlvbigpe2lmKHRoaXMuZGlzYWJsZWQpe3JldHVybiB9aWYodGhpcy5tZW51PT1udWxsKXt0aGlzLm1lbnU9bmV3IEV4dC5tZW51LkRhdGVNZW51KCl9RXh0LmFwcGx5KHRoaXMubWVudS5waWNrZXIse21pbkRhdGU6dGhpcy5taW5WYWx1ZSxtYXhEYXRlOnRoaXMubWF4VmFsdWUsZGlzYWJsZWREYXRlc1JFOnRoaXMuZGRNYXRjaCxkaXNhYmxlZERhdGVzVGV4dDp0aGlzLmRpc2FibGVkRGF0ZXNUZXh0LGRpc2FibGVkRGF5czp0aGlzLmRpc2FibGVkRGF5cyxkaXNhYmxlZERheXNUZXh0OnRoaXMuZGlzYWJsZWREYXlzVGV4dCxmb3JtYXQ6dGhpcy5mb3JtYXQsbWluVGV4dDpTdHJpbmcuZm9ybWF0KHRoaXMubWluVGV4dCx0aGlzLmZvcm1hdERhdGUodGhpcy5taW5WYWx1ZSkpLG1heFRleHQ6U3RyaW5nLmZvcm1hdCh0aGlzLm1heFRleHQsdGhpcy5mb3JtYXREYXRlKHRoaXMubWF4VmFsdWUpKX0pO3RoaXMubWVudS5vbihFeHQuYXBwbHkoe30sdGhpcy5tZW51TGlzdGVuZXJzLHtzY29wZTp0aGlzfSkpO3RoaXMubWVudS5waWNrZXIuc2V0VmFsdWUodGhpcy5nZXRWYWx1ZSgpfHxuZXcgRGF0ZSgpKTt0aGlzLm1lbnUuc2hvdyh0aGlzLmVsLCJ0bC1ibD8iKX0sYmVmb3JlQmx1cjpmdW5jdGlvbigpe3ZhciBBPXRoaXMucGFyc2VEYXRlKHRoaXMuZ2V0UmF3VmFsdWUoKSk7aWYoQSl7dGhpcy5zZXRWYWx1ZShBKX19fSk7RXh0LnJlZygiZGF0ZWZpZWxkIixFeHQuZm9ybS5EYXRlRmllbGQpOw0KRXh0LmZvcm0uQ29tYm9Cb3g9RXh0LmV4dGVuZChFeHQuZm9ybS5UcmlnZ2VyRmllbGQse2RlZmF1bHRBdXRvQ3JlYXRlOnt0YWc6ImlucHV0Iix0eXBlOiJ0ZXh0IixzaXplOiIyNCIsYXV0b2NvbXBsZXRlOiJvZmYifSxsaXN0Q2xhc3M6IiIsc2VsZWN0ZWRDbGFzczoieC1jb21iby1zZWxlY3RlZCIsdHJpZ2dlckNsYXNzOiJ4LWZvcm0tYXJyb3ctdHJpZ2dlciIsc2hhZG93OiJzaWRlcyIsbGlzdEFsaWduOiJ0bC1ibD8iLG1heEhlaWdodDozMDAsbWluSGVpZ2h0OjkwLHRyaWdnZXJBY3Rpb246InF1ZXJ5IixtaW5DaGFyczo0LHR5cGVBaGVhZDpmYWxzZSxxdWVyeURlbGF5OjUwMCxwYWdlU2l6ZTowLHNlbGVjdE9uRm9jdXM6ZmFsc2UscXVlcnlQYXJhbToicXVlcnkiLGxvYWRpbmdUZXh0OiJMb2FkaW5nLi4uIixyZXNpemFibGU6ZmFsc2UsaGFuZGxlSGVpZ2h0OjgsZWRpdGFibGU6dHJ1ZSxhbGxRdWVyeToiIixtb2RlOiJyZW1vdGUiLG1pbkxpc3RXaWR0aDo3MCxmb3JjZVNlbGVjdGlvbjpmYWxzZSx0eXBlQWhlYWREZWxheToyNTAsbGF6eUluaXQ6dHJ1ZSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7RXh0LmZvcm0uQ29tYm9Cb3guc3VwZXJjbGFzcy5pbml0Q29tcG9uZW50LmNhbGwodGhpcyk7dGhpcy5hZGRFdmVudHMoImV4cGFuZCIsImNvbGxhcHNlIiwiYmVmb3Jlc2VsZWN0Iiwic2VsZWN0IiwiYmVmb3JlcXVlcnkiKTtpZih0aGlzLnRyYW5zZm9ybSl7dGhpcy5hbGxvd0RvbU1vdmU9ZmFsc2U7dmFyIEM9RXh0LmdldERvbSh0aGlzLnRyYW5zZm9ybSk7aWYoIXRoaXMuaGlkZGVuTmFtZSl7dGhpcy5oaWRkZW5OYW1lPUMubmFtZX1pZighdGhpcy5zdG9yZSl7dGhpcy5tb2RlPSJsb2NhbCI7dmFyIEc9W10sRD1DLm9wdGlvbnM7Zm9yKHZhciBCPTAsQT1ELmxlbmd0aDtCPEE7QisrKXt2YXIgRj1EW0JdO3ZhciBFPShFeHQuaXNJRT9GLmdldEF0dHJpYnV0ZU5vZGUoInZhbHVlIikuc3BlY2lmaWVkOkYuaGFzQXR0cmlidXRlKCJ2YWx1ZSIpKT9GLnZhbHVlOkYudGV4dDtpZihGLnNlbGVjdGVkKXt0aGlzLnZhbHVlPUV9Ry5wdXNoKFtFLEYudGV4dF0pfXRoaXMuc3RvcmU9bmV3IEV4dC5kYXRhLlNpbXBsZVN0b3JlKHsiaWQiOjAsZmllbGRzOlsidmFsdWUiLCJ0ZXh0Il0sZGF0YTpHfSk7dGhpcy52YWx1ZUZpZWxkPSJ2YWx1ZSI7dGhpcy5kaXNwbGF5RmllbGQ9InRleHQifUMubmFtZT1FeHQuaWQoKTtpZighdGhpcy5sYXp5UmVuZGVyKXt0aGlzLnRhcmdldD10cnVlO3RoaXMuZWw9RXh0LkRvbUhlbHBlci5pbnNlcnRCZWZvcmUoQyx0aGlzLmF1dG9DcmVhdGV8fHRoaXMuZGVmYXVsdEF1dG9DcmVhdGUpO0V4dC5yZW1vdmVOb2RlKEMpO3RoaXMucmVuZGVyKHRoaXMuZWwucGFyZW50Tm9kZSl9ZWxzZXtFeHQucmVtb3ZlTm9kZShDKX19dGhpcy5zZWxlY3RlZEluZGV4PS0xO2lmKHRoaXMubW9kZT09ImxvY2FsIil7aWYodGhpcy5pbml0aWFsQ29uZmlnLnF1ZXJ5RGVsYXk9PT11bmRlZmluZWQpe3RoaXMucXVlcnlEZWxheT0xMH1pZih0aGlzLmluaXRpYWxDb25maWcubWluQ2hhcnM9PT11bmRlZmluZWQpe3RoaXMubWluQ2hhcnM9MH19fSxvblJlbmRlcjpmdW5jdGlvbihCLEEpe0V4dC5mb3JtLkNvbWJvQm94LnN1cGVyY2xhc3Mub25SZW5kZXIuY2FsbCh0aGlzLEIsQSk7aWYodGhpcy5oaWRkZW5OYW1lKXt0aGlzLmhpZGRlbkZpZWxkPXRoaXMuZWwuaW5zZXJ0U2libGluZyh7dGFnOiJpbnB1dCIsdHlwZToiaGlkZGVuIixuYW1lOnRoaXMuaGlkZGVuTmFtZSxpZDoodGhpcy5oaWRkZW5JZHx8dGhpcy5oaWRkZW5OYW1lKX0sImJlZm9yZSIsdHJ1ZSk7dGhpcy5oaWRkZW5GaWVsZC52YWx1ZT10aGlzLmhpZGRlblZhbHVlIT09dW5kZWZpbmVkP3RoaXMuaGlkZGVuVmFsdWU6dGhpcy52YWx1ZSE9PXVuZGVmaW5lZD90aGlzLnZhbHVlOiIiO3RoaXMuZWwuZG9tLnJlbW92ZUF0dHJpYnV0ZSgibmFtZSIpfWlmKEV4dC5pc0dlY2tvKXt0aGlzLmVsLmRvbS5zZXRBdHRyaWJ1dGUoImF1dG9jb21wbGV0ZSIsIm9mZiIpfWlmKCF0aGlzLmxhenlJbml0KXt0aGlzLmluaXRMaXN0KCl9ZWxzZXt0aGlzLm9uKCJmb2N1cyIsdGhpcy5pbml0TGlzdCx0aGlzLHtzaW5nbGU6dHJ1ZX0pfWlmKCF0aGlzLmVkaXRhYmxlKXt0aGlzLmVkaXRhYmxlPXRydWU7dGhpcy5zZXRFZGl0YWJsZShmYWxzZSl9fSxpbml0TGlzdDpmdW5jdGlvbigpe2lmKCF0aGlzLmxpc3Qpe3ZhciBBPSJ4LWNvbWJvLWxpc3QiO3RoaXMubGlzdD1uZXcgRXh0LkxheWVyKHtzaGFkb3c6dGhpcy5zaGFkb3csY2xzOltBLHRoaXMubGlzdENsYXNzXS5qb2luKCIgIiksY29uc3RyYWluOmZhbHNlfSk7dmFyIEI9dGhpcy5saXN0V2lkdGh8fE1hdGgubWF4KHRoaXMud3JhcC5nZXRXaWR0aCgpLHRoaXMubWluTGlzdFdpZHRoKTt0aGlzLmxpc3Quc2V0V2lkdGgoQik7dGhpcy5saXN0LnN3YWxsb3dFdmVudCgibW91c2V3aGVlbCIpO3RoaXMuYXNzZXRIZWlnaHQ9MDtpZih0aGlzLnRpdGxlKXt0aGlzLmhlYWRlcj10aGlzLmxpc3QuY3JlYXRlQ2hpbGQoe2NsczpBKyItaGQiLGh0bWw6dGhpcy50aXRsZX0pO3RoaXMuYXNzZXRIZWlnaHQrPXRoaXMuaGVhZGVyLmdldEhlaWdodCgpfXRoaXMuaW5uZXJMaXN0PXRoaXMubGlzdC5jcmVhdGVDaGlsZCh7Y2xzOkErIi1pbm5lciJ9KTt0aGlzLmlubmVyTGlzdC5vbigibW91c2VvdmVyIix0aGlzLm9uVmlld092ZXIsdGhpcyk7dGhpcy5pbm5lckxpc3Qub24oIm1vdXNlbW92ZSIsdGhpcy5vblZpZXdNb3ZlLHRoaXMpO3RoaXMuaW5uZXJMaXN0LnNldFdpZHRoKEItdGhpcy5saXN0LmdldEZyYW1lV2lkdGgoImxyIikpO2lmKHRoaXMucGFnZVNpemUpe3RoaXMuZm9vdGVyPXRoaXMubGlzdC5jcmVhdGVDaGlsZCh7Y2xzOkErIi1mdCJ9KTt0aGlzLnBhZ2VUYj1uZXcgRXh0LlBhZ2luZ1Rvb2xiYXIoe3N0b3JlOnRoaXMuc3RvcmUscGFnZVNpemU6dGhpcy5wYWdlU2l6ZSxyZW5kZXJUbzp0aGlzLmZvb3Rlcn0pO3RoaXMuYXNzZXRIZWlnaHQrPXRoaXMuZm9vdGVyLmdldEhlaWdodCgpfWlmKCF0aGlzLnRwbCl7dGhpcy50cGw9Ijx0cGwgZm9yPVwiLlwiPjxkaXYgY2xhc3M9XCIiK0ErIi1pdGVtXCI+eyIrdGhpcy5kaXNwbGF5RmllbGQrIn08L2Rpdj48L3RwbD4ifXRoaXMudmlldz1uZXcgRXh0LkRhdGFWaWV3KHthcHBseVRvOnRoaXMuaW5uZXJMaXN0LHRwbDp0aGlzLnRwbCxzaW5nbGVTZWxlY3Q6dHJ1ZSxzZWxlY3RlZENsYXNzOnRoaXMuc2VsZWN0ZWRDbGFzcyxpdGVtU2VsZWN0b3I6dGhpcy5pdGVtU2VsZWN0b3J8fCIuIitBKyItaXRlbSJ9KTt0aGlzLnZpZXcub24oImNsaWNrIix0aGlzLm9uVmlld0NsaWNrLHRoaXMpO3RoaXMuYmluZFN0b3JlKHRoaXMuc3RvcmUsdHJ1ZSk7aWYodGhpcy5yZXNpemFibGUpe3RoaXMucmVzaXplcj1uZXcgRXh0LlJlc2l6YWJsZSh0aGlzLmxpc3Qse3Bpbm5lZDp0cnVlLGhhbmRsZXM6InNlIn0pO3RoaXMucmVzaXplci5vbigicmVzaXplIixmdW5jdGlvbihFLEMsRCl7dGhpcy5tYXhIZWlnaHQ9RC10aGlzLmhhbmRsZUhlaWdodC10aGlzLmxpc3QuZ2V0RnJhbWVXaWR0aCgidGIiKS10aGlzLmFzc2V0SGVpZ2h0O3RoaXMubGlzdFdpZHRoPUM7dGhpcy5pbm5lckxpc3Quc2V0V2lkdGgoQy10aGlzLmxpc3QuZ2V0RnJhbWVXaWR0aCgibHIiKSk7dGhpcy5yZXN0cmljdEhlaWdodCgpfSx0aGlzKTt0aGlzW3RoaXMucGFnZVNpemU/ImZvb3RlciI6ImlubmVyTGlzdCJdLnNldFN0eWxlKCJtYXJnaW4tYm90dG9tIix0aGlzLmhhbmRsZUhlaWdodCsicHgiKX19fSxiaW5kU3RvcmU6ZnVuY3Rpb24oQSxCKXtpZih0aGlzLnN0b3JlJiYhQil7dGhpcy5zdG9yZS51bigiYmVmb3JlbG9hZCIsdGhpcy5vbkJlZm9yZUxvYWQsdGhpcyk7dGhpcy5zdG9yZS51bigibG9hZCIsdGhpcy5vbkxvYWQsdGhpcyk7dGhpcy5zdG9yZS51bigibG9hZGV4Y2VwdGlvbiIsdGhpcy5jb2xsYXBzZSx0aGlzKTtpZighQSl7dGhpcy5zdG9yZT1udWxsO2lmKHRoaXMudmlldyl7dGhpcy52aWV3LnNldFN0b3JlKG51bGwpfX19aWYoQSl7dGhpcy5zdG9yZT1FeHQuU3RvcmVNZ3IubG9va3VwKEEpO3RoaXMuc3RvcmUub24oImJlZm9yZWxvYWQiLHRoaXMub25CZWZvcmVMb2FkLHRoaXMpO3RoaXMuc3RvcmUub24oImxvYWQiLHRoaXMub25Mb2FkLHRoaXMpO3RoaXMuc3RvcmUub24oImxvYWRleGNlcHRpb24iLHRoaXMuY29sbGFwc2UsdGhpcyk7aWYodGhpcy52aWV3KXt0aGlzLnZpZXcuc2V0U3RvcmUoQSl9fX0saW5pdEV2ZW50czpmdW5jdGlvbigpe0V4dC5mb3JtLkNvbWJvQm94LnN1cGVyY2xhc3MuaW5pdEV2ZW50cy5jYWxsKHRoaXMpO3RoaXMua2V5TmF2PW5ldyBFeHQuS2V5TmF2KHRoaXMuZWwseyJ1cCI6ZnVuY3Rpb24oQSl7dGhpcy5pbktleU1vZGU9dHJ1ZTt0aGlzLnNlbGVjdFByZXYoKX0sImRvd24iOmZ1bmN0aW9uKEEpe2lmKCF0aGlzLmlzRXhwYW5kZWQoKSl7dGhpcy5vblRyaWdnZXJDbGljaygpfWVsc2V7dGhpcy5pbktleU1vZGU9dHJ1ZTt0aGlzLnNlbGVjdE5leHQoKX19LCJlbnRlciI6ZnVuY3Rpb24oQSl7dGhpcy5vblZpZXdDbGljaygpO3RoaXMuZGVsYXllZENoZWNrPXRydWU7dGhpcy51bnNldERlbGF5Q2hlY2suZGVmZXIoMTAsdGhpcyl9LCJlc2MiOmZ1bmN0aW9uKEEpe3RoaXMuY29sbGFwc2UoKX0sInRhYiI6ZnVuY3Rpb24oQSl7dGhpcy5vblZpZXdDbGljayhmYWxzZSk7cmV0dXJuIHRydWV9LHNjb3BlOnRoaXMsZG9SZWxheTpmdW5jdGlvbihDLEIsQSl7aWYoQT09ImRvd24ifHx0aGlzLnNjb3BlLmlzRXhwYW5kZWQoKSl7cmV0dXJuIEV4dC5LZXlOYXYucHJvdG90eXBlLmRvUmVsYXkuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiB0cnVlfSxmb3JjZUtleURvd246dHJ1ZX0pO3RoaXMucXVlcnlEZWxheT1NYXRoLm1heCh0aGlzLnF1ZXJ5RGVsYXl8fDEwLHRoaXMubW9kZT09ImxvY2FsIj8xMDoyNTApO3RoaXMuZHFUYXNrPW5ldyBFeHQudXRpbC5EZWxheWVkVGFzayh0aGlzLmluaXRRdWVyeSx0aGlzKTtpZih0aGlzLnR5cGVBaGVhZCl7dGhpcy50YVRhc2s9bmV3IEV4dC51dGlsLkRlbGF5ZWRUYXNrKHRoaXMub25UeXBlQWhlYWQsdGhpcyl9aWYodGhpcy5lZGl0YWJsZSE9PWZhbHNlKXt0aGlzLmVsLm9uKCJrZXl1cCIsdGhpcy5vbktleVVwLHRoaXMpfWlmKHRoaXMuZm9yY2VTZWxlY3Rpb24pe3RoaXMub24oImJsdXIiLHRoaXMuZG9Gb3JjZSx0aGlzKX19LG9uRGVzdHJveTpmdW5jdGlvbigpe2lmKHRoaXMudmlldyl7dGhpcy52aWV3LmVsLnJlbW92ZUFsbExpc3RlbmVycygpO3RoaXMudmlldy5lbC5yZW1vdmUoKTt0aGlzLnZpZXcucHVyZ2VMaXN0ZW5lcnMoKX1pZih0aGlzLmxpc3Qpe3RoaXMubGlzdC5kZXN0cm95KCl9dGhpcy5iaW5kU3RvcmUobnVsbCk7RXh0LmZvcm0uQ29tYm9Cb3guc3VwZXJjbGFzcy5vbkRlc3Ryb3kuY2FsbCh0aGlzKX0sdW5zZXREZWxheUNoZWNrOmZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXMuZGVsYXllZENoZWNrfSxmaXJlS2V5OmZ1bmN0aW9uKEEpe2lmKEEuaXNOYXZLZXlQcmVzcygpJiYhdGhpcy5pc0V4cGFuZGVkKCkmJiF0aGlzLmRlbGF5ZWRDaGVjayl7dGhpcy5maXJlRXZlbnQoInNwZWNpYWxrZXkiLHRoaXMsQSl9fSxvblJlc2l6ZTpmdW5jdGlvbihBLEIpe0V4dC5mb3JtLkNvbWJvQm94LnN1cGVyY2xhc3Mub25SZXNpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKHRoaXMubGlzdCYmdGhpcy5saXN0V2lkdGg9PT11bmRlZmluZWQpe3ZhciBDPU1hdGgubWF4KEEsdGhpcy5taW5MaXN0V2lkdGgpO3RoaXMubGlzdC5zZXRXaWR0aChDKTt0aGlzLmlubmVyTGlzdC5zZXRXaWR0aChDLXRoaXMubGlzdC5nZXRGcmFtZVdpZHRoKCJsciIpKX19LG9uRW5hYmxlOmZ1bmN0aW9uKCl7RXh0LmZvcm0uQ29tYm9Cb3guc3VwZXJjbGFzcy5vbkVuYWJsZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYodGhpcy5oaWRkZW5GaWVsZCl7dGhpcy5oaWRkZW5GaWVsZC5kaXNhYmxlZD1mYWxzZX19LG9uRGlzYWJsZTpmdW5jdGlvbigpe0V4dC5mb3JtLkNvbWJvQm94LnN1cGVyY2xhc3Mub25EaXNhYmxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZih0aGlzLmhpZGRlbkZpZWxkKXt0aGlzLmhpZGRlbkZpZWxkLmRpc2FibGVkPXRydWV9fSxzZXRFZGl0YWJsZTpmdW5jdGlvbihBKXtpZihBPT10aGlzLmVkaXRhYmxlKXtyZXR1cm4gfXRoaXMuZWRpdGFibGU9QTtpZighQSl7dGhpcy5lbC5kb20uc2V0QXR0cmlidXRlKCJyZWFkT25seSIsdHJ1ZSk7dGhpcy5lbC5vbigibW91c2Vkb3duIix0aGlzLm9uVHJpZ2dlckNsaWNrLHRoaXMpO3RoaXMuZWwuYWRkQ2xhc3MoIngtY29tYm8tbm9lZGl0Iil9ZWxzZXt0aGlzLmVsLmRvbS5zZXRBdHRyaWJ1dGUoInJlYWRPbmx5IixmYWxzZSk7dGhpcy5lbC51bigibW91c2Vkb3duIix0aGlzLm9uVHJpZ2dlckNsaWNrLHRoaXMpO3RoaXMuZWwucmVtb3ZlQ2xhc3MoIngtY29tYm8tbm9lZGl0Iil9fSxvbkJlZm9yZUxvYWQ6ZnVuY3Rpb24oKXtpZighdGhpcy5oYXNGb2N1cyl7cmV0dXJuIH10aGlzLmlubmVyTGlzdC51cGRhdGUodGhpcy5sb2FkaW5nVGV4dD8iPGRpdiBjbGFzcz1cImxvYWRpbmctaW5kaWNhdG9yXCI+Iit0aGlzLmxvYWRpbmdUZXh0KyI8L2Rpdj4iOiIiKTt0aGlzLnJlc3RyaWN0SGVpZ2h0KCk7dGhpcy5zZWxlY3RlZEluZGV4PS0xfSxvbkxvYWQ6ZnVuY3Rpb24oKXtpZighdGhpcy5oYXNGb2N1cyl7cmV0dXJuIH1pZih0aGlzLnN0b3JlLmdldENvdW50KCk+MCl7dGhpcy5leHBhbmQoKTt0aGlzLnJlc3RyaWN0SGVpZ2h0KCk7aWYodGhpcy5sYXN0UXVlcnk9PXRoaXMuYWxsUXVlcnkpe2lmKHRoaXMuZWRpdGFibGUpe3RoaXMuZWwuZG9tLnNlbGVjdCgpfWlmKCF0aGlzLnNlbGVjdEJ5VmFsdWUodGhpcy52YWx1ZSx0cnVlKSl7dGhpcy5zZWxlY3QoMCx0cnVlKX19ZWxzZXt0aGlzLnNlbGVjdE5leHQoKTtpZih0aGlzLnR5cGVBaGVhZCYmdGhpcy5sYXN0S2V5IT1FeHQuRXZlbnRPYmplY3QuQkFDS1NQQUNFJiZ0aGlzLmxhc3RLZXkhPUV4dC5FdmVudE9iamVjdC5ERUxFVEUpe3RoaXMudGFUYXNrLmRlbGF5KHRoaXMudHlwZUFoZWFkRGVsYXkpfX19ZWxzZXt0aGlzLm9uRW1wdHlSZXN1bHRzKCl9fSxvblR5cGVBaGVhZDpmdW5jdGlvbigpe2lmKHRoaXMuc3RvcmUuZ2V0Q291bnQoKT4wKXt2YXIgQj10aGlzLnN0b3JlLmdldEF0KDApO3ZhciBDPUIuZGF0YVt0aGlzLmRpc3BsYXlGaWVsZF07dmFyIEE9Qy5sZW5ndGg7dmFyIEQ9dGhpcy5nZXRSYXdWYWx1ZSgpLmxlbmd0aDtpZihEIT1BKXt0aGlzLnNldFJhd1ZhbHVlKEMpO3RoaXMuc2VsZWN0VGV4dChELEMubGVuZ3RoKX19fSxvblNlbGVjdDpmdW5jdGlvbihBLEIpe2lmKHRoaXMuZmlyZUV2ZW50KCJiZWZvcmVzZWxlY3QiLHRoaXMsQSxCKSE9PWZhbHNlKXt0aGlzLnNldFZhbHVlKEEuZGF0YVt0aGlzLnZhbHVlRmllbGR8fHRoaXMuZGlzcGxheUZpZWxkXSk7dGhpcy5jb2xsYXBzZSgpO3RoaXMuZmlyZUV2ZW50KCJzZWxlY3QiLHRoaXMsQSxCKX19LGdldFZhbHVlOmZ1bmN0aW9uKCl7aWYodGhpcy52YWx1ZUZpZWxkKXtyZXR1cm4gdHlwZW9mIHRoaXMudmFsdWUhPSJ1bmRlZmluZWQiP3RoaXMudmFsdWU6IiJ9ZWxzZXtyZXR1cm4gRXh0LmZvcm0uQ29tYm9Cb3guc3VwZXJjbGFzcy5nZXRWYWx1ZS5jYWxsKHRoaXMpfX0sY2xlYXJWYWx1ZTpmdW5jdGlvbigpe2lmKHRoaXMuaGlkZGVuRmllbGQpe3RoaXMuaGlkZGVuRmllbGQudmFsdWU9IiJ9dGhpcy5zZXRSYXdWYWx1ZSgiIik7dGhpcy5sYXN0U2VsZWN0aW9uVGV4dD0iIjt0aGlzLmFwcGx5RW1wdHlUZXh0KCk7dGhpcy52YWx1ZT0iIn0sc2V0VmFsdWU6ZnVuY3Rpb24oQSl7dmFyIEM9QTtpZih0aGlzLnZhbHVlRmllbGQpe3ZhciBCPXRoaXMuZmluZFJlY29yZCh0aGlzLnZhbHVlRmllbGQsQSk7aWYoQil7Qz1CLmRhdGFbdGhpcy5kaXNwbGF5RmllbGRdfWVsc2V7aWYodGhpcy52YWx1ZU5vdEZvdW5kVGV4dCE9PXVuZGVmaW5lZCl7Qz10aGlzLnZhbHVlTm90Rm91bmRUZXh0fX19dGhpcy5sYXN0U2VsZWN0aW9uVGV4dD1DO2lmKHRoaXMuaGlkZGVuRmllbGQpe3RoaXMuaGlkZGVuRmllbGQudmFsdWU9QX1FeHQuZm9ybS5Db21ib0JveC5zdXBlcmNsYXNzLnNldFZhbHVlLmNhbGwodGhpcyxDKTt0aGlzLnZhbHVlPUF9LGZpbmRSZWNvcmQ6ZnVuY3Rpb24oQyxCKXt2YXIgQTtpZih0aGlzLnN0b3JlLmdldENvdW50KCk+MCl7dGhpcy5zdG9yZS5lYWNoKGZ1bmN0aW9uKEQpe2lmKEQuZGF0YVtDXT09Qil7QT1EO3JldHVybiBmYWxzZX19KX1yZXR1cm4gQX0sb25WaWV3TW92ZTpmdW5jdGlvbihCLEEpe3RoaXMuaW5LZXlNb2RlPWZhbHNlfSxvblZpZXdPdmVyOmZ1bmN0aW9uKEQsQil7aWYodGhpcy5pbktleU1vZGUpe3JldHVybiB9dmFyIEM9dGhpcy52aWV3LmZpbmRJdGVtRnJvbUNoaWxkKEIpO2lmKEMpe3ZhciBBPXRoaXMudmlldy5pbmRleE9mKEMpO3RoaXMuc2VsZWN0KEEsZmFsc2UpfX0sb25WaWV3Q2xpY2s6ZnVuY3Rpb24oQil7dmFyIEE9dGhpcy52aWV3LmdldFNlbGVjdGVkSW5kZXhlcygpWzBdO3ZhciBDPXRoaXMuc3RvcmUuZ2V0QXQoQSk7aWYoQyl7dGhpcy5vblNlbGVjdChDLEEpfWlmKEIhPT1mYWxzZSl7dGhpcy5lbC5mb2N1cygpfX0scmVzdHJpY3RIZWlnaHQ6ZnVuY3Rpb24oKXt0aGlzLmlubmVyTGlzdC5kb20uc3R5bGUuaGVpZ2h0PSIiO3ZhciBCPXRoaXMuaW5uZXJMaXN0LmRvbTt2YXIgRT10aGlzLmxpc3QuZ2V0RnJhbWVXaWR0aCgidGIiKSsodGhpcy5yZXNpemFibGU/dGhpcy5oYW5kbGVIZWlnaHQ6MCkrdGhpcy5hc3NldEhlaWdodDt2YXIgQz1NYXRoLm1heChCLmNsaWVudEhlaWdodCxCLm9mZnNldEhlaWdodCxCLnNjcm9sbEhlaWdodCk7aWYoKEMtQi5jbGllbnRIZWlnaHQpPj0xOCl7Qys9MTg7fXZhciBBPXRoaXMuZ2V0UG9zaXRpb24oKVsxXS1FeHQuZ2V0Qm9keSgpLmdldFNjcm9sbCgpLnRvcDt2YXIgRj1FeHQubGliLkRvbS5nZXRWaWV3SGVpZ2h0KCktQS10aGlzLmdldFNpemUoKS5oZWlnaHQ7dmFyIEQ9TWF0aC5tYXgoQSxGLHRoaXMubWluSGVpZ2h0fHwwKS10aGlzLmxpc3Quc2hhZG93Lm9mZnNldC1FLTI7Qz1NYXRoLm1pbihDLEQsdGhpcy5tYXhIZWlnaHQpO3RoaXMuaW5uZXJMaXN0LnNldEhlaWdodChDPDQwPzQwOkMpO3RoaXMubGlzdC5iZWdpblVwZGF0ZSgpO3RoaXMubGlzdC5zZXRIZWlnaHQoQytFKTt0aGlzLmxpc3QuYWxpZ25Ubyh0aGlzLmVsLHRoaXMubGlzdEFsaWduKTt0aGlzLmxpc3QuZW5kVXBkYXRlKCl9LG9uRW1wdHlSZXN1bHRzOmZ1bmN0aW9uKCl7dGhpcy5jb2xsYXBzZSgpfSxpc0V4cGFuZGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGlzdCYmdGhpcy5saXN0LmlzVmlzaWJsZSgpfSxzZWxlY3RCeVZhbHVlOmZ1bmN0aW9uKEEsQyl7aWYoQSE9PXVuZGVmaW5lZCYmQSE9PW51bGwpe3ZhciBCPXRoaXMuZmluZFJlY29yZCh0aGlzLnZhbHVlRmllbGR8fHRoaXMuZGlzcGxheUZpZWxkLEEpO2lmKEIpe3RoaXMuc2VsZWN0KHRoaXMuc3RvcmUuaW5kZXhPZihCKSxDKTtyZXR1cm4gdHJ1ZX19cmV0dXJuIGZhbHNlfSxzZWxlY3Q6ZnVuY3Rpb24oQSxDKXt0aGlzLnNlbGVjdGVkSW5kZXg9QTt0aGlzLnZpZXcuc2VsZWN0KEEpO2lmKEMhPT1mYWxzZSl7dmFyIEI9dGhpcy52aWV3LmdldE5vZGUoQSk7aWYoQil7dGhpcy5pbm5lckxpc3Quc2Nyb2xsQ2hpbGRJbnRvVmlldyhCLGZhbHNlKX19fSxzZWxlY3ROZXh0OmZ1bmN0aW9uKCl7dmFyIEE9dGhpcy5zdG9yZS5nZXRDb3VudCgpO2lmKEE+MCl7aWYodGhpcy5zZWxlY3RlZEluZGV4PT0tMSl7dGhpcy5zZWxlY3QoMCl9ZWxzZXtpZih0aGlzLnNlbGVjdGVkSW5kZXg8QS0xKXt0aGlzLnNlbGVjdCh0aGlzLnNlbGVjdGVkSW5kZXgrMSl9fX19LHNlbGVjdFByZXY6ZnVuY3Rpb24oKXt2YXIgQT10aGlzLnN0b3JlLmdldENvdW50KCk7aWYoQT4wKXtpZih0aGlzLnNlbGVjdGVkSW5kZXg9PS0xKXt0aGlzLnNlbGVjdCgwKX1lbHNle2lmKHRoaXMuc2VsZWN0ZWRJbmRleCE9MCl7dGhpcy5zZWxlY3QodGhpcy5zZWxlY3RlZEluZGV4LTEpfX19fSxvbktleVVwOmZ1bmN0aW9uKEEpe2lmKHRoaXMuZWRpdGFibGUhPT1mYWxzZSYmIUEuaXNTcGVjaWFsS2V5KCkpe3RoaXMubGFzdEtleT1BLmdldEtleSgpO3RoaXMuZHFUYXNrLmRlbGF5KHRoaXMucXVlcnlEZWxheSl9fSx2YWxpZGF0ZUJsdXI6ZnVuY3Rpb24oKXtyZXR1cm4gIXRoaXMubGlzdHx8IXRoaXMubGlzdC5pc1Zpc2libGUoKX0saW5pdFF1ZXJ5OmZ1bmN0aW9uKCl7dGhpcy5kb1F1ZXJ5KHRoaXMuZ2V0UmF3VmFsdWUoKSl9LGRvRm9yY2U6ZnVuY3Rpb24oKXtpZih0aGlzLmVsLmRvbS52YWx1ZS5sZW5ndGg+MCl7dGhpcy5lbC5kb20udmFsdWU9dGhpcy5sYXN0U2VsZWN0aW9uVGV4dD09PXVuZGVmaW5lZD8iIjp0aGlzLmxhc3RTZWxlY3Rpb25UZXh0O3RoaXMuYXBwbHlFbXB0eVRleHQoKX19LGRvUXVlcnk6ZnVuY3Rpb24oQyxCKXtpZihDPT09dW5kZWZpbmVkfHxDPT09bnVsbCl7Qz0iIn12YXIgQT17cXVlcnk6Qyxmb3JjZUFsbDpCLGNvbWJvOnRoaXMsY2FuY2VsOmZhbHNlfTtpZih0aGlzLmZpcmVFdmVudCgiYmVmb3JlcXVlcnkiLEEpPT09ZmFsc2V8fEEuY2FuY2VsKXtyZXR1cm4gZmFsc2V9Qz1BLnF1ZXJ5O0I9QS5mb3JjZUFsbDtpZihCPT09dHJ1ZXx8KEMubGVuZ3RoPj10aGlzLm1pbkNoYXJzKSl7aWYodGhpcy5sYXN0UXVlcnkhPT1DKXt0aGlzLmxhc3RRdWVyeT1DO2lmKHRoaXMubW9kZT09ImxvY2FsIil7dGhpcy5zZWxlY3RlZEluZGV4PS0xO2lmKEIpe3RoaXMuc3RvcmUuY2xlYXJGaWx0ZXIoKX1lbHNle3RoaXMuc3RvcmUuZmlsdGVyKHRoaXMuZGlzcGxheUZpZWxkLEMpfXRoaXMub25Mb2FkKCl9ZWxzZXt0aGlzLnN0b3JlLmJhc2VQYXJhbXNbdGhpcy5xdWVyeVBhcmFtXT1DO3RoaXMuc3RvcmUubG9hZCh7cGFyYW1zOnRoaXMuZ2V0UGFyYW1zKEMpfSk7dGhpcy5leHBhbmQoKX19ZWxzZXt0aGlzLnNlbGVjdGVkSW5kZXg9LTE7dGhpcy5vbkxvYWQoKX19fSxnZXRQYXJhbXM6ZnVuY3Rpb24oQSl7dmFyIEI9e307aWYodGhpcy5wYWdlU2l6ZSl7Qi5zdGFydD0wO0IubGltaXQ9dGhpcy5wYWdlU2l6ZX1yZXR1cm4gQn0sY29sbGFwc2U6ZnVuY3Rpb24oKXtpZighdGhpcy5pc0V4cGFuZGVkKCkpe3JldHVybiB9dGhpcy5saXN0LmhpZGUoKTtFeHQuZ2V0RG9jKCkudW4oIm1vdXNld2hlZWwiLHRoaXMuY29sbGFwc2VJZix0aGlzKTtFeHQuZ2V0RG9jKCkudW4oIm1vdXNlZG93biIsdGhpcy5jb2xsYXBzZUlmLHRoaXMpO3RoaXMuZmlyZUV2ZW50KCJjb2xsYXBzZSIsdGhpcyl9LGNvbGxhcHNlSWY6ZnVuY3Rpb24oQSl7aWYoIUEud2l0aGluKHRoaXMud3JhcCkmJiFBLndpdGhpbih0aGlzLmxpc3QpKXt0aGlzLmNvbGxhcHNlKCl9fSxleHBhbmQ6ZnVuY3Rpb24oKXtpZih0aGlzLmlzRXhwYW5kZWQoKXx8IXRoaXMuaGFzRm9jdXMpe3JldHVybiB9dGhpcy5saXN0LmFsaWduVG8odGhpcy53cmFwLHRoaXMubGlzdEFsaWduKTt0aGlzLmxpc3Quc2hvdygpO3RoaXMuaW5uZXJMaXN0LnNldE92ZXJmbG93KCJhdXRvIik7RXh0LmdldERvYygpLm9uKCJtb3VzZXdoZWVsIix0aGlzLmNvbGxhcHNlSWYsdGhpcyk7RXh0LmdldERvYygpLm9uKCJtb3VzZWRvd24iLHRoaXMuY29sbGFwc2VJZix0aGlzKTt0aGlzLmZpcmVFdmVudCgiZXhwYW5kIix0aGlzKX0sb25UcmlnZ2VyQ2xpY2s6ZnVuY3Rpb24oKXtpZih0aGlzLmRpc2FibGVkKXtyZXR1cm4gfWlmKHRoaXMuaXNFeHBhbmRlZCgpKXt0aGlzLmNvbGxhcHNlKCk7dGhpcy5lbC5mb2N1cygpfWVsc2V7dGhpcy5vbkZvY3VzKHt9KTtpZih0aGlzLnRyaWdnZXJBY3Rpb249PSJhbGwiKXt0aGlzLmRvUXVlcnkodGhpcy5hbGxRdWVyeSx0cnVlKX1lbHNle3RoaXMuZG9RdWVyeSh0aGlzLmdldFJhd1ZhbHVlKCkpfXRoaXMuZWwuZm9jdXMoKX19fSk7RXh0LnJlZygiY29tYm8iLEV4dC5mb3JtLkNvbWJvQm94KTsNCkV4dC5mb3JtLkNoZWNrYm94PUV4dC5leHRlbmQoRXh0LmZvcm0uRmllbGQse2ZvY3VzQ2xhc3M6dW5kZWZpbmVkLGZpZWxkQ2xhc3M6IngtZm9ybS1maWVsZCIsY2hlY2tlZDpmYWxzZSxkZWZhdWx0QXV0b0NyZWF0ZTp7dGFnOiJpbnB1dCIsdHlwZToiY2hlY2tib3giLGF1dG9jb21wbGV0ZToib2ZmIn0saW5pdENvbXBvbmVudDpmdW5jdGlvbigpe0V4dC5mb3JtLkNoZWNrYm94LnN1cGVyY2xhc3MuaW5pdENvbXBvbmVudC5jYWxsKHRoaXMpO3RoaXMuYWRkRXZlbnRzKCJjaGVjayIpfSxvblJlc2l6ZTpmdW5jdGlvbigpe0V4dC5mb3JtLkNoZWNrYm94LnN1cGVyY2xhc3Mub25SZXNpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKCF0aGlzLmJveExhYmVsKXt0aGlzLmVsLmFsaWduVG8odGhpcy53cmFwLCJjLWMiKX19LGluaXRFdmVudHM6ZnVuY3Rpb24oKXtFeHQuZm9ybS5DaGVja2JveC5zdXBlcmNsYXNzLmluaXRFdmVudHMuY2FsbCh0aGlzKTt0aGlzLmVsLm9uKCJjbGljayIsdGhpcy5vbkNsaWNrLHRoaXMpO3RoaXMuZWwub24oImNoYW5nZSIsdGhpcy5vbkNsaWNrLHRoaXMpfSxnZXRSZXNpemVFbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLndyYXB9LGdldFBvc2l0aW9uRWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53cmFwfSxtYXJrSW52YWxpZDpFeHQuZW1wdHlGbixjbGVhckludmFsaWQ6RXh0LmVtcHR5Rm4sb25SZW5kZXI6ZnVuY3Rpb24oQixBKXtFeHQuZm9ybS5DaGVja2JveC5zdXBlcmNsYXNzLm9uUmVuZGVyLmNhbGwodGhpcyxCLEEpO2lmKHRoaXMuaW5wdXRWYWx1ZSE9PXVuZGVmaW5lZCl7dGhpcy5lbC5kb20udmFsdWU9dGhpcy5pbnB1dFZhbHVlfXRoaXMud3JhcD10aGlzLmVsLndyYXAoe2NsczoieC1mb3JtLWNoZWNrLXdyYXAifSk7aWYodGhpcy5ib3hMYWJlbCl7dGhpcy53cmFwLmNyZWF0ZUNoaWxkKHt0YWc6ImxhYmVsIixodG1sRm9yOnRoaXMuZWwuaWQsY2xzOiJ4LWZvcm0tY2ItbGFiZWwiLGh0bWw6dGhpcy5ib3hMYWJlbH0pfWlmKHRoaXMuY2hlY2tlZCl7dGhpcy5zZXRWYWx1ZSh0cnVlKX1lbHNle3RoaXMuY2hlY2tlZD10aGlzLmVsLmRvbS5jaGVja2VkfX0sb25EZXN0cm95OmZ1bmN0aW9uKCl7aWYodGhpcy53cmFwKXt0aGlzLndyYXAucmVtb3ZlKCl9RXh0LmZvcm0uQ2hlY2tib3guc3VwZXJjbGFzcy5vbkRlc3Ryb3kuY2FsbCh0aGlzKX0saW5pdFZhbHVlOkV4dC5lbXB0eUZuLGdldFZhbHVlOmZ1bmN0aW9uKCl7aWYodGhpcy5yZW5kZXJlZCl7cmV0dXJuIHRoaXMuZWwuZG9tLmNoZWNrZWR9cmV0dXJuIGZhbHNlfSxvbkNsaWNrOmZ1bmN0aW9uKCl7aWYodGhpcy5lbC5kb20uY2hlY2tlZCE9dGhpcy5jaGVja2VkKXt0aGlzLnNldFZhbHVlKHRoaXMuZWwuZG9tLmNoZWNrZWQpfX0sc2V0VmFsdWU6ZnVuY3Rpb24oQSl7dGhpcy5jaGVja2VkPShBPT09dHJ1ZXx8QT09PSJ0cnVlInx8QT09IjEifHxTdHJpbmcoQSkudG9Mb3dlckNhc2UoKT09Im9uIik7aWYodGhpcy5lbCYmdGhpcy5lbC5kb20pe3RoaXMuZWwuZG9tLmNoZWNrZWQ9dGhpcy5jaGVja2VkO3RoaXMuZWwuZG9tLmRlZmF1bHRDaGVja2VkPXRoaXMuY2hlY2tlZH10aGlzLmZpcmVFdmVudCgiY2hlY2siLHRoaXMsdGhpcy5jaGVja2VkKX19KTtFeHQucmVnKCJjaGVja2JveCIsRXh0LmZvcm0uQ2hlY2tib3gpOw0KRXh0LmZvcm0uUmFkaW89RXh0LmV4dGVuZChFeHQuZm9ybS5DaGVja2JveCx7aW5wdXRUeXBlOiJyYWRpbyIsbWFya0ludmFsaWQ6RXh0LmVtcHR5Rm4sY2xlYXJJbnZhbGlkOkV4dC5lbXB0eUZuLGdldEdyb3VwVmFsdWU6ZnVuY3Rpb24oKXt2YXIgQT10aGlzLmVsLnVwKCJmb3JtIil8fEV4dC5nZXRCb2R5KCk7dmFyIEI9QS5jaGlsZCgiaW5wdXRbbmFtZT0iK3RoaXMuZWwuZG9tLm5hbWUrIl06Y2hlY2tlZCIsdHJ1ZSk7cmV0dXJuIEI/Qi52YWx1ZTpudWxsfSxvbkNsaWNrOmZ1bmN0aW9uKCl7aWYodGhpcy5lbC5kb20uY2hlY2tlZCE9dGhpcy5jaGVja2VkKXt2YXIgQj10aGlzLmVsLnVwKCJmb3JtIil8fEV4dC5nZXRCb2R5KCk7dmFyIEE9Qi5zZWxlY3QoImlucHV0W25hbWU9Iit0aGlzLmVsLmRvbS5uYW1lKyJdIik7QS5lYWNoKGZ1bmN0aW9uKEMpe2lmKEMuZG9tLmlkPT10aGlzLmlkKXt0aGlzLnNldFZhbHVlKHRydWUpfWVsc2V7RXh0LmdldENtcChDLmRvbS5pZCkuc2V0VmFsdWUoZmFsc2UpfX0sdGhpcyl9fSxzZXRWYWx1ZTpmdW5jdGlvbihBKXtpZih0eXBlb2YgQT09ImJvb2xlYW4iKXtFeHQuZm9ybS5SYWRpby5zdXBlcmNsYXNzLnNldFZhbHVlLmNhbGwodGhpcyxBKX1lbHNle3ZhciBCPXRoaXMuZWwudXAoImZvcm0iKS5jaGlsZCgiaW5wdXRbbmFtZT0iK3RoaXMuZWwuZG9tLm5hbWUrIl1bdmFsdWU9IitBKyJdIix0cnVlKTtpZihCKXtCLmNoZWNrZWQ9dHJ1ZX19fX0pO0V4dC5yZWcoInJhZGlvIixFeHQuZm9ybS5SYWRpbyk7DQpFeHQuZm9ybS5IaWRkZW49RXh0LmV4dGVuZChFeHQuZm9ybS5GaWVsZCx7aW5wdXRUeXBlOiJoaWRkZW4iLG9uUmVuZGVyOmZ1bmN0aW9uKCl7RXh0LmZvcm0uSGlkZGVuLnN1cGVyY2xhc3Mub25SZW5kZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxpbml0RXZlbnRzOmZ1bmN0aW9uKCl7dGhpcy5vcmlnaW5hbFZhbHVlPXRoaXMuZ2V0VmFsdWUoKX0sc2V0U2l6ZTpFeHQuZW1wdHlGbixzZXRXaWR0aDpFeHQuZW1wdHlGbixzZXRIZWlnaHQ6RXh0LmVtcHR5Rm4sc2V0UG9zaXRpb246RXh0LmVtcHR5Rm4sc2V0UGFnZVBvc2l0aW9uOkV4dC5lbXB0eUZuLG1hcmtJbnZhbGlkOkV4dC5lbXB0eUZuLGNsZWFySW52YWxpZDpFeHQuZW1wdHlGbn0pO0V4dC5yZWcoImhpZGRlbiIsRXh0LmZvcm0uSGlkZGVuKTsNCkV4dC5mb3JtLkJhc2ljRm9ybT1mdW5jdGlvbihCLEEpe0V4dC5hcHBseSh0aGlzLEEpO3RoaXMuaXRlbXM9bmV3IEV4dC51dGlsLk1peGVkQ29sbGVjdGlvbihmYWxzZSxmdW5jdGlvbihDKXtyZXR1cm4gQy5pZHx8KEMuaWQ9RXh0LmlkKCkpfSk7dGhpcy5hZGRFdmVudHMoImJlZm9yZWFjdGlvbiIsImFjdGlvbmZhaWxlZCIsImFjdGlvbmNvbXBsZXRlIik7aWYoQil7dGhpcy5pbml0RWwoQil9RXh0LmZvcm0uQmFzaWNGb3JtLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKX07RXh0LmV4dGVuZChFeHQuZm9ybS5CYXNpY0Zvcm0sRXh0LnV0aWwuT2JzZXJ2YWJsZSx7dGltZW91dDozMCxhY3RpdmVBY3Rpb246bnVsbCx0cmFja1Jlc2V0T25Mb2FkOmZhbHNlLGluaXRFbDpmdW5jdGlvbihBKXt0aGlzLmVsPUV4dC5nZXQoQSk7dGhpcy5pZD10aGlzLmVsLmlkfHxFeHQuaWQoKTtpZighdGhpcy5zdGFuZGFyZFN1Ym1pdCl7dGhpcy5lbC5vbigic3VibWl0Iix0aGlzLm9uU3VibWl0LHRoaXMpfXRoaXMuZWwuYWRkQ2xhc3MoIngtZm9ybSIpfSxnZXRFbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsfSxvblN1Ym1pdDpmdW5jdGlvbihBKXtBLnN0b3BFdmVudCgpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5pdGVtcy5lYWNoKGZ1bmN0aW9uKEEpe0V4dC5kZXN0cm95KEEpfSk7aWYodGhpcy5lbCl7dGhpcy5lbC5yZW1vdmVBbGxMaXN0ZW5lcnMoKTt0aGlzLmVsLnJlbW92ZSgpfXRoaXMucHVyZ2VMaXN0ZW5lcnMoKX0saXNWYWxpZDpmdW5jdGlvbigpe3ZhciBBPXRydWU7dGhpcy5pdGVtcy5lYWNoKGZ1bmN0aW9uKEIpe2lmKCFCLnZhbGlkYXRlKCkpe0E9ZmFsc2V9fSk7cmV0dXJuIEF9LGlzRGlydHk6ZnVuY3Rpb24oKXt2YXIgQT1mYWxzZTt0aGlzLml0ZW1zLmVhY2goZnVuY3Rpb24oQil7aWYoQi5pc0RpcnR5KCkpe0E9dHJ1ZTtyZXR1cm4gZmFsc2V9fSk7cmV0dXJuIEF9LGRvQWN0aW9uOmZ1bmN0aW9uKEIsQSl7aWYodHlwZW9mIEI9PSJzdHJpbmciKXtCPW5ldyBFeHQuZm9ybS5BY3Rpb24uQUNUSU9OX1RZUEVTW0JdKHRoaXMsQSl9aWYodGhpcy5maXJlRXZlbnQoImJlZm9yZWFjdGlvbiIsdGhpcyxCKSE9PWZhbHNlKXt0aGlzLmJlZm9yZUFjdGlvbihCKTtCLnJ1bi5kZWZlcigxMDAsQil9cmV0dXJuIHRoaXN9LHN1Ym1pdDpmdW5jdGlvbihCKXtpZih0aGlzLnN0YW5kYXJkU3VibWl0KXt2YXIgQT10aGlzLmlzVmFsaWQoKTtpZihBKXt0aGlzLmVsLmRvbS5zdWJtaXQoKX1yZXR1cm4gQX10aGlzLmRvQWN0aW9uKCJzdWJtaXQiLEIpO3JldHVybiB0aGlzfSxsb2FkOmZ1bmN0aW9uKEEpe3RoaXMuZG9BY3Rpb24oImxvYWQiLEEpO3JldHVybiB0aGlzfSx1cGRhdGVSZWNvcmQ6ZnVuY3Rpb24oQil7Qi5iZWdpbkVkaXQoKTt2YXIgQT1CLmZpZWxkcztBLmVhY2goZnVuY3Rpb24oQyl7dmFyIEQ9dGhpcy5maW5kRmllbGQoQy5uYW1lKTtpZihEKXtCLnNldChDLm5hbWUsRC5nZXRWYWx1ZSgpKX19LHRoaXMpO0IuZW5kRWRpdCgpO3JldHVybiB0aGlzfSxsb2FkUmVjb3JkOmZ1bmN0aW9uKEEpe3RoaXMuc2V0VmFsdWVzKEEuZGF0YSk7cmV0dXJuIHRoaXN9LGJlZm9yZUFjdGlvbjpmdW5jdGlvbihBKXt2YXIgQj1BLm9wdGlvbnM7aWYoQi53YWl0TXNnKXtpZih0aGlzLndhaXRNc2dUYXJnZXQ9PT10cnVlKXt0aGlzLmVsLm1hc2soQi53YWl0TXNnLCJ4LW1hc2stbG9hZGluZyIpfWVsc2V7aWYodGhpcy53YWl0TXNnVGFyZ2V0KXt0aGlzLndhaXRNc2dUYXJnZXQ9RXh0LmdldCh0aGlzLndhaXRNc2dUYXJnZXQpO3RoaXMud2FpdE1zZ1RhcmdldC5tYXNrKEIud2FpdE1zZywieC1tYXNrLWxvYWRpbmciKX1lbHNle0V4dC5NZXNzYWdlQm94LndhaXQoQi53YWl0TXNnLEIud2FpdFRpdGxlfHx0aGlzLndhaXRUaXRsZXx8IlBsZWFzZSBXYWl0Li4uIil9fX19LGFmdGVyQWN0aW9uOmZ1bmN0aW9uKEEsQyl7dGhpcy5hY3RpdmVBY3Rpb249bnVsbDt2YXIgQj1BLm9wdGlvbnM7aWYoQi53YWl0TXNnKXtpZih0aGlzLndhaXRNc2dUYXJnZXQ9PT10cnVlKXt0aGlzLmVsLnVubWFzaygpfWVsc2V7aWYodGhpcy53YWl0TXNnVGFyZ2V0KXt0aGlzLndhaXRNc2dUYXJnZXQudW5tYXNrKCl9ZWxzZXtFeHQuTWVzc2FnZUJveC51cGRhdGVQcm9ncmVzcygxKTtFeHQuTWVzc2FnZUJveC5oaWRlKCl9fX1pZihDKXtpZihCLnJlc2V0KXt0aGlzLnJlc2V0KCl9RXh0LmNhbGxiYWNrKEIuc3VjY2VzcyxCLnNjb3BlLFt0aGlzLEFdKTt0aGlzLmZpcmVFdmVudCgiYWN0aW9uY29tcGxldGUiLHRoaXMsQSl9ZWxzZXtFeHQuY2FsbGJhY2soQi5mYWlsdXJlLEIuc2NvcGUsW3RoaXMsQV0pO3RoaXMuZmlyZUV2ZW50KCJhY3Rpb25mYWlsZWQiLHRoaXMsQSl9fSxmaW5kRmllbGQ6ZnVuY3Rpb24oQil7dmFyIEE9dGhpcy5pdGVtcy5nZXQoQik7aWYoIUEpe3RoaXMuaXRlbXMuZWFjaChmdW5jdGlvbihDKXtpZihDLmlzRm9ybUZpZWxkJiYoQy5kYXRhSW5kZXg9PUJ8fEMuaWQ9PUJ8fEMuZ2V0TmFtZSgpPT1CKSl7QT1DO3JldHVybiBmYWxzZX19KX1yZXR1cm4gQXx8bnVsbH0sbWFya0ludmFsaWQ6ZnVuY3Rpb24oRyl7aWYoRXh0LmlzQXJyYXkoRykpe2Zvcih2YXIgQz0wLEE9Ry5sZW5ndGg7QzxBO0MrKyl7dmFyIEI9R1tDXTt2YXIgRD10aGlzLmZpbmRGaWVsZChCLmlkKTtpZihEKXtELm1hcmtJbnZhbGlkKEIubXNnKX19fWVsc2V7dmFyIEUsRjtmb3IoRiBpbiBHKXtpZih0eXBlb2YgR1tGXSE9ImZ1bmN0aW9uIiYmKEU9dGhpcy5maW5kRmllbGQoRikpKXtFLm1hcmtJbnZhbGlkKEdbRl0pfX19cmV0dXJuIHRoaXN9LHNldFZhbHVlczpmdW5jdGlvbihDKXtpZihFeHQuaXNBcnJheShDKSl7Zm9yKHZhciBEPTAsQT1DLmxlbmd0aDtEPEE7RCsrKXt2YXIgQj1DW0RdO3ZhciBFPXRoaXMuZmluZEZpZWxkKEIuaWQpO2lmKEUpe0Uuc2V0VmFsdWUoQi52YWx1ZSk7aWYodGhpcy50cmFja1Jlc2V0T25Mb2FkKXtFLm9yaWdpbmFsVmFsdWU9RS5nZXRWYWx1ZSgpfX19fWVsc2V7dmFyIEYsRztmb3IoRyBpbiBDKXtpZih0eXBlb2YgQ1tHXSE9ImZ1bmN0aW9uIiYmKEY9dGhpcy5maW5kRmllbGQoRykpKXtGLnNldFZhbHVlKENbR10pO2lmKHRoaXMudHJhY2tSZXNldE9uTG9hZCl7Ri5vcmlnaW5hbFZhbHVlPUYuZ2V0VmFsdWUoKX19fX1yZXR1cm4gdGhpc30sZ2V0VmFsdWVzOmZ1bmN0aW9uKEIpe3ZhciBBPUV4dC5saWIuQWpheC5zZXJpYWxpemVGb3JtKHRoaXMuZWwuZG9tKTtpZihCPT09dHJ1ZSl7cmV0dXJuIEF9cmV0dXJuIEV4dC51cmxEZWNvZGUoQSl9LGNsZWFySW52YWxpZDpmdW5jdGlvbigpe3RoaXMuaXRlbXMuZWFjaChmdW5jdGlvbihBKXtBLmNsZWFySW52YWxpZCgpfSk7cmV0dXJuIHRoaXN9LHJlc2V0OmZ1bmN0aW9uKCl7dGhpcy5pdGVtcy5lYWNoKGZ1bmN0aW9uKEEpe0EucmVzZXQoKX0pO3JldHVybiB0aGlzfSxhZGQ6ZnVuY3Rpb24oKXt0aGlzLml0ZW1zLmFkZEFsbChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMCkpO3JldHVybiB0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oQSl7dGhpcy5pdGVtcy5yZW1vdmUoQSk7cmV0dXJuIHRoaXN9LHJlbmRlcjpmdW5jdGlvbigpe3RoaXMuaXRlbXMuZWFjaChmdW5jdGlvbihBKXtpZihBLmlzRm9ybUZpZWxkJiYhQS5yZW5kZXJlZCYmZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoQS5pZCkpe0EuYXBwbHlUb01hcmt1cChBLmlkKX19KTtyZXR1cm4gdGhpc30sYXBwbHlUb0ZpZWxkczpmdW5jdGlvbihBKXt0aGlzLml0ZW1zLmVhY2goZnVuY3Rpb24oQil7RXh0LmFwcGx5KEIsQSl9KTtyZXR1cm4gdGhpc30sYXBwbHlJZlRvRmllbGRzOmZ1bmN0aW9uKEEpe3RoaXMuaXRlbXMuZWFjaChmdW5jdGlvbihCKXtFeHQuYXBwbHlJZihCLEEpfSk7cmV0dXJuIHRoaXN9fSk7RXh0LkJhc2ljRm9ybT1FeHQuZm9ybS5CYXNpY0Zvcm07DQpFeHQuRm9ybVBhbmVsPUV4dC5leHRlbmQoRXh0LlBhbmVsLHtidXR0b25BbGlnbjoiY2VudGVyIixtaW5CdXR0b25XaWR0aDo3NSxsYWJlbEFsaWduOiJsZWZ0Iixtb25pdG9yVmFsaWQ6ZmFsc2UsbW9uaXRvclBvbGw6MjAwLGxheW91dDoiZm9ybSIsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe3RoaXMuZm9ybT10aGlzLmNyZWF0ZUZvcm0oKTtFeHQuRm9ybVBhbmVsLnN1cGVyY2xhc3MuaW5pdENvbXBvbmVudC5jYWxsKHRoaXMpO3RoaXMuYWRkRXZlbnRzKCJjbGllbnR2YWxpZGF0aW9uIik7dGhpcy5yZWxheUV2ZW50cyh0aGlzLmZvcm0sWyJiZWZvcmVhY3Rpb24iLCJhY3Rpb25mYWlsZWQiLCJhY3Rpb25jb21wbGV0ZSJdKX0sY3JlYXRlRm9ybTpmdW5jdGlvbigpe2RlbGV0ZSB0aGlzLmluaXRpYWxDb25maWcubGlzdGVuZXJzO3JldHVybiBuZXcgRXh0LmZvcm0uQmFzaWNGb3JtKG51bGwsdGhpcy5pbml0aWFsQ29uZmlnKX0saW5pdEZpZWxkczpmdW5jdGlvbigpe3ZhciBDPXRoaXMuZm9ybTt2YXIgQT10aGlzO3ZhciBCPWZ1bmN0aW9uKEQpe2lmKEQuZG9MYXlvdXQmJkQhPUEpe0V4dC5hcHBseUlmKEQse2xhYmVsQWxpZ246RC5vd25lckN0LmxhYmVsQWxpZ24sbGFiZWxXaWR0aDpELm93bmVyQ3QubGFiZWxXaWR0aCxpdGVtQ2xzOkQub3duZXJDdC5pdGVtQ2xzfSk7aWYoRC5pdGVtcyl7RC5pdGVtcy5lYWNoKEIpfX1lbHNle2lmKEQuaXNGb3JtRmllbGQpe0MuYWRkKEQpfX19O3RoaXMuaXRlbXMuZWFjaChCKX0sZ2V0TGF5b3V0VGFyZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZm9ybS5lbH0sZ2V0Rm9ybTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZvcm19LG9uUmVuZGVyOmZ1bmN0aW9uKEIsQSl7dGhpcy5pbml0RmllbGRzKCk7RXh0LkZvcm1QYW5lbC5zdXBlcmNsYXNzLm9uUmVuZGVyLmNhbGwodGhpcyxCLEEpO3ZhciBDPXt0YWc6ImZvcm0iLG1ldGhvZDp0aGlzLm1ldGhvZHx8IlBPU1QiLGlkOnRoaXMuZm9ybUlkfHxFeHQuaWQoKX07aWYodGhpcy5maWxlVXBsb2FkKXtDLmVuY3R5cGU9Im11bHRpcGFydC9mb3JtLWRhdGEifXRoaXMuZm9ybS5pbml0RWwodGhpcy5ib2R5LmNyZWF0ZUNoaWxkKEMpKX0sYmVmb3JlRGVzdHJveTpmdW5jdGlvbigpe0V4dC5Gb3JtUGFuZWwuc3VwZXJjbGFzcy5iZWZvcmVEZXN0cm95LmNhbGwodGhpcyk7RXh0LmRlc3Ryb3kodGhpcy5mb3JtKX0saW5pdEV2ZW50czpmdW5jdGlvbigpe0V4dC5Gb3JtUGFuZWwuc3VwZXJjbGFzcy5pbml0RXZlbnRzLmNhbGwodGhpcyk7dGhpcy5pdGVtcy5vbigicmVtb3ZlIix0aGlzLm9uUmVtb3ZlLHRoaXMpO3RoaXMuaXRlbXMub24oImFkZCIsdGhpcy5vbkFkZCx0aGlzKTtpZih0aGlzLm1vbml0b3JWYWxpZCl7dGhpcy5zdGFydE1vbml0b3JpbmcoKX19LG9uQWRkOmZ1bmN0aW9uKEEsQil7aWYoQi5pc0Zvcm1GaWVsZCl7dGhpcy5mb3JtLmFkZChCKX19LG9uUmVtb3ZlOmZ1bmN0aW9uKEEpe2lmKEEuaXNGb3JtRmllbGQpe0V4dC5kZXN0cm95KEEuY29udGFpbmVyLnVwKCIueC1mb3JtLWl0ZW0iKSk7dGhpcy5mb3JtLnJlbW92ZShBKX19LHN0YXJ0TW9uaXRvcmluZzpmdW5jdGlvbigpe2lmKCF0aGlzLmJvdW5kKXt0aGlzLmJvdW5kPXRydWU7RXh0LlRhc2tNZ3Iuc3RhcnQoe3J1bjp0aGlzLmJpbmRIYW5kbGVyLGludGVydmFsOnRoaXMubW9uaXRvclBvbGx8fDIwMCxzY29wZTp0aGlzfSl9fSxzdG9wTW9uaXRvcmluZzpmdW5jdGlvbigpe3RoaXMuYm91bmQ9ZmFsc2V9LGxvYWQ6ZnVuY3Rpb24oKXt0aGlzLmZvcm0ubG9hZC5hcHBseSh0aGlzLmZvcm0sYXJndW1lbnRzKX0sb25EaXNhYmxlOmZ1bmN0aW9uKCl7RXh0LkZvcm1QYW5lbC5zdXBlcmNsYXNzLm9uRGlzYWJsZS5jYWxsKHRoaXMpO2lmKHRoaXMuZm9ybSl7dGhpcy5mb3JtLml0ZW1zLmVhY2goZnVuY3Rpb24oKXt0aGlzLmRpc2FibGUoKX0pfX0sb25FbmFibGU6ZnVuY3Rpb24oKXtFeHQuRm9ybVBhbmVsLnN1cGVyY2xhc3Mub25FbmFibGUuY2FsbCh0aGlzKTtpZih0aGlzLmZvcm0pe3RoaXMuZm9ybS5pdGVtcy5lYWNoKGZ1bmN0aW9uKCl7dGhpcy5lbmFibGUoKX0pfX0sYmluZEhhbmRsZXI6ZnVuY3Rpb24oKXtpZighdGhpcy5ib3VuZCl7cmV0dXJuIGZhbHNlfXZhciBEPXRydWU7dGhpcy5mb3JtLml0ZW1zLmVhY2goZnVuY3Rpb24oRSl7aWYoIUUuaXNWYWxpZCh0cnVlKSl7RD1mYWxzZTtyZXR1cm4gZmFsc2V9fSk7aWYodGhpcy5idXR0b25zKXtmb3IodmFyIEM9MCxBPXRoaXMuYnV0dG9ucy5sZW5ndGg7QzxBO0MrKyl7dmFyIEI9dGhpcy5idXR0b25zW0NdO2lmKEIuZm9ybUJpbmQ9PT10cnVlJiZCLmRpc2FibGVkPT09RCl7Qi5zZXREaXNhYmxlZCghRCl9fX10aGlzLmZpcmVFdmVudCgiY2xpZW50dmFsaWRhdGlvbiIsdGhpcyxEKX19KTtFeHQucmVnKCJmb3JtIixFeHQuRm9ybVBhbmVsKTtFeHQuZm9ybS5Gb3JtUGFuZWw9RXh0LkZvcm1QYW5lbDsNCkV4dC5mb3JtLkZpZWxkU2V0PUV4dC5leHRlbmQoRXh0LlBhbmVsLHtiYXNlQ2xzOiJ4LWZpZWxkc2V0IixsYXlvdXQ6ImZvcm0iLG9uUmVuZGVyOmZ1bmN0aW9uKEIsQSl7aWYoIXRoaXMuZWwpe3RoaXMuZWw9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZmllbGRzZXQiKTt0aGlzLmVsLmlkPXRoaXMuaWQ7aWYodGhpcy50aXRsZXx8dGhpcy5oZWFkZXJ8fHRoaXMuY2hlY2tib3hUb2dnbGUpe3RoaXMuZWwuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGVnZW5kIikpLmNsYXNzTmFtZT0ieC1maWVsZHNldC1oZWFkZXIifX1FeHQuZm9ybS5GaWVsZFNldC5zdXBlcmNsYXNzLm9uUmVuZGVyLmNhbGwodGhpcyxCLEEpO2lmKHRoaXMuY2hlY2tib3hUb2dnbGUpe3ZhciBDPXR5cGVvZiB0aGlzLmNoZWNrYm94VG9nZ2xlPT0ib2JqZWN0Ij90aGlzLmNoZWNrYm94VG9nZ2xlOnt0YWc6ImlucHV0Iix0eXBlOiJjaGVja2JveCIsbmFtZTp0aGlzLmNoZWNrYm94TmFtZXx8dGhpcy5pZCsiLWNoZWNrYm94In07dGhpcy5jaGVja2JveD10aGlzLmhlYWRlci5pbnNlcnRGaXJzdChDKTt0aGlzLmNoZWNrYm94LmRvbS5jaGVja2VkPSF0aGlzLmNvbGxhcHNlZDt0aGlzLmNoZWNrYm94Lm9uKCJjbGljayIsdGhpcy5vbkNoZWNrQ2xpY2ssdGhpcyl9fSxvbkNvbGxhcHNlOmZ1bmN0aW9uKEEsQil7aWYodGhpcy5jaGVja2JveCl7dGhpcy5jaGVja2JveC5kb20uY2hlY2tlZD1mYWxzZX10aGlzLmFmdGVyQ29sbGFwc2UoKX0sb25FeHBhbmQ6ZnVuY3Rpb24oQSxCKXtpZih0aGlzLmNoZWNrYm94KXt0aGlzLmNoZWNrYm94LmRvbS5jaGVja2VkPXRydWV9dGhpcy5hZnRlckV4cGFuZCgpfSxvbkNoZWNrQ2xpY2s6ZnVuY3Rpb24oKXt0aGlzW3RoaXMuY2hlY2tib3guZG9tLmNoZWNrZWQ/ImV4cGFuZCI6ImNvbGxhcHNlIl0oKX19KTtFeHQucmVnKCJmaWVsZHNldCIsRXh0LmZvcm0uRmllbGRTZXQpOw0KRXh0LmZvcm0uSHRtbEVkaXRvcj1FeHQuZXh0ZW5kKEV4dC5mb3JtLkZpZWxkLHtlbmFibGVGb3JtYXQ6dHJ1ZSxlbmFibGVGb250U2l6ZTp0cnVlLGVuYWJsZUNvbG9yczp0cnVlLGVuYWJsZUFsaWdubWVudHM6dHJ1ZSxlbmFibGVMaXN0czp0cnVlLGVuYWJsZVNvdXJjZUVkaXQ6dHJ1ZSxlbmFibGVMaW5rczp0cnVlLGVuYWJsZUZvbnQ6dHJ1ZSxjcmVhdGVMaW5rVGV4dDoiUGxlYXNlIGVudGVyIHRoZSBVUkwgZm9yIHRoZSBsaW5rOiIsZGVmYXVsdExpbmtWYWx1ZToiaHR0cDovIisiLyIsZm9udEZhbWlsaWVzOlsiQXJpYWwiLCJDb3VyaWVyIE5ldyIsIlRhaG9tYSIsIlRpbWVzIE5ldyBSb21hbiIsIlZlcmRhbmEiXSxkZWZhdWx0Rm9udDoidGFob21hIix2YWxpZGF0aW9uRXZlbnQ6ZmFsc2UsZGVmZXJIZWlnaHQ6dHJ1ZSxpbml0aWFsaXplZDpmYWxzZSxhY3RpdmF0ZWQ6ZmFsc2Usc291cmNlRWRpdE1vZGU6ZmFsc2Usb25Gb2N1czpFeHQuZW1wdHlGbixpZnJhbWVQYWQ6MyxoaWRlTW9kZToib2Zmc2V0cyIsZGVmYXVsdEF1dG9DcmVhdGU6e3RhZzoidGV4dGFyZWEiLHN0eWxlOiJ3aWR0aDo1MDBweDtoZWlnaHQ6MzAwcHg7IixhdXRvY29tcGxldGU6Im9mZiJ9LGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXt0aGlzLmFkZEV2ZW50cygiaW5pdGlhbGl6ZSIsImFjdGl2YXRlIiwiYmVmb3Jlc3luYyIsImJlZm9yZXB1c2giLCJzeW5jIiwicHVzaCIsImVkaXRtb2RlY2hhbmdlIil9LGNyZWF0ZUZvbnRPcHRpb25zOmZ1bmN0aW9uKCl7dmFyIEQ9W10sQj10aGlzLmZvbnRGYW1pbGllcyxDLEY7Zm9yKHZhciBFPTAsQT1CLmxlbmd0aDtFPEE7RSsrKXtDPUJbRV07Rj1DLnRvTG93ZXJDYXNlKCk7RC5wdXNoKCI8b3B0aW9uIHZhbHVlPVwiIixGLCJcIiBzdHlsZT1cImZvbnQtZmFtaWx5OiIsQywiO1wiIiwodGhpcy5kZWZhdWx0Rm9udD09Rj8iIHNlbGVjdGVkPVwidHJ1ZVwiPiI6Ij4iKSxDLCI8L29wdGlvbj4iKX1yZXR1cm4gRC5qb2luKCIiKX0sY3JlYXRlVG9vbGJhcjpmdW5jdGlvbihDKXtmdW5jdGlvbiBCKEYsRCxFKXtyZXR1cm57aXRlbUlkOkYsY2xzOiJ4LWJ0bi1pY29uIHgtZWRpdC0iK0YsZW5hYmxlVG9nZ2xlOkQhPT1mYWxzZSxzY29wZTpDLGhhbmRsZXI6RXx8Qy5yZWxheUJ0bkNtZCxjbGlja0V2ZW50OiJtb3VzZWRvd24iLHRvb2x0aXA6Qy5idXR0b25UaXBzW0ZdfHx1bmRlZmluZWQsdGFiSW5kZXg6LTF9fXZhciBBPW5ldyBFeHQuVG9vbGJhcih7cmVuZGVyVG86dGhpcy53cmFwLmRvbS5maXJzdENoaWxkfSk7QS5lbC5vbigiY2xpY2siLGZ1bmN0aW9uKEQpe0QucHJldmVudERlZmF1bHQoKX0pO2lmKHRoaXMuZW5hYmxlRm9udCYmIUV4dC5pc1NhZmFyaSl7dGhpcy5mb250U2VsZWN0PUEuZWwuY3JlYXRlQ2hpbGQoe3RhZzoic2VsZWN0IixjbHM6IngtZm9udC1zZWxlY3QiLGh0bWw6dGhpcy5jcmVhdGVGb250T3B0aW9ucygpfSk7dGhpcy5mb250U2VsZWN0Lm9uKCJjaGFuZ2UiLGZ1bmN0aW9uKCl7dmFyIEQ9dGhpcy5mb250U2VsZWN0LmRvbS52YWx1ZTt0aGlzLnJlbGF5Q21kKCJmb250bmFtZSIsRCk7dGhpcy5kZWZlckZvY3VzKCl9LHRoaXMpO0EuYWRkKHRoaXMuZm9udFNlbGVjdC5kb20sIi0iKX1pZih0aGlzLmVuYWJsZUZvcm1hdCl7QS5hZGQoQigiYm9sZCIpLEIoIml0YWxpYyIpLEIoInVuZGVybGluZSIpKX1pZih0aGlzLmVuYWJsZUZvbnRTaXplKXtBLmFkZCgiLSIsQigiaW5jcmVhc2Vmb250c2l6ZSIsZmFsc2UsdGhpcy5hZGp1c3RGb250KSxCKCJkZWNyZWFzZWZvbnRzaXplIixmYWxzZSx0aGlzLmFkanVzdEZvbnQpKX1pZih0aGlzLmVuYWJsZUNvbG9ycyl7QS5hZGQoIi0iLHtpdGVtSWQ6ImZvcmVjb2xvciIsY2xzOiJ4LWJ0bi1pY29uIHgtZWRpdC1mb3JlY29sb3IiLGNsaWNrRXZlbnQ6Im1vdXNlZG93biIsdG9vbHRpcDpDLmJ1dHRvblRpcHNbImZvcmVjb2xvciJdfHx1bmRlZmluZWQsdGFiSW5kZXg6LTEsbWVudTpuZXcgRXh0Lm1lbnUuQ29sb3JNZW51KHthbGxvd1Jlc2VsZWN0OnRydWUsZm9jdXM6RXh0LmVtcHR5Rm4sdmFsdWU6IjAwMDAwMCIscGxhaW46dHJ1ZSxzZWxlY3RIYW5kbGVyOmZ1bmN0aW9uKEUsRCl7dGhpcy5leGVjQ21kKCJmb3JlY29sb3IiLEV4dC5pc1NhZmFyaXx8RXh0LmlzSUU/IiMiK0Q6RCk7dGhpcy5kZWZlckZvY3VzKCl9LHNjb3BlOnRoaXMsY2xpY2tFdmVudDoibW91c2Vkb3duIn0pfSx7aXRlbUlkOiJiYWNrY29sb3IiLGNsczoieC1idG4taWNvbiB4LWVkaXQtYmFja2NvbG9yIixjbGlja0V2ZW50OiJtb3VzZWRvd24iLHRvb2x0aXA6Qy5idXR0b25UaXBzWyJiYWNrY29sb3IiXXx8dW5kZWZpbmVkLHRhYkluZGV4Oi0xLG1lbnU6bmV3IEV4dC5tZW51LkNvbG9yTWVudSh7Zm9jdXM6RXh0LmVtcHR5Rm4sdmFsdWU6IkZGRkZGRiIscGxhaW46dHJ1ZSxhbGxvd1Jlc2VsZWN0OnRydWUsc2VsZWN0SGFuZGxlcjpmdW5jdGlvbihFLEQpe2lmKEV4dC5pc0dlY2tvKXt0aGlzLmV4ZWNDbWQoInVzZUNTUyIsZmFsc2UpO3RoaXMuZXhlY0NtZCgiaGlsaXRlY29sb3IiLEQpO3RoaXMuZXhlY0NtZCgidXNlQ1NTIix0cnVlKTt0aGlzLmRlZmVyRm9jdXMoKX1lbHNle3RoaXMuZXhlY0NtZChFeHQuaXNPcGVyYT8iaGlsaXRlY29sb3IiOiJiYWNrY29sb3IiLEV4dC5pc1NhZmFyaXx8RXh0LmlzSUU/IiMiK0Q6RCk7dGhpcy5kZWZlckZvY3VzKCl9fSxzY29wZTp0aGlzLGNsaWNrRXZlbnQ6Im1vdXNlZG93biJ9KX0pfWlmKHRoaXMuZW5hYmxlQWxpZ25tZW50cyl7QS5hZGQoIi0iLEIoImp1c3RpZnlsZWZ0IiksQigianVzdGlmeWNlbnRlciIpLEIoImp1c3RpZnlyaWdodCIpKX1pZighRXh0LmlzU2FmYXJpKXtpZih0aGlzLmVuYWJsZUxpbmtzKXtBLmFkZCgiLSIsQigiY3JlYXRlbGluayIsZmFsc2UsdGhpcy5jcmVhdGVMaW5rKSl9aWYodGhpcy5lbmFibGVMaXN0cyl7QS5hZGQoIi0iLEIoImluc2VydG9yZGVyZWRsaXN0IiksQigiaW5zZXJ0dW5vcmRlcmVkbGlzdCIpKX1pZih0aGlzLmVuYWJsZVNvdXJjZUVkaXQpe0EuYWRkKCItIixCKCJzb3VyY2VlZGl0Iix0cnVlLGZ1bmN0aW9uKEQpe3RoaXMudG9nZ2xlU291cmNlRWRpdChELnByZXNzZWQpfSkpfX10aGlzLnRiPUF9LGdldERvY01hcmt1cDpmdW5jdGlvbigpe3JldHVybiI8aHRtbD48aGVhZD48c3R5bGUgdHlwZT1cInRleHQvY3NzXCI+Ym9keXtib3JkZXI6MDttYXJnaW46MDtwYWRkaW5nOjNweDtoZWlnaHQ6OTglO2N1cnNvcjp0ZXh0O308L3N0eWxlPjwvaGVhZD48Ym9keT48L2JvZHk+PC9odG1sPiJ9LGdldEVkaXRvckJvZHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb2MuYm9keXx8dGhpcy5kb2MuZG9jdW1lbnRFbGVtZW50fSxvblJlbmRlcjpmdW5jdGlvbihDLEEpe0V4dC5mb3JtLkh0bWxFZGl0b3Iuc3VwZXJjbGFzcy5vblJlbmRlci5jYWxsKHRoaXMsQyxBKTt0aGlzLmVsLmRvbS5zdHlsZS5ib3JkZXI9IjAgbm9uZSI7dGhpcy5lbC5kb20uc2V0QXR0cmlidXRlKCJ0YWJJbmRleCIsLTEpO3RoaXMuZWwuYWRkQ2xhc3MoIngtaGlkZGVuIik7aWYoRXh0LmlzSUUpe3RoaXMuZWwuYXBwbHlTdHlsZXMoIm1hcmdpbi10b3A6LTFweDttYXJnaW4tYm90dG9tOi0xcHg7Iil9dGhpcy53cmFwPXRoaXMuZWwud3JhcCh7Y2xzOiJ4LWh0bWwtZWRpdG9yLXdyYXAiLGNuOntjbHM6IngtaHRtbC1lZGl0b3ItdGIifX0pO3RoaXMuY3JlYXRlVG9vbGJhcih0aGlzKTt0aGlzLnRiLml0ZW1zLmVhY2goZnVuY3Rpb24oRSl7aWYoRS5pdGVtSWQhPSJzb3VyY2VlZGl0Iil7RS5kaXNhYmxlKCl9fSk7dmFyIEQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaWZyYW1lIik7RC5uYW1lPUV4dC5pZCgpO0QuZnJhbWVCb3JkZXI9Im5vIjtELnNyYz0oRXh0LlNTTF9TRUNVUkVfVVJMfHwiamF2YXNjcmlwdDpmYWxzZSIpO3RoaXMud3JhcC5kb20uYXBwZW5kQ2hpbGQoRCk7dGhpcy5pZnJhbWU9RDtpZihFeHQuaXNJRSl7RC5jb250ZW50V2luZG93LmRvY3VtZW50LmRlc2lnbk1vZGU9Im9uIjt0aGlzLmRvYz1ELmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7dGhpcy53aW49RC5jb250ZW50V2luZG93fWVsc2V7dGhpcy5kb2M9KEQuY29udGVudERvY3VtZW50fHx3aW5kb3cuZnJhbWVzW0QubmFtZV0uZG9jdW1lbnQpO3RoaXMud2luPXdpbmRvdy5mcmFtZXNbRC5uYW1lXTt0aGlzLmRvYy5kZXNpZ25Nb2RlPSJvbiJ9dGhpcy5kb2Mub3BlbigpO3RoaXMuZG9jLndyaXRlKHRoaXMuZ2V0RG9jTWFya3VwKCkpO3RoaXMuZG9jLmNsb3NlKCk7dmFyIEI9e3J1bjpmdW5jdGlvbigpe2lmKHRoaXMuZG9jLmJvZHl8fHRoaXMuZG9jLnJlYWR5U3RhdGU9PSJjb21wbGV0ZSIpe0V4dC5UYXNrTWdyLnN0b3AoQik7dGhpcy5kb2MuZGVzaWduTW9kZT0ib24iO3RoaXMuaW5pdEVkaXRvci5kZWZlcigxMCx0aGlzKX19LGludGVydmFsOjEwLGR1cmF0aW9uOjEwMDAwLHNjb3BlOnRoaXN9O0V4dC5UYXNrTWdyLnN0YXJ0KEIpO2lmKCF0aGlzLndpZHRoKXt0aGlzLnNldFNpemUodGhpcy5lbC5nZXRTaXplKCkpfX0sb25SZXNpemU6ZnVuY3Rpb24oQixDKXtFeHQuZm9ybS5IdG1sRWRpdG9yLnN1cGVyY2xhc3Mub25SZXNpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKHRoaXMuZWwmJnRoaXMuaWZyYW1lKXtpZih0eXBlb2YgQj09Im51bWJlciIpe3ZhciBEPUItdGhpcy53cmFwLmdldEZyYW1lV2lkdGgoImxyIik7dGhpcy5lbC5zZXRXaWR0aCh0aGlzLmFkanVzdFdpZHRoKCJ0ZXh0YXJlYSIsRCkpO3RoaXMuaWZyYW1lLnN0eWxlLndpZHRoPUQrInB4In1pZih0eXBlb2YgQz09Im51bWJlciIpe3ZhciBBPUMtdGhpcy53cmFwLmdldEZyYW1lV2lkdGgoInRiIiktdGhpcy50Yi5lbC5nZXRIZWlnaHQoKTt0aGlzLmVsLnNldEhlaWdodCh0aGlzLmFkanVzdFdpZHRoKCJ0ZXh0YXJlYSIsQSkpO3RoaXMuaWZyYW1lLnN0eWxlLmhlaWdodD1BKyJweCI7aWYodGhpcy5kb2Mpe3RoaXMuZ2V0RWRpdG9yQm9keSgpLnN0eWxlLmhlaWdodD0oQS0odGhpcy5pZnJhbWVQYWQqMikpKyJweCJ9fX19LHRvZ2dsZVNvdXJjZUVkaXQ6ZnVuY3Rpb24oQSl7aWYoQT09PXVuZGVmaW5lZCl7QT0hdGhpcy5zb3VyY2VFZGl0TW9kZX10aGlzLnNvdXJjZUVkaXRNb2RlPUE9PT10cnVlO3ZhciBDPXRoaXMudGIuaXRlbXMuZ2V0KCJzb3VyY2VlZGl0Iik7aWYoQy5wcmVzc2VkIT09dGhpcy5zb3VyY2VFZGl0TW9kZSl7Qy50b2dnbGUodGhpcy5zb3VyY2VFZGl0TW9kZSk7cmV0dXJuIH1pZih0aGlzLnNvdXJjZUVkaXRNb2RlKXt0aGlzLnRiLml0ZW1zLmVhY2goZnVuY3Rpb24oRCl7aWYoRC5pdGVtSWQhPSJzb3VyY2VlZGl0Iil7RC5kaXNhYmxlKCl9fSk7dGhpcy5zeW5jVmFsdWUoKTt0aGlzLmlmcmFtZS5jbGFzc05hbWU9IngtaGlkZGVuIjt0aGlzLmVsLnJlbW92ZUNsYXNzKCJ4LWhpZGRlbiIpO3RoaXMuZWwuZG9tLnJlbW92ZUF0dHJpYnV0ZSgidGFiSW5kZXgiKTt0aGlzLmVsLmZvY3VzKCl9ZWxzZXtpZih0aGlzLmluaXRpYWxpemVkKXt0aGlzLnRiLml0ZW1zLmVhY2goZnVuY3Rpb24oRCl7RC5lbmFibGUoKX0pfXRoaXMucHVzaFZhbHVlKCk7dGhpcy5pZnJhbWUuY2xhc3NOYW1lPSIiO3RoaXMuZWwuYWRkQ2xhc3MoIngtaGlkZGVuIik7dGhpcy5lbC5kb20uc2V0QXR0cmlidXRlKCJ0YWJJbmRleCIsLTEpO3RoaXMuZGVmZXJGb2N1cygpfXZhciBCPXRoaXMubGFzdFNpemU7aWYoQil7ZGVsZXRlIHRoaXMubGFzdFNpemU7dGhpcy5zZXRTaXplKEIpfXRoaXMuZmlyZUV2ZW50KCJlZGl0bW9kZWNoYW5nZSIsdGhpcyx0aGlzLnNvdXJjZUVkaXRNb2RlKX0sY3JlYXRlTGluazpmdW5jdGlvbigpe3ZhciBBPXByb21wdCh0aGlzLmNyZWF0ZUxpbmtUZXh0LHRoaXMuZGVmYXVsdExpbmtWYWx1ZSk7aWYoQSYmQSE9Imh0dHA6LyIrIi8iKXt0aGlzLnJlbGF5Q21kKCJjcmVhdGVsaW5rIixBKX19LGFkanVzdFNpemU6RXh0LkJveENvbXBvbmVudC5wcm90b3R5cGUuYWRqdXN0U2l6ZSxnZXRSZXNpemVFbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLndyYXB9LGdldFBvc2l0aW9uRWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53cmFwfSxpbml0RXZlbnRzOmZ1bmN0aW9uKCl7dGhpcy5vcmlnaW5hbFZhbHVlPXRoaXMuZ2V0VmFsdWUoKX0sbWFya0ludmFsaWQ6RXh0LmVtcHR5Rm4sY2xlYXJJbnZhbGlkOkV4dC5lbXB0eUZuLHNldFZhbHVlOmZ1bmN0aW9uKEEpe0V4dC5mb3JtLkh0bWxFZGl0b3Iuc3VwZXJjbGFzcy5zZXRWYWx1ZS5jYWxsKHRoaXMsQSk7dGhpcy5wdXNoVmFsdWUoKX0sY2xlYW5IdG1sOmZ1bmN0aW9uKEEpe0E9U3RyaW5nKEEpO2lmKEEubGVuZ3RoPjUpe2lmKEV4dC5pc1NhZmFyaSl7QT1BLnJlcGxhY2UoL1xzY2xhc3M9Iig/OkFwcGxlLXN0eWxlLXNwYW58a2h0bWwtYmxvY2stcGxhY2Vob2xkZXIpIi9naSwiIil9fWlmKEE9PSImbmJzcDsiKXtBPSIifXJldHVybiBBfSxzeW5jVmFsdWU6ZnVuY3Rpb24oKXtpZih0aGlzLmluaXRpYWxpemVkKXt2YXIgRD10aGlzLmdldEVkaXRvckJvZHkoKTt2YXIgQz1ELmlubmVySFRNTDtpZihFeHQuaXNTYWZhcmkpe3ZhciBCPUQuZ2V0QXR0cmlidXRlKCJzdHlsZSIpO3ZhciBBPUIubWF0Y2goL3RleHQtYWxpZ246KC4qPyk7L2kpO2lmKEEmJkFbMV0pe0M9IjxkaXYgc3R5bGU9XCIiK0FbMF0rIlwiPiIrQysiPC9kaXY+In19Qz10aGlzLmNsZWFuSHRtbChDKTtpZih0aGlzLmZpcmVFdmVudCgiYmVmb3Jlc3luYyIsdGhpcyxDKSE9PWZhbHNlKXt0aGlzLmVsLmRvbS52YWx1ZT1DO3RoaXMuZmlyZUV2ZW50KCJzeW5jIix0aGlzLEMpfX19LHB1c2hWYWx1ZTpmdW5jdGlvbigpe2lmKHRoaXMuaW5pdGlhbGl6ZWQpe3ZhciBBPXRoaXMuZWwuZG9tLnZhbHVlO2lmKCF0aGlzLmFjdGl2YXRlZCYmQS5sZW5ndGg8MSl7QT0iJm5ic3A7In1pZih0aGlzLmZpcmVFdmVudCgiYmVmb3JlcHVzaCIsdGhpcyxBKSE9PWZhbHNlKXt0aGlzLmdldEVkaXRvckJvZHkoKS5pbm5lckhUTUw9QTt0aGlzLmZpcmVFdmVudCgicHVzaCIsdGhpcyxBKX19fSxkZWZlckZvY3VzOmZ1bmN0aW9uKCl7dGhpcy5mb2N1cy5kZWZlcigxMCx0aGlzKX0sZm9jdXM6ZnVuY3Rpb24oKXtpZih0aGlzLndpbiYmIXRoaXMuc291cmNlRWRpdE1vZGUpe3RoaXMud2luLmZvY3VzKCl9ZWxzZXt0aGlzLmVsLmZvY3VzKCl9fSxpbml0RWRpdG9yOmZ1bmN0aW9uKCl7dmFyIEI9dGhpcy5nZXRFZGl0b3JCb2R5KCk7dmFyIEE9dGhpcy5lbC5nZXRTdHlsZXMoImZvbnQtc2l6ZSIsImZvbnQtZmFtaWx5IiwiYmFja2dyb3VuZC1pbWFnZSIsImJhY2tncm91bmQtcmVwZWF0Iik7QVsiYmFja2dyb3VuZC1hdHRhY2htZW50Il09ImZpeGVkIjtCLmJnUHJvcGVydGllcz0iZml4ZWQiO0V4dC5Eb21IZWxwZXIuYXBwbHlTdHlsZXMoQixBKTtFeHQuRXZlbnRNYW5hZ2VyLm9uKHRoaXMuZG9jLHsibW91c2Vkb3duIjp0aGlzLm9uRWRpdG9yRXZlbnQsImRibGNsaWNrIjp0aGlzLm9uRWRpdG9yRXZlbnQsImNsaWNrIjp0aGlzLm9uRWRpdG9yRXZlbnQsImtleXVwIjp0aGlzLm9uRWRpdG9yRXZlbnQsYnVmZmVyOjEwMCxzY29wZTp0aGlzfSk7aWYoRXh0LmlzR2Vja28pe0V4dC5FdmVudE1hbmFnZXIub24odGhpcy5kb2MsImtleXByZXNzIix0aGlzLmFwcGx5Q29tbWFuZCx0aGlzKX1pZihFeHQuaXNJRXx8RXh0LmlzU2FmYXJpfHxFeHQuaXNPcGVyYSl7RXh0LkV2ZW50TWFuYWdlci5vbih0aGlzLmRvYywia2V5ZG93biIsdGhpcy5maXhLZXlzLHRoaXMpfXRoaXMuaW5pdGlhbGl6ZWQ9dHJ1ZTt0aGlzLmZpcmVFdmVudCgiaW5pdGlhbGl6ZSIsdGhpcyk7dGhpcy5wdXNoVmFsdWUoKX0sb25EZXN0cm95OmZ1bmN0aW9uKCl7aWYodGhpcy5yZW5kZXJlZCl7dGhpcy50Yi5pdGVtcy5lYWNoKGZ1bmN0aW9uKEEpe2lmKEEubWVudSl7QS5tZW51LnJlbW92ZUFsbCgpO2lmKEEubWVudS5lbCl7QS5tZW51LmVsLmRlc3Ryb3koKX19QS5kZXN0cm95KCl9KTt0aGlzLndyYXAuZG9tLmlubmVySFRNTD0iIjt0aGlzLndyYXAucmVtb3ZlKCl9fSxvbkZpcnN0Rm9jdXM6ZnVuY3Rpb24oKXt0aGlzLmFjdGl2YXRlZD10cnVlO3RoaXMudGIuaXRlbXMuZWFjaChmdW5jdGlvbihEKXtELmVuYWJsZSgpfSk7aWYoRXh0LmlzR2Vja28pe3RoaXMud2luLmZvY3VzKCk7dmFyIEE9dGhpcy53aW4uZ2V0U2VsZWN0aW9uKCk7aWYoIUEuZm9jdXNOb2RlfHxBLmZvY3VzTm9kZS5ub2RlVHlwZSE9Myl7dmFyIEI9QS5nZXRSYW5nZUF0KDApO0Iuc2VsZWN0Tm9kZUNvbnRlbnRzKHRoaXMuZ2V0RWRpdG9yQm9keSgpKTtCLmNvbGxhcHNlKHRydWUpO3RoaXMuZGVmZXJGb2N1cygpfXRyeXt0aGlzLmV4ZWNDbWQoInVzZUNTUyIsdHJ1ZSk7dGhpcy5leGVjQ21kKCJzdHlsZVdpdGhDU1MiLGZhbHNlKX1jYXRjaChDKXt9fXRoaXMuZmlyZUV2ZW50KCJhY3RpdmF0ZSIsdGhpcyl9LGFkanVzdEZvbnQ6ZnVuY3Rpb24oQil7dmFyIEM9Qi5pdGVtSWQ9PSJpbmNyZWFzZWZvbnRzaXplIj8xOi0xO3ZhciBBPXBhcnNlSW50KHRoaXMuZG9jLnF1ZXJ5Q29tbWFuZFZhbHVlKCJGb250U2l6ZSIpfHwyLDEwKTtpZihFeHQuaXNTYWZhcmkzfHxFeHQuaXNBaXIpe2lmKEE8PTEwKXtBPTErQ31lbHNle2lmKEE8PTEzKXtBPTIrQ31lbHNle2lmKEE8PTE2KXtBPTMrQ31lbHNle2lmKEE8PTE4KXtBPTQrQ31lbHNle2lmKEE8PTI0KXtBPTUrQ31lbHNle0E9NitDfX19fX1BPUEuY29uc3RyYWluKDEsNil9ZWxzZXtpZihFeHQuaXNTYWZhcmkpe0MqPTJ9QT1NYXRoLm1heCgxLEErQykrKEV4dC5pc1NhZmFyaT8icHgiOjApfXRoaXMuZXhlY0NtZCgiRm9udFNpemUiLEEpfSxvbkVkaXRvckV2ZW50OmZ1bmN0aW9uKEEpe3RoaXMudXBkYXRlVG9vbGJhcigpfSx1cGRhdGVUb29sYmFyOmZ1bmN0aW9uKCl7aWYoIXRoaXMuYWN0aXZhdGVkKXt0aGlzLm9uRmlyc3RGb2N1cygpO3JldHVybiB9dmFyIEI9dGhpcy50Yi5pdGVtcy5tYXAsQz10aGlzLmRvYztpZih0aGlzLmVuYWJsZUZvbnQmJiFFeHQuaXNTYWZhcmkpe3ZhciBBPSh0aGlzLmRvYy5xdWVyeUNvbW1hbmRWYWx1ZSgiRm9udE5hbWUiKXx8dGhpcy5kZWZhdWx0Rm9udCkudG9Mb3dlckNhc2UoKTtpZihBIT10aGlzLmZvbnRTZWxlY3QuZG9tLnZhbHVlKXt0aGlzLmZvbnRTZWxlY3QuZG9tLnZhbHVlPUF9fWlmKHRoaXMuZW5hYmxlRm9ybWF0KXtCLmJvbGQudG9nZ2xlKEMucXVlcnlDb21tYW5kU3RhdGUoImJvbGQiKSk7Qi5pdGFsaWMudG9nZ2xlKEMucXVlcnlDb21tYW5kU3RhdGUoIml0YWxpYyIpKTtCLnVuZGVybGluZS50b2dnbGUoQy5xdWVyeUNvbW1hbmRTdGF0ZSgidW5kZXJsaW5lIikpfWlmKHRoaXMuZW5hYmxlQWxpZ25tZW50cyl7Qi5qdXN0aWZ5bGVmdC50b2dnbGUoQy5xdWVyeUNvbW1hbmRTdGF0ZSgianVzdGlmeWxlZnQiKSk7Qi5qdXN0aWZ5Y2VudGVyLnRvZ2dsZShDLnF1ZXJ5Q29tbWFuZFN0YXRlKCJqdXN0aWZ5Y2VudGVyIikpO0IuanVzdGlmeXJpZ2h0LnRvZ2dsZShDLnF1ZXJ5Q29tbWFuZFN0YXRlKCJqdXN0aWZ5cmlnaHQiKSl9aWYoIUV4dC5pc1NhZmFyaSYmdGhpcy5lbmFibGVMaXN0cyl7Qi5pbnNlcnRvcmRlcmVkbGlzdC50b2dnbGUoQy5xdWVyeUNvbW1hbmRTdGF0ZSgiaW5zZXJ0b3JkZXJlZGxpc3QiKSk7Qi5pbnNlcnR1bm9yZGVyZWRsaXN0LnRvZ2dsZShDLnF1ZXJ5Q29tbWFuZFN0YXRlKCJpbnNlcnR1bm9yZGVyZWRsaXN0IikpfUV4dC5tZW51Lk1lbnVNZ3IuaGlkZUFsbCgpO3RoaXMuc3luY1ZhbHVlKCl9LHJlbGF5QnRuQ21kOmZ1bmN0aW9uKEEpe3RoaXMucmVsYXlDbWQoQS5pdGVtSWQpfSxyZWxheUNtZDpmdW5jdGlvbihCLEEpe3RoaXMud2luLmZvY3VzKCk7dGhpcy5leGVjQ21kKEIsQSk7dGhpcy51cGRhdGVUb29sYmFyKCk7dGhpcy5kZWZlckZvY3VzKCl9LGV4ZWNDbWQ6ZnVuY3Rpb24oQixBKXt0aGlzLmRvYy5leGVjQ29tbWFuZChCLGZhbHNlLEE9PT11bmRlZmluZWQ/bnVsbDpBKTt0aGlzLnN5bmNWYWx1ZSgpfSxhcHBseUNvbW1hbmQ6ZnVuY3Rpb24oQil7aWYoQi5jdHJsS2V5KXt2YXIgQz1CLmdldENoYXJDb2RlKCksQTtpZihDPjApe0M9U3RyaW5nLmZyb21DaGFyQ29kZShDKTtzd2l0Y2goQyl7Y2FzZSJiIjpBPSJib2xkIjticmVhaztjYXNlImkiOkE9Iml0YWxpYyI7YnJlYWs7Y2FzZSJ1IjpBPSJ1bmRlcmxpbmUiO2JyZWFrfWlmKEEpe3RoaXMud2luLmZvY3VzKCk7dGhpcy5leGVjQ21kKEEpO3RoaXMuZGVmZXJGb2N1cygpO0IucHJldmVudERlZmF1bHQoKX19fX0saW5zZXJ0QXRDdXJzb3I6ZnVuY3Rpb24oQil7aWYoIXRoaXMuYWN0aXZhdGVkKXtyZXR1cm4gfWlmKEV4dC5pc0lFKXt0aGlzLndpbi5mb2N1cygpO3ZhciBBPXRoaXMuZG9jLnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO2lmKEEpe0EuY29sbGFwc2UodHJ1ZSk7QS5wYXN0ZUhUTUwoQik7dGhpcy5zeW5jVmFsdWUoKTt0aGlzLmRlZmVyRm9jdXMoKX19ZWxzZXtpZihFeHQuaXNHZWNrb3x8RXh0LmlzT3BlcmEpe3RoaXMud2luLmZvY3VzKCk7dGhpcy5leGVjQ21kKCJJbnNlcnRIVE1MIixCKTt0aGlzLmRlZmVyRm9jdXMoKX1lbHNle2lmKEV4dC5pc1NhZmFyaSl7dGhpcy5leGVjQ21kKCJJbnNlcnRUZXh0IixCKTt0aGlzLmRlZmVyRm9jdXMoKX19fX0sZml4S2V5czpmdW5jdGlvbigpe2lmKEV4dC5pc0lFKXtyZXR1cm4gZnVuY3Rpb24oRCl7dmFyIEE9RC5nZXRLZXkoKSxCO2lmKEE9PUQuVEFCKXtELnN0b3BFdmVudCgpO0I9dGhpcy5kb2Muc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7aWYoQil7Qi5jb2xsYXBzZSh0cnVlKTtCLnBhc3RlSFRNTCgiJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Iik7dGhpcy5kZWZlckZvY3VzKCl9fWVsc2V7aWYoQT09RC5FTlRFUil7Qj10aGlzLmRvYy5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTtpZihCKXt2YXIgQz1CLnBhcmVudEVsZW1lbnQoKTtpZighQ3x8Qy50YWdOYW1lLnRvTG93ZXJDYXNlKCkhPSJsaSIpe0Quc3RvcEV2ZW50KCk7Qi5wYXN0ZUhUTUwoIjxiciAvPiIpO0IuY29sbGFwc2UoZmFsc2UpO0Iuc2VsZWN0KCl9fX19fX1lbHNle2lmKEV4dC5pc09wZXJhKXtyZXR1cm4gZnVuY3Rpb24oQil7dmFyIEE9Qi5nZXRLZXkoKTtpZihBPT1CLlRBQil7Qi5zdG9wRXZlbnQoKTt0aGlzLndpbi5mb2N1cygpO3RoaXMuZXhlY0NtZCgiSW5zZXJ0SFRNTCIsIiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyIpO3RoaXMuZGVmZXJGb2N1cygpfX19ZWxzZXtpZihFeHQuaXNTYWZhcmkpe3JldHVybiBmdW5jdGlvbihCKXt2YXIgQT1CLmdldEtleSgpO2lmKEE9PUIuVEFCKXtCLnN0b3BFdmVudCgpO3RoaXMuZXhlY0NtZCgiSW5zZXJ0VGV4dCIsIlx0Iik7dGhpcy5kZWZlckZvY3VzKCl9fX19fX0oKSxnZXRUb29sYmFyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGJ9LGJ1dHRvblRpcHM6e2JvbGQ6e3RpdGxlOiJCb2xkIChDdHJsK0IpIix0ZXh0OiJNYWtlIHRoZSBzZWxlY3RlZCB0ZXh0IGJvbGQuIixjbHM6IngtaHRtbC1lZGl0b3ItdGlwIn0saXRhbGljOnt0aXRsZToiSXRhbGljIChDdHJsK0kpIix0ZXh0OiJNYWtlIHRoZSBzZWxlY3RlZCB0ZXh0IGl0YWxpYy4iLGNsczoieC1odG1sLWVkaXRvci10aXAifSx1bmRlcmxpbmU6e3RpdGxlOiJVbmRlcmxpbmUgKEN0cmwrVSkiLHRleHQ6IlVuZGVybGluZSB0aGUgc2VsZWN0ZWQgdGV4dC4iLGNsczoieC1odG1sLWVkaXRvci10aXAifSxpbmNyZWFzZWZvbnRzaXplOnt0aXRsZToiR3JvdyBUZXh0Iix0ZXh0OiJJbmNyZWFzZSB0aGUgZm9udCBzaXplLiIsY2xzOiJ4LWh0bWwtZWRpdG9yLXRpcCJ9LGRlY3JlYXNlZm9udHNpemU6e3RpdGxlOiJTaHJpbmsgVGV4dCIsdGV4dDoiRGVjcmVhc2UgdGhlIGZvbnQgc2l6ZS4iLGNsczoieC1odG1sLWVkaXRvci10aXAifSxiYWNrY29sb3I6e3RpdGxlOiJUZXh0IEhpZ2hsaWdodCBDb2xvciIsdGV4dDoiQ2hhbmdlIHRoZSBiYWNrZ3JvdW5kIGNvbG9yIG9mIHRoZSBzZWxlY3RlZCB0ZXh0LiIsY2xzOiJ4LWh0bWwtZWRpdG9yLXRpcCJ9LGZvcmVjb2xvcjp7dGl0bGU6IkZvbnQgQ29sb3IiLHRleHQ6IkNoYW5nZSB0aGUgY29sb3Igb2YgdGhlIHNlbGVjdGVkIHRleHQuIixjbHM6IngtaHRtbC1lZGl0b3ItdGlwIn0sanVzdGlmeWxlZnQ6e3RpdGxlOiJBbGlnbiBUZXh0IExlZnQiLHRleHQ6IkFsaWduIHRleHQgdG8gdGhlIGxlZnQuIixjbHM6IngtaHRtbC1lZGl0b3ItdGlwIn0sanVzdGlmeWNlbnRlcjp7dGl0bGU6IkNlbnRlciBUZXh0Iix0ZXh0OiJDZW50ZXIgdGV4dCBpbiB0aGUgZWRpdG9yLiIsY2xzOiJ4LWh0bWwtZWRpdG9yLXRpcCJ9LGp1c3RpZnlyaWdodDp7dGl0bGU6IkFsaWduIFRleHQgUmlnaHQiLHRleHQ6IkFsaWduIHRleHQgdG8gdGhlIHJpZ2h0LiIsY2xzOiJ4LWh0bWwtZWRpdG9yLXRpcCJ9LGluc2VydHVub3JkZXJlZGxpc3Q6e3RpdGxlOiJCdWxsZXQgTGlzdCIsdGV4dDoiU3RhcnQgYSBidWxsZXRlZCBsaXN0LiIsY2xzOiJ4LWh0bWwtZWRpdG9yLXRpcCJ9LGluc2VydG9yZGVyZWRsaXN0Ont0aXRsZToiTnVtYmVyZWQgTGlzdCIsdGV4dDoiU3RhcnQgYSBudW1iZXJlZCBsaXN0LiIsY2xzOiJ4LWh0bWwtZWRpdG9yLXRpcCJ9LGNyZWF0ZWxpbms6e3RpdGxlOiJIeXBlcmxpbmsiLHRleHQ6Ik1ha2UgdGhlIHNlbGVjdGVkIHRleHQgYSBoeXBlcmxpbmsuIixjbHM6IngtaHRtbC1lZGl0b3ItdGlwIn0sc291cmNlZWRpdDp7dGl0bGU6IlNvdXJjZSBFZGl0Iix0ZXh0OiJTd2l0Y2ggdG8gc291cmNlIGVkaXRpbmcgbW9kZS4iLGNsczoieC1odG1sLWVkaXRvci10aXAifX19KTtFeHQucmVnKCJodG1sZWRpdG9yIixFeHQuZm9ybS5IdG1sRWRpdG9yKTsNCkV4dC5mb3JtLlRpbWVGaWVsZD1FeHQuZXh0ZW5kKEV4dC5mb3JtLkNvbWJvQm94LHttaW5WYWx1ZTpudWxsLG1heFZhbHVlOm51bGwsbWluVGV4dDoiVGhlIHRpbWUgaW4gdGhpcyBmaWVsZCBtdXN0IGJlIGVxdWFsIHRvIG9yIGFmdGVyIHswfSIsbWF4VGV4dDoiVGhlIHRpbWUgaW4gdGhpcyBmaWVsZCBtdXN0IGJlIGVxdWFsIHRvIG9yIGJlZm9yZSB7MH0iLGludmFsaWRUZXh0OiJ7MH0gaXMgbm90IGEgdmFsaWQgdGltZSIsZm9ybWF0OiJnOmkgQSIsYWx0Rm9ybWF0czoiZzppYXxnOmlBfGc6aSBhfGc6aSBBfGg6aXxnOml8SDppfGdhfGhhfGdBfGggYXxnIGF8ZyBBfGdpfGhpfGdpYXxoaWF8Z3xIIixpbmNyZW1lbnQ6MTUsbW9kZToibG9jYWwiLHRyaWdnZXJBY3Rpb246ImFsbCIsdHlwZUFoZWFkOmZhbHNlLGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXtFeHQuZm9ybS5UaW1lRmllbGQuc3VwZXJjbGFzcy5pbml0Q29tcG9uZW50LmNhbGwodGhpcyk7aWYodHlwZW9mIHRoaXMubWluVmFsdWU9PSJzdHJpbmciKXt0aGlzLm1pblZhbHVlPXRoaXMucGFyc2VEYXRlKHRoaXMubWluVmFsdWUpfWlmKHR5cGVvZiB0aGlzLm1heFZhbHVlPT0ic3RyaW5nIil7dGhpcy5tYXhWYWx1ZT10aGlzLnBhcnNlRGF0ZSh0aGlzLm1heFZhbHVlKX1pZighdGhpcy5zdG9yZSl7dmFyIEI9dGhpcy5wYXJzZURhdGUodGhpcy5taW5WYWx1ZSk7aWYoIUIpe0I9bmV3IERhdGUoKS5jbGVhclRpbWUoKX12YXIgQT10aGlzLnBhcnNlRGF0ZSh0aGlzLm1heFZhbHVlKTtpZighQSl7QT1uZXcgRGF0ZSgpLmNsZWFyVGltZSgpLmFkZCgibWkiLCgyNCo2MCktMSl9dmFyIEM9W107d2hpbGUoQjw9QSl7Qy5wdXNoKFtCLmRhdGVGb3JtYXQodGhpcy5mb3JtYXQpXSk7Qj1CLmFkZCgibWkiLHRoaXMuaW5jcmVtZW50KX10aGlzLnN0b3JlPW5ldyBFeHQuZGF0YS5TaW1wbGVTdG9yZSh7ZmllbGRzOlsidGV4dCJdLGRhdGE6Q30pO3RoaXMuZGlzcGxheUZpZWxkPSJ0ZXh0In19LGdldFZhbHVlOmZ1bmN0aW9uKCl7dmFyIEE9RXh0LmZvcm0uVGltZUZpZWxkLnN1cGVyY2xhc3MuZ2V0VmFsdWUuY2FsbCh0aGlzKTtyZXR1cm4gdGhpcy5mb3JtYXREYXRlKHRoaXMucGFyc2VEYXRlKEEpKXx8IiJ9LHNldFZhbHVlOmZ1bmN0aW9uKEEpe0V4dC5mb3JtLlRpbWVGaWVsZC5zdXBlcmNsYXNzLnNldFZhbHVlLmNhbGwodGhpcyx0aGlzLmZvcm1hdERhdGUodGhpcy5wYXJzZURhdGUoQSkpKX0sdmFsaWRhdGVWYWx1ZTpFeHQuZm9ybS5EYXRlRmllbGQucHJvdG90eXBlLnZhbGlkYXRlVmFsdWUscGFyc2VEYXRlOkV4dC5mb3JtLkRhdGVGaWVsZC5wcm90b3R5cGUucGFyc2VEYXRlLGZvcm1hdERhdGU6RXh0LmZvcm0uRGF0ZUZpZWxkLnByb3RvdHlwZS5mb3JtYXREYXRlLGJlZm9yZUJsdXI6ZnVuY3Rpb24oKXt2YXIgQT10aGlzLnBhcnNlRGF0ZSh0aGlzLmdldFJhd1ZhbHVlKCkpO2lmKEEpe3RoaXMuc2V0VmFsdWUoQS5kYXRlRm9ybWF0KHRoaXMuZm9ybWF0KSl9fX0pO0V4dC5yZWcoInRpbWVmaWVsZCIsRXh0LmZvcm0uVGltZUZpZWxkKTsNCkV4dC5mb3JtLkxhYmVsPUV4dC5leHRlbmQoRXh0LkJveENvbXBvbmVudCx7b25SZW5kZXI6ZnVuY3Rpb24oQixBKXtpZighdGhpcy5lbCl7dGhpcy5lbD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpO3RoaXMuZWwuaW5uZXJIVE1MPXRoaXMudGV4dD9FeHQudXRpbC5Gb3JtYXQuaHRtbEVuY29kZSh0aGlzLnRleHQpOih0aGlzLmh0bWx8fCIiKTtpZih0aGlzLmZvcklkKXt0aGlzLmVsLnNldEF0dHJpYnV0ZSgiaHRtbEZvciIsdGhpcy5mb3JJZCl9fUV4dC5mb3JtLkxhYmVsLnN1cGVyY2xhc3Mub25SZW5kZXIuY2FsbCh0aGlzLEIsQSl9fSk7RXh0LnJlZygibGFiZWwiLEV4dC5mb3JtLkxhYmVsKTsNCkV4dC5mb3JtLkFjdGlvbj1mdW5jdGlvbihCLEEpe3RoaXMuZm9ybT1CO3RoaXMub3B0aW9ucz1BfHx7fX07RXh0LmZvcm0uQWN0aW9uLkNMSUVOVF9JTlZBTElEPSJjbGllbnQiO0V4dC5mb3JtLkFjdGlvbi5TRVJWRVJfSU5WQUxJRD0ic2VydmVyIjtFeHQuZm9ybS5BY3Rpb24uQ09OTkVDVF9GQUlMVVJFPSJjb25uZWN0IjtFeHQuZm9ybS5BY3Rpb24uTE9BRF9GQUlMVVJFPSJsb2FkIjtFeHQuZm9ybS5BY3Rpb24ucHJvdG90eXBlPXt0eXBlOiJkZWZhdWx0IixydW46ZnVuY3Rpb24oQSl7fSxzdWNjZXNzOmZ1bmN0aW9uKEEpe30saGFuZGxlUmVzcG9uc2U6ZnVuY3Rpb24oQSl7fSxmYWlsdXJlOmZ1bmN0aW9uKEEpe3RoaXMucmVzcG9uc2U9QTt0aGlzLmZhaWx1cmVUeXBlPUV4dC5mb3JtLkFjdGlvbi5DT05ORUNUX0ZBSUxVUkU7dGhpcy5mb3JtLmFmdGVyQWN0aW9uKHRoaXMsZmFsc2UpfSxwcm9jZXNzUmVzcG9uc2U6ZnVuY3Rpb24oQSl7dGhpcy5yZXNwb25zZT1BO2lmKCFBLnJlc3BvbnNlVGV4dCl7cmV0dXJuIHRydWV9dGhpcy5yZXN1bHQ9dGhpcy5oYW5kbGVSZXNwb25zZShBKTtyZXR1cm4gdGhpcy5yZXN1bHR9LGdldFVybDpmdW5jdGlvbihDKXt2YXIgQT10aGlzLm9wdGlvbnMudXJsfHx0aGlzLmZvcm0udXJsfHx0aGlzLmZvcm0uZWwuZG9tLmFjdGlvbjtpZihDKXt2YXIgQj10aGlzLmdldFBhcmFtcygpO2lmKEIpe0ErPShBLmluZGV4T2YoIj8iKSE9LTE/IiYiOiI/IikrQn19cmV0dXJuIEF9LGdldE1ldGhvZDpmdW5jdGlvbigpe3JldHVybih0aGlzLm9wdGlvbnMubWV0aG9kfHx0aGlzLmZvcm0ubWV0aG9kfHx0aGlzLmZvcm0uZWwuZG9tLm1ldGhvZHx8IlBPU1QiKS50b1VwcGVyQ2FzZSgpfSxnZXRQYXJhbXM6ZnVuY3Rpb24oKXt2YXIgQT10aGlzLmZvcm0uYmFzZVBhcmFtczt2YXIgQj10aGlzLm9wdGlvbnMucGFyYW1zO2lmKEIpe2lmKHR5cGVvZiBCPT0ib2JqZWN0Iil7Qj1FeHQudXJsRW5jb2RlKEV4dC5hcHBseUlmKEIsQSkpfWVsc2V7aWYodHlwZW9mIEI9PSJzdHJpbmciJiZBKXtCKz0iJiIrRXh0LnVybEVuY29kZShBKX19fWVsc2V7aWYoQSl7Qj1FeHQudXJsRW5jb2RlKEEpfX1yZXR1cm4gQn0sY3JlYXRlQ2FsbGJhY2s6ZnVuY3Rpb24oQSl7dmFyIEE9QXx8e307cmV0dXJue3N1Y2Nlc3M6dGhpcy5zdWNjZXNzLGZhaWx1cmU6dGhpcy5mYWlsdXJlLHNjb3BlOnRoaXMsdGltZW91dDooQS50aW1lb3V0KjEwMDApfHwodGhpcy5mb3JtLnRpbWVvdXQqMTAwMCksdXBsb2FkOnRoaXMuZm9ybS5maWxlVXBsb2FkP3RoaXMuc3VjY2Vzczp1bmRlZmluZWR9fX07RXh0LmZvcm0uQWN0aW9uLlN1Ym1pdD1mdW5jdGlvbihCLEEpe0V4dC5mb3JtLkFjdGlvbi5TdWJtaXQuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsQixBKX07RXh0LmV4dGVuZChFeHQuZm9ybS5BY3Rpb24uU3VibWl0LEV4dC5mb3JtLkFjdGlvbix7dHlwZToic3VibWl0IixydW46ZnVuY3Rpb24oKXt2YXIgQj10aGlzLm9wdGlvbnM7dmFyIEM9dGhpcy5nZXRNZXRob2QoKTt2YXIgQT1DPT0iUE9TVCI7aWYoQi5jbGllbnRWYWxpZGF0aW9uPT09ZmFsc2V8fHRoaXMuZm9ybS5pc1ZhbGlkKCkpe0V4dC5BamF4LnJlcXVlc3QoRXh0LmFwcGx5KHRoaXMuY3JlYXRlQ2FsbGJhY2soQikse2Zvcm06dGhpcy5mb3JtLmVsLmRvbSx1cmw6dGhpcy5nZXRVcmwoIUEpLG1ldGhvZDpDLHBhcmFtczpBP3RoaXMuZ2V0UGFyYW1zKCk6bnVsbCxpc1VwbG9hZDp0aGlzLmZvcm0uZmlsZVVwbG9hZH0pKX1lbHNle2lmKEIuY2xpZW50VmFsaWRhdGlvbiE9PWZhbHNlKXt0aGlzLmZhaWx1cmVUeXBlPUV4dC5mb3JtLkFjdGlvbi5DTElFTlRfSU5WQUxJRDt0aGlzLmZvcm0uYWZ0ZXJBY3Rpb24odGhpcyxmYWxzZSl9fX0sc3VjY2VzczpmdW5jdGlvbihCKXt2YXIgQT10aGlzLnByb2Nlc3NSZXNwb25zZShCKTtpZihBPT09dHJ1ZXx8QS5zdWNjZXNzKXt0aGlzLmZvcm0uYWZ0ZXJBY3Rpb24odGhpcyx0cnVlKTtyZXR1cm4gfWlmKEEuZXJyb3JzKXt0aGlzLmZvcm0ubWFya0ludmFsaWQoQS5lcnJvcnMpO3RoaXMuZmFpbHVyZVR5cGU9RXh0LmZvcm0uQWN0aW9uLlNFUlZFUl9JTlZBTElEfXRoaXMuZm9ybS5hZnRlckFjdGlvbih0aGlzLGZhbHNlKX0saGFuZGxlUmVzcG9uc2U6ZnVuY3Rpb24oQyl7aWYodGhpcy5mb3JtLmVycm9yUmVhZGVyKXt2YXIgQj10aGlzLmZvcm0uZXJyb3JSZWFkZXIucmVhZChDKTt2YXIgRj1bXTtpZihCLnJlY29yZHMpe2Zvcih2YXIgRD0wLEE9Qi5yZWNvcmRzLmxlbmd0aDtEPEE7RCsrKXt2YXIgRT1CLnJlY29yZHNbRF07RltEXT1FLmRhdGF9fWlmKEYubGVuZ3RoPDEpe0Y9bnVsbH1yZXR1cm57c3VjY2VzczpCLnN1Y2Nlc3MsZXJyb3JzOkZ9fXJldHVybiBFeHQuZGVjb2RlKEMucmVzcG9uc2VUZXh0KX19KTtFeHQuZm9ybS5BY3Rpb24uTG9hZD1mdW5jdGlvbihCLEEpe0V4dC5mb3JtLkFjdGlvbi5Mb2FkLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLEIsQSk7dGhpcy5yZWFkZXI9dGhpcy5mb3JtLnJlYWRlcn07RXh0LmV4dGVuZChFeHQuZm9ybS5BY3Rpb24uTG9hZCxFeHQuZm9ybS5BY3Rpb24se3R5cGU6ImxvYWQiLHJ1bjpmdW5jdGlvbigpe0V4dC5BamF4LnJlcXVlc3QoRXh0LmFwcGx5KHRoaXMuY3JlYXRlQ2FsbGJhY2sodGhpcy5vcHRpb25zKSx7bWV0aG9kOnRoaXMuZ2V0TWV0aG9kKCksdXJsOnRoaXMuZ2V0VXJsKGZhbHNlKSxwYXJhbXM6dGhpcy5nZXRQYXJhbXMoKX0pKX0sc3VjY2VzczpmdW5jdGlvbihCKXt2YXIgQT10aGlzLnByb2Nlc3NSZXNwb25zZShCKTtpZihBPT09dHJ1ZXx8IUEuc3VjY2Vzc3x8IUEuZGF0YSl7dGhpcy5mYWlsdXJlVHlwZT1FeHQuZm9ybS5BY3Rpb24uTE9BRF9GQUlMVVJFO3RoaXMuZm9ybS5hZnRlckFjdGlvbih0aGlzLGZhbHNlKTtyZXR1cm4gfXRoaXMuZm9ybS5jbGVhckludmFsaWQoKTt0aGlzLmZvcm0uc2V0VmFsdWVzKEEuZGF0YSk7dGhpcy5mb3JtLmFmdGVyQWN0aW9uKHRoaXMsdHJ1ZSl9LGhhbmRsZVJlc3BvbnNlOmZ1bmN0aW9uKEIpe2lmKHRoaXMuZm9ybS5yZWFkZXIpe3ZhciBBPXRoaXMuZm9ybS5yZWFkZXIucmVhZChCKTt2YXIgQz1BLnJlY29yZHMmJkEucmVjb3Jkc1swXT9BLnJlY29yZHNbMF0uZGF0YTpudWxsO3JldHVybntzdWNjZXNzOkEuc3VjY2VzcyxkYXRhOkN9fXJldHVybiBFeHQuZGVjb2RlKEIucmVzcG9uc2VUZXh0KX19KTtFeHQuZm9ybS5BY3Rpb24uQUNUSU9OX1RZUEVTPXsibG9hZCI6RXh0LmZvcm0uQWN0aW9uLkxvYWQsInN1Ym1pdCI6RXh0LmZvcm0uQWN0aW9uLlN1Ym1pdH07DQpFeHQuZm9ybS5WVHlwZXM9ZnVuY3Rpb24oKXt2YXIgQz0vXlthLXpBLVpfXSskLzt2YXIgRD0vXlthLXpBLVowLTlfXSskLzt2YXIgQj0vXihbXHddKykoLltcd10rKSpAKFtcdy1dK1wuKXsxLDV9KFtBLVphLXpdKXsyLDR9JC87dmFyIEE9LygoKGh0dHBzPyl8KGZ0cCkpOlwvXC8oW1wtXHddK1wuKStcd3syLDN9KFwvWyVcLVx3XSsoXC5cd3syLH0pPykqKChbXHdcLVwuXD9cXFwvK0AmIztgfj0lIV0qKShcLlx3ezIsfSk/KSpcLz8pL2k7cmV0dXJueyJlbWFpbCI6ZnVuY3Rpb24oRSl7cmV0dXJuIEIudGVzdChFKX0sImVtYWlsVGV4dCI6IlRoaXMgZmllbGQgc2hvdWxkIGJlIGFuIGUtbWFpbCBhZGRyZXNzIGluIHRoZSBmb3JtYXQgXCJ1c2VyQGRvbWFpbi5jb21cIiIsImVtYWlsTWFzayI6L1thLXowLTlfXC5cLUBdL2ksInVybCI6ZnVuY3Rpb24oRSl7cmV0dXJuIEEudGVzdChFKX0sInVybFRleHQiOiJUaGlzIGZpZWxkIHNob3VsZCBiZSBhIFVSTCBpbiB0aGUgZm9ybWF0IFwiaHR0cDovIisiL3d3dy5kb21haW4uY29tXCIiLCJhbHBoYSI6ZnVuY3Rpb24oRSl7cmV0dXJuIEMudGVzdChFKX0sImFscGhhVGV4dCI6IlRoaXMgZmllbGQgc2hvdWxkIG9ubHkgY29udGFpbiBsZXR0ZXJzIGFuZCBfIiwiYWxwaGFNYXNrIjovW2Etel9dL2ksImFscGhhbnVtIjpmdW5jdGlvbihFKXtyZXR1cm4gRC50ZXN0KEUpfSwiYWxwaGFudW1UZXh0IjoiVGhpcyBmaWVsZCBzaG91bGQgb25seSBjb250YWluIGxldHRlcnMsIG51bWJlcnMgYW5kIF8iLCJhbHBoYW51bU1hc2siOi9bYS16MC05X10vaX19KCk7DQpFeHQuZ3JpZC5HcmlkUGFuZWw9RXh0LmV4dGVuZChFeHQuUGFuZWwse2RkVGV4dDoiezB9IHNlbGVjdGVkIHJvd3sxfSIsbWluQ29sdW1uV2lkdGg6MjUsdHJhY2tNb3VzZU92ZXI6dHJ1ZSxlbmFibGVEcmFnRHJvcDpmYWxzZSxlbmFibGVDb2x1bW5Nb3ZlOnRydWUsZW5hYmxlQ29sdW1uSGlkZTp0cnVlLGVuYWJsZUhkTWVudTp0cnVlLHN0cmlwZVJvd3M6ZmFsc2UsYXV0b0V4cGFuZENvbHVtbjpmYWxzZSxhdXRvRXhwYW5kTWluOjUwLGF1dG9FeHBhbmRNYXg6MTAwMCx2aWV3Om51bGwsbG9hZE1hc2s6ZmFsc2UscmVuZGVyZWQ6ZmFsc2Usdmlld1JlYWR5OmZhbHNlLHN0YXRlRXZlbnRzOlsiY29sdW1ubW92ZSIsImNvbHVtbnJlc2l6ZSIsInNvcnRjaGFuZ2UiXSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7RXh0LmdyaWQuR3JpZFBhbmVsLnN1cGVyY2xhc3MuaW5pdENvbXBvbmVudC5jYWxsKHRoaXMpO3RoaXMuYXV0b1Njcm9sbD1mYWxzZTt0aGlzLmF1dG9XaWR0aD1mYWxzZTtpZihFeHQuaXNBcnJheSh0aGlzLmNvbHVtbnMpKXt0aGlzLmNvbE1vZGVsPW5ldyBFeHQuZ3JpZC5Db2x1bW5Nb2RlbCh0aGlzLmNvbHVtbnMpO2RlbGV0ZSB0aGlzLmNvbHVtbnN9aWYodGhpcy5kcyl7dGhpcy5zdG9yZT10aGlzLmRzO2RlbGV0ZSB0aGlzLmRzfWlmKHRoaXMuY20pe3RoaXMuY29sTW9kZWw9dGhpcy5jbTtkZWxldGUgdGhpcy5jbX1pZih0aGlzLnNtKXt0aGlzLnNlbE1vZGVsPXRoaXMuc207ZGVsZXRlIHRoaXMuc219dGhpcy5zdG9yZT1FeHQuU3RvcmVNZ3IubG9va3VwKHRoaXMuc3RvcmUpO3RoaXMuYWRkRXZlbnRzKCJjbGljayIsImRibGNsaWNrIiwiY29udGV4dG1lbnUiLCJtb3VzZWRvd24iLCJtb3VzZXVwIiwibW91c2VvdmVyIiwibW91c2VvdXQiLCJrZXlwcmVzcyIsImtleWRvd24iLCJjZWxsbW91c2Vkb3duIiwicm93bW91c2Vkb3duIiwiaGVhZGVybW91c2Vkb3duIiwiY2VsbGNsaWNrIiwiY2VsbGRibGNsaWNrIiwicm93Y2xpY2siLCJyb3dkYmxjbGljayIsImhlYWRlcmNsaWNrIiwiaGVhZGVyZGJsY2xpY2siLCJyb3djb250ZXh0bWVudSIsImNlbGxjb250ZXh0bWVudSIsImhlYWRlcmNvbnRleHRtZW51IiwiYm9keXNjcm9sbCIsImNvbHVtbnJlc2l6ZSIsImNvbHVtbm1vdmUiLCJzb3J0Y2hhbmdlIil9LG9uUmVuZGVyOmZ1bmN0aW9uKEMsQSl7RXh0LmdyaWQuR3JpZFBhbmVsLnN1cGVyY2xhc3Mub25SZW5kZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBEPXRoaXMuYm9keTt0aGlzLmVsLmFkZENsYXNzKCJ4LWdyaWQtcGFuZWwiKTt2YXIgQj10aGlzLmdldFZpZXcoKTtCLmluaXQodGhpcyk7RC5vbigibW91c2Vkb3duIix0aGlzLm9uTW91c2VEb3duLHRoaXMpO0Qub24oImNsaWNrIix0aGlzLm9uQ2xpY2ssdGhpcyk7RC5vbigiZGJsY2xpY2siLHRoaXMub25EYmxDbGljayx0aGlzKTtELm9uKCJjb250ZXh0bWVudSIsdGhpcy5vbkNvbnRleHRNZW51LHRoaXMpO0Qub24oImtleWRvd24iLHRoaXMub25LZXlEb3duLHRoaXMpO3RoaXMucmVsYXlFdmVudHMoRCxbIm1vdXNlZG93biIsIm1vdXNldXAiLCJtb3VzZW92ZXIiLCJtb3VzZW91dCIsImtleXByZXNzIl0pO3RoaXMuZ2V0U2VsZWN0aW9uTW9kZWwoKS5pbml0KHRoaXMpO3RoaXMudmlldy5yZW5kZXIoKX0saW5pdEV2ZW50czpmdW5jdGlvbigpe0V4dC5ncmlkLkdyaWRQYW5lbC5zdXBlcmNsYXNzLmluaXRFdmVudHMuY2FsbCh0aGlzKTtpZih0aGlzLmxvYWRNYXNrKXt0aGlzLmxvYWRNYXNrPW5ldyBFeHQuTG9hZE1hc2sodGhpcy5id3JhcCxFeHQuYXBwbHkoe3N0b3JlOnRoaXMuc3RvcmV9LHRoaXMubG9hZE1hc2spKX19LGluaXRTdGF0ZUV2ZW50czpmdW5jdGlvbigpe0V4dC5ncmlkLkdyaWRQYW5lbC5zdXBlcmNsYXNzLmluaXRTdGF0ZUV2ZW50cy5jYWxsKHRoaXMpO3RoaXMuY29sTW9kZWwub24oImhpZGRlbmNoYW5nZSIsdGhpcy5zYXZlU3RhdGUsdGhpcyx7ZGVsYXk6MTAwfSl9LGFwcGx5U3RhdGU6ZnVuY3Rpb24oRil7dmFyIEI9dGhpcy5jb2xNb2RlbDt2YXIgRT1GLmNvbHVtbnM7aWYoRSl7Zm9yKHZhciBDPTAsQT1FLmxlbmd0aDtDPEE7QysrKXt2YXIgRD1FW0NdO3ZhciBIPUIuZ2V0Q29sdW1uQnlJZChELmlkKTtpZihIKXtILmhpZGRlbj1ELmhpZGRlbjtILndpZHRoPUQud2lkdGg7dmFyIEc9Qi5nZXRJbmRleEJ5SWQoRC5pZCk7aWYoRyE9Qyl7Qi5tb3ZlQ29sdW1uKEcsQyl9fX19aWYoRi5zb3J0KXt0aGlzLnN0b3JlW3RoaXMuc3RvcmUucmVtb3RlU29ydD8ic2V0RGVmYXVsdFNvcnQiOiJzb3J0Il0oRi5zb3J0LmZpZWxkLEYuc29ydC5kaXJlY3Rpb24pfX0sZ2V0U3RhdGU6ZnVuY3Rpb24oKXt2YXIgQz17Y29sdW1uczpbXX07Zm9yKHZhciBCPTAsRDtEPXRoaXMuY29sTW9kZWwuY29uZmlnW0JdO0IrKyl7Qy5jb2x1bW5zW0JdPXtpZDpELmlkLHdpZHRoOkQud2lkdGh9O2lmKEQuaGlkZGVuKXtDLmNvbHVtbnNbQl0uaGlkZGVuPXRydWV9fXZhciBBPXRoaXMuc3RvcmUuZ2V0U29ydFN0YXRlKCk7aWYoQSl7Qy5zb3J0PUF9cmV0dXJuIEN9LGFmdGVyUmVuZGVyOmZ1bmN0aW9uKCl7RXh0LmdyaWQuR3JpZFBhbmVsLnN1cGVyY2xhc3MuYWZ0ZXJSZW5kZXIuY2FsbCh0aGlzKTt0aGlzLnZpZXcubGF5b3V0KCk7dGhpcy52aWV3UmVhZHk9dHJ1ZX0scmVjb25maWd1cmU6ZnVuY3Rpb24oQSxCKXtpZih0aGlzLmxvYWRNYXNrKXt0aGlzLmxvYWRNYXNrLmRlc3Ryb3koKTt0aGlzLmxvYWRNYXNrPW5ldyBFeHQuTG9hZE1hc2sodGhpcy5id3JhcCxFeHQuYXBwbHkoe3N0b3JlOkF9LHRoaXMuaW5pdGlhbENvbmZpZy5sb2FkTWFzaykpfXRoaXMudmlldy5iaW5kKEEsQik7dGhpcy5zdG9yZT1BO3RoaXMuY29sTW9kZWw9QjtpZih0aGlzLnJlbmRlcmVkKXt0aGlzLnZpZXcucmVmcmVzaCh0cnVlKX19LG9uS2V5RG93bjpmdW5jdGlvbihBKXt0aGlzLmZpcmVFdmVudCgia2V5ZG93biIsQSl9LG9uRGVzdHJveTpmdW5jdGlvbigpe2lmKHRoaXMucmVuZGVyZWQpe2lmKHRoaXMubG9hZE1hc2spe3RoaXMubG9hZE1hc2suZGVzdHJveSgpfXZhciBBPXRoaXMuYm9keTtBLnJlbW92ZUFsbExpc3RlbmVycygpO3RoaXMudmlldy5kZXN0cm95KCk7QS51cGRhdGUoIiIpfXRoaXMuY29sTW9kZWwucHVyZ2VMaXN0ZW5lcnMoKTtFeHQuZ3JpZC5HcmlkUGFuZWwuc3VwZXJjbGFzcy5vbkRlc3Ryb3kuY2FsbCh0aGlzKX0scHJvY2Vzc0V2ZW50OmZ1bmN0aW9uKEMsRSl7dGhpcy5maXJlRXZlbnQoQyxFKTt2YXIgRD1FLmdldFRhcmdldCgpO3ZhciBCPXRoaXMudmlldzt2YXIgRz1CLmZpbmRIZWFkZXJJbmRleChEKTtpZihHIT09ZmFsc2Upe3RoaXMuZmlyZUV2ZW50KCJoZWFkZXIiK0MsdGhpcyxHLEUpfWVsc2V7dmFyIEY9Qi5maW5kUm93SW5kZXgoRCk7dmFyIEE9Qi5maW5kQ2VsbEluZGV4KEQpO2lmKEYhPT1mYWxzZSl7dGhpcy5maXJlRXZlbnQoInJvdyIrQyx0aGlzLEYsRSk7aWYoQSE9PWZhbHNlKXt0aGlzLmZpcmVFdmVudCgiY2VsbCIrQyx0aGlzLEYsQSxFKX19fX0sb25DbGljazpmdW5jdGlvbihBKXt0aGlzLnByb2Nlc3NFdmVudCgiY2xpY2siLEEpfSxvbk1vdXNlRG93bjpmdW5jdGlvbihBKXt0aGlzLnByb2Nlc3NFdmVudCgibW91c2Vkb3duIixBKX0sb25Db250ZXh0TWVudTpmdW5jdGlvbihCLEEpe3RoaXMucHJvY2Vzc0V2ZW50KCJjb250ZXh0bWVudSIsQil9LG9uRGJsQ2xpY2s6ZnVuY3Rpb24oQSl7dGhpcy5wcm9jZXNzRXZlbnQoImRibGNsaWNrIixBKX0sd2Fsa0NlbGxzOmZ1bmN0aW9uKEosQyxCLEUsSSl7dmFyIEg9dGhpcy5jb2xNb2RlbCxGPUguZ2V0Q29sdW1uQ291bnQoKTt2YXIgQT10aGlzLnN0b3JlLEc9QS5nZXRDb3VudCgpLEQ9dHJ1ZTtpZihCPDApe2lmKEM8MCl7Si0tO0Q9ZmFsc2V9d2hpbGUoSj49MCl7aWYoIUQpe0M9Ri0xfUQ9ZmFsc2U7d2hpbGUoQz49MCl7aWYoRS5jYWxsKEl8fHRoaXMsSixDLEgpPT09dHJ1ZSl7cmV0dXJuW0osQ119Qy0tfUotLX19ZWxzZXtpZihDPj1GKXtKKys7RD1mYWxzZX13aGlsZShKPEcpe2lmKCFEKXtDPTB9RD1mYWxzZTt3aGlsZShDPEYpe2lmKEUuY2FsbChJfHx0aGlzLEosQyxIKT09PXRydWUpe3JldHVybltKLENdfUMrK31KKyt9fXJldHVybiBudWxsfSxnZXRTZWxlY3Rpb25zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VsTW9kZWwuZ2V0U2VsZWN0aW9ucygpfSxvblJlc2l6ZTpmdW5jdGlvbigpe0V4dC5ncmlkLkdyaWRQYW5lbC5zdXBlcmNsYXNzLm9uUmVzaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZih0aGlzLnZpZXdSZWFkeSl7dGhpcy52aWV3LmxheW91dCgpfX0sZ2V0R3JpZEVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYm9keX0sc3RvcEVkaXRpbmc6ZnVuY3Rpb24oKXt9LGdldFNlbGVjdGlvbk1vZGVsOmZ1bmN0aW9uKCl7aWYoIXRoaXMuc2VsTW9kZWwpe3RoaXMuc2VsTW9kZWw9bmV3IEV4dC5ncmlkLlJvd1NlbGVjdGlvbk1vZGVsKHRoaXMuZGlzYWJsZVNlbGVjdGlvbj97c2VsZWN0Um93OkV4dC5lbXB0eUZufTpudWxsKX1yZXR1cm4gdGhpcy5zZWxNb2RlbH0sZ2V0U3RvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdG9yZX0sZ2V0Q29sdW1uTW9kZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb2xNb2RlbH0sZ2V0VmlldzpmdW5jdGlvbigpe2lmKCF0aGlzLnZpZXcpe3RoaXMudmlldz1uZXcgRXh0LmdyaWQuR3JpZFZpZXcodGhpcy52aWV3Q29uZmlnKX1yZXR1cm4gdGhpcy52aWV3fSxnZXREcmFnRHJvcFRleHQ6ZnVuY3Rpb24oKXt2YXIgQT10aGlzLnNlbE1vZGVsLmdldENvdW50KCk7cmV0dXJuIFN0cmluZy5mb3JtYXQodGhpcy5kZFRleHQsQSxBPT0xPyIiOiJzIil9fSk7RXh0LnJlZygiZ3JpZCIsRXh0LmdyaWQuR3JpZFBhbmVsKTsNCkV4dC5ncmlkLkdyaWRWaWV3PWZ1bmN0aW9uKEEpe0V4dC5hcHBseSh0aGlzLEEpO3RoaXMuYWRkRXZlbnRzKCJiZWZvcmVyb3dyZW1vdmVkIiwiYmVmb3Jlcm93c2luc2VydGVkIiwiYmVmb3JlcmVmcmVzaCIsInJvd3JlbW92ZWQiLCJyb3dzaW5zZXJ0ZWQiLCJyb3d1cGRhdGVkIiwicmVmcmVzaCIpO0V4dC5ncmlkLkdyaWRWaWV3LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKX07RXh0LmV4dGVuZChFeHQuZ3JpZC5HcmlkVmlldyxFeHQudXRpbC5PYnNlcnZhYmxlLHtzY3JvbGxPZmZzZXQ6MTksYXV0b0ZpbGw6ZmFsc2UsZm9yY2VGaXQ6ZmFsc2Usc29ydENsYXNzZXM6WyJzb3J0LWFzYyIsInNvcnQtZGVzYyJdLHNvcnRBc2NUZXh0OiJTb3J0IEFzY2VuZGluZyIsc29ydERlc2NUZXh0OiJTb3J0IERlc2NlbmRpbmciLGNvbHVtbnNUZXh0OiJDb2x1bW5zIixib3JkZXJXaWR0aDoyLGluaXRUZW1wbGF0ZXM6ZnVuY3Rpb24oKXt2YXIgQz10aGlzLnRlbXBsYXRlc3x8e307aWYoIUMubWFzdGVyKXtDLm1hc3Rlcj1uZXcgRXh0LlRlbXBsYXRlKCI8ZGl2IG5hbWU9XCJ4LWdyaWQzXCIgY2xhc3M9XCJ4LWdyaWQzXCIgaGlkZWZvY3VzPVwidHJ1ZVwiPiIsIjxkaXYgY2xhc3M9XCJ4LWdyaWQzLXZpZXdwb3J0XCI+IiwiPGRpdiBjbGFzcz1cIngtZ3JpZDMtaGVhZGVyXCI+PGRpdiBjbGFzcz1cIngtZ3JpZDMtaGVhZGVyLWlubmVyXCI+PGRpdiBjbGFzcz1cIngtZ3JpZDMtaGVhZGVyLW9mZnNldFwiPntoZWFkZXJ9PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cIngtY2xlYXJcIj48L2Rpdj48L2Rpdj4iLCI8ZGl2IG5hbWU9XCJ4LWdyaWQzLXNjcm9sbGVyXCIgY2xhc3M9XCJ4LWdyaWQzLXNjcm9sbGVyXCI+PGRpdiBjbGFzcz1cIngtZ3JpZDMtYm9keVwiPntib2R5fTwvZGl2PjxhIGhyZWY9XCIjXCIgY2xhc3M9XCJ4LWdyaWQzLWZvY3VzXCIgdGFiSW5kZXg9XCItMVwiPjwvYT48L2Rpdj4iLCI8L2Rpdj4iLCI8ZGl2IGNsYXNzPVwieC1ncmlkMy1yZXNpemUtbWFya2VyXCI+JiMxNjA7PC9kaXY+IiwiPGRpdiBjbGFzcz1cIngtZ3JpZDMtcmVzaXplLXByb3h5XCI+JiMxNjA7PC9kaXY+IiwiPC9kaXY+Iil9aWYoIUMuaGVhZGVyKXtDLmhlYWRlcj1uZXcgRXh0LlRlbXBsYXRlKCI8dGFibGUgYm9yZGVyPVwiMFwiIGNlbGxzcGFjaW5nPVwiMFwiIGNlbGxwYWRkaW5nPVwiMFwiIHN0eWxlPVwie3RzdHlsZX1cIj4iLCI8dGhlYWQ+PHRyIGNsYXNzPVwieC1ncmlkMy1oZC1yb3dcIj57Y2VsbHN9PC90cj48L3RoZWFkPiIsIjwvdGFibGU+Iil9aWYoIUMuaGNlbGwpe0MuaGNlbGw9bmV3IEV4dC5UZW1wbGF0ZSgiPHRkIGNsYXNzPVwieC1ncmlkMy1oZCB4LWdyaWQzLWNlbGwgeC1ncmlkMy10ZC17aWR9XCIgc3R5bGU9XCJ7c3R5bGV9XCI+PGRpdiB7dG9vbHRpcH0ge2F0dHJ9IGNsYXNzPVwieC1ncmlkMy1oZC1pbm5lciB4LWdyaWQzLWhkLXtpZH1cIiB1bnNlbGVjdGFibGU9XCJvblwiIHN0eWxlPVwie2lzdHlsZX1cIj4iLHRoaXMuZ3JpZC5lbmFibGVIZE1lbnU/IjxhIGNsYXNzPVwieC1ncmlkMy1oZC1idG5cIiBocmVmPVwiI1wiPjwvYT4iOiIiLCJ7dmFsdWV9PGltZyBjbGFzcz1cIngtZ3JpZDMtc29ydC1pY29uXCIgc3JjPVwiIixFeHQuQkxBTktfSU1BR0VfVVJMLCJcIiAvPiIsIjwvZGl2PjwvdGQ+Iil9aWYoIUMuYm9keSl7Qy5ib2R5PW5ldyBFeHQuVGVtcGxhdGUoIntyb3dzfSIpfWlmKCFDLnJvdyl7Qy5yb3c9bmV3IEV4dC5UZW1wbGF0ZSgiPGRpdiBjbGFzcz1cIngtZ3JpZDMtcm93IHthbHR9XCIgc3R5bGU9XCJ7dHN0eWxlfVwiPjx0YWJsZSBjbGFzcz1cIngtZ3JpZDMtcm93LXRhYmxlXCIgYm9yZGVyPVwiMFwiIGNlbGxzcGFjaW5nPVwiMFwiIGNlbGxwYWRkaW5nPVwiMFwiIHN0eWxlPVwie3RzdHlsZX1cIj4iLCI8dGJvZHk+PHRyPntjZWxsc308L3RyPiIsKHRoaXMuZW5hYmxlUm93Qm9keT8iPHRyIGNsYXNzPVwieC1ncmlkMy1yb3ctYm9keS10clwiIHN0eWxlPVwie2JvZHlTdHlsZX1cIj48dGQgY29sc3Bhbj1cIntjb2xzfVwiIGNsYXNzPVwieC1ncmlkMy1ib2R5LWNlbGxcIiB0YWJJbmRleD1cIjBcIiBoaWRlZm9jdXM9XCJvblwiPjxkaXYgY2xhc3M9XCJ4LWdyaWQzLXJvdy1ib2R5XCI+e2JvZHl9PC9kaXY+PC90ZD48L3RyPiI6IiIpLCI8L3Rib2R5PjwvdGFibGU+PC9kaXY+Iil9aWYoIUMuY2VsbCl7Qy5jZWxsPW5ldyBFeHQuVGVtcGxhdGUoIjx0ZCBjbGFzcz1cIngtZ3JpZDMtY29sIHgtZ3JpZDMtY2VsbCB4LWdyaWQzLXRkLXtpZH0ge2Nzc31cIiBzdHlsZT1cIntzdHlsZX1cIiB0YWJJbmRleD1cIjBcIiB7Y2VsbEF0dHJ9PiIsIjxkaXYgY2xhc3M9XCJ4LWdyaWQzLWNlbGwtaW5uZXIgeC1ncmlkMy1jb2wte2lkfVwiIHVuc2VsZWN0YWJsZT1cIm9uXCIge2F0dHJ9Pnt2YWx1ZX08L2Rpdj4iLCI8L3RkPiIpfWZvcih2YXIgQSBpbiBDKXt2YXIgQj1DW0FdO2lmKEImJnR5cGVvZiBCLmNvbXBpbGU9PSJmdW5jdGlvbiImJiFCLmNvbXBpbGVkKXtCLmRpc2FibGVGb3JtYXRzPXRydWU7Qi5jb21waWxlKCl9fXRoaXMudGVtcGxhdGVzPUM7dGhpcy50ZENsYXNzPSJ4LWdyaWQzLWNlbGwiO3RoaXMuY2VsbFNlbGVjdG9yPSJ0ZC54LWdyaWQzLWNlbGwiO3RoaXMuaGRDbHM9IngtZ3JpZDMtaGQiO3RoaXMucm93U2VsZWN0b3I9ImRpdi54LWdyaWQzLXJvdyI7dGhpcy5jb2xSZT1uZXcgUmVnRXhwKCJ4LWdyaWQzLXRkLShbXlxcc10rKSIsIiIpfSxmbHk6ZnVuY3Rpb24oQSl7aWYoIXRoaXMuX2ZseXdlaWdodCl7dGhpcy5fZmx5d2VpZ2h0PW5ldyBFeHQuRWxlbWVudC5GbHl3ZWlnaHQoZG9jdW1lbnQuYm9keSl9dGhpcy5fZmx5d2VpZ2h0LmRvbT1BO3JldHVybiB0aGlzLl9mbHl3ZWlnaHR9LGdldEVkaXRvclBhcmVudDpmdW5jdGlvbihBKXtyZXR1cm4gdGhpcy5zY3JvbGxlci5kb219LGluaXRFbGVtZW50czpmdW5jdGlvbigpe3ZhciBDPUV4dC5FbGVtZW50O3ZhciBCPXRoaXMuZ3JpZC5nZXRHcmlkRWwoKS5kb20uZmlyc3RDaGlsZDt2YXIgQT1CLmNoaWxkTm9kZXM7dGhpcy5lbD1uZXcgQyhCKTt0aGlzLm1haW5XcmFwPW5ldyBDKEFbMF0pO3RoaXMubWFpbkhkPW5ldyBDKHRoaXMubWFpbldyYXAuZG9tLmZpcnN0Q2hpbGQpO2lmKHRoaXMuZ3JpZC5oaWRlSGVhZGVycyl7dGhpcy5tYWluSGQuc2V0RGlzcGxheWVkKGZhbHNlKX10aGlzLmlubmVySGQ9dGhpcy5tYWluSGQuZG9tLmZpcnN0Q2hpbGQ7dGhpcy5zY3JvbGxlcj1uZXcgQyh0aGlzLm1haW5XcmFwLmRvbS5jaGlsZE5vZGVzWzFdKTtpZih0aGlzLmZvcmNlRml0KXt0aGlzLnNjcm9sbGVyLnNldFN0eWxlKCJvdmVyZmxvdy14IiwiaGlkZGVuIil9dGhpcy5tYWluQm9keT1uZXcgQyh0aGlzLnNjcm9sbGVyLmRvbS5maXJzdENoaWxkKTt0aGlzLmZvY3VzRWw9bmV3IEModGhpcy5zY3JvbGxlci5kb20uY2hpbGROb2Rlc1sxXSk7dGhpcy5mb2N1c0VsLnN3YWxsb3dFdmVudCgiY2xpY2siLHRydWUpO3RoaXMucmVzaXplTWFya2VyPW5ldyBDKEFbMV0pO3RoaXMucmVzaXplUHJveHk9bmV3IEMoQVsyXSl9LGdldFJvd3M6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNSb3dzKCk/dGhpcy5tYWluQm9keS5kb20uY2hpbGROb2RlczpbXX0sZmluZENlbGw6ZnVuY3Rpb24oQSl7aWYoIUEpe3JldHVybiBmYWxzZX1yZXR1cm4gdGhpcy5mbHkoQSkuZmluZFBhcmVudCh0aGlzLmNlbGxTZWxlY3RvciwzKX0sZmluZENlbGxJbmRleDpmdW5jdGlvbihDLEIpe3ZhciBBPXRoaXMuZmluZENlbGwoQyk7aWYoQSYmKCFCfHx0aGlzLmZseShBKS5oYXNDbGFzcyhCKSkpe3JldHVybiB0aGlzLmdldENlbGxJbmRleChBKX1yZXR1cm4gZmFsc2V9LGdldENlbGxJbmRleDpmdW5jdGlvbihCKXtpZihCKXt2YXIgQT1CLmNsYXNzTmFtZS5tYXRjaCh0aGlzLmNvbFJlKTtpZihBJiZBWzFdKXtyZXR1cm4gdGhpcy5jbS5nZXRJbmRleEJ5SWQoQVsxXSl9fXJldHVybiBmYWxzZX0sZmluZEhlYWRlckNlbGw6ZnVuY3Rpb24oQil7dmFyIEE9dGhpcy5maW5kQ2VsbChCKTtyZXR1cm4gQSYmdGhpcy5mbHkoQSkuaGFzQ2xhc3ModGhpcy5oZENscyk/QTpudWxsfSxmaW5kSGVhZGVySW5kZXg6ZnVuY3Rpb24oQSl7cmV0dXJuIHRoaXMuZmluZENlbGxJbmRleChBLHRoaXMuaGRDbHMpfSxmaW5kUm93OmZ1bmN0aW9uKEEpe2lmKCFBKXtyZXR1cm4gZmFsc2V9cmV0dXJuIHRoaXMuZmx5KEEpLmZpbmRQYXJlbnQodGhpcy5yb3dTZWxlY3RvciwxMCl9LGZpbmRSb3dJbmRleDpmdW5jdGlvbihBKXt2YXIgQj10aGlzLmZpbmRSb3coQSk7cmV0dXJuIEI/Qi5yb3dJbmRleDpmYWxzZX0sZ2V0Um93OmZ1bmN0aW9uKEEpe3JldHVybiB0aGlzLmdldFJvd3MoKVtBXX0sZ2V0Q2VsbDpmdW5jdGlvbihCLEEpe3JldHVybiB0aGlzLmdldFJvdyhCKS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGQiKVtBXX0sZ2V0SGVhZGVyQ2VsbDpmdW5jdGlvbihBKXtyZXR1cm4gdGhpcy5tYWluSGQuZG9tLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0ZCIpW0FdfSxhZGRSb3dDbGFzczpmdW5jdGlvbihDLEEpe3ZhciBCPXRoaXMuZ2V0Um93KEMpO2lmKEIpe3RoaXMuZmx5KEIpLmFkZENsYXNzKEEpfX0scmVtb3ZlUm93Q2xhc3M6ZnVuY3Rpb24oQyxBKXt2YXIgQj10aGlzLmdldFJvdyhDKTtpZihCKXt0aGlzLmZseShCKS5yZW1vdmVDbGFzcyhBKX19LHJlbW92ZVJvdzpmdW5jdGlvbihBKXtFeHQucmVtb3ZlTm9kZSh0aGlzLmdldFJvdyhBKSl9LHJlbW92ZVJvd3M6ZnVuY3Rpb24oQyxBKXt2YXIgQj10aGlzLm1haW5Cb2R5LmRvbTtmb3IodmFyIEQ9QztEPD1BO0QrKyl7RXh0LnJlbW92ZU5vZGUoQi5jaGlsZE5vZGVzW0NdKX19LGdldFNjcm9sbFN0YXRlOmZ1bmN0aW9uKCl7dmFyIEE9dGhpcy5zY3JvbGxlci5kb207cmV0dXJue2xlZnQ6QS5zY3JvbGxMZWZ0LHRvcDpBLnNjcm9sbFRvcH19LHJlc3RvcmVTY3JvbGw6ZnVuY3Rpb24oQSl7dmFyIEI9dGhpcy5zY3JvbGxlci5kb207Qi5zY3JvbGxMZWZ0PUEubGVmdDtCLnNjcm9sbFRvcD1BLnRvcH0sc2Nyb2xsVG9Ub3A6ZnVuY3Rpb24oKXt0aGlzLnNjcm9sbGVyLmRvbS5zY3JvbGxUb3A9MDt0aGlzLnNjcm9sbGVyLmRvbS5zY3JvbGxMZWZ0PTB9LHN5bmNTY3JvbGw6ZnVuY3Rpb24oKXt0aGlzLnN5bmNIZWFkZXJTY3JvbGwoKTt2YXIgQT10aGlzLnNjcm9sbGVyLmRvbTt0aGlzLmdyaWQuZmlyZUV2ZW50KCJib2R5c2Nyb2xsIixBLnNjcm9sbExlZnQsQS5zY3JvbGxUb3ApfSxzeW5jSGVhZGVyU2Nyb2xsOmZ1bmN0aW9uKCl7dmFyIEE9dGhpcy5zY3JvbGxlci5kb207dGhpcy5pbm5lckhkLnNjcm9sbExlZnQ9QS5zY3JvbGxMZWZ0O3RoaXMuaW5uZXJIZC5zY3JvbGxMZWZ0PUEuc2Nyb2xsTGVmdH0sdXBkYXRlU29ydEljb246ZnVuY3Rpb24oQixBKXt2YXIgRD10aGlzLnNvcnRDbGFzc2VzO3ZhciBDPXRoaXMubWFpbkhkLnNlbGVjdCgidGQiKS5yZW1vdmVDbGFzcyhEKTtDLml0ZW0oQikuYWRkQ2xhc3MoRFtBPT0iREVTQyI/MTowXSl9LHVwZGF0ZUFsbENvbHVtbldpZHRoczpmdW5jdGlvbigpe3ZhciBEPXRoaXMuZ2V0VG90YWxXaWR0aCgpO3ZhciBIPXRoaXMuY20uZ2V0Q29sdW1uQ291bnQoKTt2YXIgRj1bXTtmb3IodmFyIEI9MDtCPEg7QisrKXtGW0JdPXRoaXMuZ2V0Q29sdW1uV2lkdGgoQil9dGhpcy5pbm5lckhkLmZpcnN0Q2hpbGQuZmlyc3RDaGlsZC5zdHlsZS53aWR0aD1EO2Zvcih2YXIgQj0wO0I8SDtCKyspe3ZhciBDPXRoaXMuZ2V0SGVhZGVyQ2VsbChCKTtDLnN0eWxlLndpZHRoPUZbQl19dmFyIEc9dGhpcy5nZXRSb3dzKCk7Zm9yKHZhciBCPTAsRT1HLmxlbmd0aDtCPEU7QisrKXtHW0JdLnN0eWxlLndpZHRoPUQ7R1tCXS5maXJzdENoaWxkLnN0eWxlLndpZHRoPUQ7dmFyIEk9R1tCXS5maXJzdENoaWxkLnJvd3NbMF07Zm9yKHZhciBBPTA7QTxIO0ErKyl7SS5jaGlsZE5vZGVzW0FdLnN0eWxlLndpZHRoPUZbQV19fXRoaXMub25BbGxDb2x1bW5XaWR0aHNVcGRhdGVkKEYsRCl9LHVwZGF0ZUNvbHVtbldpZHRoOmZ1bmN0aW9uKEQsRyl7dmFyIEI9dGhpcy5nZXRDb2x1bW5XaWR0aChEKTt2YXIgQz10aGlzLmdldFRvdGFsV2lkdGgoKTt0aGlzLmlubmVySGQuZmlyc3RDaGlsZC5maXJzdENoaWxkLnN0eWxlLndpZHRoPUM7dmFyIEg9dGhpcy5nZXRIZWFkZXJDZWxsKEQpO0guc3R5bGUud2lkdGg9Qjt2YXIgRj10aGlzLmdldFJvd3MoKTtmb3IodmFyIEU9MCxBPUYubGVuZ3RoO0U8QTtFKyspe0ZbRV0uc3R5bGUud2lkdGg9QztGW0VdLmZpcnN0Q2hpbGQuc3R5bGUud2lkdGg9QztGW0VdLmZpcnN0Q2hpbGQucm93c1swXS5jaGlsZE5vZGVzW0RdLnN0eWxlLndpZHRoPUJ9dGhpcy5vbkNvbHVtbldpZHRoVXBkYXRlZChELEIsQyl9LHVwZGF0ZUNvbHVtbkhpZGRlbjpmdW5jdGlvbihDLEYpe3ZhciBCPXRoaXMuZ2V0VG90YWxXaWR0aCgpO3RoaXMuaW5uZXJIZC5maXJzdENoaWxkLmZpcnN0Q2hpbGQuc3R5bGUud2lkdGg9Qjt2YXIgSD1GPyJub25lIjoiIjt2YXIgRz10aGlzLmdldEhlYWRlckNlbGwoQyk7Ry5zdHlsZS5kaXNwbGF5PUg7dmFyIEU9dGhpcy5nZXRSb3dzKCk7Zm9yKHZhciBEPTAsQT1FLmxlbmd0aDtEPEE7RCsrKXtFW0RdLnN0eWxlLndpZHRoPUI7RVtEXS5maXJzdENoaWxkLnN0eWxlLndpZHRoPUI7RVtEXS5maXJzdENoaWxkLnJvd3NbMF0uY2hpbGROb2Rlc1tDXS5zdHlsZS5kaXNwbGF5PUh9dGhpcy5vbkNvbHVtbkhpZGRlblVwZGF0ZWQoQyxGLEIpO2RlbGV0ZSB0aGlzLmxhc3RWaWV3V2lkdGg7dGhpcy5sYXlvdXQoKX0sZG9SZW5kZXI6ZnVuY3Rpb24oRSxHLE0sQSxMLFEpe3ZhciBCPXRoaXMudGVtcGxhdGVzLEQ9Qi5jZWxsLEY9Qi5yb3csSD1MLTE7dmFyIEM9IndpZHRoOiIrdGhpcy5nZXRUb3RhbFdpZHRoKCkrIjsiO3ZhciBUPVtdLE4sVSxPPXt9LEk9e3RzdHlsZTpDfSxLO2Zvcih2YXIgUD0wLFM9Ry5sZW5ndGg7UDxTO1ArKyl7Sz1HW1BdO049W107dmFyIEo9KFArQSk7Zm9yKHZhciBSPTA7UjxMO1IrKyl7VT1FW1JdO08uaWQ9VS5pZDtPLmNzcz1SPT0wPyJ4LWdyaWQzLWNlbGwtZmlyc3QgIjooUj09SD8ieC1ncmlkMy1jZWxsLWxhc3QgIjoiIik7Ty5hdHRyPU8uY2VsbEF0dHI9IiI7Ty52YWx1ZT1VLnJlbmRlcmVyKEsuZGF0YVtVLm5hbWVdLE8sSyxKLFIsTSk7Ty5zdHlsZT1VLnN0eWxlO2lmKE8udmFsdWU9PXVuZGVmaW5lZHx8Ty52YWx1ZT09PSIiKXtPLnZhbHVlPSImIzE2MDsifWlmKEsuZGlydHkmJnR5cGVvZiBLLm1vZGlmaWVkW1UubmFtZV0hPT0idW5kZWZpbmVkIil7Ty5jc3MrPSIgeC1ncmlkMy1kaXJ0eS1jZWxsIn1OW04ubGVuZ3RoXT1ELmFwcGx5KE8pfXZhciBWPVtdO2lmKFEmJigoSisxKSUyPT0wKSl7VlswXT0ieC1ncmlkMy1yb3ctYWx0In1pZihLLmRpcnR5KXtWWzFdPSIgeC1ncmlkMy1kaXJ0eS1yb3cifUkuY29scz1MO2lmKHRoaXMuZ2V0Um93Q2xhc3Mpe1ZbMl09dGhpcy5nZXRSb3dDbGFzcyhLLEosSSxNKX1JLmFsdD1WLmpvaW4oIiAiKTtJLmNlbGxzPU4uam9pbigiIik7VFtULmxlbmd0aF09Ri5hcHBseShJKX1yZXR1cm4gVC5qb2luKCIiKX0scHJvY2Vzc1Jvd3M6ZnVuY3Rpb24oRSxEKXtpZih0aGlzLmRzLmdldENvdW50KCk8MSl7cmV0dXJuIH1EPUR8fCF0aGlzLmdyaWQuc3RyaXBlUm93cztFPUV8fDA7dmFyIEk9dGhpcy5nZXRSb3dzKCk7dmFyIEY9IiB4LWdyaWQzLXJvdy1hbHQgIjtmb3IodmFyIEI9RSxDPUkubGVuZ3RoO0I8QztCKyspe3ZhciBIPUlbQl07SC5yb3dJbmRleD1CO2lmKCFEKXt2YXIgQT0oKEIrMSklMj09MCk7dmFyIEc9KCIgIitILmNsYXNzTmFtZSsiICIpLmluZGV4T2YoRikhPS0xO2lmKEE9PUcpe2NvbnRpbnVlfWlmKEEpe0guY2xhc3NOYW1lKz0iIHgtZ3JpZDMtcm93LWFsdCJ9ZWxzZXtILmNsYXNzTmFtZT1ILmNsYXNzTmFtZS5yZXBsYWNlKCJ4LWdyaWQzLXJvdy1hbHQiLCIiKX19fX0scmVuZGVyVUk6ZnVuY3Rpb24oKXt2YXIgRT10aGlzLnJlbmRlckhlYWRlcnMoKTt2YXIgQj10aGlzLnRlbXBsYXRlcy5ib2R5LmFwcGx5KHtyb3dzOiIifSk7dmFyIEM9dGhpcy50ZW1wbGF0ZXMubWFzdGVyLmFwcGx5KHtib2R5OkIsaGVhZGVyOkV9KTt2YXIgRD10aGlzLmdyaWQ7RC5nZXRHcmlkRWwoKS5kb20uaW5uZXJIVE1MPUM7dGhpcy5pbml0RWxlbWVudHMoKTt0aGlzLm1haW5Cb2R5LmRvbS5pbm5lckhUTUw9dGhpcy5yZW5kZXJSb3dzKCk7dGhpcy5wcm9jZXNzUm93cygwLHRydWUpO0V4dC5mbHkodGhpcy5pbm5lckhkKS5vbigiY2xpY2siLHRoaXMuaGFuZGxlSGREb3duLHRoaXMpO3RoaXMubWFpbkhkLm9uKCJtb3VzZW92ZXIiLHRoaXMuaGFuZGxlSGRPdmVyLHRoaXMpO3RoaXMubWFpbkhkLm9uKCJtb3VzZW91dCIsdGhpcy5oYW5kbGVIZE91dCx0aGlzKTt0aGlzLm1haW5IZC5vbigibW91c2Vtb3ZlIix0aGlzLmhhbmRsZUhkTW92ZSx0aGlzKTt0aGlzLnNjcm9sbGVyLm9uKCJzY3JvbGwiLHRoaXMuc3luY1Njcm9sbCx0aGlzKTtpZihELmVuYWJsZUNvbHVtblJlc2l6ZSE9PWZhbHNlKXt0aGlzLnNwbGl0b25lPW5ldyBFeHQuZ3JpZC5HcmlkVmlldy5TcGxpdERyYWdab25lKEQsdGhpcy5tYWluSGQuZG9tKX1pZihELmVuYWJsZUNvbHVtbk1vdmUpe3RoaXMuY29sdW1uRHJhZz1uZXcgRXh0LmdyaWQuR3JpZFZpZXcuQ29sdW1uRHJhZ1pvbmUoRCx0aGlzLmlubmVySGQpO3RoaXMuY29sdW1uRHJvcD1uZXcgRXh0LmdyaWQuSGVhZGVyRHJvcFpvbmUoRCx0aGlzLm1haW5IZC5kb20pfWlmKEQuZW5hYmxlSGRNZW51IT09ZmFsc2Upe2lmKEQuZW5hYmxlQ29sdW1uSGlkZSE9PWZhbHNlKXt0aGlzLmNvbE1lbnU9bmV3IEV4dC5tZW51Lk1lbnUoe2lkOkQuaWQrIi1oY29scy1tZW51In0pO3RoaXMuY29sTWVudS5vbigiYmVmb3Jlc2hvdyIsdGhpcy5iZWZvcmVDb2xNZW51U2hvdyx0aGlzKTt0aGlzLmNvbE1lbnUub24oIml0ZW1jbGljayIsdGhpcy5oYW5kbGVIZE1lbnVDbGljayx0aGlzKX10aGlzLmhtZW51PW5ldyBFeHQubWVudS5NZW51KHtpZDpELmlkKyItaGN0eCJ9KTt0aGlzLmhtZW51LmFkZCh7aWQ6ImFzYyIsdGV4dDp0aGlzLnNvcnRBc2NUZXh0LGNsczoieGctaG1lbnUtc29ydC1hc2MifSx7aWQ6ImRlc2MiLHRleHQ6dGhpcy5zb3J0RGVzY1RleHQsY2xzOiJ4Zy1obWVudS1zb3J0LWRlc2MifSk7aWYoRC5lbmFibGVDb2x1bW5IaWRlIT09ZmFsc2Upe3RoaXMuaG1lbnUuYWRkKCItIix7aWQ6ImNvbHVtbnMiLHRleHQ6dGhpcy5jb2x1bW5zVGV4dCxtZW51OnRoaXMuY29sTWVudSxpY29uQ2xzOiJ4LWNvbHMtaWNvbiJ9KX10aGlzLmhtZW51Lm9uKCJpdGVtY2xpY2siLHRoaXMuaGFuZGxlSGRNZW51Q2xpY2ssdGhpcyl9aWYoRC5lbmFibGVEcmFnRHJvcHx8RC5lbmFibGVEcmFnKXt2YXIgQT1uZXcgRXh0LmdyaWQuR3JpZERyYWdab25lKEQse2RkR3JvdXA6RC5kZEdyb3VwfHwiR3JpZEREIn0pfXRoaXMudXBkYXRlSGVhZGVyU29ydFN0YXRlKCl9LGxheW91dDpmdW5jdGlvbigpe2lmKCF0aGlzLm1haW5Cb2R5KXtyZXR1cm4gfXZhciBFPXRoaXMuZ3JpZDt2YXIgRz1FLmdldEdyaWRFbCgpLEk9dGhpcy5jbSxCPUUuYXV0b0V4cGFuZENvbHVtbixBPXRoaXM7dmFyIEM9Ry5nZXRTaXplKHRydWUpO3ZhciBIPUMud2lkdGg7aWYoSDwyMHx8Qy5oZWlnaHQ8MjApe3JldHVybiB9aWYoRS5hdXRvSGVpZ2h0KXt0aGlzLnNjcm9sbGVyLmRvbS5zdHlsZS5vdmVyZmxvdz0idmlzaWJsZSJ9ZWxzZXt0aGlzLmVsLnNldFNpemUoQy53aWR0aCxDLmhlaWdodCk7dmFyIEY9dGhpcy5tYWluSGQuZ2V0SGVpZ2h0KCk7dmFyIEQ9Qy5oZWlnaHQtKEYpO3RoaXMuc2Nyb2xsZXIuc2V0U2l6ZShILEQpO2lmKHRoaXMuaW5uZXJIZCl7dGhpcy5pbm5lckhkLnN0eWxlLndpZHRoPShIKSsicHgifX1pZih0aGlzLmZvcmNlRml0KXtpZih0aGlzLmxhc3RWaWV3V2lkdGghPUgpe3RoaXMuZml0Q29sdW1ucyhmYWxzZSxmYWxzZSk7dGhpcy5sYXN0Vmlld1dpZHRoPUh9fWVsc2V7dGhpcy5hdXRvRXhwYW5kKCk7dGhpcy5zeW5jSGVhZGVyU2Nyb2xsKCl9dGhpcy5vbkxheW91dChILEQpfSxvbkxheW91dDpmdW5jdGlvbihBLEIpe30sb25Db2x1bW5XaWR0aFVwZGF0ZWQ6ZnVuY3Rpb24oQyxBLEIpe30sb25BbGxDb2x1bW5XaWR0aHNVcGRhdGVkOmZ1bmN0aW9uKEEsQil7fSxvbkNvbHVtbkhpZGRlblVwZGF0ZWQ6ZnVuY3Rpb24oQixDLEEpe30sdXBkYXRlQ29sdW1uVGV4dDpmdW5jdGlvbihBLEIpe30sYWZ0ZXJNb3ZlOmZ1bmN0aW9uKEEpe30saW5pdDpmdW5jdGlvbihBKXt0aGlzLmdyaWQ9QTt0aGlzLmluaXRUZW1wbGF0ZXMoKTt0aGlzLmluaXREYXRhKEEuc3RvcmUsQS5jb2xNb2RlbCk7dGhpcy5pbml0VUkoQSl9LGdldENvbHVtbklkOmZ1bmN0aW9uKEEpe3JldHVybiB0aGlzLmNtLmdldENvbHVtbklkKEEpfSxyZW5kZXJIZWFkZXJzOmZ1bmN0aW9uKCl7dmFyIEM9dGhpcy5jbSxGPXRoaXMudGVtcGxhdGVzO3ZhciBFPUYuaGNlbGw7dmFyIEI9W10sSD1bXSxHPXt9O2Zvcih2YXIgRD0wLEE9Qy5nZXRDb2x1bW5Db3VudCgpO0Q8QTtEKyspe0cuaWQ9Qy5nZXRDb2x1bW5JZChEKTtHLnZhbHVlPUMuZ2V0Q29sdW1uSGVhZGVyKEQpfHwiIjtHLnN0eWxlPXRoaXMuZ2V0Q29sdW1uU3R5bGUoRCx0cnVlKTtHLnRvb2x0aXA9dGhpcy5nZXRDb2x1bW5Ub29sdGlwKEQpO2lmKEMuY29uZmlnW0RdLmFsaWduPT0icmlnaHQiKXtHLmlzdHlsZT0icGFkZGluZy1yaWdodDoxNnB4In1lbHNle2RlbGV0ZSBHLmlzdHlsZX1CW0IubGVuZ3RoXT1FLmFwcGx5KEcpfXJldHVybiBGLmhlYWRlci5hcHBseSh7Y2VsbHM6Qi5qb2luKCIiKSx0c3R5bGU6IndpZHRoOiIrdGhpcy5nZXRUb3RhbFdpZHRoKCkrIjsifSl9LGdldENvbHVtblRvb2x0aXA6ZnVuY3Rpb24oQSl7dmFyIEI9dGhpcy5jbS5nZXRDb2x1bW5Ub29sdGlwKEEpO2lmKEIpe2lmKEV4dC5RdWlja1RpcHMuaXNFbmFibGVkKCkpe3JldHVybiJleHQ6cXRpcD1cIiIrQisiXCIifWVsc2V7cmV0dXJuInRpdGxlPVwiIitCKyJcIiJ9fXJldHVybiIifSxiZWZvcmVVcGRhdGU6ZnVuY3Rpb24oKXt0aGlzLmdyaWQuc3RvcEVkaXRpbmcodHJ1ZSl9LHVwZGF0ZUhlYWRlcnM6ZnVuY3Rpb24oKXt0aGlzLmlubmVySGQuZmlyc3RDaGlsZC5pbm5lckhUTUw9dGhpcy5yZW5kZXJIZWFkZXJzKCl9LGZvY3VzUm93OmZ1bmN0aW9uKEEpe3RoaXMuZm9jdXNDZWxsKEEsMCxmYWxzZSl9LGZvY3VzQ2VsbDpmdW5jdGlvbihELEEsQyl7dmFyIEI9dGhpcy5lbnN1cmVWaXNpYmxlKEQsQSxDKTt0aGlzLmZvY3VzRWwuc2V0WFkoQik7aWYoRXh0LmlzR2Vja28pe3RoaXMuZm9jdXNFbC5mb2N1cygpfWVsc2V7dGhpcy5mb2N1c0VsLmZvY3VzLmRlZmVyKDEsdGhpcy5mb2N1c0VsKX19LGVuc3VyZVZpc2libGU6ZnVuY3Rpb24oUCxFLEQpe2lmKHR5cGVvZiBQIT0ibnVtYmVyIil7UD1QLnJvd0luZGV4fWlmKCF0aGlzLmRzKXtyZXR1cm4gfWlmKFA8MHx8UD49dGhpcy5kcy5nZXRDb3VudCgpKXtyZXR1cm4gfUU9KEUhPT11bmRlZmluZWQ/RTowKTt2YXIgST10aGlzLmdldFJvdyhQKSxGO2lmKCEoRD09PWZhbHNlJiZFPT09MCkpe3doaWxlKHRoaXMuY20uaXNIaWRkZW4oRSkpe0UrK31GPXRoaXMuZ2V0Q2VsbChQLEUpfWlmKCFJKXtyZXR1cm4gfXZhciBMPXRoaXMuc2Nyb2xsZXIuZG9tO3ZhciBPPTA7dmFyIEM9SSxNPXRoaXMuZWwuZG9tO3doaWxlKEMmJkMhPU0pe08rPUMub2Zmc2V0VG9wO0M9Qy5vZmZzZXRQYXJlbnR9Ty09dGhpcy5tYWluSGQuZG9tLm9mZnNldEhlaWdodDt2YXIgTj1PK0kub2Zmc2V0SGVpZ2h0O3ZhciBBPUwuY2xpZW50SGVpZ2h0O3ZhciBNPXBhcnNlSW50KEwuc2Nyb2xsVG9wLDEwKTt2YXIgSz1NK0E7aWYoTzxNKXtMLnNjcm9sbFRvcD1PfWVsc2V7aWYoTj5LKXtMLnNjcm9sbFRvcD1OLUF9fWlmKEQhPT1mYWxzZSl7dmFyIEo9cGFyc2VJbnQoRi5vZmZzZXRMZWZ0LDEwKTt2YXIgSD1KK0Yub2Zmc2V0V2lkdGg7dmFyIEc9cGFyc2VJbnQoTC5zY3JvbGxMZWZ0LDEwKTt2YXIgQj1HK0wuY2xpZW50V2lkdGg7aWYoSjxHKXtMLnNjcm9sbExlZnQ9Sn1lbHNle2lmKEg+Qil7TC5zY3JvbGxMZWZ0PUgtTC5jbGllbnRXaWR0aH19fXJldHVybiBGP0V4dC5mbHkoRikuZ2V0WFkoKTpbTC5zY3JvbGxMZWZ0LEV4dC5mbHkoSSkuZ2V0WSgpXX0saW5zZXJ0Um93czpmdW5jdGlvbihBLEYsQyxFKXtpZighRSYmRj09PTAmJkM9PUEuZ2V0Q291bnQoKS0xKXt0aGlzLnJlZnJlc2goKX1lbHNle2lmKCFFKXt0aGlzLmZpcmVFdmVudCgiYmVmb3Jlcm93c2luc2VydGVkIix0aGlzLEYsQyl9dmFyIEI9dGhpcy5yZW5kZXJSb3dzKEYsQyk7dmFyIEQ9dGhpcy5nZXRSb3coRik7aWYoRCl7RXh0LkRvbUhlbHBlci5pbnNlcnRIdG1sKCJiZWZvcmVCZWdpbiIsRCxCKX1lbHNle0V4dC5Eb21IZWxwZXIuaW5zZXJ0SHRtbCgiYmVmb3JlRW5kIix0aGlzLm1haW5Cb2R5LmRvbSxCKX1pZighRSl7dGhpcy5maXJlRXZlbnQoInJvd3NpbnNlcnRlZCIsdGhpcyxGLEMpO3RoaXMucHJvY2Vzc1Jvd3MoRil9fX0sZGVsZXRlUm93czpmdW5jdGlvbihBLEMsQil7aWYoQS5nZXRSb3dDb3VudCgpPDEpe3RoaXMucmVmcmVzaCgpfWVsc2V7dGhpcy5maXJlRXZlbnQoImJlZm9yZXJvd3NkZWxldGVkIix0aGlzLEMsQik7dGhpcy5yZW1vdmVSb3dzKEMsQik7dGhpcy5wcm9jZXNzUm93cyhDKTt0aGlzLmZpcmVFdmVudCgicm93c2RlbGV0ZWQiLHRoaXMsQyxCKX19LGdldENvbHVtblN0eWxlOmZ1bmN0aW9uKEEsQyl7dmFyIEI9IUM/KHRoaXMuY20uY29uZmlnW0FdLmNzc3x8IiIpOiIiO0IrPSJ3aWR0aDoiK3RoaXMuZ2V0Q29sdW1uV2lkdGgoQSkrIjsiO2lmKHRoaXMuY20uaXNIaWRkZW4oQSkpe0IrPSJkaXNwbGF5Om5vbmU7In12YXIgRD10aGlzLmNtLmNvbmZpZ1tBXS5hbGlnbjtpZihEKXtCKz0idGV4dC1hbGlnbjoiK0QrIjsifXJldHVybiBCfSxnZXRDb2x1bW5XaWR0aDpmdW5jdGlvbihCKXt2YXIgQT10aGlzLmNtLmdldENvbHVtbldpZHRoKEIpO2lmKHR5cGVvZiBBPT0ibnVtYmVyIil7cmV0dXJuKEV4dC5pc0JvcmRlckJveD9BOihBLXRoaXMuYm9yZGVyV2lkdGg+MD9BLXRoaXMuYm9yZGVyV2lkdGg6MCkpKyJweCJ9cmV0dXJuIEF9LGdldFRvdGFsV2lkdGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jbS5nZXRUb3RhbFdpZHRoKCkrInB4In0sZml0Q29sdW1uczpmdW5jdGlvbihELEcsRSl7dmFyIEY9dGhpcy5jbSxTLEwsTzt2YXIgUj1GLmdldFRvdGFsV2lkdGgoZmFsc2UpO3ZhciBKPXRoaXMuZ3JpZC5nZXRHcmlkRWwoKS5nZXRXaWR0aCh0cnVlKS10aGlzLnNjcm9sbE9mZnNldDtpZihKPDIwKXtyZXR1cm4gfXZhciBCPUotUjtpZihCPT09MCl7cmV0dXJuIGZhbHNlfXZhciBBPUYuZ2V0Q29sdW1uQ291bnQodHJ1ZSk7dmFyIFA9QS0odHlwZW9mIEU9PSJudW1iZXIiPzE6MCk7aWYoUD09PTApe1A9MTtFPXVuZGVmaW5lZH12YXIgSz1GLmdldENvbHVtbkNvdW50KCk7dmFyIEk9W107dmFyIE49MDt2YXIgTT0wO3ZhciBIO2ZvcihPPTA7TzxLO08rKyl7aWYoIUYuaXNIaWRkZW4oTykmJiFGLmlzRml4ZWQoTykmJk8hPT1FKXtIPUYuZ2V0Q29sdW1uV2lkdGgoTyk7SS5wdXNoKE8pO049TztJLnB1c2goSCk7TSs9SH19dmFyIEM9KEotRi5nZXRUb3RhbFdpZHRoKCkpL007d2hpbGUoSS5sZW5ndGgpe0g9SS5wb3AoKTtPPUkucG9wKCk7Ri5zZXRDb2x1bW5XaWR0aChPLE1hdGgubWF4KHRoaXMuZ3JpZC5taW5Db2x1bW5XaWR0aCxNYXRoLmZsb29yKEgrSCpDKSksdHJ1ZSl9aWYoKFI9Ri5nZXRUb3RhbFdpZHRoKGZhbHNlKSk+Sil7dmFyIFE9UCE9QT9FOk47Ri5zZXRDb2x1bW5XaWR0aChRLE1hdGgubWF4KDEsRi5nZXRDb2x1bW5XaWR0aChRKS0oUi1KKSksdHJ1ZSl9aWYoRCE9PXRydWUpe3RoaXMudXBkYXRlQWxsQ29sdW1uV2lkdGhzKCl9cmV0dXJuIHRydWV9LGF1dG9FeHBhbmQ6ZnVuY3Rpb24oQil7dmFyIEc9dGhpcy5ncmlkLEE9dGhpcy5jbTtpZighdGhpcy51c2VyUmVzaXplZCYmRy5hdXRvRXhwYW5kQ29sdW1uKXt2YXIgRD1BLmdldFRvdGFsV2lkdGgoZmFsc2UpO3ZhciBIPXRoaXMuZ3JpZC5nZXRHcmlkRWwoKS5nZXRXaWR0aCh0cnVlKS10aGlzLnNjcm9sbE9mZnNldDtpZihEIT1IKXt2YXIgRj1BLmdldEluZGV4QnlJZChHLmF1dG9FeHBhbmRDb2x1bW4pO3ZhciBFPUEuZ2V0Q29sdW1uV2lkdGgoRik7dmFyIEM9TWF0aC5taW4oTWF0aC5tYXgoKChILUQpK0UpLEcuYXV0b0V4cGFuZE1pbiksRy5hdXRvRXhwYW5kTWF4KTtpZihDIT1FKXtBLnNldENvbHVtbldpZHRoKEYsQyx0cnVlKTtpZihCIT09dHJ1ZSl7dGhpcy51cGRhdGVDb2x1bW5XaWR0aChGLEMpfX19fX0sZ2V0Q29sdW1uRGF0YTpmdW5jdGlvbigpe3ZhciBEPVtdLEE9dGhpcy5jbSxFPUEuZ2V0Q29sdW1uQ291bnQoKTtmb3IodmFyIEM9MDtDPEU7QysrKXt2YXIgQj1BLmdldERhdGFJbmRleChDKTtEW0NdPXtuYW1lOih0eXBlb2YgQj09InVuZGVmaW5lZCI/dGhpcy5kcy5maWVsZHMuZ2V0KEMpLm5hbWU6QikscmVuZGVyZXI6QS5nZXRSZW5kZXJlcihDKSxpZDpBLmdldENvbHVtbklkKEMpLHN0eWxlOnRoaXMuZ2V0Q29sdW1uU3R5bGUoQyl9fXJldHVybiBEfSxyZW5kZXJSb3dzOmZ1bmN0aW9uKEgsQyl7dmFyIEQ9dGhpcy5ncmlkLEY9RC5jb2xNb2RlbCxBPUQuc3RvcmUsST1ELnN0cmlwZVJvd3M7dmFyIEc9Ri5nZXRDb2x1bW5Db3VudCgpO2lmKEEuZ2V0Q291bnQoKTwxKXtyZXR1cm4iIn12YXIgRT10aGlzLmdldENvbHVtbkRhdGEoKTtIPUh8fDA7Qz10eXBlb2YgQz09InVuZGVmaW5lZCI/QS5nZXRDb3VudCgpLTE6Qzt2YXIgQj1BLmdldFJhbmdlKEgsQyk7cmV0dXJuIHRoaXMuZG9SZW5kZXIoRSxCLEEsSCxHLEkpfSxyZW5kZXJCb2R5OmZ1bmN0aW9uKCl7dmFyIEE9dGhpcy5yZW5kZXJSb3dzKCk7cmV0dXJuIHRoaXMudGVtcGxhdGVzLmJvZHkuYXBwbHkoe3Jvd3M6QX0pfSxyZWZyZXNoUm93OmZ1bmN0aW9uKEIpe3ZhciBEPXRoaXMuZHMsQztpZih0eXBlb2YgQj09Im51bWJlciIpe0M9QjtCPUQuZ2V0QXQoQyl9ZWxzZXtDPUQuaW5kZXhPZihCKX12YXIgQT1bXTt0aGlzLmluc2VydFJvd3MoRCxDLEMsdHJ1ZSk7dGhpcy5nZXRSb3coQykucm93SW5kZXg9Qzt0aGlzLm9uUmVtb3ZlKEQsQixDKzEsdHJ1ZSk7dGhpcy5maXJlRXZlbnQoInJvd3VwZGF0ZWQiLHRoaXMsQyxCKX0scmVmcmVzaDpmdW5jdGlvbihCKXt0aGlzLmZpcmVFdmVudCgiYmVmb3JlcmVmcmVzaCIsdGhpcyk7dGhpcy5ncmlkLnN0b3BFZGl0aW5nKHRydWUpO3ZhciBBPXRoaXMucmVuZGVyQm9keSgpO3RoaXMubWFpbkJvZHkudXBkYXRlKEEpO2lmKEI9PT10cnVlKXt0aGlzLnVwZGF0ZUhlYWRlcnMoKTt0aGlzLnVwZGF0ZUhlYWRlclNvcnRTdGF0ZSgpfXRoaXMucHJvY2Vzc1Jvd3MoMCx0cnVlKTt0aGlzLmxheW91dCgpO3RoaXMuYXBwbHlFbXB0eVRleHQoKTt0aGlzLmZpcmVFdmVudCgicmVmcmVzaCIsdGhpcyl9LGFwcGx5RW1wdHlUZXh0OmZ1bmN0aW9uKCl7aWYodGhpcy5lbXB0eVRleHQmJiF0aGlzLmhhc1Jvd3MoKSl7dGhpcy5tYWluQm9keS51cGRhdGUoIjxkaXYgY2xhc3M9XCJ4LWdyaWQtZW1wdHlcIj4iK3RoaXMuZW1wdHlUZXh0KyI8L2Rpdj4iKX19LHVwZGF0ZUhlYWRlclNvcnRTdGF0ZTpmdW5jdGlvbigpe3ZhciBCPXRoaXMuZHMuZ2V0U29ydFN0YXRlKCk7aWYoIUIpe3JldHVybiB9aWYoIXRoaXMuc29ydFN0YXRlfHwodGhpcy5zb3J0U3RhdGUuZmllbGQhPUIuZmllbGR8fHRoaXMuc29ydFN0YXRlLmRpcmVjdGlvbiE9Qi5kaXJlY3Rpb24pKXt0aGlzLmdyaWQuZmlyZUV2ZW50KCJzb3J0Y2hhbmdlIix0aGlzLmdyaWQsQil9dGhpcy5zb3J0U3RhdGU9Qjt2YXIgQz10aGlzLmNtLmZpbmRDb2x1bW5JbmRleChCLmZpZWxkKTtpZihDIT0tMSl7dmFyIEE9Qi5kaXJlY3Rpb247dGhpcy51cGRhdGVTb3J0SWNvbihDLEEpfX0sZGVzdHJveTpmdW5jdGlvbigpe2lmKHRoaXMuY29sTWVudSl7dGhpcy5jb2xNZW51LnJlbW92ZUFsbCgpO0V4dC5tZW51Lk1lbnVNZ3IudW5yZWdpc3Rlcih0aGlzLmNvbE1lbnUpO3RoaXMuY29sTWVudS5nZXRFbCgpLnJlbW92ZSgpO2RlbGV0ZSB0aGlzLmNvbE1lbnV9aWYodGhpcy5obWVudSl7dGhpcy5obWVudS5yZW1vdmVBbGwoKTtFeHQubWVudS5NZW51TWdyLnVucmVnaXN0ZXIodGhpcy5obWVudSk7dGhpcy5obWVudS5nZXRFbCgpLnJlbW92ZSgpO2RlbGV0ZSB0aGlzLmhtZW51fWlmKHRoaXMuZ3JpZC5lbmFibGVDb2x1bW5Nb3ZlKXt2YXIgQz1FeHQuZGQuRERNLmlkc1siZ3JpZEhlYWRlciIrdGhpcy5ncmlkLmdldEdyaWRFbCgpLmlkXTtpZihDKXtmb3IodmFyIEEgaW4gQyl7aWYoIUNbQV0uY29uZmlnLmlzVGFyZ2V0JiZDW0FdLmRyYWdFbElkKXt2YXIgQj1DW0FdLmRyYWdFbElkO0NbQV0udW5yZWcoKTtFeHQuZ2V0KEIpLnJlbW92ZSgpfWVsc2V7aWYoQ1tBXS5jb25maWcuaXNUYXJnZXQpe0NbQV0ucHJveHlUb3AucmVtb3ZlKCk7Q1tBXS5wcm94eUJvdHRvbS5yZW1vdmUoKTtDW0FdLnVucmVnKCl9fWlmKEV4dC5kZC5ERE0ubG9jYXRpb25DYWNoZVtBXSl7ZGVsZXRlIEV4dC5kZC5ERE0ubG9jYXRpb25DYWNoZVtBXX19ZGVsZXRlIEV4dC5kZC5ERE0uaWRzWyJncmlkSGVhZGVyIit0aGlzLmdyaWQuZ2V0R3JpZEVsKCkuaWRdfX1FeHQuZGVzdHJveSh0aGlzLnJlc2l6ZU1hcmtlcix0aGlzLnJlc2l6ZVByb3h5KTt0aGlzLmluaXREYXRhKG51bGwsbnVsbCk7RXh0LkV2ZW50TWFuYWdlci5yZW1vdmVSZXNpemVMaXN0ZW5lcih0aGlzLm9uV2luZG93UmVzaXplLHRoaXMpfSxvbkRlbnlDb2x1bW5IaWRlOmZ1bmN0aW9uKCl7fSxyZW5kZXI6ZnVuY3Rpb24oKXt2YXIgQT10aGlzLmNtO3ZhciBCPUEuZ2V0Q29sdW1uQ291bnQoKTtpZih0aGlzLmF1dG9GaWxsKXt0aGlzLmZpdENvbHVtbnModHJ1ZSx0cnVlKX1lbHNle2lmKHRoaXMuZm9yY2VGaXQpe3RoaXMuZml0Q29sdW1ucyh0cnVlLGZhbHNlKX1lbHNle2lmKHRoaXMuZ3JpZC5hdXRvRXhwYW5kQ29sdW1uKXt0aGlzLmF1dG9FeHBhbmQodHJ1ZSl9fX10aGlzLnJlbmRlclVJKCl9LGluaXREYXRhOmZ1bmN0aW9uKEIsQSl7aWYodGhpcy5kcyl7dGhpcy5kcy51bigibG9hZCIsdGhpcy5vbkxvYWQsdGhpcyk7dGhpcy5kcy51bigiZGF0YWNoYW5nZWQiLHRoaXMub25EYXRhQ2hhbmdlLHRoaXMpO3RoaXMuZHMudW4oImFkZCIsdGhpcy5vbkFkZCx0aGlzKTt0aGlzLmRzLnVuKCJyZW1vdmUiLHRoaXMub25SZW1vdmUsdGhpcyk7dGhpcy5kcy51bigidXBkYXRlIix0aGlzLm9uVXBkYXRlLHRoaXMpO3RoaXMuZHMudW4oImNsZWFyIix0aGlzLm9uQ2xlYXIsdGhpcyl9aWYoQil7Qi5vbigibG9hZCIsdGhpcy5vbkxvYWQsdGhpcyk7Qi5vbigiZGF0YWNoYW5nZWQiLHRoaXMub25EYXRhQ2hhbmdlLHRoaXMpO0Iub24oImFkZCIsdGhpcy5vbkFkZCx0aGlzKTtCLm9uKCJyZW1vdmUiLHRoaXMub25SZW1vdmUsdGhpcyk7Qi5vbigidXBkYXRlIix0aGlzLm9uVXBkYXRlLHRoaXMpO0Iub24oImNsZWFyIix0aGlzLm9uQ2xlYXIsdGhpcyl9dGhpcy5kcz1CO2lmKHRoaXMuY20pe3RoaXMuY20udW4oImNvbmZpZ2NoYW5nZSIsdGhpcy5vbkNvbENvbmZpZ0NoYW5nZSx0aGlzKTt0aGlzLmNtLnVuKCJ3aWR0aGNoYW5nZSIsdGhpcy5vbkNvbFdpZHRoQ2hhbmdlLHRoaXMpO3RoaXMuY20udW4oImhlYWRlcmNoYW5nZSIsdGhpcy5vbkhlYWRlckNoYW5nZSx0aGlzKTt0aGlzLmNtLnVuKCJoaWRkZW5jaGFuZ2UiLHRoaXMub25IaWRkZW5DaGFuZ2UsdGhpcyk7dGhpcy5jbS51bigiY29sdW1ubW92ZWQiLHRoaXMub25Db2x1bW5Nb3ZlLHRoaXMpO3RoaXMuY20udW4oImNvbHVtbmxvY2tjaGFuZ2UiLHRoaXMub25Db2x1bW5Mb2NrLHRoaXMpfWlmKEEpe0Eub24oImNvbmZpZ2NoYW5nZSIsdGhpcy5vbkNvbENvbmZpZ0NoYW5nZSx0aGlzKTtBLm9uKCJ3aWR0aGNoYW5nZSIsdGhpcy5vbkNvbFdpZHRoQ2hhbmdlLHRoaXMpO0Eub24oImhlYWRlcmNoYW5nZSIsdGhpcy5vbkhlYWRlckNoYW5nZSx0aGlzKTtBLm9uKCJoaWRkZW5jaGFuZ2UiLHRoaXMub25IaWRkZW5DaGFuZ2UsdGhpcyk7QS5vbigiY29sdW1ubW92ZWQiLHRoaXMub25Db2x1bW5Nb3ZlLHRoaXMpO0Eub24oImNvbHVtbmxvY2tjaGFuZ2UiLHRoaXMub25Db2x1bW5Mb2NrLHRoaXMpfXRoaXMuY209QX0sb25EYXRhQ2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy5yZWZyZXNoKCk7dGhpcy51cGRhdGVIZWFkZXJTb3J0U3RhdGUoKX0sb25DbGVhcjpmdW5jdGlvbigpe3RoaXMucmVmcmVzaCgpfSxvblVwZGF0ZTpmdW5jdGlvbihCLEEpe3RoaXMucmVmcmVzaFJvdyhBKX0sb25BZGQ6ZnVuY3Rpb24oQyxBLEIpe3RoaXMuaW5zZXJ0Um93cyhDLEIsQisoQS5sZW5ndGgtMSkpfSxvblJlbW92ZTpmdW5jdGlvbihELEEsQixDKXtpZihDIT09dHJ1ZSl7dGhpcy5maXJlRXZlbnQoImJlZm9yZXJvd3JlbW92ZWQiLHRoaXMsQixBKX10aGlzLnJlbW92ZVJvdyhCKTtpZihDIT09dHJ1ZSl7dGhpcy5wcm9jZXNzUm93cyhCKTt0aGlzLmFwcGx5RW1wdHlUZXh0KCk7dGhpcy5maXJlRXZlbnQoInJvd3JlbW92ZWQiLHRoaXMsQixBKX19LG9uTG9hZDpmdW5jdGlvbigpe3RoaXMuc2Nyb2xsVG9Ub3AoKX0sb25Db2xXaWR0aENoYW5nZTpmdW5jdGlvbihBLEIsQyl7dGhpcy51cGRhdGVDb2x1bW5XaWR0aChCLEMpfSxvbkhlYWRlckNoYW5nZTpmdW5jdGlvbihBLEIsQyl7dGhpcy51cGRhdGVIZWFkZXJzKCl9LG9uSGlkZGVuQ2hhbmdlOmZ1bmN0aW9uKEEsQixDKXt0aGlzLnVwZGF0ZUNvbHVtbkhpZGRlbihCLEMpfSxvbkNvbHVtbk1vdmU6ZnVuY3Rpb24oQSxELEIpe3RoaXMuaW5kZXhNYXA9bnVsbDt2YXIgQz10aGlzLmdldFNjcm9sbFN0YXRlKCk7dGhpcy5yZWZyZXNoKHRydWUpO3RoaXMucmVzdG9yZVNjcm9sbChDKTt0aGlzLmFmdGVyTW92ZShCKX0sb25Db2xDb25maWdDaGFuZ2U6ZnVuY3Rpb24oKXtkZWxldGUgdGhpcy5sYXN0Vmlld1dpZHRoO3RoaXMuaW5kZXhNYXA9bnVsbDt0aGlzLnJlZnJlc2godHJ1ZSl9LGluaXRVSTpmdW5jdGlvbihBKXtBLm9uKCJoZWFkZXJjbGljayIsdGhpcy5vbkhlYWRlckNsaWNrLHRoaXMpO2lmKEEudHJhY2tNb3VzZU92ZXIpe0Eub24oIm1vdXNlb3ZlciIsdGhpcy5vblJvd092ZXIsdGhpcyk7QS5vbigibW91c2VvdXQiLHRoaXMub25Sb3dPdXQsdGhpcyl9fSxpbml0RXZlbnRzOmZ1bmN0aW9uKCl7fSxvbkhlYWRlckNsaWNrOmZ1bmN0aW9uKEIsQSl7aWYodGhpcy5oZWFkZXJzRGlzYWJsZWR8fCF0aGlzLmNtLmlzU29ydGFibGUoQSkpe3JldHVybiB9Qi5zdG9wRWRpdGluZyh0cnVlKTtCLnN0b3JlLnNvcnQodGhpcy5jbS5nZXREYXRhSW5kZXgoQSkpfSxvblJvd092ZXI6ZnVuY3Rpb24oQixBKXt2YXIgQztpZigoQz10aGlzLmZpbmRSb3dJbmRleChBKSkhPT1mYWxzZSl7dGhpcy5hZGRSb3dDbGFzcyhDLCJ4LWdyaWQzLXJvdy1vdmVyIil9fSxvblJvd091dDpmdW5jdGlvbihCLEEpe3ZhciBDO2lmKChDPXRoaXMuZmluZFJvd0luZGV4KEEpKSE9PWZhbHNlJiZDIT09dGhpcy5maW5kUm93SW5kZXgoQi5nZXRSZWxhdGVkVGFyZ2V0KCkpKXt0aGlzLnJlbW92ZVJvd0NsYXNzKEMsIngtZ3JpZDMtcm93LW92ZXIiKX19LGhhbmRsZVdoZWVsOmZ1bmN0aW9uKEEpe0Euc3RvcFByb3BhZ2F0aW9uKCl9LG9uUm93U2VsZWN0OmZ1bmN0aW9uKEEpe3RoaXMuYWRkUm93Q2xhc3MoQSwieC1ncmlkMy1yb3ctc2VsZWN0ZWQiKX0sb25Sb3dEZXNlbGVjdDpmdW5jdGlvbihBKXt0aGlzLnJlbW92ZVJvd0NsYXNzKEEsIngtZ3JpZDMtcm93LXNlbGVjdGVkIil9LG9uQ2VsbFNlbGVjdDpmdW5jdGlvbihDLEIpe3ZhciBBPXRoaXMuZ2V0Q2VsbChDLEIpO2lmKEEpe3RoaXMuZmx5KEEpLmFkZENsYXNzKCJ4LWdyaWQzLWNlbGwtc2VsZWN0ZWQiKX19LG9uQ2VsbERlc2VsZWN0OmZ1bmN0aW9uKEMsQil7dmFyIEE9dGhpcy5nZXRDZWxsKEMsQik7aWYoQSl7dGhpcy5mbHkoQSkucmVtb3ZlQ2xhc3MoIngtZ3JpZDMtY2VsbC1zZWxlY3RlZCIpfX0sb25Db2x1bW5TcGxpdHRlck1vdmVkOmZ1bmN0aW9uKEMsQil7dGhpcy51c2VyUmVzaXplZD10cnVlO3ZhciBBPXRoaXMuZ3JpZC5jb2xNb2RlbDtBLnNldENvbHVtbldpZHRoKEMsQix0cnVlKTtpZih0aGlzLmZvcmNlRml0KXt0aGlzLmZpdENvbHVtbnModHJ1ZSxmYWxzZSxDKTt0aGlzLnVwZGF0ZUFsbENvbHVtbldpZHRocygpfWVsc2V7dGhpcy51cGRhdGVDb2x1bW5XaWR0aChDLEIpfXRoaXMuZ3JpZC5maXJlRXZlbnQoImNvbHVtbnJlc2l6ZSIsQyxCKX0saGFuZGxlSGRNZW51Q2xpY2s6ZnVuY3Rpb24oQyl7dmFyIEI9dGhpcy5oZEN0eEluZGV4O3ZhciBBPXRoaXMuY20sRD10aGlzLmRzO3N3aXRjaChDLmlkKXtjYXNlImFzYyI6RC5zb3J0KEEuZ2V0RGF0YUluZGV4KEIpLCJBU0MiKTticmVhaztjYXNlImRlc2MiOkQuc29ydChBLmdldERhdGFJbmRleChCKSwiREVTQyIpO2JyZWFrO2RlZmF1bHQ6Qj1BLmdldEluZGV4QnlJZChDLmlkLnN1YnN0cig0KSk7aWYoQiE9LTEpe2lmKEMuY2hlY2tlZCYmQS5nZXRDb2x1bW5zQnkodGhpcy5pc0hpZGVhYmxlQ29sdW1uLHRoaXMpLmxlbmd0aDw9MSl7dGhpcy5vbkRlbnlDb2x1bW5IaWRlKCk7cmV0dXJuIGZhbHNlfUEuc2V0SGlkZGVuKEIsQy5jaGVja2VkKX19cmV0dXJuIHRydWV9LGlzSGlkZWFibGVDb2x1bW46ZnVuY3Rpb24oQSl7cmV0dXJuICFBLmhpZGRlbiYmIUEuZml4ZWR9LGJlZm9yZUNvbE1lbnVTaG93OmZ1bmN0aW9uKCl7dmFyIEE9dGhpcy5jbSxDPUEuZ2V0Q29sdW1uQ291bnQoKTt0aGlzLmNvbE1lbnUucmVtb3ZlQWxsKCk7Zm9yKHZhciBCPTA7QjxDO0IrKyl7aWYoQS5jb25maWdbQl0uZml4ZWQhPT10cnVlJiZBLmNvbmZpZ1tCXS5oaWRlYWJsZSE9PWZhbHNlKXt0aGlzLmNvbE1lbnUuYWRkKG5ldyBFeHQubWVudS5DaGVja0l0ZW0oe2lkOiJjb2wtIitBLmdldENvbHVtbklkKEIpLHRleHQ6QS5nZXRDb2x1bW5IZWFkZXIoQiksY2hlY2tlZDohQS5pc0hpZGRlbihCKSxoaWRlT25DbGljazpmYWxzZSxkaXNhYmxlZDpBLmNvbmZpZ1tCXS5oaWRlYWJsZT09PWZhbHNlfSkpfX19LGhhbmRsZUhkRG93bjpmdW5jdGlvbihGLEQpe2lmKEV4dC5mbHkoRCkuaGFzQ2xhc3MoIngtZ3JpZDMtaGQtYnRuIikpe0Yuc3RvcEV2ZW50KCk7dmFyIEU9dGhpcy5maW5kSGVhZGVyQ2VsbChEKTtFeHQuZmx5KEUpLmFkZENsYXNzKCJ4LWdyaWQzLWhkLW1lbnUtb3BlbiIpO3ZhciBDPXRoaXMuZ2V0Q2VsbEluZGV4KEUpO3RoaXMuaGRDdHhJbmRleD1DO3ZhciBCPXRoaXMuaG1lbnUuaXRlbXMsQT10aGlzLmNtO0IuZ2V0KCJhc2MiKS5zZXREaXNhYmxlZCghQS5pc1NvcnRhYmxlKEMpKTtCLmdldCgiZGVzYyIpLnNldERpc2FibGVkKCFBLmlzU29ydGFibGUoQykpO3RoaXMuaG1lbnUub24oImhpZGUiLGZ1bmN0aW9uKCl7RXh0LmZseShFKS5yZW1vdmVDbGFzcygieC1ncmlkMy1oZC1tZW51LW9wZW4iKX0sdGhpcyx7c2luZ2xlOnRydWV9KTt0aGlzLmhtZW51LnNob3coRCwidGwtYmw/Iil9fSxoYW5kbGVIZE92ZXI6ZnVuY3Rpb24oRCxBKXt2YXIgQz10aGlzLmZpbmRIZWFkZXJDZWxsKEEpO2lmKEMmJiF0aGlzLmhlYWRlcnNEaXNhYmxlZCl7dGhpcy5hY3RpdmVIZD1DO3RoaXMuYWN0aXZlSGRJbmRleD10aGlzLmdldENlbGxJbmRleChDKTt2YXIgQj10aGlzLmZseShDKTt0aGlzLmFjdGl2ZUhkUmVnaW9uPUIuZ2V0UmVnaW9uKCk7aWYoIXRoaXMuY20uaXNNZW51RGlzYWJsZWQodGhpcy5hY3RpdmVIZEluZGV4KSl7Qi5hZGRDbGFzcygieC1ncmlkMy1oZC1vdmVyIik7dGhpcy5hY3RpdmVIZEJ0bj1CLmNoaWxkKCIueC1ncmlkMy1oZC1idG4iKTtpZih0aGlzLmFjdGl2ZUhkQnRuKXt0aGlzLmFjdGl2ZUhkQnRuLmRvbS5zdHlsZS5oZWlnaHQ9KEMuZmlyc3RDaGlsZC5vZmZzZXRIZWlnaHQtMSkrInB4In19fX0saGFuZGxlSGRNb3ZlOmZ1bmN0aW9uKEYsRCl7aWYodGhpcy5hY3RpdmVIZCYmIXRoaXMuaGVhZGVyc0Rpc2FibGVkKXt2YXIgQj10aGlzLnNwbGl0SGFuZGxlV2lkdGh8fDU7dmFyIEU9dGhpcy5hY3RpdmVIZFJlZ2lvbjt2YXIgQT1GLmdldFBhZ2VYKCk7dmFyIEM9dGhpcy5hY3RpdmVIZC5zdHlsZTtpZihBLUUubGVmdDw9QiYmdGhpcy5jbS5pc1Jlc2l6YWJsZSh0aGlzLmFjdGl2ZUhkSW5kZXgtMSkpe0MuY3Vyc29yPUV4dC5pc0Fpcj8ibW92ZSI6RXh0LmlzU2FmYXJpPyJlLXJlc2l6ZSI6ImNvbC1yZXNpemUifWVsc2V7aWYoRS5yaWdodC1BPD0oIXRoaXMuYWN0aXZlSGRCdG4/QjoyKSYmdGhpcy5jbS5pc1Jlc2l6YWJsZSh0aGlzLmFjdGl2ZUhkSW5kZXgpKXtDLmN1cnNvcj1FeHQuaXNBaXI/Im1vdmUiOkV4dC5pc1NhZmFyaT8idy1yZXNpemUiOiJjb2wtcmVzaXplIn1lbHNle0MuY3Vyc29yPSIifX19fSxoYW5kbGVIZE91dDpmdW5jdGlvbihDLEEpe3ZhciBCPXRoaXMuZmluZEhlYWRlckNlbGwoQSk7aWYoQiYmKCFFeHQuaXNJRXx8IUMud2l0aGluKEIsdHJ1ZSkpKXt0aGlzLmFjdGl2ZUhkPW51bGw7dGhpcy5mbHkoQikucmVtb3ZlQ2xhc3MoIngtZ3JpZDMtaGQtb3ZlciIpO0Iuc3R5bGUuY3Vyc29yPSIifX0saGFzUm93czpmdW5jdGlvbigpe3ZhciBBPXRoaXMubWFpbkJvZHkuZG9tLmZpcnN0Q2hpbGQ7cmV0dXJuIEEmJkEuY2xhc3NOYW1lIT0ieC1ncmlkLWVtcHR5In0sYmluZDpmdW5jdGlvbihBLEIpe3RoaXMuaW5pdERhdGEoQSxCKX19KTtFeHQuZ3JpZC5HcmlkVmlldy5TcGxpdERyYWdab25lPWZ1bmN0aW9uKEEsQil7dGhpcy5ncmlkPUE7dGhpcy52aWV3PUEuZ2V0VmlldygpO3RoaXMubWFya2VyPXRoaXMudmlldy5yZXNpemVNYXJrZXI7dGhpcy5wcm94eT10aGlzLnZpZXcucmVzaXplUHJveHk7RXh0LmdyaWQuR3JpZFZpZXcuU3BsaXREcmFnWm9uZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxCLCJncmlkU3BsaXR0ZXJzIit0aGlzLmdyaWQuZ2V0R3JpZEVsKCkuaWQse2RyYWdFbElkOkV4dC5pZCh0aGlzLnByb3h5LmRvbSkscmVzaXplRnJhbWU6ZmFsc2V9KTt0aGlzLnNjcm9sbD1mYWxzZTt0aGlzLmh3PXRoaXMudmlldy5zcGxpdEhhbmRsZVdpZHRofHw1fTtFeHQuZXh0ZW5kKEV4dC5ncmlkLkdyaWRWaWV3LlNwbGl0RHJhZ1pvbmUsRXh0LmRkLkREUHJveHkse2I0U3RhcnREcmFnOmZ1bmN0aW9uKEEsRSl7dGhpcy52aWV3LmhlYWRlcnNEaXNhYmxlZD10cnVlO3ZhciBEPXRoaXMudmlldy5tYWluV3JhcC5nZXRIZWlnaHQoKTt0aGlzLm1hcmtlci5zZXRIZWlnaHQoRCk7dGhpcy5tYXJrZXIuc2hvdygpO3RoaXMubWFya2VyLmFsaWduVG8odGhpcy52aWV3LmdldEhlYWRlckNlbGwodGhpcy5jZWxsSW5kZXgpLCJ0bC10bCIsWy0yLDBdKTt0aGlzLnByb3h5LnNldEhlaWdodChEKTt2YXIgQj10aGlzLmNtLmdldENvbHVtbldpZHRoKHRoaXMuY2VsbEluZGV4KTt2YXIgQz1NYXRoLm1heChCLXRoaXMuZ3JpZC5taW5Db2x1bW5XaWR0aCwwKTt0aGlzLnJlc2V0Q29uc3RyYWludHMoKTt0aGlzLnNldFhDb25zdHJhaW50KEMsMTAwMCk7dGhpcy5zZXRZQ29uc3RyYWludCgwLDApO3RoaXMubWluWD1BLUM7dGhpcy5tYXhYPUErMTAwMDt0aGlzLnN0YXJ0UG9zPUE7RXh0LmRkLkREUHJveHkucHJvdG90eXBlLmI0U3RhcnREcmFnLmNhbGwodGhpcyxBLEUpfSxoYW5kbGVNb3VzZURvd246ZnVuY3Rpb24oQSl7dmFyIEg9dGhpcy52aWV3LmZpbmRIZWFkZXJDZWxsKEEuZ2V0VGFyZ2V0KCkpO2lmKEgpe3ZhciBLPXRoaXMudmlldy5mbHkoSCkuZ2V0WFkoKSxFPUtbMF0sRD1LWzFdO3ZhciBJPUEuZ2V0WFkoKSxDPUlbMF0sQj1JWzFdO3ZhciBHPUgub2Zmc2V0V2lkdGgsRj1mYWxzZTtpZigoQy1FKTw9dGhpcy5odyl7Rj0tMX1lbHNle2lmKChFK0cpLUM8PXRoaXMuaHcpe0Y9MH19aWYoRiE9PWZhbHNlKXt0aGlzLmNtPXRoaXMuZ3JpZC5jb2xNb2RlbDt2YXIgSj10aGlzLnZpZXcuZ2V0Q2VsbEluZGV4KEgpO2lmKEY9PS0xKXtpZihKK0Y8MCl7cmV0dXJuIH13aGlsZSh0aGlzLmNtLmlzSGlkZGVuKEorRikpey0tRjtpZihKK0Y8MCl7cmV0dXJuIH19fXRoaXMuY2VsbEluZGV4PUorRjt0aGlzLnNwbGl0PUguZG9tO2lmKHRoaXMuY20uaXNSZXNpemFibGUodGhpcy5jZWxsSW5kZXgpJiYhdGhpcy5jbS5pc0ZpeGVkKHRoaXMuY2VsbEluZGV4KSl7RXh0LmdyaWQuR3JpZFZpZXcuU3BsaXREcmFnWm9uZS5zdXBlcmNsYXNzLmhhbmRsZU1vdXNlRG93bi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fWVsc2V7aWYodGhpcy52aWV3LmNvbHVtbkRyYWcpe3RoaXMudmlldy5jb2x1bW5EcmFnLmNhbGxIYW5kbGVNb3VzZURvd24oQSl9fX19LGVuZERyYWc6ZnVuY3Rpb24oRCl7dGhpcy5tYXJrZXIuaGlkZSgpO3ZhciBBPXRoaXMudmlldzt2YXIgQj1NYXRoLm1heCh0aGlzLm1pblgsRC5nZXRQYWdlWCgpKTt2YXIgQz1CLXRoaXMuc3RhcnRQb3M7QS5vbkNvbHVtblNwbGl0dGVyTW92ZWQodGhpcy5jZWxsSW5kZXgsdGhpcy5jbS5nZXRDb2x1bW5XaWR0aCh0aGlzLmNlbGxJbmRleCkrQyk7c2V0VGltZW91dChmdW5jdGlvbigpe0EuaGVhZGVyc0Rpc2FibGVkPWZhbHNlfSw1MCl9LGF1dG9PZmZzZXQ6ZnVuY3Rpb24oKXt0aGlzLnNldERlbHRhKDAsMCl9fSk7DQpFeHQuZ3JpZC5Hcm91cGluZ1ZpZXc9RXh0LmV4dGVuZChFeHQuZ3JpZC5HcmlkVmlldyx7aGlkZUdyb3VwZWRDb2x1bW46ZmFsc2Usc2hvd0dyb3VwTmFtZTp0cnVlLHN0YXJ0Q29sbGFwc2VkOmZhbHNlLGVuYWJsZUdyb3VwaW5nOnRydWUsZW5hYmxlR3JvdXBpbmdNZW51OnRydWUsZW5hYmxlTm9Hcm91cHM6dHJ1ZSxlbXB0eUdyb3VwVGV4dDoiKE5vbmUpIixpZ25vcmVBZGQ6ZmFsc2UsZ3JvdXBUZXh0VHBsOiJ7dGV4dH0iLGdpZFNlZWQ6MTAwMCxpbml0VGVtcGxhdGVzOmZ1bmN0aW9uKCl7RXh0LmdyaWQuR3JvdXBpbmdWaWV3LnN1cGVyY2xhc3MuaW5pdFRlbXBsYXRlcy5jYWxsKHRoaXMpO3RoaXMuc3RhdGU9e307dmFyIEE9dGhpcy5ncmlkLmdldFNlbGVjdGlvbk1vZGVsKCk7QS5vbihBLnNlbGVjdFJvdz8iYmVmb3Jlcm93c2VsZWN0IjoiYmVmb3JlY2VsbHNlbGVjdCIsdGhpcy5vbkJlZm9yZVJvd1NlbGVjdCx0aGlzKTtpZighdGhpcy5zdGFydEdyb3VwKXt0aGlzLnN0YXJ0R3JvdXA9bmV3IEV4dC5YVGVtcGxhdGUoIjxkaXYgaWQ9XCJ7Z3JvdXBJZH1cIiBjbGFzcz1cIngtZ3JpZC1ncm91cCB7Y2xzfVwiPiIsIjxkaXYgaWQ9XCJ7Z3JvdXBJZH0taGRcIiBjbGFzcz1cIngtZ3JpZC1ncm91cC1oZFwiIHN0eWxlPVwie3N0eWxlfVwiPjxkaXY+Iix0aGlzLmdyb3VwVGV4dFRwbCwiPC9kaXY+PC9kaXY+IiwiPGRpdiBpZD1cIntncm91cElkfS1iZFwiIGNsYXNzPVwieC1ncmlkLWdyb3VwLWJvZHlcIj4iKX10aGlzLnN0YXJ0R3JvdXAuY29tcGlsZSgpO3RoaXMuZW5kR3JvdXA9IjwvZGl2PjwvZGl2PiJ9LGZpbmRHcm91cDpmdW5jdGlvbihBKXtyZXR1cm4gRXh0LmZseShBKS51cCgiLngtZ3JpZC1ncm91cCIsdGhpcy5tYWluQm9keS5kb20pfSxnZXRHcm91cHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNSb3dzKCk/dGhpcy5tYWluQm9keS5kb20uY2hpbGROb2RlczpbXX0sb25BZGQ6ZnVuY3Rpb24oKXtpZih0aGlzLmVuYWJsZUdyb3VwaW5nJiYhdGhpcy5pZ25vcmVBZGQpe3ZhciBBPXRoaXMuZ2V0U2Nyb2xsU3RhdGUoKTt0aGlzLnJlZnJlc2goKTt0aGlzLnJlc3RvcmVTY3JvbGwoQSl9ZWxzZXtpZighdGhpcy5lbmFibGVHcm91cGluZyl7RXh0LmdyaWQuR3JvdXBpbmdWaWV3LnN1cGVyY2xhc3Mub25BZGQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19LG9uUmVtb3ZlOmZ1bmN0aW9uKEUsQSxCLEQpe0V4dC5ncmlkLkdyb3VwaW5nVmlldy5zdXBlcmNsYXNzLm9uUmVtb3ZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgQz1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChBLl9ncm91cElkKTtpZihDJiZDLmNoaWxkTm9kZXNbMV0uY2hpbGROb2Rlcy5sZW5ndGg8MSl7RXh0LnJlbW92ZU5vZGUoQyl9dGhpcy5hcHBseUVtcHR5VGV4dCgpfSxyZWZyZXNoUm93OmZ1bmN0aW9uKEEpe2lmKHRoaXMuZHMuZ2V0Q291bnQoKT09MSl7dGhpcy5yZWZyZXNoKCl9ZWxzZXt0aGlzLmlzVXBkYXRpbmc9dHJ1ZTtFeHQuZ3JpZC5Hcm91cGluZ1ZpZXcuc3VwZXJjbGFzcy5yZWZyZXNoUm93LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmlzVXBkYXRpbmc9ZmFsc2V9fSxiZWZvcmVNZW51U2hvdzpmdW5jdGlvbigpe3ZhciBDPXRoaXMuZ2V0R3JvdXBGaWVsZCgpO3ZhciBCPXRoaXMuaG1lbnUuaXRlbXMuZ2V0KCJncm91cEJ5Iik7aWYoQil7Qi5zZXREaXNhYmxlZCh0aGlzLmNtLmNvbmZpZ1t0aGlzLmhkQ3R4SW5kZXhdLmdyb3VwYWJsZT09PWZhbHNlKX12YXIgQT10aGlzLmhtZW51Lml0ZW1zLmdldCgic2hvd0dyb3VwcyIpO2lmKEEpe2lmKCEhQyl7QS5zZXREaXNhYmxlZCh0aGlzLmNtLmNvbmZpZ1t0aGlzLmhkQ3R4SW5kZXhdLmdyb3VwYWJsZT09PWZhbHNlKX1BLnNldENoZWNrZWQoISFDKX19LHJlbmRlclVJOmZ1bmN0aW9uKCl7RXh0LmdyaWQuR3JvdXBpbmdWaWV3LnN1cGVyY2xhc3MucmVuZGVyVUkuY2FsbCh0aGlzKTt0aGlzLm1haW5Cb2R5Lm9uKCJtb3VzZWRvd24iLHRoaXMuaW50ZXJjZXB0TW91c2UsdGhpcyk7aWYodGhpcy5lbmFibGVHcm91cGluZ01lbnUmJnRoaXMuaG1lbnUpe3RoaXMuaG1lbnUuYWRkKCItIix7aWQ6Imdyb3VwQnkiLHRleHQ6dGhpcy5ncm91cEJ5VGV4dCxoYW5kbGVyOnRoaXMub25Hcm91cEJ5Q2xpY2ssc2NvcGU6dGhpcyxpY29uQ2xzOiJ4LWdyb3VwLWJ5LWljb24ifSk7aWYodGhpcy5lbmFibGVOb0dyb3Vwcyl7dGhpcy5obWVudS5hZGQoe2lkOiJzaG93R3JvdXBzIix0ZXh0OnRoaXMuc2hvd0dyb3Vwc1RleHQsY2hlY2tlZDp0cnVlLGNoZWNrSGFuZGxlcjp0aGlzLm9uU2hvd0dyb3Vwc0NsaWNrLHNjb3BlOnRoaXN9KX10aGlzLmhtZW51Lm9uKCJiZWZvcmVzaG93Iix0aGlzLmJlZm9yZU1lbnVTaG93LHRoaXMpfX0sb25Hcm91cEJ5Q2xpY2s6ZnVuY3Rpb24oKXt0aGlzLmdyaWQuc3RvcmUuZ3JvdXBCeSh0aGlzLmNtLmdldERhdGFJbmRleCh0aGlzLmhkQ3R4SW5kZXgpKTt0aGlzLmJlZm9yZU1lbnVTaG93KCl9LG9uU2hvd0dyb3Vwc0NsaWNrOmZ1bmN0aW9uKEEsQil7aWYoQil7dGhpcy5vbkdyb3VwQnlDbGljaygpfWVsc2V7dGhpcy5ncmlkLnN0b3JlLmNsZWFyR3JvdXBpbmcoKX19LHRvZ2dsZUdyb3VwOmZ1bmN0aW9uKEMsQil7dGhpcy5ncmlkLnN0b3BFZGl0aW5nKHRydWUpO0M9RXh0LmdldERvbShDKTt2YXIgQT1FeHQuZmx5KEMpO0I9QiE9PXVuZGVmaW5lZD9COkEuaGFzQ2xhc3MoIngtZ3JpZC1ncm91cC1jb2xsYXBzZWQiKTt0aGlzLnN0YXRlW0EuZG9tLmlkXT1CO0FbQj8icmVtb3ZlQ2xhc3MiOiJhZGRDbGFzcyJdKCJ4LWdyaWQtZ3JvdXAtY29sbGFwc2VkIil9LHRvZ2dsZUFsbEdyb3VwczpmdW5jdGlvbihDKXt2YXIgQj10aGlzLmdldEdyb3VwcygpO2Zvcih2YXIgRD0wLEE9Qi5sZW5ndGg7RDxBO0QrKyl7dGhpcy50b2dnbGVHcm91cChCW0RdLEMpfX0sZXhwYW5kQWxsR3JvdXBzOmZ1bmN0aW9uKCl7dGhpcy50b2dnbGVBbGxHcm91cHModHJ1ZSl9LGNvbGxhcHNlQWxsR3JvdXBzOmZ1bmN0aW9uKCl7dGhpcy50b2dnbGVBbGxHcm91cHMoZmFsc2UpfSxpbnRlcmNlcHRNb3VzZTpmdW5jdGlvbihCKXt2YXIgQT1CLmdldFRhcmdldCgiLngtZ3JpZC1ncm91cC1oZCIsdGhpcy5tYWluQm9keSk7aWYoQSl7Qi5zdG9wRXZlbnQoKTt0aGlzLnRvZ2dsZUdyb3VwKEEucGFyZW50Tm9kZSl9fSxnZXRHcm91cDpmdW5jdGlvbihBLEQsRixHLEIsRSl7dmFyIEM9Rj9GKEEse30sRCxHLEIsRSk6U3RyaW5nKEEpO2lmKEM9PT0iIil7Qz10aGlzLmNtLmNvbmZpZ1tCXS5lbXB0eUdyb3VwVGV4dHx8dGhpcy5lbXB0eUdyb3VwVGV4dH1yZXR1cm4gQ30sZ2V0R3JvdXBGaWVsZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdyaWQuc3RvcmUuZ2V0R3JvdXBTdGF0ZSgpfSxyZW5kZXJSb3dzOmZ1bmN0aW9uKCl7dmFyIEE9dGhpcy5nZXRHcm91cEZpZWxkKCk7dmFyIEQ9ISFBO2lmKHRoaXMuaGlkZUdyb3VwZWRDb2x1bW4pe3ZhciBCPXRoaXMuY20uZmluZENvbHVtbkluZGV4KEEpO2lmKCFEJiZ0aGlzLmxhc3RHcm91cEZpZWxkIT09dW5kZWZpbmVkKXt0aGlzLm1haW5Cb2R5LnVwZGF0ZSgiIik7dGhpcy5jbS5zZXRIaWRkZW4odGhpcy5jbS5maW5kQ29sdW1uSW5kZXgodGhpcy5sYXN0R3JvdXBGaWVsZCksZmFsc2UpO2RlbGV0ZSB0aGlzLmxhc3RHcm91cEZpZWxkfWVsc2V7aWYoRCYmdGhpcy5sYXN0R3JvdXBGaWVsZD09PXVuZGVmaW5lZCl7dGhpcy5sYXN0R3JvdXBGaWVsZD1BO3RoaXMuY20uc2V0SGlkZGVuKEIsdHJ1ZSl9ZWxzZXtpZihEJiZ0aGlzLmxhc3RHcm91cEZpZWxkIT09dW5kZWZpbmVkJiZBIT09dGhpcy5sYXN0R3JvdXBGaWVsZCl7dGhpcy5tYWluQm9keS51cGRhdGUoIiIpO3ZhciBDPXRoaXMuY20uZmluZENvbHVtbkluZGV4KHRoaXMubGFzdEdyb3VwRmllbGQpO3RoaXMuY20uc2V0SGlkZGVuKEMsZmFsc2UpO3RoaXMubGFzdEdyb3VwRmllbGQ9QTt0aGlzLmNtLnNldEhpZGRlbihCLHRydWUpfX19fXJldHVybiBFeHQuZ3JpZC5Hcm91cGluZ1ZpZXcuc3VwZXJjbGFzcy5yZW5kZXJSb3dzLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZG9SZW5kZXI6ZnVuY3Rpb24oRCxHLFAsQSxPLFIpe2lmKEcubGVuZ3RoPDEpe3JldHVybiIifXZhciBZPXRoaXMuZ2V0R3JvdXBGaWVsZCgpO3ZhciBOPXRoaXMuY20uZmluZENvbHVtbkluZGV4KFkpO3RoaXMuZW5hYmxlR3JvdXBpbmc9ISFZO2lmKCF0aGlzLmVuYWJsZUdyb3VwaW5nfHx0aGlzLmlzVXBkYXRpbmcpe3JldHVybiBFeHQuZ3JpZC5Hcm91cGluZ1ZpZXcuc3VwZXJjbGFzcy5kb1JlbmRlci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9dmFyIEg9IndpZHRoOiIrdGhpcy5nZXRUb3RhbFdpZHRoKCkrIjsiO3ZhciBRPXRoaXMuZ3JpZC5nZXRHcmlkRWwoKS5pZDt2YXIgRj10aGlzLmNtLmNvbmZpZ1tOXTt2YXIgQj1GLmdyb3VwUmVuZGVyZXJ8fEYucmVuZGVyZXI7dmFyIFM9dGhpcy5zaG93R3JvdXBOYW1lPyhGLmdyb3VwTmFtZXx8Ri5oZWFkZXIpKyI6ICI6IiI7dmFyIFg9W10sSyxULFUsTTtmb3IoVD0wLFU9Ry5sZW5ndGg7VDxVO1QrKyl7dmFyIEo9QStUO3ZhciBMPUdbVF0sRT1MLmRhdGFbWV0sVj10aGlzLmdldEdyb3VwKEUsTCxCLEosTixQKTtpZighS3x8Sy5ncm91cCE9Vil7TT1RKyItZ3AtIitZKyItIitFeHQudXRpbC5Gb3JtYXQuaHRtbEVuY29kZShWKTt2YXIgQz10eXBlb2YgdGhpcy5zdGF0ZVtNXSE9PSJ1bmRlZmluZWQiPyF0aGlzLnN0YXRlW01dOnRoaXMuc3RhcnRDb2xsYXBzZWQ7dmFyIEk9Qz8ieC1ncmlkLWdyb3VwLWNvbGxhcHNlZCI6IiI7Sz17Z3JvdXA6VixndmFsdWU6RSx0ZXh0OlMrVixncm91cElkOk0sc3RhcnRSb3c6SixyczpbTF0sY2xzOkksc3R5bGU6SH07WC5wdXNoKEspfWVsc2V7Sy5ycy5wdXNoKEwpfUwuX2dyb3VwSWQ9TX12YXIgVz1bXTtmb3IoVD0wLFU9WC5sZW5ndGg7VDxVO1QrKyl7dmFyIFY9WFtUXTt0aGlzLmRvR3JvdXBTdGFydChXLFYsRCxQLE8pO1dbVy5sZW5ndGhdPUV4dC5ncmlkLkdyb3VwaW5nVmlldy5zdXBlcmNsYXNzLmRvUmVuZGVyLmNhbGwodGhpcyxELFYucnMsUCxWLnN0YXJ0Um93LE8sUik7dGhpcy5kb0dyb3VwRW5kKFcsVixELFAsTyl9cmV0dXJuIFcuam9pbigiIil9LGdldEdyb3VwSWQ6ZnVuY3Rpb24oRil7dmFyIEQ9dGhpcy5ncmlkLmdldEdyaWRFbCgpLmlkO3ZhciBDPXRoaXMuZ2V0R3JvdXBGaWVsZCgpO3ZhciBFPXRoaXMuY20uZmluZENvbHVtbkluZGV4KEMpO3ZhciBCPXRoaXMuY20uY29uZmlnW0VdO3ZhciBHPUIuZ3JvdXBSZW5kZXJlcnx8Qi5yZW5kZXJlcjt2YXIgQT10aGlzLmdldEdyb3VwKEYse2RhdGE6e319LEcsMCxFLHRoaXMuZHMpO3JldHVybiBEKyItZ3AtIitDKyItIitFeHQudXRpbC5Gb3JtYXQuaHRtbEVuY29kZShGKX0sZG9Hcm91cFN0YXJ0OmZ1bmN0aW9uKEEsRCxCLEUsQyl7QVtBLmxlbmd0aF09dGhpcy5zdGFydEdyb3VwLmFwcGx5KEQpfSxkb0dyb3VwRW5kOmZ1bmN0aW9uKEEsRCxCLEUsQyl7QVtBLmxlbmd0aF09dGhpcy5lbmRHcm91cH0sZ2V0Um93czpmdW5jdGlvbigpe2lmKCF0aGlzLmVuYWJsZUdyb3VwaW5nKXtyZXR1cm4gRXh0LmdyaWQuR3JvdXBpbmdWaWV3LnN1cGVyY2xhc3MuZ2V0Um93cy5jYWxsKHRoaXMpfXZhciBHPVtdO3ZhciBGLEM9dGhpcy5nZXRHcm91cHMoKTtmb3IodmFyIEU9MCxBPUMubGVuZ3RoO0U8QTtFKyspe0Y9Q1tFXS5jaGlsZE5vZGVzWzFdLmNoaWxkTm9kZXM7Zm9yKHZhciBEPTAsQj1GLmxlbmd0aDtEPEI7RCsrKXtHW0cubGVuZ3RoXT1GW0RdfX1yZXR1cm4gR30sdXBkYXRlR3JvdXBXaWR0aHM6ZnVuY3Rpb24oKXtpZighdGhpcy5lbmFibGVHcm91cGluZ3x8IXRoaXMuaGFzUm93cygpKXtyZXR1cm4gfXZhciBDPU1hdGgubWF4KHRoaXMuY20uZ2V0VG90YWxXaWR0aCgpLHRoaXMuZWwuZG9tLm9mZnNldFdpZHRoLXRoaXMuc2Nyb2xsT2Zmc2V0KSsicHgiO3ZhciBCPXRoaXMuZ2V0R3JvdXBzKCk7Zm9yKHZhciBEPTAsQT1CLmxlbmd0aDtEPEE7RCsrKXtCW0RdLmZpcnN0Q2hpbGQuc3R5bGUud2lkdGg9Q319LG9uQ29sdW1uV2lkdGhVcGRhdGVkOmZ1bmN0aW9uKEMsQSxCKXt0aGlzLnVwZGF0ZUdyb3VwV2lkdGhzKCl9LG9uQWxsQ29sdW1uV2lkdGhzVXBkYXRlZDpmdW5jdGlvbihBLEIpe3RoaXMudXBkYXRlR3JvdXBXaWR0aHMoKX0sb25Db2x1bW5IaWRkZW5VcGRhdGVkOmZ1bmN0aW9uKEIsQyxBKXt0aGlzLnVwZGF0ZUdyb3VwV2lkdGhzKCl9LG9uTGF5b3V0OmZ1bmN0aW9uKCl7dGhpcy51cGRhdGVHcm91cFdpZHRocygpfSxvbkJlZm9yZVJvd1NlbGVjdDpmdW5jdGlvbihELEMpe2lmKCF0aGlzLmVuYWJsZUdyb3VwaW5nKXtyZXR1cm4gfXZhciBCPXRoaXMuZ2V0Um93KEMpO2lmKEImJiFCLm9mZnNldFBhcmVudCl7dmFyIEE9dGhpcy5maW5kR3JvdXAoQik7dGhpcy50b2dnbGVHcm91cChBLHRydWUpfX0sZ3JvdXBCeVRleHQ6Ikdyb3VwIEJ5IFRoaXMgRmllbGQiLHNob3dHcm91cHNUZXh0OiJTaG93IGluIEdyb3VwcyJ9KTtFeHQuZ3JpZC5Hcm91cGluZ1ZpZXcuR1JPVVBfSUQ9MTAwMDsNCkV4dC5ncmlkLkhlYWRlckRyYWdab25lPWZ1bmN0aW9uKEEsQyxCKXt0aGlzLmdyaWQ9QTt0aGlzLnZpZXc9QS5nZXRWaWV3KCk7dGhpcy5kZEdyb3VwPSJncmlkSGVhZGVyIit0aGlzLmdyaWQuZ2V0R3JpZEVsKCkuaWQ7RXh0LmdyaWQuSGVhZGVyRHJhZ1pvbmUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsQyk7aWYoQil7dGhpcy5zZXRIYW5kbGVFbElkKEV4dC5pZChDKSk7dGhpcy5zZXRPdXRlckhhbmRsZUVsSWQoRXh0LmlkKEIpKX10aGlzLnNjcm9sbD1mYWxzZX07RXh0LmV4dGVuZChFeHQuZ3JpZC5IZWFkZXJEcmFnWm9uZSxFeHQuZGQuRHJhZ1pvbmUse21heERyYWdXaWR0aDoxMjAsZ2V0RHJhZ0RhdGE6ZnVuY3Rpb24oQyl7dmFyIEE9RXh0LmxpYi5FdmVudC5nZXRUYXJnZXQoQyk7dmFyIEI9dGhpcy52aWV3LmZpbmRIZWFkZXJDZWxsKEEpO2lmKEIpe3JldHVybntkZGVsOkIuZmlyc3RDaGlsZCxoZWFkZXI6Qn19cmV0dXJuIGZhbHNlfSxvbkluaXREcmFnOmZ1bmN0aW9uKEEpe3RoaXMudmlldy5oZWFkZXJzRGlzYWJsZWQ9dHJ1ZTt2YXIgQj10aGlzLmRyYWdEYXRhLmRkZWwuY2xvbmVOb2RlKHRydWUpO0IuaWQ9RXh0LmlkKCk7Qi5zdHlsZS53aWR0aD1NYXRoLm1pbih0aGlzLmRyYWdEYXRhLmhlYWRlci5vZmZzZXRXaWR0aCx0aGlzLm1heERyYWdXaWR0aCkrInB4Ijt0aGlzLnByb3h5LnVwZGF0ZShCKTtyZXR1cm4gdHJ1ZX0sYWZ0ZXJWYWxpZERyb3A6ZnVuY3Rpb24oKXt2YXIgQT10aGlzLnZpZXc7c2V0VGltZW91dChmdW5jdGlvbigpe0EuaGVhZGVyc0Rpc2FibGVkPWZhbHNlfSw1MCl9LGFmdGVySW52YWxpZERyb3A6ZnVuY3Rpb24oKXt2YXIgQT10aGlzLnZpZXc7c2V0VGltZW91dChmdW5jdGlvbigpe0EuaGVhZGVyc0Rpc2FibGVkPWZhbHNlfSw1MCl9fSk7RXh0LmdyaWQuSGVhZGVyRHJvcFpvbmU9ZnVuY3Rpb24oQSxDLEIpe3RoaXMuZ3JpZD1BO3RoaXMudmlldz1BLmdldFZpZXcoKTt0aGlzLnByb3h5VG9wPUV4dC5Eb21IZWxwZXIuYXBwZW5kKGRvY3VtZW50LmJvZHkse2NsczoiY29sLW1vdmUtdG9wIixodG1sOiImIzE2MDsifSx0cnVlKTt0aGlzLnByb3h5Qm90dG9tPUV4dC5Eb21IZWxwZXIuYXBwZW5kKGRvY3VtZW50LmJvZHkse2NsczoiY29sLW1vdmUtYm90dG9tIixodG1sOiImIzE2MDsifSx0cnVlKTt0aGlzLnByb3h5VG9wLmhpZGU9dGhpcy5wcm94eUJvdHRvbS5oaWRlPWZ1bmN0aW9uKCl7dGhpcy5zZXRMZWZ0VG9wKC0xMDAsLTEwMCk7dGhpcy5zZXRTdHlsZSgidmlzaWJpbGl0eSIsImhpZGRlbiIpfTt0aGlzLmRkR3JvdXA9ImdyaWRIZWFkZXIiK3RoaXMuZ3JpZC5nZXRHcmlkRWwoKS5pZDtFeHQuZ3JpZC5IZWFkZXJEcm9wWm9uZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxBLmdldEdyaWRFbCgpLmRvbSl9O0V4dC5leHRlbmQoRXh0LmdyaWQuSGVhZGVyRHJvcFpvbmUsRXh0LmRkLkRyb3Bab25lLHtwcm94eU9mZnNldHM6Wy00LC05XSxmbHk6RXh0LkVsZW1lbnQuZmx5LGdldFRhcmdldEZyb21FdmVudDpmdW5jdGlvbihDKXt2YXIgQT1FeHQubGliLkV2ZW50LmdldFRhcmdldChDKTt2YXIgQj10aGlzLnZpZXcuZmluZENlbGxJbmRleChBKTtpZihCIT09ZmFsc2Upe3JldHVybiB0aGlzLnZpZXcuZ2V0SGVhZGVyQ2VsbChCKX19LG5leHRWaXNpYmxlOmZ1bmN0aW9uKEMpe3ZhciBCPXRoaXMudmlldyxBPXRoaXMuZ3JpZC5jb2xNb2RlbDtDPUMubmV4dFNpYmxpbmc7d2hpbGUoQyl7aWYoIUEuaXNIaWRkZW4oQi5nZXRDZWxsSW5kZXgoQykpKXtyZXR1cm4gQ31DPUMubmV4dFNpYmxpbmd9cmV0dXJuIG51bGx9LHByZXZWaXNpYmxlOmZ1bmN0aW9uKEMpe3ZhciBCPXRoaXMudmlldyxBPXRoaXMuZ3JpZC5jb2xNb2RlbDtDPUMucHJldlNpYmxpbmc7d2hpbGUoQyl7aWYoIUEuaXNIaWRkZW4oQi5nZXRDZWxsSW5kZXgoQykpKXtyZXR1cm4gQ31DPUMucHJldlNpYmxpbmd9cmV0dXJuIG51bGx9LHBvc2l0aW9uSW5kaWNhdG9yOmZ1bmN0aW9uKEQsQixFKXt2YXIgSD1FeHQubGliLkV2ZW50LmdldFBhZ2VYKEUpO3ZhciBBPUV4dC5saWIuRG9tLmdldFJlZ2lvbihCLmZpcnN0Q2hpbGQpO3ZhciBJLEssRz1BLnRvcCt0aGlzLnByb3h5T2Zmc2V0c1sxXTtpZigoQS5yaWdodC1IKTw9KEEucmlnaHQtQS5sZWZ0KS8yKXtJPUEucmlnaHQrdGhpcy52aWV3LmJvcmRlcldpZHRoO0s9ImFmdGVyIn1lbHNle0k9QS5sZWZ0O0s9ImJlZm9yZSJ9dmFyIEY9dGhpcy52aWV3LmdldENlbGxJbmRleChEKTt2YXIgSj10aGlzLnZpZXcuZ2V0Q2VsbEluZGV4KEIpO2lmKHRoaXMuZ3JpZC5jb2xNb2RlbC5pc0ZpeGVkKEopKXtyZXR1cm4gZmFsc2V9dmFyIEM9dGhpcy5ncmlkLmNvbE1vZGVsLmlzTG9ja2VkKEopO2lmKEs9PSJhZnRlciIpe0orK31pZihGPEope0otLX1pZihGPT1KJiYoQz09dGhpcy5ncmlkLmNvbE1vZGVsLmlzTG9ja2VkKEYpKSl7cmV0dXJuIGZhbHNlfUkrPXRoaXMucHJveHlPZmZzZXRzWzBdO3RoaXMucHJveHlUb3Auc2V0TGVmdFRvcChJLEcpO3RoaXMucHJveHlUb3Auc2hvdygpO2lmKCF0aGlzLmJvdHRvbU9mZnNldCl7dGhpcy5ib3R0b21PZmZzZXQ9dGhpcy52aWV3Lm1haW5IZC5nZXRIZWlnaHQoKX10aGlzLnByb3h5Qm90dG9tLnNldExlZnRUb3AoSSxHK3RoaXMucHJveHlUb3AuZG9tLm9mZnNldEhlaWdodCt0aGlzLmJvdHRvbU9mZnNldCk7dGhpcy5wcm94eUJvdHRvbS5zaG93KCk7cmV0dXJuIEt9LG9uTm9kZUVudGVyOmZ1bmN0aW9uKEQsQSxDLEIpe2lmKEIuaGVhZGVyIT1EKXt0aGlzLnBvc2l0aW9uSW5kaWNhdG9yKEIuaGVhZGVyLEQsQyl9fSxvbk5vZGVPdmVyOmZ1bmN0aW9uKEUsQixELEMpe3ZhciBBPWZhbHNlO2lmKEMuaGVhZGVyIT1FKXtBPXRoaXMucG9zaXRpb25JbmRpY2F0b3IoQy5oZWFkZXIsRSxEKX1pZighQSl7dGhpcy5wcm94eVRvcC5oaWRlKCk7dGhpcy5wcm94eUJvdHRvbS5oaWRlKCl9cmV0dXJuIEE/dGhpcy5kcm9wQWxsb3dlZDp0aGlzLmRyb3BOb3RBbGxvd2VkfSxvbk5vZGVPdXQ6ZnVuY3Rpb24oRCxBLEMsQil7dGhpcy5wcm94eVRvcC5oaWRlKCk7dGhpcy5wcm94eUJvdHRvbS5oaWRlKCl9LG9uTm9kZURyb3A6ZnVuY3Rpb24oQixLLEYsRCl7dmFyIEU9RC5oZWFkZXI7aWYoRSE9Qil7dmFyIEk9dGhpcy5ncmlkLmNvbE1vZGVsO3ZhciBIPUV4dC5saWIuRXZlbnQuZ2V0UGFnZVgoRik7dmFyIEE9RXh0LmxpYi5Eb20uZ2V0UmVnaW9uKEIuZmlyc3RDaGlsZCk7dmFyIEw9KEEucmlnaHQtSCk8PSgoQS5yaWdodC1BLmxlZnQpLzIpPyJhZnRlciI6ImJlZm9yZSI7dmFyIEc9dGhpcy52aWV3LmdldENlbGxJbmRleChFKTt2YXIgSj10aGlzLnZpZXcuZ2V0Q2VsbEluZGV4KEIpO3ZhciBDPUkuaXNMb2NrZWQoSik7aWYoTD09ImFmdGVyIil7SisrfWlmKEc8Sil7Si0tfWlmKEc9PUomJihDPT1JLmlzTG9ja2VkKEcpKSl7cmV0dXJuIGZhbHNlfUkuc2V0TG9ja2VkKEcsQyx0cnVlKTtJLm1vdmVDb2x1bW4oRyxKKTt0aGlzLmdyaWQuZmlyZUV2ZW50KCJjb2x1bW5tb3ZlIixHLEopO3JldHVybiB0cnVlfXJldHVybiBmYWxzZX19KTtFeHQuZ3JpZC5HcmlkVmlldy5Db2x1bW5EcmFnWm9uZT1mdW5jdGlvbihBLEIpe0V4dC5ncmlkLkdyaWRWaWV3LkNvbHVtbkRyYWdab25lLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLEEsQixudWxsKTt0aGlzLnByb3h5LmVsLmFkZENsYXNzKCJ4LWdyaWQzLWNvbC1kZCIpfTtFeHQuZXh0ZW5kKEV4dC5ncmlkLkdyaWRWaWV3LkNvbHVtbkRyYWdab25lLEV4dC5ncmlkLkhlYWRlckRyYWdab25lLHtoYW5kbGVNb3VzZURvd246ZnVuY3Rpb24oQSl7fSxjYWxsSGFuZGxlTW91c2VEb3duOmZ1bmN0aW9uKEEpe0V4dC5ncmlkLkdyaWRWaWV3LkNvbHVtbkRyYWdab25lLnN1cGVyY2xhc3MuaGFuZGxlTW91c2VEb3duLmNhbGwodGhpcyxBKX19KTsNCkV4dC5ncmlkLlNwbGl0RHJhZ1pvbmU9ZnVuY3Rpb24oQSxDLEIpe3RoaXMuZ3JpZD1BO3RoaXMudmlldz1BLmdldFZpZXcoKTt0aGlzLnByb3h5PXRoaXMudmlldy5yZXNpemVQcm94eTtFeHQuZ3JpZC5TcGxpdERyYWdab25lLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLEMsImdyaWRTcGxpdHRlcnMiK3RoaXMuZ3JpZC5nZXRHcmlkRWwoKS5pZCx7ZHJhZ0VsSWQ6RXh0LmlkKHRoaXMucHJveHkuZG9tKSxyZXNpemVGcmFtZTpmYWxzZX0pO3RoaXMuc2V0SGFuZGxlRWxJZChFeHQuaWQoQykpO3RoaXMuc2V0T3V0ZXJIYW5kbGVFbElkKEV4dC5pZChCKSk7dGhpcy5zY3JvbGw9ZmFsc2V9O0V4dC5leHRlbmQoRXh0LmdyaWQuU3BsaXREcmFnWm9uZSxFeHQuZGQuRERQcm94eSx7Zmx5OkV4dC5FbGVtZW50LmZseSxiNFN0YXJ0RHJhZzpmdW5jdGlvbihBLEQpe3RoaXMudmlldy5oZWFkZXJzRGlzYWJsZWQ9dHJ1ZTt0aGlzLnByb3h5LnNldEhlaWdodCh0aGlzLnZpZXcubWFpbldyYXAuZ2V0SGVpZ2h0KCkpO3ZhciBCPXRoaXMuY20uZ2V0Q29sdW1uV2lkdGgodGhpcy5jZWxsSW5kZXgpO3ZhciBDPU1hdGgubWF4KEItdGhpcy5ncmlkLm1pbkNvbHVtbldpZHRoLDApO3RoaXMucmVzZXRDb25zdHJhaW50cygpO3RoaXMuc2V0WENvbnN0cmFpbnQoQywxMDAwKTt0aGlzLnNldFlDb25zdHJhaW50KDAsMCk7dGhpcy5taW5YPUEtQzt0aGlzLm1heFg9QSsxMDAwO3RoaXMuc3RhcnRQb3M9QTtFeHQuZGQuRERQcm94eS5wcm90b3R5cGUuYjRTdGFydERyYWcuY2FsbCh0aGlzLEEsRCl9LGhhbmRsZU1vdXNlRG93bjpmdW5jdGlvbihCKXtldj1FeHQuRXZlbnRPYmplY3Quc2V0RXZlbnQoQik7dmFyIEE9dGhpcy5mbHkoZXYuZ2V0VGFyZ2V0KCkpO2lmKEEuaGFzQ2xhc3MoIngtZ3JpZC1zcGxpdCIpKXt0aGlzLmNlbGxJbmRleD10aGlzLnZpZXcuZ2V0Q2VsbEluZGV4KEEuZG9tKTt0aGlzLnNwbGl0PUEuZG9tO3RoaXMuY209dGhpcy5ncmlkLmNvbE1vZGVsO2lmKHRoaXMuY20uaXNSZXNpemFibGUodGhpcy5jZWxsSW5kZXgpJiYhdGhpcy5jbS5pc0ZpeGVkKHRoaXMuY2VsbEluZGV4KSl7RXh0LmdyaWQuU3BsaXREcmFnWm9uZS5zdXBlcmNsYXNzLmhhbmRsZU1vdXNlRG93bi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX0sZW5kRHJhZzpmdW5jdGlvbihDKXt0aGlzLnZpZXcuaGVhZGVyc0Rpc2FibGVkPWZhbHNlO3ZhciBBPU1hdGgubWF4KHRoaXMubWluWCxFeHQubGliLkV2ZW50LmdldFBhZ2VYKEMpKTt2YXIgQj1BLXRoaXMuc3RhcnRQb3M7dGhpcy52aWV3Lm9uQ29sdW1uU3BsaXR0ZXJNb3ZlZCh0aGlzLmNlbGxJbmRleCx0aGlzLmNtLmdldENvbHVtbldpZHRoKHRoaXMuY2VsbEluZGV4KStCKX0sYXV0b09mZnNldDpmdW5jdGlvbigpe3RoaXMuc2V0RGVsdGEoMCwwKX19KTsNCkV4dC5ncmlkLkdyaWREcmFnWm9uZT1mdW5jdGlvbihCLEEpe3RoaXMudmlldz1CLmdldFZpZXcoKTtFeHQuZ3JpZC5HcmlkRHJhZ1pvbmUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsdGhpcy52aWV3Lm1haW5Cb2R5LmRvbSxBKTtpZih0aGlzLnZpZXcubG9ja2VkQm9keSl7dGhpcy5zZXRIYW5kbGVFbElkKEV4dC5pZCh0aGlzLnZpZXcubWFpbkJvZHkuZG9tKSk7dGhpcy5zZXRPdXRlckhhbmRsZUVsSWQoRXh0LmlkKHRoaXMudmlldy5sb2NrZWRCb2R5LmRvbSkpfXRoaXMuc2Nyb2xsPWZhbHNlO3RoaXMuZ3JpZD1CO3RoaXMuZGRlbD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTt0aGlzLmRkZWwuY2xhc3NOYW1lPSJ4LWdyaWQtZGQtd3JhcCJ9O0V4dC5leHRlbmQoRXh0LmdyaWQuR3JpZERyYWdab25lLEV4dC5kZC5EcmFnWm9uZSx7ZGRHcm91cDoiR3JpZEREIixnZXREcmFnRGF0YTpmdW5jdGlvbihCKXt2YXIgQT1FeHQubGliLkV2ZW50LmdldFRhcmdldChCKTt2YXIgRD10aGlzLnZpZXcuZmluZFJvd0luZGV4KEEpO2lmKEQhPT1mYWxzZSl7dmFyIEM9dGhpcy5ncmlkLnNlbE1vZGVsO2lmKCFDLmlzU2VsZWN0ZWQoRCl8fEIuaGFzTW9kaWZpZXIoKSl7Qy5oYW5kbGVNb3VzZURvd24odGhpcy5ncmlkLEQsQil9cmV0dXJue2dyaWQ6dGhpcy5ncmlkLGRkZWw6dGhpcy5kZGVsLHJvd0luZGV4OkQsc2VsZWN0aW9uczpDLmdldFNlbGVjdGlvbnMoKX19cmV0dXJuIGZhbHNlfSxvbkluaXREcmFnOmZ1bmN0aW9uKEIpe3ZhciBBPXRoaXMuZHJhZ0RhdGE7dGhpcy5kZGVsLmlubmVySFRNTD10aGlzLmdyaWQuZ2V0RHJhZ0Ryb3BUZXh0KCk7dGhpcy5wcm94eS51cGRhdGUodGhpcy5kZGVsKX0sYWZ0ZXJSZXBhaXI6ZnVuY3Rpb24oKXt0aGlzLmRyYWdnaW5nPWZhbHNlfSxnZXRSZXBhaXJYWTpmdW5jdGlvbihCLEEpe3JldHVybiBmYWxzZX0sb25FbmREcmFnOmZ1bmN0aW9uKEEsQil7fSxvblZhbGlkRHJvcDpmdW5jdGlvbihBLEIsQyl7dGhpcy5oaWRlUHJveHkoKX0sYmVmb3JlSW52YWxpZERyb3A6ZnVuY3Rpb24oQSxCKXt9fSk7DQpFeHQuZ3JpZC5Db2x1bW5Nb2RlbD1mdW5jdGlvbihBKXt0aGlzLmRlZmF1bHRXaWR0aD0xMDA7dGhpcy5kZWZhdWx0U29ydGFibGU9ZmFsc2U7aWYoQS5jb2x1bW5zKXtFeHQuYXBwbHkodGhpcyxBKTt0aGlzLnNldENvbmZpZyhBLmNvbHVtbnMsdHJ1ZSl9ZWxzZXt0aGlzLnNldENvbmZpZyhBLHRydWUpfXRoaXMuYWRkRXZlbnRzKCJ3aWR0aGNoYW5nZSIsImhlYWRlcmNoYW5nZSIsImhpZGRlbmNoYW5nZSIsImNvbHVtbm1vdmVkIiwiY29sdW1ubG9ja2NoYW5nZSIsImNvbmZpZ2NoYW5nZSIpO0V4dC5ncmlkLkNvbHVtbk1vZGVsLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKX07RXh0LmV4dGVuZChFeHQuZ3JpZC5Db2x1bW5Nb2RlbCxFeHQudXRpbC5PYnNlcnZhYmxlLHtnZXRDb2x1bW5JZDpmdW5jdGlvbihBKXtyZXR1cm4gdGhpcy5jb25maWdbQV0uaWR9LHNldENvbmZpZzpmdW5jdGlvbihDLEIpe2lmKCFCKXtkZWxldGUgdGhpcy50b3RhbFdpZHRoO2Zvcih2YXIgRD0wLEE9dGhpcy5jb25maWcubGVuZ3RoO0Q8QTtEKyspe3ZhciBFPXRoaXMuY29uZmlnW0RdO2lmKEUuZWRpdG9yKXtFLmVkaXRvci5kZXN0cm95KCl9fX10aGlzLmNvbmZpZz1DO3RoaXMubG9va3VwPXt9O2Zvcih2YXIgRD0wLEE9Qy5sZW5ndGg7RDxBO0QrKyl7dmFyIEU9Q1tEXTtpZih0eXBlb2YgRS5yZW5kZXJlcj09InN0cmluZyIpe0UucmVuZGVyZXI9RXh0LnV0aWwuRm9ybWF0W0UucmVuZGVyZXJdfWlmKHR5cGVvZiBFLmlkPT0idW5kZWZpbmVkIil7RS5pZD1EfWlmKEUuZWRpdG9yJiZFLmVkaXRvci5pc0Zvcm1GaWVsZCl7RS5lZGl0b3I9bmV3IEV4dC5ncmlkLkdyaWRFZGl0b3IoRS5lZGl0b3IpfXRoaXMubG9va3VwW0UuaWRdPUV9aWYoIUIpe3RoaXMuZmlyZUV2ZW50KCJjb25maWdjaGFuZ2UiLHRoaXMpfX0sZ2V0Q29sdW1uQnlJZDpmdW5jdGlvbihBKXtyZXR1cm4gdGhpcy5sb29rdXBbQV19LGdldEluZGV4QnlJZDpmdW5jdGlvbihDKXtmb3IodmFyIEI9MCxBPXRoaXMuY29uZmlnLmxlbmd0aDtCPEE7QisrKXtpZih0aGlzLmNvbmZpZ1tCXS5pZD09Qyl7cmV0dXJuIEJ9fXJldHVybiAtMX0sbW92ZUNvbHVtbjpmdW5jdGlvbihDLEEpe3ZhciBCPXRoaXMuY29uZmlnW0NdO3RoaXMuY29uZmlnLnNwbGljZShDLDEpO3RoaXMuY29uZmlnLnNwbGljZShBLDAsQik7dGhpcy5kYXRhTWFwPW51bGw7dGhpcy5maXJlRXZlbnQoImNvbHVtbm1vdmVkIix0aGlzLEMsQSl9LGlzTG9ja2VkOmZ1bmN0aW9uKEEpe3JldHVybiB0aGlzLmNvbmZpZ1tBXS5sb2NrZWQ9PT10cnVlfSxzZXRMb2NrZWQ6ZnVuY3Rpb24oQixDLEEpe2lmKHRoaXMuaXNMb2NrZWQoQik9PUMpe3JldHVybiB9dGhpcy5jb25maWdbQl0ubG9ja2VkPUM7aWYoIUEpe3RoaXMuZmlyZUV2ZW50KCJjb2x1bW5sb2NrY2hhbmdlIix0aGlzLEIsQyl9fSxnZXRUb3RhbExvY2tlZFdpZHRoOmZ1bmN0aW9uKCl7dmFyIEE9MDtmb3IodmFyIEI9MDtCPHRoaXMuY29uZmlnLmxlbmd0aDtCKyspe2lmKHRoaXMuaXNMb2NrZWQoQikmJiF0aGlzLmlzSGlkZGVuKEIpKXt0aGlzLnRvdGFsV2lkdGgrPXRoaXMuZ2V0Q29sdW1uV2lkdGgoQil9fXJldHVybiBBfSxnZXRMb2NrZWRDb3VudDpmdW5jdGlvbigpe2Zvcih2YXIgQj0wLEE9dGhpcy5jb25maWcubGVuZ3RoO0I8QTtCKyspe2lmKCF0aGlzLmlzTG9ja2VkKEIpKXtyZXR1cm4gQn19fSxnZXRDb2x1bW5Db3VudDpmdW5jdGlvbihDKXtpZihDPT09dHJ1ZSl7dmFyIEQ9MDtmb3IodmFyIEI9MCxBPXRoaXMuY29uZmlnLmxlbmd0aDtCPEE7QisrKXtpZighdGhpcy5pc0hpZGRlbihCKSl7RCsrfX1yZXR1cm4gRH1yZXR1cm4gdGhpcy5jb25maWcubGVuZ3RofSxnZXRDb2x1bW5zQnk6ZnVuY3Rpb24oRCxDKXt2YXIgRT1bXTtmb3IodmFyIEI9MCxBPXRoaXMuY29uZmlnLmxlbmd0aDtCPEE7QisrKXt2YXIgRj10aGlzLmNvbmZpZ1tCXTtpZihELmNhbGwoQ3x8dGhpcyxGLEIpPT09dHJ1ZSl7RVtFLmxlbmd0aF09Rn19cmV0dXJuIEV9LGlzU29ydGFibGU6ZnVuY3Rpb24oQSl7aWYodHlwZW9mIHRoaXMuY29uZmlnW0FdLnNvcnRhYmxlPT0idW5kZWZpbmVkIil7cmV0dXJuIHRoaXMuZGVmYXVsdFNvcnRhYmxlfXJldHVybiB0aGlzLmNvbmZpZ1tBXS5zb3J0YWJsZX0saXNNZW51RGlzYWJsZWQ6ZnVuY3Rpb24oQSl7cmV0dXJuICEhdGhpcy5jb25maWdbQV0ubWVudURpc2FibGVkfSxnZXRSZW5kZXJlcjpmdW5jdGlvbihBKXtpZighdGhpcy5jb25maWdbQV0ucmVuZGVyZXIpe3JldHVybiBFeHQuZ3JpZC5Db2x1bW5Nb2RlbC5kZWZhdWx0UmVuZGVyZXJ9cmV0dXJuIHRoaXMuY29uZmlnW0FdLnJlbmRlcmVyfSxzZXRSZW5kZXJlcjpmdW5jdGlvbihBLEIpe3RoaXMuY29uZmlnW0FdLnJlbmRlcmVyPUJ9LGdldENvbHVtbldpZHRoOmZ1bmN0aW9uKEEpe3JldHVybiB0aGlzLmNvbmZpZ1tBXS53aWR0aHx8dGhpcy5kZWZhdWx0V2lkdGh9LHNldENvbHVtbldpZHRoOmZ1bmN0aW9uKEIsQyxBKXt0aGlzLmNvbmZpZ1tCXS53aWR0aD1DO3RoaXMudG90YWxXaWR0aD1udWxsO2lmKCFBKXt0aGlzLmZpcmVFdmVudCgid2lkdGhjaGFuZ2UiLHRoaXMsQixDKX19LGdldFRvdGFsV2lkdGg6ZnVuY3Rpb24oQil7aWYoIXRoaXMudG90YWxXaWR0aCl7dGhpcy50b3RhbFdpZHRoPTA7Zm9yKHZhciBDPTAsQT10aGlzLmNvbmZpZy5sZW5ndGg7QzxBO0MrKyl7aWYoQnx8IXRoaXMuaXNIaWRkZW4oQykpe3RoaXMudG90YWxXaWR0aCs9dGhpcy5nZXRDb2x1bW5XaWR0aChDKX19fXJldHVybiB0aGlzLnRvdGFsV2lkdGh9LGdldENvbHVtbkhlYWRlcjpmdW5jdGlvbihBKXtyZXR1cm4gdGhpcy5jb25maWdbQV0uaGVhZGVyfSxzZXRDb2x1bW5IZWFkZXI6ZnVuY3Rpb24oQSxCKXt0aGlzLmNvbmZpZ1tBXS5oZWFkZXI9Qjt0aGlzLmZpcmVFdmVudCgiaGVhZGVyY2hhbmdlIix0aGlzLEEsQil9LGdldENvbHVtblRvb2x0aXA6ZnVuY3Rpb24oQSl7cmV0dXJuIHRoaXMuY29uZmlnW0FdLnRvb2x0aXB9LHNldENvbHVtblRvb2x0aXA6ZnVuY3Rpb24oQSxCKXt0aGlzLmNvbmZpZ1tBXS50b29sdGlwPUJ9LGdldERhdGFJbmRleDpmdW5jdGlvbihBKXtyZXR1cm4gdGhpcy5jb25maWdbQV0uZGF0YUluZGV4fSxzZXREYXRhSW5kZXg6ZnVuY3Rpb24oQSxCKXt0aGlzLmNvbmZpZ1tBXS5kYXRhSW5kZXg9Qn0sZmluZENvbHVtbkluZGV4OmZ1bmN0aW9uKEMpe3ZhciBEPXRoaXMuY29uZmlnO2Zvcih2YXIgQj0wLEE9RC5sZW5ndGg7QjxBO0IrKyl7aWYoRFtCXS5kYXRhSW5kZXg9PUMpe3JldHVybiBCfX1yZXR1cm4gLTF9LGlzQ2VsbEVkaXRhYmxlOmZ1bmN0aW9uKEEsQil7cmV0dXJuKHRoaXMuY29uZmlnW0FdLmVkaXRhYmxlfHwodHlwZW9mIHRoaXMuY29uZmlnW0FdLmVkaXRhYmxlPT0idW5kZWZpbmVkIiYmdGhpcy5jb25maWdbQV0uZWRpdG9yKSk/dHJ1ZTpmYWxzZX0sZ2V0Q2VsbEVkaXRvcjpmdW5jdGlvbihBLEIpe3JldHVybiB0aGlzLmNvbmZpZ1tBXS5lZGl0b3J9LHNldEVkaXRhYmxlOmZ1bmN0aW9uKEEsQil7dGhpcy5jb25maWdbQV0uZWRpdGFibGU9Qn0saXNIaWRkZW46ZnVuY3Rpb24oQSl7cmV0dXJuIHRoaXMuY29uZmlnW0FdLmhpZGRlbn0saXNGaXhlZDpmdW5jdGlvbihBKXtyZXR1cm4gdGhpcy5jb25maWdbQV0uZml4ZWR9LGlzUmVzaXphYmxlOmZ1bmN0aW9uKEEpe3JldHVybiBBPj0wJiZ0aGlzLmNvbmZpZ1tBXS5yZXNpemFibGUhPT1mYWxzZSYmdGhpcy5jb25maWdbQV0uZml4ZWQhPT10cnVlfSxzZXRIaWRkZW46ZnVuY3Rpb24oQSxCKXt2YXIgQz10aGlzLmNvbmZpZ1tBXTtpZihDLmhpZGRlbiE9PUIpe0MuaGlkZGVuPUI7dGhpcy50b3RhbFdpZHRoPW51bGw7dGhpcy5maXJlRXZlbnQoImhpZGRlbmNoYW5nZSIsdGhpcyxBLEIpfX0sc2V0RWRpdG9yOmZ1bmN0aW9uKEEsQil7dGhpcy5jb25maWdbQV0uZWRpdG9yPUJ9fSk7RXh0LmdyaWQuQ29sdW1uTW9kZWwuZGVmYXVsdFJlbmRlcmVyPWZ1bmN0aW9uKEEpe2lmKHR5cGVvZiBBPT0ic3RyaW5nIiYmQS5sZW5ndGg8MSl7cmV0dXJuIiYjMTYwOyJ9cmV0dXJuIEF9O0V4dC5ncmlkLkRlZmF1bHRDb2x1bW5Nb2RlbD1FeHQuZ3JpZC5Db2x1bW5Nb2RlbDsNCkV4dC5ncmlkLkFic3RyYWN0U2VsZWN0aW9uTW9kZWw9ZnVuY3Rpb24oKXt0aGlzLmxvY2tlZD1mYWxzZTtFeHQuZ3JpZC5BYnN0cmFjdFNlbGVjdGlvbk1vZGVsLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKX07RXh0LmV4dGVuZChFeHQuZ3JpZC5BYnN0cmFjdFNlbGVjdGlvbk1vZGVsLEV4dC51dGlsLk9ic2VydmFibGUse2luaXQ6ZnVuY3Rpb24oQSl7dGhpcy5ncmlkPUE7dGhpcy5pbml0RXZlbnRzKCl9LGxvY2s6ZnVuY3Rpb24oKXt0aGlzLmxvY2tlZD10cnVlfSx1bmxvY2s6ZnVuY3Rpb24oKXt0aGlzLmxvY2tlZD1mYWxzZX0saXNMb2NrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sb2NrZWR9fSk7DQpFeHQuZ3JpZC5Sb3dTZWxlY3Rpb25Nb2RlbD1mdW5jdGlvbihBKXtFeHQuYXBwbHkodGhpcyxBKTt0aGlzLnNlbGVjdGlvbnM9bmV3IEV4dC51dGlsLk1peGVkQ29sbGVjdGlvbihmYWxzZSxmdW5jdGlvbihCKXtyZXR1cm4gQi5pZH0pO3RoaXMubGFzdD1mYWxzZTt0aGlzLmxhc3RBY3RpdmU9ZmFsc2U7dGhpcy5hZGRFdmVudHMoInNlbGVjdGlvbmNoYW5nZSIsImJlZm9yZXJvd3NlbGVjdCIsInJvd3NlbGVjdCIsInJvd2Rlc2VsZWN0Iik7RXh0LmdyaWQuUm93U2VsZWN0aW9uTW9kZWwuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpfTtFeHQuZXh0ZW5kKEV4dC5ncmlkLlJvd1NlbGVjdGlvbk1vZGVsLEV4dC5ncmlkLkFic3RyYWN0U2VsZWN0aW9uTW9kZWwse3NpbmdsZVNlbGVjdDpmYWxzZSxpbml0RXZlbnRzOmZ1bmN0aW9uKCl7aWYoIXRoaXMuZ3JpZC5lbmFibGVEcmFnRHJvcCYmIXRoaXMuZ3JpZC5lbmFibGVEcmFnKXt0aGlzLmdyaWQub24oInJvd21vdXNlZG93biIsdGhpcy5oYW5kbGVNb3VzZURvd24sdGhpcyl9ZWxzZXt0aGlzLmdyaWQub24oInJvd2NsaWNrIixmdW5jdGlvbihCLEQsQyl7aWYoQy5idXR0b249PT0wJiYhQy5zaGlmdEtleSYmIUMuY3RybEtleSl7dGhpcy5zZWxlY3RSb3coRCxmYWxzZSk7Qi52aWV3LmZvY3VzUm93KEQpfX0sdGhpcyl9dGhpcy5yb3dOYXY9bmV3IEV4dC5LZXlOYXYodGhpcy5ncmlkLmdldEdyaWRFbCgpLHsidXAiOmZ1bmN0aW9uKEMpe2lmKCFDLnNoaWZ0S2V5KXt0aGlzLnNlbGVjdFByZXZpb3VzKEMuc2hpZnRLZXkpfWVsc2V7aWYodGhpcy5sYXN0IT09ZmFsc2UmJnRoaXMubGFzdEFjdGl2ZSE9PWZhbHNlKXt2YXIgQj10aGlzLmxhc3Q7dGhpcy5zZWxlY3RSYW5nZSh0aGlzLmxhc3QsdGhpcy5sYXN0QWN0aXZlLTEpO3RoaXMuZ3JpZC5nZXRWaWV3KCkuZm9jdXNSb3codGhpcy5sYXN0QWN0aXZlKTtpZihCIT09ZmFsc2Upe3RoaXMubGFzdD1CfX1lbHNle3RoaXMuc2VsZWN0Rmlyc3RSb3coKX19fSwiZG93biI6ZnVuY3Rpb24oQyl7aWYoIUMuc2hpZnRLZXkpe3RoaXMuc2VsZWN0TmV4dChDLnNoaWZ0S2V5KX1lbHNle2lmKHRoaXMubGFzdCE9PWZhbHNlJiZ0aGlzLmxhc3RBY3RpdmUhPT1mYWxzZSl7dmFyIEI9dGhpcy5sYXN0O3RoaXMuc2VsZWN0UmFuZ2UodGhpcy5sYXN0LHRoaXMubGFzdEFjdGl2ZSsxKTt0aGlzLmdyaWQuZ2V0VmlldygpLmZvY3VzUm93KHRoaXMubGFzdEFjdGl2ZSk7aWYoQiE9PWZhbHNlKXt0aGlzLmxhc3Q9Qn19ZWxzZXt0aGlzLnNlbGVjdEZpcnN0Um93KCl9fX0sc2NvcGU6dGhpc30pO3ZhciBBPXRoaXMuZ3JpZC52aWV3O0Eub24oInJlZnJlc2giLHRoaXMub25SZWZyZXNoLHRoaXMpO0Eub24oInJvd3VwZGF0ZWQiLHRoaXMub25Sb3dVcGRhdGVkLHRoaXMpO0Eub24oInJvd3JlbW92ZWQiLHRoaXMub25SZW1vdmUsdGhpcyl9LG9uUmVmcmVzaDpmdW5jdGlvbigpe3ZhciBGPXRoaXMuZ3JpZC5zdG9yZSxCO3ZhciBEPXRoaXMuZ2V0U2VsZWN0aW9ucygpO3RoaXMuY2xlYXJTZWxlY3Rpb25zKHRydWUpO2Zvcih2YXIgQz0wLEE9RC5sZW5ndGg7QzxBO0MrKyl7dmFyIEU9RFtDXTtpZigoQj1GLmluZGV4T2ZJZChFLmlkKSkhPS0xKXt0aGlzLnNlbGVjdFJvdyhCLHRydWUpfX1pZihELmxlbmd0aCE9dGhpcy5zZWxlY3Rpb25zLmdldENvdW50KCkpe3RoaXMuZmlyZUV2ZW50KCJzZWxlY3Rpb25jaGFuZ2UiLHRoaXMpfX0sb25SZW1vdmU6ZnVuY3Rpb24oQSxCLEMpe2lmKHRoaXMuc2VsZWN0aW9ucy5yZW1vdmUoQykhPT1mYWxzZSl7dGhpcy5maXJlRXZlbnQoInNlbGVjdGlvbmNoYW5nZSIsdGhpcyl9fSxvblJvd1VwZGF0ZWQ6ZnVuY3Rpb24oQSxCLEMpe2lmKHRoaXMuaXNTZWxlY3RlZChDKSl7QS5vblJvd1NlbGVjdChCKX19LHNlbGVjdFJlY29yZHM6ZnVuY3Rpb24oQixFKXtpZighRSl7dGhpcy5jbGVhclNlbGVjdGlvbnMoKX12YXIgRD10aGlzLmdyaWQuc3RvcmU7Zm9yKHZhciBDPTAsQT1CLmxlbmd0aDtDPEE7QysrKXt0aGlzLnNlbGVjdFJvdyhELmluZGV4T2YoQltDXSksdHJ1ZSl9fSxnZXRDb3VudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbGVjdGlvbnMubGVuZ3RofSxzZWxlY3RGaXJzdFJvdzpmdW5jdGlvbigpe3RoaXMuc2VsZWN0Um93KDApfSxzZWxlY3RMYXN0Um93OmZ1bmN0aW9uKEEpe3RoaXMuc2VsZWN0Um93KHRoaXMuZ3JpZC5zdG9yZS5nZXRDb3VudCgpLTEsQSl9LHNlbGVjdE5leHQ6ZnVuY3Rpb24oQSl7aWYodGhpcy5oYXNOZXh0KCkpe3RoaXMuc2VsZWN0Um93KHRoaXMubGFzdCsxLEEpO3RoaXMuZ3JpZC5nZXRWaWV3KCkuZm9jdXNSb3codGhpcy5sYXN0KTtyZXR1cm4gdHJ1ZX1yZXR1cm4gZmFsc2V9LHNlbGVjdFByZXZpb3VzOmZ1bmN0aW9uKEEpe2lmKHRoaXMuaGFzUHJldmlvdXMoKSl7dGhpcy5zZWxlY3RSb3codGhpcy5sYXN0LTEsQSk7dGhpcy5ncmlkLmdldFZpZXcoKS5mb2N1c1Jvdyh0aGlzLmxhc3QpO3JldHVybiB0cnVlfXJldHVybiBmYWxzZX0saGFzTmV4dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxhc3QhPT1mYWxzZSYmKHRoaXMubGFzdCsxKTx0aGlzLmdyaWQuc3RvcmUuZ2V0Q291bnQoKX0saGFzUHJldmlvdXM6ZnVuY3Rpb24oKXtyZXR1cm4gISF0aGlzLmxhc3R9LGdldFNlbGVjdGlvbnM6ZnVuY3Rpb24oKXtyZXR1cm5bXS5jb25jYXQodGhpcy5zZWxlY3Rpb25zLml0ZW1zKX0sZ2V0U2VsZWN0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWxlY3Rpb25zLml0ZW1BdCgwKX0sZWFjaDpmdW5jdGlvbihFLEQpe3ZhciBDPXRoaXMuZ2V0U2VsZWN0aW9ucygpO2Zvcih2YXIgQj0wLEE9Qy5sZW5ndGg7QjxBO0IrKyl7aWYoRS5jYWxsKER8fHRoaXMsQ1tCXSxCKT09PWZhbHNlKXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfSxjbGVhclNlbGVjdGlvbnM6ZnVuY3Rpb24oQSl7aWYodGhpcy5sb2NrZWQpe3JldHVybiB9aWYoQSE9PXRydWUpe3ZhciBDPXRoaXMuZ3JpZC5zdG9yZTt2YXIgQj10aGlzLnNlbGVjdGlvbnM7Qi5lYWNoKGZ1bmN0aW9uKEQpe3RoaXMuZGVzZWxlY3RSb3coQy5pbmRleE9mSWQoRC5pZCkpfSx0aGlzKTtCLmNsZWFyKCl9ZWxzZXt0aGlzLnNlbGVjdGlvbnMuY2xlYXIoKX10aGlzLmxhc3Q9ZmFsc2V9LHNlbGVjdEFsbDpmdW5jdGlvbigpe2lmKHRoaXMubG9ja2VkKXtyZXR1cm4gfXRoaXMuc2VsZWN0aW9ucy5jbGVhcigpO2Zvcih2YXIgQj0wLEE9dGhpcy5ncmlkLnN0b3JlLmdldENvdW50KCk7QjxBO0IrKyl7dGhpcy5zZWxlY3RSb3coQix0cnVlKX19LGhhc1NlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbGVjdGlvbnMubGVuZ3RoPjB9LGlzU2VsZWN0ZWQ6ZnVuY3Rpb24oQSl7dmFyIEI9dHlwZW9mIEE9PSJudW1iZXIiP3RoaXMuZ3JpZC5zdG9yZS5nZXRBdChBKTpBO3JldHVybihCJiZ0aGlzLnNlbGVjdGlvbnMua2V5KEIuaWQpP3RydWU6ZmFsc2UpfSxpc0lkU2VsZWN0ZWQ6ZnVuY3Rpb24oQSl7cmV0dXJuKHRoaXMuc2VsZWN0aW9ucy5rZXkoQSk/dHJ1ZTpmYWxzZSl9LGhhbmRsZU1vdXNlRG93bjpmdW5jdGlvbihELEYsRSl7aWYoRS5idXR0b24hPT0wfHx0aGlzLmlzTG9ja2VkKCkpe3JldHVybiB9dmFyIEE9dGhpcy5ncmlkLmdldFZpZXcoKTtpZihFLnNoaWZ0S2V5JiZ0aGlzLmxhc3QhPT1mYWxzZSl7dmFyIEM9dGhpcy5sYXN0O3RoaXMuc2VsZWN0UmFuZ2UoQyxGLEUuY3RybEtleSk7dGhpcy5sYXN0PUM7QS5mb2N1c1JvdyhGKX1lbHNle3ZhciBCPXRoaXMuaXNTZWxlY3RlZChGKTtpZihFLmN0cmxLZXkmJkIpe3RoaXMuZGVzZWxlY3RSb3coRil9ZWxzZXtpZighQnx8dGhpcy5nZXRDb3VudCgpPjEpe3RoaXMuc2VsZWN0Um93KEYsRS5jdHJsS2V5fHxFLnNoaWZ0S2V5KTtBLmZvY3VzUm93KEYpfX19fSxzZWxlY3RSb3dzOmZ1bmN0aW9uKEMsRCl7aWYoIUQpe3RoaXMuY2xlYXJTZWxlY3Rpb25zKCl9Zm9yKHZhciBCPTAsQT1DLmxlbmd0aDtCPEE7QisrKXt0aGlzLnNlbGVjdFJvdyhDW0JdLHRydWUpfX0sc2VsZWN0UmFuZ2U6ZnVuY3Rpb24oQixBLEQpe2lmKHRoaXMubG9ja2VkKXtyZXR1cm4gfWlmKCFEKXt0aGlzLmNsZWFyU2VsZWN0aW9ucygpfWlmKEI8PUEpe2Zvcih2YXIgQz1CO0M8PUE7QysrKXt0aGlzLnNlbGVjdFJvdyhDLHRydWUpfX1lbHNle2Zvcih2YXIgQz1CO0M+PUE7Qy0tKXt0aGlzLnNlbGVjdFJvdyhDLHRydWUpfX19LGRlc2VsZWN0UmFuZ2U6ZnVuY3Rpb24oQyxCLEEpe2lmKHRoaXMubG9ja2VkKXtyZXR1cm4gfWZvcih2YXIgRD1DO0Q8PUI7RCsrKXt0aGlzLmRlc2VsZWN0Um93KEQsQSl9fSxzZWxlY3RSb3c6ZnVuY3Rpb24oQixELEEpe2lmKHRoaXMubG9ja2VkfHwoQjwwfHxCPj10aGlzLmdyaWQuc3RvcmUuZ2V0Q291bnQoKSkpe3JldHVybiB9dmFyIEM9dGhpcy5ncmlkLnN0b3JlLmdldEF0KEIpO2lmKEMmJnRoaXMuZmlyZUV2ZW50KCJiZWZvcmVyb3dzZWxlY3QiLHRoaXMsQixELEMpIT09ZmFsc2Upe2lmKCFEfHx0aGlzLnNpbmdsZVNlbGVjdCl7dGhpcy5jbGVhclNlbGVjdGlvbnMoKX10aGlzLnNlbGVjdGlvbnMuYWRkKEMpO3RoaXMubGFzdD10aGlzLmxhc3RBY3RpdmU9QjtpZighQSl7dGhpcy5ncmlkLmdldFZpZXcoKS5vblJvd1NlbGVjdChCKX10aGlzLmZpcmVFdmVudCgicm93c2VsZWN0Iix0aGlzLEIsQyk7dGhpcy5maXJlRXZlbnQoInNlbGVjdGlvbmNoYW5nZSIsdGhpcyl9fSxkZXNlbGVjdFJvdzpmdW5jdGlvbihCLEEpe2lmKHRoaXMubG9ja2VkKXtyZXR1cm4gfWlmKHRoaXMubGFzdD09Qil7dGhpcy5sYXN0PWZhbHNlfWlmKHRoaXMubGFzdEFjdGl2ZT09Qil7dGhpcy5sYXN0QWN0aXZlPWZhbHNlfXZhciBDPXRoaXMuZ3JpZC5zdG9yZS5nZXRBdChCKTtpZihDKXt0aGlzLnNlbGVjdGlvbnMucmVtb3ZlKEMpO2lmKCFBKXt0aGlzLmdyaWQuZ2V0VmlldygpLm9uUm93RGVzZWxlY3QoQil9dGhpcy5maXJlRXZlbnQoInJvd2Rlc2VsZWN0Iix0aGlzLEIsQyk7dGhpcy5maXJlRXZlbnQoInNlbGVjdGlvbmNoYW5nZSIsdGhpcyl9fSxyZXN0b3JlTGFzdDpmdW5jdGlvbigpe2lmKHRoaXMuX2xhc3Qpe3RoaXMubGFzdD10aGlzLl9sYXN0fX0sYWNjZXB0c05hdjpmdW5jdGlvbihDLEIsQSl7cmV0dXJuICFBLmlzSGlkZGVuKEIpJiZBLmlzQ2VsbEVkaXRhYmxlKEIsQyl9LG9uRWRpdG9yS2V5OmZ1bmN0aW9uKEYsRSl7dmFyIEM9RS5nZXRLZXkoKSxHLEQ9dGhpcy5ncmlkLEI9RC5hY3RpdmVFZGl0b3I7dmFyIEE9RS5zaGlmdEtleTtpZihDPT1FLlRBQil7RS5zdG9wRXZlbnQoKTtCLmNvbXBsZXRlRWRpdCgpO2lmKEEpe0c9RC53YWxrQ2VsbHMoQi5yb3csQi5jb2wtMSwtMSx0aGlzLmFjY2VwdHNOYXYsdGhpcyl9ZWxzZXtHPUQud2Fsa0NlbGxzKEIucm93LEIuY29sKzEsMSx0aGlzLmFjY2VwdHNOYXYsdGhpcyl9fWVsc2V7aWYoQz09RS5FTlRFUil7RS5zdG9wRXZlbnQoKTtCLmNvbXBsZXRlRWRpdCgpO2lmKHRoaXMubW92ZUVkaXRvck9uRW50ZXIhPT1mYWxzZSl7aWYoQSl7Rz1ELndhbGtDZWxscyhCLnJvdy0xLEIuY29sLC0xLHRoaXMuYWNjZXB0c05hdix0aGlzKX1lbHNle0c9RC53YWxrQ2VsbHMoQi5yb3crMSxCLmNvbCwxLHRoaXMuYWNjZXB0c05hdix0aGlzKX19fWVsc2V7aWYoQz09RS5FU0Mpe0IuY2FuY2VsRWRpdCgpfX19aWYoRyl7RC5zdGFydEVkaXRpbmcoR1swXSxHWzFdKX19fSk7DQpFeHQuZ3JpZC5DZWxsU2VsZWN0aW9uTW9kZWw9ZnVuY3Rpb24oQSl7RXh0LmFwcGx5KHRoaXMsQSk7dGhpcy5zZWxlY3Rpb249bnVsbDt0aGlzLmFkZEV2ZW50cygiYmVmb3JlY2VsbHNlbGVjdCIsImNlbGxzZWxlY3QiLCJzZWxlY3Rpb25jaGFuZ2UiKTtFeHQuZ3JpZC5DZWxsU2VsZWN0aW9uTW9kZWwuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpfTtFeHQuZXh0ZW5kKEV4dC5ncmlkLkNlbGxTZWxlY3Rpb25Nb2RlbCxFeHQuZ3JpZC5BYnN0cmFjdFNlbGVjdGlvbk1vZGVsLHtpbml0RXZlbnRzOmZ1bmN0aW9uKCl7dGhpcy5ncmlkLm9uKCJjZWxsbW91c2Vkb3duIix0aGlzLmhhbmRsZU1vdXNlRG93bix0aGlzKTt0aGlzLmdyaWQuZ2V0R3JpZEVsKCkub24oRXh0LmlzSUU/ImtleWRvd24iOiJrZXlwcmVzcyIsdGhpcy5oYW5kbGVLZXlEb3duLHRoaXMpO3ZhciBBPXRoaXMuZ3JpZC52aWV3O0Eub24oInJlZnJlc2giLHRoaXMub25WaWV3Q2hhbmdlLHRoaXMpO0Eub24oInJvd3VwZGF0ZWQiLHRoaXMub25Sb3dVcGRhdGVkLHRoaXMpO0Eub24oImJlZm9yZXJvd3JlbW92ZWQiLHRoaXMuY2xlYXJTZWxlY3Rpb25zLHRoaXMpO0Eub24oImJlZm9yZXJvd3NpbnNlcnRlZCIsdGhpcy5jbGVhclNlbGVjdGlvbnMsdGhpcyk7aWYodGhpcy5ncmlkLmlzRWRpdG9yKXt0aGlzLmdyaWQub24oImJlZm9yZWVkaXQiLHRoaXMuYmVmb3JlRWRpdCx0aGlzKX19LGJlZm9yZUVkaXQ6ZnVuY3Rpb24oQSl7dGhpcy5zZWxlY3QoQS5yb3csQS5jb2x1bW4sZmFsc2UsdHJ1ZSxBLnJlY29yZCl9LG9uUm93VXBkYXRlZDpmdW5jdGlvbihBLEIsQyl7aWYodGhpcy5zZWxlY3Rpb24mJnRoaXMuc2VsZWN0aW9uLnJlY29yZD09Qyl7QS5vbkNlbGxTZWxlY3QoQix0aGlzLnNlbGVjdGlvbi5jZWxsWzFdKX19LG9uVmlld0NoYW5nZTpmdW5jdGlvbigpe3RoaXMuY2xlYXJTZWxlY3Rpb25zKHRydWUpfSxnZXRTZWxlY3RlZENlbGw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWxlY3Rpb24/dGhpcy5zZWxlY3Rpb24uY2VsbDpudWxsfSxjbGVhclNlbGVjdGlvbnM6ZnVuY3Rpb24oQil7dmFyIEE9dGhpcy5zZWxlY3Rpb247aWYoQSl7aWYoQiE9PXRydWUpe3RoaXMuZ3JpZC52aWV3Lm9uQ2VsbERlc2VsZWN0KEEuY2VsbFswXSxBLmNlbGxbMV0pfXRoaXMuc2VsZWN0aW9uPW51bGw7dGhpcy5maXJlRXZlbnQoInNlbGVjdGlvbmNoYW5nZSIsdGhpcyxudWxsKX19LGhhc1NlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbGVjdGlvbj90cnVlOmZhbHNlfSxoYW5kbGVNb3VzZURvd246ZnVuY3Rpb24oQixELEEsQyl7aWYoQy5idXR0b24hPT0wfHx0aGlzLmlzTG9ja2VkKCkpe3JldHVybiB9dGhpcy5zZWxlY3QoRCxBKX0sc2VsZWN0OmZ1bmN0aW9uKEYsQyxCLEUsRCl7aWYodGhpcy5maXJlRXZlbnQoImJlZm9yZWNlbGxzZWxlY3QiLHRoaXMsRixDKSE9PWZhbHNlKXt0aGlzLmNsZWFyU2VsZWN0aW9ucygpO0Q9RHx8dGhpcy5ncmlkLnN0b3JlLmdldEF0KEYpO3RoaXMuc2VsZWN0aW9uPXtyZWNvcmQ6RCxjZWxsOltGLENdfTtpZighQil7dmFyIEE9dGhpcy5ncmlkLmdldFZpZXcoKTtBLm9uQ2VsbFNlbGVjdChGLEMpO2lmKEUhPT10cnVlKXtBLmZvY3VzQ2VsbChGLEMpfX10aGlzLmZpcmVFdmVudCgiY2VsbHNlbGVjdCIsdGhpcyxGLEMpO3RoaXMuZmlyZUV2ZW50KCJzZWxlY3Rpb25jaGFuZ2UiLHRoaXMsdGhpcy5zZWxlY3Rpb24pfX0saXNTZWxlY3RhYmxlOmZ1bmN0aW9uKEMsQixBKXtyZXR1cm4gIUEuaXNIaWRkZW4oQil9LGhhbmRsZUtleURvd246ZnVuY3Rpb24oRil7aWYoIUYuaXNOYXZLZXlQcmVzcygpKXtyZXR1cm4gfXZhciBFPXRoaXMuZ3JpZCxKPXRoaXMuc2VsZWN0aW9uO2lmKCFKKXtGLnN0b3BFdmVudCgpO3ZhciBJPUUud2Fsa0NlbGxzKDAsMCwxLHRoaXMuaXNTZWxlY3RhYmxlLHRoaXMpO2lmKEkpe3RoaXMuc2VsZWN0KElbMF0sSVsxXSl9cmV0dXJuIH12YXIgQj10aGlzO3ZhciBIPWZ1bmN0aW9uKE0sSyxMKXtyZXR1cm4gRS53YWxrQ2VsbHMoTSxLLEwsQi5pc1NlbGVjdGFibGUsQil9O3ZhciBDPUYuZ2V0S2V5KCksQT1KLmNlbGxbMF0sRz1KLmNlbGxbMV07dmFyIEQ7c3dpdGNoKEMpe2Nhc2UgRi5UQUI6aWYoRi5zaGlmdEtleSl7RD1IKEEsRy0xLC0xKX1lbHNle0Q9SChBLEcrMSwxKX1icmVhaztjYXNlIEYuRE9XTjpEPUgoQSsxLEcsMSk7YnJlYWs7Y2FzZSBGLlVQOkQ9SChBLTEsRywtMSk7YnJlYWs7Y2FzZSBGLlJJR0hUOkQ9SChBLEcrMSwxKTticmVhaztjYXNlIEYuTEVGVDpEPUgoQSxHLTEsLTEpO2JyZWFrO2Nhc2UgRi5FTlRFUjppZihFLmlzRWRpdG9yJiYhRS5lZGl0aW5nKXtFLnN0YXJ0RWRpdGluZyhBLEcpO0Yuc3RvcEV2ZW50KCk7cmV0dXJuIH1icmVha31pZihEKXt0aGlzLnNlbGVjdChEWzBdLERbMV0pO0Yuc3RvcEV2ZW50KCl9fSxhY2NlcHRzTmF2OmZ1bmN0aW9uKEMsQixBKXtyZXR1cm4gIUEuaXNIaWRkZW4oQikmJkEuaXNDZWxsRWRpdGFibGUoQixDKX0sb25FZGl0b3JLZXk6ZnVuY3Rpb24oRSxEKXt2YXIgQj1ELmdldEtleSgpLEYsQz10aGlzLmdyaWQsQT1DLmFjdGl2ZUVkaXRvcjtpZihCPT1ELlRBQil7aWYoRC5zaGlmdEtleSl7Rj1DLndhbGtDZWxscyhBLnJvdyxBLmNvbC0xLC0xLHRoaXMuYWNjZXB0c05hdix0aGlzKX1lbHNle0Y9Qy53YWxrQ2VsbHMoQS5yb3csQS5jb2wrMSwxLHRoaXMuYWNjZXB0c05hdix0aGlzKX1ELnN0b3BFdmVudCgpfWVsc2V7aWYoQj09RC5FTlRFUil7QS5jb21wbGV0ZUVkaXQoKTtELnN0b3BFdmVudCgpfWVsc2V7aWYoQj09RC5FU0Mpe0Quc3RvcEV2ZW50KCk7QS5jYW5jZWxFZGl0KCl9fX1pZihGKXtDLnN0YXJ0RWRpdGluZyhGWzBdLEZbMV0pfX19KTsNCkV4dC5ncmlkLkVkaXRvckdyaWRQYW5lbD1FeHQuZXh0ZW5kKEV4dC5ncmlkLkdyaWRQYW5lbCx7Y2xpY2tzVG9FZGl0OjIsaXNFZGl0b3I6dHJ1ZSxkZXRlY3RFZGl0OmZhbHNlLGF1dG9FbmNvZGU6ZmFsc2UsdHJhY2tNb3VzZU92ZXI6ZmFsc2UsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe0V4dC5ncmlkLkVkaXRvckdyaWRQYW5lbC5zdXBlcmNsYXNzLmluaXRDb21wb25lbnQuY2FsbCh0aGlzKTtpZighdGhpcy5zZWxNb2RlbCl7dGhpcy5zZWxNb2RlbD1uZXcgRXh0LmdyaWQuQ2VsbFNlbGVjdGlvbk1vZGVsKCl9dGhpcy5hY3RpdmVFZGl0b3I9bnVsbDt0aGlzLmFkZEV2ZW50cygiYmVmb3JlZWRpdCIsImFmdGVyZWRpdCIsInZhbGlkYXRlZWRpdCIpfSxpbml0RXZlbnRzOmZ1bmN0aW9uKCl7RXh0LmdyaWQuRWRpdG9yR3JpZFBhbmVsLnN1cGVyY2xhc3MuaW5pdEV2ZW50cy5jYWxsKHRoaXMpO3RoaXMub24oImJvZHlzY3JvbGwiLHRoaXMuc3RvcEVkaXRpbmcsdGhpcyxbdHJ1ZV0pO2lmKHRoaXMuY2xpY2tzVG9FZGl0PT0xKXt0aGlzLm9uKCJjZWxsY2xpY2siLHRoaXMub25DZWxsRGJsQ2xpY2ssdGhpcyl9ZWxzZXtpZih0aGlzLmNsaWNrc1RvRWRpdD09ImF1dG8iJiZ0aGlzLnZpZXcubWFpbkJvZHkpe3RoaXMudmlldy5tYWluQm9keS5vbigibW91c2Vkb3duIix0aGlzLm9uQXV0b0VkaXRDbGljayx0aGlzKX10aGlzLm9uKCJjZWxsZGJsY2xpY2siLHRoaXMub25DZWxsRGJsQ2xpY2ssdGhpcyl9dGhpcy5nZXRHcmlkRWwoKS5hZGRDbGFzcygieGVkaXQtZ3JpZCIpfSxvbkNlbGxEYmxDbGljazpmdW5jdGlvbihCLEMsQSl7dGhpcy5zdGFydEVkaXRpbmcoQyxBKX0sb25BdXRvRWRpdENsaWNrOmZ1bmN0aW9uKEMsQil7aWYoQy5idXR0b24hPT0wKXtyZXR1cm4gfXZhciBFPXRoaXMudmlldy5maW5kUm93SW5kZXgoQik7dmFyIEE9dGhpcy52aWV3LmZpbmRDZWxsSW5kZXgoQik7aWYoRSE9PWZhbHNlJiZBIT09ZmFsc2Upe3RoaXMuc3RvcEVkaXRpbmcoKTtpZih0aGlzLnNlbE1vZGVsLmdldFNlbGVjdGVkQ2VsbCl7dmFyIEQ9dGhpcy5zZWxNb2RlbC5nZXRTZWxlY3RlZENlbGwoKTtpZihEJiZELmNlbGxbMF09PT1FJiZELmNlbGxbMV09PT1BKXt0aGlzLnN0YXJ0RWRpdGluZyhFLEEpfX1lbHNle2lmKHRoaXMuc2VsTW9kZWwuaXNTZWxlY3RlZChFKSl7dGhpcy5zdGFydEVkaXRpbmcoRSxBKX19fX0sb25FZGl0Q29tcGxldGU6ZnVuY3Rpb24oQixELEEpe3RoaXMuZWRpdGluZz1mYWxzZTt0aGlzLmFjdGl2ZUVkaXRvcj1udWxsO0IudW4oInNwZWNpYWxrZXkiLHRoaXMuc2VsTW9kZWwub25FZGl0b3JLZXksdGhpcy5zZWxNb2RlbCk7dmFyIEM9Qi5yZWNvcmQ7dmFyIEY9dGhpcy5jb2xNb2RlbC5nZXREYXRhSW5kZXgoQi5jb2wpO0Q9dGhpcy5wb3N0RWRpdFZhbHVlKEQsQSxDLEYpO2lmKFN0cmluZyhEKSE9PVN0cmluZyhBKSl7dmFyIEU9e2dyaWQ6dGhpcyxyZWNvcmQ6QyxmaWVsZDpGLG9yaWdpbmFsVmFsdWU6QSx2YWx1ZTpELHJvdzpCLnJvdyxjb2x1bW46Qi5jb2wsY2FuY2VsOmZhbHNlfTtpZih0aGlzLmZpcmVFdmVudCgidmFsaWRhdGVlZGl0IixFKSE9PWZhbHNlJiYhRS5jYW5jZWwpe0Muc2V0KEYsRS52YWx1ZSk7ZGVsZXRlIEUuY2FuY2VsO3RoaXMuZmlyZUV2ZW50KCJhZnRlcmVkaXQiLEUpfX10aGlzLnZpZXcuZm9jdXNDZWxsKEIucm93LEIuY29sKX0sc3RhcnRFZGl0aW5nOmZ1bmN0aW9uKEYsQil7dGhpcy5zdG9wRWRpdGluZygpO2lmKHRoaXMuY29sTW9kZWwuaXNDZWxsRWRpdGFibGUoQixGKSl7dGhpcy52aWV3LmVuc3VyZVZpc2libGUoRixCLHRydWUpO3ZhciBDPXRoaXMuc3RvcmUuZ2V0QXQoRik7dmFyIEU9dGhpcy5jb2xNb2RlbC5nZXREYXRhSW5kZXgoQik7dmFyIEQ9e2dyaWQ6dGhpcyxyZWNvcmQ6QyxmaWVsZDpFLHZhbHVlOkMuZGF0YVtFXSxyb3c6Rixjb2x1bW46QixjYW5jZWw6ZmFsc2V9O2lmKHRoaXMuZmlyZUV2ZW50KCJiZWZvcmVlZGl0IixEKSE9PWZhbHNlJiYhRC5jYW5jZWwpe3RoaXMuZWRpdGluZz10cnVlO3ZhciBBPXRoaXMuY29sTW9kZWwuZ2V0Q2VsbEVkaXRvcihCLEYpO2lmKCFBLnJlbmRlcmVkKXtBLnJlbmRlcih0aGlzLnZpZXcuZ2V0RWRpdG9yUGFyZW50KEEpKX0oZnVuY3Rpb24oKXtBLnJvdz1GO0EuY29sPUI7QS5yZWNvcmQ9QztBLm9uKCJjb21wbGV0ZSIsdGhpcy5vbkVkaXRDb21wbGV0ZSx0aGlzLHtzaW5nbGU6dHJ1ZX0pO0Eub24oInNwZWNpYWxrZXkiLHRoaXMuc2VsTW9kZWwub25FZGl0b3JLZXksdGhpcy5zZWxNb2RlbCk7dGhpcy5hY3RpdmVFZGl0b3I9QTt2YXIgRz10aGlzLnByZUVkaXRWYWx1ZShDLEUpO0Euc3RhcnRFZGl0KHRoaXMudmlldy5nZXRDZWxsKEYsQiksRyl9KS5kZWZlcig1MCx0aGlzKX19fSxwcmVFZGl0VmFsdWU6ZnVuY3Rpb24oQSxCKXtyZXR1cm4gdGhpcy5hdXRvRW5jb2RlJiZ0eXBlb2YgdmFsdWU9PSJzdHJpbmciP0V4dC51dGlsLkZvcm1hdC5odG1sRGVjb2RlKEEuZGF0YVtCXSk6QS5kYXRhW0JdfSxwb3N0RWRpdFZhbHVlOmZ1bmN0aW9uKEMsQSxCLEQpe3JldHVybiB0aGlzLmF1dG9FbmNvZGUmJnR5cGVvZiBDPT0ic3RyaW5nIj9FeHQudXRpbC5Gb3JtYXQuaHRtbEVuY29kZShDKTpDfSxzdG9wRWRpdGluZzpmdW5jdGlvbihBKXtpZih0aGlzLmFjdGl2ZUVkaXRvcil7dGhpcy5hY3RpdmVFZGl0b3JbQT09PXRydWU/ImNhbmNlbEVkaXQiOiJjb21wbGV0ZUVkaXQiXSgpfXRoaXMuYWN0aXZlRWRpdG9yPW51bGx9fSk7RXh0LnJlZygiZWRpdG9yZ3JpZCIsRXh0LmdyaWQuRWRpdG9yR3JpZFBhbmVsKTsNCkV4dC5ncmlkLkdyaWRFZGl0b3I9ZnVuY3Rpb24oQixBKXtFeHQuZ3JpZC5HcmlkRWRpdG9yLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLEIsQSk7Qi5tb25pdG9yVGFiPWZhbHNlfTtFeHQuZXh0ZW5kKEV4dC5ncmlkLkdyaWRFZGl0b3IsRXh0LkVkaXRvcix7YWxpZ25tZW50OiJ0bC10bCIsYXV0b1NpemU6IndpZHRoIixoaWRlRWw6ZmFsc2UsY2xzOiJ4LXNtYWxsLWVkaXRvciB4LWdyaWQtZWRpdG9yIixzaGltOmZhbHNlLHNoYWRvdzpmYWxzZX0pOw0KRXh0LmdyaWQuUHJvcGVydHlSZWNvcmQ9RXh0LmRhdGEuUmVjb3JkLmNyZWF0ZShbe25hbWU6Im5hbWUiLHR5cGU6InN0cmluZyJ9LCJ2YWx1ZSJdKTtFeHQuZ3JpZC5Qcm9wZXJ0eVN0b3JlPWZ1bmN0aW9uKEEsQil7dGhpcy5ncmlkPUE7dGhpcy5zdG9yZT1uZXcgRXh0LmRhdGEuU3RvcmUoe3JlY29yZFR5cGU6RXh0LmdyaWQuUHJvcGVydHlSZWNvcmR9KTt0aGlzLnN0b3JlLm9uKCJ1cGRhdGUiLHRoaXMub25VcGRhdGUsdGhpcyk7aWYoQil7dGhpcy5zZXRTb3VyY2UoQil9RXh0LmdyaWQuUHJvcGVydHlTdG9yZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyl9O0V4dC5leHRlbmQoRXh0LmdyaWQuUHJvcGVydHlTdG9yZSxFeHQudXRpbC5PYnNlcnZhYmxlLHtzZXRTb3VyY2U6ZnVuY3Rpb24oQyl7dGhpcy5zb3VyY2U9Qzt0aGlzLnN0b3JlLnJlbW92ZUFsbCgpO3ZhciBCPVtdO2Zvcih2YXIgQSBpbiBDKXtpZih0aGlzLmlzRWRpdGFibGVWYWx1ZShDW0FdKSl7Qi5wdXNoKG5ldyBFeHQuZ3JpZC5Qcm9wZXJ0eVJlY29yZCh7bmFtZTpBLHZhbHVlOkNbQV19LEEpKX19dGhpcy5zdG9yZS5sb2FkUmVjb3Jkcyh7cmVjb3JkczpCfSx7fSx0cnVlKX0sb25VcGRhdGU6ZnVuY3Rpb24oRSxBLEQpe2lmKEQ9PUV4dC5kYXRhLlJlY29yZC5FRElUKXt2YXIgQj1BLmRhdGFbInZhbHVlIl07dmFyIEM9QS5tb2RpZmllZFsidmFsdWUiXTtpZih0aGlzLmdyaWQuZmlyZUV2ZW50KCJiZWZvcmVwcm9wZXJ0eWNoYW5nZSIsdGhpcy5zb3VyY2UsQS5pZCxCLEMpIT09ZmFsc2Upe3RoaXMuc291cmNlW0EuaWRdPUI7QS5jb21taXQoKTt0aGlzLmdyaWQuZmlyZUV2ZW50KCJwcm9wZXJ0eWNoYW5nZSIsdGhpcy5zb3VyY2UsQS5pZCxCLEMpfWVsc2V7QS5yZWplY3QoKX19fSxnZXRQcm9wZXJ0eTpmdW5jdGlvbihBKXtyZXR1cm4gdGhpcy5zdG9yZS5nZXRBdChBKX0saXNFZGl0YWJsZVZhbHVlOmZ1bmN0aW9uKEEpe2lmKEV4dC5pc0RhdGUoQSkpe3JldHVybiB0cnVlfWVsc2V7aWYodHlwZW9mIEE9PSJvYmplY3QifHx0eXBlb2YgQT09ImZ1bmN0aW9uIil7cmV0dXJuIGZhbHNlfX1yZXR1cm4gdHJ1ZX0sc2V0VmFsdWU6ZnVuY3Rpb24oQixBKXt0aGlzLnNvdXJjZVtCXT1BO3RoaXMuc3RvcmUuZ2V0QnlJZChCKS5zZXQoInZhbHVlIixBKX0sZ2V0U291cmNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc291cmNlfX0pO0V4dC5ncmlkLlByb3BlcnR5Q29sdW1uTW9kZWw9ZnVuY3Rpb24oQyxCKXt0aGlzLmdyaWQ9Qzt2YXIgRD1FeHQuZ3JpZDtELlByb3BlcnR5Q29sdW1uTW9kZWwuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsW3toZWFkZXI6dGhpcy5uYW1lVGV4dCx3aWR0aDo1MCxzb3J0YWJsZTp0cnVlLGRhdGFJbmRleDoibmFtZSIsaWQ6Im5hbWUiLG1lbnVEaXNhYmxlZDp0cnVlfSx7aGVhZGVyOnRoaXMudmFsdWVUZXh0LHdpZHRoOjUwLHJlc2l6YWJsZTpmYWxzZSxkYXRhSW5kZXg6InZhbHVlIixpZDoidmFsdWUiLG1lbnVEaXNhYmxlZDp0cnVlfV0pO3RoaXMuc3RvcmU9Qjt0aGlzLmJzZWxlY3Q9RXh0LkRvbUhlbHBlci5hcHBlbmQoZG9jdW1lbnQuYm9keSx7dGFnOiJzZWxlY3QiLGNsczoieC1ncmlkLWVkaXRvciB4LWhpZGUtZGlzcGxheSIsY2hpbGRyZW46W3t0YWc6Im9wdGlvbiIsdmFsdWU6InRydWUiLGh0bWw6InRydWUifSx7dGFnOiJvcHRpb24iLHZhbHVlOiJmYWxzZSIsaHRtbDoiZmFsc2UifV19KTt2YXIgRT1FeHQuZm9ybTt2YXIgQT1uZXcgRS5GaWVsZCh7ZWw6dGhpcy5ic2VsZWN0LGJzZWxlY3Q6dGhpcy5ic2VsZWN0LGF1dG9TaG93OnRydWUsZ2V0VmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ic2VsZWN0LnZhbHVlPT0idHJ1ZSJ9fSk7dGhpcy5lZGl0b3JzPXsiZGF0ZSI6bmV3IEQuR3JpZEVkaXRvcihuZXcgRS5EYXRlRmllbGQoe3NlbGVjdE9uRm9jdXM6dHJ1ZX0pKSwic3RyaW5nIjpuZXcgRC5HcmlkRWRpdG9yKG5ldyBFLlRleHRGaWVsZCh7c2VsZWN0T25Gb2N1czp0cnVlfSkpLCJudW1iZXIiOm5ldyBELkdyaWRFZGl0b3IobmV3IEUuTnVtYmVyRmllbGQoe3NlbGVjdE9uRm9jdXM6dHJ1ZSxzdHlsZToidGV4dC1hbGlnbjpsZWZ0OyJ9KSksImJvb2xlYW4iOm5ldyBELkdyaWRFZGl0b3IoQSl9O3RoaXMucmVuZGVyQ2VsbERlbGVnYXRlPXRoaXMucmVuZGVyQ2VsbC5jcmVhdGVEZWxlZ2F0ZSh0aGlzKTt0aGlzLnJlbmRlclByb3BEZWxlZ2F0ZT10aGlzLnJlbmRlclByb3AuY3JlYXRlRGVsZWdhdGUodGhpcyl9O0V4dC5leHRlbmQoRXh0LmdyaWQuUHJvcGVydHlDb2x1bW5Nb2RlbCxFeHQuZ3JpZC5Db2x1bW5Nb2RlbCx7bmFtZVRleHQ6Ik5hbWUiLHZhbHVlVGV4dDoiVmFsdWUiLGRhdGVGb3JtYXQ6Im0vai9ZIixyZW5kZXJEYXRlOmZ1bmN0aW9uKEEpe3JldHVybiBBLmRhdGVGb3JtYXQodGhpcy5kYXRlRm9ybWF0KX0scmVuZGVyQm9vbDpmdW5jdGlvbihBKXtyZXR1cm4gQT8idHJ1ZSI6ImZhbHNlIn0saXNDZWxsRWRpdGFibGU6ZnVuY3Rpb24oQSxCKXtyZXR1cm4gQT09MX0sZ2V0UmVuZGVyZXI6ZnVuY3Rpb24oQSl7cmV0dXJuIEE9PTE/dGhpcy5yZW5kZXJDZWxsRGVsZWdhdGU6dGhpcy5yZW5kZXJQcm9wRGVsZWdhdGV9LHJlbmRlclByb3A6ZnVuY3Rpb24oQSl7cmV0dXJuIHRoaXMuZ2V0UHJvcGVydHlOYW1lKEEpfSxyZW5kZXJDZWxsOmZ1bmN0aW9uKEEpe3ZhciBCPUE7aWYoRXh0LmlzRGF0ZShBKSl7Qj10aGlzLnJlbmRlckRhdGUoQSl9ZWxzZXtpZih0eXBlb2YgQT09ImJvb2xlYW4iKXtCPXRoaXMucmVuZGVyQm9vbChBKX19cmV0dXJuIEV4dC51dGlsLkZvcm1hdC5odG1sRW5jb2RlKEIpfSxnZXRQcm9wZXJ0eU5hbWU6ZnVuY3Rpb24oQil7dmFyIEE9dGhpcy5ncmlkLnByb3BlcnR5TmFtZXM7cmV0dXJuIEEmJkFbQl0/QVtCXTpCfSxnZXRDZWxsRWRpdG9yOmZ1bmN0aW9uKEEsRSl7dmFyIEI9dGhpcy5zdG9yZS5nZXRQcm9wZXJ0eShFKTt2YXIgRD1CLmRhdGFbIm5hbWUiXSxDPUIuZGF0YVsidmFsdWUiXTtpZih0aGlzLmdyaWQuY3VzdG9tRWRpdG9yc1tEXSl7cmV0dXJuIHRoaXMuZ3JpZC5jdXN0b21FZGl0b3JzW0RdfWlmKEV4dC5pc0RhdGUoQykpe3JldHVybiB0aGlzLmVkaXRvcnNbImRhdGUiXX1lbHNle2lmKHR5cGVvZiBDPT0ibnVtYmVyIil7cmV0dXJuIHRoaXMuZWRpdG9yc1sibnVtYmVyIl19ZWxzZXtpZih0eXBlb2YgQz09ImJvb2xlYW4iKXtyZXR1cm4gdGhpcy5lZGl0b3JzWyJib29sZWFuIl19ZWxzZXtyZXR1cm4gdGhpcy5lZGl0b3JzWyJzdHJpbmciXX19fX19KTtFeHQuZ3JpZC5Qcm9wZXJ0eUdyaWQ9RXh0LmV4dGVuZChFeHQuZ3JpZC5FZGl0b3JHcmlkUGFuZWwse2VuYWJsZUNvbHVtbk1vdmU6ZmFsc2Usc3RyaXBlUm93czpmYWxzZSx0cmFja01vdXNlT3ZlcjpmYWxzZSxjbGlja3NUb0VkaXQ6MSxlbmFibGVIZE1lbnU6ZmFsc2Usdmlld0NvbmZpZzp7Zm9yY2VGaXQ6dHJ1ZX0saW5pdENvbXBvbmVudDpmdW5jdGlvbigpe3RoaXMuY3VzdG9tRWRpdG9ycz10aGlzLmN1c3RvbUVkaXRvcnN8fHt9O3RoaXMubGFzdEVkaXRSb3c9bnVsbDt2YXIgQj1uZXcgRXh0LmdyaWQuUHJvcGVydHlTdG9yZSh0aGlzKTt0aGlzLnByb3BTdG9yZT1CO3ZhciBBPW5ldyBFeHQuZ3JpZC5Qcm9wZXJ0eUNvbHVtbk1vZGVsKHRoaXMsQik7Qi5zdG9yZS5zb3J0KCJuYW1lIiwiQVNDIik7dGhpcy5hZGRFdmVudHMoImJlZm9yZXByb3BlcnR5Y2hhbmdlIiwicHJvcGVydHljaGFuZ2UiKTt0aGlzLmNtPUE7dGhpcy5kcz1CLnN0b3JlO0V4dC5ncmlkLlByb3BlcnR5R3JpZC5zdXBlcmNsYXNzLmluaXRDb21wb25lbnQuY2FsbCh0aGlzKTt0aGlzLnNlbE1vZGVsLm9uKCJiZWZvcmVjZWxsc2VsZWN0IixmdW5jdGlvbihFLEQsQyl7aWYoQz09PTApe3RoaXMuc3RhcnRFZGl0aW5nLmRlZmVyKDIwMCx0aGlzLFtELDFdKTtyZXR1cm4gZmFsc2V9fSx0aGlzKX0sb25SZW5kZXI6ZnVuY3Rpb24oKXtFeHQuZ3JpZC5Qcm9wZXJ0eUdyaWQuc3VwZXJjbGFzcy5vblJlbmRlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5nZXRHcmlkRWwoKS5hZGRDbGFzcygieC1wcm9wcy1ncmlkIil9LGFmdGVyUmVuZGVyOmZ1bmN0aW9uKCl7RXh0LmdyaWQuUHJvcGVydHlHcmlkLnN1cGVyY2xhc3MuYWZ0ZXJSZW5kZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKHRoaXMuc291cmNlKXt0aGlzLnNldFNvdXJjZSh0aGlzLnNvdXJjZSl9fSxzZXRTb3VyY2U6ZnVuY3Rpb24oQSl7dGhpcy5wcm9wU3RvcmUuc2V0U291cmNlKEEpfSxnZXRTb3VyY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm9wU3RvcmUuZ2V0U291cmNlKCl9fSk7DQpFeHQuZ3JpZC5Sb3dOdW1iZXJlcj1mdW5jdGlvbihBKXtFeHQuYXBwbHkodGhpcyxBKTtpZih0aGlzLnJvd3NwYW4pe3RoaXMucmVuZGVyZXI9dGhpcy5yZW5kZXJlci5jcmVhdGVEZWxlZ2F0ZSh0aGlzKX19O0V4dC5ncmlkLlJvd051bWJlcmVyLnByb3RvdHlwZT17aGVhZGVyOiIiLHdpZHRoOjIzLHNvcnRhYmxlOmZhbHNlLGZpeGVkOnRydWUsbWVudURpc2FibGVkOnRydWUsZGF0YUluZGV4OiIiLGlkOiJudW1iZXJlciIscm93c3Bhbjp1bmRlZmluZWQscmVuZGVyZXI6ZnVuY3Rpb24oQixDLEEsRCl7aWYodGhpcy5yb3dzcGFuKXtDLmNlbGxBdHRyPSJyb3dzcGFuPVwiIit0aGlzLnJvd3NwYW4rIlwiIn1yZXR1cm4gRCsxfX07DQpFeHQuZ3JpZC5DaGVja2JveFNlbGVjdGlvbk1vZGVsPUV4dC5leHRlbmQoRXh0LmdyaWQuUm93U2VsZWN0aW9uTW9kZWwse2hlYWRlcjoiPGRpdiBjbGFzcz1cIngtZ3JpZDMtaGQtY2hlY2tlclwiPiYjMTYwOzwvZGl2PiIsd2lkdGg6MjAsc29ydGFibGU6ZmFsc2UsbWVudURpc2FibGVkOnRydWUsZml4ZWQ6dHJ1ZSxkYXRhSW5kZXg6IiIsaWQ6ImNoZWNrZXIiLGluaXRFdmVudHM6ZnVuY3Rpb24oKXtFeHQuZ3JpZC5DaGVja2JveFNlbGVjdGlvbk1vZGVsLnN1cGVyY2xhc3MuaW5pdEV2ZW50cy5jYWxsKHRoaXMpO3RoaXMuZ3JpZC5vbigicmVuZGVyIixmdW5jdGlvbigpe3ZhciBBPXRoaXMuZ3JpZC5nZXRWaWV3KCk7QS5tYWluQm9keS5vbigibW91c2Vkb3duIix0aGlzLm9uTW91c2VEb3duLHRoaXMpO0V4dC5mbHkoQS5pbm5lckhkKS5vbigibW91c2Vkb3duIix0aGlzLm9uSGRNb3VzZURvd24sdGhpcyl9LHRoaXMpfSxvbk1vdXNlRG93bjpmdW5jdGlvbihDLEIpe2lmKEMuYnV0dG9uPT09MCYmQi5jbGFzc05hbWU9PSJ4LWdyaWQzLXJvdy1jaGVja2VyIil7Qy5zdG9wRXZlbnQoKTt2YXIgRD1DLmdldFRhcmdldCgiLngtZ3JpZDMtcm93Iik7aWYoRCl7dmFyIEE9RC5yb3dJbmRleDtpZih0aGlzLmlzU2VsZWN0ZWQoQSkpe3RoaXMuZGVzZWxlY3RSb3coQSl9ZWxzZXt0aGlzLnNlbGVjdFJvdyhBLHRydWUpfX19fSxvbkhkTW91c2VEb3duOmZ1bmN0aW9uKEMsQSl7aWYoQS5jbGFzc05hbWU9PSJ4LWdyaWQzLWhkLWNoZWNrZXIiKXtDLnN0b3BFdmVudCgpO3ZhciBCPUV4dC5mbHkoQS5wYXJlbnROb2RlKTt2YXIgRD1CLmhhc0NsYXNzKCJ4LWdyaWQzLWhkLWNoZWNrZXItb24iKTtpZihEKXtCLnJlbW92ZUNsYXNzKCJ4LWdyaWQzLWhkLWNoZWNrZXItb24iKTt0aGlzLmNsZWFyU2VsZWN0aW9ucygpfWVsc2V7Qi5hZGRDbGFzcygieC1ncmlkMy1oZC1jaGVja2VyLW9uIik7dGhpcy5zZWxlY3RBbGwoKX19fSxyZW5kZXJlcjpmdW5jdGlvbihCLEMsQSl7cmV0dXJuIjxkaXYgY2xhc3M9XCJ4LWdyaWQzLXJvdy1jaGVja2VyXCI+JiMxNjA7PC9kaXY+In19KTsNCkV4dC5Mb2FkTWFzaz1mdW5jdGlvbihDLEIpe3RoaXMuZWw9RXh0LmdldChDKTtFeHQuYXBwbHkodGhpcyxCKTtpZih0aGlzLnN0b3JlKXt0aGlzLnN0b3JlLm9uKCJiZWZvcmVsb2FkIix0aGlzLm9uQmVmb3JlTG9hZCx0aGlzKTt0aGlzLnN0b3JlLm9uKCJsb2FkIix0aGlzLm9uTG9hZCx0aGlzKTt0aGlzLnN0b3JlLm9uKCJsb2FkZXhjZXB0aW9uIix0aGlzLm9uTG9hZCx0aGlzKTt0aGlzLnJlbW92ZU1hc2s9RXh0LnZhbHVlKHRoaXMucmVtb3ZlTWFzayxmYWxzZSl9ZWxzZXt2YXIgQT10aGlzLmVsLmdldFVwZGF0ZXIoKTtBLnNob3dMb2FkSW5kaWNhdG9yPWZhbHNlO0Eub24oImJlZm9yZXVwZGF0ZSIsdGhpcy5vbkJlZm9yZUxvYWQsdGhpcyk7QS5vbigidXBkYXRlIix0aGlzLm9uTG9hZCx0aGlzKTtBLm9uKCJmYWlsdXJlIix0aGlzLm9uTG9hZCx0aGlzKTt0aGlzLnJlbW92ZU1hc2s9RXh0LnZhbHVlKHRoaXMucmVtb3ZlTWFzayx0cnVlKX19O0V4dC5Mb2FkTWFzay5wcm90b3R5cGU9e21zZzoiTG9hZGluZy4uLiIsbXNnQ2xzOiJ4LW1hc2stbG9hZGluZyIsZGlzYWJsZWQ6ZmFsc2UsZGlzYWJsZTpmdW5jdGlvbigpe3RoaXMuZGlzYWJsZWQ9dHJ1ZX0sZW5hYmxlOmZ1bmN0aW9uKCl7dGhpcy5kaXNhYmxlZD1mYWxzZX0sb25Mb2FkOmZ1bmN0aW9uKCl7dGhpcy5lbC51bm1hc2sodGhpcy5yZW1vdmVNYXNrKX0sb25CZWZvcmVMb2FkOmZ1bmN0aW9uKCl7aWYoIXRoaXMuZGlzYWJsZWQpe3RoaXMuZWwubWFzayh0aGlzLm1zZyx0aGlzLm1zZ0Nscyl9fSxzaG93OmZ1bmN0aW9uKCl7dGhpcy5vbkJlZm9yZUxvYWQoKX0saGlkZTpmdW5jdGlvbigpe3RoaXMub25Mb2FkKCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtpZih0aGlzLnN0b3JlKXt0aGlzLnN0b3JlLnVuKCJiZWZvcmVsb2FkIix0aGlzLm9uQmVmb3JlTG9hZCx0aGlzKTt0aGlzLnN0b3JlLnVuKCJsb2FkIix0aGlzLm9uTG9hZCx0aGlzKTt0aGlzLnN0b3JlLnVuKCJsb2FkZXhjZXB0aW9uIix0aGlzLm9uTG9hZCx0aGlzKX1lbHNle3ZhciBBPXRoaXMuZWwuZ2V0VXBkYXRlcigpO0EudW4oImJlZm9yZXVwZGF0ZSIsdGhpcy5vbkJlZm9yZUxvYWQsdGhpcyk7QS51bigidXBkYXRlIix0aGlzLm9uTG9hZCx0aGlzKTtBLnVuKCJmYWlsdXJlIix0aGlzLm9uTG9hZCx0aGlzKX19fTsNCkV4dC5Qcm9ncmVzc0Jhcj1FeHQuZXh0ZW5kKEV4dC5Cb3hDb21wb25lbnQse2Jhc2VDbHM6IngtcHJvZ3Jlc3MiLHdhaXRUaW1lcjpudWxsLGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXtFeHQuUHJvZ3Jlc3NCYXIuc3VwZXJjbGFzcy5pbml0Q29tcG9uZW50LmNhbGwodGhpcyk7dGhpcy5hZGRFdmVudHMoInVwZGF0ZSIpfSxvblJlbmRlcjpmdW5jdGlvbihELEEpe0V4dC5Qcm9ncmVzc0Jhci5zdXBlcmNsYXNzLm9uUmVuZGVyLmNhbGwodGhpcyxELEEpO3ZhciBDPW5ldyBFeHQuVGVtcGxhdGUoIjxkaXYgY2xhc3M9XCJ7Y2xzfS13cmFwXCI+IiwiPGRpdiBjbGFzcz1cIntjbHN9LWlubmVyXCI+IiwiPGRpdiBjbGFzcz1cIntjbHN9LWJhclwiPiIsIjxkaXYgY2xhc3M9XCJ7Y2xzfS10ZXh0XCI+IiwiPGRpdj4mIzE2MDs8L2Rpdj4iLCI8L2Rpdj4iLCI8L2Rpdj4iLCI8ZGl2IGNsYXNzPVwie2Nsc30tdGV4dCB7Y2xzfS10ZXh0LWJhY2tcIj4iLCI8ZGl2PiYjMTYwOzwvZGl2PiIsIjwvZGl2PiIsIjwvZGl2PiIsIjwvZGl2PiIpO2lmKEEpe3RoaXMuZWw9Qy5pbnNlcnRCZWZvcmUoQSx7Y2xzOnRoaXMuYmFzZUNsc30sdHJ1ZSl9ZWxzZXt0aGlzLmVsPUMuYXBwZW5kKEQse2Nsczp0aGlzLmJhc2VDbHN9LHRydWUpfWlmKHRoaXMuaWQpe3RoaXMuZWwuZG9tLmlkPXRoaXMuaWR9dmFyIEI9dGhpcy5lbC5kb20uZmlyc3RDaGlsZDt0aGlzLnByb2dyZXNzQmFyPUV4dC5nZXQoQi5maXJzdENoaWxkKTtpZih0aGlzLnRleHRFbCl7dGhpcy50ZXh0RWw9RXh0LmdldCh0aGlzLnRleHRFbCk7ZGVsZXRlIHRoaXMudGV4dFRvcEVsfWVsc2V7dGhpcy50ZXh0VG9wRWw9RXh0LmdldCh0aGlzLnByb2dyZXNzQmFyLmRvbS5maXJzdENoaWxkKTt2YXIgRT1FeHQuZ2V0KEIuY2hpbGROb2Rlc1sxXSk7dGhpcy50ZXh0VG9wRWwuc2V0U3R5bGUoInotaW5kZXgiLDk5KS5hZGRDbGFzcygieC1oaWRkZW4iKTt0aGlzLnRleHRFbD1uZXcgRXh0LkNvbXBvc2l0ZUVsZW1lbnQoW3RoaXMudGV4dFRvcEVsLmRvbS5maXJzdENoaWxkLEUuZG9tLmZpcnN0Q2hpbGRdKTt0aGlzLnRleHRFbC5zZXRXaWR0aChCLm9mZnNldFdpZHRoKX1pZih0aGlzLnZhbHVlKXt0aGlzLnVwZGF0ZVByb2dyZXNzKHRoaXMudmFsdWUsdGhpcy50ZXh0KX1lbHNle3RoaXMudXBkYXRlVGV4dCh0aGlzLnRleHQpfXRoaXMuc2V0U2l6ZSh0aGlzLndpZHRofHwiYXV0byIsImF1dG8iKTt0aGlzLnByb2dyZXNzQmFyLnNldEhlaWdodChCLm9mZnNldEhlaWdodCl9LHVwZGF0ZVByb2dyZXNzOmZ1bmN0aW9uKEIsQyl7dGhpcy52YWx1ZT1CfHwwO2lmKEMpe3RoaXMudXBkYXRlVGV4dChDKX12YXIgQT1NYXRoLmZsb29yKEIqdGhpcy5lbC5kb20uZmlyc3RDaGlsZC5vZmZzZXRXaWR0aCk7dGhpcy5wcm9ncmVzc0Jhci5zZXRXaWR0aChBKTtpZih0aGlzLnRleHRUb3BFbCl7dGhpcy50ZXh0VG9wRWwucmVtb3ZlQ2xhc3MoIngtaGlkZGVuIikuc2V0V2lkdGgoQSl9dGhpcy5maXJlRXZlbnQoInVwZGF0ZSIsdGhpcyxCLEMpO3JldHVybiB0aGlzfSx3YWl0OmZ1bmN0aW9uKEIpe2lmKCF0aGlzLndhaXRUaW1lcil7dmFyIEE9dGhpcztCPUJ8fHt9O3RoaXMud2FpdFRpbWVyPUV4dC5UYXNrTWdyLnN0YXJ0KHtydW46ZnVuY3Rpb24oQyl7dmFyIEQ9Qi5pbmNyZW1lbnR8fDEwO3RoaXMudXBkYXRlUHJvZ3Jlc3MoKCgoKEMrRCklRCkrMSkqKDEwMC9EKSkqMC4wMSl9LGludGVydmFsOkIuaW50ZXJ2YWx8fDEwMDAsZHVyYXRpb246Qi5kdXJhdGlvbixvblN0b3A6ZnVuY3Rpb24oKXtpZihCLmZuKXtCLmZuLmFwcGx5KEIuc2NvcGV8fHRoaXMpfXRoaXMucmVzZXQoKX0sc2NvcGU6QX0pfXJldHVybiB0aGlzfSxpc1dhaXRpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53YWl0VGltZXIhPW51bGx9LHVwZGF0ZVRleHQ6ZnVuY3Rpb24oQSl7dGhpcy50ZXh0PUF8fCImIzE2MDsiO3RoaXMudGV4dEVsLnVwZGF0ZSh0aGlzLnRleHQpO3JldHVybiB0aGlzfSxzZXRTaXplOmZ1bmN0aW9uKEEsQyl7RXh0LlByb2dyZXNzQmFyLnN1cGVyY2xhc3Muc2V0U2l6ZS5jYWxsKHRoaXMsQSxDKTtpZih0aGlzLnRleHRUb3BFbCl7dmFyIEI9dGhpcy5lbC5kb20uZmlyc3RDaGlsZDt0aGlzLnRleHRFbC5zZXRTaXplKEIub2Zmc2V0V2lkdGgsQi5vZmZzZXRIZWlnaHQpfXJldHVybiB0aGlzfSxyZXNldDpmdW5jdGlvbihBKXt0aGlzLnVwZGF0ZVByb2dyZXNzKDApO2lmKHRoaXMudGV4dFRvcEVsKXt0aGlzLnRleHRUb3BFbC5hZGRDbGFzcygieC1oaWRkZW4iKX1pZih0aGlzLndhaXRUaW1lcil7dGhpcy53YWl0VGltZXIub25TdG9wPW51bGw7RXh0LlRhc2tNZ3Iuc3RvcCh0aGlzLndhaXRUaW1lcik7dGhpcy53YWl0VGltZXI9bnVsbH1pZihBPT09dHJ1ZSl7dGhpcy5oaWRlKCl9cmV0dXJuIHRoaXN9fSk7RXh0LnJlZygicHJvZ3Jlc3MiLEV4dC5Qcm9ncmVzc0Jhcik7DQoNCmZ1bmN0aW9uIGNvbXBhcmVWYWx1ZUJ5VHlwZSh2MSx2Mil7DQoJcmV0dXJuIHYxID4gdjIgPyAxIDogKHYxIDwgdjIgPyAtMSA6IDApOw0KfQ0KDQo=</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
      <TcpPackets>
        <PacketInfo time="1030041453" offset="0" length="600" />
        <PacketInfo time="1030041453" offset="600" length="136702" />
      </TcpPackets>
    </HTTPResponse>
  </HTTPTask>
</HTTPSnapshot>