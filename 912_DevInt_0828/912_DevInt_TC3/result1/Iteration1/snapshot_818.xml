<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="818">
  <HTTPTask id="820" hostname="aa-pt6245.dev.accela.com:5443" path="/portlets/commons/education/education.js" url="https://aa-pt6245.dev.accela.com:5443/portlets/commons/education/education.js" ip="13.93.163.237" port="5443" client_ip="10.1.61.63" client_port="9074" connectionId="1988" origin="Primary" startDateTime="2017-08-28T11:27:53.731-07:00" startTime="34520" endTime="34534" sendTime="12" waitTime="0" receiveTime="2">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Referer" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cHM6Ly9hYS1wdDYyNDUuZGV2LmFjY2VsYS5jb206NTQ0My9wb3J0bGV0cy9jb250YWN0L3JlZi9yZWZDb250YWN0TGlzdC5kbz92YWx1ZShtb2RlKT1zZWFyY2gmdmFsdWUobG9va3VwKT1mYWxzZSZ2YWx1ZSh1c2VkUXVlcnlJbmZvKT1ZJm1vZHVsZT1CdWlsZGluZw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YWEtcHQ2MjQ1LmRldi5hY2NlbGEuY29tOjU0NDM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cookie" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SlNFU1NJT05JRD00MGtvRFN6KzRwMmQtb1pxeklzZEtQKzA7IEpTRVNTSU9OSUQ9KioqKioqKioqKioqKioqKioqKioqKioqKioqOyBMQVNURVNUX1JFUVVFU1RfVElNRT0xNTAzOTQ0ODcxMzI3OyBob3N0U2lnbk9uPXRydWU7IGdfY3VycmVudF9sYW5ndWFnZV9leHQ9ZW5fVVM7IExBVEVTVF9XRUJfU0VSVkVSPTEwLjEuMC42OyBMQVRFU1RfU0VTU0lPTl9JRD00MGtvRFN6KzRwMmQtb1pxeklzZEtQKzA7IEFDQXV0aD01OTE0OTEyOTg2ODMwNjI5Nzk0NDY0NDQwMzgyMTU3NzkyMTI2MjUwNjc1ODQ1MzcyNTUxNDk2MjI0MzY1NTg1MDIwODAwMjcwNTUxNjQyMjQ2MTExMDI1MTI3NjAwODgxNTA5MzQwMTM4NzM2NTQzMzQ5MzA4OTgzNDE1MDYyMTsgQUNTaWduT25Nb2R1bGU9U1NPU3RhbmRhcmQ7IEFBUGVyc2lzdExvZ2luU2VydlByb3ZDb2RlPUZMQUdTVEFGRjsgTG9naW5TZXJ2UHJvdkNvZGU0TXVsdGlBZ2VuY3k9RkxBR1NUQUZGOyBMb2dpblVzZXJuYW1lNE11bHRpQWdlbmN5PTE3OUREMTNBMTg2MDI4RjQ7IEFDU2lnbm9mZj0iaHR0cHM6Ly9hYS1wdDYyNDUuZGV2LmFjY2VsYS5jb206NTQ0My9wb3J0bGV0cy9zZWN1cml0eS9zaWdub3V0LmRvIjsgQUNTd2l0Y2hBZ2VuY3k9Imh0dHBzOi8vYWEtcHQ2MjQ1LmRldi5hY2NlbGEuY29tOjU0NDMvcG9ydGxldHMvY29tbW9ucy9zc28vYmxhbmsuanNwIg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="If-Modified-Since" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VGh1LCAyOSBKdW4gMjAxNyAxNDozODoxOCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="If-None-Match" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Vy8iMTA0NS0xNDk4NzQ3MDk4MDAwIg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC9wb3J0bGV0cy9jb21tb25zL2VkdWNhdGlvbi9lZHVjYXRpb24uanMgSFRUUC8xLjENClJlZmVyZXI6IGh0dHBzOi8vYWEtcHQ2MjQ1LmRldi5hY2NlbGEuY29tOjU0NDMvcG9ydGxldHMvY29udGFjdC9yZWYvcmVmQ29udGFjdExpc3QuZG8/dmFsdWUobW9kZSk9c2VhcmNoJnZhbHVlKGxvb2t1cCk9ZmFsc2UmdmFsdWUodXNlZFF1ZXJ5SW5mbyk9WSZtb2R1bGU9QnVpbGRpbmcNClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdPVzY0OyBUcmlkZW50LzcuMDsgcnY6MTEuMCkgbGlrZSBHZWNrbw0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTDQpBY2NlcHQ6ICovKg0KQ29ubmVjdGlvbjogS2VlcC1BbGl2ZQ0KSG9zdDogYWEtcHQ2MjQ1LmRldi5hY2NlbGEuY29tOjU0NDMNCkNvb2tpZTogSlNFU1NJT05JRD00MGtvRFN6KzRwMmQtb1pxeklzZEtQKzA7IEpTRVNTSU9OSUQ9KioqKioqKioqKioqKioqKioqKioqKioqKioqOyBMQVNURVNUX1JFUVVFU1RfVElNRT0xNTAzOTQ0ODcxMzI3OyBob3N0U2lnbk9uPXRydWU7IGdfY3VycmVudF9sYW5ndWFnZV9leHQ9ZW5fVVM7IExBVEVTVF9XRUJfU0VSVkVSPTEwLjEuMC42OyBMQVRFU1RfU0VTU0lPTl9JRD00MGtvRFN6KzRwMmQtb1pxeklzZEtQKzA7IEFDQXV0aD01OTE0OTEyOTg2ODMwNjI5Nzk0NDY0NDQwMzgyMTU3NzkyMTI2MjUwNjc1ODQ1MzcyNTUxNDk2MjI0MzY1NTg1MDIwODAwMjcwNTUxNjQyMjQ2MTExMDI1MTI3NjAwODgxNTA5MzQwMTM4NzM2NTQzMzQ5MzA4OTgzNDE1MDYyMTsgQUNTaWduT25Nb2R1bGU9U1NPU3RhbmRhcmQ7IEFBUGVyc2lzdExvZ2luU2VydlByb3ZDb2RlPUZMQUdTVEFGRjsgTG9naW5TZXJ2UHJvdkNvZGU0TXVsdGlBZ2VuY3k9RkxBR1NUQUZGOyBMb2dpblVzZXJuYW1lNE11bHRpQWdlbmN5PTE3OUREMTNBMTg2MDI4RjQ7IEFDU2lnbm9mZj0iaHR0cHM6Ly9hYS1wdDYyNDUuZGV2LmFjY2VsYS5jb206NTQ0My9wb3J0bGV0cy9zZWN1cml0eS9zaWdub3V0LmRvIjsgQUNTd2l0Y2hBZ2VuY3k9Imh0dHBzOi8vYWEtcHQ2MjQ1LmRldi5hY2NlbGEuY29tOjU0NDMvcG9ydGxldHMvY29tbW9ucy9zc28vYmxhbmsuanNwIg0KSWYtTW9kaWZpZWQtU2luY2U6IFRodSwgMjkgSnVuIDIwMTcgMTQ6Mzg6MTggR01UDQpJZi1Ob25lLU1hdGNoOiBXLyIxMDQ1LTE0OTg3NDcwOTgwMDAiDQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
        <HTTPCookies>
          <HTTPHeaderEntity name="JSESSIONID" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NDBrb0RTeis0cDJkLW9acXpJc2RLUCsw</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="JSESSIONID" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>KioqKioqKioqKioqKioqKioqKioqKioqKioq</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="LASTEST_REQUEST_TIME" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTUwMzk0NDg3MTMyNw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="hostSignOn" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dHJ1ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="g_current_language_ext" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW5fVVM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="LATEST_WEB_SERVER" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTAuMS4wLjY=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="LATEST_SESSION_ID" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NDBrb0RTeis0cDJkLW9acXpJc2RLUCsw</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ACAuth" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NTkxNDkxMjk4NjgzMDYyOTc5NDQ2NDQ0MDM4MjE1Nzc5MjEyNjI1MDY3NTg0NTM3MjU1MTQ5NjIyNDM2NTU4NTAyMDgwMDI3MDU1MTY0MjI0NjExMTAyNTEyNzYwMDg4MTUwOTM0MDEzODczNjU0MzM0OTMwODk4MzQxNTA2MjE=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ACSignOnModule" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>U1NPU3RhbmRhcmQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="AAPersistLoginServProvCode" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RkxBR1NUQUZG</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="LoginServProvCode4MultiAgency" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RkxBR1NUQUZG</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="LoginUsername4MultiAgency" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTc5REQxM0ExODYwMjhGNA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ACSignoff" index="12">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Imh0dHBzOi8vYWEtcHQ2MjQ1LmRldi5hY2NlbGEuY29tOjU0NDMvcG9ydGxldHMvc2VjdXJpdHkvc2lnbm91dC5kbyI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ACSwitchAgency" index="13">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Imh0dHBzOi8vYWEtcHQ2MjQ1LmRldi5hY2NlbGEuY29tOjU0NDMvcG9ydGxldHMvY29tbW9ucy9zc28vYmxhbmsuanNwIg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
        </HTTPCookies>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Server" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QXBhY2hlLUNveW90ZS8xLjE=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cache-Control" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>cHJpdmF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Expires" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMCBVVEM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-XSS-Protection" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Set-Cookie" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TEFTVEVTVF9SRVFVRVNUX1RJTUU9MTUwMzk0NDg3MTM0MzsgRG9tYWluPWRldi5hY2NlbGEuY29tOyBQYXRoPS87IFNlY3VyZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Set-Cookie" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TEFURVNUX1dFQl9TRVJWRVI9MTAuMS4wLjY7IERvbWFpbj1kZXYuYWNjZWxhLmNvbTsgUGF0aD0vOyBTZWN1cmU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Set-Cookie" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TEFURVNUX1NFU1NJT05fSUQ9NDBrb0RTeis0cDJkLW9acXpJc2RLUCswOyBEb21haW49ZGV2LmFjY2VsYS5jb207IFBhdGg9LzsgU2VjdXJl</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Vy8iODg0NDQtMTQ5ODc0NzEzNDAwMCI=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VGh1LCAyOSBKdW4gMjAxNyAxNDozODo1NCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Type" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>dGV4dC9qYXZhc2NyaXB0</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Transfer-Encoding" index="11">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Y2h1bmtlZA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Encoding" index="12">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Vary" index="13">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="14">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW9uLCAyOCBBdWcgMjAxNyAxODoyNzo1MCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIE9LDQpTZXJ2ZXI6IEFwYWNoZS1Db3lvdGUvMS4xDQpDYWNoZS1Db250cm9sOiBwcml2YXRlDQpFeHBpcmVzOiBUaHUsIDAxIEphbiAxOTcwIDAwOjAwOjAwIFVUQw0KWC1YU1MtUHJvdGVjdGlvbjogMA0KU2V0LUNvb2tpZTogTEFTVEVTVF9SRVFVRVNUX1RJTUU9MTUwMzk0NDg3MTM0MzsgRG9tYWluPWRldi5hY2NlbGEuY29tOyBQYXRoPS87IFNlY3VyZQ0KU2V0LUNvb2tpZTogTEFURVNUX1dFQl9TRVJWRVI9MTAuMS4wLjY7IERvbWFpbj1kZXYuYWNjZWxhLmNvbTsgUGF0aD0vOyBTZWN1cmUNClNldC1Db29raWU6IExBVEVTVF9TRVNTSU9OX0lEPTQwa29EU3orNHAyZC1vWnF6SXNkS1ArMDsgRG9tYWluPWRldi5hY2NlbGEuY29tOyBQYXRoPS87IFNlY3VyZQ0KQWNjZXB0LVJhbmdlczogYnl0ZXMNCkVUYWc6IFcvIjg4NDQ0LTE0OTg3NDcxMzQwMDAiDQpMYXN0LU1vZGlmaWVkOiBUaHUsIDI5IEp1biAyMDE3IDE0OjM4OjU0IEdNVA0KQ29udGVudC1UeXBlOiB0ZXh0L2phdmFzY3JpcHQNClRyYW5zZmVyLUVuY29kaW5nOiBjaHVua2VkDQpDb250ZW50LUVuY29kaW5nOiBnemlwDQpWYXJ5OiBBY2NlcHQtRW5jb2RpbmcNCkRhdGU6IE1vbiwgMjggQXVnIDIwMTcgMTg6Mjc6NTAgR01UDQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>LyoqDQogKiANCiAqIFYzNjAJIA0KICogRmlsZTogZWR1Y2F0aW9uLmpzDQogKiANCiAqIEFjY2VsYSwgSW5jLg0KICogQ29weXJpZ2h0IChDKTogMjAwOS0yMDE0DQogKiANCiAqIERlc2NyaXB0aW9uOg0KICogPDxHZW5lcmFsIGRlc2NyaXB0aW9uIG9mIHRoZSBjbGFzcz4+DQogKiANCiAqIE5vdGVzOg0KICogPDxTcGVjaWZpYyBwcm9ncmFtbWluZyBub3Rlcz4+DQogKiANCiAqIFJldmlzaW9uIEhpc3Rvcnk6DQogKiA8PERhdGU+PiwgPDxXaG8+PiwgPDxXaGF0Pj4NCiAqIDA3LzA5LzIwMDksIFJhaW4gV2FuZywgSW5pdGlhbCB2ZXJzaW9uDQogKg0KICovDQpmdW5jdGlvbiBpbnNlcnRBZGphY2VudChzcGNpZmljRWxlbWVudCkNCnsNCglzcGNpZmljRWxlbWVudC5pbnNlcnRBZGphY2VudEhUTUwoIkFmdGVyRW5kIiwiJm5ic3A7Jm5ic3A7Iik7DQp9DQoNCmZ1bmN0aW9uIGluaXRFbGVTdHlsZShpbnB1dEVsZW1lbnQpDQp7CQ0KCWlucHV0RWxlbWVudC5zdHlsZS5mb250U2l6ZSA9ICIxLjAzNGVtIjsNCglpbnB1dEVsZW1lbnQuc3R5bGUuY29sb3IgPSAiIzMzMzMzMyI7DQoJaW5wdXRFbGVtZW50LnN0eWxlLmZvbnRGYW1pbHkgPSAiVmVyZGFuYSwgQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZiI7DQoJcmVhZE9ubHlPYmoucmVzZXRSZWFkT25seShbaW5wdXRFbGVtZW50XSk7DQp9DQoNCmZ1bmN0aW9uIHJlbmRlclRleHQodGV4dFN0cixuYW1lLGxibFZhbCkNCnsNCgl2YXIgcmV0U3RyID0gJyc7DQoJaWYgKHRleHRTdHIpDQoJew0KCQlyZXRTdHIgPSAiPEZPTlQgIGNsYXNzPVwiRXJyb3JcIiBhaXItbGFiZWw9XCIiK2xibFZhbCsiXCIgYWlyLWZvcj1cIiIrbmFtZSsiXCIgYWlyLWVycm9yPVwidHJ1ZVwiPiIrdGV4dFN0cisiPC9GT05UPiI7DQoJfQ0KCXJldHVybiByZXRTdHI7DQp9DQoNCmZ1bmN0aW9uIHNob3dPckhpZGRlbk5vUmVjb3JkTXNnMih0YWJsZVJvd3Msbm9SZWNvcmRNc2dFbGVJZCkNCnsNCgl2YXIgbm9SZWNvcmRNc2dFbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChub1JlY29yZE1zZ0VsZUlkKTsJCQ0KCWlmIChub1JlY29yZE1zZ0VsZSkNCgl7DQoJCXZhciBub1JlY29yZE1zZ0VsZVN0eWxlID0gbm9SZWNvcmRNc2dFbGUuc3R5bGU7DQoJCWlmKG5vUmVjb3JkTXNnRWxlU3R5bGUuZGlzcGxheSA9PSAnbm9uZScgJiYgdGFibGVSb3dzLmxlbmd0aCA8IDMpDQoJCXsNCgkJCW5vUmVjb3JkTXNnRWxlU3R5bGUuZGlzcGxheSA9ICcnOw0KCQl9DQoJCWVsc2UgaWYgKG5vUmVjb3JkTXNnRWxlU3R5bGUuZGlzcGxheSAhPSAnbm9uZScgJiYgdGFibGVSb3dzLmxlbmd0aCA+IDIpDQoJCXsNCgkJCW5vUmVjb3JkTXNnRWxlU3R5bGUuZGlzcGxheSA9ICdub25lJzsNCgkJfQ0KCX0NCglyZXR1cm4gZmFsc2U7DQp9DQoNCmZ1bmN0aW9uIGFkZFN0YW5kYXJkQ29tbWVudDIoY21udFByZSxlZHVJbngsbGFibGVWYWwpDQp7DQoJDQoJLy9kZXRhaWx0ZW1wIGVsZW1lbnQgbmFtZSBpbmRleCBpcyAwLCBzbyByb3cxIGlzIGVkdUlueCArMS4NCgl2YXIgZWR1TmFtZUlueCA9IGVkdUlueCArMTsJDQoJdmFyIGNvbW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgidmFsdWUoIitjbW50UHJlKyJDb21tZW50cykiKVtlZHVOYW1lSW54XTsNCgl2YXIgZG9jVHlwZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJ2YWx1ZShkb2NUeXBlKSIpW2VkdU5hbWVJbnhdOw0KCXZhciBkb2NJZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJ2YWx1ZShkb2NJZCkiKVtlZHVOYW1lSW54XTsNCgl2YXIgY29tbWVudEltZyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKGNtbnRQcmUgKyAiU3RkQ29tbW50SW1nIilbZWR1TmFtZUlueF07DQogIGlmIChjb21tZW50ICYmIGNvbW1lbnRJbWcpIHsgLy8gQUFUSEVUQS0xNDMzDQoJCWNvbW1lbnQuaWQgPSAidmFsdWUoIitjbW50UHJlKyJDb21tZW50cyIrZWR1SW54KyIpIjsNCgkJZG9jVHlwZS5pZCA9ICJ2YWx1ZShkb2NUeXBlIitlZHVJbngrIikiOw0KCQlkb2NJZC5pZCA9ICJ2YWx1ZShkb2NJZCIrZWR1SW54KyIpIjsNCgkJaWYgKGNvbW1lbnQucmVhZE9ubHkpDQoJCXsNCgkJCWNvbW1lbnRJbWcuaW5zZXJ0QWRqYWNlbnRIVE1MKCJBZnRlckVuZCIsJzxmb250IGNsYXNzPSJpbnB1dGZpZWxkbGFiZWwiPicrbGFibGVWYWwrJzwvZm9udD4nKTsNCgkJfQ0KCQllbHNlDQoJCXsNCgkJCWNvbW1lbnRJbWcuaW5zZXJ0QWRqYWNlbnRIVE1MKCJBZnRlckVuZCIsJzxhIGlkPSInK2NtbnRQcmUrJ1N0ZENvbW1lbnRMaW5rIiBocmVmPSIjIiBvbkNsaWNrPSJyZXR1cm4gZ290b1N0YW5kYXJkQ29tbWVudFR5cGVMaXN0KFwnJytjb21tZW50LmlkKydcJywgXCcnK2RvY1R5cGUuaWQrJ1wnLCBcJycrZG9jSWQuaWQrJ1wnKTsiPjxjbGFzcz0icG9ydGxldC1tc2ctaW5mbyI+JytsYWJsZVZhbCsnPC9hPicpOw0KCQl9DQoJfQ0KfQ0KDQpmdW5jdGlvbiBpbml0RGV0YWlsRWxlSWRzKHJvd0RldGFpbEVsZW1lbnQsY21udFByZSxyb3dJbngpDQp7DQoJdmFyIHBDaGFyID0gJ3AnOw0KCWlmIChjbW50UHJlICE9ICcnKQ0KCXsNCgkJcENoYXIgPSAnUCc7DQoJfQ0KCXZhciBwcmVmaXhzdHIgPSBjbW50UHJlK3BDaGFyOw0KCXNldFNpbmdsZUZpZWxkSWQocm93RGV0YWlsRWxlbWVudCxwcmVmaXhzdHIsJ2FkZHJlc3MxJyxyb3dJbngpOw0KCXNldFNpbmdsZUZpZWxkSWQocm93RGV0YWlsRWxlbWVudCxwcmVmaXhzdHIsJ2FkZHJlc3MyJyxyb3dJbngpOw0KCXNldFNpbmdsZUZpZWxkSWQocm93RGV0YWlsRWxlbWVudCxwcmVmaXhzdHIsJ2FkZHJlc3MzJyxyb3dJbngpOwkJDQoJc2V0U2luZ2xlRmllbGRJZChyb3dEZXRhaWxFbGVtZW50LHByZWZpeHN0ciwnY2l0eScscm93SW54KTsNCglzZXRTaW5nbGVGaWVsZElkKHJvd0RldGFpbEVsZW1lbnQscHJlZml4c3RyLCdzdGF0ZScscm93SW54KTsNCglzZXRTaW5nbGVGaWVsZElkKHJvd0RldGFpbEVsZW1lbnQscHJlZml4c3RyLCd6aXAnLHJvd0lueCk7DQoJc2V0U2luZ2xlRmllbGRJZChyb3dEZXRhaWxFbGVtZW50LHByZWZpeHN0ciwncGhvbmUxJyxyb3dJbngpOw0KCXNldFNpbmdsZUZpZWxkSWQocm93RGV0YWlsRWxlbWVudCxwcmVmaXhzdHIsJ3Bob25lMicscm93SW54KTsNCglzZXRTaW5nbGVGaWVsZElkKHJvd0RldGFpbEVsZW1lbnQscHJlZml4c3RyLCdwaG9uZTFDb3VudHJ5Q29kZScscm93SW54KTsNCglzZXRTaW5nbGVGaWVsZElkKHJvd0RldGFpbEVsZW1lbnQscHJlZml4c3RyLCdwaG9uZTJDb3VudHJ5Q29kZScscm93SW54KTsNCglzZXRTaW5nbGVGaWVsZElkKHJvd0RldGFpbEVsZW1lbnQscHJlZml4c3RyLCdlbWFpbCcscm93SW54KTsNCglzZXRTaW5nbGVGaWVsZElkKHJvd0RldGFpbEVsZW1lbnQscHJlZml4c3RyLCdmYXgnLHJvd0lueCk7DQoJc2V0U2luZ2xlRmllbGRJZChyb3dEZXRhaWxFbGVtZW50LHByZWZpeHN0ciwnZmF4Q291bnRyeUNvZGUnLHJvd0lueCk7DQoJc2V0U2luZ2xlRmllbGRJZChyb3dEZXRhaWxFbGVtZW50LHByZWZpeHN0ciwnY291bnRyeUNvZGUnLHJvd0lueCk7DQoJc2V0U2luZ2xlRmllbGRJZChyb3dEZXRhaWxFbGVtZW50LHByZWZpeHN0ciwnYWF6b25lLWNvdW50cnktc3RhdGUnLHJvd0lueCk7DQoJLy9DaGFuZ2UgbWVzc2FnZSBlbGVtZW50J3MgSUQgdG8gc2hvdyBlcnJvci4gDQoJc2V0U2luZ2xlRmllbGRJZChyb3dEZXRhaWxFbGVtZW50LHByZWZpeHN0ciwiemlwKm1zZyIscm93SW54KTsNCglzZXRTaW5nbGVGaWVsZElkKHJvd0RldGFpbEVsZW1lbnQscHJlZml4c3RyLCJwaG9uZTEqbXNnIixyb3dJbngpOw0KCXNldFNpbmdsZUZpZWxkSWQocm93RGV0YWlsRWxlbWVudCxwcmVmaXhzdHIsInBob25lMiptc2ciLHJvd0lueCk7DQoJc2V0U2luZ2xlRmllbGRJZChyb3dEZXRhaWxFbGVtZW50LHByZWZpeHN0ciwiZmF4Km1zZyIscm93SW54KTsNCgkNCgkNCglpZiAoaXNFcXVhbHNJZ25vcmVDYXNlKCdleGFtJywgY21udFByZSkpDQoJew0KCQlzZXRTaW5nbGVGaWVsZElkKHJvd0RldGFpbEVsZW1lbnQscHJlZml4c3RyLCdzdXBwb3J0ZWRMYW5ndWFnZXMnLHJvd0lueCk7DQoJCXZhciBoYW5kaWNhcEFjY2Vzc2libGVEZXNJZCA9IHNldFNpbmdsZUZpZWxkSWQocm93RGV0YWlsRWxlbWVudCxwcmVmaXhzdHIsJ2hhbmRpY2FwQWNjZXNzaWJsZURlcycscm93SW54KTsNCgkJc2V0U2luZ2xlRmllbGRJZChyb3dEZXRhaWxFbGVtZW50LHByZWZpeHN0ciwnZHJpdmluZ0RpcmVjdGlvbnMnLHJvd0lueCk7DQoJCXNldFNpbmdsZUZpZWxkSWQocm93RGV0YWlsRWxlbWVudCxwcmVmaXhzdHIsJ2lzSGFuZGljYXBBY2Nlc3NpYmxlJyxyb3dJbngpOw0KCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmFsdWUoJytwcmVmaXhzdHIrJ3JvdmlkZXJEZXRhaWxNb2RlbCpoYW5kaWNhcEFjY2Vzc2libGVEZXMnK3Jvd0lueCsnKScpOw0KCQlpZihoYW5kaWNhcEFjY2Vzc2libGVEZXNJZCAmJiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChoYW5kaWNhcEFjY2Vzc2libGVEZXNJZCkpDQoJCXsNCgkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGhhbmRpY2FwQWNjZXNzaWJsZURlc0lkKS5yZWFkT25seSA9IHRydWU7DQoJCQlyZWFkT25seU9iai5yZXNldFJlYWRPbmx5KFtkb2N1bWVudC5nZXRFbGVtZW50QnlJZChoYW5kaWNhcEFjY2Vzc2libGVEZXNJZCldKTsNCgkJfQ0KCX0NCn0NCg0KZnVuY3Rpb24gc2V0U2luZ2xlRmllbGRJZChlbGVtZW50LCBwcmVmaXgsIHN1ZmZpeCxyb3dJbngpDQp7DQoJdmFyIGVsZU5hbWVJbm5lclN0ciA9IHByZWZpeCsncm92aWRlckRldGFpbE1vZGVsKicrc3VmZml4Ow0KCXZhciBpbmRleCA9ICIiOw0KCWlmKHN1ZmZpeCA9PSAiYWF6b25lLWNvdW50cnktc3RhdGUiKQ0KCXsNCgkJLy9GaW5kIHRoZSBzdGF0ZSBkaXYobm90IHNlbGVjdCBvciB0ZXh0KQ0KCQlpbmRleCA9ICdhYXpvbmUudmFsdWUoJytlbGVOYW1lSW5uZXJTdHIrJyknOw0KCX0NCgllbHNlIGlmKHN1ZmZpeC5pbmRleE9mKCJtc2ciKSA+IC0xKQ0KCXsNCgkJLy9GaW5kIHRoZSBlcnJvciBtZXNzYWdlIHNwYW4uDQoJCWluZGV4ID0gZWxlTmFtZUlubmVyU3RyOw0KCX0NCgllbHNlDQoJew0KCQlpbmRleCA9ICd2YWx1ZSgnK2VsZU5hbWVJbm5lclN0cisnKSc7DQoJfQ0KCQ0KCS8vU2V0IGlkDQoJDQoJdmFyIGluZGV4SWQgPSByb3dJbnggKzE7DQoJIHZhciBlbGVGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKGluZGV4KVtpbmRleElkXTsNCglpZiAoZWxlRmllbGQpDQoJew0KCQlpZihzdWZmaXggPT0gImFhem9uZS1jb3VudHJ5LXN0YXRlIikNCgkJew0KCQkJZWxlRmllbGQuaWQgPSAnYWF6b25lLnZhbHVlKCcrZWxlTmFtZUlubmVyU3RyK3Jvd0lueCsnKSc7DQoJCX0NCgkJZWxzZSBpZihzdWZmaXguaW5kZXhPZigibXNnIikgPiAtMSkNCgkJew0KCQkJdmFyIGluZGV4ID0gc3VmZml4Lmxhc3RJbmRleE9mKCJtc2ciKSAtIDE7DQoJCQllbGVGaWVsZC5pZCA9IHByZWZpeCArICJyb3ZpZGVyRGV0YWlsTW9kZWwqIiArIHN1ZmZpeC5zdWJzdHJpbmcoMCwgaW5kZXgpICsgcm93SW54ICsgc3VmZml4LnN1YnN0cmluZyhpbmRleCk7DQoJCX0NCgkJZWxzZQ0KCQl7DQoJCQllbGVGaWVsZC5pZCA9ICd2YWx1ZSgnK2VsZU5hbWVJbm5lclN0cityb3dJbngrJyknOw0KCQl9DQoJCXJldHVybiBlbGVGaWVsZC5pZDsNCgl9DQoJcmV0dXJuOw0KfQ0KDQpmdW5jdGlvbiByZXBsYWNlU3BlbGxMaW5rKHJvd0RldGFpbEVsZW1lbnQsZU5hbWUsZUlueCxzZXBhcmF0b3IsbGFibGVWYWwpDQp7DQoJdmFyIHJvd05hbWUgPSAnZGV1Y2F0aW9uLXJvdy0nICsgZUlueDsNCgl2YXIgcm93T2JqID0gcm93RGV0YWlsRWxlbWVudC5wYXJlbnROb2RlLnBhcmVudE5vZGU7DQoJcm93T2JqLnNldEF0dHJpYnV0ZSgiaWQiLCByb3dOYW1lKTsNCglyb3dPYmouY2xhc3NOYW1lID0gIkFjY2VsYU1haW5UYWJsZVZhcmlhbnQiOw0KCXZhciBjb21tZW50TmFtZSA9IGVuY29kZVVSSUNvbXBvbmVudChlTmFtZSk7DQoJdmFyIGNvbW1lbnRTcGVsbExpbmsgPSBBYzM2MC5xdWVyeShjb21tZW50TmFtZSArICJfc3BlbGxMaW5rIik7CQkNCglpZiAoY29tbWVudFNwZWxsTGluaykNCgl7CQ0KCQl2YXIgbGluayA9ICI8c2NyaXB0IGxhbmd1YWdlPVwiSmF2YVNjcmlwdFwiIHNyYz1cIi9wb3J0bGV0cy9jb21tb25zL3NwZWxsY2hlY2tlci9zcGVsbGNoZWNrZXItY2FsbGVyLmpzXCI+PC9zY3JpcHQ+Ig0KCQkJKyI8YSBocmVmPSdKYXZhU2NyaXB0OmdvU3BlbGxDaGVjayhcIi9wb3J0bGV0cy9jb21tb25zL3NwZWxsY2hlY2tlci9cIiwgIg0KCQkJKyJcIiIrIGNvbW1lbnROYW1lICsgc2VwYXJhdG9yICsgIlwiLCBcIiIrIHJvd05hbWUgKyJcIiApOyc+Ig0KCQkJKyBsYWJsZVZhbCArICI8L2E+IjsNCgkJY29tbWVudFNwZWxsTGluay5jaGlsZE5vZGVzWzBdLmlubmVySFRNTCA9bGluazsNCgl9DQp9DQoNCmZ1bmN0aW9uIGdvU3BlbGxDaGVjayhiYXNlVXJsLCB0ZXh0YXJlYU5hbWUsIHJvd05hbWUpDQp7DQoJdmFyIHJvd09iamVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKHJvd05hbWUpWzBdOw0KCXZhciBlSW5kZXggPSAocm93T2JqZWN0LnJvd0luZGV4KzEpLzM7DQoJZG9TcGVsbENoZWNrKGJhc2VVcmwsIHRleHRhcmVhTmFtZSArIGVJbmRleCk7DQp9DQoNCmZ1bmN0aW9uIGFkZERhdGVQaWNrZXIoZGF0ZUVsZSwgd2VicGF0aCwgYWx0TXNnKQ0Kew0KCXZhciBkYXRlTmFtZSA9IGRhdGVFbGUuaWQ7IC8vImRhdGUoIitlbGVOYW1lKyIpIjsNCgl2YXIgZGF0ZUxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7DQoJZGF0ZUxpbmsubmFtZSA9ICdlZHVEYXRlJzsNCglkYXRlTGluay5pbm5lckhUTUwgPSAiPEEgaHJlZj1cIiNcIiBvbktleURvd249XCJpZihldmVudC5rZXlDb2RlPT0zMikgZXZlbnQua2V5Q29kZT0xMztcIiBvbmNsaWNrPVwicmV0dXJuIHNlbGVjdERhdGUoJyIrIGRhdGVOYW1lICsgIicpXCI+PGltZyBzcmM9XCIvIit3ZWJwYXRoKyIvaW1hZ2VzL3NlbGVjdERhdGUuZ2lmXCIgIg0KCQkrICdhbHQ9IicrYWx0TXNnKyciJw0KCQkrIiBib3JkZXI9MCA+PC9BPiZuYnNwOyI7DQoJcmV0dXJuIGRhdGVMaW5rOw0KfQ0KDQpmdW5jdGlvbiBkaXNhYmxlRGF0ZVBpY2tlcihkYXRlTGluaykNCnsNCglpZiAoZGF0ZUxpbmspDQoJew0KCQlkYXRlTGluay5pbm5lckhUTUwgPSAiPGltZyBzcmM9XCIvcG9ydGxldHMvaW1hZ2VzL3NlbGVjdERhdGUuZ2lmXCIgIg0KCQkJKyIgYm9yZGVyPTAgPiZuYnNwOyI7DQoJfQ0KfQ0KDQpmdW5jdGlvbiB0b051bShudW1WYWwpDQp7DQoJaWYgKG51bVZhbCAmJiBudW1WYWwgIT0gJycgJiYgIWlzTmFOKG51bVZhbCkpDQoJew0KCQlyZXR1cm4gbnVtVmFsDQoJfQ0KCWVsc2UNCgl7DQoJCXJldHVybiAwOw0KCX0NCn0NCg0KZnVuY3Rpb24gYWNjQWRkKGFyZzEsYXJnMil7DQoJdmFyIHIxLHIyLG0sbjsNCgl0cnl7cjE9YXJnMS50b1N0cmluZygpLnNwbGl0KCIuIilbMV0ubGVuZ3RofWNhdGNoKGUpe3IxPTB9DQoJdHJ5e3IyPWFyZzIudG9TdHJpbmcoKS5zcGxpdCgiLiIpWzFdLmxlbmd0aH1jYXRjaChlKXtyMj0wfQ0KCW09TWF0aC5wb3coMTAsTWF0aC5tYXgocjEscjIpKTsNCgluPShyMT49cjIpP3IxOnIyOw0KCW49KG4+Mik/MjpuOw0KCXJldHVybiAoKGFyZzEqbSthcmcyKm0pL20pLnRvRml4ZWQobik7DQp9DQoNCmZ1bmN0aW9uIGFjY1N1YihhcmcxLGFyZzIpew0KCSB2YXIgcjEscjIsbSxuOw0KCSB0cnl7cjE9YXJnMS50b1N0cmluZygpLnNwbGl0KCIuIilbMV0ubGVuZ3RofWNhdGNoKGUpe3IxPTB9DQoJIHRyeXtyMj1hcmcyLnRvU3RyaW5nKCkuc3BsaXQoIi4iKVsxXS5sZW5ndGh9Y2F0Y2goZSl7cjI9MH0NCgkgbT1NYXRoLnBvdygxMCxNYXRoLm1heChyMSxyMikpOw0KCSBuPShyMT49cjIpP3IxOnIyOw0KCSBuPShuPjIpPzI6bjsNCgkgcmV0dXJuICgoYXJnMSptLWFyZzIqbSkvbSkudG9GaXhlZChuKTsNCn0NCg0KZnVuY3Rpb24gZm9ybWF0RWxlcygpDQp7DQoJdmFyIGFyZ0FyciA9Zm9ybWF0RWxlcy5hcmd1bWVudHM7DQoJaWYgKGFyZ0Fyci5sZW5ndGggPCAzKQ0KCXsNCgkJcmV0dXJuIGZhbHNlOw0KCX0NCgl2YXIgcm93T2JqID0gYXJnQXJyWzBdOw0KCXZhciByb3dFbGVDZWxsID0gYXJnQXJyWzFdOw0KCQ0KCXJvd09iai5lbGVDZWxsVGFibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJUQUJMRSIpOw0KCXJvd09iai5lbGVDZWxsdGJvZHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJUQk9EWSIpOw0KCXJvd09iai5lbGVDZWxsVHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJUUiIpOyANCglmb3IodmFyIGs9MjsgazxhcmdBcnIubGVuZ3RoOyBrKyspDQoJewkJDQoJCXZhciBjZWxsVGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJURCIpOw0KCQljZWxsVGQuc3R5bGUuYm9yZGVyPSIwIjsNCgkJY2VsbFRkLmFwcGVuZENoaWxkKGFyZ0FycltrXSk7DQoJCXJvd09iai5lbGVDZWxsVHIuYXBwZW5kQ2hpbGQoY2VsbFRkKTsNCgl9CQ0KCWlmIChhcmdBcnIubGVuZ3RoID4gMikNCgl7Ly9zZXQgdGhlIGlucHV0IGVsZW1lbnQgd2lkdGgNCgkJYXJnQXJyWzJdLnN0eWxlLndpZHRoID0gYXJnQXJyWzFdLndpZHRoKyJweCI7DQoJfQ0KCXJvd09iai5lbGVDZWxsdGJvZHkuYXBwZW5kQ2hpbGQocm93T2JqLmVsZUNlbGxUcik7DQoJcm93T2JqLmVsZUNlbGxUYWJsZS5hcHBlbmRDaGlsZChyb3dPYmouZWxlQ2VsbHRib2R5KTsNCglyb3dFbGVDZWxsLmFwcGVuZENoaWxkKHJvd09iai5lbGVDZWxsVGFibGUpOwkNCglyZXR1cm4gZmFsc2U7DQp9DQoNCmZ1bmN0aW9uIHNldENvbnREZXRhaWxEYXRhKGVsZW1lbnQsIGRhdGEpDQp7DQoJdmFyIGFyZ0FyciA9c2V0Q29udERldGFpbERhdGEuYXJndW1lbnRzOw0KCXZhciBjbGVhckZsYWcgPSBnZXRDbGVhckZsYWcoYXJnQXJyLCBkYXRhKTsNCglyZXR1cm4gc2V0UHJvdkRldGFpbERhdGEoZWxlbWVudCwgZGF0YSwgJ2NvbnQnLGNsZWFyRmxhZywgc2V0Q29udERldGFpbERhdGEuYXJndW1lbnRzWzNdKTsNCn0NCg0KZnVuY3Rpb24gc2V0RXhhbURldGFpbERhdGEoZWxlbWVudCwgZGF0YSkNCnsNCgl2YXIgYXJnQXJyID1zZXRFeGFtRGV0YWlsRGF0YS5hcmd1bWVudHM7DQoJdmFyIGNsZWFyRmxhZyA9IGdldENsZWFyRmxhZyhhcmdBcnIsIGRhdGEpOw0KCXJldHVybiBzZXRQcm92RGV0YWlsRGF0YShlbGVtZW50LCBkYXRhLCAnZXhhbScsY2xlYXJGbGFnLCBzZXRFeGFtRGV0YWlsRGF0YS5hcmd1bWVudHNbM10pOw0KfQ0KDQpmdW5jdGlvbiBnZXRDbGVhckZsYWcoYXJnQXJyLCBkYXRhKQ0Kew0KCXZhciBjbGVhckZsYWcgPSBmYWxzZTsNCglpZiAoYXJnQXJyLmxlbmd0aCA8IDMgJiYgZGF0YVsnY2xlYXJGbGFnJ10gIT0gdW5kZWZpbmVkKQ0KCXsNCgkJY2xlYXJGbGFnID0gZGF0YVsnY2xlYXJGbGFnJ107DQoJfQ0KCWVsc2UNCgl7DQoJCWNsZWFyRmxhZyA9IGFyZ0FyclsyXSB8fCBkYXRhWydjbGVhckZsYWcnXTsNCgl9DQoJcmV0dXJuIGNsZWFyRmxhZzsNCn0NCg0KZnVuY3Rpb24gc2V0UHJvdmlkZXJObyhwcm92Tm9FbGUsIHJlZlByb3ZObykNCnsNCglpZihwcm92Tm9FbGUgIT0gdW5kZWZpbmVkKQ0KCXsNCgkJaWYgKHJlZlByb3ZObyAhPSB1bmRlZmluZWQgJiYgcmVmUHJvdk5vICE9ICcnKQkNCgkJew0KCQkJcHJvdk5vRWxlLnZhbHVlID0gcmVmUHJvdk5vOw0KCQkJcHJvdk5vRWxlLnJlYWRPbmx5ID0gdHJ1ZTsNCgkJCXJlYWRPbmx5T2JqLnJlc2V0UmVhZE9ubHkoW3Byb3ZOb0VsZV0pOw0KCQl9DQoJCWVsc2UNCgkJewkJCQkNCgkJCWlmIChwcm92Tm9FbGUucmVhZE9ubHkpDQoJCQl7DQoJCQkJcHJvdk5vRWxlLnJlYWRPbmx5ID0gZmFsc2U7DQoJCQkJcmVhZE9ubHlPYmoucmVzZXRSZWFkT25seShbcHJvdk5vRWxlXSk7DQoJCQkJcHJvdk5vRWxlLnZhbHVlID0gIiI7DQoJCQl9CQkJCQ0KCQl9DQoJfQ0KCXJldHVybiBmYWxzZTsNCn0NCg0KZnVuY3Rpb24gc2V0UHJvdkRldGFpbERhdGEoZWxlbWVudCwgZGF0YSwgcHJlZml4LCBjbGVhckZsYWcsIGluZGV4KQ0Kew0KCWlmICghZWxlbWVudCkNCgl7DQoJCXJldHVybiBmYWxzZTsNCgl9DQoJaWYgKGNsZWFyRmxhZykNCgl7DQoJCWNsZWFyUHJvdkRldGFpbERhdGEoZWxlbWVudCwgZGF0YSwgcHJlZml4LGluZGV4KTsNCgl9DQoJDQoJdmFyIGFkZHIxID0gZ2V0RWxlbWVudHNCeUluZGV4KCd2YWx1ZSgnK3ByZWZpeCsnUHJvdmlkZXJEZXRhaWxNb2RlbCphZGRyZXNzMSknLGluZGV4KTsNCgl2YXIgYWRkcjIgPSBnZXRFbGVtZW50c0J5SW5kZXgoJ3ZhbHVlKCcrcHJlZml4KydQcm92aWRlckRldGFpbE1vZGVsKmFkZHJlc3MyKScsaW5kZXgpOw0KCXZhciBhZGRyMyA9IGdldEVsZW1lbnRzQnlJbmRleCgndmFsdWUoJytwcmVmaXgrJ1Byb3ZpZGVyRGV0YWlsTW9kZWwqYWRkcmVzczMpJyxpbmRleCk7CQkNCgl2YXIgY2l0eSA9IGdldEVsZW1lbnRzQnlJbmRleCgidmFsdWUoIitwcmVmaXgrIlByb3ZpZGVyRGV0YWlsTW9kZWwqY2l0eSkiLGluZGV4KTsNCgl2YXIgc3RhdGUgPSBnZXRFbGVtZW50c0J5SW5kZXgoInZhbHVlKCIrcHJlZml4KyJQcm92aWRlckRldGFpbE1vZGVsKnN0YXRlKSIsaW5kZXgpOw0KCXZhciB6aXAgPSBnZXRFbGVtZW50c0J5SW5kZXgoInZhbHVlKCIrcHJlZml4KyJQcm92aWRlckRldGFpbE1vZGVsKnppcCkiLGluZGV4KTsNCgl2YXIgcGhvbmUxID0gZ2V0RWxlbWVudHNCeUluZGV4KCJ2YWx1ZSgiK3ByZWZpeCsiUHJvdmlkZXJEZXRhaWxNb2RlbCpwaG9uZTEpIixpbmRleCk7DQoJdmFyIHBob25lMiA9IGdldEVsZW1lbnRzQnlJbmRleCgidmFsdWUoIitwcmVmaXgrIlByb3ZpZGVyRGV0YWlsTW9kZWwqcGhvbmUyKSIsaW5kZXgpOw0KCXZhciBwaG9uZTFDQyA9IGdldEVsZW1lbnRzQnlJbmRleCgidmFsdWUoIitwcmVmaXgrIlByb3ZpZGVyRGV0YWlsTW9kZWwqcGhvbmUxQ291bnRyeUNvZGUpIixpbmRleCk7DQoJdmFyIHBob25lMkNDID0gZ2V0RWxlbWVudHNCeUluZGV4KCJ2YWx1ZSgiK3ByZWZpeCsiUHJvdmlkZXJEZXRhaWxNb2RlbCpwaG9uZTJDb3VudHJ5Q29kZSkiLGluZGV4KTsNCgl2YXIgZW1haWwgPSBnZXRFbGVtZW50c0J5SW5kZXgoInZhbHVlKCIrcHJlZml4KyJQcm92aWRlckRldGFpbE1vZGVsKmVtYWlsKSIsaW5kZXgpOw0KCXZhciBmYXggPSBnZXRFbGVtZW50c0J5SW5kZXgoInZhbHVlKCIrcHJlZml4KyJQcm92aWRlckRldGFpbE1vZGVsKmZheCkiLGluZGV4KTsNCgl2YXIgZmF4Q0MgPSBnZXRFbGVtZW50c0J5SW5kZXgoInZhbHVlKCIrcHJlZml4KyJQcm92aWRlckRldGFpbE1vZGVsKmZheENvdW50cnlDb2RlKSIsaW5kZXgpOwkNCgkvL0ZvciBwcm92aWRlciBkcm9wIGRvd24gbGlzdCAnb25jaGFuZ2UnIGV2ZW50Lg0KCXZhciBjYyA9IGdldEVsZW1lbnRzQnlJbmRleCgidmFsdWUoIitwcmVmaXgrIlByb3ZpZGVyRGV0YWlsTW9kZWwqY291bnRyeUNvZGUpIixpbmRleCk7CQ0KCQ0KCWlmIChpc0VxdWFsc0lnbm9yZUNhc2UoJ2V4YW0nLCBwcmVmaXgpKQ0KCXsNCgkJdmFyIHN1cHBvcnRMYW5ndWFnZXMgPSBnZXRFbGVtZW50c0J5SW5kZXgoInZhbHVlKCIrcHJlZml4KyJQcm92aWRlckRldGFpbE1vZGVsKnN1cHBvcnRlZExhbmd1YWdlcykiLGluZGV4KTsJDQoJCXZhciBpc0hhbmRpY2FwQWNjZXNzaWJsZSA9IGdldEVsZW1lbnRzQnlJbmRleCgidmFsdWUoIitwcmVmaXgrIlByb3ZpZGVyRGV0YWlsTW9kZWwqaXNIYW5kaWNhcEFjY2Vzc2libGUpIixpbmRleCk7CQ0KCQl2YXIgaGFuZGljYXBBY2Nlc3NpYmxlRGVzID0gZ2V0RWxlbWVudHNCeUluZGV4KCJ2YWx1ZSgiK3ByZWZpeCsiUHJvdmlkZXJEZXRhaWxNb2RlbCpoYW5kaWNhcEFjY2Vzc2libGVEZXMpIixpbmRleCk7CQ0KCQl2YXIgZHJpdmluZ0RpcmVjdGlvbnMgPSBnZXRFbGVtZW50c0J5SW5kZXgoInZhbHVlKCIrcHJlZml4KyJQcm92aWRlckRldGFpbE1vZGVsKmRyaXZpbmdEaXJlY3Rpb25zKSIsaW5kZXgpOwkNCgkJDQoJCWlmIChzdXBwb3J0TGFuZ3VhZ2VzICYmIGRhdGFbJ3ZhbHVlKCcrcHJlZml4KydQcm92aWRlckRldGFpbE1vZGVsKnN1cHBvcnRlZExhbmd1YWdlcyknXSAhPSB1bmRlZmluZWQpDQoJCXsNCgkJCXN1cHBvcnRMYW5ndWFnZXMudmFsdWUgPSBkYXRhWyd2YWx1ZSgnK3ByZWZpeCsnUHJvdmlkZXJEZXRhaWxNb2RlbCpzdXBwb3J0ZWRMYW5ndWFnZXMpJ107DQoJCX0NCgkJaWYgKGlzSGFuZGljYXBBY2Nlc3NpYmxlICYmIGRhdGFbJ3ZhbHVlKCcrcHJlZml4KydQcm92aWRlckRldGFpbE1vZGVsKmlzSGFuZGljYXBBY2Nlc3NpYmxlKSddICE9IHVuZGVmaW5lZCkNCgkJew0KDQoJCQlpZiAoIlkiID09IGRhdGFbJ3ZhbHVlKCcrcHJlZml4KydQcm92aWRlckRldGFpbE1vZGVsKmlzSGFuZGljYXBBY2Nlc3NpYmxlKSddKQ0KCQkJew0KCQkJCWlzSGFuZGljYXBBY2Nlc3NpYmxlLnJlYWRvbmx5ID0gZmFsc2U7DQoJCQl9DQoJCQllbHNlDQoJCQl7DQoJCQkJaXNIYW5kaWNhcEFjY2Vzc2libGUucmVhZG9ubHkgPSB0cnVlOw0KCQkJfQ0KCQkJcmVhZE9ubHlPYmoucmVzZXRSZWFkT25seShbaXNIYW5kaWNhcEFjY2Vzc2libGVdKTsNCgkJfQ0KCQlpZiAoaGFuZGljYXBBY2Nlc3NpYmxlRGVzICYmIGRhdGFbJ3ZhbHVlKCcrcHJlZml4KydQcm92aWRlckRldGFpbE1vZGVsKmhhbmRpY2FwQWNjZXNzaWJsZURlcyknXSAhPSB1bmRlZmluZWQpDQoJCXsNCgkJCWhhbmRpY2FwQWNjZXNzaWJsZURlcy52YWx1ZSA9IGRhdGFbJ3ZhbHVlKCcrcHJlZml4KydQcm92aWRlckRldGFpbE1vZGVsKmhhbmRpY2FwQWNjZXNzaWJsZURlcyknXTsNCgkJCWlmKCJZIiA9PSBleGFtSXRlbVsidmFsdWUoZXhhbVByb3ZpZGVyRGV0YWlsTW9kZWwqaXNIYW5kaWNhcEFjY2Vzc2libGUpIl0pDQoJCQl7DQoJCQkJaGFuZGljYXBBY2Nlc3NpYmxlRGVzLnJlYWRvbmx5ID0gZmFsc2U7DQoJCQl9DQoJCQllbHNlDQoJCQl7DQoJCQkJaGFuZGljYXBBY2Nlc3NpYmxlRGVzLnJlYWRPbmx5ID0gdHJ1ZTsNCgkJCX0NCgkJCXJlYWRPbmx5T2JqLnJlc2V0UmVhZE9ubHkoW2lzSGFuZGljYXBBY2Nlc3NpYmxlXSk7DQoJCX0NCgkJaWYgKGRyaXZpbmdEaXJlY3Rpb25zICYmIGRhdGFbJ3ZhbHVlKCcrcHJlZml4KydQcm92aWRlckRldGFpbE1vZGVsKmRyaXZpbmdEaXJlY3Rpb25zKSddICE9IHVuZGVmaW5lZCkNCgkJew0KCQkJZHJpdmluZ0RpcmVjdGlvbnMudmFsdWUgPSBkYXRhWyd2YWx1ZSgnK3ByZWZpeCsnUHJvdmlkZXJEZXRhaWxNb2RlbCpkcml2aW5nRGlyZWN0aW9ucyknXTsNCgkJfQ0KCX0NCg0KCS8vU2V0IHRoZSBjb3VudHJ5IHZhbHVlIGZpcnN0LCB0aGVuIGNvdWxkIGdldCB0aGUgY29ycmVjdCBtYXNrLg0KCWlmIChjYyAmJiBkYXRhWyd2YWx1ZSgnK3ByZWZpeCsnUHJvdmlkZXJEZXRhaWxNb2RlbCpjb3VudHJ5Q29kZSknXSAhPSB1bmRlZmluZWQpDQoJew0KCQljYy52YWx1ZSA9IGRhdGFbJ3ZhbHVlKCcrcHJlZml4KydQcm92aWRlckRldGFpbE1vZGVsKmNvdW50cnlDb2RlKSddOw0KCQljYy5zdGF0ZVYgPSBkYXRhWyd2YWx1ZSgnK3ByZWZpeCsnUHJvdmlkZXJEZXRhaWxNb2RlbCpzdGF0ZSknXTsNCgkJY2MuaGFzTG9hZCA9IHRydWU7DQoJCUFjMzYwLmRpc3BhdGNoRXZlbnQoY2MsICdjaGFuZ2UnKTsNCgkJY2MuaGFzTG9hZCA9IGZhbHNlOw0KCX0NCgkNCglpZiAoYWRkcjEgJiYgZGF0YVsndmFsdWUoJytwcmVmaXgrJ1Byb3ZpZGVyRGV0YWlsTW9kZWwqYWRkcmVzczEpJ10gIT0gdW5kZWZpbmVkKQ0KCXsNCgkJYWRkcjEudmFsdWUgPSBkYXRhWyd2YWx1ZSgnK3ByZWZpeCsnUHJvdmlkZXJEZXRhaWxNb2RlbCphZGRyZXNzMSknXTsNCgl9DQoJaWYgKGFkZHIyICYmIGRhdGFbJ3ZhbHVlKCcrcHJlZml4KydQcm92aWRlckRldGFpbE1vZGVsKmFkZHJlc3MyKSddICE9IHVuZGVmaW5lZCkNCgl7DQoJCWFkZHIyLnZhbHVlID0gZGF0YVsndmFsdWUoJytwcmVmaXgrJ1Byb3ZpZGVyRGV0YWlsTW9kZWwqYWRkcmVzczIpJ107DQoJfQ0KCWlmIChhZGRyMyAmJiBkYXRhWyd2YWx1ZSgnK3ByZWZpeCsnUHJvdmlkZXJEZXRhaWxNb2RlbCphZGRyZXNzMyknXSAhPSB1bmRlZmluZWQpDQoJew0KCQlhZGRyMy52YWx1ZSA9IGRhdGFbJ3ZhbHVlKCcrcHJlZml4KydQcm92aWRlckRldGFpbE1vZGVsKmFkZHJlc3MzKSddOw0KCX0NCglpZiAoY2l0eSAmJiBkYXRhWyd2YWx1ZSgnK3ByZWZpeCsnUHJvdmlkZXJEZXRhaWxNb2RlbCpjaXR5KSddICE9IHVuZGVmaW5lZCkNCgl7DQoJCWNpdHkudmFsdWUgPSBkYXRhWyd2YWx1ZSgnK3ByZWZpeCsnUHJvdmlkZXJEZXRhaWxNb2RlbCpjaXR5KSddOw0KCX0NCglpZiAoc3RhdGUgJiYgZGF0YVsndmFsdWUoJytwcmVmaXgrJ1Byb3ZpZGVyRGV0YWlsTW9kZWwqc3RhdGUpJ10gIT0gdW5kZWZpbmVkKQ0KCXsNCgkJc3RhdGUudmFsdWUgPSBkYXRhWyd2YWx1ZSgnK3ByZWZpeCsnUHJvdmlkZXJEZXRhaWxNb2RlbCpzdGF0ZSknXTsNCgl9DQoJaWYgKHppcCAmJiBkYXRhWyd2YWx1ZSgnK3ByZWZpeCsnUHJvdmlkZXJEZXRhaWxNb2RlbCp6aXApJ10gIT0gdW5kZWZpbmVkKQ0KCXsNCgkJemlwLnZhbHVlID0gZGF0YVsndmFsdWUoJytwcmVmaXgrJ1Byb3ZpZGVyRGV0YWlsTW9kZWwqemlwKSddOw0KCX0NCglpZiAocGhvbmUxICYmIGRhdGFbJ3ZhbHVlKCcrcHJlZml4KydQcm92aWRlckRldGFpbE1vZGVsKnBob25lMSknXSAhPSB1bmRlZmluZWQpDQoJew0KCQlwaG9uZTEudmFsdWUgPSBkYXRhWyd2YWx1ZSgnK3ByZWZpeCsnUHJvdmlkZXJEZXRhaWxNb2RlbCpwaG9uZTEpJ107DQoJfQ0KCWlmIChwaG9uZTIgJiYgZGF0YVsndmFsdWUoJytwcmVmaXgrJ1Byb3ZpZGVyRGV0YWlsTW9kZWwqcGhvbmUyKSddICE9IHVuZGVmaW5lZCkNCgl7DQoJCXBob25lMi52YWx1ZSA9IGRhdGFbJ3ZhbHVlKCcrcHJlZml4KydQcm92aWRlckRldGFpbE1vZGVsKnBob25lMiknXTsNCgl9DQoJaWYgKHBob25lMUNDICYmIGRhdGFbJ3ZhbHVlKCcrcHJlZml4KydQcm92aWRlckRldGFpbE1vZGVsKnBob25lMUNvdW50cnlDb2RlKSddICE9IHVuZGVmaW5lZCkNCgl7DQoJCXBob25lMUNDLnZhbHVlID0gZGF0YVsndmFsdWUoJytwcmVmaXgrJ1Byb3ZpZGVyRGV0YWlsTW9kZWwqcGhvbmUxQ291bnRyeUNvZGUpJ107DQoJfQ0KCWlmIChwaG9uZTJDQyAmJiBkYXRhWyd2YWx1ZSgnK3ByZWZpeCsnUHJvdmlkZXJEZXRhaWxNb2RlbCpwaG9uZTJDb3VudHJ5Q29kZSknXSAhPSB1bmRlZmluZWQpDQoJew0KCQlwaG9uZTJDQy52YWx1ZSA9IGRhdGFbJ3ZhbHVlKCcrcHJlZml4KydQcm92aWRlckRldGFpbE1vZGVsKnBob25lMkNvdW50cnlDb2RlKSddOw0KCX0NCglpZiAoZW1haWwgJiYgZGF0YVsndmFsdWUoJytwcmVmaXgrJ1Byb3ZpZGVyRGV0YWlsTW9kZWwqZW1haWwpJ10gIT0gdW5kZWZpbmVkKQ0KCXsNCgkJZW1haWwudmFsdWUgPSBkYXRhWyd2YWx1ZSgnK3ByZWZpeCsnUHJvdmlkZXJEZXRhaWxNb2RlbCplbWFpbCknXTsNCgl9DQoJaWYgKGZheCAmJiBkYXRhWyd2YWx1ZSgnK3ByZWZpeCsnUHJvdmlkZXJEZXRhaWxNb2RlbCpmYXgpJ10gIT0gdW5kZWZpbmVkKQ0KCXsNCgkJZmF4LnZhbHVlID0gZGF0YVsndmFsdWUoJytwcmVmaXgrJ1Byb3ZpZGVyRGV0YWlsTW9kZWwqZmF4KSddOw0KCX0NCglpZiAoZmF4Q0MgJiYgZGF0YVsndmFsdWUoJytwcmVmaXgrJ1Byb3ZpZGVyRGV0YWlsTW9kZWwqZmF4Q291bnRyeUNvZGUpJ10gIT0gdW5kZWZpbmVkKQ0KCXsNCgkJZmF4Q0MudmFsdWUgPSBkYXRhWyd2YWx1ZSgnK3ByZWZpeCsnUHJvdmlkZXJEZXRhaWxNb2RlbCpmYXhDb3VudHJ5Q29kZSknXTsNCgl9CQ0KCQ0KCWRlYWxWYWx1ZXMocHJlZml4ICsgJ1Byb3ZpZGVyRGV0YWlsTW9kZWwnLCBpbmRleCwgZGF0YSk7DQoJcmV0dXJuIGZhbHNlOw0KfQ0KDQpmdW5jdGlvbiBjbGVhclByb3ZEZXRhaWxEYXRhKGVsZW1lbnQsIGRhdGEsIHByZWZpeCxpbmRleCkNCnsJDQoJdmFyIHBDaGFyID0gJ3AnOw0KCWlmIChwcmVmaXggIT0gJycpDQoJew0KCQlwQ2hhciA9ICdQJzsNCgl9DQoJdmFyIHByZWZpeHN0ciA9IHByZWZpeCtwQ2hhcjsNCgljbGVhbkZpZWxkVmFsdWUoZWxlbWVudCxwcmVmaXhzdHIsJ2FkZHJlc3MxJyxpbmRleCk7DQoJY2xlYW5GaWVsZFZhbHVlKGVsZW1lbnQscHJlZml4c3RyLCdhZGRyZXNzMicsaW5kZXgpOw0KCWNsZWFuRmllbGRWYWx1ZShlbGVtZW50LHByZWZpeHN0ciwnYWRkcmVzczMnLGluZGV4KTsJCQ0KCWNsZWFuRmllbGRWYWx1ZShlbGVtZW50LHByZWZpeHN0ciwnY2l0eScsaW5kZXgpOw0KCWNsZWFuRmllbGRWYWx1ZShlbGVtZW50LHByZWZpeHN0ciwnc3RhdGUnLGluZGV4KTsNCgljbGVhbkZpZWxkVmFsdWUoZWxlbWVudCxwcmVmaXhzdHIsJ3ppcCcsaW5kZXgpOw0KCWNsZWFuRmllbGRWYWx1ZShlbGVtZW50LHByZWZpeHN0ciwncGhvbmUxJyxpbmRleCk7DQoJY2xlYW5GaWVsZFZhbHVlKGVsZW1lbnQscHJlZml4c3RyLCdwaG9uZTInLGluZGV4KTsNCgljbGVhbkZpZWxkVmFsdWUoZWxlbWVudCxwcmVmaXhzdHIsJ3Bob25lMUNvdW50cnlDb2RlJyxpbmRleCk7DQoJY2xlYW5GaWVsZFZhbHVlKGVsZW1lbnQscHJlZml4c3RyLCdwaG9uZTJDb3VudHJ5Q29kZScsaW5kZXgpOw0KCWNsZWFuRmllbGRWYWx1ZShlbGVtZW50LHByZWZpeHN0ciwnZW1haWwnLGluZGV4KTsNCgljbGVhbkZpZWxkVmFsdWUoZWxlbWVudCxwcmVmaXhzdHIsJ2ZheCcsaW5kZXgpOw0KCWNsZWFuRmllbGRWYWx1ZShlbGVtZW50LHByZWZpeHN0ciwnZmF4Q291bnRyeUNvZGUnLGluZGV4KTsNCgkNCglpZiAoaXNFcXVhbHNJZ25vcmVDYXNlKCdleGFtJywgcHJlZml4KSkNCgl7DQoJCWNsZWFuRmllbGRWYWx1ZShlbGVtZW50LHByZWZpeHN0ciwnc3VwcG9ydGVkTGFuZ3VhZ2VzJyxpbmRleCk7CQ0KCQljbGVhbkZpZWxkVmFsdWUoZWxlbWVudCxwcmVmaXhzdHIsJ2lzSGFuZGljYXBBY2Nlc3NpYmxlJyxpbmRleCk7CQ0KCQljbGVhbkZpZWxkVmFsdWUoZWxlbWVudCxwcmVmaXhzdHIsJ2hhbmRpY2FwQWNjZXNzaWJsZURlcycsaW5kZXgpOwkNCgkJY2xlYW5GaWVsZFZhbHVlKGVsZW1lbnQscHJlZml4c3RyLCdkcml2aW5nRGlyZWN0aW9ucycsaW5kZXgpOwkNCgl9DQoJcmV0dXJuIGZhbHNlOwkNCn0NCg0KZnVuY3Rpb24gY2xlYW5GaWVsZFZhbHVlKGVsZW1lbnQsIHByZWZpeCwgc3VmZml4LGluZGV4KQ0Kew0KCXZhciBlbGVGaWVsZCA9IGdldEVsZW1lbnRzQnlJbmRleCgndmFsdWUoJytwcmVmaXgrJ3JvdmlkZXJEZXRhaWxNb2RlbConK3N1ZmZpeCsnKScsaW5kZXgpOw0KCWlmIChlbGVGaWVsZCkNCgl7DQoJCWVsZUZpZWxkLnZhbHVlID0gJyc7DQoJfQ0KfQ0KDQoNCg0KZnVuY3Rpb24gc2V0Q29udEVkdURhdGEoY29udEVkdUl0ZW0sZGF0YSxyZXF1aXJlZExibCxvcHRpb25hbExibCxwYXNzTGJsLGZhaWxMYmwpDQp7DQoJY29udEVkdUl0ZW0ucmVxdWlyZWRGbGFnLnZhbHVlID0gZGF0YVsiY29udFJlcXVpcmVkRmxhZyJdOwkNCgljb250RWR1SXRlbS5ncmFkaW5nU3R5bGUudmFsdWUgPSBkYXRhWyJjb250R3JhZGluZ1N0eWxlIl07DQoJY29udEVkdUl0ZW0ucmVxdWlyZWRIb3Vycy52YWx1ZSA9IGRhdGFbImNvbnRSZXF1aXJlZEhvdXJzIl07DQoJY29udEVkdUl0ZW0ucGFzc2luZ1Njb3JlLnZhbHVlID0gZGF0YVsiY29udFBhc3NpbmdTY29yZSJdOw0KCWlmIChjb250RWR1SXRlbS5wYXNzaW5nU2NvcmVJbnB1dCkNCgl7DQoJCWlmICgncGFzc2ZhaWwnID09IGRhdGFbImNvbnRHcmFkaW5nU3R5bGUiXSkNCgkJew0KCQkJY29udEVkdUl0ZW0ucGFzc2luZ1Njb3JlSW5wdXQudmFsdWUgPSBwYXNzTGJsOw0KCQl9DQoJCWVsc2UNCgkJew0KCQkJDQoJCQlpZighKCdwZXJjZW50YWdlJyA9PSBkYXRhWyJjb250R3JhZGluZ1N0eWxlIl0pJiYgY29udEVkdUl0ZW0ucGFzc2luZ1Njb3JlLnZhbHVlID09IDApDQoJCQl7DQoJCQkJY29udEVkdUl0ZW0ucGFzc2luZ1Njb3JlSW5wdXQudmFsdWUgPSAnJzsNCgkJCX0JCQkJDQoJCQllbHNlCQ0KCQkJew0KCQkJCWNvbnRFZHVJdGVtLnBhc3NpbmdTY29yZUlucHV0LnZhbHVlID0gZGF0YVsiY29udFBhc3NpbmdTY29yZSJdOw0KCQkJfQkJCQ0KCQl9DQoJfQ0KCWlmIChjb250RWR1SXRlbS5yZXF1aXJlZEZsYWdDZWxsKQ0KCXsNCgkJaWYgKCdZJyA9PSBkYXRhWyJjb250UmVxdWlyZWRGbGFnIl0pDQoJCXsNCgkJCWNvbnRFZHVJdGVtLnJlcXVpcmVkRmxhZ0NlbGwuaW5uZXJIVE1MID0gJzxUQUJMRT4gPFRCT0RZPiA8VFI+IDxURCBjbGFzcz0icG9ydGxldC1zZWN0aW9uLWJvZHkiIHN0eWxlPSJib3JkZXI6bm9uZTsiPicrcmVxdWlyZWRMYmwrJyZuYnNwOyZuYnNwOyAnDQoJCQkJCSsgJyA8L1REPiA8L1RSPiA8L1RCT0RZPiA8L1RBQkxFPic7DQoJCX0NCgkJZWxzZQ0KCQl7DQoJCQljb250RWR1SXRlbS5yZXF1aXJlZEZsYWdDZWxsLmlubmVySFRNTCA9ICc8VEFCTEU+IDxUQk9EWT4gPFRSPiA8VEQgY2xhc3M9InBvcnRsZXQtc2VjdGlvbi1ib2R5IiBzdHlsZT0iYm9yZGVyOm5vbmU7Ij4nK29wdGlvbmFsTGJsKycmbmJzcDsmbmJzcDsgJw0KCQkJCQkrICcgPC9URD4gPC9UUj4gPC9UQk9EWT4gPC9UQUJMRT4nOw0KCQl9DQoJfQ0KCQ0KCWlmIChjb250RWR1SXRlbS5wYXNzaW5nU2NvcmVJbnB1dCAmJiBjb250RWR1SXRlbS5wYXNzaW5nU2NvcmVTeW1ib2wpDQoJew0KCQlpZiAoJ3BlcmNlbnRhZ2UnID09IGRhdGFbImNvbnRHcmFkaW5nU3R5bGUiXSkNCgkJew0KCQkJY29udEVkdUl0ZW0ucGFzc2luZ1Njb3JlU3ltYm9sLmlubmVySFRNTCA9ICIlIjsNCgkJfQ0KCQllbHNlDQoJCXsNCgkJCWNvbnRFZHVJdGVtLnBhc3NpbmdTY29yZVN5bWJvbC5pbm5lckhUTUwgPSAiIjsNCgkJfQ0KCX0JDQoJZHJhd0ZpbmFsU2NvcmVFbGUoY29udEVkdUl0ZW0sIGRhdGFbImNvbnRHcmFkaW5nU3R5bGUiXSwiY29udEZpbmFsU2NvcmUiLHBhc3NMYmwsZmFpbExibCk7DQp9DQoNCg0KZnVuY3Rpb24gc2V0RXhhbURhdGEoZXhhbUl0ZW0sZGF0YSxyZXF1aXJlZExibCxvcHRpb25hbExibCxwYXNzTGJsLGZhaWxMYmwsbmFMYmwpDQp7DQoJZXhhbUl0ZW0ucmVxdWlyZWRGbGFnLnZhbHVlID0gZGF0YVsiZXhhbVJlcXVpcmVkRmxhZyJdOwkNCglleGFtSXRlbS5ncmFkaW5nU3R5bGUudmFsdWUgPSBkYXRhWyJleGFtR3JhZGluZ1N0eWxlIl07DQoJZXhhbUl0ZW0ucGFzc2luZ1Njb3JlLnZhbHVlID0gZGF0YVsiZXhhbVBhc3NpbmdTY29yZSJdOwkNCgkNCglpZiAoZXhhbUl0ZW0ucGFzc2luZ1Njb3JlSW5wdXQpDQoJew0KCQlpZiAoJ3Bhc3NmYWlsJyA9PSBkYXRhWyJleGFtR3JhZGluZ1N0eWxlIl0pDQoJCXsNCgkJCWV4YW1JdGVtLnBhc3NpbmdTY29yZUlucHV0LnZhbHVlID0gbmFMYmw7DQoJCX0NCgkJZWxzZQ0KCQl7DQoJCQlpZighKCdwZXJjZW50YWdlJyA9PSBkYXRhWyJleGFtR3JhZGluZ1N0eWxlIl0pJiYgZXhhbUl0ZW0ucGFzc2luZ1Njb3JlLnZhbHVlID09IDApDQoJCQl7DQoJCQkJZXhhbUl0ZW0ucGFzc2luZ1Njb3JlSW5wdXQudmFsdWUgPSAnJzsNCgkJCX0JCQkJDQoJCQllbHNlCQ0KCQkJew0KCQkJCWV4YW1JdGVtLnBhc3NpbmdTY29yZUlucHV0LnZhbHVlID0gZGF0YVsiZXhhbVBhc3NpbmdTY29yZSJdOw0KCQkJfQ0KCQkJDQoJCX0NCgl9CQ0KCWlmIChleGFtSXRlbS5yZXF1aXJlZEZsYWdDZWxsKQ0KCXsNCgkJaWYgKCdZJyA9PSBkYXRhWyJleGFtUmVxdWlyZWRGbGFnIl0pDQoJCXsNCgkJCWV4YW1JdGVtLnJlcXVpcmVkRmxhZ0NlbGwuaW5uZXJIVE1MID0gJzxUQUJMRT4gPFRCT0RZPiA8VFI+IDxURCBjbGFzcz0icG9ydGxldC1zZWN0aW9uLWJvZHkiIHN0eWxlPSJib3JkZXI6bm9uZTsiPicrcmVxdWlyZWRMYmwrJyZuYnNwOyZuYnNwOyAnDQoJCQkJCSsgJyA8L1REPiA8L1RSPiA8L1RCT0RZPiA8L1RBQkxFPic7DQoJCX0NCgkJZWxzZQ0KCQl7DQoJCQlleGFtSXRlbS5yZXF1aXJlZEZsYWdDZWxsLmlubmVySFRNTCA9ICc8VEFCTEU+IDxUQk9EWT4gPFRSPiA8VEQgY2xhc3M9InBvcnRsZXQtc2VjdGlvbi1ib2R5IiBzdHlsZT0iYm9yZGVyOm5vbmU7Ij4nK29wdGlvbmFsTGJsKycmbmJzcDsmbmJzcDsgJw0KCQkJCQkrICcgPC9URD4gPC9UUj4gPC9UQk9EWT4gPC9UQUJMRT4nOw0KCQl9DQoJfQ0KCQ0KCWlmIChleGFtSXRlbS5wYXNzaW5nU2NvcmVJbnB1dCAmJiBleGFtSXRlbS5wYXNzaW5nU2NvcmVTeW1ib2wpDQoJew0KCQlpZiAoJ3BlcmNlbnRhZ2UnID09IGRhdGFbImV4YW1HcmFkaW5nU3R5bGUiXSkNCgkJew0KCQkJZXhhbUl0ZW0ucGFzc2luZ1Njb3JlU3ltYm9sLmlubmVySFRNTCA9ICIlIjsNCgkJfQ0KCQllbHNlDQoJCXsNCgkJCWV4YW1JdGVtLnBhc3NpbmdTY29yZVN5bWJvbC5pbm5lckhUTUwgPSAiIjsNCgkJfQ0KCX0JDQoJZHJhd0ZpbmFsU2NvcmVFbGUoZXhhbUl0ZW0sIGRhdGFbImV4YW1HcmFkaW5nU3R5bGUiXSwiZXhhbUZpbmFsU2NvcmUiLHBhc3NMYmwsZmFpbExibCk7DQoJDQoJZXhhbUl0ZW0ucmVmRXhhbU5ici52YWx1ZSA9IGRhdGFbInJlZkV4YW1OYnIiXTsNCgl2YXIgZXhhbU5ld0RlZmluZWQgPSBkYXRhWyJleGFtTmV3RGVmaW5lZCJdOw0KCWlmIChpc0VxdWFsc0lnbm9yZUNhc2UoJ1knLCBleGFtTmV3RGVmaW5lZCkpDQoJew0KCQlzZXRSZWFkV3JpdGU0QWxsRmllbGRzKGV4YW1JdGVtLCBkYXRhKTsNCgkJaWYgKGV4YW1JdGVtLmRhdGVPZkNsYXNzSW5wdXQpDQoJCXsNCgkJCWV4YW1JdGVtLnNjaGVkdWxlTGluay5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KCQl9DQoJfQ0KCWVsc2UNCgl7DQoJCWlmKGV4YW1JdGVtLnNjaGVkdWxlTGluaykNCgkJew0KCQkJZXhhbUl0ZW0uc2NoZWR1bGVMaW5rLnN0eWxlLmRpc3BsYXkgPSAiIjsNCgkJCXNldFJlYWRXcml0ZTRBbGxGaWVsZHMoZXhhbUl0ZW0sIGRhdGEpOw0KCQl9DQoJfQ0KCW5vdFNob3dTY2hlZHVsZUxpbmsoZXhhbUl0ZW0sIGRhdGEpOw0KfQ0KDQpmdW5jdGlvbiBub3RTaG93U2NoZWR1bGVMaW5rKGV4YW1JdGVtLCBkYXRhKQ0Kew0KCWlmIChkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgiaXNFeGFtaW5hdGlvbiIpWzBdICYmIGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJpc0V4YW1pbmF0aW9uIilbMF0udmFsdWUgPT0gMSANCgkJCXx8IGRhdGFbImlzRnJvbU1vZGVsaW5nQ0FQIl0pDQoJew0KCQlpZiAoZXhhbUl0ZW0uZGF0ZU9mQ2xhc3NJbnB1dCkNCgkJew0KCQkJZXhhbUl0ZW0uc2NoZWR1bGVMaW5rLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQoJCX0NCgl9DQp9DQoNCmZ1bmN0aW9uIGRyYXdGaW5hbFNjb3JlRWxlKGNvbnRSb3dJdGVtLCBncmRTdGxWYWwsIGZpbmFsU2NvcmVFbGVOYW1lLHBhc3NMYmwsZmFpbExibCkNCnsNCglpZiAoY29udFJvd0l0ZW0uZmluYWxTY29yZUNlbGwgJiYgY29udFJvd0l0ZW0uZmluYWxTY29yZUlucHV0KQ0KCXsNCgkJaWYgKCdwYXNzZmFpbCcgPT0gZ3JkU3RsVmFsKQ0KCQl7DQoJCQlpZihjb250Um93SXRlbS5maW5hbFNjb3JlSW5wdXQudHlwZSAhPSAidGV4dCIpDQoJCQl7DQoJCQkJcmV0dXJuIGZhbHNlOw0KCQkJfQ0KCQkJY29udFJvd0l0ZW0uZmluYWxTY29yZUNlbGwuaW5uZXJIVE1MID0gIiI7DQoJCQljb250Um93SXRlbS5maW5hbFNjb3JlSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzZWxlY3QiKTsNCgkJCWNvbnRSb3dJdGVtLmZpbmFsU2NvcmVJbnB1dC5uYW1lID0gZmluYWxTY29yZUVsZU5hbWU7DQoJCQkNCgkJCWluaXRFbGVTdHlsZShjb250Um93SXRlbS5maW5hbFNjb3JlSW5wdXQpOw0KCQkJY29udFJvd0l0ZW0uZmluYWxTY29yZUlucHV0LmFkZChuZXcgT3B0aW9uKCIiLCAiIikpOw0KCQkJY29udFJvd0l0ZW0uZmluYWxTY29yZUlucHV0LmFkZChuZXcgT3B0aW9uKHBhc3NMYmwsIjEiKSk7DQoJCQljb250Um93SXRlbS5maW5hbFNjb3JlSW5wdXQuYWRkKG5ldyBPcHRpb24oZmFpbExibCwiMCIpKTsNCg0KCQkJY29udFJvd0l0ZW0uZmluYWxTY29yZVN5bWJvbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsNCgkJCWNvbnRSb3dJdGVtLmZpbmFsU2NvcmVTeW1ib2wuaWQgPSBmaW5hbFNjb3JlRWxlTmFtZSArICIqc2JsIjsNCgkJCWNvbnRSb3dJdGVtLmZpbmFsU2NvcmVNc2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7DQoJCQljb250Um93SXRlbS5maW5hbFNjb3JlTXNnLmlkID0gZmluYWxTY29yZUVsZU5hbWUgKyAiKm1zZyI7CQkNCgkJCWZvcm1hdEVsZXMoY29udFJvd0l0ZW0sIGNvbnRSb3dJdGVtLmZpbmFsU2NvcmVDZWxsLGNvbnRSb3dJdGVtLmZpbmFsU2NvcmVJbnB1dCxjb250Um93SXRlbS5maW5hbFNjb3JlU3ltYm9sLGNvbnRSb3dJdGVtLmZpbmFsU2NvcmVNc2cpOw0KCQkJaW5zZXJ0QWRqYWNlbnQoY29udFJvd0l0ZW0uZmluYWxTY29yZU1zZyk7DQoJCQkNCgkJCWlmKHR5cGVvZihjb250QmFsYW5jZSkgIT0gJ3VuZGVmaW5lZCcgJiYgY29udFJvd0l0ZW0gaW5zdGFuY2VvZiBDb250RWR1Y2F0aW9uSXRlbSkNCgkJCXsgICANCgkJCQl2YXIgY29udEVkdUl0ZW0gPSBjb250Um93SXRlbTsNCgkJCQlBYzM2MC5hdHRhY2hFdmVudChjb250RWR1SXRlbS5maW5hbFNjb3JlSW5wdXQsIm9uY2hhbmdlIiwgZnVuY3Rpb24oKXsNCgkJCQkJY29udEJhbGFuY2UudXBkYXRlQ29udEJhbGFuY2VJdGVtRGF0YShjb250RWR1SXRlbS5jb250RWR1TmFtZUNvbWJvLmdldFZhbHVlKCksIGNvbnRFZHVJdGVtLmNvbnRFZHVOYW1lQ29tYm8uZ2V0VmFsdWUoKSk7DQoJCQkJfSk7DQoJCQl9CQkNCgkJfQ0KCQllbHNlIGlmKGNvbnRSb3dJdGVtLmZpbmFsU2NvcmVJbnB1dC50eXBlID09ICJ0ZXh0IikNCgkJew0KCQkJY29udFJvd0l0ZW0uZmluYWxTY29yZUlucHV0LnZhbHVlID0gIiI7DQoJCQlpZiAoZ3JkU3RsVmFsICYmICdub25lJyAhPSBncmRTdGxWYWwgJiYgY29udFJvd0l0ZW0uZmluYWxTY29yZUlucHV0LnJlYWRPbmx5KQ0KCQkJew0KCQkJCWNvbnRSb3dJdGVtLmZpbmFsU2NvcmVJbnB1dC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiIjsNCgkJCQljb250Um93SXRlbS5maW5hbFNjb3JlSW5wdXQucmVhZE9ubHkgPSBmYWxzZTsNCgkJCQlyZWFkT25seU9iai5yZXNldFJlYWRPbmx5KFtjb250Um93SXRlbV0pOw0KCQkJfQkJCQ0KCQl9DQoJCWVsc2UNCgkJew0KCQkJY29udFJvd0l0ZW0uZmluYWxTY29yZUNlbGwuaW5uZXJIVE1MID0gIiI7DQoJCQljb250Um93SXRlbS5maW5hbFNjb3JlSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOw0KCQkJY29udFJvd0l0ZW0uZmluYWxTY29yZUlucHV0LnR5cGUgPSAidGV4dCI7DQoJCQljb250Um93SXRlbS5maW5hbFNjb3JlSW5wdXQubmFtZSA9IGZpbmFsU2NvcmVFbGVOYW1lOwkJDQoJCQljb250Um93SXRlbS5maW5hbFNjb3JlSW5wdXQubWF4TGVuZ3RoID0gODsNCgkJCWNvbnRSb3dJdGVtLmZpbmFsU2NvcmVJbnB1dC5zaXplID0gODsNCgkJCWluaXRFbGVTdHlsZShjb250Um93SXRlbS5maW5hbFNjb3JlSW5wdXQpOw0KCQkJY29udFJvd0l0ZW0uZmluYWxTY29yZVN5bWJvbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsNCgkJCWNvbnRSb3dJdGVtLmZpbmFsU2NvcmVTeW1ib2wuaWQgPSBmaW5hbFNjb3JlRWxlTmFtZSArICIqc2JsIjsNCgkJCWNvbnRSb3dJdGVtLmZpbmFsU2NvcmVNc2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7DQoJCQljb250Um93SXRlbS5maW5hbFNjb3JlTXNnLmlkID0gZmluYWxTY29yZUVsZU5hbWUgKyAiKm1zZyI7CQkNCgkJCWZvcm1hdEVsZXMoY29udFJvd0l0ZW0sIGNvbnRSb3dJdGVtLmZpbmFsU2NvcmVDZWxsLGNvbnRSb3dJdGVtLmZpbmFsU2NvcmVJbnB1dCxjb250Um93SXRlbS5maW5hbFNjb3JlU3ltYm9sLGNvbnRSb3dJdGVtLmZpbmFsU2NvcmVNc2cpOw0KCQkJaWYgKCdwZXJjZW50YWdlJyA9PSBncmRTdGxWYWwpDQoJCQl7DQoJCQkJY29udFJvd0l0ZW0uZmluYWxTY29yZVN5bWJvbC5pbm5lckhUTUwgPSAiJSI7DQoJCQl9DQoJCQlpbnNlcnRBZGphY2VudChjb250Um93SXRlbS5maW5hbFNjb3JlTXNnKTsNCgkJCQ0KCQkJaWYoKHR5cGVvZiBjb250QmFsYW5jZSkgIT0gJ3VuZGVmaW5lZCcgJiYgY29udFJvd0l0ZW0gaW5zdGFuY2VvZiBDb250RWR1Y2F0aW9uSXRlbSkNCgkJCXsNCgkJCQl2YXIgY29udEVkdUl0ZW0gPSBjb250Um93SXRlbTsNCgkJCQlBYzM2MC5hdHRhY2hFdmVudChjb250RWR1SXRlbS5maW5hbFNjb3JlSW5wdXQsIm9uYmx1ciIsIGZ1bmN0aW9uKCl7DQoJCQkJCWNvbnRCYWxhbmNlLnVwZGF0ZUNvbnRCYWxhbmNlSXRlbURhdGEoY29udEVkdUl0ZW0uY29udEVkdU5hbWVDb21iby5nZXRWYWx1ZSgpLCBjb250RWR1SXRlbS5jb250RWR1TmFtZUNvbWJvLmdldFZhbHVlKCkpOw0KCQkJCX0pOw0KCQkJfQkNCgkJfQ0KCQkNCgkJaWYgKCdwZXJjZW50YWdlJyA9PSBncmRTdGxWYWwpDQoJCXsNCgkJCWNvbnRSb3dJdGVtLmZpbmFsU2NvcmVTeW1ib2wuaW5uZXJIVE1MID0gIiUiOw0KCQl9DQoJCWVsc2UNCgkJew0KCQkJaWYgKCdub25lJyA9PSBncmRTdGxWYWwgfHwgIWdyZFN0bFZhbCkNCgkJCXsNCgkJCQljb250Um93SXRlbS5maW5hbFNjb3JlSW5wdXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiI7DQoJCQkJY29udFJvd0l0ZW0uZmluYWxTY29yZUlucHV0LnJlYWRPbmx5ID0gZmFsc2U7DQoJCQkJcmVhZE9ubHlPYmoucmVzZXRSZWFkT25seShbY29udFJvd0l0ZW1dKTsNCgkJCX0JCQkNCgkJCWNvbnRSb3dJdGVtLmZpbmFsU2NvcmVTeW1ib2wuaW5uZXJIVE1MID0gIiI7DQoJCX0JDQoJfQ0KfQ0KDQpmdW5jdGlvbiBwdXRIaWRkZW5Qcm92aWRlckRldGFpbDRDb250RWR1KGNvbnRFZHUsY29udEVkdUl0ZW0pDQp7DQoJY29udEVkdS5hZGRyZXNzTGluZTEudmFsdWUgPSBjb250RWR1SXRlbVsidmFsdWUoY29udFByb3ZpZGVyRGV0YWlsTW9kZWwqYWRkcmVzczEpIl07DQoJY29udEVkdS5hZGRyZXNzTGluZTIudmFsdWUgPSBjb250RWR1SXRlbVsidmFsdWUoY29udFByb3ZpZGVyRGV0YWlsTW9kZWwqYWRkcmVzczIpIl07DQoJY29udEVkdS5hZGRyZXNzTGluZTMudmFsdWUgPSBjb250RWR1SXRlbVsidmFsdWUoY29udFByb3ZpZGVyRGV0YWlsTW9kZWwqYWRkcmVzczMpIl07DQoJY29udEVkdS5jaXR5LnZhbHVlID0gY29udEVkdUl0ZW1bInZhbHVlKGNvbnRQcm92aWRlckRldGFpbE1vZGVsKmNpdHkpIl07DQoJY29udEVkdS5zdGF0ZS52YWx1ZSA9IGNvbnRFZHVJdGVtWyJ2YWx1ZShjb250UHJvdmlkZXJEZXRhaWxNb2RlbCpzdGF0ZSkiXTsNCgljb250RWR1LnppcC52YWx1ZSA9IGNvbnRFZHVJdGVtWyJ2YWx1ZShjb250UHJvdmlkZXJEZXRhaWxNb2RlbCp6aXApIl07DQoJY29udEVkdS5mYXgudmFsdWUgPSBjb250RWR1SXRlbVsidmFsdWUoY29udFByb3ZpZGVyRGV0YWlsTW9kZWwqZmF4KSJdOw0KCWNvbnRFZHUucGhvbmUxLnZhbHVlID0gY29udEVkdUl0ZW1bInZhbHVlKGNvbnRQcm92aWRlckRldGFpbE1vZGVsKnBob25lMSkiXTsNCgljb250RWR1LnBob25lMi52YWx1ZSA9IGNvbnRFZHVJdGVtWyJ2YWx1ZShjb250UHJvdmlkZXJEZXRhaWxNb2RlbCpwaG9uZTIpIl07DQoJY29udEVkdS5waG9uZTFDb3VudHJ5Q29kZS52YWx1ZSA9IGNvbnRFZHVJdGVtWyJ2YWx1ZShjb250UHJvdmlkZXJEZXRhaWxNb2RlbCpwaG9uZTFDb3VudHJ5Q29kZSkiXTsNCgljb250RWR1LnBob25lMkNvdW50cnlDb2RlLnZhbHVlID0gY29udEVkdUl0ZW1bInZhbHVlKGNvbnRQcm92aWRlckRldGFpbE1vZGVsKnBob25lMkNvdW50cnlDb2RlKSJdOw0KCWNvbnRFZHUuZmF4Q291bnRyeUNvZGUudmFsdWUgPSBjb250RWR1SXRlbVsidmFsdWUoY29udFByb3ZpZGVyRGV0YWlsTW9kZWwqZmF4Q291bnRyeUNvZGUpIl07DQoJY29udEVkdS5jb3VudHJ5Q29kZS52YWx1ZSA9IGNvbnRFZHVJdGVtWyJ2YWx1ZShjb250UHJvdmlkZXJEZXRhaWxNb2RlbCpjb3VudHJ5Q29kZSkiXTsNCgljb250RWR1LmVtYWlsLnZhbHVlID0gY29udEVkdUl0ZW1bInZhbHVlKGNvbnRQcm92aWRlckRldGFpbE1vZGVsKmVtYWlsKSJdOw0KCWNvbnRFZHUuY29tbWVudC52YWx1ZSA9IGNvbnRFZHVJdGVtWyJ2YWx1ZShjb250Q29tbWVudHMpIl07DQp9DQoNCmZ1bmN0aW9uIHJlc2V0Q29udEV1ZGNhdGlvbihjb250RWR1Y2F0aW9uLGNvbnRFZHVjYXRpb25JdGVtcyxjYW5EZWxSZXF1aXJlZCxyZXF1aXJlZExibCxvcHRpb25hbExibCxwYXNzTGJsLGZhaWxMYmwsZW1wdHlDb250RWR1LGlzRnJvbVJlZikNCnsNCgl2YXIgYWRkcjFBcnIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgidmFsdWUoY29udFByb3ZpZGVyRGV0YWlsTW9kZWwqYWRkcmVzczEpIik7DQoJdmFyIGFkZHIyQXJyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoInZhbHVlKGNvbnRQcm92aWRlckRldGFpbE1vZGVsKmFkZHJlc3MyKSIpOw0KCXZhciBhZGRyM0FyciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJ2YWx1ZShjb250UHJvdmlkZXJEZXRhaWxNb2RlbCphZGRyZXNzMykiKTsNCgl2YXIgY2l0eUFyciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJ2YWx1ZShjb250UHJvdmlkZXJEZXRhaWxNb2RlbCpjaXR5KSIpOw0KCXZhciBzdGF0ZUFyciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJ2YWx1ZShjb250UHJvdmlkZXJEZXRhaWxNb2RlbCpzdGF0ZSkiKTsNCgl2YXIgemlwQXJyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoInZhbHVlKGNvbnRQcm92aWRlckRldGFpbE1vZGVsKnppcCkiKTsNCgl2YXIgcGhvbmUxQXJyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoInZhbHVlKGNvbnRQcm92aWRlckRldGFpbE1vZGVsKnBob25lMSkiKTsNCgl2YXIgcGhvbmUyQXJyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoInZhbHVlKGNvbnRQcm92aWRlckRldGFpbE1vZGVsKnBob25lMikiKTsNCgl2YXIgcGhvbmUxQ0NBcnIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgidmFsdWUoY29udFByb3ZpZGVyRGV0YWlsTW9kZWwqcGhvbmUxQ291bnRyeUNvZGUpIik7DQoJdmFyIHBob25lMkNDQXJyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoInZhbHVlKGNvbnRQcm92aWRlckRldGFpbE1vZGVsKnBob25lMkNvdW50cnlDb2RlKSIpOw0KCXZhciBlbWFpbEFyciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJ2YWx1ZShjb250UHJvdmlkZXJEZXRhaWxNb2RlbCplbWFpbCkiKTsNCgl2YXIgZmF4QXJyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoInZhbHVlKGNvbnRQcm92aWRlckRldGFpbE1vZGVsKmZheCkiKTsNCgl2YXIgZmF4Q0NBcnIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgidmFsdWUoY29udFByb3ZpZGVyRGV0YWlsTW9kZWwqZmF4Q291bnRyeUNvZGUpIik7DQoJdmFyIGNvbW1lbnRBcnIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgidmFsdWUoY29udENvbW1lbnRzKSIpOw0KCXZhciBjY0FyciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJ2YWx1ZShjb250UHJvdmlkZXJEZXRhaWxNb2RlbCpjb3VudHJ5Q29kZSkiKTsNCgkNCglpZiAoIWNvbnRFZHVjYXRpb24uYV9jb250RWR1Y2F0aW9ucykNCgl7DQoJCXJldHVybiBmYWxzZTsNCgl9DQoJdmFyIGl0ZW1Jbng9MA0KCWZvciAodmFyIGNvdW50PTA7Y291bnQ8IGNvbnRFZHVjYXRpb24uYV9jb250RWR1Y2F0aW9ucy5sZW5ndGg7Y291bnQrKykNCgkJewkJCQ0KCQkJdmFyIGNvbnRFZHUgPSBjb250RWR1Y2F0aW9uLmFfY29udEVkdWNhdGlvbnNbY291bnRdOwkNCgkJCWlmIChjb250RWR1ID09IG51bGwpDQoJCQl7DQoJCQkJY29udGludWU7DQoJCQl9DQoJCQl2YXIgY29udEVkdUl0ZW0gPSBlbXB0eUNvbnRFZHU7CQkJDQoJCQlpZiAoY29udEVkdWNhdGlvbkl0ZW1zICYmIGNvbnRFZHVjYXRpb25JdGVtcy5sZW5ndGggPiBjb250RWR1LmlfaW5kZXgpDQoJCQl7DQoJCQkJY29udEVkdUl0ZW0gPSBjb250RWR1Y2F0aW9uSXRlbXNbY29udEVkdS5pX2luZGV4XTsNCgkJCX0NCgkJCQ0KCQkJaWYgKGNvbnRFZHUgIT0gbnVsbCAmJiBjb250RWR1IGluc3RhbmNlb2YgQ29udEVkdWNhdGlvbkl0ZW0pDQoJCQl7DQoJCQkJY29udEVkdS5wbmFtZUNvbWJvLnNldFZhbHVlKGNvbnRFZHVJdGVtWyJjb250UHJvdmlkZXJOYW1lIl0pOw0KCQkJCWNvbnRFZHUuc2VxdWVuY2UudmFsdWUgPSBjb250RWR1SXRlbVsiY29udEVkdVNlcXVlbmNlIl07DQoJCQkJY29udEVkdS5jb250RWR1TmFtZUNvbWJvLnNldFZhbHVlKGNvbnRFZHVJdGVtWyJjb250RWR1TmFtZSJdKTsNCgkJCQljb250RWR1LmdyYWRpbmdTdHlsZS52YWx1ZSA9IGNvbnRFZHVJdGVtWyJjb250R3JhZGluZ1N0eWxlIl07DQoJCQkJY29udEVkdS5yZXF1aXJlZEhvdXJzLnZhbHVlID0gY29udEVkdUl0ZW1bImNvbnRSZXF1aXJlZEhvdXJzIl07DQoJCQkJY29udEVkdS5jb250RGF0ZU9mQ2xhc3MudmFsdWUgPSBjb250RWR1SXRlbVsiY29udERhdGVPZkNsYXNzRGVzIl07DQoJCQkJY29udEVkdS5jb250SG91cnNDb21wbGV0ZWQudmFsdWUgPSBjb250RWR1SXRlbVsiY29udEhvdXJzQ29tcGxldGVkRGVzIl07DQoJCQkJY29udEVkdS5jb250RmluYWxTY29yZS52YWx1ZSA9IGNvbnRFZHVJdGVtWyJjb250RmluYWxTY29yZURlcyJdOw0KCQkJCWNvbnRFZHUuY29udFByb3ZpZGVyTm8udmFsdWUgPSBjb250RWR1SXRlbVsiY29udFByb3ZpZGVyTm9EZXMiXTsNCgkJCQkNCgkJCQlwdXRIaWRkZW5Qcm92aWRlckRldGFpbDRDb250RWR1KGNvbnRFZHUsY29udEVkdUl0ZW0pOw0KCQkJCQ0KCQkJCWlmIChjb250RWR1LmNvbnRFZHVOYW1lQ29tYm8udmFsdWUgPT0gJycpDQoJCQkJew0KCQkJCQl2YXIgdWl1aWRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjb250RWR1IiArIGNvbnRFZHUuaV9pbmRleCArICJVSVVJRCIpOw0KCQkJCQlpZiAodWl1aWRJbnB1dCkNCgkJCQkJew0KCQkJCQkJY2xlYXJUZW1wbGF0ZUJhY2t1cCh1aXVpZElucHV0LnZhbHVlKTsNCgkJCQkJfQ0KCQkJCQkNCgkJCQkJdmFyIGNvdW50cnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmFsdWUoY29udFByb3ZpZGVyRGV0YWlsTW9kZWwqY291bnRyeUNvZGUnK2NvbnRFZHUuaV9pbmRleCsnKScpOw0KCQkJCQlpZihjb3VudHJ5KQ0KCQkJCQl7DQoJCQkJCQljb3VudHJ5LmRlbGV0ZWQgPSAiWSI7DQoJCQkJCX0NCgkJCQkJY29udEVkdWNhdGlvbi5hX2NvbnRFZHVjYXRpb25zW2NvbnRFZHUuaV9pbmRleF0gPSBudWxsOw0KCQkJCQkNCgkJCQkJaWYgKGNvbnRFZHVjYXRpb24uaV9zZWxlY3RlZEl0ZW1JbmRleCA9PSBjb250RWR1LmlfaW5kZXgpDQoJCQkJCXsNCgkJCQkJCWNvbnRFZHVjYXRpb24uaV9zZWxlY3RlZEl0ZW1JbmRleCA9IC0xOw0KCQkJCQl9DQoNCgkJCQkJY29udEVkdS5kZXN0cm95KCk7DQoJCQkJCWNvbnRCYWxhbmNlLnVwZGF0ZUNvbnRCYWxhbmNlSXRlbURhdGEoJycsIGNvbnRFZHUuY29udEVkdU5hbWVDb21iby5nZXRWYWx1ZSgpKTsNCgkJCQkJY29udGludWU7DQoJCQkJfQ0KCQkJCQ0KCQkJCWlmIChjb250RWR1SXRlbVsiY29udFJlcXVpcmVkRmxhZyJdICYmIGNvbnRFZHVJdGVtWyJjb250UmVxdWlyZWRGbGFnIl0gPT0gJ1knKQ0KCQkJCXsJCQkJCQkJCQkJDQoJCQkJCWNvbnRFZHUucmVxdWlyZWRGbGFnLnZhbHVlID0gIlkiOw0KCQkJCX0NCgkJCQlpZiAoY29udEVkdS5jb250RWR1TmFtZUhpZGRlbikNCgkJCQl7DQoJCQkJCWNvbnRFZHUuY29udEVkdU5hbWVIaWRkZW4udmFsdWUgPSBjb250RWR1SXRlbVsiY29udEVkdU5hbWUiXTsNCgkJCQl9DQoJCQkJaWYgKGNvbnRFZHUucG5hbWVJbnB1dEhpZGRlbikNCgkJCQl7DQoJCQkJCWNvbnRFZHUucG5hbWVJbnB1dEhpZGRlbi52YWx1ZSA9IGNvbnRFZHVJdGVtWyJjb250UHJvdmlkZXJOYW1lIl07DQoJCQkJfQ0KCQkJCWlmIChjb250RWR1LnBub0lucHV0KQ0KCQkJCXsNCgkJCQkJY29udEVkdS5wbm9JbnB1dC52YWx1ZSA9IGNvbnRFZHVJdGVtWyJjb250UHJvdmlkZXJObyJdOwkJCQkJDQoJCQkJCXNldEZsZFN0YXR1cyhjb250RWR1LnBub0lucHV0LCBjb250RWR1SXRlbSk7DQoJCQkJCWlmKGNvbnRFZHVJdGVtWyJjb250QXBwcm92ZWRGbGFnIl0gPT0gJ1knICYmICdZJyAhPSBpc0Zyb21SZWYpDQoJCQkJCXsNCgkJCQkJCXNldFJlYWRPbmx5U3R5bGUoY29udEVkdS5wbm9JbnB1dCk7DQoJCQkJCX0JDQoJCQkJfQ0KCQkJCXNldENvbnRFZHVEYXRhKGNvbnRFZHUsY29udEVkdUl0ZW0scmVxdWlyZWRMYmwsb3B0aW9uYWxMYmwscGFzc0xibCxmYWlsTGJsKTsNCgkJCQlpZiAoY29udEVkdS5maW5hbFNjb3JlSW5wdXQpDQoJCQkJew0KCQkJCQljb250RWR1LmZpbmFsU2NvcmVJbnB1dC52YWx1ZSA9IGNvbnRFZHVJdGVtWyJjb250RmluYWxTY29yZSJdOw0KCQkJCX0NCgkJCQlpZiAoY29udEVkdUl0ZW1bImNvbnRBcHByb3ZlZEZsYWciXSkNCgkJCQl7DQoJCQkJCWNvbnRFZHUuYXBwcm92ZWRGbGFnLnZhbHVlID0gY29udEVkdUl0ZW1bImNvbnRBcHByb3ZlZEZsYWciXTsNCgkJCQl9DQoJCQkJaWYgKGNvbnRFZHVJdGVtWyJjb250U3luY0ZsYWciXSkNCgkJCQl7DQoJCQkJCWNvbnRFZHUuc3luY0ZsYWcudmFsdWUgPSBjb250RWR1SXRlbVsiY29udFN5bmNGbGFnIl07DQoJCQkJfQ0KCQkJCWlmIChjb250RWR1SXRlbVsiY29udENvbnRhY3RTZXFOYnIiXSkNCgkJCQl7DQoJCQkJCWNvbnRFZHUuY29udGFjdFNlcU51bWJlci52YWx1ZSA9IGNvbnRFZHVJdGVtWyJjb250Q29udGFjdFNlcU5iciJdOw0KCQkJCX0NCgkJCQlpZihjb250RWR1SXRlbVsiY29udEVudGl0eUlEIl0pDQoJCQkJew0KCQkJCQljb250RWR1LmVudGl0eUlELnZhbHVlID0gY29udEVkdUl0ZW1bImNvbnRFbnRpdHlJRCJdOw0KCQkJCX0NCgkJCQlpZiAoY29udEVkdS5jbGFzc05hbWVJbnB1dCkNCgkJCQl7DQoJCQkJCWNvbnRFZHUuY2xhc3NOYW1lSW5wdXQudmFsdWUgPSBjb250RWR1SXRlbVsiY29udENsYXNzTmFtZSJdOw0KCQkJCX0NCgkJCQlpZiAoY29udEVkdS5kYXRlT2ZDbGFzc0lucHV0KQ0KCQkJCXsNCgkJCQkJY29udEVkdS5kYXRlT2ZDbGFzc0lucHV0LnZhbHVlID0gY29udEVkdUl0ZW1bImNvbnREYXRlT2ZDbGFzcyJdOw0KCQkJCX0NCgkJCQlpZiAoY29udEVkdS5ob3Vyc0NtcGxJbnB1dCkNCgkJCQl7DQoJCQkJCWNvbnRFZHUuaG91cnNDbXBsSW5wdXQudmFsdWUgPSBjb250RWR1SXRlbVsiY29udEhvdXJzQ29tcGxldGVkIl07DQoJCQkJfQkJDQoJCQkJaWYgKGNvbnRFZHUuY2hlY2tCb3gpDQoJCQkJew0KCQkJCQljb250RWR1LmNoZWNrQm94LmRpc2FibGVkID0gY29udEVkdUl0ZW1bImNvbnRSZXF1aXJlZEZsYWciXSA9PSAnWScgJiYgIWNhbkRlbFJlcXVpcmVkOw0KCQkJCX0NCgkJCX0gDQoJCQkNCgkJCXZhciBjb250RWR1SXRlbUxlbmd0aCA9IGdldEF2YWlsYWJsZUxlbmd0aChjb250RWR1Y2F0aW9uLmFfY29udEVkdWNhdGlvbnMpOw0KCQkJLy9TZXQgdGhlIGNvdW50cnkgdmFsdWUgZmlyc3QsIHRoZW4gY291bGQgZ2V0IHRoZSBjb3JyZWN0IG1hc2suDQoJCQlpZiAoY2NBcnIgJiYgY2NBcnIubGVuZ3RoID4gY29udEVkdUl0ZW1MZW5ndGgpDQoJCQl7DQoJCQkJY2NBcnJbaXRlbUlueCsxXS52YWx1ZSA9IGNvbnRFZHVJdGVtWyJ2YWx1ZShjb250UHJvdmlkZXJEZXRhaWxNb2RlbCpjb3VudHJ5Q29kZSkiXTsNCgkJCQljY0FycltpdGVtSW54KzFdLnN0YXRlViA9IGNvbnRFZHVJdGVtWyJ2YWx1ZShjb250UHJvdmlkZXJEZXRhaWxNb2RlbCpzdGF0ZSkiXTsNCgkJCQljY0FycltpdGVtSW54KzFdLmhhc0xvYWQgPSB0cnVlOw0KCQkJCUFjMzYwLmRpc3BhdGNoRXZlbnQoY2NBcnJbaXRlbUlueCsxXSwgJ2NoYW5nZScpOw0KCQkJCWNjQXJyW2l0ZW1JbngrMV0uaGFzTG9hZCA9IGZhbHNlOw0KCQkJfQ0KCQkJaWYgKGFkZHIxQXJyICYmIGFkZHIxQXJyLmxlbmd0aCA+IGNvbnRFZHVJdGVtTGVuZ3RoKQ0KCQkJew0KCQkJCWFkZHIxQXJyW2l0ZW1JbngrMV0udmFsdWUgPSBjb250RWR1SXRlbVsidmFsdWUoY29udFByb3ZpZGVyRGV0YWlsTW9kZWwqYWRkcmVzczEpIl07DQoJCQl9DQoJCQlpZiAoYWRkcjJBcnIgJiYgYWRkcjJBcnIubGVuZ3RoID4gY29udEVkdUl0ZW1MZW5ndGgpDQoJCQl7DQoJCQkJYWRkcjJBcnJbaXRlbUlueCsxXS52YWx1ZSA9IGNvbnRFZHVJdGVtWyJ2YWx1ZShjb250UHJvdmlkZXJEZXRhaWxNb2RlbCphZGRyZXNzMikiXTsNCgkJCX0NCgkJCWlmIChhZGRyM0FyciAmJiBhZGRyM0Fyci5sZW5ndGggPiBjb250RWR1SXRlbUxlbmd0aCkNCgkJCXsNCgkJCQlhZGRyM0FycltpdGVtSW54KzFdLnZhbHVlID0gY29udEVkdUl0ZW1bInZhbHVlKGNvbnRQcm92aWRlckRldGFpbE1vZGVsKmFkZHJlc3MzKSJdOw0KCQkJfQ0KCQkJaWYgKGNpdHlBcnIgJiYgY2l0eUFyci5sZW5ndGggPiBjb250RWR1SXRlbUxlbmd0aCkNCgkJCXsNCgkJCQljaXR5QXJyW2l0ZW1JbngrMV0udmFsdWUgPSBjb250RWR1SXRlbVsidmFsdWUoY29udFByb3ZpZGVyRGV0YWlsTW9kZWwqY2l0eSkiXTsNCgkJCX0NCgkJCWlmIChzdGF0ZUFyciAmJiBzdGF0ZUFyci5sZW5ndGggPiBjb250RWR1SXRlbUxlbmd0aCkNCgkJCXsNCgkJCQlzdGF0ZUFycltpdGVtSW54KzFdLnZhbHVlID0gY29udEVkdUl0ZW1bInZhbHVlKGNvbnRQcm92aWRlckRldGFpbE1vZGVsKnN0YXRlKSJdOw0KCQkJfQ0KCQkJaWYgKHppcEFyciAmJiB6aXBBcnIubGVuZ3RoID4gY29udEVkdUl0ZW1MZW5ndGgpDQoJCQl7DQoJCQkJemlwQXJyW2l0ZW1JbngrMV0udmFsdWUgPSBjb250RWR1SXRlbVsidmFsdWUoY29udFByb3ZpZGVyRGV0YWlsTW9kZWwqemlwKSJdOw0KCQkJfQ0KCQkJaWYgKHBob25lMUFyciAmJiBwaG9uZTFBcnIubGVuZ3RoID4gY29udEVkdUl0ZW1MZW5ndGgpDQoJCQl7DQoJCQkJcGhvbmUxQXJyW2l0ZW1JbngrMV0udmFsdWUgPSBjb250RWR1SXRlbVsidmFsdWUoY29udFByb3ZpZGVyRGV0YWlsTW9kZWwqcGhvbmUxKSJdOw0KCQkJfQ0KCQkJaWYgKHBob25lMkFyciAmJiBwaG9uZTJBcnIubGVuZ3RoID4gY29udEVkdUl0ZW1MZW5ndGgpDQoJCQl7DQoJCQkJcGhvbmUyQXJyW2l0ZW1JbngrMV0udmFsdWUgPSBjb250RWR1SXRlbVsidmFsdWUoY29udFByb3ZpZGVyRGV0YWlsTW9kZWwqcGhvbmUyKSJdOw0KCQkJfQ0KCQkJaWYgKHBob25lMUNDQXJyICYmIHBob25lMUNDQXJyLmxlbmd0aCA+IGNvbnRFZHVJdGVtTGVuZ3RoKQ0KCQkJew0KCQkJCXBob25lMUNDQXJyW2l0ZW1JbngrMV0udmFsdWUgPSBjb250RWR1SXRlbVsidmFsdWUoY29udFByb3ZpZGVyRGV0YWlsTW9kZWwqcGhvbmUxQ291bnRyeUNvZGUpIl07CQkNCgkJCX0NCgkJCWlmIChwaG9uZTJDQ0FyciAmJiBwaG9uZTJDQ0Fyci5sZW5ndGggPiBjb250RWR1SXRlbUxlbmd0aCkNCgkJCXsNCgkJCQlwaG9uZTJDQ0FycltpdGVtSW54KzFdLnZhbHVlID0gY29udEVkdUl0ZW1bInZhbHVlKGNvbnRQcm92aWRlckRldGFpbE1vZGVsKnBob25lMkNvdW50cnlDb2RlKSJdOw0KCQkJfQ0KCQkJaWYgKGVtYWlsQXJyICYmIGVtYWlsQXJyLmxlbmd0aCA+IGNvbnRFZHVJdGVtTGVuZ3RoKQ0KCQkJew0KCQkJCWVtYWlsQXJyW2l0ZW1JbngrMV0udmFsdWUgPSBjb250RWR1SXRlbVsidmFsdWUoY29udFByb3ZpZGVyRGV0YWlsTW9kZWwqZW1haWwpIl07DQoJCQl9DQoJCQlpZiAoZmF4QXJyICYmIGZheEFyci5sZW5ndGggPiBjb250RWR1SXRlbUxlbmd0aCkNCgkJCXsNCgkJCQlmYXhBcnJbaXRlbUlueCsxXS52YWx1ZSA9IGNvbnRFZHVJdGVtWyJ2YWx1ZShjb250UHJvdmlkZXJEZXRhaWxNb2RlbCpmYXgpIl07DQoJCQl9DQoJCQlpZiAoZmF4Q0NBcnIgJiYgZmF4Q0NBcnIubGVuZ3RoID4gY29udEVkdUl0ZW1MZW5ndGgpDQoJCQl7DQoJCQkJZmF4Q0NBcnJbaXRlbUlueCsxXS52YWx1ZSA9IGNvbnRFZHVJdGVtWyJ2YWx1ZShjb250UHJvdmlkZXJEZXRhaWxNb2RlbCpmYXhDb3VudHJ5Q29kZSkiXTsNCgkJCX0NCgkJCWlmIChjb21tZW50QXJyICYmIGNvbW1lbnRBcnIubGVuZ3RoID4gY29udEVkdUl0ZW1MZW5ndGgpDQoJCQl7DQoJCQkJY29tbWVudEFycltpdGVtSW54KzFdLnZhbHVlID0gY29udEVkdUl0ZW1bInZhbHVlKGNvbnRDb21tZW50cykiXTsNCgkJCX0JDQoJCQkNCgkJCWRlYWxWYWx1ZXMoImNvbnRQcm92aWRlckRldGFpbE1vZGVsIiwgY29udEVkdS5pX2luZGV4LCBjb250RWR1SXRlbSk7DQoJCQlpdGVtSW54Kys7DQoJCX0vL2VuZCBmb3IgbG9vcA0KCQlyZXR1cm4gZmFsc2U7DQp9DQoNCmZ1bmN0aW9uIHJlc2V0QmFsVGFibGVWaWV3KHRoZUNvbnRFZHVjYXRpb24sY29udEJhbGFuY2VUYmwpDQp7CQ0KCWZvciAodmFyIGtleSBpbiBjb250QmFsYW5jZVRibC5hX2NvbnRCYWxuYWNlSXRlbXMpDQoJew0KCQl2YXIgYmFsSXRlbSA9IGNvbnRCYWxhbmNlVGJsLmFfY29udEJhbG5hY2VJdGVtc1trZXldOwkJDQoJCWlmIChiYWxJdGVtICE9IG51bGwgJiYgYmFsSXRlbSBpbnN0YW5jZW9mIENvbnRCYWxuYWNlSXRlbSkNCgkJewkJDQoJCQlpZihiYWxJdGVtLnJlcXVpcmVkRmxhZyA9PSAiWSIpDQoJCQl7DQoJCQkJdmFyIGNvbnRSZXF1aXJlZEhvdXJzID0gYmFsSXRlbS5yZXF1aXJlZEhvdXJzIDsNCgkJCQl2YXIgY29udENvbXBsZXRlZEhvdXJzID0gMDsNCiAgICAgICAgICAgIAkNCgkJCQliYWxJdGVtLmNvbXBsZXRlZEhvdXJzID0gY29udENvbXBsZXRlZEhvdXJzOw0KCQkJCWJhbEl0ZW0uYmFsYW5jZUR1ZSA9IGdldEJhbGFuY2VEdWUoY29udFJlcXVpcmVkSG91cnMsIGNvbnRDb21wbGV0ZWRIb3Vycyk7CQkNCgkJCQlpZihiYWxJdGVtLmNvbnRFZHVOYW1lQ2VsbCAhPSBudWxsICYmIGlzRXF1YWxzSWdub3JlQ2FzZShiYWxJdGVtLmNvbnRFZHVOYW1lQ2VsbC5pbm5lclRleHQsYmFsSXRlbS5jb250TmFtZSkpDQoJCQkJew0KCQkJCQliYWxJdGVtLmRlc3Ryb3koKTsNCgkJCQl9DQoJCQl9DQoJCQllbHNlDQoJCQl7DQoJCQkJYmFsSXRlbS5kZXN0cm95KCk7DQoJCQkJY29udEJhbGFuY2VUYmwuYV9jb250QmFsbmFjZUl0ZW1zW2tleV0gPSBudWxsOw0KCQkJfQ0KCQl9IA0KCX0JDQoNCglmb3IgKHZhciBrZXkgaW4gdGhlQ29udEVkdWNhdGlvbi5hX2NvbnRFZHVjYXRpb25zKQ0KCXsNCgkJdmFyIGNvbnRFZHUgPSB0aGVDb250RWR1Y2F0aW9uLmFfY29udEVkdWNhdGlvbnNba2V5XTsNCgkJDQoJCWlmIChjb250RWR1ICE9IG51bGwgJiYgY29udEVkdSBpbnN0YW5jZW9mIENvbnRFZHVjYXRpb25JdGVtKQ0KCQl7DQoJCQl2YXIgaXRlbU5hbWUgPSBjb250RWR1LmNvbnRFZHVOYW1lQ29tYm8uZ2V0VmFsdWUoKTsNCgkJCWlmIChpdGVtTmFtZSAhPSBudWxsICYmIHRyaW0oaXRlbU5hbWUpICE9ICcnKQ0KCQkJewkJCQ0KCQkJCWNvbnRCYWxhbmNlVGJsLnVwZGF0ZUNvbnRCYWxhbmNlSXRlbURhdGEoaXRlbU5hbWUsICcnKTsJCQkJDQoJCQl9DQoJCX0gDQoJfQkNCn0NCg0KZnVuY3Rpb24gY2xlYXJUZW1wbGF0ZUJhY2t1cCh1aXVpZCkNCnsNCgl2YXIgdGVtcGxhdGVCYWtTdHJpbmdVSU5hbWUgPVRlbXBsYXRlSGVscGVyLmFkZFVJVUlEKEdFTkVSSUNfVEVNUExBVEVfU1RSVUNUVVJFX0JBS19QUkVGSVgsdWl1aWQpOw0KCXZhciBsYXlvdXRCYWtTdHJpbmdVSU5hbWUgPVRlbXBsYXRlSGVscGVyLmFkZFVJVUlEKEdFTkVSSUNfVEVNUExBVEVfTEFZT1VUX0JBS19QUkVGSVgsdWl1aWQpOw0KDQoJdmFyIHRlbXBsYXRlQmFrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGVtcGxhdGVCYWtTdHJpbmdVSU5hbWUpOw0KCXZhciBsYXlvdXRCYWsgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChsYXlvdXRCYWtTdHJpbmdVSU5hbWUpOw0KCXZhciB0ZW1wbGF0ZU1vZGVsQnJpZGdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGVtcGxhdGVCYWtTdHJpbmdVSU5hbWUgKyAndGVtcGxhdGVNb2RlbEJyaWRnZScpOw0KCXZhciBsYXlvdXRNb2RlbDFCcmlkZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChsYXlvdXRCYWtTdHJpbmdVSU5hbWUgKyAnbGF5b3V0TW9kZWwxQnJpZGdlJyk7DQoJDQoJaWYgKHRlbXBsYXRlQmFrKQ0KCQl0ZW1wbGF0ZUJhay52YWx1ZSA9ICIiOw0KCWlmIChsYXlvdXRCYWspDQoJCWxheW91dEJhay52YWx1ZSA9ICIiOw0KCWlmICh0ZW1wbGF0ZU1vZGVsQnJpZGdlKQ0KCQl0ZW1wbGF0ZU1vZGVsQnJpZGdlLnZhbHVlID0gIiI7DQoJaWYgKGxheW91dE1vZGVsMUJyaWRnZSkNCgkJbGF5b3V0TW9kZWwxQnJpZGdlLnZhbHVlID0gIiI7CQ0KfQ0KDQpmdW5jdGlvbiBwdXRIaWRkZW5Qcm92aWRlckRldGFpbFZhbHVlNEV4YW0oZXhhbSxleGFtSXRlbSkNCnsNCglleGFtLmFkZHJlc3NMaW5lMS52YWx1ZSA9IGV4YW1JdGVtWyJ2YWx1ZShleGFtUHJvdmlkZXJEZXRhaWxNb2RlbCphZGRyZXNzMSkiXTsNCglleGFtLmFkZHJlc3NMaW5lMi52YWx1ZSA9IGV4YW1JdGVtWyJ2YWx1ZShleGFtUHJvdmlkZXJEZXRhaWxNb2RlbCphZGRyZXNzMikiXTsNCglleGFtLmFkZHJlc3NMaW5lMy52YWx1ZSA9IGV4YW1JdGVtWyJ2YWx1ZShleGFtUHJvdmlkZXJEZXRhaWxNb2RlbCphZGRyZXNzMykiXTsNCglleGFtLmNpdHkudmFsdWUgPSBleGFtSXRlbVsidmFsdWUoZXhhbVByb3ZpZGVyRGV0YWlsTW9kZWwqY2l0eSkiXTsNCglleGFtLnN0YXRlLnZhbHVlID0gZXhhbUl0ZW1bInZhbHVlKGV4YW1Qcm92aWRlckRldGFpbE1vZGVsKnN0YXRlKSJdOw0KCWV4YW0uemlwLnZhbHVlID0gZXhhbUl0ZW1bInZhbHVlKGV4YW1Qcm92aWRlckRldGFpbE1vZGVsKnppcCkiXTsNCglleGFtLmZheC52YWx1ZSA9IGV4YW1JdGVtWyJ2YWx1ZShleGFtUHJvdmlkZXJEZXRhaWxNb2RlbCpmYXgpIl07DQoJZXhhbS5waG9uZTEudmFsdWUgPSBleGFtSXRlbVsidmFsdWUoZXhhbVByb3ZpZGVyRGV0YWlsTW9kZWwqcGhvbmUxKSJdOw0KCWV4YW0ucGhvbmUyLnZhbHVlID0gZXhhbUl0ZW1bInZhbHVlKGV4YW1Qcm92aWRlckRldGFpbE1vZGVsKnBob25lMikiXTsNCglleGFtLnBob25lMUNvdW50cnlDb2RlLnZhbHVlID0gZXhhbUl0ZW1bInZhbHVlKGV4YW1Qcm92aWRlckRldGFpbE1vZGVsKnBob25lMUNvdW50cnlDb2RlKSJdOw0KCWV4YW0ucGhvbmUyQ291bnRyeUNvZGUudmFsdWUgPSBleGFtSXRlbVsidmFsdWUoZXhhbVByb3ZpZGVyRGV0YWlsTW9kZWwqcGhvbmUyQ291bnRyeUNvZGUpIl07DQoJZXhhbS5mYXhDb3VudHJ5Q29kZS52YWx1ZSA9IGV4YW1JdGVtWyJ2YWx1ZShleGFtUHJvdmlkZXJEZXRhaWxNb2RlbCpmYXhDb3VudHJ5Q29kZSkiXTsNCglleGFtLmNvdW50cnlDb2RlLnZhbHVlID0gZXhhbUl0ZW1bInZhbHVlKGV4YW1Qcm92aWRlckRldGFpbE1vZGVsKmNvdW50cnlDb2RlKSJdOw0KCWV4YW0uZW1haWwudmFsdWUgPSBleGFtSXRlbVsidmFsdWUoZXhhbVByb3ZpZGVyRGV0YWlsTW9kZWwqZW1haWwpIl07DQoJZXhhbS5jb21tZW50LnZhbHVlID0gZXhhbUl0ZW1bInZhbHVlKGV4YW1Db21tZW50cykiXTsNCglleGFtLnN1cHBvcnRlZExhbmd1YWdlcy52YWx1ZSA9IGV4YW1JdGVtWyJ2YWx1ZShleGFtUHJvdmlkZXJEZXRhaWxNb2RlbCpzdXBwb3J0ZWRMYW5ndWFnZXMpIl07DQoJZXhhbS5kcml2aW5nRGlyZWN0aW9ucy52YWx1ZSA9IGV4YW1JdGVtWyJ2YWx1ZShleGFtUHJvdmlkZXJEZXRhaWxNb2RlbCpkcml2aW5nRGlyZWN0aW9ucykiXTsNCglleGFtLnJlc2NoZWRDYW5jZWxSZWFzb24udmFsdWUgPSBleGFtSXRlbVsidmFsdWUoZXhhbVByb3ZpZGVyRGV0YWlsTW9kZWwqcmVzY2hlZENhbmNlbFJlYXNvbikiXTsNCglleGFtLmhhbmRpY2FwQWNjZXNzaWJsZURlcy52YWx1ZSA9IGV4YW1JdGVtWyJ2YWx1ZShleGFtUHJvdmlkZXJEZXRhaWxNb2RlbCpoYW5kaWNhcEFjY2Vzc2libGVEZXMpIl07CQ0KCWV4YW0uaXNIYW5kaWNhcEFjY2Vzc2libGUudmFsdWUgPSBleGFtSXRlbVsidmFsdWUoZXhhbVByb3ZpZGVyRGV0YWlsTW9kZWwqaXNIYW5kaWNhcEFjY2Vzc2libGUpIl07DQp9DQoNCmZ1bmN0aW9uIHJlc2V0RXhhbWluYXRpb24oZXhhbWluYXRpb24sZXhhbWluYXRpb25JdGVtcyxjYW5EZWxSZXF1aXJlZCxyZXF1aXJlZExibCxvcHRpb25hbExibCxwYXNzTGJsLGZhaWxMYmwsZW1wdHlFeGFtLG5hTGJsLGlzRnJvbVJlZikNCnsNCgl2YXIgYWRkcjFBcnIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgidmFsdWUoZXhhbVByb3ZpZGVyRGV0YWlsTW9kZWwqYWRkcmVzczEpIik7DQoJdmFyIGFkZHIyQXJyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoInZhbHVlKGV4YW1Qcm92aWRlckRldGFpbE1vZGVsKmFkZHJlc3MyKSIpOw0KCXZhciBhZGRyM0FyciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJ2YWx1ZShleGFtUHJvdmlkZXJEZXRhaWxNb2RlbCphZGRyZXNzMykiKTsNCgl2YXIgY2l0eUFyciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJ2YWx1ZShleGFtUHJvdmlkZXJEZXRhaWxNb2RlbCpjaXR5KSIpOw0KCXZhciBzdGF0ZUFyciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJ2YWx1ZShleGFtUHJvdmlkZXJEZXRhaWxNb2RlbCpzdGF0ZSkiKTsNCgl2YXIgemlwQXJyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoInZhbHVlKGV4YW1Qcm92aWRlckRldGFpbE1vZGVsKnppcCkiKTsNCgl2YXIgcGhvbmUxQXJyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoInZhbHVlKGV4YW1Qcm92aWRlckRldGFpbE1vZGVsKnBob25lMSkiKTsNCgl2YXIgcGhvbmUyQXJyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoInZhbHVlKGV4YW1Qcm92aWRlckRldGFpbE1vZGVsKnBob25lMikiKTsNCgl2YXIgcGhvbmUxQ0NBcnIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgidmFsdWUoZXhhbVByb3ZpZGVyRGV0YWlsTW9kZWwqcGhvbmUxQ291bnRyeUNvZGUpIik7DQoJdmFyIHBob25lMkNDQXJyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoInZhbHVlKGV4YW1Qcm92aWRlckRldGFpbE1vZGVsKnBob25lMkNvdW50cnlDb2RlKSIpOw0KCXZhciBlbWFpbEFyciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJ2YWx1ZShleGFtUHJvdmlkZXJEZXRhaWxNb2RlbCplbWFpbCkiKTsNCgl2YXIgZmF4QXJyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoInZhbHVlKGV4YW1Qcm92aWRlckRldGFpbE1vZGVsKmZheCkiKTsNCgl2YXIgZmF4Q0NBcnIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgidmFsdWUoZXhhbVByb3ZpZGVyRGV0YWlsTW9kZWwqZmF4Q291bnRyeUNvZGUpIik7DQoJdmFyIGNvbW1lbnRBcnIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgidmFsdWUoZXhhbUNvbW1lbnRzKSIpOw0KCXZhciBzdXBwb3J0TGFuZ3VhZ2VzQXJyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoInZhbHVlKGV4YW1Qcm92aWRlckRldGFpbE1vZGVsKnN1cHBvcnRlZExhbmd1YWdlcykiKTsNCgl2YXIgaXNIYW5kaWNhcEFjY2Vzc2libGVBcnIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgidmFsdWUoZXhhbVByb3ZpZGVyRGV0YWlsTW9kZWwqaXNIYW5kaWNhcEFjY2Vzc2libGUpIik7DQoJdmFyIGlzSGFuZGljYXBBY2Nlc3NpYmxlSGlkZGVuQXJyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoInZhbHVlKGlzSGFuZGljYXBBY2Nlc3NpYmxlKSIpOw0KCXZhciBoYW5kaWNhcEFjY2Vzc2libGVEZXNBcnIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgidmFsdWUoZXhhbVByb3ZpZGVyRGV0YWlsTW9kZWwqaGFuZGljYXBBY2Nlc3NpYmxlRGVzKSIpOw0KCXZhciBkcml2aW5nRGlyZWN0aW9uc0FyciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJ2YWx1ZShleGFtUHJvdmlkZXJEZXRhaWxNb2RlbCpkcml2aW5nRGlyZWN0aW9ucykiKTsNCgl2YXIgY2NBcnIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgidmFsdWUoZXhhbVByb3ZpZGVyRGV0YWlsTW9kZWwqY291bnRyeUNvZGUpIik7DQoJdmFyIHJlc2NoZWRDYW5jZWxSZWFzb25FbEFyciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJ2YWx1ZShleGFtUHJvdmlkZXJEZXRhaWxNb2RlbCpyZXNjaGVkQ2FuY2VsUmVhc29uKSIpOw0KCQ0KCWlmICghZXhhbWluYXRpb24uYV9leGFtaW5hdGlvbnMpDQoJew0KCQlyZXR1cm4gZmFsc2U7DQoJfQ0KCXZhciBpdGVtSW54PTA7IA0KCWZvciAodmFyIGNvdW50PTA7Y291bnQ8IGV4YW1pbmF0aW9uLmFfZXhhbWluYXRpb25zLmxlbmd0aDtjb3VudCsrKQ0KCQl7CQkJDQoJCQl2YXIgZXhhbSA9IGV4YW1pbmF0aW9uLmFfZXhhbWluYXRpb25zW2NvdW50XTsJDQoJCQlpZiAoZXhhbSA9PSBudWxsKQ0KCQkJew0KCQkJCWNvbnRpbnVlOw0KCQkJfQ0KCQkJdmFyIGV4YW1JdGVtID0gZW1wdHlFeGFtOw0KCQkJaWYgKGV4YW1pbmF0aW9uSXRlbXMgJiYgZXhhbWluYXRpb25JdGVtcy5sZW5ndGggPiBleGFtLmlfaW5kZXgpDQoJCQl7DQoJCQkJZXhhbUl0ZW0gPSBleGFtaW5hdGlvbkl0ZW1zW2V4YW0uaV9pbmRleF07DQoJCQl9CQkJDQoJCQlpZiAoZXhhbSAhPSBudWxsICYmIGV4YW0gaW5zdGFuY2VvZiBFeGFtaW5hdGlvbkl0ZW0pDQoJCQl7DQoJCQkJaWYgKGV4YW0ucG5hbWVDb21ibykNCgkJCQl7DQoJCQkJCWV4YW0ucG5hbWVDb21iby5zZXRWYWx1ZShleGFtSXRlbVsiZXhhbVByb3ZpZGVyTmFtZSJdKTsNCgkJCQl9DQoJCQkJZXhhbS5zZXF1ZW5jZS52YWx1ZSA9IGV4YW1JdGVtWyJleGFtRWR1U2VxdWVuY2UiXTsNCgkJCQlleGFtLmV4YW1OYW1lQ29tYm8uc2V0VmFsdWUoZXhhbUl0ZW1bImV4YW1OYW1lIl0pOw0KCQkJCWV4YW0uZXhhbU5hbWUudmFsdWUgPSBleGFtSXRlbVsiZXhhbU5hbWUiXTsNCgkJCQlleGFtLnBuYW1lLnZhbHVlID0gZXhhbUl0ZW1bImV4YW1Qcm92aWRlck5hbWUiXTsNCgkJCQkNCgkJCQlleGFtLnBuby52YWx1ZSA9IGV4YW1JdGVtWyJleGFtUHJvdmlkZXJOb0RlcyJdOw0KCQkJCWV4YW0uZXhhbURhdGUudmFsdWUgPSBleGFtSXRlbVsiZXhhbURhdGVEZXMiXTsNCgkJCQlleGFtLmV4YW1TdGFydFRpbWVILnZhbHVlID0gZXhhbUl0ZW1bImV4YW1TdGFydFRpbWVIRGVzIl07DQoJCQkJZXhhbS5leGFtU3RhcnRUaW1lTS52YWx1ZSA9IGV4YW1JdGVtWyJleGFtU3RhcnRUaW1lTURlcyJdOw0KCQkJCWV4YW0uZXhhbVN0YXJ0VGltZUFNUE0udmFsdWUgPSBleGFtSXRlbVsiZXhhbVN0YXJ0VGltZUFNUE1EZXMiXTsNCgkJCQlleGFtLmV4YW1FbmRUaW1lSC52YWx1ZSA9IGV4YW1JdGVtWyJleGFtRW5kVGltZUhEZXMiXTsNCgkJCQlleGFtLmV4YW1FbmRUaW1lTS52YWx1ZSA9IGV4YW1JdGVtWyJleGFtRW5kVGltZU1EZXMiXTsNCgkJCQlleGFtLmV4YW1FbmRUaW1lQU1QTS52YWx1ZSA9IGV4YW1JdGVtWyJleGFtRW5kVGltZUFNUE1EZXMiXTsNCgkJCQlleGFtLmV4YW1TdGF0dXMudmFsdWUgPSBleGFtSXRlbVsiZXhhbVN0YXR1c0RlcyJdOw0KCQkJCWV4YW0uZXhhbUZpbmFsU2NvcmUudmFsdWUgPSBleGFtSXRlbVsiZXhhbUZpbmFsU2NvcmVEZXMiXTsNCgkJCQlleGFtLmV4YW1Sb3N0ZXJJRC52YWx1ZSA9IGV4YW1JdGVtWyJleGFtUm9zdGVySUREZXMiXTsNCgkJCQkNCgkJCQlwdXRIaWRkZW5Qcm92aWRlckRldGFpbFZhbHVlNEV4YW0oZXhhbSxleGFtSXRlbSk7DQoJCQkJDQoJCQkJaWYgKGV4YW0uZXhhbU5hbWUudmFsdWUgPT0gJycpDQoJCQkJew0KCQkJCQl2YXIgdWl1aWRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJleGFtIiArIGV4YW0uaV9pbmRleCArICJVSVVJRCIpOw0KCQkJCQlpZiAodWl1aWRJbnB1dCkNCgkJCQkJew0KCQkJCQkgIGNsZWFyVGVtcGxhdGVCYWNrdXAodWl1aWRJbnB1dC52YWx1ZSk7DQoJCQkJCX0NCgkJCQkJDQoJCQkJCXZhciBjb3VudHJ5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZhbHVlKGV4YW1Qcm92aWRlckRldGFpbE1vZGVsKmNvdW50cnlDb2RlJytleGFtLmlfaW5kZXgrJyknKTsNCgkJCQkJaWYoY291bnRyeSkNCgkJCQkJew0KCQkJCQkJY291bnRyeS5kZWxldGVkID0gIlkiOw0KCQkJCQl9DQoJCQkJCWV4YW1pbmF0aW9uLmFfZXhhbWluYXRpb25zW2V4YW0uaV9pbmRleF0gPSBudWxsOw0KCQkJCQkNCgkJCQkJaWYgKGV4YW1pbmF0aW9uLmlfc2VsZWN0ZWRJdGVtSW5kZXggPT0gZXhhbS5pX2luZGV4KQ0KCQkJCQl7DQoJCQkJCQlleGFtaW5hdGlvbi5pX3NlbGVjdGVkSXRlbUluZGV4ID0gLTE7DQoJCQkJCX0NCg0KCQkJCQlleGFtLmRlc3Ryb3koKTsNCgkJCQkJY29udGludWU7DQoJCQkJfQ0KCQkJCQ0KCQkJCWlmIChleGFtSXRlbVsiZXhhbVJlcXVpcmVkRmxhZyJdICYmIGV4YW1JdGVtWyJleGFtUmVxdWlyZWRGbGFnIl0gPT0gJ1knKQ0KCQkJCXsJCQkJCQ0KCQkJCQlleGFtLnJlcXVpcmVkRmxhZy52YWx1ZSA9ICJZIjsNCgkJCQl9DQoJCQkJaWYgKGV4YW0uZXhhbU5hbWVIaWRkZW4pDQoJCQkJew0KCQkJCQlleGFtLmV4YW1OYW1lSGlkZGVuLnZhbHVlID0gZXhhbUl0ZW1bImV4YW1OYW1lIl07DQoJCQkJfQ0KCQkJCWlmIChleGFtLnBub0lucHV0KQ0KCQkJCXsNCgkJCQkJZXhhbS5wbm9JbnB1dC52YWx1ZSA9IGV4YW1JdGVtWyJleGFtUHJvdmlkZXJObyJdOw0KCQkJCQlzZXRGbGRTdGF0dXMoZXhhbS5wbm9JbnB1dCwgZXhhbUl0ZW0pOw0KCQkJCX0NCgkJCQlzZXRFeGFtRGF0YShleGFtLGV4YW1JdGVtLHJlcXVpcmVkTGJsLG9wdGlvbmFsTGJsLHBhc3NMYmwsZmFpbExibCxuYUxibCk7DQoJCQkJaWYgKGV4YW0uZmluYWxTY29yZUlucHV0KQ0KCQkJCXsNCgkJCQkJZXhhbS5maW5hbFNjb3JlSW5wdXQudmFsdWUgPSBleGFtSXRlbVsiZXhhbUZpbmFsU2NvcmUiXTsNCgkJCQl9CQkJCQ0KCQkJCWlmIChleGFtLmRhdGVPZkNsYXNzSW5wdXQpDQoJCQkJew0KCQkJCQlleGFtLmRhdGVPZkNsYXNzSW5wdXQudmFsdWUgPSBleGFtSXRlbVsiZXhhbURhdGUiXTsNCgkJCQl9CQkNCgkJCQlpZiAoZXhhbUl0ZW1bImV4YW1BcHByb3ZlZEZsYWciXSkNCgkJCQl7DQoJCQkJCWV4YW0uYXBwcm92ZWRGbGFnLnZhbHVlID0gZXhhbUl0ZW1bImV4YW1BcHByb3ZlZEZsYWciXTsNCgkJCQl9DQoJCQkJaWYgKGV4YW1JdGVtWyJleGFtU3luY0ZsYWciXSAmJiBleGFtSXRlbVsiZXhhbVN5bmNGbGFnIl0gPT0gJ1knKQ0KCQkJCXsJCQ0KCQkJCQlleGFtLnN5bmNGbGFnLnZhbHVlID0gZXhhbUl0ZW1bImV4YW1TeW5jRmxhZyJdOw0KCQkJCX0NCgkJCQlpZiAoZXhhbUl0ZW1bImV4YW1FbnRpdHlJRCJdKQ0KCQkJCXsNCgkJCQkJZXhhbS5lbnRpdHlJRC52YWx1ZSA9IGV4YW1JdGVtWyJleGFtRW50aXR5SUQiXTsNCgkJCQl9DQoJCQkJaWYgKGV4YW1JdGVtWyJleGFtQ29udGFjdFNlcU5iciJdKQ0KCQkJCXsNCgkJCQkJZXhhbS5jb250YWN0U2VxTnVtYmVyLnZhbHVlID0gZXhhbUl0ZW1bImV4YW1Db250YWN0U2VxTmJyIl07DQoJCQkJfQ0KCQkJCWlmIChleGFtLmNoZWNrQm94KQ0KCQkJCXsNCgkJCQkJZXhhbS5jaGVja0JveC5kaXNhYmxlZCA9IGV4YW1JdGVtWyJleGFtUmVxdWlyZWRGbGFnIl0gPT0gJ1knICYmICFjYW5EZWxSZXF1aXJlZDsNCgkJCQl9DQoJCQkJaWYgKGV4YW0uZXhhbVN0YXR1c0lucHV0KQ0KCQkJCXsNCgkJCQkJc2V0U2VsZWN0ZWRWYWx1ZShleGFtLmV4YW1TdGF0dXNJbnB1dCwgZXhhbUl0ZW1bImV4YW1TdGF0dXMiXSk7DQoJCQkJfQ0KCQkJCQ0KCQkJCWlmIChleGFtLnN0YXJ0VGltZUhJbnB1dCkNCgkJCQl7DQoJCQkJCWV4YW0uc3RhcnRUaW1lSElucHV0LnZhbHVlID0gZXhhbUl0ZW1bImV4YW1TdGFydFRpbWVIIl07DQoJCQkJCWNoYW5nZUVsZVN0eWxlKGV4YW1JdGVtLCBleGFtLnN0YXJ0VGltZUhJbnB1dCk7DQoJCQkJfQ0KCQkJCWlmIChleGFtLnN0YXJ0VGltZU1JbnB1dCkNCgkJCQl7DQoJCQkJCWV4YW0uc3RhcnRUaW1lTUlucHV0LnZhbHVlID0gZXhhbUl0ZW1bImV4YW1TdGFydFRpbWVNIl07DQoJCQkJCWNoYW5nZUVsZVN0eWxlKGV4YW1JdGVtLCBleGFtLnN0YXJ0VGltZU1JbnB1dCk7DQoJCQkJfQ0KCQkJCWlmIChleGFtLnN0YXJ0VGltZUFNUE1JbnB1dCkNCgkJCQl7DQoJCQkJCWV4YW0uc3RhcnRUaW1lQU1QTUlucHV0LnZhbHVlID0gZXhhbUl0ZW1bImV4YW1TdGFydFRpbWVBTVBNIl07DQoJCQkJCWNoYW5nZUVsZVN0eWxlKGV4YW1JdGVtLCBleGFtLnN0YXJ0VGltZUFNUE1JbnB1dCk7DQoJCQkJfQ0KCQkJCWlmIChleGFtLmVuZFRpbWVISW5wdXQpDQoJCQkJew0KCQkJCQlleGFtLmVuZFRpbWVISW5wdXQudmFsdWUgPSBleGFtSXRlbVsiZXhhbUVuZFRpbWVIIl07DQoJCQkJCWNoYW5nZUVsZVN0eWxlKGV4YW1JdGVtLCBleGFtLmVuZFRpbWVISW5wdXQpOw0KCQkJCX0NCgkJCQlpZiAoZXhhbS5lbmRUaW1lTUlucHV0KQ0KCQkJCXsNCgkJCQkJZXhhbS5lbmRUaW1lTUlucHV0LnZhbHVlID0gZXhhbUl0ZW1bImV4YW1FbmRUaW1lTSJdOw0KCQkJCQljaGFuZ2VFbGVTdHlsZShleGFtSXRlbSwgZXhhbS5lbmRUaW1lTUlucHV0KTsNCgkJCQl9DQoJCQkJaWYgKGV4YW0uZW5kVGltZUFNUE1JbnB1dCkNCgkJCQl7DQoJCQkJCWV4YW0uZW5kVGltZUFNUE1JbnB1dC52YWx1ZSA9IGV4YW1JdGVtWyJleGFtRW5kVGltZUFNUE0iXTsNCgkJCQkJY2hhbmdlRWxlU3R5bGUoZXhhbUl0ZW0sIGV4YW0uZW5kVGltZUFNUE1JbnB1dCk7DQoJCQkJfQ0KCQkJCWlmIChleGFtLnJvc3RlcklESW5wdXQpDQoJCQkJew0KCQkJCQlleGFtLnJvc3RlcklESW5wdXQudmFsdWUgPSBleGFtSXRlbVsiZXhhbVJvc3RlcklEIl07DQoJCQkJCWNoYW5nZUVsZVN0eWxlKGV4YW1JdGVtLCBleGFtLnJvc3RlcklESW5wdXQpOw0KCQkJCX0NCgkJCQkNCgkJCQlpZiAoZXhhbS5kYXRlT2ZDbGFzc0lucHV0KQ0KCQkJCXsNCgkJCQkJZXhhbS5kYXRlT2ZDbGFzc0lucHV0LnZhbHVlID0gZXhhbUl0ZW1bImV4YW1EYXRlIl07DQoJCQkJfQ0KCQkJCQ0KCQkJCXJlc2V0RXhhbURhdGFTdHlsZUJ5U3RhdHVzKGV4YW0sIGV4YW1JdGVtLCBpdGVtSW54LCBpc0Zyb21SZWYpDQoJCQl9IA0KCQkJDQoJCQl2YXIgZXhhbUl0ZW1MZW5ndGggPSBnZXRBdmFpbGFibGVMZW5ndGgoZXhhbWluYXRpb24uYV9leGFtaW5hdGlvbnMpOw0KCQkJLy8gUmVzZXQgdGhlIGZpZWxkICJSZXNjaGVkdWxlIENhbmNlbCBSZWFzb24iLg0KCQkJaWYgKHJlc2NoZWRDYW5jZWxSZWFzb25FbEFyciAmJiByZXNjaGVkQ2FuY2VsUmVhc29uRWxBcnIubGVuZ3RoID4gZXhhbUl0ZW1MZW5ndGgpDQoJCQl7DQoJCQkJcmVzY2hlZENhbmNlbFJlYXNvbkVsQXJyW2l0ZW1JbngrMV0udmFsdWUgPSBleGFtSXRlbVsidmFsdWUoZXhhbVByb3ZpZGVyRGV0YWlsTW9kZWwqcmVzY2hlZENhbmNlbFJlYXNvbikiXTsNCgkJCX0NCgkJCS8vU2V0IHRoZSBjb3VudHJ5IHZhbHVlIGZpcnN0LCB0aGVuIGNvdWxkIGdldCB0aGUgY29ycmVjdCBtYXNrLg0KCQkJaWYgKGNjQXJyICYmIGNjQXJyLmxlbmd0aCA+IGV4YW1JdGVtTGVuZ3RoKQ0KCQkJew0KCQkJCWNjQXJyW2l0ZW1JbngrMV0udmFsdWUgPSBleGFtSXRlbVsidmFsdWUoZXhhbVByb3ZpZGVyRGV0YWlsTW9kZWwqY291bnRyeUNvZGUpIl07DQoJCQkJY2NBcnJbaXRlbUlueCsxXS5zdGF0ZVYgPSBleGFtSXRlbVsidmFsdWUoZXhhbVByb3ZpZGVyRGV0YWlsTW9kZWwqc3RhdGUpIl07DQoJCQkJY2NBcnJbaXRlbUlueCsxXS5oYXNMb2FkID0gdHJ1ZTsNCgkJCQlBYzM2MC5kaXNwYXRjaEV2ZW50KGNjQXJyW2l0ZW1JbngrMV0sICdjaGFuZ2UnKTsNCgkJCQljY0FycltpdGVtSW54KzFdLmhhc0xvYWQgPSBmYWxzZTsNCgkJCX0NCgkJCWlmIChhZGRyMUFyciAmJiBhZGRyMUFyci5sZW5ndGggPiBleGFtSXRlbUxlbmd0aCkNCgkJCXsNCgkJCQlhZGRyMUFycltpdGVtSW54KzFdLnZhbHVlID0gZXhhbUl0ZW1bInZhbHVlKGV4YW1Qcm92aWRlckRldGFpbE1vZGVsKmFkZHJlc3MxKSJdOw0KCQkJfQ0KCQkJaWYgKGFkZHIyQXJyICYmIGFkZHIyQXJyLmxlbmd0aCA+IGV4YW1JdGVtTGVuZ3RoKQ0KCQkJew0KCQkJCWFkZHIyQXJyW2l0ZW1JbngrMV0udmFsdWUgPSBleGFtSXRlbVsidmFsdWUoZXhhbVByb3ZpZGVyRGV0YWlsTW9kZWwqYWRkcmVzczIpIl07DQoJCQl9DQoJCQlpZiAoYWRkcjNBcnIgJiYgYWRkcjNBcnIubGVuZ3RoID4gZXhhbUl0ZW1MZW5ndGgpDQoJCQl7DQoJCQkJYWRkcjNBcnJbaXRlbUlueCsxXS52YWx1ZSA9IGV4YW1JdGVtWyJ2YWx1ZShleGFtUHJvdmlkZXJEZXRhaWxNb2RlbCphZGRyZXNzMykiXTsNCgkJCX0NCgkJCWlmIChjaXR5QXJyICYmIGNpdHlBcnIubGVuZ3RoID4gZXhhbUl0ZW1MZW5ndGgpDQoJCQl7DQoJCQkJY2l0eUFycltpdGVtSW54KzFdLnZhbHVlID0gZXhhbUl0ZW1bInZhbHVlKGV4YW1Qcm92aWRlckRldGFpbE1vZGVsKmNpdHkpIl07DQoJCQl9DQoJCQlpZiAoc3RhdGVBcnIgJiYgc3RhdGVBcnIubGVuZ3RoID4gZXhhbUl0ZW1MZW5ndGgpDQoJCQl7DQoJCQkJc3RhdGVBcnJbaXRlbUlueCsxXS52YWx1ZSA9IGV4YW1JdGVtWyJ2YWx1ZShleGFtUHJvdmlkZXJEZXRhaWxNb2RlbCpzdGF0ZSkiXTsNCgkJCX0NCgkJCWlmICh6aXBBcnIgJiYgemlwQXJyLmxlbmd0aCA+IGV4YW1JdGVtTGVuZ3RoKQ0KCQkJew0KCQkJCXppcEFycltpdGVtSW54KzFdLnZhbHVlID0gZXhhbUl0ZW1bInZhbHVlKGV4YW1Qcm92aWRlckRldGFpbE1vZGVsKnppcCkiXTsNCgkJCX0NCgkJCWlmIChwaG9uZTFBcnIgJiYgcGhvbmUxQXJyLmxlbmd0aCA+IGV4YW1JdGVtTGVuZ3RoKQ0KCQkJew0KCQkJCXBob25lMUFycltpdGVtSW54KzFdLnZhbHVlID0gZXhhbUl0ZW1bInZhbHVlKGV4YW1Qcm92aWRlckRldGFpbE1vZGVsKnBob25lMSkiXTsNCgkJCX0NCgkJCWlmIChwaG9uZTJBcnIgJiYgcGhvbmUyQXJyLmxlbmd0aCA+IGV4YW1JdGVtTGVuZ3RoKQ0KCQkJew0KCQkJCXBob25lMkFycltpdGVtSW54KzFdLnZhbHVlID0gZXhhbUl0ZW1bInZhbHVlKGV4YW1Qcm92aWRlckRldGFpbE1vZGVsKnBob25lMikiXTsNCgkJCX0NCgkJCWlmIChwaG9uZTFDQ0FyciAmJiBwaG9uZTFDQ0Fyci5sZW5ndGggPiBleGFtSXRlbUxlbmd0aCkNCgkJCXsNCgkJCQlwaG9uZTFDQ0FycltpdGVtSW54KzFdLnZhbHVlID0gZXhhbUl0ZW1bInZhbHVlKGV4YW1Qcm92aWRlckRldGFpbE1vZGVsKnBob25lMUNvdW50cnlDb2RlKSJdOwkJDQoJCQl9DQoJCQlpZiAocGhvbmUyQ0NBcnIgJiYgcGhvbmUyQ0NBcnIubGVuZ3RoID4gZXhhbUl0ZW1MZW5ndGgpDQoJCQl7DQoJCQkJcGhvbmUyQ0NBcnJbaXRlbUlueCsxXS52YWx1ZSA9IGV4YW1JdGVtWyJ2YWx1ZShleGFtUHJvdmlkZXJEZXRhaWxNb2RlbCpwaG9uZTJDb3VudHJ5Q29kZSkiXTsNCgkJCX0NCgkJCWlmIChlbWFpbEFyciAmJiBlbWFpbEFyci5sZW5ndGggPiBleGFtSXRlbUxlbmd0aCkNCgkJCXsNCgkJCQllbWFpbEFycltpdGVtSW54KzFdLnZhbHVlID0gZXhhbUl0ZW1bInZhbHVlKGV4YW1Qcm92aWRlckRldGFpbE1vZGVsKmVtYWlsKSJdOw0KCQkJfQ0KCQkJaWYgKGZheEFyciAmJiBmYXhBcnIubGVuZ3RoID4gZXhhbUl0ZW1MZW5ndGgpDQoJCQl7DQoJCQkJZmF4QXJyW2l0ZW1JbngrMV0udmFsdWUgPSBleGFtSXRlbVsidmFsdWUoZXhhbVByb3ZpZGVyRGV0YWlsTW9kZWwqZmF4KSJdOw0KCQkJfQ0KCQkJZGVhbFZhbHVlcygiZXhhbVByb3ZpZGVyRGV0YWlsTW9kZWwiLCBleGFtLmlfaW5kZXgsIGV4YW1JdGVtKTsNCgkJCWlmIChmYXhDQ0FyciAmJiBmYXhDQ0Fyci5sZW5ndGggPiBleGFtSXRlbUxlbmd0aCkNCgkJCXsNCgkJCQlmYXhDQ0FycltpdGVtSW54KzFdLnZhbHVlID0gZXhhbUl0ZW1bInZhbHVlKGV4YW1Qcm92aWRlckRldGFpbE1vZGVsKmZheENvdW50cnlDb2RlKSJdOw0KCQkJfQ0KCQkJaWYgKGNvbW1lbnRBcnIgJiYgY29tbWVudEFyci5sZW5ndGggPiBleGFtSXRlbUxlbmd0aCkNCgkJCXsNCgkJCQljb21tZW50QXJyW2l0ZW1JbngrMV0udmFsdWUgPSBleGFtSXRlbVsidmFsdWUoZXhhbUNvbW1lbnRzKSJdOw0KCQkJfQkNCgkJCWlmIChzdXBwb3J0TGFuZ3VhZ2VzQXJyICYmIHN1cHBvcnRMYW5ndWFnZXNBcnIubGVuZ3RoID4gZXhhbUl0ZW1MZW5ndGgpDQoJCQl7DQoJCQkJc3VwcG9ydExhbmd1YWdlc0FycltpdGVtSW54KzFdLnZhbHVlID0gZXhhbUl0ZW1bInZhbHVlKGV4YW1Qcm92aWRlckRldGFpbE1vZGVsKnN1cHBvcnRlZExhbmd1YWdlcykiXTsNCgkJCX0JCQkJDQoJCQlpZiAoaXNIYW5kaWNhcEFjY2Vzc2libGVBcnIgJiYgaXNIYW5kaWNhcEFjY2Vzc2libGVBcnIubGVuZ3RoID4gZXhhbUl0ZW1MZW5ndGgpDQoJCQl7DQoJCQkJaXNIYW5kaWNhcEFjY2Vzc2libGVIaWRkZW5BcnJbaXRlbUlueCsxXS52YWx1ZSA9IGV4YW1JdGVtWyJ2YWx1ZShleGFtUHJvdmlkZXJEZXRhaWxNb2RlbCppc0hhbmRpY2FwQWNjZXNzaWJsZSkiXTsNCgkJCQlpc0hhbmRpY2FwQWNjZXNzaWJsZUhpZGRlbkFycltpdGVtSW54KzFdLmlkID0gImlzSGFuZGljYXBBY2Nlc3NpYmxlIiArIHBhcnNlSW50KGl0ZW1JbngpOw0KCQkJCWlmICgiWSIgPT0gZXhhbUl0ZW1bInZhbHVlKGV4YW1Qcm92aWRlckRldGFpbE1vZGVsKmlzSGFuZGljYXBBY2Nlc3NpYmxlKSJdKQ0KCQkJCXsNCgkJCQkJaXNIYW5kaWNhcEFjY2Vzc2libGVBcnJbaXRlbUlueCsxXS5jaGVja2VkPSB0cnVlOw0KCQkJCX0NCgkJCQllbHNlDQoJCQkJewkJCQkNCgkJCQkJaXNIYW5kaWNhcEFjY2Vzc2libGVBcnJbaXRlbUlueCsxXS5jaGVja2VkID0gZmFsc2U7DQoJCQkJfQ0KCQkJCQ0KCQkJfQkJCQkNCgkJCWlmIChoYW5kaWNhcEFjY2Vzc2libGVEZXNBcnIgJiYgaGFuZGljYXBBY2Nlc3NpYmxlRGVzQXJyLmxlbmd0aCA+IGV4YW1JdGVtTGVuZ3RoKQ0KCQkJew0KCQkJCWhhbmRpY2FwQWNjZXNzaWJsZURlc0FycltpdGVtSW54KzFdLnZhbHVlID0gZXhhbUl0ZW1bInZhbHVlKGV4YW1Qcm92aWRlckRldGFpbE1vZGVsKmhhbmRpY2FwQWNjZXNzaWJsZURlcykiXTsNCgkJCQlpZigiWSIgPT0gZXhhbUl0ZW1bInZhbHVlKGV4YW1Qcm92aWRlckRldGFpbE1vZGVsKmlzSGFuZGljYXBBY2Nlc3NpYmxlKSJdKQ0KCQkJCXsNCgkJCQkJaGFuZGljYXBBY2Nlc3NpYmxlRGVzQXJyW2l0ZW1JbngrMV0ucmVhZG9ubHkgPSBmYWxzZTsNCgkJCQl9DQoJCQkJZWxzZQ0KCQkJCXsNCgkJCQkJaGFuZGljYXBBY2Nlc3NpYmxlRGVzQXJyW2l0ZW1JbngrMV0ucmVhZE9ubHkgPSB0cnVlOw0KCQkJCX0NCgkJCQlyZWFkT25seU9iai5yZXNldFJlYWRPbmx5KFtoYW5kaWNhcEFjY2Vzc2libGVEZXNBcnJbaXRlbUlueCsxXV0pOw0KCQkJCWhhbmRpY2FwQWNjZXNzaWJsZURlc0FycltpdGVtSW54KzFdLnZhbHVlID0gZXhhbUl0ZW1bInZhbHVlKGV4YW1Qcm92aWRlckRldGFpbE1vZGVsKmhhbmRpY2FwQWNjZXNzaWJsZURlcykiXTsNCgkJCX0JCQkJDQoJCQlpZiAoZHJpdmluZ0RpcmVjdGlvbnNBcnIgJiYgZHJpdmluZ0RpcmVjdGlvbnNBcnIubGVuZ3RoID4gZXhhbUl0ZW1MZW5ndGgpDQoJCQl7DQoJCQkJZHJpdmluZ0RpcmVjdGlvbnNBcnJbaXRlbUlueCsxXS52YWx1ZSA9IGV4YW1JdGVtWyJ2YWx1ZShleGFtUHJvdmlkZXJEZXRhaWxNb2RlbCpkcml2aW5nRGlyZWN0aW9ucykiXTsNCgkJCX0JDQoJCQlpdGVtSW54Kys7DQoJCX0vL2VuZCBmb3IgbG9vcA0KCQlyZXR1cm4gZmFsc2U7DQp9DQoNCg0KZnVuY3Rpb24gcmVzZXRFeGFtRGF0YVN0eWxlQnlTdGF0dXMoZXhhbSwgZXhhbUl0ZW0sIGl0ZW1JbngsIGlzRnJvbVJlZikNCnsNCglpZiAoaXNFcXVhbHNJZ25vcmVDYXNlKCJQRU5ESU5HIixleGFtSXRlbVsiZXhhbVN0YXR1cyJdKSkNCgl7DQoJCWlmICgiWSIgPT0gZXhhbUl0ZW1bImV4YW1OZXdEZWZpbmVkIl0pDQoJCXsNCgkJCXNldFJlYWRXcml0ZTRBbGxGaWVsZHMoZXhhbSwgZXhhbUl0ZW0pOw0KCQkJaWYgKGV4YW0uZGF0ZU9mQ2xhc3NJbnB1dCkNCgkJCXsNCgkJCQlleGFtLnNjaGVkdWxlTGluay5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KCQkJfQ0KCQl9DQoJCWVsc2UgaWYgKGV4YW0uZGF0ZU9mQ2xhc3NJbnB1dCkNCgkJew0KCQkJZXhhbS5zY2hlZHVsZUxpbmsuc3R5bGUuZGlzcGxheSA9ICIiOw0KCQl9DQoJCW5vdFNob3dTY2hlZHVsZUxpbmsoZXhhbSwgZXhhbUl0ZW0pOw0KCX0NCgllbHNlIGlmIChpc0VxdWFsc0lnbm9yZUNhc2UoIlNDSEVEVUxFRCIgLGV4YW1JdGVtWyJleGFtU3RhdHVzIl0pKQ0KCXsNCgkJaWYgKGlzRXF1YWxzSWdub3JlQ2FzZSgiWSIsIGV4YW1JdGVtWyJhbGxvd1Njb3JlRWRpdCJdKSkNCgkJew0KCQkJZGlzYWJsZUl0ZW1Db21ib0JveChleGFtLmV4YW1OYW1lQ29tYm8pOw0KCQkJc2V0UmVhZE9ubHk0QWxsRmllbGRzRXhjZXB0RXhhbU5hbWVBbmRTY29yZShleGFtLCBpdGVtSW54KTsNCgkJfQ0KCQllbHNlDQoJCXsNCgkJCXNldFJlYWRPbmx5NEFsbEZpZWxkcyhleGFtLCBpdGVtSW54KTsNCgkJfQ0KCQkNCgkJaWYgKGV4YW0uZXhhbVN0YXR1c0lucHV0KQ0KCQl7DQoJCQlleGFtLmV4YW1TdGF0dXNJbnB1dC5hZGQobmV3IE9wdGlvbihlU2NoZWR1bGVkTGJsLCAiU0NIRURVTEVEIikpOw0KCQl9DQoJCWlmIChleGFtLmRhdGVPZkNsYXNzSW5wdXQpDQoJCXsNCgkJCWV4YW0uc2NoZWR1bGVMaW5rLnN0eWxlLmRpc3BsYXkgPSAiIjsNCgkJfQ0KCQlub3RTaG93U2NoZWR1bGVMaW5rKGV4YW0sIGV4YW1JdGVtKTsNCgl9DQoJZWxzZSBpZiAoaXNFcXVhbHNJZ25vcmVDYXNlKCJSRUFEWVRPU0NIRURVTEVQQUlEIiAsZXhhbUl0ZW1bImV4YW1TdGF0dXMiXSkNCgkJCXx8IGlzRXF1YWxzSWdub3JlQ2FzZSgiUkVBRFlUT1NDSEVEVUxFVU5QQUlEIiAsZXhhbUl0ZW1bImV4YW1TdGF0dXMiXSkpDQoJew0KCQlpZiAoaXNFcXVhbHNJZ25vcmVDYXNlKCJZIiwgZXhhbUl0ZW1bImFsbG93U2NvcmVFZGl0Il0pKQ0KCQl7DQoJCQlkaXNhYmxlSXRlbUNvbWJvQm94KGV4YW0uZXhhbU5hbWVDb21ibyk7DQoJCQlzZXRSZWFkT25seTRBbGxGaWVsZHNFeGNlcHRFeGFtTmFtZUFuZFNjb3JlKGV4YW0sIGl0ZW1JbngpOw0KCQl9DQoJCWVsc2UNCgkJew0KCQkJc2V0UmVhZE9ubHk0QWxsRmllbGRzKGV4YW0sIGl0ZW1JbngpOw0KCQl9DQoJCQ0KCQlpZiAoZXhhbS5leGFtU3RhdHVzSW5wdXQpDQoJCXsNCgkJCWV4YW0uZXhhbVN0YXR1c0lucHV0LmFkZChuZXcgT3B0aW9uKGVSZWFkeVRvU2NoZWR1bGVkTGJsLCBleGFtSXRlbVsiZXhhbVN0YXR1cyJdLnRvVXBwZXJDYXNlKCkpKTsNCgkJfQ0KCQlpZiAoZXhhbS5kYXRlT2ZDbGFzc0lucHV0KQ0KCQl7DQoJCQlleGFtLnNjaGVkdWxlTGluay5zdHlsZS5kaXNwbGF5ID0gIiI7DQoJCX0NCgkJbm90U2hvd1NjaGVkdWxlTGluayhleGFtLCBleGFtSXRlbSk7DQoJfQ0KCWVsc2UNCgl7DQoJCXNldFJlYWRXcml0ZTRBbGxGaWVsZHMoZXhhbSwgZXhhbUl0ZW0pOw0KCQlpZiAoZXhhbS5kYXRlT2ZDbGFzc0lucHV0KQ0KCQl7DQoJCQlleGFtLnNjaGVkdWxlTGluay5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KCQl9DQoJfQ0KCQ0KCWlmIChpc0VxdWFsc0lnbm9yZUNhc2UoIlkiICxleGFtSXRlbVsiZXhhbUFwcHJvdmVkRmxhZyJdKSAmJiAnWScgIT0gaXNGcm9tUmVmKQ0KCXsNCgkJc2V0UmVhZE9ubHk0QWxsRmllbGRzKGV4YW0sIGl0ZW1JbngpOw0KCQlzZXREZXRhaWxSZWFkT25seShpdGVtSW54KTsJDQoJfQ0KfQ0KDQoNCmZ1bmN0aW9uIGRpc2FibGVFZHVTZWN0aW9uQnlUeXBlKHNlY3Rpb25PYmosIHNlY3Rpb25UeXBlKQ0Kew0KCWlmIChzZWN0aW9uVHlwZSA9PSAiZWR1Y2F0aW9uIikNCgl7DQoJCWZvciAodmFyIGl0ZW1Jbng9MDtpdGVtSW54PCBzZWN0aW9uT2JqLmFfZWR1Y2F0aW9ucy5sZW5ndGg7aXRlbUlueCsrKQ0KCQl7DQoJCQlkaXNhYmxlRWR1Y2F0aW9uSXRlbShzZWN0aW9uT2JqLmFfZWR1Y2F0aW9uc1tpdGVtSW54XSk7DQoJCX0NCgl9IGVsc2UgaWYgKHNlY3Rpb25UeXBlID09ICJjb250RWR1Y2F0aW9uIikNCgl7DQoJCWZvciAodmFyIGl0ZW1Jbng9MDtpdGVtSW54PCBzZWN0aW9uT2JqLmFfY29udEVkdWNhdGlvbnMubGVuZ3RoO2l0ZW1JbngrKykNCgkJew0KCQkJZGlzYWJsZUNvbnRFZHVjYXRpb25JdGVtKHNlY3Rpb25PYmouYV9jb250RWR1Y2F0aW9uc1tpdGVtSW54XSkNCgkJfQ0KCX0gZWxzZSBpZiAoc2VjdGlvblR5cGUgPT0gImV4YW1pbmF0aW9uIikNCgl7DQoJCWZvciAodmFyIGl0ZW1Jbng9MDtpdGVtSW54PCBzZWN0aW9uT2JqLmFfZXhhbWluYXRpb25zLmxlbmd0aDtpdGVtSW54KyspDQoJCXsNCgkJCWRpc2FibGVFeGFtaW5hdGlvbkl0ZW0oc2VjdGlvbk9iai5hX2V4YW1pbmF0aW9uc1tpdGVtSW54XSk7DQoJCX0NCgl9CQ0KfQ0KDQpmdW5jdGlvbiBkaXNhYmxlRWR1Y2F0aW9uSXRlbShlZHVJdGVtKQ0Kew0KCWlmIChlZHVJdGVtICE9IG51bGwgJiYgZWR1SXRlbSBpbnN0YW5jZW9mIEVkdWNhdGlvbkl0ZW0pDQoJewkJDQoJCWRpc2FibGVJdGVtQ29tYm9Cb3goZWR1SXRlbS5kaXNjaXBsaW5lQ29tYm8pOw0KCQlkaXNhYmxlSXRlbUNvbWJvQm94KGVkdUl0ZW0ucG5hbWVDb21ibyk7DQoJCWRpc2FibGVFbGUoZWR1SXRlbS5wbm9JbnB1dCk7DQoJCWRpc2FibGVFbGUoZWR1SXRlbS55ZWFyc0F0dElucHV0KTsNCgkJZGlzYWJsZUVsZShlZHVJdGVtLnllYXJzZ3JhZElucHV0KTsNCgkJZGlzYWJsZUVsZShlZHVJdGVtLmRlZ3JlZU9wdGlvbnMpOw0KCX0NCn0NCg0KZnVuY3Rpb24gZW5hYmxlRWR1Y2F0aW9uU2VjdGlvbihlZHVjYXRpb24pDQp7DQoJZm9yICh2YXIgaXRlbUlueD0wO2l0ZW1Jbng8ZWR1Y2F0aW9uLmFfZWR1Y2F0aW9ucy5sZW5ndGg7aXRlbUlueCsrKQ0KCXsJCQkJDQoJCXZhciBlZHUgPSBlZHVjYXRpb24uYV9lZHVjYXRpb25zW2l0ZW1JbnhdOwkNCgkJaWYgKGVkdSA9PSBudWxsKQ0KCQl7DQoJCQljb250aW51ZTsNCgkJfQkNCgkJaWYgKGVkdSAhPSBudWxsICYmIGVkdSBpbnN0YW5jZW9mIEVkdWNhdGlvbkl0ZW0pDQoJCXsNCgkJCWVkdS5kZXN0cm95KCk7DQoJCX0NCgl9DQoJZWR1Y2F0aW9uLmlfbmV4dEVkdUluZGV4ID0gMDsNCgllZHVjYXRpb24uaXNJbml0aWFsVmlldyA9IGZhbHNlOw0KCWxvYWRFZHVEYXRhKCk7CQkNCglkb1BhZ2VJbml0KCk7DQp9DQoNCmZ1bmN0aW9uIGRpc2FibGVDb250RWR1Y2F0aW9uSXRlbShjb250RWR1SXRlbSkNCnsNCglpZiAoY29udEVkdUl0ZW0gIT0gbnVsbCAmJiBjb250RWR1SXRlbSBpbnN0YW5jZW9mIENvbnRFZHVjYXRpb25JdGVtKQ0KCXsJCQ0KCQlkaXNhYmxlSXRlbUNvbWJvQm94KGNvbnRFZHVJdGVtLmNvbnRFZHVOYW1lQ29tYm8pOw0KCQlkaXNhYmxlSXRlbUNvbWJvQm94KGNvbnRFZHVJdGVtLnBuYW1lQ29tYm8pOw0KCQlkaXNhYmxlRWxlKGNvbnRFZHVJdGVtLnBub0lucHV0KTsNCgkJZGlzYWJsZUVsZShjb250RWR1SXRlbS5maW5hbFNjb3JlSW5wdXQpOw0KCQlkaXNhYmxlRWxlKGNvbnRFZHVJdGVtLmNsYXNzTmFtZUlucHV0KTsNCgkJZGlzYWJsZUVsZShjb250RWR1SXRlbS5kYXRlT2ZDbGFzc0lucHV0KTsNCgkJZGlzYWJsZURhdGVQaWNrZXIoY29udEVkdUl0ZW0uZGF0ZVBpY2tMaW5rKTsNCgkJZGlzYWJsZUVsZShjb250RWR1SXRlbS5ob3Vyc0NtcGxJbnB1dCk7DQoJfQ0KfQ0KDQpmdW5jdGlvbiBlbmFibGVDb250RWR1Y2F0aW9uU2VjdGlvbihjb250RWR1Y2F0aW9uKQ0Kew0KCWZvciAodmFyIGl0ZW1Jbng9MDtpdGVtSW54PCBjb250RWR1Y2F0aW9uLmFfY29udEVkdWNhdGlvbnMubGVuZ3RoO2l0ZW1JbngrKykNCgl7CQkJDQoJCXZhciBjb250RWR1ID0gY29udEVkdWNhdGlvbi5hX2NvbnRFZHVjYXRpb25zW2l0ZW1JbnhdOwkNCgkJaWYgKGNvbnRFZHUgPT0gbnVsbCkNCgkJew0KCQkJY29udGludWU7DQoJCX0JCQkJDQoJCWlmIChjb250RWR1ICE9IG51bGwgJiYgY29udEVkdSBpbnN0YW5jZW9mIENvbnRFZHVjYXRpb25JdGVtKQ0KCQl7DQoJCQljb250RWR1LmRlc3Ryb3koKTsNCgkJfQ0KCX0NCgljb250RWR1Y2F0aW9uLmlfbmV4dEVkdUluZGV4ID0gMDsNCgljb250RWR1Y2F0aW9uLmlzSW5pdGlhbFZpZXcgPSBmYWxzZTsNCglsb2FkQ29udEVkdURhdGEoKTsJCQ0KCWRvUGFnZUluaXQoKTsNCn0NCg0KZnVuY3Rpb24gZW5hYmxlRGF0ZVBpY2tlcihkYXRlTGluaywgZGF0ZUNlbGxJbnB1dCkNCnsNCglpZiAoZGF0ZUxpbmspDQoJew0KCQlkYXRlTGluay5pbm5lckhUTUwgPSAgIjxBIGhyZWY9XCIjXCIgb25LZXlEb3duPVwiaWYoZXZlbnQua2V5Q29kZT09MzIpIGV2ZW50LmtleUNvZGU9MTM7XCIgb25jbGljaz1cInJldHVybiBzZWxlY3REYXRlKCciKyBkYXRlQ2VsbElucHV0LmlkICsgIicpXCI+PGltZyBzcmM9XCIvIit3ZWJQYXRoKyIvaW1hZ2VzL3NlbGVjdERhdGUuZ2lmXCIgIg0KCQkrICdhbHQ9IicrYWx0TXNnKyciJw0KCQkrIiBib3JkZXI9MCA+PC9BPiZuYnNwOyI7DQoJfQ0KfQ0KDQpmdW5jdGlvbiBkaXNhYmxlRXhhbWluYXRpb25JdGVtKGV4YW1JdGVtKQ0Kew0KCWlmIChleGFtSXRlbSAhPSBudWxsICYmIGV4YW1JdGVtIGluc3RhbmNlb2YgRXhhbWluYXRpb25JdGVtKQ0KCXsNCgkJZGlzYWJsZUl0ZW1Db21ib0JveChleGFtSXRlbS5wbmFtZUNvbWJvKTsNCgkJZGlzYWJsZUl0ZW1Db21ib0JveChleGFtSXRlbS5leGFtTmFtZUNvbWJvKTsNCgkJZGlzYWJsZUVsZShleGFtSXRlbS5wbm9JbnB1dCk7DQoJCWRpc2FibGVFbGUoZXhhbUl0ZW0uZGF0ZU9mQ2xhc3NJbnB1dCk7DQoJCWRpc2FibGVFbGUoZXhhbUl0ZW0uc3RhcnRUaW1lSElucHV0KTsNCgkJZGlzYWJsZUVsZShleGFtSXRlbS5zdGFydFRpbWVNSW5wdXQpOw0KCQlkaXNhYmxlRWxlKGV4YW1JdGVtLmVuZFRpbWVISW5wdXQpOw0KCQlkaXNhYmxlRWxlKGV4YW1JdGVtLmVuZFRpbWVNSW5wdXQpOw0KCQlkaXNhYmxlRGF0ZVBpY2tlcihleGFtSXRlbS5kYXRlUGlja0xpbmspOwkJDQoJCWRpc2FibGVFbGUoZXhhbUl0ZW0uZmluYWxTY29yZUlucHV0KTsJCQ0KCQlkaXNhYmxlRWxlKGV4YW1JdGVtLmV4YW1TdGF0dXNJbnB1dCk7DQoJCWRpc2FibGVFbGUoZXhhbUl0ZW0ucm9zdGVySURJbnB1dCk7DQoJCWRpc2FibGVFbGUoZXhhbUl0ZW0uc3RhcnRUaW1lQU1QTUlucHV0KTsNCgkJZGlzYWJsZUVsZShleGFtSXRlbS5lbmRUaW1lQU1QTUlucHV0KTsNCgl9IAkNCn0NCg0KZnVuY3Rpb24gc2V0UmVhZE9ubHk0QWxsRmllbGRzRXhjZXB0RXhhbU5hbWUoZXhhbSwgaXRlbUlueCkNCnsNCglzZXRSZWFkT25seTRBbGxGaWVsZHNFeGNlcHRFeGFtTmFtZUFuZFNjb3JlKGV4YW0pDQoJc2V0UmVhZE9ubHlTdHlsZShleGFtLmZpbmFsU2NvcmVJbnB1dCk7CQkNCglzZXREZXRhaWxSZWFkT25seShpdGVtSW54KTsNCn0NCg0KZnVuY3Rpb24gc2V0UmVhZE9ubHk0QWxsRmllbGRzRXhjZXB0RXhhbU5hbWVBbmRTY29yZShleGFtKQ0Kew0KCWRpc2FibGVJdGVtQ29tYm9Cb3goZXhhbS5wbmFtZUNvbWJvKTsNCglzZXRSZWFkT25seVN0eWxlKGV4YW0ucG5vSW5wdXQpOw0KCXNldFJlYWRPbmx5U3R5bGUoZXhhbS5kYXRlT2ZDbGFzc0lucHV0KTsNCglzZXRSZWFkT25seVN0eWxlKGV4YW0uc3RhcnRUaW1lSElucHV0KTsNCglzZXRSZWFkT25seVN0eWxlKGV4YW0uc3RhcnRUaW1lTUlucHV0KTsNCglzZXRSZWFkT25seVN0eWxlKGV4YW0uZW5kVGltZUhJbnB1dCk7DQoJc2V0UmVhZE9ubHlTdHlsZShleGFtLmVuZFRpbWVNSW5wdXQpOw0KCWRpc2FibGVEYXRlUGlja2VyKGV4YW0uZGF0ZVBpY2tMaW5rKTsJCQ0KCXNldFJlYWRPbmx5U3R5bGUoZXhhbS5leGFtU3RhdHVzSW5wdXQpOw0KCXNldFJlYWRPbmx5U3R5bGUoZXhhbS5yb3N0ZXJJRElucHV0KTsNCglzZXRSZWFkT25seVN0eWxlKGV4YW0uc3RhcnRUaW1lQU1QTUlucHV0KTsNCglzZXRSZWFkT25seVN0eWxlKGV4YW0uZW5kVGltZUFNUE1JbnB1dCk7DQoJDQoNCn0NCg0KZnVuY3Rpb24gc2V0UmVhZE9ubHk0QWxsRmllbGRzRWR1Y2F0aW9uKGVkdSkNCnsJDQoNCglkaXNhYmxlSXRlbUNvbWJvQm94KGVkdS5wbmFtZUNvbWJvKTsNCglzZXRSZWFkT25seVN0eWxlKGVkdS5wbm9JbnB1dCk7DQoJc2V0UmVhZE9ubHlTdHlsZShlZHUueWVhcnNBdHRJbnB1dCk7DQoJc2V0UmVhZE9ubHlTdHlsZShlZHUueWVhcnNncmFkSW5wdXQpOw0KCXNldFJlYWRPbmx5U3R5bGUoZWR1LmRlZ3JlZU9wdGlvbnMpOw0KCWRpc2FibGVJdGVtQ29tYm9Cb3goZWR1LmRpc2NpcGxpbmVDb21ibyk7DQp9DQoNCmZ1bmN0aW9uIHNldERldGFpbFJlYWRPbmx5NEVkdWNhdGlvbihpdGVtSW54KQ0Kew0KCXZhciBhZGRyMUFyciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJ2YWx1ZShwcm92aWRlckRldGFpbE1vZGVsKmFkZHJlc3MxKSIpOw0KCXZhciBhZGRyMkFyciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJ2YWx1ZShwcm92aWRlckRldGFpbE1vZGVsKmFkZHJlc3MyKSIpOw0KCXZhciBhZGRyM0FyciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJ2YWx1ZShwcm92aWRlckRldGFpbE1vZGVsKmFkZHJlc3MzKSIpOw0KCXZhciBjaXR5QXJyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoInZhbHVlKHByb3ZpZGVyRGV0YWlsTW9kZWwqY2l0eSkiKTsNCgl2YXIgc3RhdGVBcnIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgidmFsdWUocHJvdmlkZXJEZXRhaWxNb2RlbCpzdGF0ZSkiKTsNCgl2YXIgemlwQXJyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoInZhbHVlKHByb3ZpZGVyRGV0YWlsTW9kZWwqemlwX2Rpc3ApIik7DQoJdmFyIHBob25lMUFyciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJ2YWx1ZShwcm92aWRlckRldGFpbE1vZGVsKnBob25lMV9kaXNwKSIpOw0KCXZhciBwaG9uZTJBcnIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgidmFsdWUocHJvdmlkZXJEZXRhaWxNb2RlbCpwaG9uZTJfZGlzcCkiKTsNCgl2YXIgcGhvbmUxQ0NBcnIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgidmFsdWUocHJvdmlkZXJEZXRhaWxNb2RlbCpwaG9uZTFDb3VudHJ5Q29kZSkiKTsNCgl2YXIgcGhvbmUyQ0NBcnIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgidmFsdWUocHJvdmlkZXJEZXRhaWxNb2RlbCpwaG9uZTJDb3VudHJ5Q29kZSkiKTsNCgl2YXIgZW1haWxBcnIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgidmFsdWUocHJvdmlkZXJEZXRhaWxNb2RlbCplbWFpbCkiKTsNCgl2YXIgZmF4QXJyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoInZhbHVlKHByb3ZpZGVyRGV0YWlsTW9kZWwqZmF4X2Rpc3ApIik7DQoJdmFyIGZheENDQXJyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoInZhbHVlKHByb3ZpZGVyRGV0YWlsTW9kZWwqZmF4Q291bnRyeUNvZGUpIik7DQoJdmFyIGNvbW1lbnRBcnIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgidmFsdWUoY29tbWVudHMpIik7DQoJdmFyIHN0ZENvbW1lbnRMaW5rQXJyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoImVkdVN0ZENvbW1lbnRMaW5rIik7DQoJdmFyIGNjQXJyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoInZhbHVlKHByb3ZpZGVyRGV0YWlsTW9kZWwqY291bnRyeUNvZGUpIik7DQoJc2V0UmVhZE9ubHlTdHlsZShhZGRyMUFycltpdGVtSW54KzFdKTsNCglzZXRSZWFkT25seVN0eWxlKGFkZHIyQXJyW2l0ZW1JbngrMV0pOw0KCXNldFJlYWRPbmx5U3R5bGUoYWRkcjNBcnJbaXRlbUlueCsxXSk7DQoJc2V0UmVhZE9ubHlTdHlsZShjaXR5QXJyW2l0ZW1JbngrMV0pOw0KCXNldFJlYWRPbmx5U3R5bGUoc3RhdGVBcnJbaXRlbUlueCsxXSk7DQoJc2V0UmVhZE9ubHlTdHlsZSh6aXBBcnJbaXRlbUlueCsxXSk7DQoJc2V0UmVhZE9ubHlTdHlsZShwaG9uZTFBcnJbaXRlbUlueCsxXSk7DQoJc2V0UmVhZE9ubHlTdHlsZShwaG9uZTJBcnJbaXRlbUlueCsxXSk7DQoJc2V0UmVhZE9ubHlTdHlsZShwaG9uZTFDQ0FycltpdGVtSW54KzFdKTsNCglzZXRSZWFkT25seVN0eWxlKHBob25lMkNDQXJyW2l0ZW1JbngrMV0pOw0KCXNldFJlYWRPbmx5U3R5bGUoZW1haWxBcnJbaXRlbUlueCsxXSk7DQoJc2V0UmVhZE9ubHlTdHlsZShmYXhBcnJbaXRlbUlueCsxXSk7DQoJc2V0UmVhZE9ubHlTdHlsZShmYXhDQ0FycltpdGVtSW54KzFdKTsNCglzZXRSZWFkT25seVN0eWxlKGNvbW1lbnRBcnJbaXRlbUlueCsxXSk7DQoJc2V0UmVhZE9ubHlTdHlsZTRTdGRDb21tZW50KHN0ZENvbW1lbnRMaW5rQXJyW2l0ZW1JbnhdKTsNCglzZXRSZWFkT25seVN0eWxlKGNjQXJyW2l0ZW1JbngrMV0pOw0KfQ0KDQoNCmZ1bmN0aW9uIHNldFJlYWRPbmx1NEFsbEZpZWxkc2NvbnRFZHVjYXRpb24oY29udEVkdSkNCnsNCgkNCglkaXNhYmxlSXRlbUNvbWJvQm94KGNvbnRFZHUuY29udEVkdU5hbWVDb21ibyk7DQoJZGlzYWJsZUl0ZW1Db21ib0JveChjb250RWR1LnBuYW1lQ29tYm8pOw0KCXNldFJlYWRPbmx5U3R5bGUoY29udEVkdS5wbm9JbnB1dCk7DQoJc2V0UmVhZE9ubHlTdHlsZShjb250RWR1LmZpbmFsU2NvcmVJbnB1dCk7DQoJc2V0UmVhZE9ubHlTdHlsZShjb250RWR1LmNsYXNzTmFtZUlucHV0KTsNCglzZXRSZWFkT25seVN0eWxlKGNvbnRFZHUuaG91cnNDbXBsSW5wdXQpOw0KCXNldFJlYWRPbmx5U3R5bGUoY29udEVkdS5kYXRlT2ZDbGFzc0lucHV0KTsNCglkaXNhYmxlRGF0ZVBpY2tlcihjb250RWR1LmRhdGVQaWNrTGluayk7DQp9DQoNCmZ1bmN0aW9uIHNldERldGFpbFJlYWRPbmx5NGNvbnRFZHVjYXRpb24oaXRlbUlueCkNCnsJDQoJdmFyIGFkZHIxQXJyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoInZhbHVlKGNvbnRQcm92aWRlckRldGFpbE1vZGVsKmFkZHJlc3MxKSIpOw0KCXZhciBhZGRyMkFyciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJ2YWx1ZShjb250UHJvdmlkZXJEZXRhaWxNb2RlbCphZGRyZXNzMikiKTsNCgl2YXIgYWRkcjNBcnIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgidmFsdWUoY29udFByb3ZpZGVyRGV0YWlsTW9kZWwqYWRkcmVzczMpIik7DQoJdmFyIGNpdHlBcnIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgidmFsdWUoY29udFByb3ZpZGVyRGV0YWlsTW9kZWwqY2l0eSkiKTsNCgl2YXIgc3RhdGVBcnIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgidmFsdWUoY29udFByb3ZpZGVyRGV0YWlsTW9kZWwqc3RhdGUpIik7DQoJdmFyIHppcEFyciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJ2YWx1ZShjb250UHJvdmlkZXJEZXRhaWxNb2RlbCp6aXBfZGlzcCkiKTsNCgl2YXIgcGhvbmUxQXJyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoInZhbHVlKGNvbnRQcm92aWRlckRldGFpbE1vZGVsKnBob25lMV9kaXNwKSIpOw0KCXZhciBwaG9uZTJBcnIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgidmFsdWUoY29udFByb3ZpZGVyRGV0YWlsTW9kZWwqcGhvbmUyX2Rpc3ApIik7DQoJdmFyIHBob25lMUNDQXJyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoInZhbHVlKGNvbnRQcm92aWRlckRldGFpbE1vZGVsKnBob25lMUNvdW50cnlDb2RlKSIpOw0KCXZhciBwaG9uZTJDQ0FyciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJ2YWx1ZShjb250UHJvdmlkZXJEZXRhaWxNb2RlbCpwaG9uZTJDb3VudHJ5Q29kZSkiKTsNCgl2YXIgZW1haWxBcnIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgidmFsdWUoY29udFByb3ZpZGVyRGV0YWlsTW9kZWwqZW1haWwpIik7DQoJdmFyIGZheEFyciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJ2YWx1ZShjb250UHJvdmlkZXJEZXRhaWxNb2RlbCpmYXhfZGlzcCkiKTsNCgl2YXIgZmF4Q0NBcnIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgidmFsdWUoY29udFByb3ZpZGVyRGV0YWlsTW9kZWwqZmF4Q291bnRyeUNvZGUpIik7DQoJdmFyIGNvbW1lbnRBcnIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgidmFsdWUoY29udENvbW1lbnRzKSIpOw0KCXZhciBzdGRDb21tZW50TGlua0FyciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJjb250U3RkQ29tbWVudExpbmsiKTsNCgl2YXIgY2NBcnIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgidmFsdWUoY29udFByb3ZpZGVyRGV0YWlsTW9kZWwqY291bnRyeUNvZGUpIik7DQoJDQoJc2V0UmVhZE9ubHlTdHlsZShhZGRyMUFycltpdGVtSW54KzFdKTsNCglzZXRSZWFkT25seVN0eWxlKGFkZHIyQXJyW2l0ZW1JbngrMV0pOw0KCXNldFJlYWRPbmx5U3R5bGUoYWRkcjNBcnJbaXRlbUlueCsxXSk7DQoJc2V0UmVhZE9ubHlTdHlsZShjaXR5QXJyW2l0ZW1JbngrMV0pOw0KCXNldFJlYWRPbmx5U3R5bGUoc3RhdGVBcnJbaXRlbUlueCsxXSk7DQoJc2V0UmVhZE9ubHlTdHlsZSh6aXBBcnJbaXRlbUlueCsxXSk7DQoJc2V0UmVhZE9ubHlTdHlsZShwaG9uZTFBcnJbaXRlbUlueCsxXSk7DQoJc2V0UmVhZE9ubHlTdHlsZShwaG9uZTJBcnJbaXRlbUlueCsxXSk7DQoJc2V0UmVhZE9ubHlTdHlsZShwaG9uZTFDQ0FycltpdGVtSW54KzFdKTsNCglzZXRSZWFkT25seVN0eWxlKHBob25lMkNDQXJyW2l0ZW1JbngrMV0pOw0KCXNldFJlYWRPbmx5U3R5bGUoZW1haWxBcnJbaXRlbUlueCsxXSk7DQoJc2V0UmVhZE9ubHlTdHlsZShmYXhBcnJbaXRlbUlueCsxXSk7DQoJc2V0UmVhZE9ubHlTdHlsZShmYXhDQ0FycltpdGVtSW54KzFdKTsNCglzZXRSZWFkT25seVN0eWxlKGNvbW1lbnRBcnJbaXRlbUlueCsxXSk7DQoJc2V0UmVhZE9ubHlTdHlsZTRTdGRDb21tZW50KHN0ZENvbW1lbnRMaW5rQXJyW2l0ZW1JbnhdKTsNCglzZXRSZWFkT25seVN0eWxlKGNjQXJyW2l0ZW1JbngrMV0pOw0KCQ0KfQ0KDQpmdW5jdGlvbiBzZXREZXRhaWxSZWFkT25seShpdGVtSW54KQ0Kew0KCWlmIChpdGVtSW54ICE9ICJ1bmRlZmluZWQiICYmIGl0ZW1JbnggIT0gbnVsbCkNCgl7DQoJCXZhciBhZGRyMUFyciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJ2YWx1ZShleGFtUHJvdmlkZXJEZXRhaWxNb2RlbCphZGRyZXNzMSkiKTsNCgkJdmFyIGFkZHIyQXJyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoInZhbHVlKGV4YW1Qcm92aWRlckRldGFpbE1vZGVsKmFkZHJlc3MyKSIpOw0KCQl2YXIgYWRkcjNBcnIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgidmFsdWUoZXhhbVByb3ZpZGVyRGV0YWlsTW9kZWwqYWRkcmVzczMpIik7DQoJCXZhciBjaXR5QXJyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoInZhbHVlKGV4YW1Qcm92aWRlckRldGFpbE1vZGVsKmNpdHkpIik7DQoJCXZhciBzdGF0ZUFyciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJ2YWx1ZShleGFtUHJvdmlkZXJEZXRhaWxNb2RlbCpzdGF0ZSkiKTsNCgkJdmFyIHppcEFyciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJ2YWx1ZShleGFtUHJvdmlkZXJEZXRhaWxNb2RlbCp6aXBfZGlzcCkiKTsNCgkJdmFyIHBob25lMUFyciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJ2YWx1ZShleGFtUHJvdmlkZXJEZXRhaWxNb2RlbCpwaG9uZTFfZGlzcCkiKTsNCgkJdmFyIHBob25lMkFyciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJ2YWx1ZShleGFtUHJvdmlkZXJEZXRhaWxNb2RlbCpwaG9uZTJfZGlzcCkiKTsNCgkJdmFyIHBob25lMUNDQXJyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoInZhbHVlKGV4YW1Qcm92aWRlckRldGFpbE1vZGVsKnBob25lMUNvdW50cnlDb2RlKSIpOw0KCQl2YXIgcGhvbmUyQ0NBcnIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgidmFsdWUoZXhhbVByb3ZpZGVyRGV0YWlsTW9kZWwqcGhvbmUyQ291bnRyeUNvZGUpIik7DQoJCXZhciBlbWFpbEFyciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJ2YWx1ZShleGFtUHJvdmlkZXJEZXRhaWxNb2RlbCplbWFpbCkiKTsNCgkJdmFyIGZheEFyciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJ2YWx1ZShleGFtUHJvdmlkZXJEZXRhaWxNb2RlbCpmYXhfZGlzcCkiKTsNCgkJdmFyIGZheENDQXJyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoInZhbHVlKGV4YW1Qcm92aWRlckRldGFpbE1vZGVsKmZheENvdW50cnlDb2RlKSIpOw0KCQl2YXIgY29tbWVudEFyciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJ2YWx1ZShleGFtQ29tbWVudHMpIik7DQoJCXZhciBpc0hhbmRpY2FwQWNjZXNzaWJsZUFyciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJ2YWx1ZShleGFtUHJvdmlkZXJEZXRhaWxNb2RlbCppc0hhbmRpY2FwQWNjZXNzaWJsZSkiKTsNCgkJdmFyIGhhbmRpY2FwQWNjZXNzaWJsZURlc0FyciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJ2YWx1ZShleGFtUHJvdmlkZXJEZXRhaWxNb2RlbCpoYW5kaWNhcEFjY2Vzc2libGVEZXMpIik7DQoJCXZhciBkcml2aW5nRGlyZWN0aW9uc0FyciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJ2YWx1ZShleGFtUHJvdmlkZXJEZXRhaWxNb2RlbCpkcml2aW5nRGlyZWN0aW9ucykiKTsNCgkJdmFyIHN1cHBvcnRlZExhbmd1YWdlc0FyciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJ2YWx1ZShleGFtUHJvdmlkZXJEZXRhaWxNb2RlbCpzdXBwb3J0ZWRMYW5ndWFnZXMpIik7DQoJCXZhciBzdGFuZGFyZENvbW1lbnRzQXJyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoInZhbHVlKGV4YW1Db21tZW50cykiKTsNCgkJdmFyIHN0ZENvbW1lbnRMaW5rQXJyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoImV4YW1TdGRDb21tZW50TGluayIpOw0KCQl2YXIgY291bnRyeSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJ2YWx1ZShleGFtUHJvdmlkZXJEZXRhaWxNb2RlbCpjb3VudHJ5Q29kZSkiKTsNCgkJc2V0UmVhZE9ubHlTdHlsZShhZGRyMUFycltpdGVtSW54KzFdKTsNCgkJc2V0UmVhZE9ubHlTdHlsZShhZGRyMkFycltpdGVtSW54KzFdKTsNCgkJc2V0UmVhZE9ubHlTdHlsZShhZGRyM0FycltpdGVtSW54KzFdKTsNCgkJc2V0UmVhZE9ubHlTdHlsZShjaXR5QXJyW2l0ZW1JbngrMV0pOw0KCQlzZXRSZWFkT25seVN0eWxlKHN0YXRlQXJyW2l0ZW1JbngrMV0pOw0KCQlzZXRSZWFkT25seVN0eWxlKHppcEFycltpdGVtSW54KzFdKTsNCgkJc2V0UmVhZE9ubHlTdHlsZShwaG9uZTFBcnJbaXRlbUlueCsxXSk7DQoJCXNldFJlYWRPbmx5U3R5bGUocGhvbmUyQXJyW2l0ZW1JbngrMV0pOw0KCQlzZXRSZWFkT25seVN0eWxlKHBob25lMUNDQXJyW2l0ZW1JbngrMV0pOw0KCQlzZXRSZWFkT25seVN0eWxlKHBob25lMkNDQXJyW2l0ZW1JbngrMV0pOw0KCQlzZXRSZWFkT25seVN0eWxlKGVtYWlsQXJyW2l0ZW1JbngrMV0pOw0KCQlzZXRSZWFkT25seVN0eWxlKGZheEFycltpdGVtSW54KzFdKTsNCgkJc2V0UmVhZE9ubHlTdHlsZShmYXhDQ0FycltpdGVtSW54KzFdKTsNCgkJc2V0UmVhZE9ubHlTdHlsZShjb21tZW50QXJyW2l0ZW1JbngrMV0pOw0KCQlzZXRSZWFkT25seVN0eWxlKGlzSGFuZGljYXBBY2Nlc3NpYmxlQXJyW2l0ZW1JbngrMV0pOw0KCQlzZXRSZWFkT25seVN0eWxlKGhhbmRpY2FwQWNjZXNzaWJsZURlc0FycltpdGVtSW54KzFdKTsNCgkJc2V0UmVhZE9ubHlTdHlsZShkcml2aW5nRGlyZWN0aW9uc0FycltpdGVtSW54KzFdKTsNCgkJc2V0UmVhZE9ubHlTdHlsZShzdXBwb3J0ZWRMYW5ndWFnZXNBcnJbaXRlbUlueCsxXSk7DQoJCXNldFJlYWRPbmx5U3R5bGU0U3RkQ29tbWVudChzdGRDb21tZW50TGlua0FycltpdGVtSW54XSk7DQoJCXNldFJlYWRPbmx5U3R5bGUoY291bnRyeVtpdGVtSW54ICsgMV0pOw0KCX0NCn0NCg0KZnVuY3Rpb24gc2V0UmVhZE9ubHlTdHlsZTRTdGRDb21tZW50KGZpZWxkKQ0Kew0KCWlmICh0eXBlb2YoZmllbGQpICE9ICd1bmRlZmluZWQnICYmIGZpZWxkICE9IG51bGwgJiYgZmllbGQuaWQgIT0gbnVsbCkNCgl7DQoJCWZpZWxkLm9uY2xpY2sgPSAiIjsNCgl9DQp9DQoNCmZ1bmN0aW9uIHNldFJlYWRPbmx5NEFsbEZpZWxkcyhleGFtLCBpdGVtSW54KQ0Kew0KCWlmIChleGFtICE9IG51bGwgJiYgZXhhbSBpbnN0YW5jZW9mIEV4YW1pbmF0aW9uSXRlbSkNCgl7DQoJCWRpc2FibGVJdGVtQ29tYm9Cb3goZXhhbS5leGFtTmFtZUNvbWJvKTsNCgkJc2V0UmVhZE9ubHk0QWxsRmllbGRzRXhjZXB0RXhhbU5hbWUoZXhhbSwgaXRlbUlueCk7DQoJfQ0KfQ0KDQpmdW5jdGlvbiBzZXRSZWFkV3JpdGU0QWxsRmllbGRzKGV4YW0sIGV4YW1JdGVtKQ0Kew0KCWlmIChleGFtICE9IG51bGwgJiYgZXhhbSBpbnN0YW5jZW9mIEV4YW1pbmF0aW9uSXRlbSkNCgl7DQoJCXNldFJlYWRXcml0ZVN0eWxlNENvbWJvQm94KGV4YW0ucG5hbWVDb21ibyk7DQoJCXNldFJlYWRXcml0ZVN0eWxlNENvbWJvQm94KGV4YW0uZXhhbU5hbWVDb21ibyk7DQoJCXNldFJlYWRXcml0ZVN0eWxlNEZpZWxkKGV4YW0uZGF0ZU9mQ2xhc3NJbnB1dCk7DQoJCXNldFJlYWRXcml0ZVN0eWxlNEZpZWxkKGV4YW0uc3RhcnRUaW1lSElucHV0KTsNCgkJc2V0UmVhZFdyaXRlU3R5bGU0RmllbGQoZXhhbS5zdGFydFRpbWVNSW5wdXQpOw0KCQlzZXRSZWFkV3JpdGVTdHlsZTRGaWVsZChleGFtLmVuZFRpbWVISW5wdXQpOw0KCQlzZXRSZWFkV3JpdGVTdHlsZTRGaWVsZChleGFtLmVuZFRpbWVNSW5wdXQpOw0KCQllbmFibGVEYXRlUGlja2VyKGV4YW0uZGF0ZVBpY2tMaW5rLGV4YW0uZGF0ZU9mQ2xhc3NJbnB1dCk7CQkNCgkJc2V0UmVhZFdyaXRlU3R5bGU0RmllbGQoZXhhbS5maW5hbFNjb3JlSW5wdXQpOwkJDQoJCXNldFJlYWRXcml0ZVN0eWxlNEZpZWxkKGV4YW0uZXhhbVN0YXR1c0lucHV0KTsNCgkJc2V0UmVhZFdyaXRlU3R5bGU0RmllbGQoZXhhbS5yb3N0ZXJJRElucHV0KTsNCgkJc2V0UmVhZFdyaXRlU3R5bGU0RmllbGQoZXhhbS5zdGFydFRpbWVBTVBNSW5wdXQpOw0KCQlzZXRSZWFkV3JpdGVTdHlsZTRGaWVsZChleGFtLmVuZFRpbWVBTVBNSW5wdXQpOw0KCQkNCgkJaWYoZXhhbSAmJiBleGFtLnBub0lucHV0ICYmIGV4YW1JdGVtDQoJCQkJJiYgZXhhbUl0ZW1bInJlYWRvbmx5Il0gJiYgZXhhbUl0ZW1bInJlYWRvbmx5Il0gPT0gJ3RydWUnKQ0KCQl7DQoJCQlleGFtLnBub0lucHV0LnJlYWRPbmx5ID0gdHJ1ZTsNCgkJCXJlYWRPbmx5T2JqLnJlc2V0UmVhZE9ubHkoW2V4YW0ucG5vSW5wdXRdKTsNCgkJfQ0KCQllbHNlDQoJCXsNCgkJCXNldFJlYWRXcml0ZVN0eWxlNEZpZWxkKGV4YW0ucG5vSW5wdXQpOw0KCQl9DQoJfQ0KfQ0KDQpmdW5jdGlvbiBzZXRSZWFkV3JpdGVTdHlsZTRDb21ib0JveChjb21ib0VsZSkNCnsNCglpZiAoY29tYm9FbGUpDQoJew0KCQljb21ib0VsZS5zZXREaXNhYmxlZChmYWxzZSk7DQoJfQ0KfQ0KDQpmdW5jdGlvbiBzZXRSZWFkV3JpdGVTdHlsZTRGaWVsZChmaWVsZCkNCnsNCglpZih0eXBlb2YoZmllbGQpICE9ICd1bmRlZmluZWQnICYmIGZpZWxkICE9IG51bGwpDQoJew0KCQlmaWVsZC5yZWFkT25seSA9IGZhbHNlOw0KCQlyZWFkT25seU9iai5yZXNldFJlYWRPbmx5KFtmaWVsZF0pOw0KCX0NCn0NCg0KZnVuY3Rpb24gZW5hYmxlRGF0ZVBpY2tlcihkYXRlTGluaywgZGF0ZUNlbGxJbnB1dCkNCnsNCglpZiAoZGF0ZUxpbmspDQoJew0KCQlkYXRlTGluay5pbm5lckhUTUwgPSAgIjxBIGhyZWY9XCIjXCIgb25LZXlEb3duPVwiaWYoZXZlbnQua2V5Q29kZT09MzIpIGV2ZW50LmtleUNvZGU9MTM7XCIgb25jbGljaz1cInJldHVybiBzZWxlY3REYXRlKCciKyBkYXRlQ2VsbElucHV0LmlkICsgIicpXCI+PGltZyBzcmM9XCIvIit3ZWJQYXRoKyIvaW1hZ2VzL3NlbGVjdERhdGUuZ2lmXCIgIg0KCQkrICdhbHQ9IicrYWx0TXNnKyciJw0KCQkrIiBib3JkZXI9MCA+PC9BPiZuYnNwOyI7DQoJfQ0KfQ0KDQpmdW5jdGlvbiBzZXRSZWFkT25seVN0eWxlKGZpZWxkKQ0Kew0KCWlmKHR5cGVvZihmaWVsZCkgIT0gJ3VuZGVmaW5lZCcgJiYgZmllbGQgIT0gbnVsbCkNCgl7DQoJCWlmIChmaWVsZC50eXBlID09ICJzZWxlY3Qtb25lIikNCgkJew0KCQkJc2V0UmVhZE9ubHlTdHlsZTREcm9wRG93bihmaWVsZCk7DQoJCX0NCgkJZWxzZSBpZiAoZmllbGQudHlwZSA9PSAiY2hlY2tib3giKQ0KCQl7DQoJCQlzZXRSZWFkT25seVN0eWxlNENoZWNrQm94KGZpZWxkKTsNCgkJfQ0KCQllbHNlDQoJCXsNCgkJCWZpZWxkLnJlYWRPbmx5ID0gdHJ1ZTsNCgkJCWZpZWxkLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZjdmN2Y3IjsNCgkJCXJlYWRPbmx5T2JqLnJlc2V0UmVhZE9ubHkoW2ZpZWxkXSk7DQoJCX0NCgl9DQp9DQoNCmZ1bmN0aW9uIHNldFJlYWRPbmx5U3R5bGU0RHJvcERvd24oZmllbGQpDQp7DQoJdmFyIHNJZHggPSAnJzsNCgkNCglmaWVsZC5vbmZvY3VzID0gZnVuY3Rpb24oKXsNCgkJc0lkeCA9IHRoaXMuc2VsZWN0ZWRJbmRleDsNCgl9DQoNCglmaWVsZC5vbmNoYW5nZSA9IGZ1bmN0aW9uKCl7DQoJCXRoaXMuc2VsZWN0ZWRJbmRleCA9IHNJZHg7CQ0KCX0NCglmaWVsZC5kaXNhYmxlZCA9IHRydWU7DQoJcmVhZE9ubHlPYmoucmVzZXRSZWFkT25seShbZmllbGRdKTsNCn0NCg0KDQpmdW5jdGlvbiBzZXRSZWFkT25seVN0eWxlNENoZWNrQm94KGZpZWxkKQ0Kew0KCWZpZWxkLm9uY2xpY2sgPSBmdW5jdGlvbigpDQoJew0KCQl0aGlzLmNoZWNrZWQ9IXRoaXMuY2hlY2tlZDsNCgl9CQkNCn0NCg0KDQpmdW5jdGlvbiBzZXRTZWxlY3RlZFZhbHVlKHRhcmdldEVsZSwgdmFsdWUpICAgICAgICAgICAgDQp7DQoJaWYgKHRhcmdldEVsZSkNCgl7DQoJCWZvcih2YXIgaT0wOyBpPHRhcmdldEVsZS5vcHRpb25zLmxlbmd0aDsgaSsrKQ0KCQl7DQoJCQlpZih0YXJnZXRFbGUub3B0aW9uc1tpXS52YWx1ZSA9PSB2YWx1ZSkNCgkJCXsNCgkJCQl0YXJnZXRFbGUub3B0aW9uc1tpXS5zZWxlY3RlZCA9IHRydWU7DQoJCQkJcmV0dXJuOw0KCQkJfQkJCQ0KCQl9DQoJfQ0KfQ0KDQpmdW5jdGlvbiBlbmFibGVFeGFtaW5hdGlvblNlY3Rpb24oZXhhbWluYXRpb24pDQp7DQoJZm9yICh2YXIgaXRlbUlueD0wO2l0ZW1Jbng8IGV4YW1pbmF0aW9uLmFfZXhhbWluYXRpb25zLmxlbmd0aDtpdGVtSW54KyspDQoJewkJCQ0KCQl2YXIgZXhhbSA9IGV4YW1pbmF0aW9uLmFfZXhhbWluYXRpb25zW2l0ZW1JbnhdOwkNCgkJaWYgKGV4YW0gPT0gbnVsbCkNCgkJew0KCQkJY29udGludWU7DQoJCX0JCQ0KCQlpZiAoZXhhbSAhPSBudWxsICYmIGV4YW0gaW5zdGFuY2VvZiBFeGFtaW5hdGlvbkl0ZW0pDQoJCXsNCgkJCWV4YW0uZGVzdHJveSgpOw0KCQl9DQoJfQ0KCWV4YW1pbmF0aW9uLmlfbmV4dEV4YW1JbmRleCA9IDA7DQoJZXhhbWluYXRpb24uaXNJbml0aWFsVmlldyA9IGZhbHNlOw0KCWxvYWRFeGFtRGF0YSgpOwkJDQoJZG9QYWdlSW5pdCgpOw0KfQ0KDQpmdW5jdGlvbiBkaXNhYmxlRWxlKGVsZSkNCnsNCglpZiAoZWxlKQ0KCXsNCgkJZWxlLmRpc2FibGVkID0gdHJ1ZTsJDQoJCXJlYWRPbmx5T2JqLnJlc2V0UmVhZE9ubHkoW2VsZV0pOw0KCX0NCn0NCg0KZnVuY3Rpb24gZGlzYWJsZUl0ZW1Db21ib0JveChjb21ib0VsZSkNCnsNCglpZiAoY29tYm9FbGUpDQoJew0KCQljb21ib0VsZS5zZXREaXNhYmxlZCh0cnVlKTsNCgl9DQp9DQoNCmZ1bmN0aW9uIGZpbHRlck51bUlucHV0KGV2dCkNCnsJDQoJdmFyIGtleUNvZGUsIENoYXIsIGlucHV0RmllbGQ7DQoJdmFyIGZpbHRlciA9ICcwMTIzNDU2Nzg5Lic7DQoJaWYod2luZG93LmV2ZW50KXsNCgkJa2V5Q29kZSA9IHdpbmRvdy5ldmVudC5rZXlDb2RlOw0KCQlldnQgPSB3aW5kb3cuZXZlbnQ7DQoJfQ0KCWVsc2UgaWYoZXZ0KQ0KCXsNCgkJa2V5Q29kZSA9IGV2dC53aGljaDsNCgl9DQoJZWxzZSANCgl7DQoJCXJldHVybiB0cnVlOw0KCX0NCgkJCQ0KCS8vIEdldCB0aGUgRWxlbWVudCB0aGF0IHRyaWdnZXJlZCB0aGUgRXZlbnQNCglpbnB1dEZpZWxkID0gZXZ0LnNyY0VsZW1lbnQgPyBldnQuc3JjRWxlbWVudCA6IGV2dC50YXJnZXQgfHwgZXZ0LmN1cnJlbnRUYXJnZXQ7DQoJLy8gSWYgdGhlIEtleSBQcmVzc2VkIGlzIGEgQ1RSTCBrZXkgbGlrZSBFc2MsIEVudGVyIGV0YyAtIGFsbG93DQoJaWYoKGtleUNvZGU9PW51bGwpIHx8IChrZXlDb2RlPT0wKSB8fCAoa2V5Q29kZT09OCkgfHwgKGtleUNvZGU9PTkpIHx8IChrZXlDb2RlPT0xMykgfHwgKGtleUNvZGU9PTI3KSApDQoJew0KCQlyZXR1cm4gdHJ1ZTsNCgl9DQoJLy8gcHJldmVudCB0aGUgZXZlbnQgZnJvbSBiZWluZyBwb2Nlc3NlZCBieSBwYXJlbnQgY29tcG9uZW50DQoJZXZ0LmNhbmNlbEJ1YmJsZSA9IHRydWU7DQoJQ2hhciA9IFN0cmluZy5mcm9tQ2hhckNvZGUoa2V5Q29kZSk7DQoJaWYoKGZpbHRlci5pbmRleE9mKENoYXIpID4gLTEpKSANCgl7DQoJCWlmIChDaGFyID09ICcuJyAmJiBpbnB1dEZpZWxkLnZhbHVlPT0nJyl7DQoJCQlpbnB1dEZpZWxkLnZhbHVlID0nMCc7DQoJCQlyZXR1cm4gdHJ1ZTsNCgkJfQ0KCQlpZiAoQ2hhciA9PSAnLicgJiYgaW5wdXRGaWVsZC52YWx1ZS5pbmRleE9mKCcuJykgPiAtMSkNCgkJew0KCQkJcmV0dXJuIGZhbHNlOw0KCQl9DQoJCWlmIChpbnB1dEZpZWxkLnZhbHVlLm1hdGNoKC9eWzAtOV17MCwxMH0oXC57MCwxfSlbMC05XXswLDJ9JC8pKQ0KCQl7CQ0KCQkJcmV0dXJuIHRydWU7DQoJCX0NCgkJZWxzZQ0KCQl7CQ0KCQkJcmV0dXJuIGZhbHNlOwkNCgkJfQ0KCX0JDQoJZWxzZQ0KCXsNCgkJcmV0dXJuIGZhbHNlOw0KCX0NCn0NCg0KZnVuY3Rpb24gZXhwYW5kT3JDb2xsYXBzZVRhYmxlKHdlYnBhdGgsZGl2TmFtZSkNCnsgDQoJdmFyIG9iakZyYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGl2TmFtZSkuc3R5bGU7IA0KCXZhciBvYmpJbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkaXZOYW1lKydJbWcnKTsNCglpZiAob2JqRnJhbWUuZGlzcGxheT09ImJsb2NrIikgDQoJew0KCQlvYmpGcmFtZS5kaXNwbGF5PSJub25lIjsgDQoJCW9iakltZy5zcmM9IHdlYnBhdGggKyAiL2ltYWdlcy9hcnJvd19ibGFjay5naWYiOw0KCQlvYmpJbWcuYWx0PSBvYmpJbWcub3BlbkFsdDsNCgl9DQoJZWxzZSANCgl7DQoJCW9iakZyYW1lLmRpc3BsYXk9ImJsb2NrIjsgDQoJCW9iakltZy5zcmM9IHdlYnBhdGggKyAiL2ltYWdlcy9hcnJvd19kb3duX2JsYWNrLmdpZiI7DQoJCW9iakltZy5hbHQgPW9iakltZy5jbG9zZUFsdDsNCgl9DQoJdmFyIGNvbnRCYWxUYWJsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjb250RWR1QmFsYW5jZVRhYmxlIik7CQ0KCQ0KCW5IZWlnaHQgPSBjb250QmFsVGFibGUuaGVpZ2h0Ow0KCWlmKG9iakZyYW1lLmRpc3BsYXkgPT0gIm5vbmUiKQ0KCXsNCgkJbkhlaWdodCA9IDA7DQoJfQ0KCQ0KCW9iakZyYW1lLmhlaWdodCA9IG5IZWlnaHQ7CQkJCQkJCQkJDQoNCglzY3JvbGxCYXJJc3N1ZS5hdXRvQWRqdXN0T3V0ZXJDb250YWluZXIoKTsNCn0NCg0KZnVuY3Rpb24gc2V0RmxkU3RhdHVzKGVsZUZsZCwgZGF0YSkNCnsNCglpZihkYXRhWyJyZWFkb25seSJdICYmIGRhdGFbInJlYWRvbmx5Il0gPT0gJ3RydWUnKXsNCgkJZWxlRmxkLnJlYWRPbmx5ID0gdHJ1ZTsJDQoJfWVsc2Ugew0KCQllbGVGbGQucmVhZE9ubHkgPSBmYWxzZTsNCgl9DQoJcmVhZE9ubHlPYmoucmVzZXRSZWFkT25seShbZWxlRmxkXSk7DQp9DQoNCmZ1bmN0aW9uIHJlc2V0Rm9ybXMoKQ0Kew0KCXZhciBmb3JtT2JqID0gZG9jdW1lbnQuZm9ybXM7CQkNCglmb3IgKHZhciBpPTA7IGk8Zm9ybU9iai5sZW5ndGg7IGkrKykNCgl7DQoJCWZvcm1PYmpbaV0ucmVzZXQoKTsNCgl9DQp9DQoNCmZ1bmN0aW9uIGdldFN0b3JlTWF4TGVuZ3RoKG15U3RvcmUpDQp7DQoJdmFyIGxlbiA9IG15U3RvcmUuZ2V0VG90YWxDb3VudCgpOw0KCXZhciBtYXhMZW4gPSAwOw0KCWZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspDQoJew0KCQl2YXIgbXlSZWNvcmQgPSBteVN0b3JlLmdldEF0KGkpOw0KCQlpZiAobXlSZWNvcmQgIT1udWxsICYmIG15U3RvcmUgIT0gdW5kZWZpbmVkKQ0KCQl7DQoJCQltYXhMZW4gPSBNYXRoLm1heChtYXhMZW4sbXlSZWNvcmQuZ2V0KCduYW1lJykubGVuZ3RoKTsNCgkJfQkJDQoJfQ0KCXJldHVybiBtYXhMZW47DQp9DQoNCmZ1bmN0aW9uIHNldENvbWJvTGlzdFdpZHRoKG15U3RvcmUsIG15Q29tYm8sbWluTGlzdFdpZHRoKQ0Kew0KCWlmIChteVN0b3JlICE9IHVuZGVmaW5lZCAmJiBteUNvbWJvICE9IHVuZGVmaW5lZCkNCgl7DQoJCQ0KCQl2YXIgbWF4TGVuID0gZ2V0U3RvcmVNYXhMZW5ndGgobXlTdG9yZSkgKiA1LjU7CQ0KCQlteUNvbWJvLmxpc3RXaWR0aCA9IE1hdGgubWF4KG1heExlbis1NSxteUNvbWJvLmdldFNpemUoKS53aWR0aCsxNyxtaW5MaXN0V2lkdGgpOw0KCX0NCn0NCg0KZnVuY3Rpb24gc2xlZXAobWlsbGlzKSB7DQogICAgZGF0ZSA9IG5ldyBEYXRlKCk7DQogICAgdmFyIGN1ckRhdGUgPSBudWxsOw0KICAgIGRvIHsNCiAgICAgICAgY3VyRGF0ZSA9IG5ldyBEYXRlKCk7DQogICAgfQ0KICAgIHdoaWxlIChjdXJEYXRlIC0gZGF0ZSA8IG1pbGxpcyk7DQp9DQoNCg0KZnVuY3Rpb24gZ2V0Q29tYm9TdHlsZVN0cigpDQp7DQoJdmFyIHN0eWxlU3RyID0gJ3ZlcnRpY2FsLWFsaWduOm1pZGRsZTtwb3NpdGlvbjogcmVsYXRpdmU7dG9wOi0ycHg7bWFyZ2luOjBweDtwYWRkaW5nOjBweDtoZWlnaHQ6MTlweDsnOw0KCXJldHVybiBzdHlsZVN0cjsNCn0NCg0KZnVuY3Rpb24gc2Nyb2xsTGlzdEludG9WaWV3KHNjcm9sbEludG9WaWV3RmxhZywgYW5jaG9ySWQpDQp7DQoJaWYgKCBzY3JvbGxJbnRvVmlld0ZsYWcgJiYgc2Nyb2xsSW50b1ZpZXdGbGFnID09ICd0cnVlJyAmJiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhbmNob3JJZCkpDQoJew0KCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhbmNob3JJZCkuc2Nyb2xsSW50b1ZpZXcoKTsNCgl9DQp9DQoNCmZ1bmN0aW9uIGlzRXF1YWxzSWdub3JlQ2FzZSh2YWwxLCB2YWwyKQ0Kew0KCWlmICh2YWwxID09IG51bGwgfHwgdmFsMSA9PSB1bmRlZmluZWQgfHwgdHJpbSh2YWwxKSA9PSAnJyANCgkJfHwgdmFsMiA9PSBudWxsIHx8IHZhbDIgPT0gdW5kZWZpbmVkIHx8IHRyaW0odmFsMikgPT0gJycgKQ0KCXsNCgkJcmV0dXJuIGZhbHNlOw0KCX0NCgllbHNlDQoJew0KCQlyZXR1cm4gdmFsMS50b1VwcGVyQ2FzZSgpID09IHZhbDIudG9VcHBlckNhc2UoKTsNCgl9DQp9DQoNCmZ1bmN0aW9uIHJlcHJlcGFyZVZpcnR1YWxCdWZmZXIoKQ0Kew0KCWlmKCFwcm9maWxlLmlzRW5hYmxlZDUwOCkNCgl7DQoJCXJldHVybjsNCgl9DQoJIC8vRm9jdXMgaW4gdGhlIGVycm9yTXNnUGFuZWwNCgkgdmFyIHBvcHVwTXNnID0gIiI7DQoJIHZhciBlcnJvck1zZ1BhbmVscyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCdlcnJvck1zZ1BhbmVsJyk7DQoJIGlmKGVycm9yTXNnUGFuZWxzLmxlbmd0aD4wKQ0KCSB7DQoJCSBmb3IoaT0wO2k8ZXJyb3JNc2dQYW5lbHMubGVuZ3RoO2krKykNCgkJIHsNCgkJCSBwb3B1cE1zZyArPSAnXHInICsgZXJyb3JNc2dQYW5lbHNbaV0uaW5uZXJUZXh0Ow0KCQkgfQ0KCSB9DQoJIHZhciBlcnJMaXN0UGFuZWw9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Vycl9tc2cnKTsNCgkgaWYoZXJyTGlzdFBhbmVsKQ0KCSB7DQoJCSAvLy0tQXBwZW5kIGVycm9yIGxpc3QgcGFuZWwNCgkJIHZhciBlcnJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCgkJIHZhciBlcnJIdG1sPScnOw0KCQkgdmFyIGZvbnRBcnI9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImZvbnQiKTsNCgkJIA0KCQkgZm9yIChpPTA7aTxmb250QXJyLmxlbmd0aDtpKyspIA0KCQkgew0KCQkJIGlmKGZvbnRBcnJbaV0uZ2V0QXR0cmlidXRlKCJhaXItZXJyb3IiKSAmJiBmb250QXJyKGkpLmdldEF0dHJpYnV0ZSgiYWlyLWVycm9yIik9PSd0cnVlJykNCgkJICAgICB7DQoJCQkgICAgdmFyIGVycm9yTXNnID0gZm9udEFycltpXTsNCgkJCSAgICB2YXIgbGFiZWwgPSBlcnJvck1zZy5wYXJlbnRFbGVtZW50LmlubmVySFRNTDsNCgkJCSAgICBpZihsYWJlbC5pbmRleE9mKCc8TEFCRUwnKT49MCkNCgkJCSAgICB7DQoJCQkgICAgCWxhYmVsID0gZXJyb3JNc2cucGFyZW50RWxlbWVudC5maXJzdENoaWxkLmlubmVyVGV4dDsNCgkJCSAgICB9DQoJCQkgICAgZWxzZSBpZihmb250QXJyW2ldLmdldEF0dHJpYnV0ZSgiYWlyLWxhYmVsIikpDQoJCQkgICAgew0KCQkJICAgIAlsYWJlbCA9IGZvbnRBcnJbaV0uZ2V0QXR0cmlidXRlKCJhaXItbGFiZWwiKTsNCgkJCSAgICB9DQoJCQkgICAgZWxzZQ0KCQkJICAgIHsNCgkJCQkgICAgbGFiZWwgPSBsYWJlbC5zdWJzdHIoMCxsYWJlbC5pbmRleE9mKCc8JykpOw0KCQkJICAgIH0NCgkJICAgIAl2YXIgZmllbGRJZCA9IGZvbnRBcnIoaSkuZ2V0QXR0cmlidXRlKCJhaXItZm9yIik7DQoJCSAgICAJDQoJCSAgICAJaWYoIWZpZWxkSWQpew0KCQkgICAgCQlmaWVsZElkID0gZXJyb3JNc2cucGFyZW50RWxlbWVudC5maXJzdENoaWxkLmh0bWxGb3I7DQoJCSAgICAJCWlmKGZpZWxkSWQpDQoJCSAgICAJCXsNCgkJICAgIAkJCXZhciBlcnJfZWxlPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZpZWxkSWQpDQoJCSAgICAJCQlpZighZXJyX2VsZSkNCgkJCQkJew0KCQkgICAgCQkJCXBvcHVwTXNnICs9ICdccicgKyBlcnJvck1zZy5pbm5lclRleHQ7DQoJCSAgICAJCQkJY29udGludWU7DQoJCSAgICAJCQl9DQoJCSAgICAJCQlpZihlcnJfZWxlICYmIChlcnJfZWxlLnJlYWRPbmx5PT10cnVlIHx8IGVycl9lbGUuZGlzYWJsZWQgPT0gdHJ1ZSkpDQoJCSAgICAJCQl7CQ0KCQkgICAgCQkJCXBvcHVwTXNnICs9ICdccicgKyBlcnJvck1zZy5pbm5lclRleHQ7DQoJCQkJICAgIAkJY29udGludWU7DQoJCSAgICAJCQl9CQkgICAgCQkJDQoJCSAgICAJCX0NCgkJICAgIAkJZWxzZQ0KCQkgICAgCQl7DQoJCQkgICAgCQlwb3B1cE1zZyArPSAnXHInICsgZXJyb3JNc2cuaW5uZXJUZXh0Ow0KCQkJICAgIAkJY29udGludWU7DQoJCQkgICAgCX0NCgkJICAgIAl9DQoJCSAgICAJDQoJCSAgICAJaWYobGFiZWwhPScnKQ0KCQkgICAgCXsNCgkJICAgIAkJbGFiZWwgPSBsYWJlbCArICIgOiAiICsgZXJyb3JNc2cuaW5uZXJUZXh0Ow0KCQkgICAgCX0NCgkJICAgIAllbHNlDQoJCSAgICAJew0KCQkgICAgCQlsYWJlbCA9IGVycm9yTXNnLmlubmVyVGV4dDsNCgkJICAgIAl9DQoJCSAgICAJdmFyIGZpZWxkRXJyb3JBcnJheSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKGZpZWxkSWQpOw0KCQkgICAgCWlmKGZpZWxkRXJyb3JBcnJheS5sZW5ndGg+MSl7DQoJCSAgICAJCWZvcihqPTA7ajxmaWVsZEVycm9yQXJyYXkubGVuZ3RoO2orKyl7DQoJCSAgICAJCQlpZihmaWVsZEVycm9yQXJyYXlbal0udmFsdWU9PScnKXsNCgkJCSAgICAJCQlpZighZmllbGRFcnJvckFycmF5W2pdLmlkfHxmaWVsZEVycm9yQXJyYXlbal0uaWQ9PWZpZWxkRXJyb3JBcnJheVtqXS5uYW1lKXsNCgkJCSAgICAJCQkJZmllbGRFcnJvckFycmF5W2pdLmlkID0gZmllbGRFcnJvckFycmF5W2pdLm5hbWUrJ19bJytqKyddJzsNCgkJCSAgICAJCQl9DQoJCSAgICAJCQkJZXJySHRtbCArPSAnPGEgY2xhc3M9IlJlZHN0YXIiIGhyZWY9IiMnDQoJCQkgICAgCQkJCSsgZmllbGRFcnJvckFycmF5W2pdLmlkICsgJyIgdGl0bGU9IkVycm9yIHwgJytsYWJlbCsnIj4nK2xhYmVsICsnPC9hPjxicj4nOw0KCQkgICAgCQkJfQ0KCQkgICAgCQl9DQoJCSAgICAJfWVsc2V7DQoJCSAgICAJCQllcnJIdG1sICs9ICc8YSBjbGFzcz0iUmVkc3RhciIgaHJlZj0iIycNCgkJICAgIAkJCQkrIGZpZWxkSWQgKyAnIiB0aXRsZT0iRXJyb3IgfCAnK2xhYmVsKyciPicrbGFiZWwgKyc8L2E+PGJyPic7DQoJCSAgICAJfQ0KCQkgICAgIH0NCgkJIH0NCgkJIGVyckRpdi5pbm5lckhUTUw9ZXJySHRtbDsNCgkJIGVyckxpc3RQYW5lbC5hcHBlbmRDaGlsZChlcnJEaXYpOwkNCgkJIGlmKGVyckxpc3RQYW5lbC5pbm5lclRleHQhPScnICYmIHBvcHVwTXNnID09ICcnKQ0KCQkgew0KCQkJIGFsZXJ0KGdldFRleHRsYWJsZSgiY29tbW9uLmVycm9yLnByb21wdCIpKTsNCgkJIH0NCgkgfQ0KCSBpZihlcnJMaXN0UGFuZWwpDQoJIHsNCgkJIGVyckxpc3RQYW5lbC5hY2Nlc3NLZXkgPSBnRXJyb3JQYW5sZUFjY2Vzc0tleTsNCgkJIGVyckxpc3RQYW5lbC5mb2N1cygpOw0KCSB9DQp9DQoNCmZ1bmN0aW9uIGNoYW5nZUVsZVN0eWxlKGV4YW1PYmosIGV4YW1FbGUpDQp7DQoJaWYgKGlzRXF1YWxzSWdub3JlQ2FzZSgiU0NIRURVTEVEIixleGFtT2JqWyJleGFtU3RhdHVzIl0pKXsNCgkJZXhhbUVsZS5yZWFkT25seSA9IHRydWU7DQoJfWVsc2V7DQoJCWV4YW1FbGUucmVhZE9ubHkgPSBmYWxzZTsNCgl9IA0KCXJlYWRPbmx5T2JqLnJlc2V0UmVhZE9ubHkoW2V4YW1PYmpdKTsNCn0NCg0KZnVuY3Rpb24gc2NoZWR1bGVFeGFtKGluZGV4KQ0Kew0KCWlmKCFyZXN1bWVDYXA0U2NoZWR1bGVFeGFtSW5EYWlseSgpKQ0KCXsNCgkJcmV0dXJuIGZhbHNlOw0KCX0NCglkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZXhhbUR5bmFtaWNFcnJvciIpLmlubmVyVGV4dCA9ICIiOw0KCXZhciBleGFtUHJvdmlkZXJOYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImV4YW1Qcm92aWRlck5hbWUiICsgaW5kZXgpID09IG51bGwgPyAiIiA6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJleGFtUHJvdmlkZXJOYW1lIiArIGluZGV4KS52YWx1ZTsNCgl2YXIgZXhhbVByb3ZpZGVyTm8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZXhhbVByb3ZpZGVyTm8iICsgaW5kZXgpID09IG51bGwgPyAiIiA6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJleGFtUHJvdmlkZXJObyIgKyBpbmRleCkudmFsdWU7DQoJdmFyIGV4YW1OYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImV4YW1OYW1lIiArIGluZGV4KS52YWx1ZTsNCgl2YXIgZXhhbVNlcU5iciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJleGFtRWR1U2VxdWVuY2UiICsgaW5kZXgpLnZhbHVlOw0KCXZhciByZWZFeGFtTmJyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInJlZkV4YW1OYnIiICsgaW5kZXgpLnZhbHVlOw0KCXZhciB1cmwgPSAiL3BvcnRsZXRzL2NvbW1vbnMvZWR1Y2F0aW9uL3NjaGVkdWxlL3NjaGVkdWxlRXhhbUZyYW1lLmpzcD9tb2R1bGU9IiArIG1vZHVsZSANCgkJCQkrICImZXhhbVByb3ZpZGVyTmFtZT0iICsgZXhhbVByb3ZpZGVyTmFtZSArICImZXhhbU5hbWU9IitlbmNvZGVVUklDb21wb25lbnQoZXhhbU5hbWUpDQoJCQkJKyAiJmV4YW1Qcm92aWRlck5vPSIrZW5jb2RlVVJJQ29tcG9uZW50KGV4YW1Qcm92aWRlck5vKSArICImZXhhbVNlcU5icj0iICsgZXhhbVNlcU5iciANCgkJCQkrICImc2NoZWR1bGVUeXBlPXNjaGVkdWxlIiArICImcmVmRXhhbU5icj0iICsgcmVmRXhhbU5icjsNCg0KCXdpbmRvdy5zaG93TW9kYWxEaWFsb2codXJsLHdpbmRvdywgJ2RpYWxvZ1dpZHRoOjEwMDBweDtkaWFsb2dIZWlnaHQ6NzAwcHg7cmVzaXphYmxlOnllcztzY3JvbGw6eWVzO01pbmltaXplPXllcztNYXhpbWl6ZT15ZXMnKTsNCn0NCg0KZnVuY3Rpb24gcmVzY2hlZHVsZUV4YW0oaW5kZXgpDQp7DQoJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImV4YW1EeW5hbWljRXJyb3IiKS5pbm5lclRleHQgPSAiIjsNCgl2YXIgdXJsID0gIi9wb3J0bGV0cy9jYXAvZXhhbWluYXRpb25TY2hlZHVsZS5kbz9tb2RlPWNoZWNrQml6VmFsdWU0UmVhc29ucyZzY2hlZHVsZVR5cGU9cmVzY2hlZHVsZSZtb2R1bGU9IiArIG1vZHVsZSArICImaW5kZXg9IiArIGluZGV4Ow0KCXJlbW90ZUFjY2Vzcyh1cmwsIGNoZWNrUmVhc29uc1Jlc3VsdCwgIGRvY3VtZW50LmZvcm1zWzBdKTsNCglyZXR1cm4gZmFsc2U7DQp9DQoNCmZ1bmN0aW9uIGNoZWNrUmVhc29uc1Jlc3VsdChkYXRhKQ0Kew0KCXZhciByZXNwb25zZU1zZyA9IGV2YWwoJygnK2RhdGErJyknKTsNCglpZiAoIXJlc3BvbnNlTXNnLmhhc0JpelZhbHVlNFJlYXNvbikNCgl7DQoJCWFsZXJ0KGdpdmVSZWFzb25zNFJlc2NoZWRDYW5jICsgJ1xuJyArIG5vUmVhc29uczRSZXNjaGVkQ2FuYyArICdcbicgKyBjb250YWN0QWRtaW5BZ2VuY3kpOw0KCQlyZXR1cm4gZmFsc2U7DQoJfQ0KCWVsc2UNCgl7DQoJCXZhciBpbmRleCA9IHJlc3BvbnNlTXNnLmluZGV4Ow0KCQl2YXIgZXhhbVByb3ZpZGVyTmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJleGFtUHJvdmlkZXJOYW1lIiArIGluZGV4KSA9PSBudWxsID8gIiIgOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZXhhbVByb3ZpZGVyTmFtZSIgKyBpbmRleCkudmFsdWU7DQoJCXZhciBleGFtUHJvdmlkZXJObyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJleGFtUHJvdmlkZXJObyIgKyBpbmRleCkgPT0gbnVsbCA/ICIiIDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImV4YW1Qcm92aWRlck5vIiArIGluZGV4KS52YWx1ZTsNCgkJdmFyIGV4YW1OYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImV4YW1OYW1lIiArIGluZGV4KS52YWx1ZTsNCgkJdmFyIGV4YW1TZXFOYnIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZXhhbUVkdVNlcXVlbmNlIiArIGluZGV4KS52YWx1ZTsNCgkJdmFyIGV4YW1EYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImRhdGUoZXhhbURhdGUiK2luZGV4KyIpIikgPT0gbnVsbCA/ICIiIDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImRhdGUoZXhhbURhdGUiK2luZGV4KyIpIikudmFsdWU7DQoJCXZhciBleGFtU3RhcnRUaW1lSCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJleGFtU3RhcnRUaW1lSCIgKyBpbmRleCkgPT0gbnVsbCA/ICIiIDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImV4YW1TdGFydFRpbWVIIiArIGluZGV4KS52YWx1ZTsNCgkJdmFyIGV4YW1TdGFydFRpbWVNID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImV4YW1TdGFydFRpbWVNIiArIGluZGV4KSA9PSBudWxsID8gIiIgOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZXhhbVN0YXJ0VGltZU0iICsgaW5kZXgpLnZhbHVlOw0KCQl2YXIgZXhhbVN0YXJ0VGltZUFNUE0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZXhhbVN0YXJ0VGltZUFNUE0iICsgaW5kZXgpID09IG51bGwgPyAiIiA6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJleGFtU3RhcnRUaW1lQU1QTSIgKyBpbmRleCkudmFsdWU7DQoJCXZhciByZWZFeGFtTmJyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInJlZkV4YW1OYnIiICsgaW5kZXgpLnZhbHVlOw0KCQl2YXIgdXJsID0gIi9wb3J0bGV0cy9jb21tb25zL2VkdWNhdGlvbi9zY2hlZHVsZS9zY2hlZHVsZUV4YW1GcmFtZS5qc3A/bW9kdWxlPSIgKyBtb2R1bGUNCgkJCQkrICImZXhhbVByb3ZpZGVyTmFtZT0iK2VuY29kZVVSSUNvbXBvbmVudChleGFtUHJvdmlkZXJOYW1lKSsiJmV4YW1OYW1lPSIrZW5jb2RlVVJJQ29tcG9uZW50KGV4YW1OYW1lKQ0KCQkJCSsgIiZleGFtUHJvdmlkZXJObz0iK2VuY29kZVVSSUNvbXBvbmVudChleGFtUHJvdmlkZXJObykgKyAiJmV4YW1EYXRlPSIrZW5jb2RlVVJJQ29tcG9uZW50KGV4YW1EYXRlKQ0KCQkJCSsgIiZleGFtU3RhcnRUaW1lSD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGV4YW1TdGFydFRpbWVIKSArIiZleGFtU3RhcnRUaW1lTT0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGV4YW1TdGFydFRpbWVNKSANCgkJCQkrICImZXhhbVN0YXJ0VGltZUFNUE09IiArIGVuY29kZVVSSUNvbXBvbmVudChleGFtU3RhcnRUaW1lQU1QTSkNCgkJCQkrICImc2NoZWR1bGVUeXBlPSIgKyByZXNwb25zZU1zZy5zY2hlZHVsZVR5cGUgKyAiJnJlZkV4YW1OYnI9IiArIHJlZkV4YW1OYnIgKyAiJmV4YW1TZXFOYnI9IiArIGV4YW1TZXFOYnINCgkJCQkrICImZnJvbT1kYWlseSI7DQoJCXdpbmRvdy5zaG93TW9kYWxEaWFsb2codXJsLHdpbmRvdywnZGlhbG9nV2lkdGg6MTAwMHB4O2RpYWxvZ0hlaWdodDo3MDBweDtyZXNpemFibGU6eWVzO3Njcm9sbDpubztNaW5pbWl6ZT15ZXM7TWF4aW1pemU9eWVzJyk7DQoJfQ0KfQ0KDQpmdW5jdGlvbiBjYW5jZWxFeGFtKGluZGV4KQ0Kew0KCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJleGFtRHluYW1pY0Vycm9yIikuaW5uZXJUZXh0ID0gIiI7DQoJdmFyIHVybCA9ICIvcG9ydGxldHMvY2FwL2V4YW1pbmF0aW9uU2NoZWR1bGUuZG8/bW9kZT1jaGVja0JpelZhbHVlNFJlYXNvbnMmc2NoZWR1bGVUeXBlPWNhbmNlbCZtb2R1bGU9IiArIG1vZHVsZSArICImaW5kZXg9IiArIGluZGV4Ow0KCXJlbW90ZUFjY2Vzcyh1cmwsIGNoZWNrUmVhc29uc1Jlc3VsdCwgIGRvY3VtZW50LmZvcm1zWzBdKTsNCglyZXR1cm4gZmFsc2U7DQoNCn0NCg0KZnVuY3Rpb24gcmVzZXRFeGFtKGV4YW1TZXFOYnIsIGV4YW1OYW1lLCBleGFtRGF0ZSwgcmVmRXhhbU5icikNCnsNCglkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZXhhbUR5bmFtaWNFcnJvciIpLmlubmVyVGV4dCA9ICIiOw0KCWlmKGNvbmZpcm0oZ2V0VGV4dGxhYmxlKCJleGFtLmRhaWx5LnJlc2V0c2NoZWR1bGVleGFtZnJvbXJlYWR5LmxhYmVsIikpKQ0KCXsNCgkJdmFyIHVybCA9ICIvcG9ydGxldHMvZWR1Y2F0aW9uL3Byb3ZpZGVyZXhhbWluYXRpb24vcHJvdmlkZXJFeGFtaW5hdGlvbkZvcm0uZG8/bW9kZT1jaGVja1Jlc2NoZWR1bGVPckNhbmNlbERhdGUiOw0KCQl1cmwgPSB1cmwgKyAiJmV4YW1TZXFOYnI9IiArIGV4YW1TZXFOYnIgKyAiJmV4YW1OYW1lPSIgKyBleGFtTmFtZSArICImZXhhbURhdGU9IiArIGV4YW1EYXRlICsgIiZyZWZFeGFtTmJyPSIgKyByZWZFeGFtTmJyOw0KCQlyZW1vdGVBY2Nlc3ModXJsLCByZXNldEV4YW1BZnRlckNoZWNrRGF0ZSk7DQoJfQ0KfQ0KDQpmdW5jdGlvbiByZXNldEV4YW1BZnRlckNoZWNrRGF0ZShkYXRhKQ0Kew0KCXZhciByZXNwb25zZU1zZyA9IGV2YWwoJygnK2RhdGErJyknKTsNCglpZiAocmVzcG9uc2VNc2cub3V0T2ZSYW5nZSkNCgl7DQoJCWlmKGNvbmZpcm0ocmVzcG9uc2VNc2cubWVzc2FnZUZvclJlYWR5VG9TY2hlZHVsZSkpDQoJCXsNCgkJCXZhciB1cmwgPSAiL3BvcnRsZXRzL2NhcC9leGFtaW5hdGlvblNjaGVkdWxlLmRvP21vZGU9cmVzZXRFeGFtJmV4YW1TZXFOYnI9IityZXNwb25zZU1zZy5leGFtU2VxTmJyOw0KCQkJcmV0dXJuIFNpbXVsYXRlQ2xpY2soJzEnLCAnYWNjZWxhc3VibWl0YnV0dG9ubmFtZScsJ3Jlc2V0RXhhbScsJ3JlZnJlc2hfdGFyZ2V0JywnJywncmVmcmVzaF91cmwnLCcnLCAndGFyZ2V0JywgJycsDQoJCQkJCSdhY3Rpb24nLCB1cmwsICdwcmVzdWJtaXQnLCAnJyk7DQoJCX0NCgl9DQoJZWxzZQ0KCXsNCgkJdmFyIHVybCA9ICIvcG9ydGxldHMvY2FwL2V4YW1pbmF0aW9uU2NoZWR1bGUuZG8/bW9kZT1yZXNldEV4YW0mZXhhbVNlcU5icj0iK3Jlc3BvbnNlTXNnLmV4YW1TZXFOYnI7DQoJCXJldHVybiBTaW11bGF0ZUNsaWNrKCcxJywgJ2FjY2VsYXN1Ym1pdGJ1dHRvbm5hbWUnLCdyZXNldEV4YW0nLCdyZWZyZXNoX3RhcmdldCcsJycsJ3JlZnJlc2hfdXJsJywnJywgJ3RhcmdldCcsICcnLA0KCQkJCSdhY3Rpb24nLCB1cmwsICdwcmVzdWJtaXQnLCAnJyk7DQoJfQ0KfQ0KDQpmdW5jdGlvbiBzY2hlZHVsZUV4YW1Gcm9tUmVhZHkoZXhhbVNlcU5iciwgZXhhbU5hbWUsIGV4YW1EYXRlLCByZWZFeGFtTmJyLCBpbmRleCkNCnsNCglkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZXhhbUR5bmFtaWNFcnJvciIpLmlubmVyVGV4dCA9ICIiOw0KCWlmKGNvbmZpcm0oZ2V0VGV4dGxhYmxlKCJleGFtLmRhaWx5LmNvbmZpcm1zY2hlZHVsZWV4YW1mcm9tcmVhZHkubGFiZWwiKSkpDQoJew0KCQl2YXIgdXJsID0gIi9wb3J0bGV0cy9lZHVjYXRpb24vcHJvdmlkZXJleGFtaW5hdGlvbi9wcm92aWRlckV4YW1pbmF0aW9uRm9ybS5kbz9tb2RlPWNoZWNrUmVzY2hlZHVsZU9yQ2FuY2VsRGF0ZSI7DQoJCXVybCA9IHVybCArICImZXhhbVNlcU5icj0iICsgZXhhbVNlcU5iciArICImZXhhbU5hbWU9IiArIGV4YW1OYW1lICsgIiZleGFtRGF0ZT0iICsgZXhhbURhdGUgKyAiJnJlZkV4YW1OYnI9IiArIHJlZkV4YW1OYnI7DQoJCXVybCA9IHVybCArICImaW5kZXg9IiArIGluZGV4Ow0KCQlyZW1vdGVBY2Nlc3ModXJsLCBTY2hlZHVsZUZyb21SZWFkeUFmdGVyQ2hlY2tEYXRlKTsNCgl9DQp9DQoNCmZ1bmN0aW9uIFNjaGVkdWxlRnJvbVJlYWR5QWZ0ZXJDaGVja0RhdGUoZGF0YSkNCnsNCgl2YXIgcmVzcG9uc2VNc2cgPSBldmFsKCcoJytkYXRhKycpJyk7DQoJaWYgKHJlc3BvbnNlTXNnLm91dE9mUmFuZ2UpDQoJew0KCQlpZihjb25maXJtKHJlc3BvbnNlTXNnLm1lc3NhZ2VGb3JSZWFkeVRvU2NoZWR1bGUpKQ0KCQl7DQoJCQlzY2hlZHVsZUV4YW0ocmVzcG9uc2VNc2cuaW5kZXgpOw0KCQl9DQoJfQ0KCWVsc2UNCgl7DQoJCXZhciB1cmwgPSAiL3BvcnRsZXRzL2NhcC9leGFtaW5hdGlvblNjaGVkdWxlLmRvP21vZGU9c2NoZWR1bGVFeGFtRnJvbVJlYWR5JmV4YW1TZXFOYnI9IityZXNwb25zZU1zZy5leGFtU2VxTmJyOw0KCQlyZXR1cm4gU2ltdWxhdGVDbGljaygnMScsICdhY2NlbGFzdWJtaXRidXR0b25uYW1lJywnc2NoZWR1bGVFeGFtRnJvbVJlYWR5JywncmVmcmVzaF90YXJnZXQnLCcnLCdyZWZyZXNoX3VybCcsJycsICd0YXJnZXQnLCAnJywNCgkJCQknYWN0aW9uJywgdXJsLCAncHJlc3VibWl0JywgJycpOw0KCX0NCn0NCg0KZnVuY3Rpb24gc2V0RXhhbVByb3ZpZGVyUGFzc2luZ1Njb3JlKGV4YW1JdGVtLGRhdGEscGFzc0xibCxmYWlsTGJsLG5hTGJsKQ0Kew0KCWV4YW1JdGVtLmdyYWRpbmdTdHlsZS52YWx1ZSA9IGRhdGFbImV4YW1HcmFkaW5nU3R5bGUiXTsNCglleGFtSXRlbS5wYXNzaW5nU2NvcmUudmFsdWUgPSBkYXRhWyJleGFtUGFzc2luZ1Njb3JlIl07CQ0KCQ0KCWlmIChleGFtSXRlbS5wYXNzaW5nU2NvcmVJbnB1dCkNCgl7DQoJCWlmICgncGFzc2ZhaWwnID09IGRhdGFbImV4YW1HcmFkaW5nU3R5bGUiXSkNCgkJew0KCQkJZXhhbUl0ZW0ucGFzc2luZ1Njb3JlSW5wdXQudmFsdWUgPSBuYUxibDsNCgkJfQ0KCQllbHNlDQoJCXsNCgkJCWlmKCEoJ3BlcmNlbnRhZ2UnID09IGRhdGFbImV4YW1HcmFkaW5nU3R5bGUiXSkmJiBleGFtSXRlbS5wYXNzaW5nU2NvcmUudmFsdWUgPT0gMCkNCgkJCXsNCgkJCQlleGFtSXRlbS5wYXNzaW5nU2NvcmVJbnB1dC52YWx1ZSA9ICcnOw0KCQkJfQkJCQkNCgkJCWVsc2UJDQoJCQl7DQoJCQkJZXhhbUl0ZW0ucGFzc2luZ1Njb3JlSW5wdXQudmFsdWUgPSBkYXRhWyJleGFtUGFzc2luZ1Njb3JlIl07DQoJCQl9DQoJCQkNCgkJfQ0KCX0JDQoJDQoJaWYgKGV4YW1JdGVtLnBhc3NpbmdTY29yZUlucHV0ICYmIGV4YW1JdGVtLnBhc3NpbmdTY29yZVN5bWJvbCkNCgl7DQoJCWlmICgncGVyY2VudGFnZScgPT0gZGF0YVsiZXhhbUdyYWRpbmdTdHlsZSJdKQ0KCQl7DQoJCQlleGFtSXRlbS5wYXNzaW5nU2NvcmVTeW1ib2wuaW5uZXJIVE1MID0gIiUiOw0KCQl9DQoJCWVsc2UNCgkJew0KCQkJZXhhbUl0ZW0ucGFzc2luZ1Njb3JlU3ltYm9sLmlubmVySFRNTCA9ICIiOw0KCQl9DQoJfQkNCglkcmF3RmluYWxTY29yZUVsZShleGFtSXRlbSwgZGF0YVsiZXhhbUdyYWRpbmdTdHlsZSJdLCJleGFtRmluYWxTY29yZSIscGFzc0xibCxmYWlsTGJsKTsNCn0NCg0KLy9mb3JtYXQgdGhlIHZhbHVlcyB3aXRoIG1hc2sgb3IgYmluZCBtYXNrLg0KZnVuY3Rpb24gZGVhbFZhbHVlcyhwcmVmaXgsIGl0ZW1JbngsIGRhdGEsIHRhcmdldElEKQ0Kew0KCWlmKHR5cGVvZiBiaW5kTWFza0FuZERlYWxWYWx1ZSA9PSAidW5kZWZpbmVkIikNCgl7DQoJCXJldHVybjsNCgl9DQoJdmFyIGlkcyA9IFtdOw0KCXZhciBpbmRleGVzID0gW107DQoJDQoJdmFyIHppcElkID0gJ3ZhbHVlKCcgKyBwcmVmaXggKyAnKnppcCcgKyBpdGVtSW54ICsgJ19kaXNwKSc7DQoJdmFyIHppcEluZGV4ID0gJ3ZhbHVlKCcgKyBwcmVmaXggKyAnKnppcCknOw0KCQ0KCXZhciBwaG9uZTFJZCA9ICd2YWx1ZSgnICsgcHJlZml4ICsgJypwaG9uZTEnICsgaXRlbUlueCArICdfZGlzcCknOw0KCXZhciBwaG9uZTFJbmRleCA9ICd2YWx1ZSgnICsgcHJlZml4ICsgJypwaG9uZTEpJzsNCgkNCgl2YXIgcGhvbmUySWQgPSAndmFsdWUoJyArIHByZWZpeCArICcqcGhvbmUyJyArIGl0ZW1JbnggKyAnX2Rpc3ApJzsNCgl2YXIgcGhvbmUySW5kZXggPSAndmFsdWUoJyArIHByZWZpeCArICcqcGhvbmUyKSc7DQoJDQoJdmFyIGZheElkID0gJ3ZhbHVlKCcgKyBwcmVmaXggKyAnKmZheCcgKyBpdGVtSW54ICsgJ19kaXNwKSc7DQoJdmFyIGZheEluZGV4ID0gJ3ZhbHVlKCcgKyBwcmVmaXggKyAnKmZheCknOw0KCQ0KCWlkcy5wdXNoKHppcElkKTsNCglpZHMucHVzaChwaG9uZTFJZCk7DQoJaWRzLnB1c2gocGhvbmUySWQpOw0KCWlkcy5wdXNoKGZheElkKTsNCgkNCglpbmRleGVzLnB1c2goemlwSW5kZXgpOw0KCWluZGV4ZXMucHVzaChwaG9uZTFJbmRleCk7DQoJaW5kZXhlcy5wdXNoKHBob25lMkluZGV4KTsNCglpbmRleGVzLnB1c2goZmF4SW5kZXgpOw0KCQ0KCXZhciBjb3VudHJ5SWQgPSAndmFsdWUoJyArIHByZWZpeCArICcqY291bnRyeUNvZGUnICsgaXRlbUlueCArICIpIjsNCglmb3IodmFyIGkgPSAwOyBpIDwgaWRzLmxlbmd0aDsgaSsrKQ0KCXsNCgkJdmFyIG1hc2tUeXBlID0gaWRzW2ldLmluZGV4T2YoInppcCIpID4gLTEgPyAicG9zdGFsQ29kZSIgOiAicGhvbmVOdW1iZXIiOw0KCQliaW5kTWFza0FuZERlYWxWYWx1ZQ0KCQkoDQoJCQlpZHNbaV0sIA0KCQkJJ1llcycsIA0KCQkJJy9wb3J0bGV0cy9yZWdpb25hbC9yZWdpb25hbFN5bmNNYXNrLmRvP21vZGU9c3luY01hc2smbWFza1R5cGU9JyArIG1hc2tUeXBlLCANCgkJCWNvdW50cnlJZCwNCgkJCWRhdGEgPyBkYXRhW2luZGV4ZXNbaV1dIDogbnVsbCwNCgkJCW1hc2tUeXBlLA0KCQkJdGFyZ2V0SUQNCgkJKTsNCgl9DQp9DQoNCi8vQXZvaWQgdG8gY3JlYXRlIHRvbyBtYW55IG9mICBhamF4QW55V2hlcmUgb2JqZWN0Lg0KZnVuY3Rpb24gZ2V0U3RhdGVzQnlDb3VudHJ5KHVybCwgcGFyYW0sIHpvbmVJZCkNCnsNCgl2YXIgeG1sSHR0cCA9IGNyZWF0ZVhNTEh0dHBSZXF1ZXN0KCk7DQoJaWYgKCF4bWxIdHRwKSANCgl7DQoJCXRocm93IG5ldyBFcnJvcigiWE1MSHR0cCBvYmplY3QgY291bGQgYmUgY3JlYXRlZC4iKTsNCgl9DQoJdmFyIGlzQXN5bmNocm9uaXplZCA9IHRydWU7DQoJaWYgKHBhcmFtICE9IG51bGwgJiYgcGFyYW0uaW5kZXhPZigic3RhdGVQcm9wZXJ0eT0iKSA+IC0xKQ0KCXsNCgkJaXNBc3luY2hyb25pemVkID0gZmFsc2U7DQoJfQ0KCXhtbEh0dHAub3BlbigiUE9TVCIsIHVybCwgaXNBc3luY2hyb25pemVkKTsNCgl4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGNhbGxCYWNrOw0KCXhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpOw0KCXhtbEh0dHAuc2VuZChwYXJhbSk7DQoJDQoJZnVuY3Rpb24gY2FsbEJhY2soKQ0KCXsNCgkJaWYoeG1sSHR0cC5yZWFkeVN0YXRlID09IDQpDQoJCXsNCgkJCWlmICh4bWxIdHRwLnN0YXR1cyA9PSAyMDApDQoJCQl7DQoJCQkJdmFyIHpvbmVzID0geG1sSHR0cC5yZXNwb25zZVhNTC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiem9uZSIpOw0KCQkJCWlmICh6b25lcy5sZW5ndGggIT0gMCkgew0KCSAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHpvbmVzLmxlbmd0aDsgaSsrKSB7DQoJICAgICAgICAgICAgICAgICAgICB2YXIgem9uZU5vZGUgPSB6b25lc1tpXTsNCg0KCSAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWUgPSB6b25lTm9kZS5nZXRBdHRyaWJ1dGUoIm5hbWUiKTsNCgkgICAgICAgICAgICAgICAgICAgIHZhciBpZCA9IHpvbmVOb2RlLmdldEF0dHJpYnV0ZSgiaWQiKTsNCgkgICAgICAgICAgICAgICAgICAgIHZhciBodG1sID0gIiI7DQoJICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBjaGlsZEluZGV4ID0gMDsgY2hpbGRJbmRleCA8IHpvbmVOb2RlLmNoaWxkTm9kZXMubGVuZ3RoOyBjaGlsZEluZGV4KyspIHsNCgkgICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9IHpvbmVOb2RlLmNoaWxkTm9kZXNbY2hpbGRJbmRleF0uZGF0YQ0KCSAgICAgICAgICAgICAgICAgICAgfQ0KCSAgICAgICAgICAgICAgICAgICAgdmFyIHpvbmVIb2xkZXIgPSBuYW1lIT1udWxsPw0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYWF6b25lLiIgKyBuYW1lKToNCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOw0KCSAgICAgICAgICAgICAgICAgICAgaWYgKHpvbmVIb2xkZXIgIT0gbnVsbCAmJiB0eXBlb2Yoem9uZUhvbGRlcikgIT0gInVuZGVmaW5lZCIpIHsNCgkgICAgICAgICAgICAgICAgICAgICAgICB6b25lSG9sZGVyLmlubmVySFRNTCA9IGh0bWw7DQoJICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsQmFySXNzdWUuYXV0b0FkanVzdE91dGVyQ29udGFpbmVyKGRvY3VtZW50KTsNCgkgICAgICAgICAgICAgICAgICAgIH0NCgkgICAgICAgICAgICAgICAgfQ0KCSAgICAgICAgICAgIH0NCgkJCX0NCgkJfQ0KCX0NCn0NCg0KDQpmdW5jdGlvbiBzZXRWYWx1ZUJ5SWQobGFiZWwsaW5kZXgsdmFsdWUpIHsNCgl2YXIgb2JqID0gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ2YWx1ZSgiK2xhYmVsK2luZGV4KyIpIik7DQoJaWYob2JqKQ0KCXsNCgkJb2JqLnZhbHVlID0gdmFsdWU7DQoJfQ0KCQ0KfQ0KDQpmdW5jdGlvbiBzaG93RXJyb3JNc2dCeUlkKGxhYmVsLGVycklueCx2YWx1ZSkgew0KCXZhciBvYmogPSAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobGFiZWwrZXJySW54KyIqbXNnIik7DQoJaWYob2JqICYmIHZhbHVlKQ0KCXsNCgkJaWYob2JqLnByZXZpb3VzU2libGluZyAmJiB2YWx1ZS5pbmRleE9mKCdYJyk+MCkNCgkJew0KCQkJb2JqLnByZXZpb3VzU2libGluZy5pbm5lclRleHQgPSAiIjsNCgkJfQ0KCQlvYmouaW5uZXJUZXh0ID0gdmFsdWU7DQoJCW9iai5zZXRBdHRyaWJ1dGUoImFpci1mb3IiLCJ2YWx1ZSgiK2xhYmVsK2VycklueCsiKSIpOw0KCQlvYmouc2V0QXR0cmlidXRlKCJhaXItZXJyb3IiLCJ0cnVlIik7DQoJCXJldHVybiB0cnVlOw0KCX0NCn0NCg0KZnVuY3Rpb24gb3Blbkxvb2tVcFdpbmRvdyh1cmwpDQp7DQoJCXZhciBwcm9wZXJ0eT0iaGVpZ2h0PTQwMCwgd2lkdGg9ODAwLCB0b3A9MjAwLCBsZWZ0PTIwMCx0b29sYmFyPW5vLCBtZW51YmFyPW5vLCBzY3JvbGxiYXJzPXllcywgcmVzaXphYmxlPXllcywgbG9jYXRpb249bm8sIHN0YXR1cz15ZXMiOw0KCQlpZihnZXREaXJlY3Rpb24oKSkNCgkJew0KCQkgICB3aW5kb3dPcGVuKHVybCwgInBvcFVwV2luZG93IiwgcHJvcGVydHkrIixsZWZ0PSIgKyBnZXRTY3JlZW5MZWZ0KDEwMCw4MDApKTsNCgkJfQ0KCQllbHNlDQoJCXsNCgkJICAgIHdpbmRvd09wZW4odXJsLCAicG9wVXBXaW5kb3ciLHByb3BlcnR5ICk7DQoJCX0NCn0NCg0KZnVuY3Rpb24gY3JlYXRlSGlkZGVuSW5wdXRFbGVtZW50KGVsZU5hbWUsb2JqKQ0Kew0KCXZhciBpbnB1dEVsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7DQoJaW5wdXRFbGUudHlwZSA9ICJoaWRkZW4iOw0KCWlucHV0RWxlLm5hbWUgPSBlbGVOYW1lOw0KCWlucHV0RWxlLmlkID0gZWxlTmFtZSArIG9iai5pX2luZGV4Ow0KCWlucHV0RWxlLnZhbHVlID0gIiI7DQoJcmV0dXJuIGlucHV0RWxlOw0KfQ0KDQpmdW5jdGlvbiBzZXRIaWRkZW5Qcm92aWRlckRldGFpbERhdGEob2JqLCBlbGVQcmVmaXgpDQp7DQoJb2JqLmFkZHJlc3NMaW5lMSA9IGNyZWF0ZUhpZGRlbklucHV0RWxlbWVudCgidmFsdWUoIitlbGVQcmVmaXgrIlByb3ZpZGVyRGV0YWlsTW9kZWwqYWRkcmVzczFEZXMpIixvYmopOw0KCW9iai5hZGRyZXNzTGluZTIgPSBjcmVhdGVIaWRkZW5JbnB1dEVsZW1lbnQoInZhbHVlKCIrZWxlUHJlZml4KyJQcm92aWRlckRldGFpbE1vZGVsKmFkZHJlc3MyRGVzKSIsb2JqKTsNCglvYmouYWRkcmVzc0xpbmUzID0gY3JlYXRlSGlkZGVuSW5wdXRFbGVtZW50KCJ2YWx1ZSgiK2VsZVByZWZpeCsiUHJvdmlkZXJEZXRhaWxNb2RlbCphZGRyZXNzM0RlcykiLG9iaik7DQoJb2JqLmNpdHkgPSBjcmVhdGVIaWRkZW5JbnB1dEVsZW1lbnQoInZhbHVlKCIrZWxlUHJlZml4KyJQcm92aWRlckRldGFpbE1vZGVsKmNpdHlEZXMpIixvYmopOw0KCW9iai5zdGF0ZSA9IGNyZWF0ZUhpZGRlbklucHV0RWxlbWVudCgidmFsdWUoIitlbGVQcmVmaXgrIlByb3ZpZGVyRGV0YWlsTW9kZWwqc3RhdGVEZXMpIixvYmopOw0KCW9iai56aXAgPSBjcmVhdGVIaWRkZW5JbnB1dEVsZW1lbnQoInZhbHVlKCIrZWxlUHJlZml4KyJQcm92aWRlckRldGFpbE1vZGVsKnppcERlcykiLG9iaik7DQoJb2JqLmZheCA9IGNyZWF0ZUhpZGRlbklucHV0RWxlbWVudCgidmFsdWUoIitlbGVQcmVmaXgrIlByb3ZpZGVyRGV0YWlsTW9kZWwqZmF4RGVzKSIsb2JqKTsNCglvYmoucGhvbmUxID0gY3JlYXRlSGlkZGVuSW5wdXRFbGVtZW50KCJ2YWx1ZSgiK2VsZVByZWZpeCsiUHJvdmlkZXJEZXRhaWxNb2RlbCpwaG9uZTFEZXMpIixvYmopOw0KCW9iai5waG9uZTIgPSBjcmVhdGVIaWRkZW5JbnB1dEVsZW1lbnQoInZhbHVlKCIrZWxlUHJlZml4KyJQcm92aWRlckRldGFpbE1vZGVsKnBob25lMkRlcykiLG9iaik7DQoJb2JqLnBob25lMUNvdW50cnlDb2RlID0gY3JlYXRlSGlkZGVuSW5wdXRFbGVtZW50KCJ2YWx1ZSgiK2VsZVByZWZpeCsiUHJvdmlkZXJEZXRhaWxNb2RlbCpwaG9uZTFDb3VudHJ5Q29kZURlcykiLG9iaik7DQoJb2JqLnBob25lMkNvdW50cnlDb2RlID0gY3JlYXRlSGlkZGVuSW5wdXRFbGVtZW50KCJ2YWx1ZSgiK2VsZVByZWZpeCsiUHJvdmlkZXJEZXRhaWxNb2RlbCpwaG9uZTJDb3VudHJ5Q29kZURlcykiLG9iaik7DQoJb2JqLmZheENvdW50cnlDb2RlID0gY3JlYXRlSGlkZGVuSW5wdXRFbGVtZW50KCJ2YWx1ZSgiK2VsZVByZWZpeCsiUHJvdmlkZXJEZXRhaWxNb2RlbCpmYXhDb3VudHJ5Q29kZURlcykiLG9iaik7DQoJb2JqLmNvdW50cnlDb2RlID0gY3JlYXRlSGlkZGVuSW5wdXRFbGVtZW50KCJ2YWx1ZSgiK2VsZVByZWZpeCsiUHJvdmlkZXJEZXRhaWxNb2RlbCpjb3VudHJ5Q29kZURlcykiLG9iaik7DQoJb2JqLmVtYWlsID0gY3JlYXRlSGlkZGVuSW5wdXRFbGVtZW50KCJ2YWx1ZSgiK2VsZVByZWZpeCsiUHJvdmlkZXJEZXRhaWxNb2RlbCplbWFpbERlcykiLG9iaik7DQoJb2JqLmNvbW1lbnQgPSBjcmVhdGVIaWRkZW5JbnB1dEVsZW1lbnQoInZhbHVlKCIrZWxlUHJlZml4KyJDb21tZW50c0RlcykiLG9iaik7DQoJb2JqLmNoZWNrQ2VsbC5hcHBlbmRDaGlsZChvYmouYWRkcmVzc0xpbmUxKTsNCglvYmouY2hlY2tDZWxsLmFwcGVuZENoaWxkKG9iai5hZGRyZXNzTGluZTIpOw0KCW9iai5jaGVja0NlbGwuYXBwZW5kQ2hpbGQob2JqLmFkZHJlc3NMaW5lMyk7DQoJb2JqLmNoZWNrQ2VsbC5hcHBlbmRDaGlsZChvYmouY2l0eSk7DQoJb2JqLmNoZWNrQ2VsbC5hcHBlbmRDaGlsZChvYmouc3RhdGUpOw0KCW9iai5jaGVja0NlbGwuYXBwZW5kQ2hpbGQob2JqLnppcCk7DQoJb2JqLmNoZWNrQ2VsbC5hcHBlbmRDaGlsZChvYmouZmF4KTsNCglvYmouY2hlY2tDZWxsLmFwcGVuZENoaWxkKG9iai5waG9uZTEpOw0KCW9iai5jaGVja0NlbGwuYXBwZW5kQ2hpbGQob2JqLnBob25lMik7DQoJb2JqLmNoZWNrQ2VsbC5hcHBlbmRDaGlsZChvYmoucGhvbmUxQ291bnRyeUNvZGUpOw0KCW9iai5jaGVja0NlbGwuYXBwZW5kQ2hpbGQob2JqLnBob25lMkNvdW50cnlDb2RlKTsNCglvYmouY2hlY2tDZWxsLmFwcGVuZENoaWxkKG9iai5mYXhDb3VudHJ5Q29kZSk7DQoJb2JqLmNoZWNrQ2VsbC5hcHBlbmRDaGlsZChvYmouY291bnRyeUNvZGUpOw0KCW9iai5jaGVja0NlbGwuYXBwZW5kQ2hpbGQob2JqLmVtYWlsKTsNCglvYmouY2hlY2tDZWxsLmFwcGVuZENoaWxkKG9iai5jb21tZW50KTsNCn0NCg0KLy9GaXggYnVnIDUzNjEwIHRoYXQgZG8gcmVzZXQgZnVuY3Rpb24gdHdpY2Ugd2hlbiBhZGQgYSBuZXcgcmVjb3JkLCANCi8vdGhlIG5ldyBpdGVtIHVuc2F2ZWQgd2lsbCBiZSBzZXQgYXMgbnVsbCwgYnV0IHRoZSBpdGVtcyBzdGlsbCBjb250YWlucyB0aGUgbnVsbCBvYmplY3QuDQpmdW5jdGlvbiBnZXRBdmFpbGFibGVMZW5ndGgoaXRlbXMpDQp7DQoJdmFyIGF2YWlsYWJsZUxlbiA9IDA7DQoJZm9yKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKQ0KCXsNCgkJaWYgKGl0ZW1zW2ldICE9IG51bGwpDQoJCXsNCgkJCWF2YWlsYWJsZUxlbisrOwkNCgkJfQ0KCX0NCglyZXR1cm4gYXZhaWxhYmxlTGVuOw0KfQ0KDQpmdW5jdGlvbiBnZXRFbGVtZW50c0J5SW5kZXgobmFtZSxyb3dJbmRleCkNCnsNCgl2YXIgbmFtZUluZGV4ID0gcm93SW5kZXgrMTsNCgl2YXIgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKG5hbWUpW25hbWVJbmRleF07DQoJcmV0dXJuIGVsZW1lbnQ7DQp9DQoNCmZ1bmN0aW9uIGNyZWF0ZU1lc3NhZ2VFbGVtZW50KGVsZW1lbnROYW1lKQ0Kew0KCXZhciBtZXNzYWdlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsNCgltZXNzYWdlRWxlbWVudC5pZCA9IGVsZW1lbnROYW1lOw0KCW1lc3NhZ2VFbGVtZW50Lm5hbWUgPSBlbGVtZW50TmFtZTsNCgltZXNzYWdlRWxlbWVudC5zdHlsZS53aGl0ZVNwYWNlID0gIm5vd3JhcCI7DQoJcmV0dXJuIG1lc3NhZ2VFbGVtZW50Ow0KfQ0KDQoNCg==</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
    </HTTPResponse>
  </HTTPTask>
</HTTPSnapshot>