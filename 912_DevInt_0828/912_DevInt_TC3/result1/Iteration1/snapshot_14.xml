<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="14">
  <HTTPTask id="16" hostname="aa-pt6245.dev.accela.com:5443" path="/portlets/framework/includes/javascript/dojo/dojo.js" url="https://aa-pt6245.dev.accela.com:5443/portlets/framework/includes/javascript/dojo/dojo.js" ip="13.93.163.237" port="5443" client_ip="10.1.61.63" client_port="9074" connectionId="1988" origin="Primary" startDateTime="2017-08-28T11:27:22.634-07:00" startTime="3424" endTime="3446" sendTime="16" waitTime="0" receiveTime="6">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Referer" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cHM6Ly9hYS1wdDYyNDUuZGV2LmFjY2VsYS5jb206NTQ0My9zZWN1cml0eS9ob3N0U2lnbm9uLmRvP2hvc3RTaWduT249dHJ1ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YWEtcHQ2MjQ1LmRldi5hY2NlbGEuY29tOjU0NDM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cookie" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SlNFU1NJT05JRD00MGtvRFN6KzRwMmQtb1pxeklzZEtQKzA7IEpTRVNTSU9OSUQ9KioqKioqKioqKioqKioqKioqKioqKioqKioqOyBMQVNURVNUX1JFUVVFU1RfVElNRT0xNTAzOTQ0ODQwMTY5OyBob3N0U2lnbk9uPXRydWU7IGdfY3VycmVudF9sYW5ndWFnZV9leHQ9ZW5fVVM7IExBVEVTVF9XRUJfU0VSVkVSPTEwLjEuMC42OyBMQVRFU1RfU0VTU0lPTl9JRD00MGtvRFN6KzRwMmQtb1pxeklzZEtQKzA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC9wb3J0bGV0cy9mcmFtZXdvcmsvaW5jbHVkZXMvamF2YXNjcmlwdC9kb2pvL2Rvam8uanMgSFRUUC8xLjENClJlZmVyZXI6IGh0dHBzOi8vYWEtcHQ2MjQ1LmRldi5hY2NlbGEuY29tOjU0NDMvc2VjdXJpdHkvaG9zdFNpZ25vbi5kbz9ob3N0U2lnbk9uPXRydWUNClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdPVzY0OyBUcmlkZW50LzcuMDsgcnY6MTEuMCkgbGlrZSBHZWNrbw0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTDQpBY2NlcHQ6ICovKg0KQ29ubmVjdGlvbjogS2VlcC1BbGl2ZQ0KSG9zdDogYWEtcHQ2MjQ1LmRldi5hY2NlbGEuY29tOjU0NDMNCkNvb2tpZTogSlNFU1NJT05JRD00MGtvRFN6KzRwMmQtb1pxeklzZEtQKzA7IEpTRVNTSU9OSUQ9KioqKioqKioqKioqKioqKioqKioqKioqKioqOyBMQVNURVNUX1JFUVVFU1RfVElNRT0xNTAzOTQ0ODQwMTY5OyBob3N0U2lnbk9uPXRydWU7IGdfY3VycmVudF9sYW5ndWFnZV9leHQ9ZW5fVVM7IExBVEVTVF9XRUJfU0VSVkVSPTEwLjEuMC42OyBMQVRFU1RfU0VTU0lPTl9JRD00MGtvRFN6KzRwMmQtb1pxeklzZEtQKzANCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
        <HTTPCookies>
          <HTTPHeaderEntity name="JSESSIONID" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NDBrb0RTeis0cDJkLW9acXpJc2RLUCsw</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="JSESSIONID" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>KioqKioqKioqKioqKioqKioqKioqKioqKioq</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="LASTEST_REQUEST_TIME" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTUwMzk0NDg0MDE2OQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="hostSignOn" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dHJ1ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="g_current_language_ext" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW5fVVM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="LATEST_WEB_SERVER" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTAuMS4wLjY=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="LATEST_SESSION_ID" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NDBrb0RTeis0cDJkLW9acXpJc2RLUCsw</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
        </HTTPCookies>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Server" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QXBhY2hlLUNveW90ZS8xLjE=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cache-Control" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>cHJpdmF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Expires" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMCBVVEM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-XSS-Protection" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Set-Cookie" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TEFTVEVTVF9SRVFVRVNUX1RJTUU9MTUwMzk0NDg0MDI0NzsgRG9tYWluPWRldi5hY2NlbGEuY29tOyBQYXRoPS87IFNlY3VyZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Set-Cookie" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TEFURVNUX1dFQl9TRVJWRVI9MTAuMS4wLjY7IERvbWFpbj1kZXYuYWNjZWxhLmNvbTsgUGF0aD0vOyBTZWN1cmU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Set-Cookie" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TEFURVNUX1NFU1NJT05fSUQ9NDBrb0RTeis0cDJkLW9acXpJc2RLUCswOyBEb21haW49ZGV2LmFjY2VsYS5jb207IFBhdGg9LzsgU2VjdXJl</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Vy8iMTUyNzg0LTE0OTg3NDcxMzYwMDAi</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VGh1LCAyOSBKdW4gMjAxNyAxNDozODo1NiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Type" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>dGV4dC9qYXZhc2NyaXB0</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Transfer-Encoding" index="11">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Y2h1bmtlZA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Encoding" index="12">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Vary" index="13">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="14">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW9uLCAyOCBBdWcgMjAxNyAxODoyNzoxOSBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIE9LDQpTZXJ2ZXI6IEFwYWNoZS1Db3lvdGUvMS4xDQpDYWNoZS1Db250cm9sOiBwcml2YXRlDQpFeHBpcmVzOiBUaHUsIDAxIEphbiAxOTcwIDAwOjAwOjAwIFVUQw0KWC1YU1MtUHJvdGVjdGlvbjogMA0KU2V0LUNvb2tpZTogTEFTVEVTVF9SRVFVRVNUX1RJTUU9MTUwMzk0NDg0MDI0NzsgRG9tYWluPWRldi5hY2NlbGEuY29tOyBQYXRoPS87IFNlY3VyZQ0KU2V0LUNvb2tpZTogTEFURVNUX1dFQl9TRVJWRVI9MTAuMS4wLjY7IERvbWFpbj1kZXYuYWNjZWxhLmNvbTsgUGF0aD0vOyBTZWN1cmUNClNldC1Db29raWU6IExBVEVTVF9TRVNTSU9OX0lEPTQwa29EU3orNHAyZC1vWnF6SXNkS1ArMDsgRG9tYWluPWRldi5hY2NlbGEuY29tOyBQYXRoPS87IFNlY3VyZQ0KQWNjZXB0LVJhbmdlczogYnl0ZXMNCkVUYWc6IFcvIjE1Mjc4NC0xNDk4NzQ3MTM2MDAwIg0KTGFzdC1Nb2RpZmllZDogVGh1LCAyOSBKdW4gMjAxNyAxNDozODo1NiBHTVQNCkNvbnRlbnQtVHlwZTogdGV4dC9qYXZhc2NyaXB0DQpUcmFuc2Zlci1FbmNvZGluZzogY2h1bmtlZA0KQ29udGVudC1FbmNvZGluZzogZ3ppcA0KVmFyeTogQWNjZXB0LUVuY29kaW5nDQpEYXRlOiBNb24sIDI4IEF1ZyAyMDE3IDE4OjI3OjE5IEdNVA0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>LyoNCglDb3B5cmlnaHQgKEMpOiAyMDA0LTIwMTIsIFRoZSBEb2pvIEZvdW5kYXRpb24NCglBbGwgUmlnaHRzIFJlc2VydmVkLg0KDQoJTGljZW5zZWQgdW5kZXIgdGhlIEFjYWRlbWljIEZyZWUgTGljZW5zZSB2ZXJzaW9uIDIuMSBvciBhYm92ZSBPUiB0aGUNCgltb2RpZmllZCBCU0QgbGljZW5zZS4gRm9yIG1vcmUgaW5mb3JtYXRpb24gb24gRG9qbyBsaWNlbnNpbmcsIHNlZToNCg0KCQlodHRwOi8vZG9qb3Rvb2xraXQub3JnL2NvbW11bml0eS9saWNlbnNpbmcuc2h0bWwNCiovDQoNCi8qDQoJVGhpcyBpcyBhIGNvbXBpbGVkIHZlcnNpb24gb2YgRG9qbywgYnVpbHQgZm9yIGRlcGxveW1lbnQgYW5kIG5vdCBmb3INCglkZXZlbG9wbWVudC4gVG8gZ2V0IGFuIGVkaXRhYmxlIHZlcnNpb24sIHBsZWFzZSB2aXNpdDoNCg0KCQlodHRwOi8vZG9qb3Rvb2xraXQub3JnDQoNCglmb3IgZG9jdW1lbnRhdGlvbiBhbmQgaW5mb3JtYXRpb24gb24gZ2V0dGluZyB0aGUgc291cmNlLg0KKi8NCg0KaWYodHlwZW9mIGRvam89PSJ1bmRlZmluZWQiKXsNCnZhciBkal9nbG9iYWw9dGhpczsNCnZhciBkal9jdXJyZW50Q29udGV4dD10aGlzOw0KZnVuY3Rpb24gZGpfdW5kZWYoXzEsXzIpew0KcmV0dXJuICh0eXBlb2YgKF8yfHxkal9jdXJyZW50Q29udGV4dClbXzFdPT0idW5kZWZpbmVkIik7DQp9DQppZihkal91bmRlZigiZGpDb25maWciLHRoaXMpKXsNCnZhciBkakNvbmZpZz17fTsNCn0NCmlmKGRqX3VuZGVmKCJkb2pvIix0aGlzKSl7DQp2YXIgZG9qbz17fTsNCn0NCmRvam8uZ2xvYmFsPWZ1bmN0aW9uKCl7DQpyZXR1cm4gZGpfY3VycmVudENvbnRleHQ7DQp9Ow0KZG9qby5sb2NhbGU9ZGpDb25maWcubG9jYWxlOw0KZG9qby52ZXJzaW9uPXttYWpvcjowLG1pbm9yOjQscGF0Y2g6MCxmbGFnOiIiLHJldmlzaW9uOk51bWJlcigiJFJldjogMjM4MTcwICQiLm1hdGNoKC9bMC05XSsvKVswXSksdG9TdHJpbmc6ZnVuY3Rpb24oKXsNCndpdGgoZG9qby52ZXJzaW9uKXsNCnJldHVybiBtYWpvcisiLiIrbWlub3IrIi4iK3BhdGNoK2ZsYWcrIiAoIityZXZpc2lvbisiKSI7DQp9DQp9fTsNCmRvam8uZXZhbFByb3A9ZnVuY3Rpb24oXzMsXzQsXzUpew0KaWYoKCFfNCl8fCghXzMpKXsNCnJldHVybiB1bmRlZmluZWQ7DQp9DQppZighZGpfdW5kZWYoXzMsXzQpKXsNCnJldHVybiBfNFtfM107DQp9DQpyZXR1cm4gKF81PyhfNFtfM109e30pOnVuZGVmaW5lZCk7DQp9Ow0KZG9qby5wYXJzZU9ialBhdGg9ZnVuY3Rpb24oXzYsXzcsXzgpew0KdmFyIF85PShfN3x8ZG9qby5nbG9iYWwoKSk7DQp2YXIgX2E9XzYuc3BsaXQoIi4iKTsNCnZhciBfYj1fYS5wb3AoKTsNCmZvcih2YXIgaT0wLGw9X2EubGVuZ3RoO2k8bCYmXzk7aSsrKXsNCl85PWRvam8uZXZhbFByb3AoX2FbaV0sXzksXzgpOw0KfQ0KcmV0dXJuIHtvYmo6XzkscHJvcDpfYn07DQp9Ow0KZG9qby5ldmFsT2JqUGF0aD1mdW5jdGlvbihfZSxfZil7DQppZih0eXBlb2YgX2UhPSJzdHJpbmciKXsNCnJldHVybiBkb2pvLmdsb2JhbCgpOw0KfQ0KaWYoX2UuaW5kZXhPZigiLiIpPT0tMSl7DQpyZXR1cm4gZG9qby5ldmFsUHJvcChfZSxkb2pvLmdsb2JhbCgpLF9mKTsNCn0NCnZhciByZWY9ZG9qby5wYXJzZU9ialBhdGgoX2UsZG9qby5nbG9iYWwoKSxfZik7DQppZihyZWYpew0KcmV0dXJuIGRvam8uZXZhbFByb3AocmVmLnByb3AscmVmLm9iaixfZik7DQp9DQpyZXR1cm4gbnVsbDsNCn07DQpkb2pvLmVycm9yVG9TdHJpbmc9ZnVuY3Rpb24oXzExKXsNCmlmKCFkal91bmRlZigibWVzc2FnZSIsXzExKSl7DQpyZXR1cm4gXzExLm1lc3NhZ2U7DQp9ZWxzZXsNCmlmKCFkal91bmRlZigiZGVzY3JpcHRpb24iLF8xMSkpew0KcmV0dXJuIF8xMS5kZXNjcmlwdGlvbjsNCn1lbHNlew0KcmV0dXJuIF8xMTsNCn0NCn0NCn07DQpkb2pvLnJhaXNlPWZ1bmN0aW9uKF8xMixfMTMpew0KaWYoXzEzKXsNCl8xMj1fMTIrIjogIitkb2pvLmVycm9yVG9TdHJpbmcoXzEzKTsNCn0NCnRyeXsNCmlmKGRqQ29uZmlnLmlzRGVidWcpew0KZG9qby5ob3N0ZW52LnByaW50bG4oIkZBVEFMIGV4Y2VwdGlvbiByYWlzZWQ6ICIrXzEyKTsNCn0NCn0NCmNhdGNoKGUpew0KfQ0KdGhyb3cgXzEzfHxFcnJvcihfMTIpOw0KfTsNCmRvam8uZGVidWc9ZnVuY3Rpb24oKXsNCn07DQpkb2pvLmRlYnVnU2hhbGxvdz1mdW5jdGlvbihvYmopew0KfTsNCmRvam8ucHJvZmlsZT17c3RhcnQ6ZnVuY3Rpb24oKXsNCn0sZW5kOmZ1bmN0aW9uKCl7DQp9LHN0b3A6ZnVuY3Rpb24oKXsNCn0sZHVtcDpmdW5jdGlvbigpew0KfX07DQpmdW5jdGlvbiBkal9ldmFsKF8xNSl7DQpyZXR1cm4gZGpfZ2xvYmFsLmV2YWw/ZGpfZ2xvYmFsLmV2YWwoXzE1KTpldmFsKF8xNSk7DQp9DQpkb2pvLnVuaW1wbGVtZW50ZWQ9ZnVuY3Rpb24oXzE2LF8xNyl7DQp2YXIgXzE4PSInIitfMTYrIicgbm90IGltcGxlbWVudGVkIjsNCmlmKF8xNyE9bnVsbCl7DQpfMTgrPSIgIitfMTc7DQp9DQpkb2pvLnJhaXNlKF8xOCk7DQp9Ow0KZG9qby5kZXByZWNhdGVkPWZ1bmN0aW9uKF8xOSxfMWEsXzFiKXsNCnZhciBfMWM9IkRFUFJFQ0FURUQ6ICIrXzE5Ow0KaWYoXzFhKXsNCl8xYys9IiAiK18xYTsNCn0NCmlmKF8xYil7DQpfMWMrPSIgLS0gd2lsbCBiZSByZW1vdmVkIGluIHZlcnNpb246ICIrXzFiOw0KfQ0KZG9qby5kZWJ1ZyhfMWMpOw0KfTsNCmRvam8ucmVuZGVyPShmdW5jdGlvbigpew0KZnVuY3Rpb24gdnNjYWZmb2xkKF8xZCxfMWUpew0KdmFyIHRtcD17Y2FwYWJsZTpmYWxzZSxzdXBwb3J0OntidWlsdGluOmZhbHNlLHBsdWdpbjpmYWxzZX0scHJlZml4ZXM6XzFkfTsNCmZvcih2YXIgaT0wO2k8XzFlLmxlbmd0aDtpKyspew0KdG1wW18xZVtpXV09ZmFsc2U7DQp9DQpyZXR1cm4gdG1wOw0KfQ0KcmV0dXJuIHtuYW1lOiIiLHZlcjpkb2pvLnZlcnNpb24sb3M6e3dpbjpmYWxzZSxsaW51eDpmYWxzZSxvc3g6ZmFsc2V9LGh0bWw6dnNjYWZmb2xkKFsiaHRtbCJdLFsiaWUiLCJvcGVyYSIsImtodG1sIiwic2FmYXJpIiwibW96Il0pLHN2Zzp2c2NhZmZvbGQoWyJzdmciXSxbImNvcmVsIiwiYWRvYmUiLCJiYXRpayJdKSx2bWw6dnNjYWZmb2xkKFsidm1sIl0sWyJpZSJdKSxzd2Y6dnNjYWZmb2xkKFsiU3dmIiwiRmxhc2giLCJNbSJdLFsibW0iXSksc3d0OnZzY2FmZm9sZChbIlN3dCJdLFsiaWJtIl0pfTsNCn0pKCk7DQpkb2pvLmhvc3RlbnY9KGZ1bmN0aW9uKCl7DQp2YXIgXzIxPXtpc0RlYnVnOmZhbHNlLGFsbG93UXVlcnlDb25maWc6ZmFsc2UsYmFzZVNjcmlwdFVyaToiIixiYXNlUmVsYXRpdmVQYXRoOiIiLGxpYnJhcnlTY3JpcHRVcmk6IiIsaWVQcmV2ZW50Q2xvYmJlcjpmYWxzZSxpZUNsb2JiZXJNaW5pbWFsOnRydWUscHJldmVudEJhY2tCdXR0b25GaXg6dHJ1ZSxkZWxheU1vekxvYWRpbmdGaXg6ZmFsc2Usc2VhcmNoSWRzOltdLHBhcnNlV2lkZ2V0czp0cnVlfTsNCmlmKHR5cGVvZiBkakNvbmZpZz09InVuZGVmaW5lZCIpew0KZGpDb25maWc9XzIxOw0KfWVsc2V7DQpmb3IodmFyIF8yMiBpbiBfMjEpew0KaWYodHlwZW9mIGRqQ29uZmlnW18yMl09PSJ1bmRlZmluZWQiKXsNCmRqQ29uZmlnW18yMl09XzIxW18yMl07DQp9DQp9DQp9DQpyZXR1cm4ge25hbWVfOiIodW5zZXQpIix2ZXJzaW9uXzoiKHVuc2V0KSIsZ2V0TmFtZTpmdW5jdGlvbigpew0KcmV0dXJuIHRoaXMubmFtZV87DQp9LGdldFZlcnNpb246ZnVuY3Rpb24oKXsNCnJldHVybiB0aGlzLnZlcnNpb25fOw0KfSxnZXRUZXh0OmZ1bmN0aW9uKHVyaSl7DQpkb2pvLnVuaW1wbGVtZW50ZWQoImdldFRleHQiLCJ1cmk9Iit1cmkpOw0KfX07DQp9KSgpOw0KZG9qby5ob3N0ZW52LmdldEJhc2VTY3JpcHRVcmk9ZnVuY3Rpb24oKXsNCmlmKGRqQ29uZmlnLmJhc2VTY3JpcHRVcmkubGVuZ3RoKXsNCnJldHVybiBkakNvbmZpZy5iYXNlU2NyaXB0VXJpOw0KfQ0KdmFyIHVyaT1uZXcgU3RyaW5nKGRqQ29uZmlnLmxpYnJhcnlTY3JpcHRVcml8fGRqQ29uZmlnLmJhc2VSZWxhdGl2ZVBhdGgpOw0KaWYoIXVyaSl7DQpkb2pvLnJhaXNlKCJOb3RoaW5nIHJldHVybmVkIGJ5IGdldExpYnJhcnlTY3JpcHRVcmkoKTogIit1cmkpOw0KfQ0KdmFyIF8yNT11cmkubGFzdEluZGV4T2YoIi8iKTsNCmRqQ29uZmlnLmJhc2VTY3JpcHRVcmk9ZGpDb25maWcuYmFzZVJlbGF0aXZlUGF0aDsNCnJldHVybiBkakNvbmZpZy5iYXNlU2NyaXB0VXJpOw0KfTsNCihmdW5jdGlvbigpew0KdmFyIF8yNj17cGtnRmlsZU5hbWU6Il9fcGFja2FnZV9fIixsb2FkaW5nX21vZHVsZXNfOnt9LGxvYWRlZF9tb2R1bGVzXzp7fSxhZGRlZFRvTG9hZGluZ0NvdW50OltdLHJlbW92ZWRGcm9tTG9hZGluZ0NvdW50OltdLGluRmxpZ2h0Q291bnQ6MCxtb2R1bGVQcmVmaXhlc186e2Rvam86e25hbWU6ImRvam8iLHZhbHVlOiJzcmMifX0sc2V0TW9kdWxlUHJlZml4OmZ1bmN0aW9uKF8yNyxfMjgpew0KdGhpcy5tb2R1bGVQcmVmaXhlc19bXzI3XT17bmFtZTpfMjcsdmFsdWU6XzI4fTsNCn0sbW9kdWxlSGFzUHJlZml4OmZ1bmN0aW9uKF8yOSl7DQp2YXIgbXA9dGhpcy5tb2R1bGVQcmVmaXhlc187DQpyZXR1cm4gQm9vbGVhbihtcFtfMjldJiZtcFtfMjldLnZhbHVlKTsNCn0sZ2V0TW9kdWxlUHJlZml4OmZ1bmN0aW9uKF8yYil7DQppZih0aGlzLm1vZHVsZUhhc1ByZWZpeChfMmIpKXsNCnJldHVybiB0aGlzLm1vZHVsZVByZWZpeGVzX1tfMmJdLnZhbHVlOw0KfQ0KcmV0dXJuIF8yYjsNCn0sZ2V0VGV4dFN0YWNrOltdLGxvYWRVcmlTdGFjazpbXSxsb2FkZWRVcmlzOltdLHBvc3RfbG9hZF86ZmFsc2UsbW9kdWxlc0xvYWRlZExpc3RlbmVyczpbXSx1bmxvYWRMaXN0ZW5lcnM6W10sbG9hZE5vdGlmeWluZzpmYWxzZX07DQpmb3IodmFyIF8yYyBpbiBfMjYpew0KZG9qby5ob3N0ZW52W18yY109XzI2W18yY107DQp9DQp9KSgpOw0KZG9qby5ob3N0ZW52LmxvYWRQYXRoPWZ1bmN0aW9uKF8yZCxfMmUsY2Ipew0KdmFyIHVyaTsNCmlmKF8yZC5jaGFyQXQoMCk9PSIvInx8XzJkLm1hdGNoKC9eXHcrOi8pKXsNCnVyaT1fMmQ7DQp9ZWxzZXsNCnVyaT10aGlzLmdldEJhc2VTY3JpcHRVcmkoKStfMmQ7DQp9DQppZihkakNvbmZpZy5jYWNoZUJ1c3QmJmRvam8ucmVuZGVyLmh0bWwuY2FwYWJsZSl7DQp1cmkrPSI/IitTdHJpbmcoZGpDb25maWcuY2FjaGVCdXN0KS5yZXBsYWNlKC9cVysvZywiIik7DQp9DQp0cnl7DQpyZXR1cm4gIV8yZT90aGlzLmxvYWRVcmkodXJpLGNiKTp0aGlzLmxvYWRVcmlBbmRDaGVjayh1cmksXzJlLGNiKTsNCn0NCmNhdGNoKGUpew0KZG9qby5kZWJ1ZyhlKTsNCnJldHVybiBmYWxzZTsNCn0NCn07DQpkb2pvLmhvc3RlbnYubG9hZFVyaT1mdW5jdGlvbih1cmksY2Ipew0KaWYodGhpcy5sb2FkZWRVcmlzW3VyaV0pew0KcmV0dXJuIHRydWU7DQp9DQp2YXIgXzMzPXRoaXMuZ2V0VGV4dCh1cmksbnVsbCx0cnVlKTsNCmlmKCFfMzMpew0KcmV0dXJuIGZhbHNlOw0KfQ0KdGhpcy5sb2FkZWRVcmlzW3VyaV09dHJ1ZTsNCmlmKGNiKXsNCl8zMz0iKCIrXzMzKyIpIjsNCn0NCnZhciBfMzQ9ZGpfZXZhbChfMzMpOw0KaWYoY2Ipew0KY2IoXzM0KTsNCn0NCnJldHVybiB0cnVlOw0KfTsNCmRvam8uaG9zdGVudi5sb2FkVXJpQW5kQ2hlY2s9ZnVuY3Rpb24odXJpLF8zNixjYil7DQp2YXIgb2s9dHJ1ZTsNCnRyeXsNCm9rPXRoaXMubG9hZFVyaSh1cmksY2IpOw0KfQ0KY2F0Y2goZSl7DQpkb2pvLmRlYnVnKCJmYWlsZWQgbG9hZGluZyAiLHVyaSwiIHdpdGggZXJyb3I6ICIsZSk7DQp9DQpyZXR1cm4gQm9vbGVhbihvayYmdGhpcy5maW5kTW9kdWxlKF8zNixmYWxzZSkpOw0KfTsNCmRvam8ubG9hZGVkPWZ1bmN0aW9uKCl7DQp9Ow0KZG9qby51bmxvYWRlZD1mdW5jdGlvbigpew0KfTsNCmRvam8uaG9zdGVudi5sb2FkZWQ9ZnVuY3Rpb24oKXsNCnRoaXMubG9hZE5vdGlmeWluZz10cnVlOw0KdGhpcy5wb3N0X2xvYWRfPXRydWU7DQp2YXIgbWxsPXRoaXMubW9kdWxlc0xvYWRlZExpc3RlbmVyczsNCmZvcih2YXIgeD0wO3g8bWxsLmxlbmd0aDt4Kyspew0KbWxsW3hdKCk7DQp9DQp0aGlzLm1vZHVsZXNMb2FkZWRMaXN0ZW5lcnM9W107DQp0aGlzLmxvYWROb3RpZnlpbmc9ZmFsc2U7DQpkb2pvLmxvYWRlZCgpOw0KfTsNCmRvam8uaG9zdGVudi51bmxvYWRlZD1mdW5jdGlvbigpew0KdmFyIG1sbD10aGlzLnVubG9hZExpc3RlbmVyczsNCndoaWxlKG1sbC5sZW5ndGgpew0KKG1sbC5wb3AoKSkoKTsNCn0NCmRvam8udW5sb2FkZWQoKTsNCn07DQpkb2pvLmFkZE9uTG9hZD1mdW5jdGlvbihvYmosXzNkKXsNCnZhciBkaD1kb2pvLmhvc3RlbnY7DQppZihhcmd1bWVudHMubGVuZ3RoPT0xKXsNCmRoLm1vZHVsZXNMb2FkZWRMaXN0ZW5lcnMucHVzaChvYmopOw0KfWVsc2V7DQppZihhcmd1bWVudHMubGVuZ3RoPjEpew0KZGgubW9kdWxlc0xvYWRlZExpc3RlbmVycy5wdXNoKGZ1bmN0aW9uKCl7DQpvYmpbXzNkXSgpOw0KfSk7DQp9DQp9DQppZihkaC5wb3N0X2xvYWRfJiZkaC5pbkZsaWdodENvdW50PT0wJiYhZGgubG9hZE5vdGlmeWluZyl7DQpkaC5jYWxsTG9hZGVkKCk7DQp9DQp9Ow0KZG9qby5hZGRPblVubG9hZD1mdW5jdGlvbihvYmosXzQwKXsNCnZhciBkaD1kb2pvLmhvc3RlbnY7DQppZihhcmd1bWVudHMubGVuZ3RoPT0xKXsNCmRoLnVubG9hZExpc3RlbmVycy5wdXNoKG9iaik7DQp9ZWxzZXsNCmlmKGFyZ3VtZW50cy5sZW5ndGg+MSl7DQpkaC51bmxvYWRMaXN0ZW5lcnMucHVzaChmdW5jdGlvbigpew0Kb2JqW180MF0oKTsNCn0pOw0KfQ0KfQ0KfTsNCmRvam8uaG9zdGVudi5tb2R1bGVzTG9hZGVkPWZ1bmN0aW9uKCl7DQppZih0aGlzLnBvc3RfbG9hZF8pew0KcmV0dXJuOw0KfQ0KaWYodGhpcy5sb2FkVXJpU3RhY2subGVuZ3RoPT0wJiZ0aGlzLmdldFRleHRTdGFjay5sZW5ndGg9PTApew0KaWYodGhpcy5pbkZsaWdodENvdW50PjApew0KZG9qby5kZWJ1ZygiZmlsZXMgc3RpbGwgaW4gZmxpZ2h0ISIpOw0KcmV0dXJuOw0KfQ0KZG9qby5ob3N0ZW52LmNhbGxMb2FkZWQoKTsNCn0NCn07DQpkb2pvLmhvc3RlbnYuY2FsbExvYWRlZD1mdW5jdGlvbigpew0KaWYodHlwZW9mIHNldFRpbWVvdXQ9PSJvYmplY3QiKXsNCnNldFRpbWVvdXQoImRvam8uaG9zdGVudi5sb2FkZWQoKTsiLDApOw0KfWVsc2V7DQpkb2pvLmhvc3RlbnYubG9hZGVkKCk7DQp9DQp9Ow0KZG9qby5ob3N0ZW52LmdldE1vZHVsZVN5bWJvbHM9ZnVuY3Rpb24oXzQyKXsNCnZhciBfNDM9XzQyLnNwbGl0KCIuIik7DQpmb3IodmFyIGk9XzQzLmxlbmd0aDtpPjA7aS0tKXsNCnZhciBfNDU9XzQzLnNsaWNlKDAsaSkuam9pbigiLiIpOw0KaWYoKGk9PTEpJiYhdGhpcy5tb2R1bGVIYXNQcmVmaXgoXzQ1KSl7DQpfNDNbMF09Ii4uLyIrXzQzWzBdOw0KfWVsc2V7DQp2YXIgXzQ2PXRoaXMuZ2V0TW9kdWxlUHJlZml4KF80NSk7DQppZihfNDYhPV80NSl7DQpfNDMuc3BsaWNlKDAsaSxfNDYpOw0KYnJlYWs7DQp9DQp9DQp9DQpyZXR1cm4gXzQzOw0KfTsNCmRvam8uaG9zdGVudi5fZ2xvYmFsX29taXRfbW9kdWxlX2NoZWNrPWZhbHNlOw0KZG9qby5ob3N0ZW52LmxvYWRNb2R1bGU9ZnVuY3Rpb24oXzQ3LF80OCxfNDkpew0KaWYoIV80Nyl7DQpyZXR1cm47DQp9DQpfNDk9dGhpcy5fZ2xvYmFsX29taXRfbW9kdWxlX2NoZWNrfHxfNDk7DQp2YXIgXzRhPXRoaXMuZmluZE1vZHVsZShfNDcsZmFsc2UpOw0KaWYoXzRhKXsNCnJldHVybiBfNGE7DQp9DQppZihkal91bmRlZihfNDcsdGhpcy5sb2FkaW5nX21vZHVsZXNfKSl7DQp0aGlzLmFkZGVkVG9Mb2FkaW5nQ291bnQucHVzaChfNDcpOw0KfQ0KdGhpcy5sb2FkaW5nX21vZHVsZXNfW180N109MTsNCnZhciBfNGI9XzQ3LnJlcGxhY2UoL1wuL2csIi8iKSsiLmpzIjsNCnZhciBfNGM9XzQ3LnNwbGl0KCIuIik7DQp2YXIgXzRkPXRoaXMuZ2V0TW9kdWxlU3ltYm9scyhfNDcpOw0KdmFyIF80ZT0oKF80ZFswXS5jaGFyQXQoMCkhPSIvIikmJiFfNGRbMF0ubWF0Y2goL15cdys6LykpOw0KdmFyIF80Zj1fNGRbXzRkLmxlbmd0aC0xXTsNCnZhciBvazsNCmlmKF80Zj09IioiKXsNCl80Nz1fNGMuc2xpY2UoMCwtMSkuam9pbigiLiIpOw0Kd2hpbGUoXzRkLmxlbmd0aCl7DQpfNGQucG9wKCk7DQpfNGQucHVzaCh0aGlzLnBrZ0ZpbGVOYW1lKTsNCl80Yj1fNGQuam9pbigiLyIpKyIuanMiOw0KaWYoXzRlJiZfNGIuY2hhckF0KDApPT0iLyIpew0KXzRiPV80Yi5zbGljZSgxKTsNCn0NCm9rPXRoaXMubG9hZFBhdGgoXzRiLCFfNDk/XzQ3Om51bGwpOw0KaWYob2spew0KYnJlYWs7DQp9DQpfNGQucG9wKCk7DQp9DQp9ZWxzZXsNCl80Yj1fNGQuam9pbigiLyIpKyIuanMiOw0KXzQ3PV80Yy5qb2luKCIuIik7DQp2YXIgXzUxPSFfNDk/XzQ3Om51bGw7DQpvaz10aGlzLmxvYWRQYXRoKF80YixfNTEpOw0KaWYoIW9rJiYhXzQ4KXsNCl80ZC5wb3AoKTsNCndoaWxlKF80ZC5sZW5ndGgpew0KXzRiPV80ZC5qb2luKCIvIikrIi5qcyI7DQpvaz10aGlzLmxvYWRQYXRoKF80YixfNTEpOw0KaWYob2spew0KYnJlYWs7DQp9DQpfNGQucG9wKCk7DQpfNGI9XzRkLmpvaW4oIi8iKSsiLyIrdGhpcy5wa2dGaWxlTmFtZSsiLmpzIjsNCmlmKF80ZSYmXzRiLmNoYXJBdCgwKT09Ii8iKXsNCl80Yj1fNGIuc2xpY2UoMSk7DQp9DQpvaz10aGlzLmxvYWRQYXRoKF80YixfNTEpOw0KaWYob2spew0KYnJlYWs7DQp9DQp9DQp9DQppZighb2smJiFfNDkpew0KZG9qby5yYWlzZSgiQ291bGQgbm90IGxvYWQgJyIrXzQ3KyInOyBsYXN0IHRyaWVkICciK180YisiJyIpOw0KfQ0KfQ0KaWYoIV80OSYmIXRoaXNbImlzWERvbWFpbiJdKXsNCl80YT10aGlzLmZpbmRNb2R1bGUoXzQ3LGZhbHNlKTsNCmlmKCFfNGEpew0KZG9qby5yYWlzZSgic3ltYm9sICciK180NysiJyBpcyBub3QgZGVmaW5lZCBhZnRlciBsb2FkaW5nICciK180YisiJyIpOw0KfQ0KfQ0KcmV0dXJuIF80YTsNCn07DQpkb2pvLmhvc3RlbnYuc3RhcnRQYWNrYWdlPWZ1bmN0aW9uKF81Mil7DQp2YXIgXzUzPVN0cmluZyhfNTIpOw0KdmFyIF81ND1fNTM7DQp2YXIgXzU1PV81Mi5zcGxpdCgvXC4vKTsNCmlmKF81NVtfNTUubGVuZ3RoLTFdPT0iKiIpew0KXzU1LnBvcCgpOw0KXzU0PV81NS5qb2luKCIuIik7DQp9DQp2YXIgXzU2PWRvam8uZXZhbE9ialBhdGgoXzU0LHRydWUpOw0KdGhpcy5sb2FkZWRfbW9kdWxlc19bXzUzXT1fNTY7DQp0aGlzLmxvYWRlZF9tb2R1bGVzX1tfNTRdPV81NjsNCnJldHVybiBfNTY7DQp9Ow0KZG9qby5ob3N0ZW52LmZpbmRNb2R1bGU9ZnVuY3Rpb24oXzU3LF81OCl7DQp2YXIgbG1uPVN0cmluZyhfNTcpOw0KaWYodGhpcy5sb2FkZWRfbW9kdWxlc19bbG1uXSl7DQpyZXR1cm4gdGhpcy5sb2FkZWRfbW9kdWxlc19bbG1uXTsNCn0NCmlmKF81OCl7DQpkb2pvLnJhaXNlKCJubyBsb2FkZWQgbW9kdWxlIG5hbWVkICciK181NysiJyIpOw0KfQ0KcmV0dXJuIG51bGw7DQp9Ow0KZG9qby5rd0NvbXBvdW5kUmVxdWlyZT1mdW5jdGlvbihfNWEpew0KdmFyIF81Yj1fNWFbImNvbW1vbiJdfHxbXTsNCnZhciBfNWM9XzVhW2Rvam8uaG9zdGVudi5uYW1lX10/XzViLmNvbmNhdChfNWFbZG9qby5ob3N0ZW52Lm5hbWVfXXx8W10pOl81Yi5jb25jYXQoXzVhWyJkZWZhdWx0Il18fFtdKTsNCmZvcih2YXIgeD0wO3g8XzVjLmxlbmd0aDt4Kyspew0KdmFyIF81ZT1fNWNbeF07DQppZihfNWUuY29uc3RydWN0b3I9PUFycmF5KXsNCmRvam8uaG9zdGVudi5sb2FkTW9kdWxlLmFwcGx5KGRvam8uaG9zdGVudixfNWUpOw0KfWVsc2V7DQpkb2pvLmhvc3RlbnYubG9hZE1vZHVsZShfNWUpOw0KfQ0KfQ0KfTsNCmRvam8ucmVxdWlyZT1mdW5jdGlvbihfNWYpew0KZG9qby5ob3N0ZW52LmxvYWRNb2R1bGUuYXBwbHkoZG9qby5ob3N0ZW52LGFyZ3VtZW50cyk7DQp9Ow0KZG9qby5yZXF1aXJlSWY9ZnVuY3Rpb24oXzYwLF82MSl7DQp2YXIgXzYyPWFyZ3VtZW50c1swXTsNCmlmKChfNjI9PT10cnVlKXx8KF82Mj09ImNvbW1vbiIpfHwoXzYyJiZkb2pvLnJlbmRlcltfNjJdLmNhcGFibGUpKXsNCnZhciBfNjM9W107DQpmb3IodmFyIGk9MTtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXsNCl82My5wdXNoKGFyZ3VtZW50c1tpXSk7DQp9DQpkb2pvLnJlcXVpcmUuYXBwbHkoZG9qbyxfNjMpOw0KfQ0KfTsNCmRvam8ucmVxdWlyZUFmdGVySWY9ZG9qby5yZXF1aXJlSWY7DQpkb2pvLnByb3ZpZGU9ZnVuY3Rpb24oXzY1KXsNCnJldHVybiBkb2pvLmhvc3RlbnYuc3RhcnRQYWNrYWdlLmFwcGx5KGRvam8uaG9zdGVudixhcmd1bWVudHMpOw0KfTsNCmRvam8ucmVnaXN0ZXJNb2R1bGVQYXRoPWZ1bmN0aW9uKF82NixfNjcpew0KcmV0dXJuIGRvam8uaG9zdGVudi5zZXRNb2R1bGVQcmVmaXgoXzY2LF82Nyk7DQp9Ow0KZG9qby5zZXRNb2R1bGVQcmVmaXg9ZnVuY3Rpb24oXzY4LF82OSl7DQpkb2pvLmRlcHJlY2F0ZWQoImRvam8uc2V0TW9kdWxlUHJlZml4KFwiIitfNjgrIlwiLCBcIiIrXzY5KyJcIikiLCJyZXBsYWNlZCBieSBkb2pvLnJlZ2lzdGVyTW9kdWxlUGF0aCIsIjAuNSIpOw0KcmV0dXJuIGRvam8ucmVnaXN0ZXJNb2R1bGVQYXRoKF82OCxfNjkpOw0KfTsNCmRvam8uZXhpc3RzPWZ1bmN0aW9uKG9iaixfNmIpew0KdmFyIHA9XzZiLnNwbGl0KCIuIik7DQpmb3IodmFyIGk9MDtpPHAubGVuZ3RoO2krKyl7DQppZighb2JqW3BbaV1dKXsNCnJldHVybiBmYWxzZTsNCn0NCm9iaj1vYmpbcFtpXV07DQp9DQpyZXR1cm4gdHJ1ZTsNCn07DQpkb2pvLmhvc3RlbnYubm9ybWFsaXplTG9jYWxlPWZ1bmN0aW9uKF82ZSl7DQpyZXR1cm4gXzZlP182ZS50b0xvd2VyQ2FzZSgpOmRvam8ubG9jYWxlOw0KfTsNCmRvam8uaG9zdGVudi5zZWFyY2hMb2NhbGVQYXRoPWZ1bmN0aW9uKF82ZixfNzAsXzcxKXsNCl82Zj1kb2pvLmhvc3RlbnYubm9ybWFsaXplTG9jYWxlKF82Zik7DQp2YXIgXzcyPV82Zi5zcGxpdCgiLSIpOw0KdmFyIF83Mz1bXTsNCmZvcih2YXIgaT1fNzIubGVuZ3RoO2k+MDtpLS0pew0KXzczLnB1c2goXzcyLnNsaWNlKDAsaSkuam9pbigiLSIpKTsNCn0NCl83My5wdXNoKGZhbHNlKTsNCmlmKF83MCl7DQpfNzMucmV2ZXJzZSgpOw0KfQ0KZm9yKHZhciBqPV83My5sZW5ndGgtMTtqPj0wO2otLSl7DQp2YXIgbG9jPV83M1tqXXx8IlJPT1QiOw0KdmFyIF83Nz1fNzEobG9jKTsNCmlmKF83Nyl7DQpicmVhazsNCn0NCn0NCn07DQpkb2pvLmhvc3RlbnYubG9jYWxlc0dlbmVyYXRlZDsNCmRvam8uaG9zdGVudi5yZWdpc3Rlck5sc1ByZWZpeD1mdW5jdGlvbigpew0KZG9qby5yZWdpc3Rlck1vZHVsZVBhdGgoIm5scyIsIm5scyIpOw0KfTsNCmRvam8uaG9zdGVudi5wcmVsb2FkTG9jYWxpemF0aW9ucz1mdW5jdGlvbigpew0KaWYoZG9qby5ob3N0ZW52LmxvY2FsZXNHZW5lcmF0ZWQpew0KZG9qby5ob3N0ZW52LnJlZ2lzdGVyTmxzUHJlZml4KCk7DQpmdW5jdGlvbiBwcmVsb2FkKF83OCl7DQpfNzg9ZG9qby5ob3N0ZW52Lm5vcm1hbGl6ZUxvY2FsZShfNzgpOw0KZG9qby5ob3N0ZW52LnNlYXJjaExvY2FsZVBhdGgoXzc4LHRydWUsZnVuY3Rpb24obG9jKXsNCmZvcih2YXIgaT0wO2k8ZG9qby5ob3N0ZW52LmxvY2FsZXNHZW5lcmF0ZWQubGVuZ3RoO2krKyl7DQppZihkb2pvLmhvc3RlbnYubG9jYWxlc0dlbmVyYXRlZFtpXT09bG9jKXsNCmRvam9bInJlcXVpcmUiXSgibmxzLmRvam9fIitsb2MpOw0KcmV0dXJuIHRydWU7DQp9DQp9DQpyZXR1cm4gZmFsc2U7DQp9KTsNCn0NCnByZWxvYWQoKTsNCnZhciBfN2I9ZGpDb25maWcuZXh0cmFMb2NhbGV8fFtdOw0KZm9yKHZhciBpPTA7aTxfN2IubGVuZ3RoO2krKyl7DQpwcmVsb2FkKF83YltpXSk7DQp9DQp9DQpkb2pvLmhvc3RlbnYucHJlbG9hZExvY2FsaXphdGlvbnM9ZnVuY3Rpb24oKXsNCn07DQp9Ow0KZG9qby5yZXF1aXJlTG9jYWxpemF0aW9uPWZ1bmN0aW9uKF83ZCxfN2UsXzdmKXsNCmRvam8uaG9zdGVudi5wcmVsb2FkTG9jYWxpemF0aW9ucygpOw0KdmFyIF84MD1bXzdkLCJubHMiLF83ZV0uam9pbigiLiIpOw0KdmFyIF84MT1kb2pvLmhvc3RlbnYuZmluZE1vZHVsZShfODApOw0KaWYoXzgxKXsNCmlmKGRqQ29uZmlnLmxvY2FsaXphdGlvbkNvbXBsZXRlJiZfODEuX2J1aWx0KXsNCnJldHVybjsNCn0NCnZhciBfODI9ZG9qby5ob3N0ZW52Lm5vcm1hbGl6ZUxvY2FsZShfN2YpLnJlcGxhY2UoIi0iLCJfIik7DQp2YXIgXzgzPV84MCsiLiIrXzgyOw0KaWYoZG9qby5ob3N0ZW52LmZpbmRNb2R1bGUoXzgzKSl7DQpyZXR1cm47DQp9DQp9DQpfODE9ZG9qby5ob3N0ZW52LnN0YXJ0UGFja2FnZShfODApOw0KdmFyIF84ND1kb2pvLmhvc3RlbnYuZ2V0TW9kdWxlU3ltYm9scyhfN2QpOw0KdmFyIF84NT1fODQuY29uY2F0KCJubHMiKS5qb2luKCIvIik7DQp2YXIgXzg2Ow0KZG9qby5ob3N0ZW52LnNlYXJjaExvY2FsZVBhdGgoXzdmLGZhbHNlLGZ1bmN0aW9uKGxvYyl7DQp2YXIgXzg4PWxvYy5yZXBsYWNlKCItIiwiXyIpOw0KdmFyIF84OT1fODArIi4iK184ODsNCnZhciBfOGE9ZmFsc2U7DQppZighZG9qby5ob3N0ZW52LmZpbmRNb2R1bGUoXzg5KSl7DQpkb2pvLmhvc3RlbnYuc3RhcnRQYWNrYWdlKF84OSk7DQp2YXIgXzhiPVtfODVdOw0KaWYobG9jIT0iUk9PVCIpew0KXzhiLnB1c2gobG9jKTsNCn0NCl84Yi5wdXNoKF83ZSk7DQp2YXIgXzhjPV84Yi5qb2luKCIvIikrIi5qcyI7DQpfOGE9ZG9qby5ob3N0ZW52LmxvYWRQYXRoKF84YyxudWxsLGZ1bmN0aW9uKF84ZCl7DQp2YXIgXzhlPWZ1bmN0aW9uKCl7DQp9Ow0KXzhlLnByb3RvdHlwZT1fODY7DQpfODFbXzg4XT1uZXcgXzhlKCk7DQpmb3IodmFyIGogaW4gXzhkKXsNCl84MVtfODhdW2pdPV84ZFtqXTsNCn0NCn0pOw0KfWVsc2V7DQpfOGE9dHJ1ZTsNCn0NCmlmKF84YSYmXzgxW184OF0pew0KXzg2PV84MVtfODhdOw0KfWVsc2V7DQpfODFbXzg4XT1fODY7DQp9DQp9KTsNCn07DQooZnVuY3Rpb24oKXsNCnZhciBfOTA9ZGpDb25maWcuZXh0cmFMb2NhbGU7DQppZihfOTApew0KaWYoIV85MCBpbnN0YW5jZW9mIEFycmF5KXsNCl85MD1bXzkwXTsNCn0NCnZhciByZXE9ZG9qby5yZXF1aXJlTG9jYWxpemF0aW9uOw0KZG9qby5yZXF1aXJlTG9jYWxpemF0aW9uPWZ1bmN0aW9uKG0sYixfOTQpew0KcmVxKG0sYixfOTQpOw0KaWYoXzk0KXsNCnJldHVybjsNCn0NCmZvcih2YXIgaT0wO2k8XzkwLmxlbmd0aDtpKyspew0KcmVxKG0sYixfOTBbaV0pOw0KfQ0KfTsNCn0NCn0pKCk7DQp9DQppZih0eXBlb2Ygd2luZG93IT0idW5kZWZpbmVkIil7DQooZnVuY3Rpb24oKXsNCmlmKGRqQ29uZmlnLmFsbG93UXVlcnlDb25maWcpew0KdmFyIF85Nj1kb2N1bWVudC5sb2NhdGlvbi50b1N0cmluZygpOw0KdmFyIF85Nz1fOTYuc3BsaXQoIj8iLDIpOw0KaWYoXzk3Lmxlbmd0aD4xKXsNCnZhciBfOTg9Xzk3WzFdOw0KdmFyIF85OT1fOTguc3BsaXQoIiYiKTsNCmZvcih2YXIgeCBpbiBfOTkpew0KdmFyIHNwPV85OVt4XS5zcGxpdCgiPSIpOw0KaWYoKHNwWzBdLmxlbmd0aD45KSYmKHNwWzBdLnN1YnN0cigwLDkpPT0iZGpDb25maWcuIikpew0KdmFyIG9wdD1zcFswXS5zdWJzdHIoOSk7DQpkakNvbmZpZ1tvcHRdPXNwWzFdOw0KfQ0KfQ0KfQ0KfQ0KaWYoKChkakNvbmZpZ1siYmFzZVNjcmlwdFVyaSJdPT0iIil8fChkakNvbmZpZ1siYmFzZVJlbGF0aXZlUGF0aCJdPT0iIikpJiYoZG9jdW1lbnQmJmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKSl7DQp2YXIgXzlkPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzY3JpcHQiKTsNCnZhciBfOWU9LyhfX3BhY2thZ2VfX3xkb2pvfGJvb3RzdHJhcDEpXC5qcyhbXD9cLl18JCkvaTsNCmZvcih2YXIgaT0wO2k8XzlkLmxlbmd0aDtpKyspew0KdmFyIHNyYz1fOWRbaV0uZ2V0QXR0cmlidXRlKCJzcmMiKTsNCmlmKCFzcmMpew0KY29udGludWU7DQp9DQp2YXIgbT1zcmMubWF0Y2goXzllKTsNCmlmKG0pew0KdmFyIF9hMj1zcmMuc3Vic3RyaW5nKDAsbS5pbmRleCk7DQppZihzcmMuaW5kZXhPZigiYm9vdHN0cmFwMSIpPi0xKXsNCl9hMis9Ii4uLyI7DQp9DQppZighdGhpc1siZGpDb25maWciXSl7DQpkakNvbmZpZz17fTsNCn0NCmlmKGRqQ29uZmlnWyJiYXNlU2NyaXB0VXJpIl09PSIiKXsNCmRqQ29uZmlnWyJiYXNlU2NyaXB0VXJpIl09X2EyOw0KfQ0KaWYoZGpDb25maWdbImJhc2VSZWxhdGl2ZVBhdGgiXT09IiIpew0KZGpDb25maWdbImJhc2VSZWxhdGl2ZVBhdGgiXT1fYTI7DQp9DQpicmVhazsNCn0NCn0NCn0NCnZhciBkcj1kb2pvLnJlbmRlcjsNCnZhciBkcmg9ZG9qby5yZW5kZXIuaHRtbDsNCnZhciBkcnM9ZG9qby5yZW5kZXIuc3ZnOw0KdmFyIGR1YT0oZHJoLlVBPW5hdmlnYXRvci51c2VyQWdlbnQpOw0KdmFyIGRhdj0oZHJoLkFWPW5hdmlnYXRvci5hcHBWZXJzaW9uKTsNCnZhciB0PXRydWU7DQp2YXIgZj1mYWxzZTsNCmRyaC5jYXBhYmxlPXQ7DQpkcmguc3VwcG9ydC5idWlsdGluPXQ7DQpkci52ZXI9cGFyc2VGbG9hdChkcmguQVYpOw0KZHIub3MubWFjPWRhdi5pbmRleE9mKCJNYWNpbnRvc2giKT49MDsNCmRyLm9zLndpbj1kYXYuaW5kZXhPZigiV2luZG93cyIpPj0wOw0KZHIub3MubGludXg9ZGF2LmluZGV4T2YoIlgxMSIpPj0wOw0KZHJoLm9wZXJhPWR1YS5pbmRleE9mKCJPcGVyYSIpPj0wOw0KZHJoLmtodG1sPShkYXYuaW5kZXhPZigiS29ucXVlcm9yIik+PTApfHwoZGF2LmluZGV4T2YoIlNhZmFyaSIpPj0wKTsNCmRyaC5zYWZhcmk9ZGF2LmluZGV4T2YoIlNhZmFyaSIpPj0wOw0KdmFyIF9hYT1kdWEuaW5kZXhPZigiR2Vja28iKTsNCmRyaC5tb3ppbGxhPWRyaC5tb3o9KF9hYT49MCkmJighZHJoLmtodG1sKTsNCmlmKGRyaC5tb3ppbGxhKXsNCmRyaC5nZWNrb1ZlcnNpb249ZHVhLnN1YnN0cmluZyhfYWErNixfYWErMTQpOw0KfQ0KZHJoLmllPShkb2N1bWVudC5hbGwpJiYoIWRyaC5vcGVyYSk7DQpkcmguaWU1MD1kcmguaWUmJmRhdi5pbmRleE9mKCJNU0lFIDUuMCIpPj0wOw0KZHJoLmllNTU9ZHJoLmllJiZkYXYuaW5kZXhPZigiTVNJRSA1LjUiKT49MDsNCmRyaC5pZTYwPWRyaC5pZSYmZGF2LmluZGV4T2YoIk1TSUUgNi4wIik+PTA7DQpkcmguaWU3MD1kcmguaWUmJmRhdi5pbmRleE9mKCJNU0lFIDcuMCIpPj0wOw0KdmFyIGNtPWRvY3VtZW50WyJjb21wYXRNb2RlIl07DQpkcmgucXVpcmtzPShjbT09IkJhY2tDb21wYXQiKXx8KGNtPT0iUXVpcmtzTW9kZSIpfHxkcmguaWU1NXx8ZHJoLmllNTA7DQpkb2pvLmxvY2FsZT1kb2pvLmxvY2FsZXx8KGRyaC5pZT9uYXZpZ2F0b3IudXNlckxhbmd1YWdlOm5hdmlnYXRvci5sYW5ndWFnZSkudG9Mb3dlckNhc2UoKTsNCmRyLnZtbC5jYXBhYmxlPWRyaC5pZTsNCmRycy5jYXBhYmxlPWY7DQpkcnMuc3VwcG9ydC5wbHVnaW49ZjsNCmRycy5zdXBwb3J0LmJ1aWx0aW49ZjsNCnZhciBfYWM9d2luZG93WyJkb2N1bWVudCJdOw0KdmFyIHRkaT1fYWNbImltcGxlbWVudGF0aW9uIl07DQppZigodGRpKSYmKHRkaVsiaGFzRmVhdHVyZSJdKSYmKHRkaS5oYXNGZWF0dXJlKCJvcmcudzNjLmRvbS5zdmciLCIxLjAiKSkpew0KZHJzLmNhcGFibGU9dDsNCmRycy5zdXBwb3J0LmJ1aWx0aW49dDsNCmRycy5zdXBwb3J0LnBsdWdpbj1mOw0KfQ0KaWYoZHJoLnNhZmFyaSl7DQp2YXIgdG1wPWR1YS5zcGxpdCgiQXBwbGVXZWJLaXQvIilbMV07DQp2YXIgdmVyPXBhcnNlRmxvYXQodG1wLnNwbGl0KCIgIilbMF0pOw0KaWYodmVyPj00MjApew0KZHJzLmNhcGFibGU9dDsNCmRycy5zdXBwb3J0LmJ1aWx0aW49dDsNCmRycy5zdXBwb3J0LnBsdWdpbj1mOw0KfQ0KfQ0KfSkoKTsNCmRvam8uaG9zdGVudi5zdGFydFBhY2thZ2UoImRvam8uaG9zdGVudiIpOw0KZG9qby5yZW5kZXIubmFtZT1kb2pvLmhvc3RlbnYubmFtZV89ImJyb3dzZXIiOw0KZG9qby5ob3N0ZW52LnNlYXJjaElkcz1bXTsNCmRvam8uaG9zdGVudi5fWE1MSFRUUF9QUk9HSURTPVsiTXN4bWwyLlhNTEhUVFAiLCJNaWNyb3NvZnQuWE1MSFRUUCIsIk1zeG1sMi5YTUxIVFRQLjQuMCJdOw0KZG9qby5ob3N0ZW52LmdldFhtbGh0dHBPYmplY3Q9ZnVuY3Rpb24oKXsNCnZhciBfYjA9bnVsbDsNCnZhciBfYjE9bnVsbDsNCnRyeXsNCl9iMD1uZXcgWE1MSHR0cFJlcXVlc3QoKTsNCn0NCmNhdGNoKGUpew0KfQ0KaWYoIV9iMCl7DQpmb3IodmFyIGk9MDtpPDM7KytpKXsNCnZhciBfYjM9ZG9qby5ob3N0ZW52Ll9YTUxIVFRQX1BST0dJRFNbaV07DQp0cnl7DQpfYjA9bmV3IEFjdGl2ZVhPYmplY3QoX2IzKTsNCn0NCmNhdGNoKGUpew0KX2IxPWU7DQp9DQppZihfYjApew0KZG9qby5ob3N0ZW52Ll9YTUxIVFRQX1BST0dJRFM9W19iM107DQpicmVhazsNCn0NCn0NCn0NCmlmKCFfYjApew0KcmV0dXJuIGRvam8ucmFpc2UoIlhNTEhUVFAgbm90IGF2YWlsYWJsZSIsX2IxKTsNCn0NCnJldHVybiBfYjA7DQp9Ow0KZG9qby5ob3N0ZW52Ll9ibG9ja0FzeW5jPWZhbHNlOw0KZG9qby5ob3N0ZW52LmdldFRleHQ9ZnVuY3Rpb24odXJpLF9iNSxfYjYpew0KaWYoIV9iNSl7DQp0aGlzLl9ibG9ja0FzeW5jPXRydWU7DQp9DQp2YXIgX2I3PXRoaXMuZ2V0WG1saHR0cE9iamVjdCgpOw0KZnVuY3Rpb24gaXNEb2N1bWVudE9rKF9iOCl7DQp2YXIgX2I5PV9iOFsic3RhdHVzIl07DQpyZXR1cm4gQm9vbGVhbigoIV9iOSl8fCgoMjAwPD1fYjkpJiYoMzAwPl9iOSkpfHwoX2I5PT0zMDQpKTsNCn0NCmlmKF9iNSl7DQp2YXIgX2JhPXRoaXMsX2JiPW51bGwsZ2JsPWRvam8uZ2xvYmFsKCk7DQp2YXIgeGhyPWRvam8uZXZhbE9ialBhdGgoImRvam8uaW8uWE1MSFRUUFRyYW5zcG9ydCIpOw0KX2I3Lm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpew0KaWYoX2JiKXsNCmdibC5jbGVhclRpbWVvdXQoX2JiKTsNCl9iYj1udWxsOw0KfQ0KaWYoX2JhLl9ibG9ja0FzeW5jfHwoeGhyJiZ4aHIuX2Jsb2NrQXN5bmMpKXsNCl9iYj1nYmwuc2V0VGltZW91dChmdW5jdGlvbigpew0KX2I3Lm9ucmVhZHlzdGF0ZWNoYW5nZS5hcHBseSh0aGlzKTsNCn0sMTApOw0KfWVsc2V7DQppZig0PT1fYjcucmVhZHlTdGF0ZSl7DQppZihpc0RvY3VtZW50T2soX2I3KSl7DQpfYjUoX2I3LnJlc3BvbnNlVGV4dCk7DQp9DQp9DQp9DQp9Ow0KfQ0KX2I3Lm9wZW4oIkdFVCIsdXJpLF9iNT90cnVlOmZhbHNlKTsNCnRyeXsNCl9iNy5zZW5kKG51bGwpOw0KaWYoX2I1KXsNCnJldHVybiBudWxsOw0KfQ0KaWYoIWlzRG9jdW1lbnRPayhfYjcpKXsNCnZhciBlcnI9RXJyb3IoIlVuYWJsZSB0byBsb2FkICIrdXJpKyIgc3RhdHVzOiIrX2I3LnN0YXR1cyk7DQplcnIuc3RhdHVzPV9iNy5zdGF0dXM7DQplcnIucmVzcG9uc2VUZXh0PV9iNy5yZXNwb25zZVRleHQ7DQp0aHJvdyBlcnI7DQp9DQp9DQpjYXRjaChlKXsNCnRoaXMuX2Jsb2NrQXN5bmM9ZmFsc2U7DQppZigoX2I2KSYmKCFfYjUpKXsNCnJldHVybiBudWxsOw0KfWVsc2V7DQp0aHJvdyBlOw0KfQ0KfQ0KdGhpcy5fYmxvY2tBc3luYz1mYWxzZTsNCnJldHVybiBfYjcucmVzcG9uc2VUZXh0Ow0KfTsNCmRvam8uaG9zdGVudi5kZWZhdWx0RGVidWdDb250YWluZXJJZD0iZG9qb0RlYnVnIjsNCmRvam8uaG9zdGVudi5fcHJpbnRsbl9idWZmZXI9W107DQpkb2pvLmhvc3RlbnYuX3ByaW50bG5fc2FmZT1mYWxzZTsNCmRvam8uaG9zdGVudi5wcmludGxuPWZ1bmN0aW9uKF9iZil7DQppZighZG9qby5ob3N0ZW52Ll9wcmludGxuX3NhZmUpew0KZG9qby5ob3N0ZW52Ll9wcmludGxuX2J1ZmZlci5wdXNoKF9iZik7DQp9ZWxzZXsNCnRyeXsNCnZhciBfYzA9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGpDb25maWcuZGVidWdDb250YWluZXJJZD9kakNvbmZpZy5kZWJ1Z0NvbnRhaW5lcklkOmRvam8uaG9zdGVudi5kZWZhdWx0RGVidWdDb250YWluZXJJZCk7DQppZighX2MwKXsNCl9jMD1kb2pvLmJvZHkoKTsNCn0NCnZhciBkaXY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7DQpkaXYuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoX2JmKSk7DQpfYzAuYXBwZW5kQ2hpbGQoZGl2KTsNCn0NCmNhdGNoKGUpew0KdHJ5ew0KZG9jdW1lbnQud3JpdGUoIjxkaXY+IitfYmYrIjwvZGl2PiIpOw0KfQ0KY2F0Y2goZTIpew0Kd2luZG93LnN0YXR1cz1fYmY7DQp9DQp9DQp9DQp9Ow0KZG9qby5hZGRPbkxvYWQoZnVuY3Rpb24oKXsNCmRvam8uaG9zdGVudi5fcHJpbnRsbl9zYWZlPXRydWU7DQp3aGlsZShkb2pvLmhvc3RlbnYuX3ByaW50bG5fYnVmZmVyLmxlbmd0aD4wKXsNCmRvam8uaG9zdGVudi5wcmludGxuKGRvam8uaG9zdGVudi5fcHJpbnRsbl9idWZmZXIuc2hpZnQoKSk7DQp9DQp9KTsNCmZ1bmN0aW9uIGRqX2FkZE5vZGVFdnRIZGxyKF9jMixfYzMsZnAsX2M1KXsNCnZhciBfYzY9X2MyWyJvbiIrX2MzXXx8ZnVuY3Rpb24oKXsNCn07DQpfYzJbIm9uIitfYzNdPWZ1bmN0aW9uKCl7DQpmcC5hcHBseShfYzIsYXJndW1lbnRzKTsNCl9jNi5hcHBseShfYzIsYXJndW1lbnRzKTsNCn07DQpyZXR1cm4gdHJ1ZTsNCn0NCmZ1bmN0aW9uIGRqX2xvYWRfaW5pdChlKXsNCnZhciBfYzg9KGUmJmUudHlwZSk/ZS50eXBlLnRvTG93ZXJDYXNlKCk6ImxvYWQiOw0KaWYoYXJndW1lbnRzLmNhbGxlZS5pbml0aWFsaXplZHx8KF9jOCE9ImRvbWNvbnRlbnRsb2FkZWQiJiZfYzghPSJsb2FkIikpew0KcmV0dXJuOw0KfQ0KYXJndW1lbnRzLmNhbGxlZS5pbml0aWFsaXplZD10cnVlOw0KaWYodHlwZW9mIChfdGltZXIpIT0idW5kZWZpbmVkIil7DQpjbGVhckludGVydmFsKF90aW1lcik7DQpkZWxldGUgX3RpbWVyOw0KfQ0KdmFyIF9jOT1mdW5jdGlvbigpew0KaWYoZG9qby5yZW5kZXIuaHRtbC5pZSl7DQpkb2pvLmhvc3RlbnYubWFrZVdpZGdldHMoKTsNCn0NCn07DQppZihkb2pvLmhvc3RlbnYuaW5GbGlnaHRDb3VudD09MCl7DQpfYzkoKTsNCmRvam8uaG9zdGVudi5tb2R1bGVzTG9hZGVkKCk7DQp9ZWxzZXsNCmRvam8uYWRkT25Mb2FkKF9jOSk7DQp9DQp9DQppZihkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKXsNCmlmKGRvam8ucmVuZGVyLmh0bWwub3BlcmF8fChkb2pvLnJlbmRlci5odG1sLm1veiYmIWRqQ29uZmlnLmRlbGF5TW96TG9hZGluZ0ZpeCkpew0KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZGpfbG9hZF9pbml0LG51bGwpOw0KfQ0Kd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLGRqX2xvYWRfaW5pdCxudWxsKTsNCn0NCmlmKGRvam8ucmVuZGVyLmh0bWwuaWUmJmRvam8ucmVuZGVyLm9zLndpbil7DQpkb2N1bWVudC5hdHRhY2hFdmVudCgib25yZWFkeXN0YXRlY2hhbmdlIixmdW5jdGlvbihlKXsNCmlmKGRvY3VtZW50LnJlYWR5U3RhdGU9PSJjb21wbGV0ZSIpew0KZGpfbG9hZF9pbml0KCk7DQp9DQp9KTsNCn0NCmlmKC8oV2ViS2l0fGtodG1sKS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpew0KdmFyIF90aW1lcj1zZXRJbnRlcnZhbChmdW5jdGlvbigpew0KaWYoL2xvYWRlZHxjb21wbGV0ZS8udGVzdChkb2N1bWVudC5yZWFkeVN0YXRlKSl7DQpkal9sb2FkX2luaXQoKTsNCn0NCn0sMTApOw0KfQ0KaWYoZG9qby5yZW5kZXIuaHRtbC5pZSl7DQpkal9hZGROb2RlRXZ0SGRscih3aW5kb3csImJlZm9yZXVubG9hZCIsZnVuY3Rpb24oKXsNCmRvam8uaG9zdGVudi5fdW5sb2FkaW5nPXRydWU7DQp3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpew0KZG9qby5ob3N0ZW52Ll91bmxvYWRpbmc9ZmFsc2U7DQp9LDApOw0KfSk7DQp9DQpkal9hZGROb2RlRXZ0SGRscih3aW5kb3csInVubG9hZCIsZnVuY3Rpb24oKXsNCmRvam8uaG9zdGVudi51bmxvYWRlZCgpOw0KaWYoKCFkb2pvLnJlbmRlci5odG1sLmllKXx8KGRvam8ucmVuZGVyLmh0bWwuaWUmJmRvam8uaG9zdGVudi5fdW5sb2FkaW5nKSl7DQpkb2pvLmhvc3RlbnYudW5sb2FkZWQoKTsNCn0NCn0pOw0KZG9qby5ob3N0ZW52Lm1ha2VXaWRnZXRzPWZ1bmN0aW9uKCl7DQp2YXIgX2NiPVtdOw0KaWYoZGpDb25maWcuc2VhcmNoSWRzJiZkakNvbmZpZy5zZWFyY2hJZHMubGVuZ3RoPjApew0KX2NiPV9jYi5jb25jYXQoZGpDb25maWcuc2VhcmNoSWRzKTsNCn0NCmlmKGRvam8uaG9zdGVudi5zZWFyY2hJZHMmJmRvam8uaG9zdGVudi5zZWFyY2hJZHMubGVuZ3RoPjApew0KX2NiPV9jYi5jb25jYXQoZG9qby5ob3N0ZW52LnNlYXJjaElkcyk7DQp9DQppZigoZGpDb25maWcucGFyc2VXaWRnZXRzKXx8KF9jYi5sZW5ndGg+MCkpew0KaWYoZG9qby5ldmFsT2JqUGF0aCgiZG9qby53aWRnZXQuUGFyc2UiKSl7DQp2YXIgX2NjPW5ldyBkb2pvLnhtbC5QYXJzZSgpOw0KaWYoX2NiLmxlbmd0aD4wKXsNCmZvcih2YXIgeD0wO3g8X2NiLmxlbmd0aDt4Kyspew0KdmFyIF9jZT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChfY2JbeF0pOw0KaWYoIV9jZSl7DQpjb250aW51ZTsNCn0NCnZhciBfY2Y9X2NjLnBhcnNlRWxlbWVudChfY2UsbnVsbCx0cnVlKTsNCmRvam8ud2lkZ2V0LmdldFBhcnNlcigpLmNyZWF0ZUNvbXBvbmVudHMoX2NmKTsNCn0NCn1lbHNlew0KaWYoZGpDb25maWcucGFyc2VXaWRnZXRzKXsNCnZhciBfY2Y9X2NjLnBhcnNlRWxlbWVudChkb2pvLmJvZHkoKSxudWxsLHRydWUpOw0KZG9qby53aWRnZXQuZ2V0UGFyc2VyKCkuY3JlYXRlQ29tcG9uZW50cyhfY2YpOw0KfQ0KfQ0KfQ0KfQ0KfTsNCmRvam8uYWRkT25Mb2FkKGZ1bmN0aW9uKCl7DQppZighZG9qby5yZW5kZXIuaHRtbC5pZSl7DQpkb2pvLmhvc3RlbnYubWFrZVdpZGdldHMoKTsNCn0NCn0pOw0KdHJ5ew0KaWYoZG9qby5yZW5kZXIuaHRtbC5pZSl7DQpkb2N1bWVudC5uYW1lc3BhY2VzLmFkZCgidiIsInVybjpzY2hlbWFzLW1pY3Jvc29mdC1jb206dm1sIik7DQpkb2N1bWVudC5jcmVhdGVTdHlsZVNoZWV0KCkuYWRkUnVsZSgidlxcOioiLCJiZWhhdmlvcjp1cmwoI2RlZmF1bHQjVk1MKSIpOw0KfQ0KfQ0KY2F0Y2goZSl7DQp9DQpkb2pvLmhvc3RlbnYud3JpdGVJbmNsdWRlcz1mdW5jdGlvbigpew0KfTsNCmlmKCFkal91bmRlZigiZG9jdW1lbnQiLHRoaXMpKXsNCmRqX2N1cnJlbnREb2N1bWVudD10aGlzLmRvY3VtZW50Ow0KfQ0KZG9qby5kb2M9ZnVuY3Rpb24oKXsNCnJldHVybiBkal9jdXJyZW50RG9jdW1lbnQ7DQp9Ow0KZG9qby5ib2R5PWZ1bmN0aW9uKCl7DQpyZXR1cm4gZG9qby5kb2MoKS5ib2R5fHxkb2pvLmRvYygpLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJib2R5IilbMF07DQp9Ow0KZG9qby5ieUlkPWZ1bmN0aW9uKGlkLGRvYyl7DQppZigoaWQpJiYoKHR5cGVvZiBpZD09InN0cmluZyIpfHwoaWQgaW5zdGFuY2VvZiBTdHJpbmcpKSl7DQppZighZG9jKXsNCmRvYz1kal9jdXJyZW50RG9jdW1lbnQ7DQp9DQp2YXIgZWxlPWRvYy5nZXRFbGVtZW50QnlJZChpZCk7DQppZihlbGUmJihlbGUuaWQhPWlkKSYmZG9jLmFsbCl7DQplbGU9bnVsbDsNCmVsZXM9ZG9jLmFsbFtpZF07DQppZihlbGVzKXsNCmlmKGVsZXMubGVuZ3RoKXsNCmZvcih2YXIgaT0wO2k8ZWxlcy5sZW5ndGg7aSsrKXsNCmlmKGVsZXNbaV0uaWQ9PWlkKXsNCmVsZT1lbGVzW2ldOw0KYnJlYWs7DQp9DQp9DQp9ZWxzZXsNCmVsZT1lbGVzOw0KfQ0KfQ0KfQ0KcmV0dXJuIGVsZTsNCn0NCnJldHVybiBpZDsNCn07DQpkb2pvLnNldENvbnRleHQ9ZnVuY3Rpb24oX2Q0LF9kNSl7DQpkal9jdXJyZW50Q29udGV4dD1fZDQ7DQpkal9jdXJyZW50RG9jdW1lbnQ9X2Q1Ow0KfTsNCmRvam8uX2ZpcmVDYWxsYmFjaz1mdW5jdGlvbihfZDYsX2Q3LF9kOCl7DQppZigoX2Q3KSYmKCh0eXBlb2YgX2Q2PT0ic3RyaW5nIil8fChfZDYgaW5zdGFuY2VvZiBTdHJpbmcpKSl7DQpfZDY9X2Q3W19kNl07DQp9DQpyZXR1cm4gKF9kNz9fZDYuYXBwbHkoX2Q3LF9kOHx8W10pOl9kNigpKTsNCn07DQpkb2pvLndpdGhHbG9iYWw9ZnVuY3Rpb24oX2Q5LF9kYSxfZGIsX2RjKXsNCnZhciBfZGQ7DQp2YXIgX2RlPWRqX2N1cnJlbnRDb250ZXh0Ow0KdmFyIF9kZj1kal9jdXJyZW50RG9jdW1lbnQ7DQp0cnl7DQpkb2pvLnNldENvbnRleHQoX2Q5LF9kOS5kb2N1bWVudCk7DQpfZGQ9ZG9qby5fZmlyZUNhbGxiYWNrKF9kYSxfZGIsX2RjKTsNCn0NCmZpbmFsbHl7DQpkb2pvLnNldENvbnRleHQoX2RlLF9kZik7DQp9DQpyZXR1cm4gX2RkOw0KfTsNCmRvam8ud2l0aERvYz1mdW5jdGlvbihfZTAsX2UxLF9lMixfZTMpew0KdmFyIF9lNDsNCnZhciBfZTU9ZGpfY3VycmVudERvY3VtZW50Ow0KdHJ5ew0KZGpfY3VycmVudERvY3VtZW50PV9lMDsNCl9lND1kb2pvLl9maXJlQ2FsbGJhY2soX2UxLF9lMixfZTMpOw0KfQ0KZmluYWxseXsNCmRqX2N1cnJlbnREb2N1bWVudD1fZTU7DQp9DQpyZXR1cm4gX2U0Ow0KfTsNCn0NCihmdW5jdGlvbigpew0KaWYodHlwZW9mIGRqX3VzaW5nQm9vdHN0cmFwIT0idW5kZWZpbmVkIil7DQpyZXR1cm47DQp9DQp2YXIgX2U2PWZhbHNlOw0KdmFyIF9lNz1mYWxzZTsNCnZhciBfZTg9ZmFsc2U7DQppZigodHlwZW9mIHRoaXNbImxvYWQiXT09ImZ1bmN0aW9uIikmJigodHlwZW9mIHRoaXNbIlBhY2thZ2VzIl09PSJmdW5jdGlvbiIpfHwodHlwZW9mIHRoaXNbIlBhY2thZ2VzIl09PSJvYmplY3QiKSkpew0KX2U2PXRydWU7DQp9ZWxzZXsNCmlmKHR5cGVvZiB0aGlzWyJsb2FkIl09PSJmdW5jdGlvbiIpew0KX2U3PXRydWU7DQp9ZWxzZXsNCmlmKHdpbmRvdy53aWRnZXQpew0KX2U4PXRydWU7DQp9DQp9DQp9DQp2YXIgX2U5PVtdOw0KaWYoKHRoaXNbImRqQ29uZmlnIl0pJiYoKGRqQ29uZmlnWyJpc0RlYnVnIl0pfHwoZGpDb25maWdbImRlYnVnQXRBbGxDb3N0cyJdKSkpew0KX2U5LnB1c2goImRlYnVnLmpzIik7DQp9DQppZigodGhpc1siZGpDb25maWciXSkmJihkakNvbmZpZ1siZGVidWdBdEFsbENvc3RzIl0pJiYoIV9lNikmJighX2U4KSl7DQpfZTkucHVzaCgiYnJvd3Nlcl9kZWJ1Zy5qcyIpOw0KfQ0KdmFyIF9lYT1kakNvbmZpZ1siYmFzZVNjcmlwdFVyaSJdOw0KaWYoKHRoaXNbImRqQ29uZmlnIl0pJiYoZGpDb25maWdbImJhc2VMb2FkZXJVcmkiXSkpew0KX2VhPWRqQ29uZmlnWyJiYXNlTG9hZGVyVXJpIl07DQp9DQpmb3IodmFyIHg9MDt4PF9lOS5sZW5ndGg7eCsrKXsNCnZhciBfZWM9X2VhKyJzcmMvIitfZTlbeF07DQppZihfZTZ8fF9lNyl7DQpsb2FkKF9lYyk7DQp9ZWxzZXsNCnRyeXsNCmRvY3VtZW50LndyaXRlKCI8c2NyIisiaXB0IHR5cGU9J3RleHQvamF2YXNjcmlwdCcgc3JjPSciK19lYysiJz48L3NjciIrImlwdD4iKTsNCn0NCmNhdGNoKGUpew0KdmFyIF9lZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTsNCl9lZC5zcmM9X2VjOw0KZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKVswXS5hcHBlbmRDaGlsZChfZWQpOw0KfQ0KfQ0KfQ0KfSkoKTsNCmRvam8ucHJvdmlkZSgiZG9qby5zdHJpbmcuY29tbW9uIik7DQpkb2pvLnN0cmluZy50cmltPWZ1bmN0aW9uKHN0cix3aCl7DQppZighc3RyLnJlcGxhY2Upew0KcmV0dXJuIHN0cjsNCn0NCmlmKCFzdHIubGVuZ3RoKXsNCnJldHVybiBzdHI7DQp9DQp2YXIgcmU9KHdoPjApPygvXlxzKy8pOih3aDwwKT8oL1xzKyQvKTooL15ccyt8XHMrJC9nKTsNCnJldHVybiBzdHIucmVwbGFjZShyZSwiIik7DQp9Ow0KZG9qby5zdHJpbmcudHJpbVN0YXJ0PWZ1bmN0aW9uKHN0cil7DQpyZXR1cm4gZG9qby5zdHJpbmcudHJpbShzdHIsMSk7DQp9Ow0KZG9qby5zdHJpbmcudHJpbUVuZD1mdW5jdGlvbihzdHIpew0KcmV0dXJuIGRvam8uc3RyaW5nLnRyaW0oc3RyLC0xKTsNCn07DQpkb2pvLnN0cmluZy5yZXBlYXQ9ZnVuY3Rpb24oc3RyLF9mNCxfZjUpew0KdmFyIG91dD0iIjsNCmZvcih2YXIgaT0wO2k8X2Y0O2krKyl7DQpvdXQrPXN0cjsNCmlmKF9mNSYmaTxfZjQtMSl7DQpvdXQrPV9mNTsNCn0NCn0NCnJldHVybiBvdXQ7DQp9Ow0KZG9qby5zdHJpbmcucGFkPWZ1bmN0aW9uKHN0cixsZW4sYyxkaXIpew0KdmFyIG91dD1TdHJpbmcoc3RyKTsNCmlmKCFjKXsNCmM9IjAiOw0KfQ0KaWYoIWRpcil7DQpkaXI9MTsNCn0NCndoaWxlKG91dC5sZW5ndGg8bGVuKXsNCmlmKGRpcj4wKXsNCm91dD1jK291dDsNCn1lbHNlew0Kb3V0Kz1jOw0KfQ0KfQ0KcmV0dXJuIG91dDsNCn07DQpkb2pvLnN0cmluZy5wYWRMZWZ0PWZ1bmN0aW9uKHN0cixsZW4sYyl7DQpyZXR1cm4gZG9qby5zdHJpbmcucGFkKHN0cixsZW4sYywxKTsNCn07DQpkb2pvLnN0cmluZy5wYWRSaWdodD1mdW5jdGlvbihzdHIsbGVuLGMpew0KcmV0dXJuIGRvam8uc3RyaW5nLnBhZChzdHIsbGVuLGMsLTEpOw0KfTsNCmRvam8ucHJvdmlkZSgiZG9qby5zdHJpbmciKTsNCmRvam8ucHJvdmlkZSgiZG9qby5sYW5nLmNvbW1vbiIpOw0KZG9qby5sYW5nLmluaGVyaXRzPWZ1bmN0aW9uKF8xMDMsXzEwNCl7DQppZih0eXBlb2YgXzEwNCE9ImZ1bmN0aW9uIil7DQpkb2pvLnJhaXNlKCJkb2pvLmluaGVyaXRzOiBzdXBlcmNsYXNzIGFyZ3VtZW50IFsiK18xMDQrIl0gbXVzdCBiZSBhIGZ1bmN0aW9uIChzdWJjbGFzczogWyIrXzEwMysiJ10iKTsNCn0NCl8xMDMucHJvdG90eXBlPW5ldyBfMTA0KCk7DQpfMTAzLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1fMTAzOw0KXzEwMy5zdXBlcmNsYXNzPV8xMDQucHJvdG90eXBlOw0KXzEwM1sic3VwZXIiXT1fMTA0LnByb3RvdHlwZTsNCn07DQpkb2pvLmxhbmcuX21peGluPWZ1bmN0aW9uKG9iaixfMTA2KXsNCnZhciB0b2JqPXt9Ow0KZm9yKHZhciB4IGluIF8xMDYpew0KaWYoKHR5cGVvZiB0b2JqW3hdPT0idW5kZWZpbmVkIil8fCh0b2JqW3hdIT1fMTA2W3hdKSl7DQpvYmpbeF09XzEwNlt4XTsNCn0NCn0NCmlmKGRvam8ucmVuZGVyLmh0bWwuaWUmJih0eXBlb2YgKF8xMDZbInRvU3RyaW5nIl0pPT0iZnVuY3Rpb24iKSYmKF8xMDZbInRvU3RyaW5nIl0hPW9ialsidG9TdHJpbmciXSkmJihfMTA2WyJ0b1N0cmluZyJdIT10b2JqWyJ0b1N0cmluZyJdKSl7DQpvYmoudG9TdHJpbmc9XzEwNi50b1N0cmluZzsNCn0NCnJldHVybiBvYmo7DQp9Ow0KZG9qby5sYW5nLm1peGluPWZ1bmN0aW9uKG9iaixfMTBhKXsNCmZvcih2YXIgaT0xLGw9YXJndW1lbnRzLmxlbmd0aDtpPGw7aSsrKXsNCmRvam8ubGFuZy5fbWl4aW4ob2JqLGFyZ3VtZW50c1tpXSk7DQp9DQpyZXR1cm4gb2JqOw0KfTsNCmRvam8ubGFuZy5leHRlbmQ9ZnVuY3Rpb24oXzEwZCxfMTBlKXsNCmZvcih2YXIgaT0xLGw9YXJndW1lbnRzLmxlbmd0aDtpPGw7aSsrKXsNCmRvam8ubGFuZy5fbWl4aW4oXzEwZC5wcm90b3R5cGUsYXJndW1lbnRzW2ldKTsNCn0NCnJldHVybiBfMTBkOw0KfTsNCmRvam8uaW5oZXJpdHM9ZG9qby5sYW5nLmluaGVyaXRzOw0KZG9qby5taXhpbj1kb2pvLmxhbmcubWl4aW47DQpkb2pvLmV4dGVuZD1kb2pvLmxhbmcuZXh0ZW5kOw0KZG9qby5sYW5nLmZpbmQ9ZnVuY3Rpb24oXzExMSxfMTEyLF8xMTMsXzExNCl7DQppZighZG9qby5sYW5nLmlzQXJyYXlMaWtlKF8xMTEpJiZkb2pvLmxhbmcuaXNBcnJheUxpa2UoXzExMikpew0KZG9qby5kZXByZWNhdGVkKCJkb2pvLmxhbmcuZmluZCh2YWx1ZSwgYXJyYXkpIiwidXNlIGRvam8ubGFuZy5maW5kKGFycmF5LCB2YWx1ZSkgaW5zdGVhZCIsIjAuNSIpOw0KdmFyIHRlbXA9XzExMTsNCl8xMTE9XzExMjsNCl8xMTI9dGVtcDsNCn0NCnZhciBfMTE2PWRvam8ubGFuZy5pc1N0cmluZyhfMTExKTsNCmlmKF8xMTYpew0KXzExMT1fMTExLnNwbGl0KCIiKTsNCn0NCmlmKF8xMTQpew0KdmFyIHN0ZXA9LTE7DQp2YXIgaT1fMTExLmxlbmd0aC0xOw0KdmFyIGVuZD0tMTsNCn1lbHNlew0KdmFyIHN0ZXA9MTsNCnZhciBpPTA7DQp2YXIgZW5kPV8xMTEubGVuZ3RoOw0KfQ0KaWYoXzExMyl7DQp3aGlsZShpIT1lbmQpew0KaWYoXzExMVtpXT09PV8xMTIpew0KcmV0dXJuIGk7DQp9DQppKz1zdGVwOw0KfQ0KfWVsc2V7DQp3aGlsZShpIT1lbmQpew0KaWYoXzExMVtpXT09XzExMil7DQpyZXR1cm4gaTsNCn0NCmkrPXN0ZXA7DQp9DQp9DQpyZXR1cm4gLTE7DQp9Ow0KZG9qby5sYW5nLmluZGV4T2Y9ZG9qby5sYW5nLmZpbmQ7DQpkb2pvLmxhbmcuZmluZExhc3Q9ZnVuY3Rpb24oXzExYSxfMTFiLF8xMWMpew0KcmV0dXJuIGRvam8ubGFuZy5maW5kKF8xMWEsXzExYixfMTFjLHRydWUpOw0KfTsNCmRvam8ubGFuZy5sYXN0SW5kZXhPZj1kb2pvLmxhbmcuZmluZExhc3Q7DQpkb2pvLmxhbmcuaW5BcnJheT1mdW5jdGlvbihfMTFkLF8xMWUpew0KcmV0dXJuIGRvam8ubGFuZy5maW5kKF8xMWQsXzExZSk+LTE7DQp9Ow0KZG9qby5sYW5nLmlzT2JqZWN0PWZ1bmN0aW9uKGl0KXsNCmlmKHR5cGVvZiBpdD09InVuZGVmaW5lZCIpew0KcmV0dXJuIGZhbHNlOw0KfQ0KcmV0dXJuICh0eXBlb2YgaXQ9PSJvYmplY3QifHxpdD09PW51bGx8fGRvam8ubGFuZy5pc0FycmF5KGl0KXx8ZG9qby5sYW5nLmlzRnVuY3Rpb24oaXQpKTsNCn07DQpkb2pvLmxhbmcuaXNBcnJheT1mdW5jdGlvbihpdCl7DQpyZXR1cm4gKGl0JiZpdCBpbnN0YW5jZW9mIEFycmF5fHx0eXBlb2YgaXQ9PSJhcnJheSIpOw0KfTsNCmRvam8ubGFuZy5pc0FycmF5TGlrZT1mdW5jdGlvbihpdCl7DQppZigoIWl0KXx8KGRvam8ubGFuZy5pc1VuZGVmaW5lZChpdCkpKXsNCnJldHVybiBmYWxzZTsNCn0NCmlmKGRvam8ubGFuZy5pc1N0cmluZyhpdCkpew0KcmV0dXJuIGZhbHNlOw0KfQ0KaWYoZG9qby5sYW5nLmlzRnVuY3Rpb24oaXQpKXsNCnJldHVybiBmYWxzZTsNCn0NCmlmKGRvam8ubGFuZy5pc0FycmF5KGl0KSl7DQpyZXR1cm4gdHJ1ZTsNCn0NCmlmKChpdC50YWdOYW1lKSYmKGl0LnRhZ05hbWUudG9Mb3dlckNhc2UoKT09ImZvcm0iKSl7DQpyZXR1cm4gZmFsc2U7DQp9DQppZihkb2pvLmxhbmcuaXNOdW1iZXIoaXQubGVuZ3RoKSYmaXNGaW5pdGUoaXQubGVuZ3RoKSl7DQpyZXR1cm4gdHJ1ZTsNCn0NCnJldHVybiBmYWxzZTsNCn07DQpkb2pvLmxhbmcuaXNGdW5jdGlvbj1mdW5jdGlvbihpdCl7DQppZighaXQpew0KcmV0dXJuIGZhbHNlOw0KfQ0KaWYoKHR5cGVvZiAoaXQpPT0iZnVuY3Rpb24iKSYmKGl0PT0iW29iamVjdCBOb2RlTGlzdF0iKSl7DQpyZXR1cm4gZmFsc2U7DQp9DQpyZXR1cm4gKGl0IGluc3RhbmNlb2YgRnVuY3Rpb258fHR5cGVvZiBpdD09ImZ1bmN0aW9uIik7DQp9Ow0KZG9qby5sYW5nLmlzU3RyaW5nPWZ1bmN0aW9uKGl0KXsNCnJldHVybiAodHlwZW9mIGl0PT0ic3RyaW5nInx8aXQgaW5zdGFuY2VvZiBTdHJpbmcpOw0KfTsNCmRvam8ubGFuZy5pc0FsaWVuPWZ1bmN0aW9uKGl0KXsNCmlmKCFpdCl7DQpyZXR1cm4gZmFsc2U7DQp9DQpyZXR1cm4gIWRvam8ubGFuZy5pc0Z1bmN0aW9uKCkmJi9ce1xzKlxbbmF0aXZlIGNvZGVcXVxzKlx9Ly50ZXN0KFN0cmluZyhpdCkpOw0KfTsNCmRvam8ubGFuZy5pc0Jvb2xlYW49ZnVuY3Rpb24oaXQpew0KcmV0dXJuIChpdCBpbnN0YW5jZW9mIEJvb2xlYW58fHR5cGVvZiBpdD09ImJvb2xlYW4iKTsNCn07DQpkb2pvLmxhbmcuaXNOdW1iZXI9ZnVuY3Rpb24oaXQpew0KcmV0dXJuIChpdCBpbnN0YW5jZW9mIE51bWJlcnx8dHlwZW9mIGl0PT0ibnVtYmVyIik7DQp9Ow0KZG9qby5sYW5nLmlzVW5kZWZpbmVkPWZ1bmN0aW9uKGl0KXsNCnJldHVybiAoKHR5cGVvZiAoaXQpPT0idW5kZWZpbmVkIikmJihpdD09dW5kZWZpbmVkKSk7DQp9Ow0KZG9qby5wcm92aWRlKCJkb2pvLmxhbmcuZXh0cmFzIik7DQpkb2pvLmxhbmcuc2V0VGltZW91dD1mdW5jdGlvbihmdW5jLF8xMjkpew0KdmFyIF8xMmE9d2luZG93LF8xMmI9MjsNCmlmKCFkb2pvLmxhbmcuaXNGdW5jdGlvbihmdW5jKSl7DQpfMTJhPWZ1bmM7DQpmdW5jPV8xMjk7DQpfMTI5PWFyZ3VtZW50c1syXTsNCl8xMmIrKzsNCn0NCmlmKGRvam8ubGFuZy5pc1N0cmluZyhmdW5jKSl7DQpmdW5jPV8xMmFbZnVuY107DQp9DQp2YXIgYXJncz1bXTsNCmZvcih2YXIgaT1fMTJiO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspew0KYXJncy5wdXNoKGFyZ3VtZW50c1tpXSk7DQp9DQpyZXR1cm4gZG9qby5nbG9iYWwoKS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7DQpmdW5jLmFwcGx5KF8xMmEsYXJncyk7DQp9LF8xMjkpOw0KfTsNCmRvam8ubGFuZy5jbGVhclRpbWVvdXQ9ZnVuY3Rpb24oXzEyZSl7DQpkb2pvLmdsb2JhbCgpLmNsZWFyVGltZW91dChfMTJlKTsNCn07DQpkb2pvLmxhbmcuZ2V0TmFtZUluT2JqPWZ1bmN0aW9uKG5zLGl0ZW0pew0KaWYoIW5zKXsNCm5zPWRqX2dsb2JhbDsNCn0NCmZvcih2YXIgeCBpbiBucyl7DQppZihuc1t4XT09PWl0ZW0pew0KcmV0dXJuIG5ldyBTdHJpbmcoeCk7DQp9DQp9DQpyZXR1cm4gbnVsbDsNCn07DQpkb2pvLmxhbmcuc2hhbGxvd0NvcHk9ZnVuY3Rpb24ob2JqLGRlZXApew0KdmFyIGkscmV0Ow0KaWYob2JqPT09bnVsbCl7DQpyZXR1cm4gbnVsbDsNCn0NCmlmKGRvam8ubGFuZy5pc09iamVjdChvYmopKXsNCnJldD1uZXcgb2JqLmNvbnN0cnVjdG9yKCk7DQpmb3IoaSBpbiBvYmopew0KaWYoZG9qby5sYW5nLmlzVW5kZWZpbmVkKHJldFtpXSkpew0KcmV0W2ldPWRlZXA/ZG9qby5sYW5nLnNoYWxsb3dDb3B5KG9ialtpXSxkZWVwKTpvYmpbaV07DQp9DQp9DQp9ZWxzZXsNCmlmKGRvam8ubGFuZy5pc0FycmF5KG9iaikpew0KcmV0PVtdOw0KZm9yKGk9MDtpPG9iai5sZW5ndGg7aSsrKXsNCnJldFtpXT1kZWVwP2Rvam8ubGFuZy5zaGFsbG93Q29weShvYmpbaV0sZGVlcCk6b2JqW2ldOw0KfQ0KfWVsc2V7DQpyZXQ9b2JqOw0KfQ0KfQ0KcmV0dXJuIHJldDsNCn07DQpkb2pvLmxhbmcuZmlyc3RWYWx1ZWQ9ZnVuY3Rpb24oKXsNCmZvcih2YXIgaT0wO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspew0KaWYodHlwZW9mIGFyZ3VtZW50c1tpXSE9InVuZGVmaW5lZCIpew0KcmV0dXJuIGFyZ3VtZW50c1tpXTsNCn0NCn0NCnJldHVybiB1bmRlZmluZWQ7DQp9Ow0KZG9qby5sYW5nLmdldE9ialBhdGhWYWx1ZT1mdW5jdGlvbihfMTM3LF8xMzgsXzEzOSl7DQp3aXRoKGRvam8ucGFyc2VPYmpQYXRoKF8xMzcsXzEzOCxfMTM5KSl7DQpyZXR1cm4gZG9qby5ldmFsUHJvcChwcm9wLG9iaixfMTM5KTsNCn0NCn07DQpkb2pvLmxhbmcuc2V0T2JqUGF0aFZhbHVlPWZ1bmN0aW9uKF8xM2EsXzEzYixfMTNjLF8xM2Qpew0KaWYoYXJndW1lbnRzLmxlbmd0aDw0KXsNCl8xM2Q9dHJ1ZTsNCn0NCndpdGgoZG9qby5wYXJzZU9ialBhdGgoXzEzYSxfMTNjLF8xM2QpKXsNCmlmKG9iaiYmKF8xM2R8fChwcm9wIGluIG9iaikpKXsNCm9ialtwcm9wXT1fMTNiOw0KfQ0KfQ0KfTsNCmRvam8ucHJvdmlkZSgiZG9qby5pby5jb21tb24iKTsNCmRvam8uaW8udHJhbnNwb3J0cz1bXTsNCmRvam8uaW8uaGRsckZ1bmNOYW1lcz1bImxvYWQiLCJlcnJvciIsInRpbWVvdXQiXTsNCmRvam8uaW8uUmVxdWVzdD1mdW5jdGlvbih1cmwsXzEzZixfMTQwLF8xNDEpew0KaWYoKGFyZ3VtZW50cy5sZW5ndGg9PTEpJiYoYXJndW1lbnRzWzBdLmNvbnN0cnVjdG9yPT1PYmplY3QpKXsNCnRoaXMuZnJvbUt3QXJncyhhcmd1bWVudHNbMF0pOw0KfWVsc2V7DQp0aGlzLnVybD11cmw7DQppZihfMTNmKXsNCnRoaXMubWltZXR5cGU9XzEzZjsNCn0NCmlmKF8xNDApew0KdGhpcy50cmFuc3BvcnQ9XzE0MDsNCn0NCmlmKGFyZ3VtZW50cy5sZW5ndGg+PTQpew0KdGhpcy5jaGFuZ2VVcmw9XzE0MTsNCn0NCn0NCn07DQpkb2pvLmxhbmcuZXh0ZW5kKGRvam8uaW8uUmVxdWVzdCx7dXJsOiIiLG1pbWV0eXBlOiJ0ZXh0L3BsYWluIixtZXRob2Q6IkdFVCIsY29udGVudDp1bmRlZmluZWQsdHJhbnNwb3J0OnVuZGVmaW5lZCxjaGFuZ2VVcmw6dW5kZWZpbmVkLGZvcm1Ob2RlOnVuZGVmaW5lZCxzeW5jOmZhbHNlLGJpbmRTdWNjZXNzOmZhbHNlLHVzZUNhY2hlOmZhbHNlLHByZXZlbnRDYWNoZTpmYWxzZSxsb2FkOmZ1bmN0aW9uKHR5cGUsZGF0YSxfMTQ0LF8xNDUpew0KfSxlcnJvcjpmdW5jdGlvbih0eXBlLF8xNDcsXzE0OCxfMTQ5KXsNCn0sdGltZW91dDpmdW5jdGlvbih0eXBlLF8xNGIsXzE0YyxfMTRkKXsNCn0saGFuZGxlOmZ1bmN0aW9uKHR5cGUsZGF0YSxfMTUwLF8xNTEpew0KfSx0aW1lb3V0U2Vjb25kczowLGFib3J0OmZ1bmN0aW9uKCl7DQp9LGZyb21Ld0FyZ3M6ZnVuY3Rpb24oXzE1Mil7DQppZihfMTUyWyJ1cmwiXSl7DQpfMTUyLnVybD1fMTUyLnVybC50b1N0cmluZygpOw0KfQ0KaWYoXzE1MlsiZm9ybU5vZGUiXSl7DQpfMTUyLmZvcm1Ob2RlPWRvam8uYnlJZChfMTUyLmZvcm1Ob2RlKTsNCn0NCmlmKCFfMTUyWyJtZXRob2QiXSYmXzE1MlsiZm9ybU5vZGUiXSYmXzE1MlsiZm9ybU5vZGUiXS5tZXRob2Qpew0KXzE1Mi5tZXRob2Q9XzE1MlsiZm9ybU5vZGUiXS5tZXRob2Q7DQp9DQppZighXzE1MlsiaGFuZGxlIl0mJl8xNTJbImhhbmRsZXIiXSl7DQpfMTUyLmhhbmRsZT1fMTUyLmhhbmRsZXI7DQp9DQppZighXzE1MlsibG9hZCJdJiZfMTUyWyJsb2FkZWQiXSl7DQpfMTUyLmxvYWQ9XzE1Mi5sb2FkZWQ7DQp9DQppZighXzE1MlsiY2hhbmdlVXJsIl0mJl8xNTJbImNoYW5nZVVSTCJdKXsNCl8xNTIuY2hhbmdlVXJsPV8xNTIuY2hhbmdlVVJMOw0KfQ0KXzE1Mi5lbmNvZGluZz1kb2pvLmxhbmcuZmlyc3RWYWx1ZWQoXzE1MlsiZW5jb2RpbmciXSxkakNvbmZpZ1siYmluZEVuY29kaW5nIl0sIiIpOw0KXzE1Mi5zZW5kVHJhbnNwb3J0PWRvam8ubGFuZy5maXJzdFZhbHVlZChfMTUyWyJzZW5kVHJhbnNwb3J0Il0sZGpDb25maWdbImlvU2VuZFRyYW5zcG9ydCJdLGZhbHNlKTsNCnZhciBfMTUzPWRvam8ubGFuZy5pc0Z1bmN0aW9uOw0KZm9yKHZhciB4PTA7eDxkb2pvLmlvLmhkbHJGdW5jTmFtZXMubGVuZ3RoO3grKyl7DQp2YXIgZm49ZG9qby5pby5oZGxyRnVuY05hbWVzW3hdOw0KaWYoXzE1Mltmbl0mJl8xNTMoXzE1Mltmbl0pKXsNCmNvbnRpbnVlOw0KfQ0KaWYoXzE1MlsiaGFuZGxlIl0mJl8xNTMoXzE1MlsiaGFuZGxlIl0pKXsNCl8xNTJbZm5dPV8xNTIuaGFuZGxlOw0KfQ0KfQ0KZG9qby5sYW5nLm1peGluKHRoaXMsXzE1Mik7DQp9fSk7DQpkb2pvLmlvLkVycm9yPWZ1bmN0aW9uKG1zZyx0eXBlLG51bSl7DQp0aGlzLm1lc3NhZ2U9bXNnOw0KdGhpcy50eXBlPXR5cGV8fCJ1bmtub3duIjsNCnRoaXMubnVtYmVyPW51bXx8MDsNCn07DQpkb2pvLmlvLnRyYW5zcG9ydHMuYWRkVHJhbnNwb3J0PWZ1bmN0aW9uKG5hbWUpew0KdGhpcy5wdXNoKG5hbWUpOw0KdGhpc1tuYW1lXT1kb2pvLmlvW25hbWVdOw0KfTsNCmRvam8uaW8uYmluZD1mdW5jdGlvbihfMTVhKXsNCmlmKCEoXzE1YSBpbnN0YW5jZW9mIGRvam8uaW8uUmVxdWVzdCkpew0KdHJ5ew0KXzE1YT1uZXcgZG9qby5pby5SZXF1ZXN0KF8xNWEpOw0KfQ0KY2F0Y2goZSl7DQpkb2pvLmRlYnVnKGUpOw0KfQ0KfQ0KdmFyIF8xNWI9IiI7DQppZihfMTVhWyJ0cmFuc3BvcnQiXSl7DQpfMTViPV8xNWFbInRyYW5zcG9ydCJdOw0KaWYoIXRoaXNbXzE1Yl0pew0KZG9qby5pby5zZW5kQmluZEVycm9yKF8xNWEsIk5vIGRvam8uaW8uYmluZCgpIHRyYW5zcG9ydCB3aXRoIG5hbWUgJyIrXzE1YVsidHJhbnNwb3J0Il0rIicuIik7DQpyZXR1cm4gXzE1YTsNCn0NCmlmKCF0aGlzW18xNWJdLmNhbkhhbmRsZShfMTVhKSl7DQpkb2pvLmlvLnNlbmRCaW5kRXJyb3IoXzE1YSwiZG9qby5pby5iaW5kKCkgdHJhbnNwb3J0IHdpdGggbmFtZSAnIitfMTVhWyJ0cmFuc3BvcnQiXSsiJyBjYW5ub3QgaGFuZGxlIHRoaXMgdHlwZSBvZiByZXF1ZXN0LiIpOw0KcmV0dXJuIF8xNWE7DQp9DQp9ZWxzZXsNCmZvcih2YXIgeD0wO3g8ZG9qby5pby50cmFuc3BvcnRzLmxlbmd0aDt4Kyspew0KdmFyIHRtcD1kb2pvLmlvLnRyYW5zcG9ydHNbeF07DQppZigodGhpc1t0bXBdKSYmKHRoaXNbdG1wXS5jYW5IYW5kbGUoXzE1YSkpKXsNCl8xNWI9dG1wOw0KYnJlYWs7DQp9DQp9DQppZihfMTViPT0iIil7DQpkb2pvLmlvLnNlbmRCaW5kRXJyb3IoXzE1YSwiTm9uZSBvZiB0aGUgbG9hZGVkIHRyYW5zcG9ydHMgZm9yIGRvam8uaW8uYmluZCgpIisiIGNhbiBoYW5kbGUgdGhlIHJlcXVlc3QuIik7DQpyZXR1cm4gXzE1YTsNCn0NCn0NCnRoaXNbXzE1Yl0uYmluZChfMTVhKTsNCl8xNWEuYmluZFN1Y2Nlc3M9dHJ1ZTsNCnJldHVybiBfMTVhOw0KfTsNCmRvam8uaW8uc2VuZEJpbmRFcnJvcj1mdW5jdGlvbihfMTVlLF8xNWYpew0KaWYoKHR5cGVvZiBfMTVlLmVycm9yPT0iZnVuY3Rpb24ifHx0eXBlb2YgXzE1ZS5oYW5kbGU9PSJmdW5jdGlvbiIpJiYodHlwZW9mIHNldFRpbWVvdXQ9PSJmdW5jdGlvbiJ8fHR5cGVvZiBzZXRUaW1lb3V0PT0ib2JqZWN0Iikpew0KdmFyIF8xNjA9bmV3IGRvam8uaW8uRXJyb3IoXzE1Zik7DQpzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7DQpfMTVlWyh0eXBlb2YgXzE1ZS5lcnJvcj09ImZ1bmN0aW9uIik/ImVycm9yIjoiaGFuZGxlIl0oImVycm9yIixfMTYwLG51bGwsXzE1ZSk7DQp9LDUwKTsNCn1lbHNlew0KZG9qby5yYWlzZShfMTVmKTsNCn0NCn07DQpkb2pvLmlvLnF1ZXVlQmluZD1mdW5jdGlvbihfMTYxKXsNCmlmKCEoXzE2MSBpbnN0YW5jZW9mIGRvam8uaW8uUmVxdWVzdCkpew0KdHJ5ew0KXzE2MT1uZXcgZG9qby5pby5SZXF1ZXN0KF8xNjEpOw0KfQ0KY2F0Y2goZSl7DQpkb2pvLmRlYnVnKGUpOw0KfQ0KfQ0KdmFyIF8xNjI9XzE2MS5sb2FkOw0KXzE2MS5sb2FkPWZ1bmN0aW9uKCl7DQpkb2pvLmlvLl9xdWV1ZUJpbmRJbkZsaWdodD1mYWxzZTsNCnZhciByZXQ9XzE2Mi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7DQpkb2pvLmlvLl9kaXNwYXRjaE5leHRRdWV1ZUJpbmQoKTsNCnJldHVybiByZXQ7DQp9Ow0KdmFyIF8xNjQ9XzE2MS5lcnJvcjsNCl8xNjEuZXJyb3I9ZnVuY3Rpb24oKXsNCmRvam8uaW8uX3F1ZXVlQmluZEluRmxpZ2h0PWZhbHNlOw0KdmFyIHJldD1fMTY0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTsNCmRvam8uaW8uX2Rpc3BhdGNoTmV4dFF1ZXVlQmluZCgpOw0KcmV0dXJuIHJldDsNCn07DQpkb2pvLmlvLl9iaW5kUXVldWUucHVzaChfMTYxKTsNCmRvam8uaW8uX2Rpc3BhdGNoTmV4dFF1ZXVlQmluZCgpOw0KcmV0dXJuIF8xNjE7DQp9Ow0KZG9qby5pby5fZGlzcGF0Y2hOZXh0UXVldWVCaW5kPWZ1bmN0aW9uKCl7DQppZighZG9qby5pby5fcXVldWVCaW5kSW5GbGlnaHQpew0KZG9qby5pby5fcXVldWVCaW5kSW5GbGlnaHQ9dHJ1ZTsNCmlmKGRvam8uaW8uX2JpbmRRdWV1ZS5sZW5ndGg+MCl7DQpkb2pvLmlvLmJpbmQoZG9qby5pby5fYmluZFF1ZXVlLnNoaWZ0KCkpOw0KfWVsc2V7DQpkb2pvLmlvLl9xdWV1ZUJpbmRJbkZsaWdodD1mYWxzZTsNCn0NCn0NCn07DQpkb2pvLmlvLl9iaW5kUXVldWU9W107DQpkb2pvLmlvLl9xdWV1ZUJpbmRJbkZsaWdodD1mYWxzZTsNCmRvam8uaW8uYXJnc0Zyb21NYXA9ZnVuY3Rpb24obWFwLF8xNjcsbGFzdCl7DQp2YXIgZW5jPS91dGYvaS50ZXN0KF8xNjd8fCIiKT9lbmNvZGVVUklDb21wb25lbnQ6ZG9qby5zdHJpbmcuZW5jb2RlQXNjaWk7DQp2YXIgXzE2YT1bXTsNCnZhciBfMTZiPW5ldyBPYmplY3QoKTsNCmZvcih2YXIgbmFtZSBpbiBtYXApew0KdmFyIF8xNmQ9ZnVuY3Rpb24oZWx0KXsNCnZhciB2YWw9ZW5jKG5hbWUpKyI9IitlbmMoZWx0KTsNCl8xNmFbKGxhc3Q9PW5hbWUpPyJwdXNoIjoidW5zaGlmdCJdKHZhbCk7DQp9Ow0KaWYoIV8xNmJbbmFtZV0pew0KdmFyIF8xNzA9bWFwW25hbWVdOw0KaWYoZG9qby5sYW5nLmlzQXJyYXkoXzE3MCkpew0KZG9qby5sYW5nLmZvckVhY2goXzE3MCxfMTZkKTsNCn1lbHNlew0KXzE2ZChfMTcwKTsNCn0NCn0NCn0NCnJldHVybiBfMTZhLmpvaW4oIiYiKTsNCn07DQpkb2pvLmlvLnNldElGcmFtZVNyYz1mdW5jdGlvbihfMTcxLHNyYyxfMTczKXsNCnRyeXsNCnZhciByPWRvam8ucmVuZGVyLmh0bWw7DQppZighXzE3Myl7DQppZihyLnNhZmFyaSl7DQpfMTcxLmxvY2F0aW9uPXNyYzsNCn1lbHNlew0KZnJhbWVzW18xNzEubmFtZV0ubG9jYXRpb249c3JjOw0KfQ0KfWVsc2V7DQp2YXIgaWRvYzsNCmlmKHIuaWUpew0KaWRvYz1fMTcxLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7DQp9ZWxzZXsNCmlmKHIuc2FmYXJpKXsNCmlkb2M9XzE3MS5kb2N1bWVudDsNCn1lbHNlew0KaWRvYz1fMTcxLmNvbnRlbnRXaW5kb3c7DQp9DQp9DQppZighaWRvYyl7DQpfMTcxLmxvY2F0aW9uPXNyYzsNCnJldHVybjsNCn1lbHNlew0KaWRvYy5sb2NhdGlvbi5yZXBsYWNlKHNyYyk7DQp9DQp9DQp9DQpjYXRjaChlKXsNCmRvam8uZGVidWcoZSk7DQpkb2pvLmRlYnVnKCJzZXRJRnJhbWVTcmM6ICIrZSk7DQp9DQp9Ow0KZG9qby5wcm92aWRlKCJkb2pvLmxhbmcuYXJyYXkiKTsNCmRvam8ubGFuZy5oYXM9ZnVuY3Rpb24ob2JqLG5hbWUpew0KdHJ5ew0KcmV0dXJuIHR5cGVvZiBvYmpbbmFtZV0hPSJ1bmRlZmluZWQiOw0KfQ0KY2F0Y2goZSl7DQpyZXR1cm4gZmFsc2U7DQp9DQp9Ow0KZG9qby5sYW5nLmlzRW1wdHk9ZnVuY3Rpb24ob2JqKXsNCmlmKGRvam8ubGFuZy5pc09iamVjdChvYmopKXsNCnZhciB0bXA9e307DQp2YXIgXzE3YT0wOw0KZm9yKHZhciB4IGluIG9iail7DQppZihvYmpbeF0mJighdG1wW3hdKSl7DQpfMTdhKys7DQpicmVhazsNCn0NCn0NCnJldHVybiBfMTdhPT0wOw0KfWVsc2V7DQppZihkb2pvLmxhbmcuaXNBcnJheUxpa2Uob2JqKXx8ZG9qby5sYW5nLmlzU3RyaW5nKG9iaikpew0KcmV0dXJuIG9iai5sZW5ndGg9PTA7DQp9DQp9DQp9Ow0KZG9qby5sYW5nLm1hcD1mdW5jdGlvbihhcnIsb2JqLF8xN2Upew0KdmFyIF8xN2Y9ZG9qby5sYW5nLmlzU3RyaW5nKGFycik7DQppZihfMTdmKXsNCmFycj1hcnIuc3BsaXQoIiIpOw0KfQ0KaWYoZG9qby5sYW5nLmlzRnVuY3Rpb24ob2JqKSYmKCFfMTdlKSl7DQpfMTdlPW9iajsNCm9iaj1kal9nbG9iYWw7DQp9ZWxzZXsNCmlmKGRvam8ubGFuZy5pc0Z1bmN0aW9uKG9iaikmJl8xN2Upew0KdmFyIF8xODA9b2JqOw0Kb2JqPV8xN2U7DQpfMTdlPV8xODA7DQp9DQp9DQppZihBcnJheS5tYXApew0KdmFyIF8xODE9QXJyYXkubWFwKGFycixfMTdlLG9iaik7DQp9ZWxzZXsNCnZhciBfMTgxPVtdOw0KZm9yKHZhciBpPTA7aTxhcnIubGVuZ3RoOysraSl7DQpfMTgxLnB1c2goXzE3ZS5jYWxsKG9iaixhcnJbaV0pKTsNCn0NCn0NCmlmKF8xN2Ypew0KcmV0dXJuIF8xODEuam9pbigiIik7DQp9ZWxzZXsNCnJldHVybiBfMTgxOw0KfQ0KfTsNCmRvam8ubGFuZy5yZWR1Y2U9ZnVuY3Rpb24oYXJyLF8xODQsb2JqLF8xODYpew0KdmFyIF8xODc9XzE4NDsNCnZhciBvYj1vYmo/b2JqOmRqX2dsb2JhbDsNCmRvam8ubGFuZy5tYXAoYXJyLGZ1bmN0aW9uKHZhbCl7DQpfMTg3PV8xODYuY2FsbChvYixfMTg3LHZhbCk7DQp9KTsNCnJldHVybiBfMTg3Ow0KfTsNCmRvam8ubGFuZy5mb3JFYWNoPWZ1bmN0aW9uKF8xOGEsXzE4YixfMThjKXsNCmlmKGRvam8ubGFuZy5pc1N0cmluZyhfMThhKSl7DQpfMThhPV8xOGEuc3BsaXQoIiIpOw0KfQ0KaWYoQXJyYXkuZm9yRWFjaCl7DQpBcnJheS5mb3JFYWNoKF8xOGEsXzE4YixfMThjKTsNCn1lbHNlew0KaWYoIV8xOGMpew0KXzE4Yz1kal9nbG9iYWw7DQp9DQpmb3IodmFyIGk9MCxsPV8xOGEubGVuZ3RoO2k8bDtpKyspew0KXzE4Yi5jYWxsKF8xOGMsXzE4YVtpXSxpLF8xOGEpOw0KfQ0KfQ0KfTsNCmRvam8ubGFuZy5fZXZlcnlPclNvbWU9ZnVuY3Rpb24oXzE4ZixhcnIsXzE5MSxfMTkyKXsNCmlmKGRvam8ubGFuZy5pc1N0cmluZyhhcnIpKXsNCmFycj1hcnIuc3BsaXQoIiIpOw0KfQ0KaWYoQXJyYXkuZXZlcnkpew0KcmV0dXJuIEFycmF5W18xOGY/ImV2ZXJ5Ijoic29tZSJdKGFycixfMTkxLF8xOTIpOw0KfWVsc2V7DQppZighXzE5Mil7DQpfMTkyPWRqX2dsb2JhbDsNCn0NCmZvcih2YXIgaT0wLGw9YXJyLmxlbmd0aDtpPGw7aSsrKXsNCnZhciBfMTk1PV8xOTEuY2FsbChfMTkyLGFycltpXSxpLGFycik7DQppZihfMThmJiYhXzE5NSl7DQpyZXR1cm4gZmFsc2U7DQp9ZWxzZXsNCmlmKCghXzE4ZikmJihfMTk1KSl7DQpyZXR1cm4gdHJ1ZTsNCn0NCn0NCn0NCnJldHVybiBCb29sZWFuKF8xOGYpOw0KfQ0KfTsNCmRvam8ubGFuZy5ldmVyeT1mdW5jdGlvbihhcnIsXzE5NyxfMTk4KXsNCnJldHVybiB0aGlzLl9ldmVyeU9yU29tZSh0cnVlLGFycixfMTk3LF8xOTgpOw0KfTsNCmRvam8ubGFuZy5zb21lPWZ1bmN0aW9uKGFycixfMTlhLF8xOWIpew0KcmV0dXJuIHRoaXMuX2V2ZXJ5T3JTb21lKGZhbHNlLGFycixfMTlhLF8xOWIpOw0KfTsNCmRvam8ubGFuZy5maWx0ZXI9ZnVuY3Rpb24oYXJyLF8xOWQsXzE5ZSl7DQp2YXIgXzE5Zj1kb2pvLmxhbmcuaXNTdHJpbmcoYXJyKTsNCmlmKF8xOWYpew0KYXJyPWFyci5zcGxpdCgiIik7DQp9DQp2YXIgXzFhMDsNCmlmKEFycmF5LmZpbHRlcil7DQpfMWEwPUFycmF5LmZpbHRlcihhcnIsXzE5ZCxfMTllKTsNCn1lbHNlew0KaWYoIV8xOWUpew0KaWYoYXJndW1lbnRzLmxlbmd0aD49Myl7DQpkb2pvLnJhaXNlKCJ0aGlzT2JqZWN0IGRvZXNuJ3QgZXhpc3QhIik7DQp9DQpfMTllPWRqX2dsb2JhbDsNCn0NCl8xYTA9W107DQpmb3IodmFyIGk9MDtpPGFyci5sZW5ndGg7aSsrKXsNCmlmKF8xOWQuY2FsbChfMTllLGFycltpXSxpLGFycikpew0KXzFhMC5wdXNoKGFycltpXSk7DQp9DQp9DQp9DQppZihfMTlmKXsNCnJldHVybiBfMWEwLmpvaW4oIiIpOw0KfWVsc2V7DQpyZXR1cm4gXzFhMDsNCn0NCn07DQpkb2pvLmxhbmcudW5uZXN0PWZ1bmN0aW9uKCl7DQp2YXIgb3V0PVtdOw0KZm9yKHZhciBpPTA7aTxhcmd1bWVudHMubGVuZ3RoO2krKyl7DQppZihkb2pvLmxhbmcuaXNBcnJheUxpa2UoYXJndW1lbnRzW2ldKSl7DQp2YXIgYWRkPWRvam8ubGFuZy51bm5lc3QuYXBwbHkodGhpcyxhcmd1bWVudHNbaV0pOw0Kb3V0PW91dC5jb25jYXQoYWRkKTsNCn1lbHNlew0Kb3V0LnB1c2goYXJndW1lbnRzW2ldKTsNCn0NCn0NCnJldHVybiBvdXQ7DQp9Ow0KZG9qby5sYW5nLnRvQXJyYXk9ZnVuY3Rpb24oXzFhNSxfMWE2KXsNCnZhciBfMWE3PVtdOw0KZm9yKHZhciBpPV8xYTZ8fDA7aTxfMWE1Lmxlbmd0aDtpKyspew0KXzFhNy5wdXNoKF8xYTVbaV0pOw0KfQ0KcmV0dXJuIF8xYTc7DQp9Ow0KZG9qby5wcm92aWRlKCJkb2pvLmxhbmcuZnVuYyIpOw0KZG9qby5sYW5nLmhpdGNoPWZ1bmN0aW9uKF8xYTksXzFhYSl7DQp2YXIgZmNuPShkb2pvLmxhbmcuaXNTdHJpbmcoXzFhYSk/XzFhOVtfMWFhXTpfMWFhKXx8ZnVuY3Rpb24oKXsNCn07DQpyZXR1cm4gZnVuY3Rpb24oKXsNCnJldHVybiBmY24uYXBwbHkoXzFhOSxhcmd1bWVudHMpOw0KfTsNCn07DQpkb2pvLmxhbmcuYW5vbkN0cj0wOw0KZG9qby5sYW5nLmFub249e307DQpkb2pvLmxhbmcubmFtZUFub25GdW5jPWZ1bmN0aW9uKF8xYWMsXzFhZCxfMWFlKXsNCnZhciBuc289KF8xYWR8fGRvam8ubGFuZy5hbm9uKTsNCmlmKChfMWFlKXx8KChkal9nbG9iYWxbImRqQ29uZmlnIl0pJiYoZGpDb25maWdbInNsb3dBbm9uRnVuY0xvb2t1cHMiXT09dHJ1ZSkpKXsNCmZvcih2YXIgeCBpbiBuc28pew0KdHJ5ew0KaWYobnNvW3hdPT09XzFhYyl7DQpyZXR1cm4geDsNCn0NCn0NCmNhdGNoKGUpew0KfQ0KfQ0KfQ0KdmFyIHJldD0iX18iK2Rvam8ubGFuZy5hbm9uQ3RyKys7DQp3aGlsZSh0eXBlb2YgbnNvW3JldF0hPSJ1bmRlZmluZWQiKXsNCnJldD0iX18iK2Rvam8ubGFuZy5hbm9uQ3RyKys7DQp9DQpuc29bcmV0XT1fMWFjOw0KcmV0dXJuIHJldDsNCn07DQpkb2pvLmxhbmcuZm9yd2FyZD1mdW5jdGlvbihfMWIyKXsNCnJldHVybiBmdW5jdGlvbigpew0KcmV0dXJuIHRoaXNbXzFiMl0uYXBwbHkodGhpcyxhcmd1bWVudHMpOw0KfTsNCn07DQpkb2pvLmxhbmcuY3Vycnk9ZnVuY3Rpb24obnMsZnVuYyl7DQp2YXIgXzFiNT1bXTsNCm5zPW5zfHxkal9nbG9iYWw7DQppZihkb2pvLmxhbmcuaXNTdHJpbmcoZnVuYykpew0KZnVuYz1uc1tmdW5jXTsNCn0NCmZvcih2YXIgeD0yO3g8YXJndW1lbnRzLmxlbmd0aDt4Kyspew0KXzFiNS5wdXNoKGFyZ3VtZW50c1t4XSk7DQp9DQp2YXIgXzFiNz0oZnVuY1siX19wcmVKb2luQXJpdHkiXXx8ZnVuYy5sZW5ndGgpLV8xYjUubGVuZ3RoOw0KZnVuY3Rpb24gZ2F0aGVyKF8xYjgsXzFiOSxfMWJhKXsNCnZhciBfMWJiPV8xYmE7DQp2YXIgXzFiYz1fMWI5LnNsaWNlKDApOw0KZm9yKHZhciB4PTA7eDxfMWI4Lmxlbmd0aDt4Kyspew0KXzFiYy5wdXNoKF8xYjhbeF0pOw0KfQ0KXzFiYT1fMWJhLV8xYjgubGVuZ3RoOw0KaWYoXzFiYTw9MCl7DQp2YXIgcmVzPWZ1bmMuYXBwbHkobnMsXzFiYyk7DQpfMWJhPV8xYmI7DQpyZXR1cm4gcmVzOw0KfWVsc2V7DQpyZXR1cm4gZnVuY3Rpb24oKXsNCnJldHVybiBnYXRoZXIoYXJndW1lbnRzLF8xYmMsXzFiYSk7DQp9Ow0KfQ0KfQ0KcmV0dXJuIGdhdGhlcihbXSxfMWI1LF8xYjcpOw0KfTsNCmRvam8ubGFuZy5jdXJyeUFyZ3VtZW50cz1mdW5jdGlvbihucyxmdW5jLGFyZ3MsXzFjMil7DQp2YXIgXzFjMz1bXTsNCnZhciB4PV8xYzJ8fDA7DQpmb3IoeD1fMWMyO3g8YXJncy5sZW5ndGg7eCsrKXsNCl8xYzMucHVzaChhcmdzW3hdKTsNCn0NCnJldHVybiBkb2pvLmxhbmcuY3VycnkuYXBwbHkoZG9qby5sYW5nLFtucyxmdW5jXS5jb25jYXQoXzFjMykpOw0KfTsNCmRvam8ubGFuZy50cnlUaGVzZT1mdW5jdGlvbigpew0KZm9yKHZhciB4PTA7eDxhcmd1bWVudHMubGVuZ3RoO3grKyl7DQp0cnl7DQppZih0eXBlb2YgYXJndW1lbnRzW3hdPT0iZnVuY3Rpb24iKXsNCnZhciByZXQ9KGFyZ3VtZW50c1t4XSgpKTsNCmlmKHJldCl7DQpyZXR1cm4gcmV0Ow0KfQ0KfQ0KfQ0KY2F0Y2goZSl7DQpkb2pvLmRlYnVnKGUpOw0KfQ0KfQ0KfTsNCmRvam8ubGFuZy5kZWxheVRoZXNlPWZ1bmN0aW9uKGZhcnIsY2IsXzFjOSxfMWNhKXsNCmlmKCFmYXJyLmxlbmd0aCl7DQppZih0eXBlb2YgXzFjYT09ImZ1bmN0aW9uIil7DQpfMWNhKCk7DQp9DQpyZXR1cm47DQp9DQppZigodHlwZW9mIF8xYzk9PSJ1bmRlZmluZWQiKSYmKHR5cGVvZiBjYj09Im51bWJlciIpKXsNCl8xYzk9Y2I7DQpjYj1mdW5jdGlvbigpew0KfTsNCn1lbHNlew0KaWYoIWNiKXsNCmNiPWZ1bmN0aW9uKCl7DQp9Ow0KaWYoIV8xYzkpew0KXzFjOT0wOw0KfQ0KfQ0KfQ0Kc2V0VGltZW91dChmdW5jdGlvbigpew0KKGZhcnIuc2hpZnQoKSkoKTsNCmNiKCk7DQpkb2pvLmxhbmcuZGVsYXlUaGVzZShmYXJyLGNiLF8xYzksXzFjYSk7DQp9LF8xYzkpOw0KfTsNCmRvam8ucHJvdmlkZSgiZG9qby5zdHJpbmcuZXh0cmFzIik7DQpkb2pvLnN0cmluZy5zdWJzdGl0dXRlUGFyYW1zPWZ1bmN0aW9uKF8xY2IsaGFzaCl7DQp2YXIgbWFwPSh0eXBlb2YgaGFzaD09Im9iamVjdCIpP2hhc2g6ZG9qby5sYW5nLnRvQXJyYXkoYXJndW1lbnRzLDEpOw0KcmV0dXJuIF8xY2IucmVwbGFjZSgvXCVceyhcdyspXH0vZyxmdW5jdGlvbihfMWNlLGtleSl7DQppZih0eXBlb2YgKG1hcFtrZXldKSE9InVuZGVmaW5lZCImJm1hcFtrZXldIT1udWxsKXsNCnJldHVybiBtYXBba2V5XTsNCn0NCmRvam8ucmFpc2UoIlN1YnN0aXR1dGlvbiBub3QgZm91bmQ6ICIra2V5KTsNCn0pOw0KfTsNCmRvam8uc3RyaW5nLmNhcGl0YWxpemU9ZnVuY3Rpb24oc3RyKXsNCmlmKCFkb2pvLmxhbmcuaXNTdHJpbmcoc3RyKSl7DQpyZXR1cm4gIiI7DQp9DQppZihhcmd1bWVudHMubGVuZ3RoPT0wKXsNCnN0cj10aGlzOw0KfQ0KdmFyIF8xZDE9c3RyLnNwbGl0KCIgIik7DQpmb3IodmFyIGk9MDtpPF8xZDEubGVuZ3RoO2krKyl7DQpfMWQxW2ldPV8xZDFbaV0uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrXzFkMVtpXS5zdWJzdHJpbmcoMSk7DQp9DQpyZXR1cm4gXzFkMS5qb2luKCIgIik7DQp9Ow0KZG9qby5zdHJpbmcuaXNCbGFuaz1mdW5jdGlvbihzdHIpew0KaWYoIWRvam8ubGFuZy5pc1N0cmluZyhzdHIpKXsNCnJldHVybiB0cnVlOw0KfQ0KcmV0dXJuIChkb2pvLnN0cmluZy50cmltKHN0cikubGVuZ3RoPT0wKTsNCn07DQpkb2pvLnN0cmluZy5lbmNvZGVBc2NpaT1mdW5jdGlvbihzdHIpew0KaWYoIWRvam8ubGFuZy5pc1N0cmluZyhzdHIpKXsNCnJldHVybiBzdHI7DQp9DQp2YXIgcmV0PSIiOw0KdmFyIF8xZDY9ZW5jb2RlVVJJQ29tcG9uZW50KHN0cik7DQp2YXIgXzFkNyxyZT0vJXUoWzAtOUEtRl17NH0pL2k7DQp3aGlsZSgoXzFkNz1fMWQ2Lm1hdGNoKHJlKSkpew0KdmFyIG51bT1OdW1iZXIoIjB4IitfMWQ3WzFdKTsNCnZhciBfMWRhPWVuY29kZVVSSUNvbXBvbmVudCgiJiMiK251bSsiOyIpOw0KcmV0Kz1fMWQ2LnN1YnN0cmluZygwLF8xZDcuaW5kZXgpK18xZGE7DQpfMWQ2PV8xZDYuc3Vic3RyaW5nKF8xZDcuaW5kZXgrXzFkN1swXS5sZW5ndGgpOw0KfQ0KcmV0Kz1fMWQ2LnJlcGxhY2UoL1wrL2csIiUyQiIpOw0KcmV0dXJuIHJldDsNCn07DQpkb2pvLnN0cmluZy5lc2NhcGU9ZnVuY3Rpb24odHlwZSxzdHIpew0KdmFyIGFyZ3M9ZG9qby5sYW5nLnRvQXJyYXkoYXJndW1lbnRzLDEpOw0Kc3dpdGNoKHR5cGUudG9Mb3dlckNhc2UoKSl7DQpjYXNlICJ4bWwiOg0KY2FzZSAiaHRtbCI6DQpjYXNlICJ4aHRtbCI6DQpyZXR1cm4gZG9qby5zdHJpbmcuZXNjYXBlWG1sLmFwcGx5KHRoaXMsYXJncyk7DQpjYXNlICJzcWwiOg0KcmV0dXJuIGRvam8uc3RyaW5nLmVzY2FwZVNxbC5hcHBseSh0aGlzLGFyZ3MpOw0KY2FzZSAicmVnZXhwIjoNCmNhc2UgInJlZ2V4IjoNCnJldHVybiBkb2pvLnN0cmluZy5lc2NhcGVSZWdFeHAuYXBwbHkodGhpcyxhcmdzKTsNCmNhc2UgImphdmFzY3JpcHQiOg0KY2FzZSAianNjcmlwdCI6DQpjYXNlICJqcyI6DQpyZXR1cm4gZG9qby5zdHJpbmcuZXNjYXBlSmF2YVNjcmlwdC5hcHBseSh0aGlzLGFyZ3MpOw0KY2FzZSAiYXNjaWkiOg0KcmV0dXJuIGRvam8uc3RyaW5nLmVuY29kZUFzY2lpLmFwcGx5KHRoaXMsYXJncyk7DQpkZWZhdWx0Og0KcmV0dXJuIHN0cjsNCn0NCn07DQpkb2pvLnN0cmluZy5lc2NhcGVYbWw9ZnVuY3Rpb24oc3RyLF8xZGYpew0Kc3RyPXN0ci5yZXBsYWNlKC8mL2dtLCImYW1wOyIpLnJlcGxhY2UoLzwvZ20sIiZsdDsiKS5yZXBsYWNlKC8+L2dtLCImZ3Q7IikucmVwbGFjZSgvIi9nbSwiJnF1b3Q7Iik7DQppZighXzFkZil7DQpzdHI9c3RyLnJlcGxhY2UoLycvZ20sIiYjMzk7Iik7DQp9DQpyZXR1cm4gc3RyOw0KfTsNCmRvam8uc3RyaW5nLmVzY2FwZVNxbD1mdW5jdGlvbihzdHIpew0KcmV0dXJuIHN0ci5yZXBsYWNlKC8nL2dtLCInJyIpOw0KfTsNCmRvam8uc3RyaW5nLmVzY2FwZVJlZ0V4cD1mdW5jdGlvbihzdHIpew0KcmV0dXJuIHN0ci5yZXBsYWNlKC9cXC9nbSwiXFxcXCIpLnJlcGxhY2UoLyhbXGZcYlxuXHRccltcXiR8PyorKCl7fV0pL2dtLCJcXCQxIik7DQp9Ow0KZG9qby5zdHJpbmcuZXNjYXBlSmF2YVNjcmlwdD1mdW5jdGlvbihzdHIpew0KcmV0dXJuIHN0ci5yZXBsYWNlKC8oWyInXGZcYlxuXHRccl0pL2dtLCJcXCQxIik7DQp9Ow0KZG9qby5zdHJpbmcuZXNjYXBlU3RyaW5nPWZ1bmN0aW9uKHN0cil7DQpyZXR1cm4gKCJcIiIrc3RyLnJlcGxhY2UoLyhbIlxcXSkvZywiXFwkMSIpKyJcIiIpLnJlcGxhY2UoL1tcZl0vZywiXFxmIikucmVwbGFjZSgvW1xiXS9nLCJcXGIiKS5yZXBsYWNlKC9bXG5dL2csIlxcbiIpLnJlcGxhY2UoL1tcdF0vZywiXFx0IikucmVwbGFjZSgvW1xyXS9nLCJcXHIiKTsNCn07DQpkb2pvLnN0cmluZy5zdW1tYXJ5PWZ1bmN0aW9uKHN0cixsZW4pew0KaWYoIWxlbnx8c3RyLmxlbmd0aDw9bGVuKXsNCnJldHVybiBzdHI7DQp9DQpyZXR1cm4gc3RyLnN1YnN0cmluZygwLGxlbikucmVwbGFjZSgvXC4rJC8sIiIpKyIuLi4iOw0KfTsNCmRvam8uc3RyaW5nLmVuZHNXaXRoPWZ1bmN0aW9uKHN0cixlbmQsXzFlOCl7DQppZihfMWU4KXsNCnN0cj1zdHIudG9Mb3dlckNhc2UoKTsNCmVuZD1lbmQudG9Mb3dlckNhc2UoKTsNCn0NCmlmKChzdHIubGVuZ3RoLWVuZC5sZW5ndGgpPDApew0KcmV0dXJuIGZhbHNlOw0KfQ0KcmV0dXJuIHN0ci5sYXN0SW5kZXhPZihlbmQpPT1zdHIubGVuZ3RoLWVuZC5sZW5ndGg7DQp9Ow0KZG9qby5zdHJpbmcuZW5kc1dpdGhBbnk9ZnVuY3Rpb24oc3RyKXsNCmZvcih2YXIgaT0xO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspew0KaWYoZG9qby5zdHJpbmcuZW5kc1dpdGgoc3RyLGFyZ3VtZW50c1tpXSkpew0KcmV0dXJuIHRydWU7DQp9DQp9DQpyZXR1cm4gZmFsc2U7DQp9Ow0KZG9qby5zdHJpbmcuc3RhcnRzV2l0aD1mdW5jdGlvbihzdHIsXzFlYyxfMWVkKXsNCmlmKF8xZWQpew0Kc3RyPXN0ci50b0xvd2VyQ2FzZSgpOw0KXzFlYz1fMWVjLnRvTG93ZXJDYXNlKCk7DQp9DQpyZXR1cm4gc3RyLmluZGV4T2YoXzFlYyk9PTA7DQp9Ow0KZG9qby5zdHJpbmcuc3RhcnRzV2l0aEFueT1mdW5jdGlvbihzdHIpew0KZm9yKHZhciBpPTE7aTxhcmd1bWVudHMubGVuZ3RoO2krKyl7DQppZihkb2pvLnN0cmluZy5zdGFydHNXaXRoKHN0cixhcmd1bWVudHNbaV0pKXsNCnJldHVybiB0cnVlOw0KfQ0KfQ0KcmV0dXJuIGZhbHNlOw0KfTsNCmRvam8uc3RyaW5nLmhhcz1mdW5jdGlvbihzdHIpew0KZm9yKHZhciBpPTE7aTxhcmd1bWVudHMubGVuZ3RoO2krKyl7DQppZihzdHIuaW5kZXhPZihhcmd1bWVudHNbaV0pPi0xKXsNCnJldHVybiB0cnVlOw0KfQ0KfQ0KcmV0dXJuIGZhbHNlOw0KfTsNCmRvam8uc3RyaW5nLm5vcm1hbGl6ZU5ld2xpbmVzPWZ1bmN0aW9uKHRleHQsXzFmMyl7DQppZihfMWYzPT0iXG4iKXsNCnRleHQ9dGV4dC5yZXBsYWNlKC9cclxuL2csIlxuIik7DQp0ZXh0PXRleHQucmVwbGFjZSgvXHIvZywiXG4iKTsNCn1lbHNlew0KaWYoXzFmMz09IlxyIil7DQp0ZXh0PXRleHQucmVwbGFjZSgvXHJcbi9nLCJcciIpOw0KdGV4dD10ZXh0LnJlcGxhY2UoL1xuL2csIlxyIik7DQp9ZWxzZXsNCnRleHQ9dGV4dC5yZXBsYWNlKC8oW15ccl0pXG4vZywiJDFcclxuIikucmVwbGFjZSgvXHIoW15cbl0pL2csIlxyXG4kMSIpOw0KfQ0KfQ0KcmV0dXJuIHRleHQ7DQp9Ow0KZG9qby5zdHJpbmcuc3BsaXRFc2NhcGVkPWZ1bmN0aW9uKHN0cixfMWY1KXsNCnZhciBfMWY2PVtdOw0KZm9yKHZhciBpPTAsXzFmOD0wO2k8c3RyLmxlbmd0aDtpKyspew0KaWYoc3RyLmNoYXJBdChpKT09IlxcIil7DQppKys7DQpjb250aW51ZTsNCn0NCmlmKHN0ci5jaGFyQXQoaSk9PV8xZjUpew0KXzFmNi5wdXNoKHN0ci5zdWJzdHJpbmcoXzFmOCxpKSk7DQpfMWY4PWkrMTsNCn0NCn0NCl8xZjYucHVzaChzdHIuc3Vic3RyKF8xZjgpKTsNCnJldHVybiBfMWY2Ow0KfTsNCmRvam8ucHJvdmlkZSgiZG9qby5kb20iKTsNCmRvam8uZG9tLkVMRU1FTlRfTk9ERT0xOw0KZG9qby5kb20uQVRUUklCVVRFX05PREU9MjsNCmRvam8uZG9tLlRFWFRfTk9ERT0zOw0KZG9qby5kb20uQ0RBVEFfU0VDVElPTl9OT0RFPTQ7DQpkb2pvLmRvbS5FTlRJVFlfUkVGRVJFTkNFX05PREU9NTsNCmRvam8uZG9tLkVOVElUWV9OT0RFPTY7DQpkb2pvLmRvbS5QUk9DRVNTSU5HX0lOU1RSVUNUSU9OX05PREU9NzsNCmRvam8uZG9tLkNPTU1FTlRfTk9ERT04Ow0KZG9qby5kb20uRE9DVU1FTlRfTk9ERT05Ow0KZG9qby5kb20uRE9DVU1FTlRfVFlQRV9OT0RFPTEwOw0KZG9qby5kb20uRE9DVU1FTlRfRlJBR01FTlRfTk9ERT0xMTsNCmRvam8uZG9tLk5PVEFUSU9OX05PREU9MTI7DQpkb2pvLmRvbS5kb2pvbWw9Imh0dHA6Ly93d3cuZG9qb3Rvb2xraXQub3JnLzIwMDQvZG9qb21sIjsNCmRvam8uZG9tLnhtbG5zPXtzdmc6Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIixzbWlsOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1NNSUwyMC8iLG1tbDoiaHR0cDovL3d3dy53My5vcmcvMTk5OC9NYXRoL01hdGhNTCIsY21sOiJodHRwOi8vd3d3LnhtbC1jbWwub3JnIix4bGluazoiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIseGh0bWw6Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiLHh1bDoiaHR0cDovL3d3dy5tb3ppbGxhLm9yZy9rZXltYXN0ZXIvZ2F0ZWtlZXBlci90aGVyZS5pcy5vbmx5Lnh1bCIseGJsOiJodHRwOi8vd3d3Lm1vemlsbGEub3JnL3hibCIsZm86Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvWFNML0Zvcm1hdCIseHNsOiJodHRwOi8vd3d3LnczLm9yZy8xOTk5L1hTTC9UcmFuc2Zvcm0iLHhzbHQ6Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvWFNML1RyYW5zZm9ybSIseGk6Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWEluY2x1ZGUiLHhmb3JtczoiaHR0cDovL3d3dy53My5vcmcvMjAwMi8wMS94Zm9ybXMiLHNheG9uOiJodHRwOi8vaWNsLmNvbS9zYXhvbiIseGFsYW46Imh0dHA6Ly94bWwuYXBhY2hlLm9yZy94c2x0Iix4c2Q6Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hIixkdDoiaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtZGF0YXR5cGVzIix4c2k6Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIixyZGY6Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiLHJkZnM6Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvMDEvcmRmLXNjaGVtYSMiLGRjOiJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIsZGNxOiJodHRwOi8vcHVybC5vcmcvZGMvcXVhbGlmaWVycy8xLjAiLCJzb2FwLWVudiI6Imh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3NvYXAvZW52ZWxvcGUvIix3c2RsOiJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93c2RsLyIsQWRvYmVFeHRlbnNpb25zOiJodHRwOi8vbnMuYWRvYmUuY29tL0Fkb2JlU1ZHVmlld2VyRXh0ZW5zaW9ucy8zLjAvIn07DQpkb2pvLmRvbS5pc05vZGU9ZnVuY3Rpb24od2gpew0KaWYodHlwZW9mIEVsZW1lbnQ9PSJmdW5jdGlvbiIpew0KdHJ5ew0KcmV0dXJuIHdoIGluc3RhbmNlb2YgRWxlbWVudDsNCn0NCmNhdGNoKEUpew0KfQ0KfWVsc2V7DQpyZXR1cm4gd2gmJiFpc05hTih3aC5ub2RlVHlwZSk7DQp9DQp9Ow0KZG9qby5kb20uZ2V0VW5pcXVlSWQ9ZnVuY3Rpb24oKXsNCnZhciBfMWZhPWRvam8uZG9jKCk7DQpkb3sNCnZhciBpZD0iZGpfdW5pcXVlXyIrKCsrYXJndW1lbnRzLmNhbGxlZS5faWRJbmNyZW1lbnQpOw0KfXdoaWxlKF8xZmEuZ2V0RWxlbWVudEJ5SWQoaWQpKTsNCnJldHVybiBpZDsNCn07DQpkb2pvLmRvbS5nZXRVbmlxdWVJZC5faWRJbmNyZW1lbnQ9MDsNCmRvam8uZG9tLmZpcnN0RWxlbWVudD1kb2pvLmRvbS5nZXRGaXJzdENoaWxkRWxlbWVudD1mdW5jdGlvbihfMWZjLF8xZmQpew0KdmFyIG5vZGU9XzFmYy5maXJzdENoaWxkOw0Kd2hpbGUobm9kZSYmbm9kZS5ub2RlVHlwZSE9ZG9qby5kb20uRUxFTUVOVF9OT0RFKXsNCm5vZGU9bm9kZS5uZXh0U2libGluZzsNCn0NCmlmKF8xZmQmJm5vZGUmJm5vZGUudGFnTmFtZSYmbm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCkhPV8xZmQudG9Mb3dlckNhc2UoKSl7DQpub2RlPWRvam8uZG9tLm5leHRFbGVtZW50KG5vZGUsXzFmZCk7DQp9DQpyZXR1cm4gbm9kZTsNCn07DQpkb2pvLmRvbS5sYXN0RWxlbWVudD1kb2pvLmRvbS5nZXRMYXN0Q2hpbGRFbGVtZW50PWZ1bmN0aW9uKF8xZmYsXzIwMCl7DQp2YXIgbm9kZT1fMWZmLmxhc3RDaGlsZDsNCndoaWxlKG5vZGUmJm5vZGUubm9kZVR5cGUhPWRvam8uZG9tLkVMRU1FTlRfTk9ERSl7DQpub2RlPW5vZGUucHJldmlvdXNTaWJsaW5nOw0KfQ0KaWYoXzIwMCYmbm9kZSYmbm9kZS50YWdOYW1lJiZub2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKSE9XzIwMC50b0xvd2VyQ2FzZSgpKXsNCm5vZGU9ZG9qby5kb20ucHJldkVsZW1lbnQobm9kZSxfMjAwKTsNCn0NCnJldHVybiBub2RlOw0KfTsNCmRvam8uZG9tLm5leHRFbGVtZW50PWRvam8uZG9tLmdldE5leHRTaWJsaW5nRWxlbWVudD1mdW5jdGlvbihub2RlLF8yMDMpew0KaWYoIW5vZGUpew0KcmV0dXJuIG51bGw7DQp9DQpkb3sNCm5vZGU9bm9kZS5uZXh0U2libGluZzsNCn13aGlsZShub2RlJiZub2RlLm5vZGVUeXBlIT1kb2pvLmRvbS5FTEVNRU5UX05PREUpOw0KaWYobm9kZSYmXzIwMyYmXzIwMy50b0xvd2VyQ2FzZSgpIT1ub2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKSl7DQpyZXR1cm4gZG9qby5kb20ubmV4dEVsZW1lbnQobm9kZSxfMjAzKTsNCn0NCnJldHVybiBub2RlOw0KfTsNCmRvam8uZG9tLnByZXZFbGVtZW50PWRvam8uZG9tLmdldFByZXZpb3VzU2libGluZ0VsZW1lbnQ9ZnVuY3Rpb24obm9kZSxfMjA1KXsNCmlmKCFub2RlKXsNCnJldHVybiBudWxsOw0KfQ0KaWYoXzIwNSl7DQpfMjA1PV8yMDUudG9Mb3dlckNhc2UoKTsNCn0NCmRvew0Kbm9kZT1ub2RlLnByZXZpb3VzU2libGluZzsNCn13aGlsZShub2RlJiZub2RlLm5vZGVUeXBlIT1kb2pvLmRvbS5FTEVNRU5UX05PREUpOw0KaWYobm9kZSYmXzIwNSYmXzIwNS50b0xvd2VyQ2FzZSgpIT1ub2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKSl7DQpyZXR1cm4gZG9qby5kb20ucHJldkVsZW1lbnQobm9kZSxfMjA1KTsNCn0NCnJldHVybiBub2RlOw0KfTsNCmRvam8uZG9tLm1vdmVDaGlsZHJlbj1mdW5jdGlvbihfMjA2LF8yMDcsdHJpbSl7DQp2YXIgXzIwOT0wOw0KaWYodHJpbSl7DQp3aGlsZShfMjA2Lmhhc0NoaWxkTm9kZXMoKSYmXzIwNi5maXJzdENoaWxkLm5vZGVUeXBlPT1kb2pvLmRvbS5URVhUX05PREUpew0KXzIwNi5yZW1vdmVDaGlsZChfMjA2LmZpcnN0Q2hpbGQpOw0KfQ0Kd2hpbGUoXzIwNi5oYXNDaGlsZE5vZGVzKCkmJl8yMDYubGFzdENoaWxkLm5vZGVUeXBlPT1kb2pvLmRvbS5URVhUX05PREUpew0KXzIwNi5yZW1vdmVDaGlsZChfMjA2Lmxhc3RDaGlsZCk7DQp9DQp9DQp3aGlsZShfMjA2Lmhhc0NoaWxkTm9kZXMoKSl7DQpfMjA3LmFwcGVuZENoaWxkKF8yMDYuZmlyc3RDaGlsZCk7DQpfMjA5Kys7DQp9DQpyZXR1cm4gXzIwOTsNCn07DQpkb2pvLmRvbS5jb3B5Q2hpbGRyZW49ZnVuY3Rpb24oXzIwYSxfMjBiLHRyaW0pew0KdmFyIF8yMGQ9XzIwYS5jbG9uZU5vZGUodHJ1ZSk7DQpyZXR1cm4gdGhpcy5tb3ZlQ2hpbGRyZW4oXzIwZCxfMjBiLHRyaW0pOw0KfTsNCmRvam8uZG9tLnJlbW92ZUNoaWxkcmVuPWZ1bmN0aW9uKG5vZGUpew0KdmFyIF8yMGY9bm9kZS5jaGlsZE5vZGVzLmxlbmd0aDsNCndoaWxlKG5vZGUuaGFzQ2hpbGROb2RlcygpKXsNCm5vZGUucmVtb3ZlQ2hpbGQobm9kZS5maXJzdENoaWxkKTsNCn0NCnJldHVybiBfMjBmOw0KfTsNCmRvam8uZG9tLnJlcGxhY2VDaGlsZHJlbj1mdW5jdGlvbihub2RlLF8yMTEpew0KZG9qby5kb20ucmVtb3ZlQ2hpbGRyZW4obm9kZSk7DQpub2RlLmFwcGVuZENoaWxkKF8yMTEpOw0KfTsNCmRvam8uZG9tLnJlbW92ZU5vZGU9ZnVuY3Rpb24obm9kZSl7DQppZihub2RlJiZub2RlLnBhcmVudE5vZGUpew0KcmV0dXJuIG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTsNCn0NCn07DQpkb2pvLmRvbS5nZXRBbmNlc3RvcnM9ZnVuY3Rpb24obm9kZSxfMjE0LF8yMTUpew0KdmFyIF8yMTY9W107DQp2YXIgXzIxNz0oXzIxNCYmKF8yMTQgaW5zdGFuY2VvZiBGdW5jdGlvbnx8dHlwZW9mIF8yMTQ9PSJmdW5jdGlvbiIpKTsNCndoaWxlKG5vZGUpew0KaWYoIV8yMTd8fF8yMTQobm9kZSkpew0KXzIxNi5wdXNoKG5vZGUpOw0KfQ0KaWYoXzIxNSYmXzIxNi5sZW5ndGg+MCl7DQpyZXR1cm4gXzIxNlswXTsNCn0NCm5vZGU9bm9kZS5wYXJlbnROb2RlOw0KfQ0KaWYoXzIxNSl7DQpyZXR1cm4gbnVsbDsNCn0NCnJldHVybiBfMjE2Ow0KfTsNCmRvam8uZG9tLmdldEFuY2VzdG9yc0J5VGFnPWZ1bmN0aW9uKG5vZGUsdGFnLF8yMWEpew0KdGFnPXRhZy50b0xvd2VyQ2FzZSgpOw0KcmV0dXJuIGRvam8uZG9tLmdldEFuY2VzdG9ycyhub2RlLGZ1bmN0aW9uKGVsKXsNCnJldHVybiAoKGVsLnRhZ05hbWUpJiYoZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT10YWcpKTsNCn0sXzIxYSk7DQp9Ow0KZG9qby5kb20uZ2V0Rmlyc3RBbmNlc3RvckJ5VGFnPWZ1bmN0aW9uKG5vZGUsdGFnKXsNCnJldHVybiBkb2pvLmRvbS5nZXRBbmNlc3RvcnNCeVRhZyhub2RlLHRhZyx0cnVlKTsNCn07DQpkb2pvLmRvbS5pc0Rlc2NlbmRhbnRPZj1mdW5jdGlvbihub2RlLF8yMWYsXzIyMCl7DQppZihfMjIwJiZub2RlKXsNCm5vZGU9bm9kZS5wYXJlbnROb2RlOw0KfQ0Kd2hpbGUobm9kZSl7DQppZihub2RlPT1fMjFmKXsNCnJldHVybiB0cnVlOw0KfQ0Kbm9kZT1ub2RlLnBhcmVudE5vZGU7DQp9DQpyZXR1cm4gZmFsc2U7DQp9Ow0KZG9qby5kb20uaW5uZXJYTUw9ZnVuY3Rpb24obm9kZSl7DQppZihub2RlLmlubmVyWE1MKXsNCnJldHVybiBub2RlLmlubmVyWE1MOw0KfWVsc2V7DQppZihub2RlLnhtbCl7DQpyZXR1cm4gbm9kZS54bWw7DQp9ZWxzZXsNCmlmKHR5cGVvZiBYTUxTZXJpYWxpemVyIT0idW5kZWZpbmVkIil7DQpyZXR1cm4gKG5ldyBYTUxTZXJpYWxpemVyKCkpLnNlcmlhbGl6ZVRvU3RyaW5nKG5vZGUpOw0KfQ0KfQ0KfQ0KfTsNCmRvam8uZG9tLmNyZWF0ZURvY3VtZW50PWZ1bmN0aW9uKCl7DQp2YXIgZG9jPW51bGw7DQp2YXIgXzIyMz1kb2pvLmRvYygpOw0KaWYoIWRqX3VuZGVmKCJBY3RpdmVYT2JqZWN0Iikpew0KdmFyIF8yMjQ9WyJNU1hNTDIiLCJNaWNyb3NvZnQiLCJNU1hNTCIsIk1TWE1MMyJdOw0KZm9yKHZhciBpPTA7aTxfMjI0Lmxlbmd0aDtpKyspew0KdHJ5ew0KZG9jPW5ldyBBY3RpdmVYT2JqZWN0KF8yMjRbaV0rIi5YTUxET00iKTsNCn0NCmNhdGNoKGUpew0KfQ0KaWYoZG9jKXsNCmJyZWFrOw0KfQ0KfQ0KfWVsc2V7DQppZigoXzIyMy5pbXBsZW1lbnRhdGlvbikmJihfMjIzLmltcGxlbWVudGF0aW9uLmNyZWF0ZURvY3VtZW50KSl7DQpkb2M9XzIyMy5pbXBsZW1lbnRhdGlvbi5jcmVhdGVEb2N1bWVudCgiIiwiIixudWxsKTsNCn0NCn0NCnJldHVybiBkb2M7DQp9Ow0KZG9qby5kb20uY3JlYXRlRG9jdW1lbnRGcm9tVGV4dD1mdW5jdGlvbihzdHIsXzIyNyl7DQppZighXzIyNyl7DQpfMjI3PSJ0ZXh0L3htbCI7DQp9DQppZighZGpfdW5kZWYoIkRPTVBhcnNlciIpKXsNCnZhciBfMjI4PW5ldyBET01QYXJzZXIoKTsNCnJldHVybiBfMjI4LnBhcnNlRnJvbVN0cmluZyhzdHIsXzIyNyk7DQp9ZWxzZXsNCmlmKCFkal91bmRlZigiQWN0aXZlWE9iamVjdCIpKXsNCnZhciBfMjI5PWRvam8uZG9tLmNyZWF0ZURvY3VtZW50KCk7DQppZihfMjI5KXsNCl8yMjkuYXN5bmM9ZmFsc2U7DQpfMjI5LmxvYWRYTUwoc3RyKTsNCnJldHVybiBfMjI5Ow0KfWVsc2V7DQpkb2pvLmRlYnVnKCJ0b1htbCBkaWRuJ3Qgd29yaz8iKTsNCn0NCn1lbHNlew0KdmFyIF8yMmE9ZG9qby5kb2MoKTsNCmlmKF8yMmEuY3JlYXRlRWxlbWVudCl7DQp2YXIgdG1wPV8yMmEuY3JlYXRlRWxlbWVudCgieG1sIik7DQp0bXAuaW5uZXJIVE1MPXN0cjsNCmlmKF8yMmEuaW1wbGVtZW50YXRpb24mJl8yMmEuaW1wbGVtZW50YXRpb24uY3JlYXRlRG9jdW1lbnQpew0KdmFyIF8yMmM9XzIyYS5pbXBsZW1lbnRhdGlvbi5jcmVhdGVEb2N1bWVudCgiZm9vIiwiIixudWxsKTsNCmZvcih2YXIgaT0wO2k8dG1wLmNoaWxkTm9kZXMubGVuZ3RoO2krKyl7DQpfMjJjLmltcG9ydE5vZGUodG1wLmNoaWxkTm9kZXMuaXRlbShpKSx0cnVlKTsNCn0NCnJldHVybiBfMjJjOw0KfQ0KcmV0dXJuICgodG1wLmRvY3VtZW50KSYmKHRtcC5kb2N1bWVudC5maXJzdENoaWxkP3RtcC5kb2N1bWVudC5maXJzdENoaWxkOnRtcCkpOw0KfQ0KfQ0KfQ0KcmV0dXJuIG51bGw7DQp9Ow0KZG9qby5kb20ucHJlcGVuZENoaWxkPWZ1bmN0aW9uKG5vZGUsXzIyZil7DQppZihfMjJmLmZpcnN0Q2hpbGQpew0KXzIyZi5pbnNlcnRCZWZvcmUobm9kZSxfMjJmLmZpcnN0Q2hpbGQpOw0KfWVsc2V7DQpfMjJmLmFwcGVuZENoaWxkKG5vZGUpOw0KfQ0KcmV0dXJuIHRydWU7DQp9Ow0KZG9qby5kb20uaW5zZXJ0QmVmb3JlPWZ1bmN0aW9uKG5vZGUscmVmLF8yMzIpew0KaWYoXzIzMiE9dHJ1ZSYmKG5vZGU9PT1yZWZ8fG5vZGUubmV4dFNpYmxpbmc9PT1yZWYpKXsNCnJldHVybiBmYWxzZTsNCn0NCnZhciBfMjMzPXJlZi5wYXJlbnROb2RlOw0KXzIzMy5pbnNlcnRCZWZvcmUobm9kZSxyZWYpOw0KcmV0dXJuIHRydWU7DQp9Ow0KZG9qby5kb20uaW5zZXJ0QWZ0ZXI9ZnVuY3Rpb24obm9kZSxyZWYsXzIzNil7DQp2YXIgcG49cmVmLnBhcmVudE5vZGU7DQppZihyZWY9PXBuLmxhc3RDaGlsZCl7DQppZigoXzIzNiE9dHJ1ZSkmJihub2RlPT09cmVmKSl7DQpyZXR1cm4gZmFsc2U7DQp9DQpwbi5hcHBlbmRDaGlsZChub2RlKTsNCn1lbHNlew0KcmV0dXJuIHRoaXMuaW5zZXJ0QmVmb3JlKG5vZGUscmVmLm5leHRTaWJsaW5nLF8yMzYpOw0KfQ0KcmV0dXJuIHRydWU7DQp9Ow0KZG9qby5kb20uaW5zZXJ0QXRQb3NpdGlvbj1mdW5jdGlvbihub2RlLHJlZixfMjNhKXsNCmlmKCghbm9kZSl8fCghcmVmKXx8KCFfMjNhKSl7DQpyZXR1cm4gZmFsc2U7DQp9DQpzd2l0Y2goXzIzYS50b0xvd2VyQ2FzZSgpKXsNCmNhc2UgImJlZm9yZSI6DQpyZXR1cm4gZG9qby5kb20uaW5zZXJ0QmVmb3JlKG5vZGUscmVmKTsNCmNhc2UgImFmdGVyIjoNCnJldHVybiBkb2pvLmRvbS5pbnNlcnRBZnRlcihub2RlLHJlZik7DQpjYXNlICJmaXJzdCI6DQppZihyZWYuZmlyc3RDaGlsZCl7DQpyZXR1cm4gZG9qby5kb20uaW5zZXJ0QmVmb3JlKG5vZGUscmVmLmZpcnN0Q2hpbGQpOw0KfWVsc2V7DQpyZWYuYXBwZW5kQ2hpbGQobm9kZSk7DQpyZXR1cm4gdHJ1ZTsNCn0NCmJyZWFrOw0KZGVmYXVsdDoNCnJlZi5hcHBlbmRDaGlsZChub2RlKTsNCnJldHVybiB0cnVlOw0KfQ0KfTsNCmRvam8uZG9tLmluc2VydEF0SW5kZXg9ZnVuY3Rpb24obm9kZSxfMjNjLF8yM2Qpew0KdmFyIF8yM2U9XzIzYy5jaGlsZE5vZGVzOw0KaWYoIV8yM2UubGVuZ3RoKXsNCl8yM2MuYXBwZW5kQ2hpbGQobm9kZSk7DQpyZXR1cm4gdHJ1ZTsNCn0NCnZhciBfMjNmPW51bGw7DQpmb3IodmFyIGk9MDtpPF8yM2UubGVuZ3RoO2krKyl7DQp2YXIgXzI0MT1fMjNlLml0ZW0oaSlbImdldEF0dHJpYnV0ZSJdP3BhcnNlSW50KF8yM2UuaXRlbShpKS5nZXRBdHRyaWJ1dGUoImRvam9pbnNlcnRpb25pbmRleCIpKTotMTsNCmlmKF8yNDE8XzIzZCl7DQpfMjNmPV8yM2UuaXRlbShpKTsNCn0NCn0NCmlmKF8yM2Ypew0KcmV0dXJuIGRvam8uZG9tLmluc2VydEFmdGVyKG5vZGUsXzIzZik7DQp9ZWxzZXsNCnJldHVybiBkb2pvLmRvbS5pbnNlcnRCZWZvcmUobm9kZSxfMjNlLml0ZW0oMCkpOw0KfQ0KfTsNCmRvam8uZG9tLnRleHRDb250ZW50PWZ1bmN0aW9uKG5vZGUsdGV4dCl7DQppZihhcmd1bWVudHMubGVuZ3RoPjEpew0KdmFyIF8yNDQ9ZG9qby5kb2MoKTsNCmRvam8uZG9tLnJlcGxhY2VDaGlsZHJlbihub2RlLF8yNDQuY3JlYXRlVGV4dE5vZGUodGV4dCkpOw0KcmV0dXJuIHRleHQ7DQp9ZWxzZXsNCmlmKG5vZGUudGV4dENvbnRlbnQhPXVuZGVmaW5lZCl7DQpyZXR1cm4gbm9kZS50ZXh0Q29udGVudDsNCn0NCnZhciBfMjQ1PSIiOw0KaWYobm9kZT09bnVsbCl7DQpyZXR1cm4gXzI0NTsNCn0NCmZvcih2YXIgaT0wO2k8bm9kZS5jaGlsZE5vZGVzLmxlbmd0aDtpKyspew0Kc3dpdGNoKG5vZGUuY2hpbGROb2Rlc1tpXS5ub2RlVHlwZSl7DQpjYXNlIDE6DQpjYXNlIDU6DQpfMjQ1Kz1kb2pvLmRvbS50ZXh0Q29udGVudChub2RlLmNoaWxkTm9kZXNbaV0pOw0KYnJlYWs7DQpjYXNlIDM6DQpjYXNlIDI6DQpjYXNlIDQ6DQpfMjQ1Kz1ub2RlLmNoaWxkTm9kZXNbaV0ubm9kZVZhbHVlOw0KYnJlYWs7DQpkZWZhdWx0Og0KYnJlYWs7DQp9DQp9DQpyZXR1cm4gXzI0NTsNCn0NCn07DQpkb2pvLmRvbS5oYXNQYXJlbnQ9ZnVuY3Rpb24obm9kZSl7DQpyZXR1cm4gbm9kZSYmbm9kZS5wYXJlbnROb2RlJiZkb2pvLmRvbS5pc05vZGUobm9kZS5wYXJlbnROb2RlKTsNCn07DQpkb2pvLmRvbS5pc1RhZz1mdW5jdGlvbihub2RlKXsNCmlmKG5vZGUmJm5vZGUudGFnTmFtZSl7DQpmb3IodmFyIGk9MTtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXsNCmlmKG5vZGUudGFnTmFtZT09U3RyaW5nKGFyZ3VtZW50c1tpXSkpew0KcmV0dXJuIFN0cmluZyhhcmd1bWVudHNbaV0pOw0KfQ0KfQ0KfQ0KcmV0dXJuICIiOw0KfTsNCmRvam8uZG9tLnNldEF0dHJpYnV0ZU5TPWZ1bmN0aW9uKGVsZW0sXzI0YixfMjRjLF8yNGQpew0KaWYoZWxlbT09bnVsbHx8KChlbGVtPT11bmRlZmluZWQpJiYodHlwZW9mIGVsZW09PSJ1bmRlZmluZWQiKSkpew0KZG9qby5yYWlzZSgiTm8gZWxlbWVudCBnaXZlbiB0byBkb2pvLmRvbS5zZXRBdHRyaWJ1dGVOUyIpOw0KfQ0KaWYoISgoZWxlbS5zZXRBdHRyaWJ1dGVOUz09dW5kZWZpbmVkKSYmKHR5cGVvZiBlbGVtLnNldEF0dHJpYnV0ZU5TPT0idW5kZWZpbmVkIikpKXsNCmVsZW0uc2V0QXR0cmlidXRlTlMoXzI0YixfMjRjLF8yNGQpOw0KfWVsc2V7DQp2YXIgXzI0ZT1lbGVtLm93bmVyRG9jdW1lbnQ7DQp2YXIgXzI0Zj1fMjRlLmNyZWF0ZU5vZGUoMixfMjRjLF8yNGIpOw0KXzI0Zi5ub2RlVmFsdWU9XzI0ZDsNCmVsZW0uc2V0QXR0cmlidXRlTm9kZShfMjRmKTsNCn0NCn07DQpkb2pvLnByb3ZpZGUoImRvam8udW5kby5icm93c2VyIik7DQp0cnl7DQppZigoIWRqQ29uZmlnWyJwcmV2ZW50QmFja0J1dHRvbkZpeCJdKSYmKCFkb2pvLmhvc3RlbnYucG9zdF9sb2FkXykpew0KZG9jdW1lbnQud3JpdGUoIjxpZnJhbWUgc3R5bGU9J2JvcmRlcjogMHB4OyB3aWR0aDogMXB4OyBoZWlnaHQ6IDFweDsgcG9zaXRpb246IGFic29sdXRlOyBib3R0b206IDBweDsgcmlnaHQ6IDBweDsgdmlzaWJpbGl0eTogdmlzaWJsZTsnIG5hbWU9J2RqaGlzdG9yeScgaWQ9J2RqaGlzdG9yeScgc3JjPSciKyhkb2pvLmhvc3RlbnYuZ2V0QmFzZVNjcmlwdFVyaSgpKyJpZnJhbWVfaGlzdG9yeS5odG1sIikrIic+PC9pZnJhbWU+Iik7DQp9DQp9DQpjYXRjaChlKXsNCn0NCmlmKGRvam8ucmVuZGVyLmh0bWwub3BlcmEpew0KZG9qby5kZWJ1ZygiT3BlcmEgaXMgbm90IHN1cHBvcnRlZCB3aXRoIGRvam8udW5kby5icm93c2VyLCBzbyBiYWNrL2ZvcndhcmQgZGV0ZWN0aW9uIHdpbGwgbm90IHdvcmsuIik7DQp9DQpkb2pvLnVuZG8uYnJvd3Nlcj17aW5pdGlhbEhyZWY6d2luZG93LmxvY2F0aW9uLmhyZWYsaW5pdGlhbEhhc2g6d2luZG93LmxvY2F0aW9uLmhhc2gsbW92ZUZvcndhcmQ6ZmFsc2UsaGlzdG9yeVN0YWNrOltdLGZvcndhcmRTdGFjazpbXSxoaXN0b3J5SWZyYW1lOm51bGwsYm9va21hcmtBbmNob3I6bnVsbCxsb2NhdGlvblRpbWVyOm51bGwsc2V0SW5pdGlhbFN0YXRlOmZ1bmN0aW9uKGFyZ3Mpew0KdGhpcy5pbml0aWFsU3RhdGU9dGhpcy5fY3JlYXRlU3RhdGUodGhpcy5pbml0aWFsSHJlZixhcmdzLHRoaXMuaW5pdGlhbEhhc2gpOw0KfSxhZGRUb0hpc3Rvcnk6ZnVuY3Rpb24oYXJncyl7DQp0aGlzLmZvcndhcmRTdGFjaz1bXTsNCnZhciBoYXNoPW51bGw7DQp2YXIgdXJsPW51bGw7DQppZighdGhpcy5oaXN0b3J5SWZyYW1lKXsNCnRoaXMuaGlzdG9yeUlmcmFtZT13aW5kb3cuZnJhbWVzWyJkamhpc3RvcnkiXTsNCn0NCmlmKCF0aGlzLmJvb2ttYXJrQW5jaG9yKXsNCnRoaXMuYm9va21hcmtBbmNob3I9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOw0KZG9qby5ib2R5KCkuYXBwZW5kQ2hpbGQodGhpcy5ib29rbWFya0FuY2hvcik7DQp0aGlzLmJvb2ttYXJrQW5jaG9yLnN0eWxlLmRpc3BsYXk9Im5vbmUiOw0KfQ0KaWYoYXJnc1siY2hhbmdlVXJsIl0pew0KaGFzaD0iIyIrKChhcmdzWyJjaGFuZ2VVcmwiXSE9PXRydWUpP2FyZ3NbImNoYW5nZVVybCJdOihuZXcgRGF0ZSgpKS5nZXRUaW1lKCkpOw0KaWYodGhpcy5oaXN0b3J5U3RhY2subGVuZ3RoPT0wJiZ0aGlzLmluaXRpYWxTdGF0ZS51cmxIYXNoPT1oYXNoKXsNCnRoaXMuaW5pdGlhbFN0YXRlPXRoaXMuX2NyZWF0ZVN0YXRlKHVybCxhcmdzLGhhc2gpOw0KcmV0dXJuOw0KfWVsc2V7DQppZih0aGlzLmhpc3RvcnlTdGFjay5sZW5ndGg+MCYmdGhpcy5oaXN0b3J5U3RhY2tbdGhpcy5oaXN0b3J5U3RhY2subGVuZ3RoLTFdLnVybEhhc2g9PWhhc2gpew0KdGhpcy5oaXN0b3J5U3RhY2tbdGhpcy5oaXN0b3J5U3RhY2subGVuZ3RoLTFdPXRoaXMuX2NyZWF0ZVN0YXRlKHVybCxhcmdzLGhhc2gpOw0KcmV0dXJuOw0KfQ0KfQ0KdGhpcy5jaGFuZ2luZ1VybD10cnVlOw0Kc2V0VGltZW91dCgid2luZG93LmxvY2F0aW9uLmhyZWYgPSAnIitoYXNoKyInOyBkb2pvLnVuZG8uYnJvd3Nlci5jaGFuZ2luZ1VybCA9IGZhbHNlOyIsMSk7DQp0aGlzLmJvb2ttYXJrQW5jaG9yLmhyZWY9aGFzaDsNCmlmKGRvam8ucmVuZGVyLmh0bWwuaWUpew0KdXJsPXRoaXMuX2xvYWRJZnJhbWVIaXN0b3J5KCk7DQp2YXIgXzI1ND1hcmdzWyJiYWNrIl18fGFyZ3NbImJhY2tCdXR0b24iXXx8YXJnc1siaGFuZGxlIl07DQp2YXIgdGNiPWZ1bmN0aW9uKF8yNTYpew0KaWYod2luZG93LmxvY2F0aW9uLmhhc2ghPSIiKXsNCnNldFRpbWVvdXQoIndpbmRvdy5sb2NhdGlvbi5ocmVmID0gJyIraGFzaCsiJzsiLDEpOw0KfQ0KXzI1NC5hcHBseSh0aGlzLFtfMjU2XSk7DQp9Ow0KaWYoYXJnc1siYmFjayJdKXsNCmFyZ3MuYmFjaz10Y2I7DQp9ZWxzZXsNCmlmKGFyZ3NbImJhY2tCdXR0b24iXSl7DQphcmdzLmJhY2tCdXR0b249dGNiOw0KfWVsc2V7DQppZihhcmdzWyJoYW5kbGUiXSl7DQphcmdzLmhhbmRsZT10Y2I7DQp9DQp9DQp9DQp2YXIgXzI1Nz1hcmdzWyJmb3J3YXJkIl18fGFyZ3NbImZvcndhcmRCdXR0b24iXXx8YXJnc1siaGFuZGxlIl07DQp2YXIgdGZ3PWZ1bmN0aW9uKF8yNTkpew0KaWYod2luZG93LmxvY2F0aW9uLmhhc2ghPSIiKXsNCndpbmRvdy5sb2NhdGlvbi5ocmVmPWhhc2g7DQp9DQppZihfMjU3KXsNCl8yNTcuYXBwbHkodGhpcyxbXzI1OV0pOw0KfQ0KfTsNCmlmKGFyZ3NbImZvcndhcmQiXSl7DQphcmdzLmZvcndhcmQ9dGZ3Ow0KfWVsc2V7DQppZihhcmdzWyJmb3J3YXJkQnV0dG9uIl0pew0KYXJncy5mb3J3YXJkQnV0dG9uPXRmdzsNCn1lbHNlew0KaWYoYXJnc1siaGFuZGxlIl0pew0KYXJncy5oYW5kbGU9dGZ3Ow0KfQ0KfQ0KfQ0KfWVsc2V7DQppZihkb2pvLnJlbmRlci5odG1sLm1veil7DQppZighdGhpcy5sb2NhdGlvblRpbWVyKXsNCnRoaXMubG9jYXRpb25UaW1lcj1zZXRJbnRlcnZhbCgiZG9qby51bmRvLmJyb3dzZXIuY2hlY2tMb2NhdGlvbigpOyIsMjAwKTsNCn0NCn0NCn0NCn1lbHNlew0KdXJsPXRoaXMuX2xvYWRJZnJhbWVIaXN0b3J5KCk7DQp9DQp0aGlzLmhpc3RvcnlTdGFjay5wdXNoKHRoaXMuX2NyZWF0ZVN0YXRlKHVybCxhcmdzLGhhc2gpKTsNCn0sY2hlY2tMb2NhdGlvbjpmdW5jdGlvbigpew0KaWYoIXRoaXMuY2hhbmdpbmdVcmwpew0KdmFyIGhzbD10aGlzLmhpc3RvcnlTdGFjay5sZW5ndGg7DQppZigod2luZG93LmxvY2F0aW9uLmhhc2g9PXRoaXMuaW5pdGlhbEhhc2h8fHdpbmRvdy5sb2NhdGlvbi5ocmVmPT10aGlzLmluaXRpYWxIcmVmKSYmKGhzbD09MSkpew0KdGhpcy5oYW5kbGVCYWNrQnV0dG9uKCk7DQpyZXR1cm47DQp9DQppZih0aGlzLmZvcndhcmRTdGFjay5sZW5ndGg+MCl7DQppZih0aGlzLmZvcndhcmRTdGFja1t0aGlzLmZvcndhcmRTdGFjay5sZW5ndGgtMV0udXJsSGFzaD09d2luZG93LmxvY2F0aW9uLmhhc2gpew0KdGhpcy5oYW5kbGVGb3J3YXJkQnV0dG9uKCk7DQpyZXR1cm47DQp9DQp9DQppZigoaHNsPj0yKSYmKHRoaXMuaGlzdG9yeVN0YWNrW2hzbC0yXSkpew0KaWYodGhpcy5oaXN0b3J5U3RhY2tbaHNsLTJdLnVybEhhc2g9PXdpbmRvdy5sb2NhdGlvbi5oYXNoKXsNCnRoaXMuaGFuZGxlQmFja0J1dHRvbigpOw0KcmV0dXJuOw0KfQ0KfQ0KfQ0KfSxpZnJhbWVMb2FkZWQ6ZnVuY3Rpb24oZXZ0LF8yNWMpew0KaWYoIWRvam8ucmVuZGVyLmh0bWwub3BlcmEpew0KdmFyIF8yNWQ9dGhpcy5fZ2V0VXJsUXVlcnkoXzI1Yy5ocmVmKTsNCmlmKF8yNWQ9PW51bGwpew0KaWYodGhpcy5oaXN0b3J5U3RhY2subGVuZ3RoPT0xKXsNCnRoaXMuaGFuZGxlQmFja0J1dHRvbigpOw0KfQ0KcmV0dXJuOw0KfQ0KaWYodGhpcy5tb3ZlRm9yd2FyZCl7DQp0aGlzLm1vdmVGb3J3YXJkPWZhbHNlOw0KcmV0dXJuOw0KfQ0KaWYodGhpcy5oaXN0b3J5U3RhY2subGVuZ3RoPj0yJiZfMjVkPT10aGlzLl9nZXRVcmxRdWVyeSh0aGlzLmhpc3RvcnlTdGFja1t0aGlzLmhpc3RvcnlTdGFjay5sZW5ndGgtMl0udXJsKSl7DQp0aGlzLmhhbmRsZUJhY2tCdXR0b24oKTsNCn1lbHNlew0KaWYodGhpcy5mb3J3YXJkU3RhY2subGVuZ3RoPjAmJl8yNWQ9PXRoaXMuX2dldFVybFF1ZXJ5KHRoaXMuZm9yd2FyZFN0YWNrW3RoaXMuZm9yd2FyZFN0YWNrLmxlbmd0aC0xXS51cmwpKXsNCnRoaXMuaGFuZGxlRm9yd2FyZEJ1dHRvbigpOw0KfQ0KfQ0KfQ0KfSxoYW5kbGVCYWNrQnV0dG9uOmZ1bmN0aW9uKCl7DQp2YXIgXzI1ZT10aGlzLmhpc3RvcnlTdGFjay5wb3AoKTsNCmlmKCFfMjVlKXsNCnJldHVybjsNCn0NCnZhciBsYXN0PXRoaXMuaGlzdG9yeVN0YWNrW3RoaXMuaGlzdG9yeVN0YWNrLmxlbmd0aC0xXTsNCmlmKCFsYXN0JiZ0aGlzLmhpc3RvcnlTdGFjay5sZW5ndGg9PTApew0KbGFzdD10aGlzLmluaXRpYWxTdGF0ZTsNCn0NCmlmKGxhc3Qpew0KaWYobGFzdC5rd0FyZ3NbImJhY2siXSl7DQpsYXN0Lmt3QXJnc1siYmFjayJdKCk7DQp9ZWxzZXsNCmlmKGxhc3Qua3dBcmdzWyJiYWNrQnV0dG9uIl0pew0KbGFzdC5rd0FyZ3NbImJhY2tCdXR0b24iXSgpOw0KfWVsc2V7DQppZihsYXN0Lmt3QXJnc1siaGFuZGxlIl0pew0KbGFzdC5rd0FyZ3MuaGFuZGxlKCJiYWNrIik7DQp9DQp9DQp9DQp9DQp0aGlzLmZvcndhcmRTdGFjay5wdXNoKF8yNWUpOw0KfSxoYW5kbGVGb3J3YXJkQnV0dG9uOmZ1bmN0aW9uKCl7DQp2YXIgbGFzdD10aGlzLmZvcndhcmRTdGFjay5wb3AoKTsNCmlmKCFsYXN0KXsNCnJldHVybjsNCn0NCmlmKGxhc3Qua3dBcmdzWyJmb3J3YXJkIl0pew0KbGFzdC5rd0FyZ3MuZm9yd2FyZCgpOw0KfWVsc2V7DQppZihsYXN0Lmt3QXJnc1siZm9yd2FyZEJ1dHRvbiJdKXsNCmxhc3Qua3dBcmdzLmZvcndhcmRCdXR0b24oKTsNCn1lbHNlew0KaWYobGFzdC5rd0FyZ3NbImhhbmRsZSJdKXsNCmxhc3Qua3dBcmdzLmhhbmRsZSgiZm9yd2FyZCIpOw0KfQ0KfQ0KfQ0KdGhpcy5oaXN0b3J5U3RhY2sucHVzaChsYXN0KTsNCn0sX2NyZWF0ZVN0YXRlOmZ1bmN0aW9uKHVybCxhcmdzLGhhc2gpew0KcmV0dXJuIHsidXJsIjp1cmwsImt3QXJncyI6YXJncywidXJsSGFzaCI6aGFzaH07DQp9LF9nZXRVcmxRdWVyeTpmdW5jdGlvbih1cmwpew0KdmFyIF8yNjU9dXJsLnNwbGl0KCI/Iik7DQppZihfMjY1Lmxlbmd0aDwyKXsNCnJldHVybiBudWxsOw0KfWVsc2V7DQpyZXR1cm4gXzI2NVsxXTsNCn0NCn0sX2xvYWRJZnJhbWVIaXN0b3J5OmZ1bmN0aW9uKCl7DQp2YXIgdXJsPWRvam8uaG9zdGVudi5nZXRCYXNlU2NyaXB0VXJpKCkrImlmcmFtZV9oaXN0b3J5Lmh0bWw/IisobmV3IERhdGUoKSkuZ2V0VGltZSgpOw0KdGhpcy5tb3ZlRm9yd2FyZD10cnVlOw0KZG9qby5pby5zZXRJRnJhbWVTcmModGhpcy5oaXN0b3J5SWZyYW1lLHVybCxmYWxzZSk7DQpyZXR1cm4gdXJsOw0KfX07DQpkb2pvLnByb3ZpZGUoImRvam8uaW8uQnJvd3NlcklPIik7DQpkb2pvLmlvLmNoZWNrQ2hpbGRyZW5Gb3JGaWxlPWZ1bmN0aW9uKG5vZGUpew0KdmFyIF8yNjg9ZmFsc2U7DQp2YXIgXzI2OT1ub2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJpbnB1dCIpOw0KZG9qby5sYW5nLmZvckVhY2goXzI2OSxmdW5jdGlvbihfMjZhKXsNCmlmKF8yNjgpew0KcmV0dXJuOw0KfQ0KaWYoXzI2YS5nZXRBdHRyaWJ1dGUoInR5cGUiKT09ImZpbGUiKXsNCl8yNjg9ZmFsc2U7DQp9DQp9KTsNCnJldHVybiBfMjY4Ow0KfTsNCmRvam8uaW8uZm9ybUhhc0ZpbGU9ZnVuY3Rpb24oXzI2Yil7DQpyZXR1cm4gZmFsc2U7DQp9Ow0KZG9qby5pby51cGRhdGVOb2RlPWZ1bmN0aW9uKG5vZGUsXzI2ZCl7DQpub2RlPWRvam8uYnlJZChub2RlKTsNCnZhciBhcmdzPV8yNmQ7DQppZihkb2pvLmxhbmcuaXNTdHJpbmcoXzI2ZCkpew0KYXJncz17dXJsOl8yNmR9Ow0KfQ0KYXJncy5taW1ldHlwZT0idGV4dC9odG1sIjsNCmFyZ3MubG9hZD1mdW5jdGlvbih0LGQsZSl7DQp3aGlsZShub2RlLmZpcnN0Q2hpbGQpew0KaWYoZG9qb1siZXZlbnQiXSl7DQp0cnl7DQpkb2pvLmV2ZW50LmJyb3dzZXIuY2xlYW4obm9kZS5maXJzdENoaWxkKTsNCn0NCmNhdGNoKGUpew0KfQ0KfQ0Kbm9kZS5yZW1vdmVDaGlsZChub2RlLmZpcnN0Q2hpbGQpOw0KfQ0Kbm9kZS5pbm5lckhUTUw9ZDsNCn07DQpkb2pvLmlvLmJpbmQoYXJncyk7DQp9Ow0KZG9qby5pby5mb3JtRmlsdGVyPWZ1bmN0aW9uKG5vZGUpew0KdmFyIHR5cGU9KG5vZGUudHlwZXx8IiIpLnRvTG93ZXJDYXNlKCk7DQpyZXR1cm4gIW5vZGUuZGlzYWJsZWQmJm5vZGUubmFtZSYmIWRvam8ubGFuZy5pbkFycmF5KFsiZmlsZSIsInN1Ym1pdCIsImltYWdlIiwicmVzZXQiLCJidXR0b24iXSx0eXBlKTsNCn07DQpkb2pvLmlvLmVuY29kZUZvcm09ZnVuY3Rpb24oXzI3NCxfMjc1LF8yNzYpew0KaWYoKCFfMjc0KXx8KCFfMjc0LnRhZ05hbWUpfHwoIV8yNzQudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT0iZm9ybSIpKXsNCmRvam8ucmFpc2UoIkF0dGVtcHRlZCB0byBlbmNvZGUgYSBub24tZm9ybSBlbGVtZW50LiIpOw0KfQ0KaWYoIV8yNzYpew0KXzI3Nj1kb2pvLmlvLmZvcm1GaWx0ZXI7DQp9DQp2YXIgZW5jPS91dGYvaS50ZXN0KF8yNzV8fCIiKT9lbmNvZGVVUklDb21wb25lbnQ6ZG9qby5zdHJpbmcuZW5jb2RlQXNjaWk7DQp2YXIgXzI3OD1bXTsNCmZvcih2YXIgaT0wO2k8XzI3NC5lbGVtZW50cy5sZW5ndGg7aSsrKXsNCnZhciBlbG09XzI3NC5lbGVtZW50c1tpXTsNCmlmKCFlbG18fGVsbS50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJmaWVsZHNldCJ8fCFfMjc2KGVsbSkpew0KY29udGludWU7DQp9DQp2YXIgbmFtZT1lbmMoZWxtLm5hbWUpOw0KdmFyIHR5cGU9ZWxtLnR5cGUudG9Mb3dlckNhc2UoKTsNCmlmKHR5cGU9PSJzZWxlY3QtbXVsdGlwbGUiKXsNCmZvcih2YXIgaj0wO2o8ZWxtLm9wdGlvbnMubGVuZ3RoO2orKyl7DQppZihlbG0ub3B0aW9uc1tqXS5zZWxlY3RlZCl7DQpfMjc4LnB1c2gobmFtZSsiPSIrZW5jKGVsbS5vcHRpb25zW2pdLnZhbHVlKSk7DQp9DQp9DQp9ZWxzZXsNCmlmKGRvam8ubGFuZy5pbkFycmF5KFsicmFkaW8iLCJjaGVja2JveCJdLHR5cGUpKXsNCmlmKGVsbS5jaGVja2VkKXsNCl8yNzgucHVzaChuYW1lKyI9IitlbmMoZWxtLnZhbHVlKSk7DQp9DQp9ZWxzZXsNCl8yNzgucHVzaChuYW1lKyI9IitlbmMoZWxtLnZhbHVlKSk7DQp9DQp9DQp9DQp2YXIgXzI3ZT1fMjc0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJpbnB1dCIpOw0KZm9yKHZhciBpPTA7aTxfMjdlLmxlbmd0aDtpKyspew0KdmFyIF8yN2Y9XzI3ZVtpXTsNCmlmKF8yN2YudHlwZS50b0xvd2VyQ2FzZSgpPT0iaW1hZ2UiJiZfMjdmLmZvcm09PV8yNzQmJl8yNzYoXzI3Zikpew0KdmFyIG5hbWU9ZW5jKF8yN2YubmFtZSk7DQpfMjc4LnB1c2gobmFtZSsiPSIrZW5jKF8yN2YudmFsdWUpKTsNCl8yNzgucHVzaChuYW1lKyIueD0wIik7DQpfMjc4LnB1c2gobmFtZSsiLnk9MCIpOw0KfQ0KfQ0KcmV0dXJuIF8yNzguam9pbigiJiIpKyImIjsNCn07DQpkb2pvLmlvLkZvcm1CaW5kPWZ1bmN0aW9uKGFyZ3Mpew0KdGhpcy5iaW5kQXJncz17fTsNCmlmKGFyZ3MmJmFyZ3MuZm9ybU5vZGUpew0KdGhpcy5pbml0KGFyZ3MpOw0KfWVsc2V7DQppZihhcmdzKXsNCnRoaXMuaW5pdCh7Zm9ybU5vZGU6YXJnc30pOw0KfQ0KfQ0KfTsNCmRvam8ubGFuZy5leHRlbmQoZG9qby5pby5Gb3JtQmluZCx7Zm9ybTpudWxsLGJpbmRBcmdzOm51bGwsY2xpY2tlZEJ1dHRvbjpudWxsLGluaXQ6ZnVuY3Rpb24oYXJncyl7DQp2YXIgZm9ybT1kb2pvLmJ5SWQoYXJncy5mb3JtTm9kZSk7DQppZighZm9ybXx8IWZvcm0udGFnTmFtZXx8Zm9ybS50YWdOYW1lLnRvTG93ZXJDYXNlKCkhPSJmb3JtIil7DQp0aHJvdyBuZXcgRXJyb3IoIkZvcm1CaW5kOiBDb3VsZG4ndCBhcHBseSwgaW52YWxpZCBmb3JtIik7DQp9ZWxzZXsNCmlmKHRoaXMuZm9ybT09Zm9ybSl7DQpyZXR1cm47DQp9ZWxzZXsNCmlmKHRoaXMuZm9ybSl7DQp0aHJvdyBuZXcgRXJyb3IoIkZvcm1CaW5kOiBBbHJlYWR5IGFwcGxpZWQgdG8gYSBmb3JtIik7DQp9DQp9DQp9DQpkb2pvLmxhbmcubWl4aW4odGhpcy5iaW5kQXJncyxhcmdzKTsNCnRoaXMuZm9ybT1mb3JtOw0KdGhpcy5jb25uZWN0KGZvcm0sIm9uc3VibWl0Iiwic3VibWl0Iik7DQpmb3IodmFyIGk9MDtpPGZvcm0uZWxlbWVudHMubGVuZ3RoO2krKyl7DQp2YXIgbm9kZT1mb3JtLmVsZW1lbnRzW2ldOw0KaWYobm9kZSYmbm9kZS50eXBlJiZkb2pvLmxhbmcuaW5BcnJheShbInN1Ym1pdCIsImJ1dHRvbiJdLG5vZGUudHlwZS50b0xvd2VyQ2FzZSgpKSl7DQp0aGlzLmNvbm5lY3Qobm9kZSwib25jbGljayIsImNsaWNrIik7DQp9DQp9DQp2YXIgXzI4NT1mb3JtLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJpbnB1dCIpOw0KZm9yKHZhciBpPTA7aTxfMjg1Lmxlbmd0aDtpKyspew0KdmFyIF8yODY9XzI4NVtpXTsNCmlmKF8yODYudHlwZS50b0xvd2VyQ2FzZSgpPT0iaW1hZ2UiJiZfMjg2LmZvcm09PWZvcm0pew0KdGhpcy5jb25uZWN0KF8yODYsIm9uY2xpY2siLCJjbGljayIpOw0KfQ0KfQ0KfSxvblN1Ym1pdDpmdW5jdGlvbihmb3JtKXsNCnJldHVybiB0cnVlOw0KfSxzdWJtaXQ6ZnVuY3Rpb24oZSl7DQplLnByZXZlbnREZWZhdWx0KCk7DQppZih0aGlzLm9uU3VibWl0KHRoaXMuZm9ybSkpew0KZG9qby5pby5iaW5kKGRvam8ubGFuZy5taXhpbih0aGlzLmJpbmRBcmdzLHtmb3JtRmlsdGVyOmRvam8ubGFuZy5oaXRjaCh0aGlzLCJmb3JtRmlsdGVyIil9KSk7DQp9DQp9LGNsaWNrOmZ1bmN0aW9uKGUpew0KdmFyIG5vZGU9ZS5jdXJyZW50VGFyZ2V0Ow0KaWYobm9kZS5kaXNhYmxlZCl7DQpyZXR1cm47DQp9DQp0aGlzLmNsaWNrZWRCdXR0b249bm9kZTsNCn0sZm9ybUZpbHRlcjpmdW5jdGlvbihub2RlKXsNCnZhciB0eXBlPShub2RlLnR5cGV8fCIiKS50b0xvd2VyQ2FzZSgpOw0KdmFyIF8yOGQ9ZmFsc2U7DQppZihub2RlLmRpc2FibGVkfHwhbm9kZS5uYW1lKXsNCl8yOGQ9ZmFsc2U7DQp9ZWxzZXsNCmlmKGRvam8ubGFuZy5pbkFycmF5KFsic3VibWl0IiwiYnV0dG9uIiwiaW1hZ2UiXSx0eXBlKSl7DQppZighdGhpcy5jbGlja2VkQnV0dG9uKXsNCnRoaXMuY2xpY2tlZEJ1dHRvbj1ub2RlOw0KfQ0KXzI4ZD1ub2RlPT10aGlzLmNsaWNrZWRCdXR0b247DQp9ZWxzZXsNCl8yOGQ9IWRvam8ubGFuZy5pbkFycmF5KFsiZmlsZSIsInN1Ym1pdCIsInJlc2V0IiwiYnV0dG9uIl0sdHlwZSk7DQp9DQp9DQpyZXR1cm4gXzI4ZDsNCn0sY29ubmVjdDpmdW5jdGlvbihfMjhlLF8yOGYsXzI5MCl7DQppZihkb2pvLmV2YWxPYmpQYXRoKCJkb2pvLmV2ZW50LmNvbm5lY3QiKSl7DQpkb2pvLmV2ZW50LmNvbm5lY3QoXzI4ZSxfMjhmLHRoaXMsXzI5MCk7DQp9ZWxzZXsNCnZhciBmY249ZG9qby5sYW5nLmhpdGNoKHRoaXMsXzI5MCk7DQpfMjhlW18yOGZdPWZ1bmN0aW9uKGUpew0KaWYoIWUpew0KZT13aW5kb3cuZXZlbnQ7DQp9DQppZighZS5jdXJyZW50VGFyZ2V0KXsNCmUuY3VycmVudFRhcmdldD1lLnNyY0VsZW1lbnQ7DQp9DQppZighZS5wcmV2ZW50RGVmYXVsdCl7DQplLnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKCl7DQp3aW5kb3cuZXZlbnQucmV0dXJuVmFsdWU9ZmFsc2U7DQp9Ow0KfQ0KZmNuKGUpOw0KfTsNCn0NCn19KTsNCmRvam8uaW8uWE1MSFRUUFRyYW5zcG9ydD1uZXcgZnVuY3Rpb24oKXsNCnZhciBfMjkzPXRoaXM7DQp2YXIgXzI5ND17fTsNCnRoaXMudXNlQ2FjaGU9ZmFsc2U7DQp0aGlzLnByZXZlbnRDYWNoZT1mYWxzZTsNCmZ1bmN0aW9uIGdldENhY2hlS2V5KHVybCxfMjk2LF8yOTcpew0KcmV0dXJuIHVybCsifCIrXzI5NisifCIrXzI5Ny50b0xvd2VyQ2FzZSgpOw0KfQ0KZnVuY3Rpb24gYWRkVG9DYWNoZSh1cmwsXzI5OSxfMjlhLGh0dHApew0KXzI5NFtnZXRDYWNoZUtleSh1cmwsXzI5OSxfMjlhKV09aHR0cDsNCn0NCmZ1bmN0aW9uIGdldEZyb21DYWNoZSh1cmwsXzI5ZCxfMjllKXsNCnJldHVybiBfMjk0W2dldENhY2hlS2V5KHVybCxfMjlkLF8yOWUpXTsNCn0NCnRoaXMuY2xlYXJDYWNoZT1mdW5jdGlvbigpew0KXzI5ND17fTsNCn07DQpmdW5jdGlvbiBkb0xvYWQoXzI5ZixodHRwLHVybCxfMmEyLF8yYTMpew0KaWYoKChodHRwLnN0YXR1cz49MjAwKSYmKGh0dHAuc3RhdHVzPDMwMCkpfHwoaHR0cC5zdGF0dXM9PTMwNCl8fChsb2NhdGlvbi5wcm90b2NvbD09ImZpbGU6IiYmKGh0dHAuc3RhdHVzPT0wfHxodHRwLnN0YXR1cz09dW5kZWZpbmVkKSl8fChsb2NhdGlvbi5wcm90b2NvbD09ImNocm9tZToiJiYoaHR0cC5zdGF0dXM9PTB8fGh0dHAuc3RhdHVzPT11bmRlZmluZWQpKSl7DQp2YXIgcmV0Ow0KaWYoXzI5Zi5tZXRob2QudG9Mb3dlckNhc2UoKT09ImhlYWQiKXsNCnZhciBfMmE1PWh0dHAuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCk7DQpyZXQ9e307DQpyZXQudG9TdHJpbmc9ZnVuY3Rpb24oKXsNCnJldHVybiBfMmE1Ow0KfTsNCnZhciBfMmE2PV8yYTUuc3BsaXQoL1tcclxuXSsvZyk7DQpmb3IodmFyIGk9MDtpPF8yYTYubGVuZ3RoO2krKyl7DQp2YXIgcGFpcj1fMmE2W2ldLm1hdGNoKC9eKFteOl0rKVxzKjpccyooLispJC9pKTsNCmlmKHBhaXIpew0KcmV0W3BhaXJbMV1dPXBhaXJbMl07DQp9DQp9DQp9ZWxzZXsNCmlmKF8yOWYubWltZXR5cGU9PSJ0ZXh0L2phdmFzY3JpcHQiKXsNCnRyeXsNCnJldD1kal9ldmFsKGh0dHAucmVzcG9uc2VUZXh0KTsNCn0NCmNhdGNoKGUpew0KZG9qby5kZWJ1ZyhlKTsNCmRvam8uZGVidWcoaHR0cC5yZXNwb25zZVRleHQpOw0KcmV0PW51bGw7DQp9DQp9ZWxzZXsNCmlmKF8yOWYubWltZXR5cGU9PSJ0ZXh0L2pzb24ifHxfMjlmLm1pbWV0eXBlPT0iYXBwbGljYXRpb24vanNvbiIpew0KdHJ5ew0KcmV0PWRqX2V2YWwoIigiK2h0dHAucmVzcG9uc2VUZXh0KyIpIik7DQp9DQpjYXRjaChlKXsNCmRvam8uZGVidWcoZSk7DQpkb2pvLmRlYnVnKGh0dHAucmVzcG9uc2VUZXh0KTsNCnJldD1mYWxzZTsNCn0NCn1lbHNlew0KaWYoKF8yOWYubWltZXR5cGU9PSJhcHBsaWNhdGlvbi94bWwiKXx8KF8yOWYubWltZXR5cGU9PSJ0ZXh0L3htbCIpKXsNCnJldD1odHRwLnJlc3BvbnNlWE1MOw0KaWYoIXJldHx8dHlwZW9mIHJldD09InN0cmluZyJ8fCFodHRwLmdldFJlc3BvbnNlSGVhZGVyKCJDb250ZW50LVR5cGUiKSl7DQpyZXQ9ZG9qby5kb20uY3JlYXRlRG9jdW1lbnRGcm9tVGV4dChodHRwLnJlc3BvbnNlVGV4dCk7DQp9DQp9ZWxzZXsNCnJldD1odHRwLnJlc3BvbnNlVGV4dDsNCn0NCn0NCn0NCn0NCmlmKF8yYTMpew0KYWRkVG9DYWNoZSh1cmwsXzJhMixfMjlmLm1ldGhvZCxodHRwKTsNCn0NCl8yOWZbKHR5cGVvZiBfMjlmLmxvYWQ9PSJmdW5jdGlvbiIpPyJsb2FkIjoiaGFuZGxlIl0oImxvYWQiLHJldCxodHRwLF8yOWYpOw0KfWVsc2V7DQp2YXIgXzJhOT1uZXcgZG9qby5pby5FcnJvcigiWE1MSHR0cFRyYW5zcG9ydCBFcnJvcjogIitodHRwLnN0YXR1cysiICIraHR0cC5zdGF0dXNUZXh0KTsNCl8yOWZbKHR5cGVvZiBfMjlmLmVycm9yPT0iZnVuY3Rpb24iKT8iZXJyb3IiOiJoYW5kbGUiXSgiZXJyb3IiLF8yYTksaHR0cCxfMjlmKTsNCn0NCn0NCmZ1bmN0aW9uIHNldEhlYWRlcnMoaHR0cCxfMmFiKXsNCmlmKF8yYWJbImhlYWRlcnMiXSl7DQpmb3IodmFyIF8yYWMgaW4gXzJhYlsiaGVhZGVycyJdKXsNCmlmKF8yYWMudG9Mb3dlckNhc2UoKT09ImNvbnRlbnQtdHlwZSImJiFfMmFiWyJjb250ZW50VHlwZSJdKXsNCl8yYWJbImNvbnRlbnRUeXBlIl09XzJhYlsiaGVhZGVycyJdW18yYWNdOw0KfWVsc2V7DQpodHRwLnNldFJlcXVlc3RIZWFkZXIoXzJhYyxfMmFiWyJoZWFkZXJzIl1bXzJhY10pOw0KfQ0KfQ0KfQ0KfQ0KdGhpcy5pbkZsaWdodD1bXTsNCnRoaXMuaW5GbGlnaHRUaW1lcj1udWxsOw0KdGhpcy5zdGFydFdhdGNoaW5nSW5GbGlnaHQ9ZnVuY3Rpb24oKXsNCmlmKCF0aGlzLmluRmxpZ2h0VGltZXIpew0KdGhpcy5pbkZsaWdodFRpbWVyPXNldFRpbWVvdXQoImRvam8uaW8uWE1MSFRUUFRyYW5zcG9ydC53YXRjaEluRmxpZ2h0KCk7IiwxMCk7DQp9DQp9Ow0KdGhpcy53YXRjaEluRmxpZ2h0PWZ1bmN0aW9uKCl7DQp2YXIgbm93PW51bGw7DQppZighZG9qby5ob3N0ZW52Ll9ibG9ja0FzeW5jJiYhXzI5My5fYmxvY2tBc3luYyl7DQpmb3IodmFyIHg9dGhpcy5pbkZsaWdodC5sZW5ndGgtMTt4Pj0wO3gtLSl7DQp0cnl7DQp2YXIgdGlmPXRoaXMuaW5GbGlnaHRbeF07DQppZighdGlmfHx0aWYuaHR0cC5fYWJvcnRlZHx8IXRpZi5odHRwLnJlYWR5U3RhdGUpew0KdGhpcy5pbkZsaWdodC5zcGxpY2UoeCwxKTsNCmNvbnRpbnVlOw0KfQ0KaWYoND09dGlmLmh0dHAucmVhZHlTdGF0ZSl7DQp0aGlzLmluRmxpZ2h0LnNwbGljZSh4LDEpOw0KZG9Mb2FkKHRpZi5yZXEsdGlmLmh0dHAsdGlmLnVybCx0aWYucXVlcnksdGlmLnVzZUNhY2hlKTsNCn1lbHNlew0KaWYodGlmLnN0YXJ0VGltZSl7DQppZighbm93KXsNCm5vdz0obmV3IERhdGUoKSkuZ2V0VGltZSgpOw0KfQ0KaWYodGlmLnN0YXJ0VGltZSsodGlmLnJlcS50aW1lb3V0U2Vjb25kcyoxMDAwKTxub3cpew0KaWYodHlwZW9mIHRpZi5odHRwLmFib3J0PT0iZnVuY3Rpb24iKXsNCnRpZi5odHRwLmFib3J0KCk7DQp9DQp0aGlzLmluRmxpZ2h0LnNwbGljZSh4LDEpOw0KdGlmLnJlcVsodHlwZW9mIHRpZi5yZXEudGltZW91dD09ImZ1bmN0aW9uIik/InRpbWVvdXQiOiJoYW5kbGUiXSgidGltZW91dCIsbnVsbCx0aWYuaHR0cCx0aWYucmVxKTsNCn0NCn0NCn0NCn0NCmNhdGNoKGUpew0KLyoNCnRyeXsNCnZhciBfMmIwPW5ldyBkb2pvLmlvLkVycm9yKCJYTUxIdHRwVHJhbnNwb3J0LndhdGNoSW5GbGlnaHQgRXJyb3I6ICIrZSk7DQp0aWYucmVxWyh0eXBlb2YgdGlmLnJlcS5lcnJvcj09ImZ1bmN0aW9uIik/ImVycm9yIjoiaGFuZGxlIl0oImVycm9yIixfMmIwLHRpZi5odHRwLHRpZi5yZXEpOw0KfQ0KY2F0Y2goZTIpew0KZG9qby5kZWJ1ZygiWE1MSHR0cFRyYW5zcG9ydCBlcnJvciBjYWxsYmFjayBmYWlsZWQ6ICIrZTIpOw0KfQ0KKi8NCn0NCn0NCn0NCmNsZWFyVGltZW91dCh0aGlzLmluRmxpZ2h0VGltZXIpOw0KaWYodGhpcy5pbkZsaWdodC5sZW5ndGg9PTApew0KdGhpcy5pbkZsaWdodFRpbWVyPW51bGw7DQpyZXR1cm47DQp9DQp0aGlzLmluRmxpZ2h0VGltZXI9c2V0VGltZW91dCgiZG9qby5pby5YTUxIVFRQVHJhbnNwb3J0LndhdGNoSW5GbGlnaHQoKTsiLDEwKTsNCn07DQp2YXIgXzJiMT1kb2pvLmhvc3RlbnYuZ2V0WG1saHR0cE9iamVjdCgpP3RydWU6ZmFsc2U7DQp0aGlzLmNhbkhhbmRsZT1mdW5jdGlvbihfMmIyKXsNCnJldHVybiBfMmIxJiZkb2pvLmxhbmcuaW5BcnJheShbInRleHQvcGxhaW4iLCJ0ZXh0L2h0bWwiLCJhcHBsaWNhdGlvbi94bWwiLCJ0ZXh0L3htbCIsInRleHQvamF2YXNjcmlwdCIsInRleHQvanNvbiIsImFwcGxpY2F0aW9uL2pzb24iXSwoXzJiMlsibWltZXR5cGUiXS50b0xvd2VyQ2FzZSgpfHwiIikpJiYhKF8yYjJbImZvcm1Ob2RlIl0mJmRvam8uaW8uZm9ybUhhc0ZpbGUoXzJiMlsiZm9ybU5vZGUiXSkpOw0KfTsNCnRoaXMubXVsdGlwYXJ0Qm91bmRhcnk9IjQ1MzA5RkZGLUJENjUtNGQ1MC05OUM5LTM2OTg2ODk2QTk2RiI7DQp0aGlzLmJpbmQ9ZnVuY3Rpb24oXzJiMyl7DQppZighXzJiM1sidXJsIl0pew0KaWYoIV8yYjNbImZvcm1Ob2RlIl0mJihfMmIzWyJiYWNrQnV0dG9uIl18fF8yYjNbImJhY2siXXx8XzJiM1siY2hhbmdlVXJsIl18fF8yYjNbIndhdGNoRm9yVVJMIl0pJiYoIWRqQ29uZmlnLnByZXZlbnRCYWNrQnV0dG9uRml4KSl7DQpkb2pvLmRlcHJlY2F0ZWQoIlVzaW5nIGRvam8uaW8uWE1MSFRUUFRyYW5zcG9ydC5iaW5kKCkgdG8gYWRkIHRvIGJyb3dzZXIgaGlzdG9yeSB3aXRob3V0IGRvaW5nIGFuIElPIHJlcXVlc3QiLCJVc2UgZG9qby51bmRvLmJyb3dzZXIuYWRkVG9IaXN0b3J5KCkgaW5zdGVhZC4iLCIwLjQiKTsNCmRvam8udW5kby5icm93c2VyLmFkZFRvSGlzdG9yeShfMmIzKTsNCnJldHVybiB0cnVlOw0KfQ0KfQ0KdmFyIHVybD1fMmIzLnVybDsNCnZhciBfMmI1PSIiOw0KaWYoXzJiM1siZm9ybU5vZGUiXSl7DQp2YXIgdGE9XzJiMy5mb3JtTm9kZS5nZXRBdHRyaWJ1dGUoImFjdGlvbiIpOw0KaWYoKHRhKSYmKCFfMmIzWyJ1cmwiXSkpew0KdXJsPXRhOw0KfQ0KdmFyIHRwPV8yYjMuZm9ybU5vZGUuZ2V0QXR0cmlidXRlKCJtZXRob2QiKTsNCmlmKCh0cCkmJighXzJiM1sibWV0aG9kIl0pKXsNCl8yYjMubWV0aG9kPXRwOw0KfQ0KXzJiNSs9ZG9qby5pby5lbmNvZGVGb3JtKF8yYjMuZm9ybU5vZGUsXzJiMy5lbmNvZGluZyxfMmIzWyJmb3JtRmlsdGVyIl0pOw0KfQ0KaWYodXJsLmluZGV4T2YoIiMiKT4tMSl7DQpkb2pvLmRlYnVnKCJXYXJuaW5nOiBkb2pvLmlvLmJpbmQ6IHN0cmlwcGluZyBoYXNoIHZhbHVlcyBmcm9tIHVybDoiLHVybCk7DQp1cmw9dXJsLnNwbGl0KCIjIilbMF07DQp9DQppZihfMmIzWyJmaWxlIl0pew0KXzJiMy5tZXRob2Q9ImdldCI7DQp9DQppZighXzJiM1sibWV0aG9kIl0pew0KXzJiMy5tZXRob2Q9ImdldCI7DQp9DQppZihfMmIzLm1ldGhvZC50b0xvd2VyQ2FzZSgpPT0iZ2V0Iil7DQpfMmIzLm11bHRpcGFydD1mYWxzZTsNCn1lbHNlew0KaWYoXzJiM1siZmlsZSJdKXsNCl8yYjMubXVsdGlwYXJ0PWZhbHNlOw0KfWVsc2V7DQppZighXzJiM1sibXVsdGlwYXJ0Il0pew0KXzJiMy5tdWx0aXBhcnQ9ZmFsc2U7DQp9DQp9DQp9DQppZihfMmIzWyJiYWNrQnV0dG9uIl18fF8yYjNbImJhY2siXXx8XzJiM1siY2hhbmdlVXJsIl0pew0KZG9qby51bmRvLmJyb3dzZXIuYWRkVG9IaXN0b3J5KF8yYjMpOw0KfQ0KdmFyIF8yYjg9XzJiM1siY29udGVudCJdfHx7fTsNCmlmKF8yYjMuc2VuZFRyYW5zcG9ydCl7DQpfMmI4WyJkb2pvLnRyYW5zcG9ydCJdPSJ4bWxodHRwIjsNCn0NCmRvew0KaWYoXzJiMy5wb3N0Q29udGVudCl7DQpfMmI1PV8yYjMucG9zdENvbnRlbnQ7DQpicmVhazsNCn0NCmlmKF8yYjgpew0KXzJiNSs9ZG9qby5pby5hcmdzRnJvbU1hcChfMmI4LF8yYjMuZW5jb2RpbmcpOw0KfQ0KaWYoXzJiMy5tZXRob2QudG9Mb3dlckNhc2UoKT09ImdldCJ8fCFfMmIzLm11bHRpcGFydCl7DQpicmVhazsNCn0NCnZhciB0PVtdOw0KaWYoXzJiNS5sZW5ndGgpew0KdmFyIHE9XzJiNS5zcGxpdCgiJiIpOw0KZm9yKHZhciBpPTA7aTxxLmxlbmd0aDsrK2kpew0KaWYocVtpXS5sZW5ndGgpew0KdmFyIHA9cVtpXS5zcGxpdCgiPSIpOw0KdC5wdXNoKCItLSIrdGhpcy5tdWx0aXBhcnRCb3VuZGFyeSwiQ29udGVudC1EaXNwb3NpdGlvbjogZm9ybS1kYXRhOyBuYW1lPVwiIitwWzBdKyJcIiIsIiIscFsxXSk7DQp9DQp9DQp9DQppZihfMmIzLmZpbGUpew0KaWYoZG9qby5sYW5nLmlzQXJyYXkoXzJiMy5maWxlKSl7DQpmb3IodmFyIGk9MDtpPF8yYjMuZmlsZS5sZW5ndGg7KytpKXsNCnZhciBvPV8yYjMuZmlsZVtpXTsNCnQucHVzaCgiLS0iK3RoaXMubXVsdGlwYXJ0Qm91bmRhcnksIkNvbnRlbnQtRGlzcG9zaXRpb246IGZvcm0tZGF0YTsgbmFtZT1cIiIrby5uYW1lKyJcIjsgZmlsZW5hbWU9XCIiKygiZmlsZU5hbWUiIGluIG8/by5maWxlTmFtZTpvLm5hbWUpKyJcIiIsIkNvbnRlbnQtVHlwZTogIisoImNvbnRlbnRUeXBlIiBpbiBvP28uY29udGVudFR5cGU6ImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSIpLCIiLG8uY29udGVudCk7DQp9DQp9ZWxzZXsNCnZhciBvPV8yYjMuZmlsZTsNCnQucHVzaCgiLS0iK3RoaXMubXVsdGlwYXJ0Qm91bmRhcnksIkNvbnRlbnQtRGlzcG9zaXRpb246IGZvcm0tZGF0YTsgbmFtZT1cIiIrby5uYW1lKyJcIjsgZmlsZW5hbWU9XCIiKygiZmlsZU5hbWUiIGluIG8/by5maWxlTmFtZTpvLm5hbWUpKyJcIiIsIkNvbnRlbnQtVHlwZTogIisoImNvbnRlbnRUeXBlIiBpbiBvP28uY29udGVudFR5cGU6ImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSIpLCIiLG8uY29udGVudCk7DQp9DQp9DQppZih0Lmxlbmd0aCl7DQp0LnB1c2goIi0tIit0aGlzLm11bHRpcGFydEJvdW5kYXJ5KyItLSIsIiIpOw0KXzJiNT10LmpvaW4oIlxyXG4iKTsNCn0NCn13aGlsZShmYWxzZSk7DQp2YXIgXzJiZT1fMmIzWyJzeW5jIl0/ZmFsc2U6dHJ1ZTsNCnZhciBfMmJmPV8yYjNbInByZXZlbnRDYWNoZSJdfHwodGhpcy5wcmV2ZW50Q2FjaGU9PXRydWUmJl8yYjNbInByZXZlbnRDYWNoZSJdIT1mYWxzZSk7DQp2YXIgXzJjMD1fMmIzWyJ1c2VDYWNoZSJdPT10cnVlfHwodGhpcy51c2VDYWNoZT09dHJ1ZSYmXzJiM1sidXNlQ2FjaGUiXSE9ZmFsc2UpOw0KaWYoIV8yYmYmJl8yYzApew0KdmFyIF8yYzE9Z2V0RnJvbUNhY2hlKHVybCxfMmI1LF8yYjMubWV0aG9kKTsNCmlmKF8yYzEpew0KZG9Mb2FkKF8yYjMsXzJjMSx1cmwsXzJiNSxmYWxzZSk7DQpyZXR1cm47DQp9DQp9DQp2YXIgaHR0cD1kb2pvLmhvc3RlbnYuZ2V0WG1saHR0cE9iamVjdChfMmIzKTsNCnZhciBfMmMzPWZhbHNlOw0KaWYoXzJiZSl7DQp2YXIgXzJjND10aGlzLmluRmxpZ2h0LnB1c2goeyJyZXEiOl8yYjMsImh0dHAiOmh0dHAsInVybCI6dXJsLCJxdWVyeSI6XzJiNSwidXNlQ2FjaGUiOl8yYzAsInN0YXJ0VGltZSI6XzJiMy50aW1lb3V0U2Vjb25kcz8obmV3IERhdGUoKSkuZ2V0VGltZSgpOjB9KTsNCnRoaXMuc3RhcnRXYXRjaGluZ0luRmxpZ2h0KCk7DQp9ZWxzZXsNCl8yOTMuX2Jsb2NrQXN5bmM9dHJ1ZTsNCn0NCmlmKF8yYjMubWV0aG9kLnRvTG93ZXJDYXNlKCk9PSJwb3N0Iil7DQppZighXzJiMy51c2VyKXsNCmh0dHAub3BlbigiUE9TVCIsdXJsLF8yYmUpOw0KfWVsc2V7DQpodHRwLm9wZW4oIlBPU1QiLHVybCxfMmJlLF8yYjMudXNlcixfMmIzLnBhc3N3b3JkKTsNCn0NCnNldEhlYWRlcnMoaHR0cCxfMmIzKTsNCmh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIixfMmIzLm11bHRpcGFydD8oIm11bHRpcGFydC9mb3JtLWRhdGE7IGJvdW5kYXJ5PSIrdGhpcy5tdWx0aXBhcnRCb3VuZGFyeSk6KF8yYjMuY29udGVudFR5cGV8fCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKSk7DQp0cnl7DQpodHRwLnNlbmQoXzJiNSk7DQp9DQpjYXRjaChlKXsNCmlmKHR5cGVvZiBodHRwLmFib3J0PT0iZnVuY3Rpb24iKXsNCmh0dHAuYWJvcnQoKTsNCn0NCmRvTG9hZChfMmIzLHtzdGF0dXM6NDA0fSx1cmwsXzJiNSxfMmMwKTsNCn0NCn1lbHNlew0KdmFyIF8yYzU9dXJsOw0KaWYoXzJiNSE9IiIpew0KXzJjNSs9KF8yYzUuaW5kZXhPZigiPyIpPi0xPyImIjoiPyIpK18yYjU7DQp9DQppZihfMmJmKXsNCl8yYzUrPShkb2pvLnN0cmluZy5lbmRzV2l0aEFueShfMmM1LCI/IiwiJiIpPyIiOihfMmM1LmluZGV4T2YoIj8iKT4tMT8iJiI6Ij8iKSkrImRvam8ucHJldmVudENhY2hlPSIrbmV3IERhdGUoKS52YWx1ZU9mKCk7DQp9DQppZighXzJiMy51c2VyKXsNCmh0dHAub3BlbihfMmIzLm1ldGhvZC50b1VwcGVyQ2FzZSgpLF8yYzUsXzJiZSk7DQp9ZWxzZXsNCmh0dHAub3BlbihfMmIzLm1ldGhvZC50b1VwcGVyQ2FzZSgpLF8yYzUsXzJiZSxfMmIzLnVzZXIsXzJiMy5wYXNzd29yZCk7DQp9DQpzZXRIZWFkZXJzKGh0dHAsXzJiMyk7DQp0cnl7DQpodHRwLnNlbmQobnVsbCk7DQp9DQpjYXRjaChlKXsNCmlmKHR5cGVvZiBodHRwLmFib3J0PT0iZnVuY3Rpb24iKXsNCmh0dHAuYWJvcnQoKTsNCn0NCmRvTG9hZChfMmIzLHtzdGF0dXM6NDA0fSx1cmwsXzJiNSxfMmMwKTsNCn0NCn0NCmlmKCFfMmJlKXsNCmRvTG9hZChfMmIzLGh0dHAsdXJsLF8yYjUsXzJjMCk7DQpfMjkzLl9ibG9ja0FzeW5jPWZhbHNlOw0KfQ0KXzJiMy5hYm9ydD1mdW5jdGlvbigpew0KdHJ5ew0KaHR0cC5fYWJvcnRlZD10cnVlOw0KfQ0KY2F0Y2goZSl7DQp9DQpyZXR1cm4gaHR0cC5hYm9ydCgpOw0KfTsNCnJldHVybjsNCn07DQpkb2pvLmlvLnRyYW5zcG9ydHMuYWRkVHJhbnNwb3J0KCJYTUxIVFRQVHJhbnNwb3J0Iik7DQp9Ow0KZG9qby5wcm92aWRlKCJkb2pvLmlvLmNvb2tpZSIpOw0KZG9qby5pby5jb29raWUuc2V0Q29va2llPWZ1bmN0aW9uKG5hbWUsXzJjNyxkYXlzLHBhdGgsXzJjYSxfMmNiKXsNCn07DQpkb2pvLmlvLmNvb2tpZS5zZXQ9ZG9qby5pby5jb29raWUuc2V0Q29va2llOw0KZG9qby5pby5jb29raWUuZ2V0Q29va2llPWZ1bmN0aW9uKG5hbWUpew0KdmFyIGlkeD1kb2N1bWVudC5jb29raWUubGFzdEluZGV4T2YobmFtZSsiPSIpOw0KaWYoaWR4PT0tMSl7DQpyZXR1cm4gbnVsbDsNCn0NCnZhciBfMmQwPWRvY3VtZW50LmNvb2tpZS5zdWJzdHJpbmcoaWR4K25hbWUubGVuZ3RoKzEpOw0KdmFyIGVuZD1fMmQwLmluZGV4T2YoIjsiKTsNCmlmKGVuZD09LTEpew0KZW5kPV8yZDAubGVuZ3RoOw0KfQ0KXzJkMD1fMmQwLnN1YnN0cmluZygwLGVuZCk7DQpfMmQwPXVuZXNjYXBlKF8yZDApOw0KcmV0dXJuIF8yZDA7DQp9Ow0KZG9qby5pby5jb29raWUuZ2V0PWRvam8uaW8uY29va2llLmdldENvb2tpZTsNCmRvam8uaW8uY29va2llLmRlbGV0ZUNvb2tpZT1mdW5jdGlvbihuYW1lKXsNCmRvam8uaW8uY29va2llLnNldENvb2tpZShuYW1lLCItIiwwKTsNCn07DQpkb2pvLmlvLmNvb2tpZS5zZXRPYmplY3RDb29raWU9ZnVuY3Rpb24obmFtZSxvYmosZGF5cyxwYXRoLF8yZDcsXzJkOCxfMmQ5KXsNCmlmKGFyZ3VtZW50cy5sZW5ndGg9PTUpew0KXzJkOT1fMmQ3Ow0KXzJkNz1udWxsOw0KXzJkOD1udWxsOw0KfQ0KdmFyIF8yZGE9W10sXzJkYixfMmRjPSIiOw0KaWYoIV8yZDkpew0KXzJkYj1kb2pvLmlvLmNvb2tpZS5nZXRPYmplY3RDb29raWUobmFtZSk7DQp9DQppZihkYXlzPj0wKXsNCmlmKCFfMmRiKXsNCl8yZGI9e307DQp9DQpmb3IodmFyIHByb3AgaW4gb2JqKXsNCmlmKHByb3A9PW51bGwpew0KZGVsZXRlIF8yZGJbcHJvcF07DQp9ZWxzZXsNCmlmKHR5cGVvZiBvYmpbcHJvcF09PSJzdHJpbmcifHx0eXBlb2Ygb2JqW3Byb3BdPT0ibnVtYmVyIil7DQpfMmRiW3Byb3BdPW9ialtwcm9wXTsNCn0NCn0NCn0NCnByb3A9bnVsbDsNCmZvcih2YXIgcHJvcCBpbiBfMmRiKXsNCl8yZGEucHVzaChlc2NhcGUocHJvcCkrIj0iK2VzY2FwZShfMmRiW3Byb3BdKSk7DQp9DQpfMmRjPV8yZGEuam9pbigiJiIpOw0KfQ0KZG9qby5pby5jb29raWUuc2V0Q29va2llKG5hbWUsXzJkYyxkYXlzLHBhdGgsXzJkNyxfMmQ4KTsNCn07DQpkb2pvLmlvLmNvb2tpZS5nZXRPYmplY3RDb29raWU9ZnVuY3Rpb24obmFtZSl7DQp2YXIgXzJkZj1udWxsLF8yZTA9ZG9qby5pby5jb29raWUuZ2V0Q29va2llKG5hbWUpOw0KaWYoXzJlMCl7DQpfMmRmPXt9Ow0KdmFyIF8yZTE9XzJlMC5zcGxpdCgiJiIpOw0KZm9yKHZhciBpPTA7aTxfMmUxLmxlbmd0aDtpKyspew0KdmFyIHBhaXI9XzJlMVtpXS5zcGxpdCgiPSIpOw0KdmFyIF8yZTQ9cGFpclsxXTsNCmlmKGlzTmFOKF8yZTQpKXsNCl8yZTQ9dW5lc2NhcGUocGFpclsxXSk7DQp9DQpfMmRmW3VuZXNjYXBlKHBhaXJbMF0pXT1fMmU0Ow0KfQ0KfQ0KcmV0dXJuIF8yZGY7DQp9Ow0KZG9qby5pby5jb29raWUuaXNTdXBwb3J0ZWQ9ZnVuY3Rpb24oKXsNCmlmKHR5cGVvZiBuYXZpZ2F0b3IuY29va2llRW5hYmxlZCE9ImJvb2xlYW4iKXsNCmRvam8uaW8uY29va2llLnNldENvb2tpZSgiX19UZXN0aW5nWW91ckJyb3dzZXJGb3JDb29raWVTdXBwb3J0X18iLCJDb29raWVzQWxsb3dlZCIsOTAsbnVsbCk7DQp2YXIgXzJlNT1kb2pvLmlvLmNvb2tpZS5nZXRDb29raWUoIl9fVGVzdGluZ1lvdXJCcm93c2VyRm9yQ29va2llU3VwcG9ydF9fIik7DQpuYXZpZ2F0b3IuY29va2llRW5hYmxlZD0oXzJlNT09IkNvb2tpZXNBbGxvd2VkIik7DQppZihuYXZpZ2F0b3IuY29va2llRW5hYmxlZCl7DQp0aGlzLmRlbGV0ZUNvb2tpZSgiX19UZXN0aW5nWW91ckJyb3dzZXJGb3JDb29raWVTdXBwb3J0X18iKTsNCn0NCn0NCnJldHVybiBuYXZpZ2F0b3IuY29va2llRW5hYmxlZDsNCn07DQppZighZG9qby5pby5jb29raWVzKXsNCmRvam8uaW8uY29va2llcz1kb2pvLmlvLmNvb2tpZTsNCn0NCmRvam8ucHJvdmlkZSgiZG9qby5pby4qIik7DQpkb2pvLnByb3ZpZGUoImRvam8uaW8iKTsNCmRvam8uZGVwcmVjYXRlZCgiZG9qby5pbyIsInJlcGxhY2VkIGJ5IGRvam8uaW8uKiIsIjAuNSIpOw0KZG9qby5wcm92aWRlKCJkb2pvLmV2ZW50LmNvbW1vbiIpOw0KZG9qby5ldmVudD1uZXcgZnVuY3Rpb24oKXsNCnRoaXMuX2NhblRpbWVvdXQ9ZG9qby5sYW5nLmlzRnVuY3Rpb24oZGpfZ2xvYmFsWyJzZXRUaW1lb3V0Il0pfHxkb2pvLmxhbmcuaXNBbGllbihkal9nbG9iYWxbInNldFRpbWVvdXQiXSk7DQpmdW5jdGlvbiBpbnRlcnBvbGF0ZUFyZ3MoYXJncyxfMmU3KXsNCnZhciBkbD1kb2pvLmxhbmc7DQp2YXIgYW89e3NyY09iajpkal9nbG9iYWwsc3JjRnVuYzpudWxsLGFkdmljZU9iajpkal9nbG9iYWwsYWR2aWNlRnVuYzpudWxsLGFyb3VuZE9iajpudWxsLGFyb3VuZEZ1bmM6bnVsbCxhZHZpY2VUeXBlOihhcmdzLmxlbmd0aD4yKT9hcmdzWzBdOiJhZnRlciIscHJlY2VkZW5jZToibGFzdCIsb25jZTpmYWxzZSxkZWxheTpudWxsLHJhdGU6MCxhZHZpY2VNc2c6ZmFsc2V9Ow0Kc3dpdGNoKGFyZ3MubGVuZ3RoKXsNCmNhc2UgMDoNCnJldHVybjsNCmNhc2UgMToNCnJldHVybjsNCmNhc2UgMjoNCmFvLnNyY0Z1bmM9YXJnc1swXTsNCmFvLmFkdmljZUZ1bmM9YXJnc1sxXTsNCmJyZWFrOw0KY2FzZSAzOg0KaWYoKGRsLmlzT2JqZWN0KGFyZ3NbMF0pKSYmKGRsLmlzU3RyaW5nKGFyZ3NbMV0pKSYmKGRsLmlzU3RyaW5nKGFyZ3NbMl0pKSl7DQphby5hZHZpY2VUeXBlPSJhZnRlciI7DQphby5zcmNPYmo9YXJnc1swXTsNCmFvLnNyY0Z1bmM9YXJnc1sxXTsNCmFvLmFkdmljZUZ1bmM9YXJnc1syXTsNCn1lbHNlew0KaWYoKGRsLmlzU3RyaW5nKGFyZ3NbMV0pKSYmKGRsLmlzU3RyaW5nKGFyZ3NbMl0pKSl7DQphby5zcmNGdW5jPWFyZ3NbMV07DQphby5hZHZpY2VGdW5jPWFyZ3NbMl07DQp9ZWxzZXsNCmlmKChkbC5pc09iamVjdChhcmdzWzBdKSkmJihkbC5pc1N0cmluZyhhcmdzWzFdKSkmJihkbC5pc0Z1bmN0aW9uKGFyZ3NbMl0pKSl7DQphby5hZHZpY2VUeXBlPSJhZnRlciI7DQphby5zcmNPYmo9YXJnc1swXTsNCmFvLnNyY0Z1bmM9YXJnc1sxXTsNCnZhciBfMmVhPWRsLm5hbWVBbm9uRnVuYyhhcmdzWzJdLGFvLmFkdmljZU9iaixfMmU3KTsNCmFvLmFkdmljZUZ1bmM9XzJlYTsNCn1lbHNlew0KaWYoKGRsLmlzRnVuY3Rpb24oYXJnc1swXSkpJiYoZGwuaXNPYmplY3QoYXJnc1sxXSkpJiYoZGwuaXNTdHJpbmcoYXJnc1syXSkpKXsNCmFvLmFkdmljZVR5cGU9ImFmdGVyIjsNCmFvLnNyY09iaj1kal9nbG9iYWw7DQp2YXIgXzJlYT1kbC5uYW1lQW5vbkZ1bmMoYXJnc1swXSxhby5zcmNPYmosXzJlNyk7DQphby5zcmNGdW5jPV8yZWE7DQphby5hZHZpY2VPYmo9YXJnc1sxXTsNCmFvLmFkdmljZUZ1bmM9YXJnc1syXTsNCn0NCn0NCn0NCn0NCmJyZWFrOw0KY2FzZSA0Og0KaWYoKGRsLmlzT2JqZWN0KGFyZ3NbMF0pKSYmKGRsLmlzT2JqZWN0KGFyZ3NbMl0pKSl7DQphby5hZHZpY2VUeXBlPSJhZnRlciI7DQphby5zcmNPYmo9YXJnc1swXTsNCmFvLnNyY0Z1bmM9YXJnc1sxXTsNCmFvLmFkdmljZU9iaj1hcmdzWzJdOw0KYW8uYWR2aWNlRnVuYz1hcmdzWzNdOw0KfWVsc2V7DQppZigoZGwuaXNTdHJpbmcoYXJnc1swXSkpJiYoZGwuaXNTdHJpbmcoYXJnc1sxXSkpJiYoZGwuaXNPYmplY3QoYXJnc1syXSkpKXsNCmFvLmFkdmljZVR5cGU9YXJnc1swXTsNCmFvLnNyY09iaj1kal9nbG9iYWw7DQphby5zcmNGdW5jPWFyZ3NbMV07DQphby5hZHZpY2VPYmo9YXJnc1syXTsNCmFvLmFkdmljZUZ1bmM9YXJnc1szXTsNCn1lbHNlew0KaWYoKGRsLmlzU3RyaW5nKGFyZ3NbMF0pKSYmKGRsLmlzRnVuY3Rpb24oYXJnc1sxXSkpJiYoZGwuaXNPYmplY3QoYXJnc1syXSkpKXsNCmFvLmFkdmljZVR5cGU9YXJnc1swXTsNCmFvLnNyY09iaj1kal9nbG9iYWw7DQp2YXIgXzJlYT1kbC5uYW1lQW5vbkZ1bmMoYXJnc1sxXSxkal9nbG9iYWwsXzJlNyk7DQphby5zcmNGdW5jPV8yZWE7DQphby5hZHZpY2VPYmo9YXJnc1syXTsNCmFvLmFkdmljZUZ1bmM9YXJnc1szXTsNCn1lbHNlew0KaWYoKGRsLmlzU3RyaW5nKGFyZ3NbMF0pKSYmKGRsLmlzT2JqZWN0KGFyZ3NbMV0pKSYmKGRsLmlzU3RyaW5nKGFyZ3NbMl0pKSYmKGRsLmlzRnVuY3Rpb24oYXJnc1szXSkpKXsNCmFvLnNyY09iaj1hcmdzWzFdOw0KYW8uc3JjRnVuYz1hcmdzWzJdOw0KdmFyIF8yZWE9ZGwubmFtZUFub25GdW5jKGFyZ3NbM10sZGpfZ2xvYmFsLF8yZTcpOw0KYW8uYWR2aWNlT2JqPWRqX2dsb2JhbDsNCmFvLmFkdmljZUZ1bmM9XzJlYTsNCn1lbHNlew0KaWYoZGwuaXNPYmplY3QoYXJnc1sxXSkpew0KYW8uc3JjT2JqPWFyZ3NbMV07DQphby5zcmNGdW5jPWFyZ3NbMl07DQphby5hZHZpY2VPYmo9ZGpfZ2xvYmFsOw0KYW8uYWR2aWNlRnVuYz1hcmdzWzNdOw0KfWVsc2V7DQppZihkbC5pc09iamVjdChhcmdzWzJdKSl7DQphby5zcmNPYmo9ZGpfZ2xvYmFsOw0KYW8uc3JjRnVuYz1hcmdzWzFdOw0KYW8uYWR2aWNlT2JqPWFyZ3NbMl07DQphby5hZHZpY2VGdW5jPWFyZ3NbM107DQp9ZWxzZXsNCmFvLnNyY09iaj1hby5hZHZpY2VPYmo9YW8uYXJvdW5kT2JqPWRqX2dsb2JhbDsNCmFvLnNyY0Z1bmM9YXJnc1sxXTsNCmFvLmFkdmljZUZ1bmM9YXJnc1syXTsNCmFvLmFyb3VuZEZ1bmM9YXJnc1szXTsNCn0NCn0NCn0NCn0NCn0NCn0NCmJyZWFrOw0KY2FzZSA2Og0KYW8uc3JjT2JqPWFyZ3NbMV07DQphby5zcmNGdW5jPWFyZ3NbMl07DQphby5hZHZpY2VPYmo9YXJnc1szXTsNCmFvLmFkdmljZUZ1bmM9YXJnc1s0XTsNCmFvLmFyb3VuZEZ1bmM9YXJnc1s1XTsNCmFvLmFyb3VuZE9iaj1kal9nbG9iYWw7DQpicmVhazsNCmRlZmF1bHQ6DQphby5zcmNPYmo9YXJnc1sxXTsNCmFvLnNyY0Z1bmM9YXJnc1syXTsNCmFvLmFkdmljZU9iaj1hcmdzWzNdOw0KYW8uYWR2aWNlRnVuYz1hcmdzWzRdOw0KYW8uYXJvdW5kT2JqPWFyZ3NbNV07DQphby5hcm91bmRGdW5jPWFyZ3NbNl07DQphby5vbmNlPWFyZ3NbN107DQphby5kZWxheT1hcmdzWzhdOw0KYW8ucmF0ZT1hcmdzWzldOw0KYW8uYWR2aWNlTXNnPWFyZ3NbMTBdOw0KYnJlYWs7DQp9DQppZihkbC5pc0Z1bmN0aW9uKGFvLmFyb3VuZEZ1bmMpKXsNCnZhciBfMmVhPWRsLm5hbWVBbm9uRnVuYyhhby5hcm91bmRGdW5jLGFvLmFyb3VuZE9iaixfMmU3KTsNCmFvLmFyb3VuZEZ1bmM9XzJlYTsNCn0NCmlmKGRsLmlzRnVuY3Rpb24oYW8uc3JjRnVuYykpew0KYW8uc3JjRnVuYz1kbC5nZXROYW1lSW5PYmooYW8uc3JjT2JqLGFvLnNyY0Z1bmMpOw0KfQ0KaWYoZGwuaXNGdW5jdGlvbihhby5hZHZpY2VGdW5jKSl7DQphby5hZHZpY2VGdW5jPWRsLmdldE5hbWVJbk9iaihhby5hZHZpY2VPYmosYW8uYWR2aWNlRnVuYyk7DQp9DQppZigoYW8uYXJvdW5kT2JqKSYmKGRsLmlzRnVuY3Rpb24oYW8uYXJvdW5kRnVuYykpKXsNCmFvLmFyb3VuZEZ1bmM9ZGwuZ2V0TmFtZUluT2JqKGFvLmFyb3VuZE9iaixhby5hcm91bmRGdW5jKTsNCn0NCmlmKCFhby5zcmNPYmopew0KZG9qby5yYWlzZSgiYmFkIHNyY09iaiBmb3Igc3JjRnVuYzogIithby5zcmNGdW5jKTsNCn0NCmlmKCFhby5hZHZpY2VPYmopew0KZG9qby5yYWlzZSgiYmFkIGFkdmljZU9iaiBmb3IgYWR2aWNlRnVuYzogIithby5hZHZpY2VGdW5jKTsNCn0NCmlmKCFhby5hZHZpY2VGdW5jKXsNCmRvam8uZGVidWcoImJhZCBhZHZpY2VGdW5jIGZvciBzcmNGdW5jOiAiK2FvLnNyY0Z1bmMpOw0KZG9qby5kZWJ1Z1NoYWxsb3coYW8pOw0KfQ0KcmV0dXJuIGFvOw0KfQ0KdGhpcy5jb25uZWN0PWZ1bmN0aW9uKCl7DQppZihhcmd1bWVudHMubGVuZ3RoPT0xKXsNCnZhciBhbz1hcmd1bWVudHNbMF07DQp9ZWxzZXsNCnZhciBhbz1pbnRlcnBvbGF0ZUFyZ3MoYXJndW1lbnRzLHRydWUpOw0KfQ0KaWYoZG9qby5sYW5nLmlzU3RyaW5nKGFvLnNyY0Z1bmMpJiYoYW8uc3JjRnVuYy50b0xvd2VyQ2FzZSgpPT0ib25rZXkiKSl7DQppZihkb2pvLnJlbmRlci5odG1sLmllKXsNCmFvLnNyY0Z1bmM9Im9ua2V5ZG93biI7DQp0aGlzLmNvbm5lY3QoYW8pOw0KfQ0KYW8uc3JjRnVuYz0ib25rZXlwcmVzcyI7DQp9DQppZihkb2pvLmxhbmcuaXNBcnJheShhby5zcmNPYmopJiZhby5zcmNPYmohPSIiKXsNCnZhciBfMmVjPXt9Ow0KZm9yKHZhciB4IGluIGFvKXsNCl8yZWNbeF09YW9beF07DQp9DQp2YXIgbWpwcz1bXTsNCmRvam8ubGFuZy5mb3JFYWNoKGFvLnNyY09iaixmdW5jdGlvbihzcmMpew0KaWYoKGRvam8ucmVuZGVyLmh0bWwuY2FwYWJsZSkmJihkb2pvLmxhbmcuaXNTdHJpbmcoc3JjKSkpew0Kc3JjPWRvam8uYnlJZChzcmMpOw0KfQ0KXzJlYy5zcmNPYmo9c3JjOw0KbWpwcy5wdXNoKGRvam8uZXZlbnQuY29ubmVjdC5jYWxsKGRvam8uZXZlbnQsXzJlYykpOw0KfSk7DQpyZXR1cm4gbWpwczsNCn0NCnZhciBtanA9ZG9qby5ldmVudC5NZXRob2RKb2luUG9pbnQuZ2V0Rm9yTWV0aG9kKGFvLnNyY09iaixhby5zcmNGdW5jKTsNCmlmKGFvLmFkdmljZUZ1bmMpew0KdmFyIG1qcDI9ZG9qby5ldmVudC5NZXRob2RKb2luUG9pbnQuZ2V0Rm9yTWV0aG9kKGFvLmFkdmljZU9iaixhby5hZHZpY2VGdW5jKTsNCn0NCm1qcC5rd0FkZEFkdmljZShhbyk7DQpyZXR1cm4gbWpwOw0KfTsNCnRoaXMubG9nPWZ1bmN0aW9uKGExLGEyKXsNCnZhciBfMmY0Ow0KaWYoKGFyZ3VtZW50cy5sZW5ndGg9PTEpJiYodHlwZW9mIGExPT0ib2JqZWN0Iikpew0KXzJmND1hMTsNCn1lbHNlew0KXzJmND17c3JjT2JqOmExLHNyY0Z1bmM6YTJ9Ow0KfQ0KXzJmNC5hZHZpY2VGdW5jPWZ1bmN0aW9uKCl7DQp2YXIgXzJmNT1bXTsNCmZvcih2YXIgeD0wO3g8YXJndW1lbnRzLmxlbmd0aDt4Kyspew0KXzJmNS5wdXNoKGFyZ3VtZW50c1t4XSk7DQp9DQpkb2pvLmRlYnVnKCIoIitfMmY0LnNyY09iaisiKS4iK18yZjQuc3JjRnVuYywiOiIsXzJmNS5qb2luKCIsICIpKTsNCn07DQp0aGlzLmt3Q29ubmVjdChfMmY0KTsNCn07DQp0aGlzLmNvbm5lY3RCZWZvcmU9ZnVuY3Rpb24oKXsNCnZhciBhcmdzPVsiYmVmb3JlIl07DQpmb3IodmFyIGk9MDtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXsNCmFyZ3MucHVzaChhcmd1bWVudHNbaV0pOw0KfQ0KcmV0dXJuIHRoaXMuY29ubmVjdC5hcHBseSh0aGlzLGFyZ3MpOw0KfTsNCnRoaXMuY29ubmVjdEFyb3VuZD1mdW5jdGlvbigpew0KdmFyIGFyZ3M9WyJhcm91bmQiXTsNCmZvcih2YXIgaT0wO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspew0KYXJncy5wdXNoKGFyZ3VtZW50c1tpXSk7DQp9DQpyZXR1cm4gdGhpcy5jb25uZWN0LmFwcGx5KHRoaXMsYXJncyk7DQp9Ow0KdGhpcy5jb25uZWN0T25jZT1mdW5jdGlvbigpew0KdmFyIGFvPWludGVycG9sYXRlQXJncyhhcmd1bWVudHMsdHJ1ZSk7DQphby5vbmNlPXRydWU7DQpyZXR1cm4gdGhpcy5jb25uZWN0KGFvKTsNCn07DQp0aGlzLl9rd0Nvbm5lY3RJbXBsPWZ1bmN0aW9uKF8yZmMsXzJmZCl7DQp2YXIgZm49KF8yZmQpPyJkaXNjb25uZWN0IjoiY29ubmVjdCI7DQppZih0eXBlb2YgXzJmY1sic3JjRnVuYyJdPT0iZnVuY3Rpb24iKXsNCl8yZmMuc3JjT2JqPV8yZmNbInNyY09iaiJdfHxkal9nbG9iYWw7DQp2YXIgXzJmZj1kb2pvLmxhbmcubmFtZUFub25GdW5jKF8yZmMuc3JjRnVuYyxfMmZjLnNyY09iaix0cnVlKTsNCl8yZmMuc3JjRnVuYz1fMmZmOw0KfQ0KaWYodHlwZW9mIF8yZmNbImFkdmljZUZ1bmMiXT09ImZ1bmN0aW9uIil7DQpfMmZjLmFkdmljZU9iaj1fMmZjWyJhZHZpY2VPYmoiXXx8ZGpfZ2xvYmFsOw0KdmFyIF8yZmY9ZG9qby5sYW5nLm5hbWVBbm9uRnVuYyhfMmZjLmFkdmljZUZ1bmMsXzJmYy5hZHZpY2VPYmosdHJ1ZSk7DQpfMmZjLmFkdmljZUZ1bmM9XzJmZjsNCn0NCl8yZmMuc3JjT2JqPV8yZmNbInNyY09iaiJdfHxkal9nbG9iYWw7DQpfMmZjLmFkdmljZU9iaj1fMmZjWyJhZHZpY2VPYmoiXXx8XzJmY1sidGFyZ2V0T2JqIl18fGRqX2dsb2JhbDsNCl8yZmMuYWR2aWNlRnVuYz1fMmZjWyJhZHZpY2VGdW5jIl18fF8yZmNbInRhcmdldEZ1bmMiXTsNCnJldHVybiBkb2pvLmV2ZW50W2ZuXShfMmZjKTsNCn07DQp0aGlzLmt3Q29ubmVjdD1mdW5jdGlvbihfMzAwKXsNCnJldHVybiB0aGlzLl9rd0Nvbm5lY3RJbXBsKF8zMDAsZmFsc2UpOw0KfTsNCnRoaXMuZGlzY29ubmVjdD1mdW5jdGlvbigpew0KaWYoYXJndW1lbnRzLmxlbmd0aD09MSl7DQp2YXIgYW89YXJndW1lbnRzWzBdOw0KfWVsc2V7DQp2YXIgYW89aW50ZXJwb2xhdGVBcmdzKGFyZ3VtZW50cyx0cnVlKTsNCn0NCmlmKCFhby5hZHZpY2VGdW5jKXsNCnJldHVybjsNCn0NCmlmKGRvam8ubGFuZy5pc1N0cmluZyhhby5zcmNGdW5jKSYmKGFvLnNyY0Z1bmMudG9Mb3dlckNhc2UoKT09Im9ua2V5Iikpew0KaWYoZG9qby5yZW5kZXIuaHRtbC5pZSl7DQphby5zcmNGdW5jPSJvbmtleWRvd24iOw0KdGhpcy5kaXNjb25uZWN0KGFvKTsNCn0NCmFvLnNyY0Z1bmM9Im9ua2V5cHJlc3MiOw0KfQ0KdmFyIG1qcD1kb2pvLmV2ZW50Lk1ldGhvZEpvaW5Qb2ludC5nZXRGb3JNZXRob2QoYW8uc3JjT2JqLGFvLnNyY0Z1bmMpOw0KcmV0dXJuIG1qcC5yZW1vdmVBZHZpY2UoYW8uYWR2aWNlT2JqLGFvLmFkdmljZUZ1bmMsYW8uYWR2aWNlVHlwZSxhby5vbmNlKTsNCn07DQp0aGlzLmt3RGlzY29ubmVjdD1mdW5jdGlvbihfMzAzKXsNCnJldHVybiB0aGlzLl9rd0Nvbm5lY3RJbXBsKF8zMDMsdHJ1ZSk7DQp9Ow0KfTsNCmRvam8uZXZlbnQuTWV0aG9kSW52b2NhdGlvbj1mdW5jdGlvbihfMzA0LG9iaixhcmdzKXsNCnRoaXMuanBfPV8zMDQ7DQp0aGlzLm9iamVjdD1vYmo7DQp0aGlzLmFyZ3M9W107DQpmb3IodmFyIHg9MDt4PGFyZ3MubGVuZ3RoO3grKyl7DQp0aGlzLmFyZ3NbeF09YXJnc1t4XTsNCn0NCnRoaXMuYXJvdW5kX2luZGV4PS0xOw0KfTsNCmRvam8uZXZlbnQuTWV0aG9kSW52b2NhdGlvbi5wcm90b3R5cGUucHJvY2VlZD1mdW5jdGlvbigpew0KdGhpcy5hcm91bmRfaW5kZXgrKzsNCmlmKHRoaXMuYXJvdW5kX2luZGV4Pj10aGlzLmpwXy5hcm91bmQubGVuZ3RoKXsNCnJldHVybiB0aGlzLmpwXy5vYmplY3RbdGhpcy5qcF8ubWV0aG9kbmFtZV0uYXBwbHkodGhpcy5qcF8ub2JqZWN0LHRoaXMuYXJncyk7DQp9ZWxzZXsNCnZhciB0aT10aGlzLmpwXy5hcm91bmRbdGhpcy5hcm91bmRfaW5kZXhdOw0KdmFyIG1vYmo9dGlbMF18fGRqX2dsb2JhbDsNCnZhciBtZXRoPXRpWzFdOw0KcmV0dXJuIG1vYmpbbWV0aF0uY2FsbChtb2JqLHRoaXMpOw0KfQ0KfTsNCmRvam8uZXZlbnQuTWV0aG9kSm9pblBvaW50PWZ1bmN0aW9uKG9iaixfMzBjKXsNCnRoaXMub2JqZWN0PW9ianx8ZGpfZ2xvYmFsOw0KdGhpcy5tZXRob2RuYW1lPV8zMGM7DQp0aGlzLm1ldGhvZGZ1bmM9dGhpcy5vYmplY3RbXzMwY107DQp0aGlzLnNxdWVsY2g9ZmFsc2U7DQp9Ow0KZG9qby5ldmVudC5NZXRob2RKb2luUG9pbnQuZ2V0Rm9yTWV0aG9kPWZ1bmN0aW9uKG9iaixfMzBlKXsNCmlmKCFvYmopew0Kb2JqPWRqX2dsb2JhbDsNCn0NCmlmKCFvYmpbXzMwZV0pew0Kb2JqW18zMGVdPWZ1bmN0aW9uKCl7DQp9Ow0KaWYoIW9ialtfMzBlXSl7DQpkb2pvLnJhaXNlKCJDYW5ub3Qgc2V0IGRvLW5vdGhpbmcgbWV0aG9kIG9uIHRoYXQgb2JqZWN0ICIrXzMwZSk7DQp9DQp9ZWxzZXsNCmlmKCghZG9qby5sYW5nLmlzRnVuY3Rpb24ob2JqW18zMGVdKSkmJighZG9qby5sYW5nLmlzQWxpZW4ob2JqW18zMGVdKSkpew0KcmV0dXJuIG51bGw7DQp9DQp9DQp2YXIgXzMwZj1fMzBlKyIkam9pbnBvaW50IjsNCnZhciBfMzEwPV8zMGUrIiRqb2lucG9pbnQkbWV0aG9kIjsNCnZhciBfMzExPW9ialtfMzBmXTsNCmlmKCFfMzExKXsNCnZhciBfMzEyPWZhbHNlOw0KaWYoZG9qby5ldmVudFsiYnJvd3NlciJdKXsNCmlmKChvYmpbImF0dGFjaEV2ZW50Il0pfHwob2JqWyJub2RlVHlwZSJdKXx8KG9ialsiYWRkRXZlbnRMaXN0ZW5lciJdKSl7DQpfMzEyPXRydWU7DQpkb2pvLmV2ZW50LmJyb3dzZXIuYWRkQ2xvYmJlck5vZGVBdHRycyhvYmosW18zMGYsXzMxMCxfMzBlXSk7DQp9DQp9DQp2YXIgXzMxMz1vYmpbXzMwZV0ubGVuZ3RoOw0Kb2JqW18zMTBdPW9ialtfMzBlXTsNCl8zMTE9b2JqW18zMGZdPW5ldyBkb2pvLmV2ZW50Lk1ldGhvZEpvaW5Qb2ludChvYmosXzMxMCk7DQpvYmpbXzMwZV09ZnVuY3Rpb24oKXsNCnZhciBhcmdzPVtdOw0KaWYoKF8zMTIpJiYoIWFyZ3VtZW50cy5sZW5ndGgpKXsNCnZhciBldnQ9bnVsbDsNCnRyeXsNCmlmKG9iai5vd25lckRvY3VtZW50KXsNCmV2dD1vYmoub3duZXJEb2N1bWVudC5wYXJlbnRXaW5kb3cuZXZlbnQ7DQp9ZWxzZXsNCmlmKG9iai5kb2N1bWVudEVsZW1lbnQpew0KZXZ0PW9iai5kb2N1bWVudEVsZW1lbnQub3duZXJEb2N1bWVudC5wYXJlbnRXaW5kb3cuZXZlbnQ7DQp9ZWxzZXsNCmlmKG9iai5ldmVudCl7DQpldnQ9b2JqLmV2ZW50Ow0KfWVsc2V7DQpldnQ9d2luZG93LmV2ZW50Ow0KfQ0KfQ0KfQ0KfQ0KY2F0Y2goZSl7DQpldnQ9d2luZG93LmV2ZW50Ow0KfQ0KaWYoZXZ0KXsNCmFyZ3MucHVzaChkb2pvLmV2ZW50LmJyb3dzZXIuZml4RXZlbnQoZXZ0LHRoaXMpKTsNCn0NCn1lbHNlew0KZm9yKHZhciB4PTA7eDxhcmd1bWVudHMubGVuZ3RoO3grKyl7DQppZigoeD09MCkmJihfMzEyKSYmKGRvam8uZXZlbnQuYnJvd3Nlci5pc0V2ZW50KGFyZ3VtZW50c1t4XSkpKXsNCmFyZ3MucHVzaChkb2pvLmV2ZW50LmJyb3dzZXIuZml4RXZlbnQoYXJndW1lbnRzW3hdLHRoaXMpKTsNCn1lbHNlew0KYXJncy5wdXNoKGFyZ3VtZW50c1t4XSk7DQp9DQp9DQp9DQpyZXR1cm4gXzMxMS5ydW4uYXBwbHkoXzMxMSxhcmdzKTsNCn07DQpvYmpbXzMwZV0uX19wcmVKb2luQXJpdHk9XzMxMzsNCn0NCnJldHVybiBfMzExOw0KfTsNCmRvam8ubGFuZy5leHRlbmQoZG9qby5ldmVudC5NZXRob2RKb2luUG9pbnQse3VuaW50ZXJjZXB0OmZ1bmN0aW9uKCl7DQp0aGlzLm9iamVjdFt0aGlzLm1ldGhvZG5hbWVdPXRoaXMubWV0aG9kZnVuYzsNCnRoaXMuYmVmb3JlPVtdOw0KdGhpcy5hZnRlcj1bXTsNCnRoaXMuYXJvdW5kPVtdOw0KfSxkaXNjb25uZWN0OmRvam8ubGFuZy5mb3J3YXJkKCJ1bmludGVyY2VwdCIpLHJ1bjpmdW5jdGlvbigpew0KdmFyIG9iaj10aGlzLm9iamVjdHx8ZGpfZ2xvYmFsOw0KdmFyIGFyZ3M9YXJndW1lbnRzOw0KdmFyIF8zMTk9W107DQpmb3IodmFyIHg9MDt4PGFyZ3MubGVuZ3RoO3grKyl7DQpfMzE5W3hdPWFyZ3NbeF07DQp9DQp2YXIgXzMxYj1mdW5jdGlvbihtYXJyKXsNCmlmKCFtYXJyKXsNCmRvam8uZGVidWcoIk51bGwgYXJndW1lbnQgdG8gdW5yb2xsQWR2aWNlKCkiKTsNCnJldHVybjsNCn0NCnZhciBfMzFkPW1hcnJbMF18fGRqX2dsb2JhbDsNCnZhciBfMzFlPW1hcnJbMV07DQppZighXzMxZFtfMzFlXSl7DQpkb2pvLnJhaXNlKCJmdW5jdGlvbiBcIiIrXzMxZSsiXCIgZG9lcyBub3QgZXhpc3Qgb24gXCIiK18zMWQrIlwiIik7DQp9DQp2YXIgXzMxZj1tYXJyWzJdfHxkal9nbG9iYWw7DQp2YXIgXzMyMD1tYXJyWzNdOw0KdmFyIG1zZz1tYXJyWzZdOw0KdmFyIF8zMjI7DQp2YXIgdG89e2FyZ3M6W10sanBfOnRoaXMsb2JqZWN0Om9iaixwcm9jZWVkOmZ1bmN0aW9uKCl7DQpyZXR1cm4gXzMxZFtfMzFlXS5hcHBseShfMzFkLHRvLmFyZ3MpOw0KfX07DQp0by5hcmdzPV8zMTk7DQp2YXIgXzMyND1wYXJzZUludChtYXJyWzRdKTsNCnZhciBfMzI1PSgoIWlzTmFOKF8zMjQpKSYmKG1hcnJbNF0hPT1udWxsKSYmKHR5cGVvZiBtYXJyWzRdIT0idW5kZWZpbmVkIikpOw0KaWYobWFycls1XSl7DQp2YXIgcmF0ZT1wYXJzZUludChtYXJyWzVdKTsNCnZhciBjdXI9bmV3IERhdGUoKTsNCnZhciBfMzI4PWZhbHNlOw0KaWYoKG1hcnJbImxhc3QiXSkmJigoY3VyLW1hcnIubGFzdCk8PXJhdGUpKXsNCmlmKGRvam8uZXZlbnQuX2NhblRpbWVvdXQpew0KaWYobWFyclsiZGVsYXlUaW1lciJdKXsNCmNsZWFyVGltZW91dChtYXJyLmRlbGF5VGltZXIpOw0KfQ0KdmFyIHRvZD1wYXJzZUludChyYXRlKjIpOw0KdmFyIG1jcHk9ZG9qby5sYW5nLnNoYWxsb3dDb3B5KG1hcnIpOw0KbWFyci5kZWxheVRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXsNCm1jcHlbNV09MDsNCl8zMWIobWNweSk7DQp9LHRvZCk7DQp9DQpyZXR1cm47DQp9ZWxzZXsNCm1hcnIubGFzdD1jdXI7DQp9DQp9DQppZihfMzIwKXsNCl8zMWZbXzMyMF0uY2FsbChfMzFmLHRvKTsNCn1lbHNlew0KaWYoKF8zMjUpJiYoKGRvam8ucmVuZGVyLmh0bWwpfHwoZG9qby5yZW5kZXIuc3ZnKSkpew0KZGpfZ2xvYmFsWyJzZXRUaW1lb3V0Il0oZnVuY3Rpb24oKXsNCmlmKG1zZyl7DQpfMzFkW18zMWVdLmNhbGwoXzMxZCx0byk7DQp9ZWxzZXsNCl8zMWRbXzMxZV0uYXBwbHkoXzMxZCxhcmdzKTsNCn0NCn0sXzMyNCk7DQp9ZWxzZXsNCmlmKG1zZyl7DQpfMzFkW18zMWVdLmNhbGwoXzMxZCx0byk7DQp9ZWxzZXsNCl8zMWRbXzMxZV0uYXBwbHkoXzMxZCxhcmdzKTsNCn0NCn0NCn0NCn07DQp2YXIgXzMyYj1mdW5jdGlvbigpew0KaWYodGhpcy5zcXVlbGNoKXsNCnRyeXsNCnJldHVybiBfMzFiLmFwcGx5KHRoaXMsYXJndW1lbnRzKTsNCn0NCmNhdGNoKGUpew0KZG9qby5kZWJ1ZyhlKTsNCn0NCn1lbHNlew0KcmV0dXJuIF8zMWIuYXBwbHkodGhpcyxhcmd1bWVudHMpOw0KfQ0KfTsNCmlmKCh0aGlzWyJiZWZvcmUiXSkmJih0aGlzLmJlZm9yZS5sZW5ndGg+MCkpew0KZG9qby5sYW5nLmZvckVhY2godGhpcy5iZWZvcmUuY29uY2F0KG5ldyBBcnJheSgpKSxfMzJiKTsNCn0NCnZhciBfMzJjOw0KdHJ5ew0KaWYoKHRoaXNbImFyb3VuZCJdKSYmKHRoaXMuYXJvdW5kLmxlbmd0aD4wKSl7DQp2YXIgbWk9bmV3IGRvam8uZXZlbnQuTWV0aG9kSW52b2NhdGlvbih0aGlzLG9iaixhcmdzKTsNCl8zMmM9bWkucHJvY2VlZCgpOw0KfWVsc2V7DQppZih0aGlzLm1ldGhvZGZ1bmMpew0KXzMyYz10aGlzLm9iamVjdFt0aGlzLm1ldGhvZG5hbWVdLmFwcGx5KHRoaXMub2JqZWN0LGFyZ3MpOw0KfQ0KfQ0KfQ0KY2F0Y2goZSl7DQppZighdGhpcy5zcXVlbGNoKXsNCmRvam8ucmFpc2UoZSk7DQp9DQp9DQppZigodGhpc1siYWZ0ZXIiXSkmJih0aGlzLmFmdGVyLmxlbmd0aD4wKSl7DQpkb2pvLmxhbmcuZm9yRWFjaCh0aGlzLmFmdGVyLmNvbmNhdChuZXcgQXJyYXkoKSksXzMyYik7DQp9DQpyZXR1cm4gKHRoaXMubWV0aG9kZnVuYyk/XzMyYzpudWxsOw0KfSxnZXRBcnI6ZnVuY3Rpb24oa2luZCl7DQp2YXIgdHlwZT0iYWZ0ZXIiOw0KaWYoKHR5cGVvZiBraW5kPT0ic3RyaW5nIikmJihraW5kLmluZGV4T2YoImJlZm9yZSIpIT0tMSkpew0KdHlwZT0iYmVmb3JlIjsNCn1lbHNlew0KaWYoa2luZD09ImFyb3VuZCIpew0KdHlwZT0iYXJvdW5kIjsNCn0NCn0NCmlmKCF0aGlzW3R5cGVdKXsNCnRoaXNbdHlwZV09W107DQp9DQpyZXR1cm4gdGhpc1t0eXBlXTsNCn0sa3dBZGRBZHZpY2U6ZnVuY3Rpb24oYXJncyl7DQp0aGlzLmFkZEFkdmljZShhcmdzWyJhZHZpY2VPYmoiXSxhcmdzWyJhZHZpY2VGdW5jIl0sYXJnc1siYXJvdW5kT2JqIl0sYXJnc1siYXJvdW5kRnVuYyJdLGFyZ3NbImFkdmljZVR5cGUiXSxhcmdzWyJwcmVjZWRlbmNlIl0sYXJnc1sib25jZSJdLGFyZ3NbImRlbGF5Il0sYXJnc1sicmF0ZSJdLGFyZ3NbImFkdmljZU1zZyJdKTsNCn0sYWRkQWR2aWNlOmZ1bmN0aW9uKF8zMzEsXzMzMixfMzMzLF8zMzQsXzMzNSxfMzM2LG9uY2UsXzMzOCxyYXRlLF8zM2Epew0KdmFyIGFycj10aGlzLmdldEFycihfMzM1KTsNCmlmKCFhcnIpew0KZG9qby5yYWlzZSgiYmFkIHRoaXM6ICIrdGhpcyk7DQp9DQp2YXIgYW89W18zMzEsXzMzMixfMzMzLF8zMzQsXzMzOCxyYXRlLF8zM2FdOw0KaWYob25jZSl7DQppZih0aGlzLmhhc0FkdmljZShfMzMxLF8zMzIsXzMzNSxhcnIpPj0wKXsNCnJldHVybjsNCn0NCn0NCmlmKF8zMzY9PSJmaXJzdCIpew0KYXJyLnVuc2hpZnQoYW8pOw0KfWVsc2V7DQphcnIucHVzaChhbyk7DQp9DQp9LGhhc0FkdmljZTpmdW5jdGlvbihfMzNkLF8zM2UsXzMzZixhcnIpew0KaWYoIWFycil7DQphcnI9dGhpcy5nZXRBcnIoXzMzZik7DQp9DQp2YXIgaW5kPS0xOw0KZm9yKHZhciB4PTA7eDxhcnIubGVuZ3RoO3grKyl7DQp2YXIgYWFvPSh0eXBlb2YgXzMzZT09Im9iamVjdCIpPyhuZXcgU3RyaW5nKF8zM2UpKS50b1N0cmluZygpOl8zM2U7DQp2YXIgYTFvPSh0eXBlb2YgYXJyW3hdWzFdPT0ib2JqZWN0Iik/KG5ldyBTdHJpbmcoYXJyW3hdWzFdKSkudG9TdHJpbmcoKTphcnJbeF1bMV07DQppZigoYXJyW3hdWzBdPT1fMzNkKSYmKGExbz09YWFvKSl7DQppbmQ9eDsNCn0NCn0NCnJldHVybiBpbmQ7DQp9LHJlbW92ZUFkdmljZTpmdW5jdGlvbihfMzQ1LF8zNDYsXzM0NyxvbmNlKXsNCnZhciBhcnI9dGhpcy5nZXRBcnIoXzM0Nyk7DQp2YXIgaW5kPXRoaXMuaGFzQWR2aWNlKF8zNDUsXzM0NixfMzQ3LGFycik7DQppZihpbmQ9PS0xKXsNCnJldHVybiBmYWxzZTsNCn0NCndoaWxlKGluZCE9LTEpew0KYXJyLnNwbGljZShpbmQsMSk7DQppZihvbmNlKXsNCmJyZWFrOw0KfQ0KaW5kPXRoaXMuaGFzQWR2aWNlKF8zNDUsXzM0NixfMzQ3LGFycik7DQp9DQpyZXR1cm4gdHJ1ZTsNCn19KTsNCmRvam8ucHJvdmlkZSgiZG9qby5ldmVudC50b3BpYyIpOw0KZG9qby5ldmVudC50b3BpYz1uZXcgZnVuY3Rpb24oKXsNCnRoaXMudG9waWNzPXt9Ow0KdGhpcy5nZXRUb3BpYz1mdW5jdGlvbihfMzRiKXsNCmlmKCF0aGlzLnRvcGljc1tfMzRiXSl7DQp0aGlzLnRvcGljc1tfMzRiXT1uZXcgdGhpcy5Ub3BpY0ltcGwoXzM0Yik7DQp9DQpyZXR1cm4gdGhpcy50b3BpY3NbXzM0Yl07DQp9Ow0KdGhpcy5yZWdpc3RlclB1Ymxpc2hlcj1mdW5jdGlvbihfMzRjLG9iaixfMzRlKXsNCnZhciBfMzRjPXRoaXMuZ2V0VG9waWMoXzM0Yyk7DQpfMzRjLnJlZ2lzdGVyUHVibGlzaGVyKG9iaixfMzRlKTsNCn07DQp0aGlzLnN1YnNjcmliZT1mdW5jdGlvbihfMzRmLG9iaixfMzUxKXsNCnZhciBfMzRmPXRoaXMuZ2V0VG9waWMoXzM0Zik7DQpfMzRmLnN1YnNjcmliZShvYmosXzM1MSk7DQp9Ow0KdGhpcy51bnN1YnNjcmliZT1mdW5jdGlvbihfMzUyLG9iaixfMzU0KXsNCnZhciBfMzUyPXRoaXMuZ2V0VG9waWMoXzM1Mik7DQpfMzUyLnVuc3Vic2NyaWJlKG9iaixfMzU0KTsNCn07DQp0aGlzLmRlc3Ryb3k9ZnVuY3Rpb24oXzM1NSl7DQp0aGlzLmdldFRvcGljKF8zNTUpLmRlc3Ryb3koKTsNCmRlbGV0ZSB0aGlzLnRvcGljc1tfMzU1XTsNCn07DQp0aGlzLnB1Ymxpc2hBcHBseT1mdW5jdGlvbihfMzU2LGFyZ3Mpew0KdmFyIF8zNTY9dGhpcy5nZXRUb3BpYyhfMzU2KTsNCl8zNTYuc2VuZE1lc3NhZ2UuYXBwbHkoXzM1NixhcmdzKTsNCn07DQp0aGlzLnB1Ymxpc2g9ZnVuY3Rpb24oXzM1OCxfMzU5KXsNCnZhciBfMzU4PXRoaXMuZ2V0VG9waWMoXzM1OCk7DQp2YXIgYXJncz1bXTsNCmZvcih2YXIgeD0xO3g8YXJndW1lbnRzLmxlbmd0aDt4Kyspew0KYXJncy5wdXNoKGFyZ3VtZW50c1t4XSk7DQp9DQpfMzU4LnNlbmRNZXNzYWdlLmFwcGx5KF8zNTgsYXJncyk7DQp9Ow0KfTsNCmRvam8uZXZlbnQudG9waWMuVG9waWNJbXBsPWZ1bmN0aW9uKF8zNWMpew0KdGhpcy50b3BpY05hbWU9XzM1YzsNCnRoaXMuc3Vic2NyaWJlPWZ1bmN0aW9uKF8zNWQsXzM1ZSl7DQp2YXIgdGY9XzM1ZXx8XzM1ZDsNCnZhciB0bz0oIV8zNWUpP2RqX2dsb2JhbDpfMzVkOw0KcmV0dXJuIGRvam8uZXZlbnQua3dDb25uZWN0KHtzcmNPYmo6dGhpcyxzcmNGdW5jOiJzZW5kTWVzc2FnZSIsYWR2aWNlT2JqOnRvLGFkdmljZUZ1bmM6dGZ9KTsNCn07DQp0aGlzLnVuc3Vic2NyaWJlPWZ1bmN0aW9uKF8zNjEsXzM2Mil7DQp2YXIgdGY9KCFfMzYyKT9fMzYxOl8zNjI7DQp2YXIgdG89KCFfMzYyKT9udWxsOl8zNjE7DQpyZXR1cm4gZG9qby5ldmVudC5rd0Rpc2Nvbm5lY3Qoe3NyY09iajp0aGlzLHNyY0Z1bmM6InNlbmRNZXNzYWdlIixhZHZpY2VPYmo6dG8sYWR2aWNlRnVuYzp0Zn0pOw0KfTsNCnRoaXMuX2dldEpvaW5Qb2ludD1mdW5jdGlvbigpew0KcmV0dXJuIGRvam8uZXZlbnQuTWV0aG9kSm9pblBvaW50LmdldEZvck1ldGhvZCh0aGlzLCJzZW5kTWVzc2FnZSIpOw0KfTsNCnRoaXMuc2V0U3F1ZWxjaD1mdW5jdGlvbihfMzY1KXsNCnRoaXMuX2dldEpvaW5Qb2ludCgpLnNxdWVsY2g9XzM2NTsNCn07DQp0aGlzLmRlc3Ryb3k9ZnVuY3Rpb24oKXsNCnRoaXMuX2dldEpvaW5Qb2ludCgpLmRpc2Nvbm5lY3QoKTsNCn07DQp0aGlzLnJlZ2lzdGVyUHVibGlzaGVyPWZ1bmN0aW9uKF8zNjYsXzM2Nyl7DQpkb2pvLmV2ZW50LmNvbm5lY3QoXzM2NixfMzY3LHRoaXMsInNlbmRNZXNzYWdlIik7DQp9Ow0KdGhpcy5zZW5kTWVzc2FnZT1mdW5jdGlvbihfMzY4KXsNCn07DQp9Ow0KZG9qby5wcm92aWRlKCJkb2pvLmV2ZW50LmJyb3dzZXIiKTsNCmRvam8uX2llX2Nsb2JiZXI9bmV3IGZ1bmN0aW9uKCl7DQp0aGlzLmNsb2JiZXJOb2Rlcz1bXTsNCmZ1bmN0aW9uIG51a2VQcm9wKG5vZGUscHJvcCl7DQp0cnl7DQpub2RlW3Byb3BdPW51bGw7DQp9DQpjYXRjaChlKXsNCn0NCnRyeXsNCmRlbGV0ZSBub2RlW3Byb3BdOw0KfQ0KY2F0Y2goZSl7DQp9DQp0cnl7DQpub2RlLnJlbW92ZUF0dHJpYnV0ZShwcm9wKTsNCn0NCmNhdGNoKGUpew0KfQ0KfQ0KdGhpcy5jbG9iYmVyPWZ1bmN0aW9uKF8zNmIpew0KdmFyIG5hOw0KdmFyIHRuYTsNCmlmKF8zNmIpew0KdG5hPV8zNmIuYWxsfHxfMzZiLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIik7DQpuYT1bXzM2Yl07DQpmb3IodmFyIHg9MDt4PHRuYS5sZW5ndGg7eCsrKXsNCmlmKHRuYVt4XVsiX19kb0Nsb2JiZXJfXyJdKXsNCm5hLnB1c2godG5hW3hdKTsNCn0NCn0NCn1lbHNlew0KdHJ5ew0Kd2luZG93Lm9ubG9hZD1udWxsOw0KfQ0KY2F0Y2goZSl7DQp9DQpuYT0odGhpcy5jbG9iYmVyTm9kZXMubGVuZ3RoKT90aGlzLmNsb2JiZXJOb2Rlczpkb2N1bWVudC5hbGw7DQp9DQp0bmE9bnVsbDsNCnZhciBfMzZmPXt9Ow0KZm9yKHZhciBpPW5hLmxlbmd0aC0xO2k+PTA7aT1pLTEpew0KdmFyIGVsPW5hW2ldOw0KdHJ5ew0KaWYoZWwmJmVsWyJfX2Nsb2JiZXJBdHRyc19fIl0pew0KZm9yKHZhciBqPTA7ajxlbC5fX2Nsb2JiZXJBdHRyc19fLmxlbmd0aDtqKyspew0KbnVrZVByb3AoZWwsZWwuX19jbG9iYmVyQXR0cnNfX1tqXSk7DQp9DQpudWtlUHJvcChlbCwiX19jbG9iYmVyQXR0cnNfXyIpOw0KbnVrZVByb3AoZWwsIl9fZG9DbG9iYmVyX18iKTsNCn0NCn0NCmNhdGNoKGUpew0KfQ0KfQ0KbmE9bnVsbDsNCn07DQp9Ow0KaWYoZG9qby5yZW5kZXIuaHRtbC5pZSl7DQpkb2pvLmFkZE9uVW5sb2FkKGZ1bmN0aW9uKCl7DQpkb2pvLl9pZV9jbG9iYmVyLmNsb2JiZXIoKTsNCnRyeXsNCmlmKChkb2pvWyJ3aWRnZXQiXSkmJihkb2pvLndpZGdldFsibWFuYWdlciJdKSl7DQpkb2pvLndpZGdldC5tYW5hZ2VyLmRlc3Ryb3lBbGwoKTsNCn0NCn0NCmNhdGNoKGUpew0KfQ0KdHJ5ew0Kd2luZG93Lm9ubG9hZD1udWxsOw0KfQ0KY2F0Y2goZSl7DQp9DQp0cnl7DQp3aW5kb3cub251bmxvYWQ9bnVsbDsNCn0NCmNhdGNoKGUpew0KfQ0KZG9qby5faWVfY2xvYmJlci5jbG9iYmVyTm9kZXM9W107DQp9KTsNCn0NCmRvam8uZXZlbnQuYnJvd3Nlcj1uZXcgZnVuY3Rpb24oKXsNCnZhciBfMzczPTA7DQp0aGlzLm5vcm1hbGl6ZWRFdmVudE5hbWU9ZnVuY3Rpb24oXzM3NCl7DQpzd2l0Y2goXzM3NCl7DQpjYXNlICJDaGVja2JveFN0YXRlQ2hhbmdlIjoNCmNhc2UgIkRPTUF0dHJNb2RpZmllZCI6DQpjYXNlICJET01NZW51SXRlbUFjdGl2ZSI6DQpjYXNlICJET01NZW51SXRlbUluYWN0aXZlIjoNCmNhc2UgIkRPTU1vdXNlU2Nyb2xsIjoNCmNhc2UgIkRPTU5vZGVJbnNlcnRlZCI6DQpjYXNlICJET01Ob2RlUmVtb3ZlZCI6DQpjYXNlICJSYWRpb1N0YXRlQ2hhbmdlIjoNCnJldHVybiBfMzc0Ow0KYnJlYWs7DQpkZWZhdWx0Og0KcmV0dXJuIF8zNzQudG9Mb3dlckNhc2UoKTsNCmJyZWFrOw0KfQ0KfTsNCnRoaXMuY2xlYW49ZnVuY3Rpb24obm9kZSl7DQppZihkb2pvLnJlbmRlci5odG1sLmllKXsNCmRvam8uX2llX2Nsb2JiZXIuY2xvYmJlcihub2RlKTsNCn0NCn07DQp0aGlzLmFkZENsb2JiZXJOb2RlPWZ1bmN0aW9uKG5vZGUpew0KaWYoIWRvam8ucmVuZGVyLmh0bWwuaWUpew0KcmV0dXJuOw0KfQ0KaWYoIW5vZGVbIl9fZG9DbG9iYmVyX18iXSl7DQpub2RlLl9fZG9DbG9iYmVyX189dHJ1ZTsNCmRvam8uX2llX2Nsb2JiZXIuY2xvYmJlck5vZGVzLnB1c2gobm9kZSk7DQpub2RlLl9fY2xvYmJlckF0dHJzX189W107DQp9DQp9Ow0KdGhpcy5hZGRDbG9iYmVyTm9kZUF0dHJzPWZ1bmN0aW9uKG5vZGUsXzM3OCl7DQppZighZG9qby5yZW5kZXIuaHRtbC5pZSl7DQpyZXR1cm47DQp9DQp0aGlzLmFkZENsb2JiZXJOb2RlKG5vZGUpOw0KZm9yKHZhciB4PTA7eDxfMzc4Lmxlbmd0aDt4Kyspew0Kbm9kZS5fX2Nsb2JiZXJBdHRyc19fLnB1c2goXzM3OFt4XSk7DQp9DQp9Ow0KdGhpcy5yZW1vdmVMaXN0ZW5lcj1mdW5jdGlvbihub2RlLF8zN2IsZnAsXzM3ZCl7DQppZighXzM3ZCl7DQp2YXIgXzM3ZD1mYWxzZTsNCn0NCl8zN2I9ZG9qby5ldmVudC5icm93c2VyLm5vcm1hbGl6ZWRFdmVudE5hbWUoXzM3Yik7DQppZigoXzM3Yj09Im9ua2V5Iil8fChfMzdiPT0ia2V5Iikpew0KaWYoZG9qby5yZW5kZXIuaHRtbC5pZSl7DQp0aGlzLnJlbW92ZUxpc3RlbmVyKG5vZGUsIm9ua2V5ZG93biIsZnAsXzM3ZCk7DQp9DQpfMzdiPSJvbmtleXByZXNzIjsNCn0NCmlmKF8zN2Iuc3Vic3RyKDAsMik9PSJvbiIpew0KXzM3Yj1fMzdiLnN1YnN0cigyKTsNCn0NCmlmKG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcil7DQpub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXzM3YixmcCxfMzdkKTsNCn0NCn07DQp0aGlzLmFkZExpc3RlbmVyPWZ1bmN0aW9uKG5vZGUsXzM3ZixmcCxfMzgxLF8zODIpew0KaWYoIW5vZGUpew0KcmV0dXJuOw0KfQ0KaWYoIV8zODEpew0KdmFyIF8zODE9ZmFsc2U7DQp9DQpfMzdmPWRvam8uZXZlbnQuYnJvd3Nlci5ub3JtYWxpemVkRXZlbnROYW1lKF8zN2YpOw0KaWYoKF8zN2Y9PSJvbmtleSIpfHwoXzM3Zj09ImtleSIpKXsNCmlmKGRvam8ucmVuZGVyLmh0bWwuaWUpew0KdGhpcy5hZGRMaXN0ZW5lcihub2RlLCJvbmtleWRvd24iLGZwLF8zODEsXzM4Mik7DQp9DQpfMzdmPSJvbmtleXByZXNzIjsNCn0NCmlmKF8zN2Yuc3Vic3RyKDAsMikhPSJvbiIpew0KXzM3Zj0ib24iK18zN2Y7DQp9DQppZighXzM4Mil7DQp2YXIgXzM4Mz1mdW5jdGlvbihldnQpew0KaWYoIWV2dCl7DQpldnQ9d2luZG93LmV2ZW50Ow0KfQ0KdmFyIHJldD1mcChkb2pvLmV2ZW50LmJyb3dzZXIuZml4RXZlbnQoZXZ0LHRoaXMpKTsNCmlmKF8zODEpew0KZG9qby5ldmVudC5icm93c2VyLnN0b3BFdmVudChldnQpOw0KfQ0KcmV0dXJuIHJldDsNCn07DQp9ZWxzZXsNCl8zODM9ZnA7DQp9DQppZihub2RlLmFkZEV2ZW50TGlzdGVuZXIpew0Kbm9kZS5hZGRFdmVudExpc3RlbmVyKF8zN2Yuc3Vic3RyKDIpLF8zODMsXzM4MSk7DQpyZXR1cm4gXzM4MzsNCn1lbHNlew0KaWYodHlwZW9mIG5vZGVbXzM3Zl09PSJmdW5jdGlvbiIpew0KdmFyIF8zODY9bm9kZVtfMzdmXTsNCm5vZGVbXzM3Zl09ZnVuY3Rpb24oZSl7DQpfMzg2KGUpOw0KcmV0dXJuIF8zODMoZSk7DQp9Ow0KfWVsc2V7DQpub2RlW18zN2ZdPV8zODM7DQp9DQppZihkb2pvLnJlbmRlci5odG1sLmllKXsNCnRoaXMuYWRkQ2xvYmJlck5vZGVBdHRycyhub2RlLFtfMzdmXSk7DQp9DQpyZXR1cm4gXzM4MzsNCn0NCn07DQp0aGlzLmlzRXZlbnQ9ZnVuY3Rpb24ob2JqKXsNCnJldHVybiAodHlwZW9mIG9iaiE9InVuZGVmaW5lZCIpJiYodHlwZW9mIEV2ZW50IT0idW5kZWZpbmVkIikmJihvYmouZXZlbnRQaGFzZSk7DQp9Ow0KdGhpcy5jdXJyZW50RXZlbnQ9bnVsbDsNCnRoaXMuY2FsbExpc3RlbmVyPWZ1bmN0aW9uKF8zODksXzM4YSl7DQppZih0eXBlb2YgXzM4OSE9ImZ1bmN0aW9uIil7DQpkb2pvLnJhaXNlKCJsaXN0ZW5lciBub3QgYSBmdW5jdGlvbjogIitfMzg5KTsNCn0NCmRvam8uZXZlbnQuYnJvd3Nlci5jdXJyZW50RXZlbnQuY3VycmVudFRhcmdldD1fMzhhOw0KcmV0dXJuIF8zODkuY2FsbChfMzhhLGRvam8uZXZlbnQuYnJvd3Nlci5jdXJyZW50RXZlbnQpOw0KfTsNCnRoaXMuX3N0b3BQcm9wYWdhdGlvbj1mdW5jdGlvbigpew0KZG9qby5ldmVudC5icm93c2VyLmN1cnJlbnRFdmVudC5jYW5jZWxCdWJibGU9dHJ1ZTsNCn07DQp0aGlzLl9wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpew0KZG9qby5ldmVudC5icm93c2VyLmN1cnJlbnRFdmVudC5yZXR1cm5WYWx1ZT1mYWxzZTsNCn07DQp0aGlzLmtleXM9e0tFWV9CQUNLU1BBQ0U6OCxLRVlfVEFCOjksS0VZX0NMRUFSOjEyLEtFWV9FTlRFUjoxMyxLRVlfU0hJRlQ6MTYsS0VZX0NUUkw6MTcsS0VZX0FMVDoxOCxLRVlfUEFVU0U6MTksS0VZX0NBUFNfTE9DSzoyMCxLRVlfRVNDQVBFOjI3LEtFWV9TUEFDRTozMixLRVlfUEFHRV9VUDozMyxLRVlfUEFHRV9ET1dOOjM0LEtFWV9FTkQ6MzUsS0VZX0hPTUU6MzYsS0VZX0xFRlRfQVJST1c6MzcsS0VZX1VQX0FSUk9XOjM4LEtFWV9SSUdIVF9BUlJPVzozOSxLRVlfRE9XTl9BUlJPVzo0MCxLRVlfSU5TRVJUOjQ1LEtFWV9ERUxFVEU6NDYsS0VZX0hFTFA6NDcsS0VZX0xFRlRfV0lORE9XOjkxLEtFWV9SSUdIVF9XSU5ET1c6OTIsS0VZX1NFTEVDVDo5MyxLRVlfTlVNUEFEXzA6OTYsS0VZX05VTVBBRF8xOjk3LEtFWV9OVU1QQURfMjo5OCxLRVlfTlVNUEFEXzM6OTksS0VZX05VTVBBRF80OjEwMCxLRVlfTlVNUEFEXzU6MTAxLEtFWV9OVU1QQURfNjoxMDIsS0VZX05VTVBBRF83OjEwMyxLRVlfTlVNUEFEXzg6MTA0LEtFWV9OVU1QQURfOToxMDUsS0VZX05VTVBBRF9NVUxUSVBMWToxMDYsS0VZX05VTVBBRF9QTFVTOjEwNyxLRVlfTlVNUEFEX0VOVEVSOjEwOCxLRVlfTlVNUEFEX01JTlVTOjEwOSxLRVlfTlVNUEFEX1BFUklPRDoxMTAsS0VZX05VTVBBRF9ESVZJREU6MTExLEtFWV9GMToxMTIsS0VZX0YyOjExMyxLRVlfRjM6MTE0LEtFWV9GNDoxMTUsS0VZX0Y1OjExNixLRVlfRjY6MTE3LEtFWV9GNzoxMTgsS0VZX0Y4OjExOSxLRVlfRjk6MTIwLEtFWV9GMTA6MTIxLEtFWV9GMTE6MTIyLEtFWV9GMTI6MTIzLEtFWV9GMTM6MTI0LEtFWV9GMTQ6MTI1LEtFWV9GMTU6MTI2LEtFWV9OVU1fTE9DSzoxNDQsS0VZX1NDUk9MTF9MT0NLOjE0NX07DQp0aGlzLnJldktleXM9W107DQpmb3IodmFyIGtleSBpbiB0aGlzLmtleXMpew0KdGhpcy5yZXZLZXlzW3RoaXMua2V5c1trZXldXT1rZXk7DQp9DQp0aGlzLmZpeEV2ZW50PWZ1bmN0aW9uKGV2dCxfMzhkKXsNCmlmKCFldnQpew0KaWYod2luZG93WyJldmVudCJdKXsNCmV2dD13aW5kb3cuZXZlbnQ7DQp9DQp9DQppZigoZXZ0WyJ0eXBlIl0pJiYoZXZ0WyJ0eXBlIl0uaW5kZXhPZigia2V5Iik9PTApKXsNCmV2dC5rZXlzPXRoaXMucmV2S2V5czsNCmZvcih2YXIga2V5IGluIHRoaXMua2V5cyl7DQpldnRba2V5XT10aGlzLmtleXNba2V5XTsNCn0NCmlmKGV2dFsidHlwZSJdPT0ia2V5ZG93biImJmRvam8ucmVuZGVyLmh0bWwuaWUpew0Kc3dpdGNoKGV2dC5rZXlDb2RlKXsNCmNhc2UgZXZ0LktFWV9TSElGVDoNCmNhc2UgZXZ0LktFWV9DVFJMOg0KY2FzZSBldnQuS0VZX0FMVDoNCmNhc2UgZXZ0LktFWV9DQVBTX0xPQ0s6DQpjYXNlIGV2dC5LRVlfTEVGVF9XSU5ET1c6DQpjYXNlIGV2dC5LRVlfUklHSFRfV0lORE9XOg0KY2FzZSBldnQuS0VZX1NFTEVDVDoNCmNhc2UgZXZ0LktFWV9OVU1fTE9DSzoNCmNhc2UgZXZ0LktFWV9TQ1JPTExfTE9DSzoNCmNhc2UgZXZ0LktFWV9OVU1QQURfMDoNCmNhc2UgZXZ0LktFWV9OVU1QQURfMToNCmNhc2UgZXZ0LktFWV9OVU1QQURfMjoNCmNhc2UgZXZ0LktFWV9OVU1QQURfMzoNCmNhc2UgZXZ0LktFWV9OVU1QQURfNDoNCmNhc2UgZXZ0LktFWV9OVU1QQURfNToNCmNhc2UgZXZ0LktFWV9OVU1QQURfNjoNCmNhc2UgZXZ0LktFWV9OVU1QQURfNzoNCmNhc2UgZXZ0LktFWV9OVU1QQURfODoNCmNhc2UgZXZ0LktFWV9OVU1QQURfOToNCmNhc2UgZXZ0LktFWV9OVU1QQURfUEVSSU9EOg0KYnJlYWs7DQpjYXNlIGV2dC5LRVlfTlVNUEFEX01VTFRJUExZOg0KY2FzZSBldnQuS0VZX05VTVBBRF9QTFVTOg0KY2FzZSBldnQuS0VZX05VTVBBRF9FTlRFUjoNCmNhc2UgZXZ0LktFWV9OVU1QQURfTUlOVVM6DQpjYXNlIGV2dC5LRVlfTlVNUEFEX0RJVklERToNCmJyZWFrOw0KY2FzZSBldnQuS0VZX1BBVVNFOg0KY2FzZSBldnQuS0VZX1RBQjoNCmNhc2UgZXZ0LktFWV9CQUNLU1BBQ0U6DQpjYXNlIGV2dC5LRVlfRU5URVI6DQpjYXNlIGV2dC5LRVlfRVNDQVBFOg0KY2FzZSBldnQuS0VZX1BBR0VfVVA6DQpjYXNlIGV2dC5LRVlfUEFHRV9ET1dOOg0KY2FzZSBldnQuS0VZX0VORDoNCmNhc2UgZXZ0LktFWV9IT01FOg0KY2FzZSBldnQuS0VZX0xFRlRfQVJST1c6DQpjYXNlIGV2dC5LRVlfVVBfQVJST1c6DQpjYXNlIGV2dC5LRVlfUklHSFRfQVJST1c6DQpjYXNlIGV2dC5LRVlfRE9XTl9BUlJPVzoNCmNhc2UgZXZ0LktFWV9JTlNFUlQ6DQpjYXNlIGV2dC5LRVlfREVMRVRFOg0KY2FzZSBldnQuS0VZX0YxOg0KY2FzZSBldnQuS0VZX0YyOg0KY2FzZSBldnQuS0VZX0YzOg0KY2FzZSBldnQuS0VZX0Y0Og0KY2FzZSBldnQuS0VZX0Y1Og0KY2FzZSBldnQuS0VZX0Y2Og0KY2FzZSBldnQuS0VZX0Y3Og0KY2FzZSBldnQuS0VZX0Y4Og0KY2FzZSBldnQuS0VZX0Y5Og0KY2FzZSBldnQuS0VZX0YxMDoNCmNhc2UgZXZ0LktFWV9GMTE6DQpjYXNlIGV2dC5LRVlfRjEyOg0KY2FzZSBldnQuS0VZX0YxMjoNCmNhc2UgZXZ0LktFWV9GMTM6DQpjYXNlIGV2dC5LRVlfRjE0Og0KY2FzZSBldnQuS0VZX0YxNToNCmNhc2UgZXZ0LktFWV9DTEVBUjoNCmNhc2UgZXZ0LktFWV9IRUxQOg0KZXZ0LmtleT1ldnQua2V5Q29kZTsNCmJyZWFrOw0KZGVmYXVsdDoNCmlmKGV2dC5jdHJsS2V5fHxldnQuYWx0S2V5KXsNCnZhciBfMzhmPWV2dC5rZXlDb2RlOw0KaWYoXzM4Zj49NjUmJl8zOGY8PTkwJiZldnQuc2hpZnRLZXk9PWZhbHNlKXsNCl8zOGYrPTMyOw0KfQ0KaWYoXzM4Zj49MSYmXzM4Zjw9MjYmJmV2dC5jdHJsS2V5KXsNCl8zOGYrPTk2Ow0KfQ0KZXZ0LmtleT1TdHJpbmcuZnJvbUNoYXJDb2RlKF8zOGYpOw0KfQ0KfQ0KfWVsc2V7DQppZihldnRbInR5cGUiXT09ImtleXByZXNzIil7DQppZihkb2pvLnJlbmRlci5odG1sLm9wZXJhKXsNCmlmKGV2dC53aGljaD09MCl7DQpldnQua2V5PWV2dC5rZXlDb2RlOw0KfWVsc2V7DQppZihldnQud2hpY2g+MCl7DQpzd2l0Y2goZXZ0LndoaWNoKXsNCmNhc2UgZXZ0LktFWV9TSElGVDoNCmNhc2UgZXZ0LktFWV9DVFJMOg0KY2FzZSBldnQuS0VZX0FMVDoNCmNhc2UgZXZ0LktFWV9DQVBTX0xPQ0s6DQpjYXNlIGV2dC5LRVlfTlVNX0xPQ0s6DQpjYXNlIGV2dC5LRVlfU0NST0xMX0xPQ0s6DQpicmVhazsNCmNhc2UgZXZ0LktFWV9QQVVTRToNCmNhc2UgZXZ0LktFWV9UQUI6DQpjYXNlIGV2dC5LRVlfQkFDS1NQQUNFOg0KY2FzZSBldnQuS0VZX0VOVEVSOg0KY2FzZSBldnQuS0VZX0VTQ0FQRToNCmV2dC5rZXk9ZXZ0LndoaWNoOw0KYnJlYWs7DQpkZWZhdWx0Og0KdmFyIF8zOGY9ZXZ0LndoaWNoOw0KaWYoKGV2dC5jdHJsS2V5fHxldnQuYWx0S2V5fHxldnQubWV0YUtleSkmJihldnQud2hpY2g+PTY1JiZldnQud2hpY2g8PTkwJiZldnQuc2hpZnRLZXk9PWZhbHNlKSl7DQpfMzhmKz0zMjsNCn0NCmV2dC5rZXk9U3RyaW5nLmZyb21DaGFyQ29kZShfMzhmKTsNCn0NCn0NCn0NCn1lbHNlew0KaWYoZG9qby5yZW5kZXIuaHRtbC5pZSl7DQppZighZXZ0LmN0cmxLZXkmJiFldnQuYWx0S2V5JiZldnQua2V5Q29kZT49ZXZ0LktFWV9TUEFDRSl7DQpldnQua2V5PVN0cmluZy5mcm9tQ2hhckNvZGUoZXZ0LmtleUNvZGUpOw0KfQ0KfWVsc2V7DQppZihkb2pvLnJlbmRlci5odG1sLnNhZmFyaSl7DQpzd2l0Y2goZXZ0LmtleUNvZGUpew0KY2FzZSA2MzIzMjoNCmV2dC5rZXk9ZXZ0LktFWV9VUF9BUlJPVzsNCmJyZWFrOw0KY2FzZSA2MzIzMzoNCmV2dC5rZXk9ZXZ0LktFWV9ET1dOX0FSUk9XOw0KYnJlYWs7DQpjYXNlIDYzMjM0Og0KZXZ0LmtleT1ldnQuS0VZX0xFRlRfQVJST1c7DQpicmVhazsNCmNhc2UgNjMyMzU6DQpldnQua2V5PWV2dC5LRVlfUklHSFRfQVJST1c7DQpicmVhazsNCmRlZmF1bHQ6DQpldnQua2V5PWV2dC5jaGFyQ29kZT4wP1N0cmluZy5mcm9tQ2hhckNvZGUoZXZ0LmNoYXJDb2RlKTpldnQua2V5Q29kZTsNCn0NCn1lbHNlew0KZXZ0LmtleT1ldnQuY2hhckNvZGU+MD9TdHJpbmcuZnJvbUNoYXJDb2RlKGV2dC5jaGFyQ29kZSk6ZXZ0LmtleUNvZGU7DQp9DQp9DQp9DQp9DQp9DQp9DQppZihkb2pvLnJlbmRlci5odG1sLmllKXsNCmlmKCFldnQudGFyZ2V0KXsNCmV2dC50YXJnZXQ9ZXZ0LnNyY0VsZW1lbnQ7DQp9DQppZighZXZ0LmN1cnJlbnRUYXJnZXQpew0KZXZ0LmN1cnJlbnRUYXJnZXQ9KF8zOGQ/XzM4ZDpldnQuc3JjRWxlbWVudCk7DQp9DQppZighZXZ0LmxheWVyWCl7DQpldnQubGF5ZXJYPWV2dC5vZmZzZXRYOw0KfQ0KaWYoIWV2dC5sYXllclkpew0KZXZ0LmxheWVyWT1ldnQub2Zmc2V0WTsNCn0NCnZhciBkb2M9KGV2dC5zcmNFbGVtZW50JiZldnQuc3JjRWxlbWVudC5vd25lckRvY3VtZW50KT9ldnQuc3JjRWxlbWVudC5vd25lckRvY3VtZW50OmRvY3VtZW50Ow0KdmFyIF8zOTE9KChkb2pvLnJlbmRlci5odG1sLmllNTUpfHwoZG9jWyJjb21wYXRNb2RlIl09PSJCYWNrQ29tcGF0IikpP2RvYy5ib2R5OmRvYy5kb2N1bWVudEVsZW1lbnQ7DQppZighZXZ0LnBhZ2VYKXsNCmV2dC5wYWdlWD1ldnQuY2xpZW50WCsoXzM5MS5zY3JvbGxMZWZ0fHwwKTsNCn0NCmlmKCFldnQucGFnZVkpew0KZXZ0LnBhZ2VZPWV2dC5jbGllbnRZKyhfMzkxLnNjcm9sbFRvcHx8MCk7DQp9DQppZihldnQudHlwZT09Im1vdXNlb3ZlciIpew0KZXZ0LnJlbGF0ZWRUYXJnZXQ9ZXZ0LmZyb21FbGVtZW50Ow0KfQ0KaWYoZXZ0LnR5cGU9PSJtb3VzZW91dCIpew0KZXZ0LnJlbGF0ZWRUYXJnZXQ9ZXZ0LnRvRWxlbWVudDsNCn0NCnRoaXMuY3VycmVudEV2ZW50PWV2dDsNCmV2dC5jYWxsTGlzdGVuZXI9dGhpcy5jYWxsTGlzdGVuZXI7DQpldnQuc3RvcFByb3BhZ2F0aW9uPXRoaXMuX3N0b3BQcm9wYWdhdGlvbjsNCmV2dC5wcmV2ZW50RGVmYXVsdD10aGlzLl9wcmV2ZW50RGVmYXVsdDsNCn0NCnJldHVybiBldnQ7DQp9Ow0KdGhpcy5zdG9wRXZlbnQ9ZnVuY3Rpb24oZXZ0KXsNCmlmKHdpbmRvdy5ldmVudCl7DQpldnQucmV0dXJuVmFsdWU9ZmFsc2U7DQpldnQuY2FuY2VsQnViYmxlPXRydWU7DQp9ZWxzZXsNCmV2dC5wcmV2ZW50RGVmYXVsdCgpOw0KZXZ0LnN0b3BQcm9wYWdhdGlvbigpOw0KfQ0KfTsNCn07DQpkb2pvLnByb3ZpZGUoImRvam8uZXZlbnQuKiIpOw0KZG9qby5wcm92aWRlKCJkb2pvLmdmeC5jb2xvciIpOw0KZG9qby5nZnguY29sb3IuQ29sb3I9ZnVuY3Rpb24ocixnLGIsYSl7DQppZihkb2pvLmxhbmcuaXNBcnJheShyKSl7DQp0aGlzLnI9clswXTsNCnRoaXMuZz1yWzFdOw0KdGhpcy5iPXJbMl07DQp0aGlzLmE9clszXXx8MTsNCn1lbHNlew0KaWYoZG9qby5sYW5nLmlzU3RyaW5nKHIpKXsNCnZhciByZ2I9ZG9qby5nZnguY29sb3IuZXh0cmFjdFJHQihyKTsNCnRoaXMucj1yZ2JbMF07DQp0aGlzLmc9cmdiWzFdOw0KdGhpcy5iPXJnYlsyXTsNCnRoaXMuYT1nfHwxOw0KfWVsc2V7DQppZihyIGluc3RhbmNlb2YgZG9qby5nZnguY29sb3IuQ29sb3Ipew0KdGhpcy5yPXIucjsNCnRoaXMuYj1yLmI7DQp0aGlzLmc9ci5nOw0KdGhpcy5hPXIuYTsNCn1lbHNlew0KdGhpcy5yPXI7DQp0aGlzLmc9ZzsNCnRoaXMuYj1iOw0KdGhpcy5hPWE7DQp9DQp9DQp9DQp9Ow0KZG9qby5nZnguY29sb3IuQ29sb3IuZnJvbUFycmF5PWZ1bmN0aW9uKGFycil7DQpyZXR1cm4gbmV3IGRvam8uZ2Z4LmNvbG9yLkNvbG9yKGFyclswXSxhcnJbMV0sYXJyWzJdLGFyclszXSk7DQp9Ow0KZG9qby5leHRlbmQoZG9qby5nZnguY29sb3IuQ29sb3Ise3RvUmdiOmZ1bmN0aW9uKF8zOTkpew0KaWYoXzM5OSl7DQpyZXR1cm4gdGhpcy50b1JnYmEoKTsNCn1lbHNlew0KcmV0dXJuIFt0aGlzLnIsdGhpcy5nLHRoaXMuYl07DQp9DQp9LHRvUmdiYTpmdW5jdGlvbigpew0KcmV0dXJuIFt0aGlzLnIsdGhpcy5nLHRoaXMuYix0aGlzLmFdOw0KfSx0b0hleDpmdW5jdGlvbigpew0KcmV0dXJuIGRvam8uZ2Z4LmNvbG9yLnJnYjJoZXgodGhpcy50b1JnYigpKTsNCn0sdG9Dc3M6ZnVuY3Rpb24oKXsNCnJldHVybiAicmdiKCIrdGhpcy50b1JnYigpLmpvaW4oKSsiKSI7DQp9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7DQpyZXR1cm4gdGhpcy50b0hleCgpOw0KfSxibGVuZDpmdW5jdGlvbihfMzlhLF8zOWIpew0KdmFyIHJnYj1udWxsOw0KaWYoZG9qby5sYW5nLmlzQXJyYXkoXzM5YSkpew0KcmdiPV8zOWE7DQp9ZWxzZXsNCmlmKF8zOWEgaW5zdGFuY2VvZiBkb2pvLmdmeC5jb2xvci5Db2xvcil7DQpyZ2I9XzM5YS50b1JnYigpOw0KfWVsc2V7DQpyZ2I9bmV3IGRvam8uZ2Z4LmNvbG9yLkNvbG9yKF8zOWEpLnRvUmdiKCk7DQp9DQp9DQpyZXR1cm4gZG9qby5nZnguY29sb3IuYmxlbmQodGhpcy50b1JnYigpLHJnYixfMzliKTsNCn19KTsNCmRvam8uZ2Z4LmNvbG9yLm5hbWVkPXt3aGl0ZTpbMjU1LDI1NSwyNTVdLGJsYWNrOlswLDAsMF0scmVkOlsyNTUsMCwwXSxncmVlbjpbMCwyNTUsMF0sbGltZTpbMCwyNTUsMF0sYmx1ZTpbMCwwLDI1NV0sbmF2eTpbMCwwLDEyOF0sZ3JheTpbMTI4LDEyOCwxMjhdLHNpbHZlcjpbMTkyLDE5MiwxOTJdfTsNCmRvam8uZ2Z4LmNvbG9yLmJsZW5kPWZ1bmN0aW9uKGEsYixfMzlmKXsNCmlmKHR5cGVvZiBhPT0ic3RyaW5nIil7DQpyZXR1cm4gZG9qby5nZnguY29sb3IuYmxlbmRIZXgoYSxiLF8zOWYpOw0KfQ0KaWYoIV8zOWYpew0KXzM5Zj0wOw0KfQ0KXzM5Zj1NYXRoLm1pbihNYXRoLm1heCgtMSxfMzlmKSwxKTsNCl8zOWY9KChfMzlmKzEpLzIpOw0KdmFyIGM9W107DQpmb3IodmFyIHg9MDt4PDM7eCsrKXsNCmNbeF09cGFyc2VJbnQoYlt4XSsoKGFbeF0tYlt4XSkqXzM5ZikpOw0KfQ0KcmV0dXJuIGM7DQp9Ow0KZG9qby5nZnguY29sb3IuYmxlbmRIZXg9ZnVuY3Rpb24oYSxiLF8zYTQpew0KcmV0dXJuIGRvam8uZ2Z4LmNvbG9yLnJnYjJoZXgoZG9qby5nZnguY29sb3IuYmxlbmQoZG9qby5nZnguY29sb3IuaGV4MnJnYihhKSxkb2pvLmdmeC5jb2xvci5oZXgycmdiKGIpLF8zYTQpKTsNCn07DQpkb2pvLmdmeC5jb2xvci5leHRyYWN0UkdCPWZ1bmN0aW9uKF8zYTUpew0KdmFyIGhleD0iMDEyMzQ1Njc4OWFiY2RlZiI7DQpfM2E1PV8zYTUudG9Mb3dlckNhc2UoKTsNCmlmKF8zYTUuaW5kZXhPZigicmdiIik9PTApew0KdmFyIF8zYTc9XzNhNS5tYXRjaCgvcmdiYSpcKChcZCspLCAqKFxkKyksICooXGQrKS9pKTsNCnZhciByZXQ9XzNhNy5zcGxpY2UoMSwzKTsNCnJldHVybiByZXQ7DQp9ZWxzZXsNCnZhciBfM2E5PWRvam8uZ2Z4LmNvbG9yLmhleDJyZ2IoXzNhNSk7DQppZihfM2E5KXsNCnJldHVybiBfM2E5Ow0KfWVsc2V7DQpyZXR1cm4gZG9qby5nZnguY29sb3IubmFtZWRbXzNhNV18fFsyNTUsMjU1LDI1NV07DQp9DQp9DQp9Ow0KZG9qby5nZnguY29sb3IuaGV4MnJnYj1mdW5jdGlvbihoZXgpew0KdmFyIF8zYWI9IjAxMjM0NTY3ODlBQkNERUYiOw0KdmFyIHJnYj1uZXcgQXJyYXkoMyk7DQppZihoZXguaW5kZXhPZigiIyIpPT0wKXsNCmhleD1oZXguc3Vic3RyaW5nKDEpOw0KfQ0KaGV4PWhleC50b1VwcGVyQ2FzZSgpOw0KaWYoaGV4LnJlcGxhY2UobmV3IFJlZ0V4cCgiWyIrXzNhYisiXSIsImciKSwiIikhPSIiKXsNCnJldHVybiBudWxsOw0KfQ0KaWYoaGV4Lmxlbmd0aD09Myl7DQpyZ2JbMF09aGV4LmNoYXJBdCgwKStoZXguY2hhckF0KDApOw0KcmdiWzFdPWhleC5jaGFyQXQoMSkraGV4LmNoYXJBdCgxKTsNCnJnYlsyXT1oZXguY2hhckF0KDIpK2hleC5jaGFyQXQoMik7DQp9ZWxzZXsNCnJnYlswXT1oZXguc3Vic3RyaW5nKDAsMik7DQpyZ2JbMV09aGV4LnN1YnN0cmluZygyLDQpOw0KcmdiWzJdPWhleC5zdWJzdHJpbmcoNCk7DQp9DQpmb3IodmFyIGk9MDtpPHJnYi5sZW5ndGg7aSsrKXsNCnJnYltpXT1fM2FiLmluZGV4T2YocmdiW2ldLmNoYXJBdCgwKSkqMTYrXzNhYi5pbmRleE9mKHJnYltpXS5jaGFyQXQoMSkpOw0KfQ0KcmV0dXJuIHJnYjsNCn07DQpkb2pvLmdmeC5jb2xvci5yZ2IyaGV4PWZ1bmN0aW9uKHIsZyxiKXsNCmlmKGRvam8ubGFuZy5pc0FycmF5KHIpKXsNCmc9clsxXXx8MDsNCmI9clsyXXx8MDsNCnI9clswXXx8MDsNCn0NCnZhciByZXQ9ZG9qby5sYW5nLm1hcChbcixnLGJdLGZ1bmN0aW9uKHgpew0KeD1uZXcgTnVtYmVyKHgpOw0KdmFyIHM9eC50b1N0cmluZygxNik7DQp3aGlsZShzLmxlbmd0aDwyKXsNCnM9IjAiK3M7DQp9DQpyZXR1cm4gczsNCn0pOw0KcmV0LnVuc2hpZnQoIiMiKTsNCnJldHVybiByZXQuam9pbigiIik7DQp9Ow0KZG9qby5wcm92aWRlKCJkb2pvLmxmeC5BbmltYXRpb24iKTsNCmRvam8ubGZ4LkxpbmU9ZnVuY3Rpb24oXzNiNCxlbmQpew0KdGhpcy5zdGFydD1fM2I0Ow0KdGhpcy5lbmQ9ZW5kOw0KaWYoZG9qby5sYW5nLmlzQXJyYXkoXzNiNCkpew0KdmFyIGRpZmY9W107DQpkb2pvLmxhbmcuZm9yRWFjaCh0aGlzLnN0YXJ0LGZ1bmN0aW9uKHMsaSl7DQpkaWZmW2ldPXRoaXMuZW5kW2ldLXM7DQp9LHRoaXMpOw0KdGhpcy5nZXRWYWx1ZT1mdW5jdGlvbihuKXsNCnZhciByZXM9W107DQpkb2pvLmxhbmcuZm9yRWFjaCh0aGlzLnN0YXJ0LGZ1bmN0aW9uKHMsaSl7DQpyZXNbaV09KGRpZmZbaV0qbikrczsNCn0sdGhpcyk7DQpyZXR1cm4gcmVzOw0KfTsNCn1lbHNlew0KdmFyIGRpZmY9ZW5kLV8zYjQ7DQp0aGlzLmdldFZhbHVlPWZ1bmN0aW9uKG4pew0KcmV0dXJuIChkaWZmKm4pK3RoaXMuc3RhcnQ7DQp9Ow0KfQ0KfTsNCmRvam8ubGZ4LmVhc2VEZWZhdWx0PWZ1bmN0aW9uKG4pew0KaWYoZG9qby5yZW5kZXIuaHRtbC5raHRtbCl7DQpyZXR1cm4gKHBhcnNlRmxvYXQoIjAuNSIpKygoTWF0aC5zaW4oKG4rcGFyc2VGbG9hdCgiMS41IikpKk1hdGguUEkpKS8yKSk7DQp9ZWxzZXsNCnJldHVybiAoMC41KygoTWF0aC5zaW4oKG4rMS41KSpNYXRoLlBJKSkvMikpOw0KfQ0KfTsNCmRvam8ubGZ4LmVhc2VJbj1mdW5jdGlvbihuKXsNCnJldHVybiBNYXRoLnBvdyhuLDMpOw0KfTsNCmRvam8ubGZ4LmVhc2VPdXQ9ZnVuY3Rpb24obil7DQpyZXR1cm4gKDEtTWF0aC5wb3coMS1uLDMpKTsNCn07DQpkb2pvLmxmeC5lYXNlSW5PdXQ9ZnVuY3Rpb24obil7DQpyZXR1cm4gKCgzKk1hdGgucG93KG4sMikpLSgyKk1hdGgucG93KG4sMykpKTsNCn07DQpkb2pvLmxmeC5JQW5pbWF0aW9uPWZ1bmN0aW9uKCl7DQp9Ow0KZG9qby5sYW5nLmV4dGVuZChkb2pvLmxmeC5JQW5pbWF0aW9uLHtjdXJ2ZTpudWxsLGR1cmF0aW9uOjEwMDAsZWFzaW5nOm51bGwscmVwZWF0Q291bnQ6MCxyYXRlOjI1LGhhbmRsZXI6bnVsbCxiZWZvcmVCZWdpbjpudWxsLG9uQmVnaW46bnVsbCxvbkFuaW1hdGU6bnVsbCxvbkVuZDpudWxsLG9uUGxheTpudWxsLG9uUGF1c2U6bnVsbCxvblN0b3A6bnVsbCxwbGF5Om51bGwscGF1c2U6bnVsbCxzdG9wOm51bGwsY29ubmVjdDpmdW5jdGlvbihldnQsXzNjMyxfM2M0KXsNCmlmKCFfM2M0KXsNCl8zYzQ9XzNjMzsNCl8zYzM9dGhpczsNCn0NCl8zYzQ9ZG9qby5sYW5nLmhpdGNoKF8zYzMsXzNjNCk7DQp2YXIgXzNjNT10aGlzW2V2dF18fGZ1bmN0aW9uKCl7DQp9Ow0KdGhpc1tldnRdPWZ1bmN0aW9uKCl7DQp2YXIgcmV0PV8zYzUuYXBwbHkodGhpcyxhcmd1bWVudHMpOw0KXzNjNC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7DQpyZXR1cm4gcmV0Ow0KfTsNCnJldHVybiB0aGlzOw0KfSxmaXJlOmZ1bmN0aW9uKGV2dCxhcmdzKXsNCmlmKHRoaXNbZXZ0XSl7DQp0aGlzW2V2dF0uYXBwbHkodGhpcywoYXJnc3x8W10pKTsNCn0NCnJldHVybiB0aGlzOw0KfSxyZXBlYXQ6ZnVuY3Rpb24oXzNjOSl7DQp0aGlzLnJlcGVhdENvdW50PV8zYzk7DQpyZXR1cm4gdGhpczsNCn0sX2FjdGl2ZTpmYWxzZSxfcGF1c2VkOmZhbHNlfSk7DQpkb2pvLmxmeC5BbmltYXRpb249ZnVuY3Rpb24oXzNjYSxfM2NiLF8zY2MsXzNjZCxfM2NlLHJhdGUpew0KZG9qby5sZnguSUFuaW1hdGlvbi5jYWxsKHRoaXMpOw0KaWYoZG9qby5sYW5nLmlzTnVtYmVyKF8zY2EpfHwoIV8zY2EmJl8zY2IuZ2V0VmFsdWUpKXsNCnJhdGU9XzNjZTsNCl8zY2U9XzNjZDsNCl8zY2Q9XzNjYzsNCl8zY2M9XzNjYjsNCl8zY2I9XzNjYTsNCl8zY2E9bnVsbDsNCn1lbHNlew0KaWYoXzNjYS5nZXRWYWx1ZXx8ZG9qby5sYW5nLmlzQXJyYXkoXzNjYSkpew0KcmF0ZT1fM2NkOw0KXzNjZT1fM2NjOw0KXzNjZD1fM2NiOw0KXzNjYz1fM2NhOw0KXzNjYj1udWxsOw0KXzNjYT1udWxsOw0KfQ0KfQ0KaWYoZG9qby5sYW5nLmlzQXJyYXkoXzNjYykpew0KdGhpcy5jdXJ2ZT1uZXcgZG9qby5sZnguTGluZShfM2NjWzBdLF8zY2NbMV0pOw0KfWVsc2V7DQp0aGlzLmN1cnZlPV8zY2M7DQp9DQppZihfM2NiIT1udWxsJiZfM2NiPjApew0KdGhpcy5kdXJhdGlvbj1fM2NiOw0KfQ0KaWYoXzNjZSl7DQp0aGlzLnJlcGVhdENvdW50PV8zY2U7DQp9DQppZihyYXRlKXsNCnRoaXMucmF0ZT1yYXRlOw0KfQ0KaWYoXzNjYSl7DQpkb2pvLmxhbmcuZm9yRWFjaChbImhhbmRsZXIiLCJiZWZvcmVCZWdpbiIsIm9uQmVnaW4iLCJvbkVuZCIsIm9uUGxheSIsIm9uU3RvcCIsIm9uQW5pbWF0ZSJdLGZ1bmN0aW9uKGl0ZW0pew0KaWYoXzNjYVtpdGVtXSl7DQp0aGlzLmNvbm5lY3QoaXRlbSxfM2NhW2l0ZW1dKTsNCn0NCn0sdGhpcyk7DQp9DQppZihfM2NkJiZkb2pvLmxhbmcuaXNGdW5jdGlvbihfM2NkKSl7DQp0aGlzLmVhc2luZz1fM2NkOw0KfQ0KfTsNCmRvam8uaW5oZXJpdHMoZG9qby5sZnguQW5pbWF0aW9uLGRvam8ubGZ4LklBbmltYXRpb24pOw0KZG9qby5sYW5nLmV4dGVuZChkb2pvLmxmeC5BbmltYXRpb24se19zdGFydFRpbWU6bnVsbCxfZW5kVGltZTpudWxsLF90aW1lcjpudWxsLF9wZXJjZW50OjAsX3N0YXJ0UmVwZWF0Q291bnQ6MCxwbGF5OmZ1bmN0aW9uKF8zZDEsXzNkMil7DQppZihfM2QyKXsNCmNsZWFyVGltZW91dCh0aGlzLl90aW1lcik7DQp0aGlzLl9hY3RpdmU9ZmFsc2U7DQp0aGlzLl9wYXVzZWQ9ZmFsc2U7DQp0aGlzLl9wZXJjZW50PTA7DQp9ZWxzZXsNCmlmKHRoaXMuX2FjdGl2ZSYmIXRoaXMuX3BhdXNlZCl7DQpyZXR1cm4gdGhpczsNCn0NCn0NCnRoaXMuZmlyZSgiaGFuZGxlciIsWyJiZWZvcmVCZWdpbiJdKTsNCnRoaXMuZmlyZSgiYmVmb3JlQmVnaW4iKTsNCmlmKF8zZDE+MCl7DQpzZXRUaW1lb3V0KGRvam8ubGFuZy5oaXRjaCh0aGlzLGZ1bmN0aW9uKCl7DQp0aGlzLnBsYXkobnVsbCxfM2QyKTsNCn0pLF8zZDEpOw0KcmV0dXJuIHRoaXM7DQp9DQp0aGlzLl9zdGFydFRpbWU9bmV3IERhdGUoKS52YWx1ZU9mKCk7DQppZih0aGlzLl9wYXVzZWQpew0KdGhpcy5fc3RhcnRUaW1lLT0odGhpcy5kdXJhdGlvbip0aGlzLl9wZXJjZW50LzEwMCk7DQp9DQp0aGlzLl9lbmRUaW1lPXRoaXMuX3N0YXJ0VGltZSt0aGlzLmR1cmF0aW9uOw0KdGhpcy5fYWN0aXZlPXRydWU7DQp0aGlzLl9wYXVzZWQ9ZmFsc2U7DQp2YXIgc3RlcD10aGlzLl9wZXJjZW50LzEwMDsNCnZhciBfM2Q0PXRoaXMuY3VydmUuZ2V0VmFsdWUoc3RlcCk7DQppZih0aGlzLl9wZXJjZW50PT0wKXsNCmlmKCF0aGlzLl9zdGFydFJlcGVhdENvdW50KXsNCnRoaXMuX3N0YXJ0UmVwZWF0Q291bnQ9dGhpcy5yZXBlYXRDb3VudDsNCn0NCnRoaXMuZmlyZSgiaGFuZGxlciIsWyJiZWdpbiIsXzNkNF0pOw0KdGhpcy5maXJlKCJvbkJlZ2luIixbXzNkNF0pOw0KfQ0KdGhpcy5maXJlKCJoYW5kbGVyIixbInBsYXkiLF8zZDRdKTsNCnRoaXMuZmlyZSgib25QbGF5IixbXzNkNF0pOw0KdGhpcy5fY3ljbGUoKTsNCnJldHVybiB0aGlzOw0KfSxwYXVzZTpmdW5jdGlvbigpew0KY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVyKTsNCmlmKCF0aGlzLl9hY3RpdmUpew0KcmV0dXJuIHRoaXM7DQp9DQp0aGlzLl9wYXVzZWQ9dHJ1ZTsNCnZhciBfM2Q1PXRoaXMuY3VydmUuZ2V0VmFsdWUodGhpcy5fcGVyY2VudC8xMDApOw0KdGhpcy5maXJlKCJoYW5kbGVyIixbInBhdXNlIixfM2Q1XSk7DQp0aGlzLmZpcmUoIm9uUGF1c2UiLFtfM2Q1XSk7DQpyZXR1cm4gdGhpczsNCn0sZ290b1BlcmNlbnQ6ZnVuY3Rpb24ocGN0LF8zZDcpew0KY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVyKTsNCnRoaXMuX2FjdGl2ZT10cnVlOw0KdGhpcy5fcGF1c2VkPXRydWU7DQp0aGlzLl9wZXJjZW50PXBjdDsNCmlmKF8zZDcpew0KdGhpcy5wbGF5KCk7DQp9DQpyZXR1cm4gdGhpczsNCn0sc3RvcDpmdW5jdGlvbihfM2Q4KXsNCmNsZWFyVGltZW91dCh0aGlzLl90aW1lcik7DQp2YXIgc3RlcD10aGlzLl9wZXJjZW50LzEwMDsNCmlmKF8zZDgpew0Kc3RlcD0xOw0KfQ0KdmFyIF8zZGE9dGhpcy5jdXJ2ZS5nZXRWYWx1ZShzdGVwKTsNCnRoaXMuZmlyZSgiaGFuZGxlciIsWyJzdG9wIixfM2RhXSk7DQp0aGlzLmZpcmUoIm9uU3RvcCIsW18zZGFdKTsNCnRoaXMuX2FjdGl2ZT1mYWxzZTsNCnRoaXMuX3BhdXNlZD1mYWxzZTsNCnJldHVybiB0aGlzOw0KfSxzdGF0dXM6ZnVuY3Rpb24oKXsNCmlmKHRoaXMuX2FjdGl2ZSl7DQpyZXR1cm4gdGhpcy5fcGF1c2VkPyJwYXVzZWQiOiJwbGF5aW5nIjsNCn1lbHNlew0KcmV0dXJuICJzdG9wcGVkIjsNCn0NCnJldHVybiB0aGlzOw0KfSxfY3ljbGU6ZnVuY3Rpb24oKXsNCmNsZWFyVGltZW91dCh0aGlzLl90aW1lcik7DQppZih0aGlzLl9hY3RpdmUpew0KdmFyIGN1cnI9bmV3IERhdGUoKS52YWx1ZU9mKCk7DQp2YXIgc3RlcD0oY3Vyci10aGlzLl9zdGFydFRpbWUpLyh0aGlzLl9lbmRUaW1lLXRoaXMuX3N0YXJ0VGltZSk7DQppZihzdGVwPj0xKXsNCnN0ZXA9MTsNCnRoaXMuX3BlcmNlbnQ9MTAwOw0KfWVsc2V7DQp0aGlzLl9wZXJjZW50PXN0ZXAqMTAwOw0KfQ0KaWYoKHRoaXMuZWFzaW5nKSYmKGRvam8ubGFuZy5pc0Z1bmN0aW9uKHRoaXMuZWFzaW5nKSkpew0Kc3RlcD10aGlzLmVhc2luZyhzdGVwKTsNCn0NCnZhciBfM2RkPXRoaXMuY3VydmUuZ2V0VmFsdWUoc3RlcCk7DQp0aGlzLmZpcmUoImhhbmRsZXIiLFsiYW5pbWF0ZSIsXzNkZF0pOw0KdGhpcy5maXJlKCJvbkFuaW1hdGUiLFtfM2RkXSk7DQppZihzdGVwPDEpew0KdGhpcy5fdGltZXI9c2V0VGltZW91dChkb2pvLmxhbmcuaGl0Y2godGhpcywiX2N5Y2xlIiksdGhpcy5yYXRlKTsNCn1lbHNlew0KdGhpcy5fYWN0aXZlPWZhbHNlOw0KdGhpcy5maXJlKCJoYW5kbGVyIixbImVuZCJdKTsNCnRoaXMuZmlyZSgib25FbmQiKTsNCmlmKHRoaXMucmVwZWF0Q291bnQ+MCl7DQp0aGlzLnJlcGVhdENvdW50LS07DQp0aGlzLnBsYXkobnVsbCx0cnVlKTsNCn1lbHNlew0KaWYodGhpcy5yZXBlYXRDb3VudD09LTEpew0KdGhpcy5wbGF5KG51bGwsdHJ1ZSk7DQp9ZWxzZXsNCmlmKHRoaXMuX3N0YXJ0UmVwZWF0Q291bnQpew0KdGhpcy5yZXBlYXRDb3VudD10aGlzLl9zdGFydFJlcGVhdENvdW50Ow0KdGhpcy5fc3RhcnRSZXBlYXRDb3VudD0wOw0KfQ0KfQ0KfQ0KfQ0KfQ0KcmV0dXJuIHRoaXM7DQp9fSk7DQpkb2pvLmxmeC5Db21iaW5lPWZ1bmN0aW9uKF8zZGUpew0KZG9qby5sZnguSUFuaW1hdGlvbi5jYWxsKHRoaXMpOw0KdGhpcy5fYW5pbXM9W107DQp0aGlzLl9hbmltc0VuZGVkPTA7DQp2YXIgXzNkZj1hcmd1bWVudHM7DQppZihfM2RmLmxlbmd0aD09MSYmKGRvam8ubGFuZy5pc0FycmF5KF8zZGZbMF0pfHxkb2pvLmxhbmcuaXNBcnJheUxpa2UoXzNkZlswXSkpKXsNCl8zZGY9XzNkZlswXTsNCn0NCmRvam8ubGFuZy5mb3JFYWNoKF8zZGYsZnVuY3Rpb24oYW5pbSl7DQp0aGlzLl9hbmltcy5wdXNoKGFuaW0pOw0KYW5pbS5jb25uZWN0KCJvbkVuZCIsZG9qby5sYW5nLmhpdGNoKHRoaXMsIl9vbkFuaW1zRW5kZWQiKSk7DQp9LHRoaXMpOw0KfTsNCmRvam8uaW5oZXJpdHMoZG9qby5sZnguQ29tYmluZSxkb2pvLmxmeC5JQW5pbWF0aW9uKTsNCmRvam8ubGFuZy5leHRlbmQoZG9qby5sZnguQ29tYmluZSx7X2FuaW1zRW5kZWQ6MCxwbGF5OmZ1bmN0aW9uKF8zZTEsXzNlMil7DQppZighdGhpcy5fYW5pbXMubGVuZ3RoKXsNCnJldHVybiB0aGlzOw0KfQ0KdGhpcy5maXJlKCJiZWZvcmVCZWdpbiIpOw0KaWYoXzNlMT4wKXsNCnNldFRpbWVvdXQoZG9qby5sYW5nLmhpdGNoKHRoaXMsZnVuY3Rpb24oKXsNCnRoaXMucGxheShudWxsLF8zZTIpOw0KfSksXzNlMSk7DQpyZXR1cm4gdGhpczsNCn0NCmlmKF8zZTJ8fHRoaXMuX2FuaW1zWzBdLnBlcmNlbnQ9PTApew0KdGhpcy5maXJlKCJvbkJlZ2luIik7DQp9DQp0aGlzLmZpcmUoIm9uUGxheSIpOw0KdGhpcy5fYW5pbXNDYWxsKCJwbGF5IixudWxsLF8zZTIpOw0KcmV0dXJuIHRoaXM7DQp9LHBhdXNlOmZ1bmN0aW9uKCl7DQp0aGlzLmZpcmUoIm9uUGF1c2UiKTsNCnRoaXMuX2FuaW1zQ2FsbCgicGF1c2UiKTsNCnJldHVybiB0aGlzOw0KfSxzdG9wOmZ1bmN0aW9uKF8zZTMpew0KdGhpcy5maXJlKCJvblN0b3AiKTsNCnRoaXMuX2FuaW1zQ2FsbCgic3RvcCIsXzNlMyk7DQpyZXR1cm4gdGhpczsNCn0sX29uQW5pbXNFbmRlZDpmdW5jdGlvbigpew0KdGhpcy5fYW5pbXNFbmRlZCsrOw0KaWYodGhpcy5fYW5pbXNFbmRlZD49dGhpcy5fYW5pbXMubGVuZ3RoKXsNCnRoaXMuZmlyZSgib25FbmQiKTsNCn0NCnJldHVybiB0aGlzOw0KfSxfYW5pbXNDYWxsOmZ1bmN0aW9uKF8zZTQpew0KdmFyIGFyZ3M9W107DQppZihhcmd1bWVudHMubGVuZ3RoPjEpew0KZm9yKHZhciBpPTE7aTxhcmd1bWVudHMubGVuZ3RoO2krKyl7DQphcmdzLnB1c2goYXJndW1lbnRzW2ldKTsNCn0NCn0NCnZhciBfM2U3PXRoaXM7DQpkb2pvLmxhbmcuZm9yRWFjaCh0aGlzLl9hbmltcyxmdW5jdGlvbihhbmltKXsNCmFuaW1bXzNlNF0oYXJncyk7DQp9LF8zZTcpOw0KcmV0dXJuIHRoaXM7DQp9fSk7DQpkb2pvLmxmeC5DaGFpbj1mdW5jdGlvbihfM2U5KXsNCmRvam8ubGZ4LklBbmltYXRpb24uY2FsbCh0aGlzKTsNCnRoaXMuX2FuaW1zPVtdOw0KdGhpcy5fY3VyckFuaW09LTE7DQp2YXIgXzNlYT1hcmd1bWVudHM7DQppZihfM2VhLmxlbmd0aD09MSYmKGRvam8ubGFuZy5pc0FycmF5KF8zZWFbMF0pfHxkb2pvLmxhbmcuaXNBcnJheUxpa2UoXzNlYVswXSkpKXsNCl8zZWE9XzNlYVswXTsNCn0NCnZhciBfM2ViPXRoaXM7DQpkb2pvLmxhbmcuZm9yRWFjaChfM2VhLGZ1bmN0aW9uKGFuaW0saSxfM2VlKXsNCnRoaXMuX2FuaW1zLnB1c2goYW5pbSk7DQppZihpPF8zZWUubGVuZ3RoLTEpew0KYW5pbS5jb25uZWN0KCJvbkVuZCIsZG9qby5sYW5nLmhpdGNoKHRoaXMsIl9wbGF5TmV4dCIpKTsNCn1lbHNlew0KYW5pbS5jb25uZWN0KCJvbkVuZCIsZG9qby5sYW5nLmhpdGNoKHRoaXMsZnVuY3Rpb24oKXsNCnRoaXMuZmlyZSgib25FbmQiKTsNCn0pKTsNCn0NCn0sdGhpcyk7DQp9Ow0KZG9qby5pbmhlcml0cyhkb2pvLmxmeC5DaGFpbixkb2pvLmxmeC5JQW5pbWF0aW9uKTsNCmRvam8ubGFuZy5leHRlbmQoZG9qby5sZnguQ2hhaW4se19jdXJyQW5pbTotMSxwbGF5OmZ1bmN0aW9uKF8zZWYsXzNmMCl7DQppZighdGhpcy5fYW5pbXMubGVuZ3RoKXsNCnJldHVybiB0aGlzOw0KfQ0KaWYoXzNmMHx8IXRoaXMuX2FuaW1zW3RoaXMuX2N1cnJBbmltXSl7DQp0aGlzLl9jdXJyQW5pbT0wOw0KfQ0KdmFyIF8zZjE9dGhpcy5fYW5pbXNbdGhpcy5fY3VyckFuaW1dOw0KdGhpcy5maXJlKCJiZWZvcmVCZWdpbiIpOw0KaWYoXzNlZj4wKXsNCnNldFRpbWVvdXQoZG9qby5sYW5nLmhpdGNoKHRoaXMsZnVuY3Rpb24oKXsNCnRoaXMucGxheShudWxsLF8zZjApOw0KfSksXzNlZik7DQpyZXR1cm4gdGhpczsNCn0NCmlmKF8zZjEpew0KaWYodGhpcy5fY3VyckFuaW09PTApew0KdGhpcy5maXJlKCJoYW5kbGVyIixbImJlZ2luIix0aGlzLl9jdXJyQW5pbV0pOw0KdGhpcy5maXJlKCJvbkJlZ2luIixbdGhpcy5fY3VyckFuaW1dKTsNCn0NCnRoaXMuZmlyZSgib25QbGF5IixbdGhpcy5fY3VyckFuaW1dKTsNCl8zZjEucGxheShudWxsLF8zZjApOw0KfQ0KcmV0dXJuIHRoaXM7DQp9LHBhdXNlOmZ1bmN0aW9uKCl7DQppZih0aGlzLl9hbmltc1t0aGlzLl9jdXJyQW5pbV0pew0KdGhpcy5fYW5pbXNbdGhpcy5fY3VyckFuaW1dLnBhdXNlKCk7DQp0aGlzLmZpcmUoIm9uUGF1c2UiLFt0aGlzLl9jdXJyQW5pbV0pOw0KfQ0KcmV0dXJuIHRoaXM7DQp9LHBsYXlQYXVzZTpmdW5jdGlvbigpew0KaWYodGhpcy5fYW5pbXMubGVuZ3RoPT0wKXsNCnJldHVybiB0aGlzOw0KfQ0KaWYodGhpcy5fY3VyckFuaW09PS0xKXsNCnRoaXMuX2N1cnJBbmltPTA7DQp9DQp2YXIgXzNmMj10aGlzLl9hbmltc1t0aGlzLl9jdXJyQW5pbV07DQppZihfM2YyKXsNCmlmKCFfM2YyLl9hY3RpdmV8fF8zZjIuX3BhdXNlZCl7DQp0aGlzLnBsYXkoKTsNCn1lbHNlew0KdGhpcy5wYXVzZSgpOw0KfQ0KfQ0KcmV0dXJuIHRoaXM7DQp9LHN0b3A6ZnVuY3Rpb24oKXsNCnZhciBfM2YzPXRoaXMuX2FuaW1zW3RoaXMuX2N1cnJBbmltXTsNCmlmKF8zZjMpew0KXzNmMy5zdG9wKCk7DQp0aGlzLmZpcmUoIm9uU3RvcCIsW3RoaXMuX2N1cnJBbmltXSk7DQp9DQpyZXR1cm4gXzNmMzsNCn0sX3BsYXlOZXh0OmZ1bmN0aW9uKCl7DQppZih0aGlzLl9jdXJyQW5pbT09LTF8fHRoaXMuX2FuaW1zLmxlbmd0aD09MCl7DQpyZXR1cm4gdGhpczsNCn0NCnRoaXMuX2N1cnJBbmltKys7DQppZih0aGlzLl9hbmltc1t0aGlzLl9jdXJyQW5pbV0pew0KdGhpcy5fYW5pbXNbdGhpcy5fY3VyckFuaW1dLnBsYXkobnVsbCx0cnVlKTsNCn0NCnJldHVybiB0aGlzOw0KfX0pOw0KZG9qby5sZnguY29tYmluZT1mdW5jdGlvbihfM2Y0KXsNCnZhciBfM2Y1PWFyZ3VtZW50czsNCmlmKGRvam8ubGFuZy5pc0FycmF5KGFyZ3VtZW50c1swXSkpew0KXzNmNT1hcmd1bWVudHNbMF07DQp9DQppZihfM2Y1Lmxlbmd0aD09MSl7DQpyZXR1cm4gXzNmNVswXTsNCn0NCnJldHVybiBuZXcgZG9qby5sZnguQ29tYmluZShfM2Y1KTsNCn07DQpkb2pvLmxmeC5jaGFpbj1mdW5jdGlvbihfM2Y2KXsNCnZhciBfM2Y3PWFyZ3VtZW50czsNCmlmKGRvam8ubGFuZy5pc0FycmF5KGFyZ3VtZW50c1swXSkpew0KXzNmNz1hcmd1bWVudHNbMF07DQp9DQppZihfM2Y3Lmxlbmd0aD09MSl7DQpyZXR1cm4gXzNmN1swXTsNCn0NCnJldHVybiBuZXcgZG9qby5sZnguQ2hhaW4oXzNmNyk7DQp9Ow0KZG9qby5wcm92aWRlKCJkb2pvLnVyaS5VcmkiKTsNCmRvam8udXJpPW5ldyBmdW5jdGlvbigpew0KdGhpcy5kb2pvVXJpPWZ1bmN0aW9uKHVyaSl7DQpyZXR1cm4gbmV3IGRvam8udXJpLlVyaShkb2pvLmhvc3RlbnYuZ2V0QmFzZVNjcmlwdFVyaSgpLHVyaSk7DQp9Ow0KdGhpcy5tb2R1bGVVcmk9ZnVuY3Rpb24oXzNmOSx1cmkpew0KdmFyIGxvYz1kb2pvLmhvc3RlbnYuZ2V0TW9kdWxlUHJlZml4KF8zZjkpOw0KaWYoIWxvYyl7DQpyZXR1cm4gbnVsbDsNCn0NCmlmKGxvYy5sYXN0SW5kZXhPZigiLyIpIT1sb2MubGVuZ3RoLTEpew0KbG9jKz0iLyI7DQp9DQpyZXR1cm4gbmV3IGRvam8udXJpLlVyaShkb2pvLmhvc3RlbnYuZ2V0QmFzZVNjcmlwdFVyaSgpK2xvYyx1cmkpOw0KfTsNCnRoaXMuVXJpPWZ1bmN0aW9uKCl7DQp2YXIgdXJpPWFyZ3VtZW50c1swXTsNCmZvcih2YXIgaT0xO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspew0KaWYoIWFyZ3VtZW50c1tpXSl7DQpjb250aW51ZTsNCn0NCnZhciBfM2ZlPW5ldyBkb2pvLnVyaS5VcmkoYXJndW1lbnRzW2ldLnRvU3RyaW5nKCkpOw0KdmFyIF8zZmY9bmV3IGRvam8udXJpLlVyaSh1cmkudG9TdHJpbmcoKSk7DQppZigoXzNmZS5wYXRoPT0iIikmJihfM2ZlLnNjaGVtZT09bnVsbCkmJihfM2ZlLmF1dGhvcml0eT09bnVsbCkmJihfM2ZlLnF1ZXJ5PT1udWxsKSl7DQppZihfM2ZlLmZyYWdtZW50IT1udWxsKXsNCl8zZmYuZnJhZ21lbnQ9XzNmZS5mcmFnbWVudDsNCn0NCl8zZmU9XzNmZjsNCn1lbHNlew0KaWYoXzNmZS5zY2hlbWU9PW51bGwpew0KXzNmZS5zY2hlbWU9XzNmZi5zY2hlbWU7DQppZihfM2ZlLmF1dGhvcml0eT09bnVsbCl7DQpfM2ZlLmF1dGhvcml0eT1fM2ZmLmF1dGhvcml0eTsNCmlmKF8zZmUucGF0aC5jaGFyQXQoMCkhPSIvIil7DQp2YXIgcGF0aD1fM2ZmLnBhdGguc3Vic3RyaW5nKDAsXzNmZi5wYXRoLmxhc3RJbmRleE9mKCIvIikrMSkrXzNmZS5wYXRoOw0KdmFyIHNlZ3M9cGF0aC5zcGxpdCgiLyIpOw0KZm9yKHZhciBqPTA7ajxzZWdzLmxlbmd0aDtqKyspew0KaWYoc2Vnc1tqXT09Ii4iKXsNCmlmKGo9PXNlZ3MubGVuZ3RoLTEpew0Kc2Vnc1tqXT0iIjsNCn1lbHNlew0Kc2Vncy5zcGxpY2UoaiwxKTsNCmotLTsNCn0NCn1lbHNlew0KaWYoaj4wJiYhKGo9PTEmJnNlZ3NbMF09PSIiKSYmc2Vnc1tqXT09Ii4uIiYmc2Vnc1tqLTFdIT0iLi4iKXsNCmlmKGo9PXNlZ3MubGVuZ3RoLTEpew0Kc2Vncy5zcGxpY2UoaiwxKTsNCnNlZ3Nbai0xXT0iIjsNCn1lbHNlew0Kc2Vncy5zcGxpY2Uoai0xLDIpOw0Kai09MjsNCn0NCn0NCn0NCn0NCl8zZmUucGF0aD1zZWdzLmpvaW4oIi8iKTsNCn0NCn0NCn0NCn0NCnVyaT0iIjsNCmlmKF8zZmUuc2NoZW1lIT1udWxsKXsNCnVyaSs9XzNmZS5zY2hlbWUrIjoiOw0KfQ0KaWYoXzNmZS5hdXRob3JpdHkhPW51bGwpew0KdXJpKz0iLy8iK18zZmUuYXV0aG9yaXR5Ow0KfQ0KdXJpKz1fM2ZlLnBhdGg7DQppZihfM2ZlLnF1ZXJ5IT1udWxsKXsNCnVyaSs9Ij8iK18zZmUucXVlcnk7DQp9DQppZihfM2ZlLmZyYWdtZW50IT1udWxsKXsNCnVyaSs9IiMiK18zZmUuZnJhZ21lbnQ7DQp9DQp9DQp0aGlzLnVyaT11cmkudG9TdHJpbmcoKTsNCnZhciBfNDAzPSJeKChbXjovPyNdKyk6KT8oLy8oW14vPyNdKikpPyhbXj8jXSopKFxcPyhbXiNdKikpPygjKC4qKSk/JCI7DQp2YXIgcj10aGlzLnVyaS5tYXRjaChuZXcgUmVnRXhwKF80MDMpKTsNCnRoaXMuc2NoZW1lPXJbMl18fChyWzFdPyIiOm51bGwpOw0KdGhpcy5hdXRob3JpdHk9cls0XXx8KHJbM10/IiI6bnVsbCk7DQp0aGlzLnBhdGg9cls1XTsNCnRoaXMucXVlcnk9cls3XXx8KHJbNl0/IiI6bnVsbCk7DQp0aGlzLmZyYWdtZW50PXJbOV18fChyWzhdPyIiOm51bGwpOw0KaWYodGhpcy5hdXRob3JpdHkhPW51bGwpew0KXzQwMz0iXigoKFteOl0rOik/KFteQF0rKSlAKT8oW146XSopKDooWzAtOV0rKSk/JCI7DQpyPXRoaXMuYXV0aG9yaXR5Lm1hdGNoKG5ldyBSZWdFeHAoXzQwMykpOw0KdGhpcy51c2VyPXJbM118fG51bGw7DQp0aGlzLnBhc3N3b3JkPXJbNF18fG51bGw7DQp0aGlzLmhvc3Q9cls1XTsNCnRoaXMucG9ydD1yWzddfHxudWxsOw0KfQ0KdGhpcy50b1N0cmluZz1mdW5jdGlvbigpew0KcmV0dXJuIHRoaXMudXJpOw0KfTsNCn07DQp9Ow0KZG9qby5wcm92aWRlKCJkb2pvLmh0bWwuc3R5bGUiKTsNCmRvam8uaHRtbC5nZXRDbGFzcz1mdW5jdGlvbihub2RlKXsNCm5vZGU9ZG9qby5ieUlkKG5vZGUpOw0KaWYoIW5vZGUpew0KcmV0dXJuICIiOw0KfQ0KdmFyIGNzPSIiOw0KaWYobm9kZS5jbGFzc05hbWUpew0KY3M9bm9kZS5jbGFzc05hbWU7DQp9ZWxzZXsNCmlmKGRvam8uaHRtbC5oYXNBdHRyaWJ1dGUobm9kZSwiY2xhc3MiKSl7DQpjcz1kb2pvLmh0bWwuZ2V0QXR0cmlidXRlKG5vZGUsImNsYXNzIik7DQp9DQp9DQpyZXR1cm4gY3MucmVwbGFjZSgvXlxzK3xccyskL2csIiIpOw0KfTsNCmRvam8uaHRtbC5nZXRDbGFzc2VzPWZ1bmN0aW9uKG5vZGUpew0KdmFyIGM9ZG9qby5odG1sLmdldENsYXNzKG5vZGUpOw0KcmV0dXJuIChjPT0iIik/W106Yy5zcGxpdCgvXHMrL2cpOw0KfTsNCmRvam8uaHRtbC5oYXNDbGFzcz1mdW5jdGlvbihub2RlLF80MGEpew0KcmV0dXJuIChuZXcgUmVnRXhwKCIoXnxcXHMrKSIrXzQwYSsiKFxccyt8JCkiKSkudGVzdChkb2pvLmh0bWwuZ2V0Q2xhc3Mobm9kZSkpOw0KfTsNCmRvam8uaHRtbC5wcmVwZW5kQ2xhc3M9ZnVuY3Rpb24obm9kZSxfNDBjKXsNCl80MGMrPSIgIitkb2pvLmh0bWwuZ2V0Q2xhc3Mobm9kZSk7DQpyZXR1cm4gZG9qby5odG1sLnNldENsYXNzKG5vZGUsXzQwYyk7DQp9Ow0KZG9qby5odG1sLmFkZENsYXNzPWZ1bmN0aW9uKG5vZGUsXzQwZSl7DQppZihkb2pvLmh0bWwuaGFzQ2xhc3Mobm9kZSxfNDBlKSl7DQpyZXR1cm4gZmFsc2U7DQp9DQpfNDBlPShkb2pvLmh0bWwuZ2V0Q2xhc3Mobm9kZSkrIiAiK180MGUpLnJlcGxhY2UoL15ccyt8XHMrJC9nLCIiKTsNCnJldHVybiBkb2pvLmh0bWwuc2V0Q2xhc3Mobm9kZSxfNDBlKTsNCn07DQpkb2pvLmh0bWwuc2V0Q2xhc3M9ZnVuY3Rpb24obm9kZSxfNDEwKXsNCm5vZGU9ZG9qby5ieUlkKG5vZGUpOw0KdmFyIGNzPW5ldyBTdHJpbmcoXzQxMCk7DQp0cnl7DQppZih0eXBlb2Ygbm9kZS5jbGFzc05hbWU9PSJzdHJpbmciKXsNCm5vZGUuY2xhc3NOYW1lPWNzOw0KfWVsc2V7DQppZihub2RlLnNldEF0dHJpYnV0ZSl7DQpub2RlLnNldEF0dHJpYnV0ZSgiY2xhc3MiLF80MTApOw0Kbm9kZS5jbGFzc05hbWU9Y3M7DQp9ZWxzZXsNCnJldHVybiBmYWxzZTsNCn0NCn0NCn0NCmNhdGNoKGUpew0KZG9qby5kZWJ1ZygiZG9qby5odG1sLnNldENsYXNzKCkgZmFpbGVkIixlKTsNCn0NCnJldHVybiB0cnVlOw0KfTsNCmRvam8uaHRtbC5yZW1vdmVDbGFzcz1mdW5jdGlvbihub2RlLF80MTMsXzQxNCl7DQp0cnl7DQppZighXzQxNCl7DQp2YXIgXzQxNT1kb2pvLmh0bWwuZ2V0Q2xhc3Mobm9kZSkucmVwbGFjZShuZXcgUmVnRXhwKCIoXnxcXHMrKSIrXzQxMysiKFxccyt8JCkiKSwiJDEkMiIpOw0KfWVsc2V7DQp2YXIgXzQxNT1kb2pvLmh0bWwuZ2V0Q2xhc3Mobm9kZSkucmVwbGFjZShfNDEzLCIiKTsNCn0NCmRvam8uaHRtbC5zZXRDbGFzcyhub2RlLF80MTUpOw0KfQ0KY2F0Y2goZSl7DQpkb2pvLmRlYnVnKCJkb2pvLmh0bWwucmVtb3ZlQ2xhc3MoKSBmYWlsZWQiLGUpOw0KfQ0KcmV0dXJuIHRydWU7DQp9Ow0KZG9qby5odG1sLnJlcGxhY2VDbGFzcz1mdW5jdGlvbihub2RlLF80MTcsXzQxOCl7DQpkb2pvLmh0bWwucmVtb3ZlQ2xhc3Mobm9kZSxfNDE4KTsNCmRvam8uaHRtbC5hZGRDbGFzcyhub2RlLF80MTcpOw0KfTsNCmRvam8uaHRtbC5jbGFzc01hdGNoVHlwZT17Q29udGFpbnNBbGw6MCxDb250YWluc0FueToxLElzT25seToyfTsNCmRvam8uaHRtbC5nZXRFbGVtZW50c0J5Q2xhc3M9ZnVuY3Rpb24oXzQxOSxfNDFhLF80MWIsXzQxYyxfNDFkKXsNCl80MWQ9ZmFsc2U7DQp2YXIgXzQxZT1kb2pvLmRvYygpOw0KXzQxYT1kb2pvLmJ5SWQoXzQxYSl8fF80MWU7DQp2YXIgXzQxZj1fNDE5LnNwbGl0KC9ccysvZyk7DQp2YXIgXzQyMD1bXTsNCmlmKF80MWMhPTEmJl80MWMhPTIpew0KXzQxYz0wOw0KfQ0KdmFyIF80MjE9bmV3IFJlZ0V4cCgiKFxcc3xeKSgoIitfNDFmLmpvaW4oIil8KCIpKyIpKShcXHN8JCkiKTsNCnZhciBfNDIyPV80MWYuam9pbigiICIpLmxlbmd0aDsNCnZhciBfNDIzPVtdOw0KaWYoIV80MWQmJl80MWUuZXZhbHVhdGUpew0KdmFyIF80MjQ9Ii4vLyIrKF80MWJ8fCIqIikrIltjb250YWlucygiOw0KaWYoXzQxYyE9ZG9qby5odG1sLmNsYXNzTWF0Y2hUeXBlLkNvbnRhaW5zQW55KXsNCl80MjQrPSJjb25jYXQoJyAnLEBjbGFzcywnICcpLCAnICIrXzQxZi5qb2luKCIgJykgYW5kIGNvbnRhaW5zKGNvbmNhdCgnICcsQGNsYXNzLCcgJyksICcgIikrIiAnKSI7DQppZihfNDFjPT0yKXsNCl80MjQrPSIgYW5kIHN0cmluZy1sZW5ndGgoQGNsYXNzKT0iK180MjIrIl0iOw0KfWVsc2V7DQpfNDI0Kz0iXSI7DQp9DQp9ZWxzZXsNCl80MjQrPSJjb25jYXQoJyAnLEBjbGFzcywnICcpLCAnICIrXzQxZi5qb2luKCIgJykgb3IgY29udGFpbnMoY29uY2F0KCcgJyxAY2xhc3MsJyAnKSwgJyAiKSsiICcpXSI7DQp9DQp2YXIgXzQyNT1fNDFlLmV2YWx1YXRlKF80MjQsXzQxYSxudWxsLFhQYXRoUmVzdWx0LkFOWV9UWVBFLG51bGwpOw0KdmFyIF80MjY9XzQyNS5pdGVyYXRlTmV4dCgpOw0Kd2hpbGUoXzQyNil7DQp0cnl7DQpfNDIzLnB1c2goXzQyNik7DQpfNDI2PV80MjUuaXRlcmF0ZU5leHQoKTsNCn0NCmNhdGNoKGUpew0KYnJlYWs7DQp9DQp9DQpyZXR1cm4gXzQyMzsNCn1lbHNlew0KaWYoIV80MWIpew0KXzQxYj0iKiI7DQp9DQpfNDIzPV80MWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXzQxYik7DQp2YXIgbm9kZSxpPTA7DQpvdXRlcjoNCndoaWxlKG5vZGU9XzQyM1tpKytdKXsNCnZhciBfNDI5PWRvam8uaHRtbC5nZXRDbGFzc2VzKG5vZGUpOw0KaWYoXzQyOS5sZW5ndGg9PTApew0KY29udGludWUgb3V0ZXI7DQp9DQp2YXIgXzQyYT0wOw0KZm9yKHZhciBqPTA7ajxfNDI5Lmxlbmd0aDtqKyspew0KaWYoXzQyMS50ZXN0KF80Mjlbal0pKXsNCmlmKF80MWM9PWRvam8uaHRtbC5jbGFzc01hdGNoVHlwZS5Db250YWluc0FueSl7DQpfNDIwLnB1c2gobm9kZSk7DQpjb250aW51ZSBvdXRlcjsNCn1lbHNlew0KXzQyYSsrOw0KfQ0KfWVsc2V7DQppZihfNDFjPT1kb2pvLmh0bWwuY2xhc3NNYXRjaFR5cGUuSXNPbmx5KXsNCmNvbnRpbnVlIG91dGVyOw0KfQ0KfQ0KfQ0KaWYoXzQyYT09XzQxZi5sZW5ndGgpew0KaWYoKF80MWM9PWRvam8uaHRtbC5jbGFzc01hdGNoVHlwZS5Jc09ubHkpJiYoXzQyYT09XzQyOS5sZW5ndGgpKXsNCl80MjAucHVzaChub2RlKTsNCn1lbHNlew0KaWYoXzQxYz09ZG9qby5odG1sLmNsYXNzTWF0Y2hUeXBlLkNvbnRhaW5zQWxsKXsNCl80MjAucHVzaChub2RlKTsNCn0NCn0NCn0NCn0NCnJldHVybiBfNDIwOw0KfQ0KfTsNCmRvam8uaHRtbC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPWRvam8uaHRtbC5nZXRFbGVtZW50c0J5Q2xhc3M7DQpkb2pvLmh0bWwudG9DYW1lbENhc2U9ZnVuY3Rpb24oXzQyYyl7DQp2YXIgYXJyPV80MmMuc3BsaXQoIi0iKSxjYz1hcnJbMF07DQpmb3IodmFyIGk9MTtpPGFyci5sZW5ndGg7aSsrKXsNCmNjKz1hcnJbaV0uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYXJyW2ldLnN1YnN0cmluZygxKTsNCn0NCnJldHVybiBjYzsNCn07DQpkb2pvLmh0bWwudG9TZWxlY3RvckNhc2U9ZnVuY3Rpb24oXzQzMCl7DQpyZXR1cm4gXzQzMC5yZXBsYWNlKC8oW0EtWl0pL2csIi0kMSIpLnRvTG93ZXJDYXNlKCk7DQp9Ow0KZG9qby5odG1sLmdldENvbXB1dGVkU3R5bGU9ZnVuY3Rpb24obm9kZSxfNDMyLF80MzMpew0Kbm9kZT1kb2pvLmJ5SWQobm9kZSk7DQp2YXIgXzQzMj1kb2pvLmh0bWwudG9TZWxlY3RvckNhc2UoXzQzMik7DQp2YXIgXzQzND1kb2pvLmh0bWwudG9DYW1lbENhc2UoXzQzMik7DQppZighbm9kZXx8IW5vZGUuc3R5bGUpew0KcmV0dXJuIF80MzM7DQp9ZWxzZXsNCmlmKGRvY3VtZW50LmRlZmF1bHRWaWV3JiZkb2pvLmh0bWwuaXNEZXNjZW5kYW50T2Yobm9kZSxub2RlLm93bmVyRG9jdW1lbnQpKXsNCnRyeXsNCnZhciBjcz1kb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKG5vZGUsIiIpOw0KaWYoY3Mpew0KcmV0dXJuIGNzLmdldFByb3BlcnR5VmFsdWUoXzQzMik7DQp9DQp9DQpjYXRjaChlKXsNCmlmKG5vZGUuc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSl7DQpyZXR1cm4gbm9kZS5zdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKF80MzIpOw0KfWVsc2V7DQpyZXR1cm4gXzQzMzsNCn0NCn0NCn1lbHNlew0KaWYobm9kZS5jdXJyZW50U3R5bGUpew0KcmV0dXJuIG5vZGUuY3VycmVudFN0eWxlW180MzRdOw0KfQ0KfQ0KfQ0KaWYobm9kZS5zdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKXsNCnJldHVybiBub2RlLnN0eWxlLmdldFByb3BlcnR5VmFsdWUoXzQzMik7DQp9ZWxzZXsNCnJldHVybiBfNDMzOw0KfQ0KfTsNCmRvam8uaHRtbC5nZXRTdHlsZVByb3BlcnR5PWZ1bmN0aW9uKG5vZGUsXzQzNyl7DQpub2RlPWRvam8uYnlJZChub2RlKTsNCnJldHVybiAobm9kZSYmbm9kZS5zdHlsZT9ub2RlLnN0eWxlW2Rvam8uaHRtbC50b0NhbWVsQ2FzZShfNDM3KV06dW5kZWZpbmVkKTsNCn07DQpkb2pvLmh0bWwuZ2V0U3R5bGU9ZnVuY3Rpb24obm9kZSxfNDM5KXsNCnZhciBfNDNhPWRvam8uaHRtbC5nZXRTdHlsZVByb3BlcnR5KG5vZGUsXzQzOSk7DQpyZXR1cm4gKF80M2E/XzQzYTpkb2pvLmh0bWwuZ2V0Q29tcHV0ZWRTdHlsZShub2RlLF80MzkpKTsNCn07DQpkb2pvLmh0bWwuc2V0U3R5bGU9ZnVuY3Rpb24obm9kZSxfNDNjLF80M2Qpew0Kbm9kZT1kb2pvLmJ5SWQobm9kZSk7DQppZihub2RlJiZub2RlLnN0eWxlKXsNCnZhciBfNDNlPWRvam8uaHRtbC50b0NhbWVsQ2FzZShfNDNjKTsNCm5vZGUuc3R5bGVbXzQzZV09XzQzZDsNCn0NCn07DQpkb2pvLmh0bWwuc2V0U3R5bGVUZXh0PWZ1bmN0aW9uKF80M2YsdGV4dCl7DQp0cnl7DQpfNDNmLnN0eWxlLmNzc1RleHQ9dGV4dDsNCn0NCmNhdGNoKGUpew0KXzQzZi5zZXRBdHRyaWJ1dGUoInN0eWxlIix0ZXh0KTsNCn0NCn07DQpkb2pvLmh0bWwuY29weVN0eWxlPWZ1bmN0aW9uKF80NDEsXzQ0Mil7DQppZighXzQ0Mi5zdHlsZS5jc3NUZXh0KXsNCl80NDEuc2V0QXR0cmlidXRlKCJzdHlsZSIsXzQ0Mi5nZXRBdHRyaWJ1dGUoInN0eWxlIikpOw0KfWVsc2V7DQpfNDQxLnN0eWxlLmNzc1RleHQ9XzQ0Mi5zdHlsZS5jc3NUZXh0Ow0KfQ0KZG9qby5odG1sLmFkZENsYXNzKF80NDEsZG9qby5odG1sLmdldENsYXNzKF80NDIpKTsNCn07DQpkb2pvLmh0bWwuZ2V0VW5pdFZhbHVlPWZ1bmN0aW9uKG5vZGUsXzQ0NCxfNDQ1KXsNCnZhciBzPWRvam8uaHRtbC5nZXRDb21wdXRlZFN0eWxlKG5vZGUsXzQ0NCk7DQppZigoIXMpfHwoKHM9PSJhdXRvIikmJihfNDQ1KSkpew0KcmV0dXJuIHt2YWx1ZTowLHVuaXRzOiJweCJ9Ow0KfQ0KdmFyIF80NDc9cy5tYXRjaCgvKFwtP1tcZC5dKykoW2EteiVdKikvaSk7DQppZighXzQ0Nyl7DQpyZXR1cm4gZG9qby5odG1sLmdldFVuaXRWYWx1ZS5iYWQ7DQp9DQpyZXR1cm4ge3ZhbHVlOk51bWJlcihfNDQ3WzFdKSx1bml0czpfNDQ3WzJdLnRvTG93ZXJDYXNlKCl9Ow0KfTsNCmRvam8uaHRtbC5nZXRVbml0VmFsdWUuYmFkPXt2YWx1ZTpOYU4sdW5pdHM6IiJ9Ow0KZG9qby5odG1sLmdldFBpeGVsVmFsdWU9ZnVuY3Rpb24obm9kZSxfNDQ5LF80NGEpew0KdmFyIF80NGI9ZG9qby5odG1sLmdldFVuaXRWYWx1ZShub2RlLF80NDksXzQ0YSk7DQppZihpc05hTihfNDRiLnZhbHVlKSl7DQpyZXR1cm4gMDsNCn0NCmlmKChfNDRiLnZhbHVlKSYmKF80NGIudW5pdHMhPSJweCIpKXsNCnJldHVybiBOYU47DQp9DQpyZXR1cm4gXzQ0Yi52YWx1ZTsNCn07DQpkb2pvLmh0bWwuc2V0UG9zaXRpdmVQaXhlbFZhbHVlPWZ1bmN0aW9uKG5vZGUsXzQ0ZCxfNDRlKXsNCmlmKGlzTmFOKF80NGUpKXsNCnJldHVybiBmYWxzZTsNCn0NCm5vZGUuc3R5bGVbXzQ0ZF09TWF0aC5tYXgoMCxfNDRlKSsicHgiOw0KcmV0dXJuIHRydWU7DQp9Ow0KZG9qby5odG1sLnN0eWxlU2hlZXQ9bnVsbDsNCmRvam8uaHRtbC5pbnNlcnRDc3NSdWxlPWZ1bmN0aW9uKF80NGYsXzQ1MCxfNDUxKXsNCmlmKCFkb2pvLmh0bWwuc3R5bGVTaGVldCl7DQppZihkb2N1bWVudC5jcmVhdGVTdHlsZVNoZWV0KXsNCmRvam8uaHRtbC5zdHlsZVNoZWV0PWRvY3VtZW50LmNyZWF0ZVN0eWxlU2hlZXQoKTsNCn1lbHNlew0KaWYoZG9jdW1lbnQuc3R5bGVTaGVldHNbMF0pew0KZG9qby5odG1sLnN0eWxlU2hlZXQ9ZG9jdW1lbnQuc3R5bGVTaGVldHNbMF07DQp9ZWxzZXsNCnJldHVybiBudWxsOw0KfQ0KfQ0KfQ0KaWYoYXJndW1lbnRzLmxlbmd0aDwzKXsNCmlmKGRvam8uaHRtbC5zdHlsZVNoZWV0LmNzc1J1bGVzKXsNCl80NTE9ZG9qby5odG1sLnN0eWxlU2hlZXQuY3NzUnVsZXMubGVuZ3RoOw0KfWVsc2V7DQppZihkb2pvLmh0bWwuc3R5bGVTaGVldC5ydWxlcyl7DQpfNDUxPWRvam8uaHRtbC5zdHlsZVNoZWV0LnJ1bGVzLmxlbmd0aDsNCn1lbHNlew0KcmV0dXJuIG51bGw7DQp9DQp9DQp9DQppZihkb2pvLmh0bWwuc3R5bGVTaGVldC5pbnNlcnRSdWxlKXsNCnZhciBydWxlPV80NGYrIiB7ICIrXzQ1MCsiIH0iOw0KcmV0dXJuIGRvam8uaHRtbC5zdHlsZVNoZWV0Lmluc2VydFJ1bGUocnVsZSxfNDUxKTsNCn1lbHNlew0KaWYoZG9qby5odG1sLnN0eWxlU2hlZXQuYWRkUnVsZSl7DQpyZXR1cm4gZG9qby5odG1sLnN0eWxlU2hlZXQuYWRkUnVsZShfNDRmLF80NTAsXzQ1MSk7DQp9ZWxzZXsNCnJldHVybiBudWxsOw0KfQ0KfQ0KfTsNCmRvam8uaHRtbC5yZW1vdmVDc3NSdWxlPWZ1bmN0aW9uKF80NTMpew0KaWYoIWRvam8uaHRtbC5zdHlsZVNoZWV0KXsNCmRvam8uZGVidWcoIm5vIHN0eWxlc2hlZXQgZGVmaW5lZCBmb3IgcmVtb3ZpbmcgcnVsZXMiKTsNCnJldHVybiBmYWxzZTsNCn0NCmlmKGRvam8ucmVuZGVyLmh0bWwuaWUpew0KaWYoIV80NTMpew0KXzQ1Mz1kb2pvLmh0bWwuc3R5bGVTaGVldC5ydWxlcy5sZW5ndGg7DQpkb2pvLmh0bWwuc3R5bGVTaGVldC5yZW1vdmVSdWxlKF80NTMpOw0KfQ0KfWVsc2V7DQppZihkb2N1bWVudC5zdHlsZVNoZWV0c1swXSl7DQppZighXzQ1Myl7DQpfNDUzPWRvam8uaHRtbC5zdHlsZVNoZWV0LmNzc1J1bGVzLmxlbmd0aDsNCn0NCmRvam8uaHRtbC5zdHlsZVNoZWV0LmRlbGV0ZVJ1bGUoXzQ1Myk7DQp9DQp9DQpyZXR1cm4gdHJ1ZTsNCn07DQpkb2pvLmh0bWwuX2luc2VydGVkQ3NzRmlsZXM9W107DQpkb2pvLmh0bWwuaW5zZXJ0Q3NzRmlsZT1mdW5jdGlvbihVUkksZG9jLF80NTYsXzQ1Nyl7DQppZighVVJJKXsNCnJldHVybjsNCn0NCmlmKCFkb2Mpew0KZG9jPWRvY3VtZW50Ow0KfQ0KdmFyIF80NTg9ZG9qby5ob3N0ZW52LmdldFRleHQoVVJJLGZhbHNlLF80NTcpOw0KaWYoXzQ1OD09PW51bGwpew0KcmV0dXJuOw0KfQ0KXzQ1OD1kb2pvLmh0bWwuZml4UGF0aHNJbkNzc1RleHQoXzQ1OCxVUkkpOw0KaWYoXzQ1Nil7DQp2YXIgaWR4PS0xLG5vZGUsZW50PWRvam8uaHRtbC5faW5zZXJ0ZWRDc3NGaWxlczsNCmZvcih2YXIgaT0wO2k8ZW50Lmxlbmd0aDtpKyspew0KaWYoKGVudFtpXS5kb2M9PWRvYykmJihlbnRbaV0uY3NzVGV4dD09XzQ1OCkpew0KaWR4PWk7DQpub2RlPWVudFtpXS5ub2RlUmVmOw0KYnJlYWs7DQp9DQp9DQppZihub2RlKXsNCnZhciBfNDVkPWRvYy5nZXRFbGVtZW50c0J5VGFnTmFtZSgic3R5bGUiKTsNCmZvcih2YXIgaT0wO2k8XzQ1ZC5sZW5ndGg7aSsrKXsNCmlmKF80NWRbaV09PW5vZGUpew0KcmV0dXJuOw0KfQ0KfQ0KZG9qby5odG1sLl9pbnNlcnRlZENzc0ZpbGVzLnNoaWZ0KGlkeCwxKTsNCn0NCn0NCnZhciBfNDVlPWRvam8uaHRtbC5pbnNlcnRDc3NUZXh0KF80NTgpOw0KZG9qby5odG1sLl9pbnNlcnRlZENzc0ZpbGVzLnB1c2goeyJkb2MiOmRvYywiY3NzVGV4dCI6XzQ1OCwibm9kZVJlZiI6XzQ1ZX0pOw0KaWYoXzQ1ZSYmZGpDb25maWcuaXNEZWJ1Zyl7DQpfNDVlLnNldEF0dHJpYnV0ZSgiZGJnSHJlZiIsVVJJKTsNCn0NCnJldHVybiBfNDVlOw0KfTsNCmRvam8uaHRtbC5pbnNlcnRDc3NUZXh0PWZ1bmN0aW9uKF80NWYsZG9jLFVSSSl7DQppZighXzQ1Zil7DQpyZXR1cm47DQp9DQppZighZG9jKXsNCmRvYz1kb2N1bWVudDsNCn0NCmlmKFVSSSl7DQpfNDVmPWRvam8uaHRtbC5maXhQYXRoc0luQ3NzVGV4dChfNDVmLFVSSSk7DQp9DQp2YXIgXzQ2Mj1kb2MuY3JlYXRlRWxlbWVudCgic3R5bGUiKTsNCl80NjIuc2V0QXR0cmlidXRlKCJ0eXBlIiwidGV4dC9jc3MiKTsNCnZhciBoZWFkPWRvYy5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdOw0KaWYoIWhlYWQpew0KZG9qby5kZWJ1ZygiTm8gaGVhZCB0YWcgaW4gZG9jdW1lbnQsIGFib3J0aW5nIHN0eWxlcyIpOw0KcmV0dXJuOw0KfWVsc2V7DQpoZWFkLmFwcGVuZENoaWxkKF80NjIpOw0KfQ0KaWYoXzQ2Mi5zdHlsZVNoZWV0KXsNCl80NjIuc3R5bGVTaGVldC5jc3NUZXh0PV80NWY7DQp9ZWxzZXsNCnZhciBfNDY0PWRvYy5jcmVhdGVUZXh0Tm9kZShfNDVmKTsNCl80NjIuYXBwZW5kQ2hpbGQoXzQ2NCk7DQp9DQpyZXR1cm4gXzQ2MjsNCn07DQpkb2pvLmh0bWwuZml4UGF0aHNJbkNzc1RleHQ9ZnVuY3Rpb24oXzQ2NSxVUkkpew0KZnVuY3Rpb24gaWVmaXhQYXRoc0luQ3NzVGV4dCgpew0KdmFyIF80Njc9L0FscGhhSW1hZ2VMb2FkZXJcKHNyY1w9WyciXShbXHRcc1x3KClcLy5cXCciLTojPSY/fl0qKVsnIl0vOw0Kd2hpbGUoXzQ2OD1fNDY3LmV4ZWMoXzQ2NSkpew0KdXJsPV80NjhbMV0ucmVwbGFjZShfNDZhLCIkMiIpOw0KaWYoIV80NmIuZXhlYyh1cmwpKXsNCnVybD0obmV3IGRvam8udXJpLlVyaShVUkksdXJsKS50b1N0cmluZygpKTsNCn0NCnN0cis9XzQ2NS5zdWJzdHJpbmcoMCxfNDY4LmluZGV4KSsiQWxwaGFJbWFnZUxvYWRlcihzcmM9JyIrdXJsKyInIjsNCl80NjU9XzQ2NS5zdWJzdHIoXzQ2OC5pbmRleCtfNDY4WzBdLmxlbmd0aCk7DQp9DQpyZXR1cm4gc3RyK180NjU7DQp9DQppZighXzQ2NXx8IVVSSSl7DQpyZXR1cm47DQp9DQp2YXIgXzQ2OCxzdHI9IiIsdXJsPSIiOw0KdmFyIF80NmQ9L3VybFwoXHMqKFtcdFxzXHcoKVwvLlxcJyItOiM9Jj9dKylccypcKS87DQp2YXIgXzQ2Yj0vKGZpbGV8aHR0cHM/fGZ0cHM/KTpcL1wvLzsNCnZhciBfNDZhPS9eW1xzXSooWyciXT8pKFtcdygpXC8uXFwnIi06Iz0mP10qKVwxW1xzXSo/JC87DQppZihkb2pvLnJlbmRlci5odG1sLmllNTV8fGRvam8ucmVuZGVyLmh0bWwuaWU2MCl7DQpfNDY1PWllZml4UGF0aHNJbkNzc1RleHQoKTsNCn0NCndoaWxlKF80Njg9XzQ2ZC5leGVjKF80NjUpKXsNCnVybD1fNDY4WzFdLnJlcGxhY2UoXzQ2YSwiJDIiKTsNCmlmKCFfNDZiLmV4ZWModXJsKSl7DQp1cmw9KG5ldyBkb2pvLnVyaS5VcmkoVVJJLHVybCkudG9TdHJpbmcoKSk7DQp9DQpzdHIrPV80NjUuc3Vic3RyaW5nKDAsXzQ2OC5pbmRleCkrInVybCgiK3VybCsiKSI7DQpfNDY1PV80NjUuc3Vic3RyKF80NjguaW5kZXgrXzQ2OFswXS5sZW5ndGgpOw0KfQ0KcmV0dXJuIHN0citfNDY1Ow0KfTsNCmRvam8uaHRtbC5zZXRBY3RpdmVTdHlsZVNoZWV0PWZ1bmN0aW9uKF80NmUpew0KdmFyIGk9MCxhLGVscz1kb2pvLmRvYygpLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJsaW5rIik7DQp3aGlsZShhPWVsc1tpKytdKXsNCmlmKGEuZ2V0QXR0cmlidXRlKCJyZWwiKS5pbmRleE9mKCJzdHlsZSIpIT0tMSYmYS5nZXRBdHRyaWJ1dGUoInRpdGxlIikpew0KYS5kaXNhYmxlZD10cnVlOw0KaWYoYS5nZXRBdHRyaWJ1dGUoInRpdGxlIik9PV80NmUpew0KYS5kaXNhYmxlZD1mYWxzZTsNCn0NCn0NCn0NCn07DQpkb2pvLmh0bWwuZ2V0QWN0aXZlU3R5bGVTaGVldD1mdW5jdGlvbigpew0KdmFyIGk9MCxhLGVscz1kb2pvLmRvYygpLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJsaW5rIik7DQp3aGlsZShhPWVsc1tpKytdKXsNCmlmKGEuZ2V0QXR0cmlidXRlKCJyZWwiKS5pbmRleE9mKCJzdHlsZSIpIT0tMSYmYS5nZXRBdHRyaWJ1dGUoInRpdGxlIikmJiFhLmRpc2FibGVkKXsNCnJldHVybiBhLmdldEF0dHJpYnV0ZSgidGl0bGUiKTsNCn0NCn0NCnJldHVybiBudWxsOw0KfTsNCmRvam8uaHRtbC5nZXRQcmVmZXJyZWRTdHlsZVNoZWV0PWZ1bmN0aW9uKCl7DQp2YXIgaT0wLGEsZWxzPWRvam8uZG9jKCkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImxpbmsiKTsNCndoaWxlKGE9ZWxzW2krK10pew0KaWYoYS5nZXRBdHRyaWJ1dGUoInJlbCIpLmluZGV4T2YoInN0eWxlIikhPS0xJiZhLmdldEF0dHJpYnV0ZSgicmVsIikuaW5kZXhPZigiYWx0Iik9PS0xJiZhLmdldEF0dHJpYnV0ZSgidGl0bGUiKSl7DQpyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoInRpdGxlIik7DQp9DQp9DQpyZXR1cm4gbnVsbDsNCn07DQpkb2pvLmh0bWwuYXBwbHlCcm93c2VyQ2xhc3M9ZnVuY3Rpb24obm9kZSl7DQp2YXIgZHJoPWRvam8ucmVuZGVyLmh0bWw7DQp2YXIgXzQ3YT17ZGpfaWU6ZHJoLmllLGRqX2llNTU6ZHJoLmllNTUsZGpfaWU2OmRyaC5pZTYwLGRqX2llNzpkcmguaWU3MCxkal9pZXF1aXJrczpkcmguaWUmJmRyaC5xdWlya3MsZGpfb3BlcmE6ZHJoLm9wZXJhLGRqX29wZXJhODpkcmgub3BlcmEmJihNYXRoLmZsb29yKGRvam8ucmVuZGVyLnZlcnNpb24pPT04KSxkal9vcGVyYTk6ZHJoLm9wZXJhJiYoTWF0aC5mbG9vcihkb2pvLnJlbmRlci52ZXJzaW9uKT09OSksZGpfa2h0bWw6ZHJoLmtodG1sLGRqX3NhZmFyaTpkcmguc2FmYXJpLGRqX2dlY2tvOmRyaC5tb3ppbGxhfTsNCmZvcih2YXIgcCBpbiBfNDdhKXsNCmlmKF80N2FbcF0pew0KZG9qby5odG1sLmFkZENsYXNzKG5vZGUscCk7DQp9DQp9DQp9Ow0KZG9qby5wcm92aWRlKCJkb2pvLmh0bWwuZGlzcGxheSIpOw0KZG9qby5odG1sLl90b2dnbGU9ZnVuY3Rpb24obm9kZSxfNDdkLF80N2Upew0Kbm9kZT1kb2pvLmJ5SWQobm9kZSk7DQpfNDdlKG5vZGUsIV80N2Qobm9kZSkpOw0KcmV0dXJuIF80N2Qobm9kZSk7DQp9Ow0KZG9qby5odG1sLnNob3c9ZnVuY3Rpb24obm9kZSl7DQpub2RlPWRvam8uYnlJZChub2RlKTsNCmlmKGRvam8uaHRtbC5nZXRTdHlsZVByb3BlcnR5KG5vZGUsImRpc3BsYXkiKT09Im5vbmUiKXsNCmRvam8uaHRtbC5zZXRTdHlsZShub2RlLCJkaXNwbGF5Iiwobm9kZS5kb2pvRGlzcGxheUNhY2hlfHwiIikpOw0Kbm9kZS5kb2pvRGlzcGxheUNhY2hlPXVuZGVmaW5lZDsNCn0NCn07DQpkb2pvLmh0bWwuaGlkZT1mdW5jdGlvbihub2RlKXsNCm5vZGU9ZG9qby5ieUlkKG5vZGUpOw0KaWYodHlwZW9mIG5vZGVbImRvam9EaXNwbGF5Q2FjaGUiXT09InVuZGVmaW5lZCIpew0KdmFyIGQ9ZG9qby5odG1sLmdldFN0eWxlUHJvcGVydHkobm9kZSwiZGlzcGxheSIpOw0KaWYoZCE9Im5vbmUiKXsNCm5vZGUuZG9qb0Rpc3BsYXlDYWNoZT1kOw0KfQ0KfQ0KZG9qby5odG1sLnNldFN0eWxlKG5vZGUsImRpc3BsYXkiLCJub25lIik7DQp9Ow0KZG9qby5odG1sLnNldFNob3dpbmc9ZnVuY3Rpb24obm9kZSxfNDgzKXsNCmRvam8uaHRtbFsoXzQ4Mz8ic2hvdyI6ImhpZGUiKV0obm9kZSk7DQp9Ow0KZG9qby5odG1sLmlzU2hvd2luZz1mdW5jdGlvbihub2RlKXsNCnJldHVybiAoZG9qby5odG1sLmdldFN0eWxlUHJvcGVydHkobm9kZSwiZGlzcGxheSIpIT0ibm9uZSIpOw0KfTsNCmRvam8uaHRtbC50b2dnbGVTaG93aW5nPWZ1bmN0aW9uKG5vZGUpew0KcmV0dXJuIGRvam8uaHRtbC5fdG9nZ2xlKG5vZGUsZG9qby5odG1sLmlzU2hvd2luZyxkb2pvLmh0bWwuc2V0U2hvd2luZyk7DQp9Ow0KZG9qby5odG1sLmRpc3BsYXlNYXA9e3RyOiIiLHRkOiIiLHRoOiIiLGltZzoiaW5saW5lIixzcGFuOiJpbmxpbmUiLGlucHV0OiJpbmxpbmUiLGJ1dHRvbjoiaW5saW5lIn07DQpkb2pvLmh0bWwuc3VnZ2VzdERpc3BsYXlCeVRhZ05hbWU9ZnVuY3Rpb24obm9kZSl7DQpub2RlPWRvam8uYnlJZChub2RlKTsNCmlmKG5vZGUmJm5vZGUudGFnTmFtZSl7DQp2YXIgdGFnPW5vZGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpOw0KcmV0dXJuICh0YWcgaW4gZG9qby5odG1sLmRpc3BsYXlNYXA/ZG9qby5odG1sLmRpc3BsYXlNYXBbdGFnXToiYmxvY2siKTsNCn0NCn07DQpkb2pvLmh0bWwuc2V0RGlzcGxheT1mdW5jdGlvbihub2RlLF80ODkpew0KZG9qby5odG1sLnNldFN0eWxlKG5vZGUsImRpc3BsYXkiLCgoXzQ4OSBpbnN0YW5jZW9mIFN0cmluZ3x8dHlwZW9mIF80ODk9PSJzdHJpbmciKT9fNDg5OihfNDg5P2Rvam8uaHRtbC5zdWdnZXN0RGlzcGxheUJ5VGFnTmFtZShub2RlKToibm9uZSIpKSk7DQp9Ow0KZG9qby5odG1sLmlzRGlzcGxheWVkPWZ1bmN0aW9uKG5vZGUpew0KcmV0dXJuIChkb2pvLmh0bWwuZ2V0Q29tcHV0ZWRTdHlsZShub2RlLCJkaXNwbGF5IikhPSJub25lIik7DQp9Ow0KZG9qby5odG1sLnRvZ2dsZURpc3BsYXk9ZnVuY3Rpb24obm9kZSl7DQpyZXR1cm4gZG9qby5odG1sLl90b2dnbGUobm9kZSxkb2pvLmh0bWwuaXNEaXNwbGF5ZWQsZG9qby5odG1sLnNldERpc3BsYXkpOw0KfTsNCmRvam8uaHRtbC5zZXRWaXNpYmlsaXR5PWZ1bmN0aW9uKG5vZGUsXzQ4ZCl7DQpkb2pvLmh0bWwuc2V0U3R5bGUobm9kZSwidmlzaWJpbGl0eSIsKChfNDhkIGluc3RhbmNlb2YgU3RyaW5nfHx0eXBlb2YgXzQ4ZD09InN0cmluZyIpP180OGQ6KF80OGQ/InZpc2libGUiOiJoaWRkZW4iKSkpOw0KfTsNCmRvam8uaHRtbC5pc1Zpc2libGU9ZnVuY3Rpb24obm9kZSl7DQpyZXR1cm4gKGRvam8uaHRtbC5nZXRDb21wdXRlZFN0eWxlKG5vZGUsInZpc2liaWxpdHkiKSE9ImhpZGRlbiIpOw0KfTsNCmRvam8uaHRtbC50b2dnbGVWaXNpYmlsaXR5PWZ1bmN0aW9uKG5vZGUpew0KcmV0dXJuIGRvam8uaHRtbC5fdG9nZ2xlKG5vZGUsZG9qby5odG1sLmlzVmlzaWJsZSxkb2pvLmh0bWwuc2V0VmlzaWJpbGl0eSk7DQp9Ow0KZG9qby5odG1sLnNldE9wYWNpdHk9ZnVuY3Rpb24obm9kZSxfNDkxLF80OTIpew0Kbm9kZT1kb2pvLmJ5SWQobm9kZSk7DQp2YXIgaD1kb2pvLnJlbmRlci5odG1sOw0KaWYoIV80OTIpew0KaWYoXzQ5MT49MSl7DQppZihoLmllKXsNCmRvam8uaHRtbC5jbGVhck9wYWNpdHkobm9kZSk7DQpyZXR1cm47DQp9ZWxzZXsNCl80OTE9MC45OTk5OTk7DQp9DQp9ZWxzZXsNCmlmKF80OTE8MCl7DQpfNDkxPTA7DQp9DQp9DQp9DQppZihoLmllKXsNCmlmKG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09InRyIil7DQp2YXIgdGRzPW5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRkIik7DQpmb3IodmFyIHg9MDt4PHRkcy5sZW5ndGg7eCsrKXsNCnRkc1t4XS5zdHlsZS5maWx0ZXI9IkFscGhhKE9wYWNpdHk9IitfNDkxKjEwMCsiKSI7DQp9DQp9DQpub2RlLnN0eWxlLmZpbHRlcj0iQWxwaGEoT3BhY2l0eT0iK180OTEqMTAwKyIpIjsNCn1lbHNlew0KaWYoaC5tb3opew0Kbm9kZS5zdHlsZS5vcGFjaXR5PV80OTE7DQpub2RlLnN0eWxlLk1vek9wYWNpdHk9XzQ5MTsNCn1lbHNlew0KaWYoaC5zYWZhcmkpew0Kbm9kZS5zdHlsZS5vcGFjaXR5PV80OTE7DQpub2RlLnN0eWxlLktodG1sT3BhY2l0eT1fNDkxOw0KfWVsc2V7DQpub2RlLnN0eWxlLm9wYWNpdHk9XzQ5MTsNCn0NCn0NCn0NCn07DQpkb2pvLmh0bWwuY2xlYXJPcGFjaXR5PWZ1bmN0aW9uKG5vZGUpew0Kbm9kZT1kb2pvLmJ5SWQobm9kZSk7DQp2YXIgbnM9bm9kZS5zdHlsZTsNCnZhciBoPWRvam8ucmVuZGVyLmh0bWw7DQppZihoLmllKXsNCnRyeXsNCmlmKG5vZGUuZmlsdGVycyYmbm9kZS5maWx0ZXJzLmFscGhhKXsNCm5zLmZpbHRlcj0iIjsNCn0NCn0NCmNhdGNoKGUpew0KfQ0KfWVsc2V7DQppZihoLm1veil7DQpucy5vcGFjaXR5PTE7DQpucy5Nb3pPcGFjaXR5PTE7DQp9ZWxzZXsNCmlmKGguc2FmYXJpKXsNCm5zLm9wYWNpdHk9MTsNCm5zLktodG1sT3BhY2l0eT0xOw0KfWVsc2V7DQpucy5vcGFjaXR5PTE7DQp9DQp9DQp9DQp9Ow0KZG9qby5odG1sLmdldE9wYWNpdHk9ZnVuY3Rpb24obm9kZSl7DQpub2RlPWRvam8uYnlJZChub2RlKTsNCnZhciBoPWRvam8ucmVuZGVyLmh0bWw7DQppZihoLmllKXsNCnZhciBvcGFjPShub2RlLmZpbHRlcnMmJm5vZGUuZmlsdGVycy5hbHBoYSYmdHlwZW9mIG5vZGUuZmlsdGVycy5hbHBoYS5vcGFjaXR5PT0ibnVtYmVyIj9ub2RlLmZpbHRlcnMuYWxwaGEub3BhY2l0eToxMDApLzEwMDsNCn1lbHNlew0KdmFyIG9wYWM9bm9kZS5zdHlsZS5vcGFjaXR5fHxub2RlLnN0eWxlLk1vek9wYWNpdHl8fG5vZGUuc3R5bGUuS2h0bWxPcGFjaXR5fHwxOw0KfQ0KcmV0dXJuIG9wYWM+PTAuOTk5OTk5PzE6TnVtYmVyKG9wYWMpOw0KfTsNCmRvam8ucHJvdmlkZSgiZG9qby5odG1sLmNvbG9yIik7DQpkb2pvLmh0bWwuZ2V0QmFja2dyb3VuZENvbG9yPWZ1bmN0aW9uKG5vZGUpew0Kbm9kZT1kb2pvLmJ5SWQobm9kZSk7DQp2YXIgXzQ5ZDsNCmRvew0KXzQ5ZD1kb2pvLmh0bWwuZ2V0U3R5bGUobm9kZSwiYmFja2dyb3VuZC1jb2xvciIpOw0KaWYoXzQ5ZC50b0xvd2VyQ2FzZSgpPT0icmdiYSgwLCAwLCAwLCAwKSIpew0KXzQ5ZD0idHJhbnNwYXJlbnQiOw0KfQ0KaWYobm9kZT09ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKVswXSl7DQpub2RlPW51bGw7DQpicmVhazsNCn0NCm5vZGU9bm9kZS5wYXJlbnROb2RlOw0KfXdoaWxlKG5vZGUmJmRvam8ubGFuZy5pbkFycmF5KFsidHJhbnNwYXJlbnQiLCIiXSxfNDlkKSk7DQppZihfNDlkPT0idHJhbnNwYXJlbnQiKXsNCl80OWQ9WzI1NSwyNTUsMjU1LDBdOw0KfWVsc2V7DQpfNDlkPWRvam8uZ2Z4LmNvbG9yLmV4dHJhY3RSR0IoXzQ5ZCk7DQp9DQpyZXR1cm4gXzQ5ZDsNCn07DQpkb2pvLnByb3ZpZGUoImRvam8uaHRtbC5jb21tb24iKTsNCmRvam8ubGFuZy5taXhpbihkb2pvLmh0bWwsZG9qby5kb20pOw0KZG9qby5odG1sLmJvZHk9ZnVuY3Rpb24oKXsNCmRvam8uZGVwcmVjYXRlZCgiZG9qby5odG1sLmJvZHkoKSBtb3ZlZCB0byBkb2pvLmJvZHkoKSIsIjAuNSIpOw0KcmV0dXJuIGRvam8uYm9keSgpOw0KfTsNCmRvam8uaHRtbC5nZXRFdmVudFRhcmdldD1mdW5jdGlvbihldnQpew0KaWYoIWV2dCl7DQpldnQ9ZG9qby5nbG9iYWwoKS5ldmVudHx8e307DQp9DQp2YXIgdD0oZXZ0LnNyY0VsZW1lbnQ/ZXZ0LnNyY0VsZW1lbnQ6KGV2dC50YXJnZXQ/ZXZ0LnRhcmdldDpudWxsKSk7DQp3aGlsZSgodCkmJih0Lm5vZGVUeXBlIT0xKSl7DQp0PXQucGFyZW50Tm9kZTsNCn0NCnJldHVybiB0Ow0KfTsNCmRvam8uaHRtbC5nZXRWaWV3cG9ydD1mdW5jdGlvbigpew0KdmFyIF80YTA9ZG9qby5nbG9iYWwoKTsNCnZhciBfNGExPWRvam8uZG9jKCk7DQp2YXIgdz0wOw0KdmFyIGg9MDsNCmlmKGRvam8ucmVuZGVyLmh0bWwubW96aWxsYSl7DQp3PV80YTEuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoOw0KaD1fNGEwLmlubmVySGVpZ2h0Ow0KfWVsc2V7DQppZighZG9qby5yZW5kZXIuaHRtbC5vcGVyYSYmXzRhMC5pbm5lcldpZHRoKXsNCnc9XzRhMC5pbm5lcldpZHRoOw0KaD1fNGEwLmlubmVySGVpZ2h0Ow0KfWVsc2V7DQppZighZG9qby5yZW5kZXIuaHRtbC5vcGVyYSYmZG9qby5leGlzdHMoXzRhMSwiZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIikpew0KdmFyIHcyPV80YTEuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoOw0KaWYoIXd8fHcyJiZ3Mjx3KXsNCnc9dzI7DQp9DQpoPV80YTEuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDsNCn1lbHNlew0KaWYoZG9qby5ib2R5KCkuY2xpZW50V2lkdGgpew0Kdz1kb2pvLmJvZHkoKS5jbGllbnRXaWR0aDsNCmg9ZG9qby5ib2R5KCkuY2xpZW50SGVpZ2h0Ow0KfQ0KfQ0KfQ0KfQ0KcmV0dXJuIHt3aWR0aDp3LGhlaWdodDpofTsNCn07DQpkb2pvLmh0bWwuZ2V0U2Nyb2xsPWZ1bmN0aW9uKCl7DQp2YXIgXzRhNT1kb2pvLmdsb2JhbCgpOw0KdmFyIF80YTY9ZG9qby5kb2MoKTsNCnZhciB0b3A9XzRhNS5wYWdlWU9mZnNldHx8XzRhNi5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wfHxkb2pvLmJvZHkoKS5zY3JvbGxUb3B8fDA7DQp2YXIgbGVmdD1fNGE1LnBhZ2VYT2Zmc2V0fHxfNGE2LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0fHxkb2pvLmJvZHkoKS5zY3JvbGxMZWZ0fHwwOw0KcmV0dXJuIHt0b3A6dG9wLGxlZnQ6bGVmdCxvZmZzZXQ6e3g6bGVmdCx5OnRvcH19Ow0KfTsNCmRvam8uaHRtbC5nZXRQYXJlbnRCeVR5cGU9ZnVuY3Rpb24obm9kZSx0eXBlKXsNCnZhciBfNGFiPWRvam8uZG9jKCk7DQp2YXIgXzRhYz1kb2pvLmJ5SWQobm9kZSk7DQp0eXBlPXR5cGUudG9Mb3dlckNhc2UoKTsNCndoaWxlKChfNGFjKSYmKF80YWMubm9kZU5hbWUudG9Mb3dlckNhc2UoKSE9dHlwZSkpew0KaWYoXzRhYz09KF80YWJbImJvZHkiXXx8XzRhYlsiZG9jdW1lbnRFbGVtZW50Il0pKXsNCnJldHVybiBudWxsOw0KfQ0KXzRhYz1fNGFjLnBhcmVudE5vZGU7DQp9DQpyZXR1cm4gXzRhYzsNCn07DQpkb2pvLmh0bWwuZ2V0QXR0cmlidXRlPWZ1bmN0aW9uKG5vZGUsYXR0cil7DQpub2RlPWRvam8uYnlJZChub2RlKTsNCmlmKCghbm9kZSl8fCghbm9kZS5nZXRBdHRyaWJ1dGUpKXsNCnJldHVybiBudWxsOw0KfQ0KdmFyIHRhPXR5cGVvZiBhdHRyPT0ic3RyaW5nIj9hdHRyOm5ldyBTdHJpbmcoYXR0cik7DQp2YXIgdj1ub2RlLmdldEF0dHJpYnV0ZSh0YS50b1VwcGVyQ2FzZSgpKTsNCmlmKCh2KSYmKHR5cGVvZiB2PT0ic3RyaW5nIikmJih2IT0iIikpew0KcmV0dXJuIHY7DQp9DQppZih2JiZ2LnZhbHVlKXsNCnJldHVybiB2LnZhbHVlOw0KfQ0KaWYoKG5vZGUuZ2V0QXR0cmlidXRlTm9kZSkmJihub2RlLmdldEF0dHJpYnV0ZU5vZGUodGEpKSl7DQpyZXR1cm4gKG5vZGUuZ2V0QXR0cmlidXRlTm9kZSh0YSkpLnZhbHVlOw0KfWVsc2V7DQppZihub2RlLmdldEF0dHJpYnV0ZSh0YSkpew0KcmV0dXJuIG5vZGUuZ2V0QXR0cmlidXRlKHRhKTsNCn1lbHNlew0KaWYobm9kZS5nZXRBdHRyaWJ1dGUodGEudG9Mb3dlckNhc2UoKSkpew0KcmV0dXJuIG5vZGUuZ2V0QXR0cmlidXRlKHRhLnRvTG93ZXJDYXNlKCkpOw0KfQ0KfQ0KfQ0KcmV0dXJuIG51bGw7DQp9Ow0KZG9qby5odG1sLmhhc0F0dHJpYnV0ZT1mdW5jdGlvbihub2RlLGF0dHIpew0KcmV0dXJuIGRvam8uaHRtbC5nZXRBdHRyaWJ1dGUoZG9qby5ieUlkKG5vZGUpLGF0dHIpP3RydWU6ZmFsc2U7DQp9Ow0KZG9qby5odG1sLmdldEN1cnNvclBvc2l0aW9uPWZ1bmN0aW9uKGUpew0KZT1lfHxkb2pvLmdsb2JhbCgpLmV2ZW50Ow0KdmFyIF80YjQ9e3g6MCx5OjB9Ow0KaWYoZS5wYWdlWHx8ZS5wYWdlWSl7DQpfNGI0Lng9ZS5wYWdlWDsNCl80YjQueT1lLnBhZ2VZOw0KfWVsc2V7DQp2YXIgZGU9ZG9qby5kb2MoKS5kb2N1bWVudEVsZW1lbnQ7DQp2YXIgZGI9ZG9qby5ib2R5KCk7DQpfNGI0Lng9ZS5jbGllbnRYKygoZGV8fGRiKVsic2Nyb2xsTGVmdCJdKS0oKGRlfHxkYilbImNsaWVudExlZnQiXSk7DQpfNGI0Lnk9ZS5jbGllbnRZKygoZGV8fGRiKVsic2Nyb2xsVG9wIl0pLSgoZGV8fGRiKVsiY2xpZW50VG9wIl0pOw0KfQ0KcmV0dXJuIF80YjQ7DQp9Ow0KZG9qby5odG1sLmlzVGFnPWZ1bmN0aW9uKG5vZGUpew0Kbm9kZT1kb2pvLmJ5SWQobm9kZSk7DQppZihub2RlJiZub2RlLnRhZ05hbWUpew0KZm9yKHZhciBpPTE7aTxhcmd1bWVudHMubGVuZ3RoO2krKyl7DQppZihub2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09U3RyaW5nKGFyZ3VtZW50c1tpXSkudG9Mb3dlckNhc2UoKSl7DQpyZXR1cm4gU3RyaW5nKGFyZ3VtZW50c1tpXSkudG9Mb3dlckNhc2UoKTsNCn0NCn0NCn0NCnJldHVybiAiIjsNCn07DQppZihkb2pvLnJlbmRlci5odG1sLmllJiYhZG9qby5yZW5kZXIuaHRtbC5pZTcwKXsNCmlmKHdpbmRvdy5sb2NhdGlvbi5ocmVmLnN1YnN0cigwLDYpLnRvTG93ZXJDYXNlKCkhPSJodHRwczoiKXsNCihmdW5jdGlvbigpew0KdmFyIF80Yjk9ZG9qby5kb2MoKS5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTsNCl80Yjkuc3JjPSJqYXZhc2NyaXB0Oidkb2pvLmh0bWwuY3JlYXRlRXh0ZXJuYWxFbGVtZW50PWZ1bmN0aW9uKGRvYywgdGFnKXsgcmV0dXJuIGRvYy5jcmVhdGVFbGVtZW50KHRhZyk7IH0nIjsNCmRvam8uZG9jKCkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKVswXS5hcHBlbmRDaGlsZChfNGI5KTsNCn0pKCk7DQp9DQp9ZWxzZXsNCmRvam8uaHRtbC5jcmVhdGVFeHRlcm5hbEVsZW1lbnQ9ZnVuY3Rpb24oZG9jLHRhZyl7DQpyZXR1cm4gZG9jLmNyZWF0ZUVsZW1lbnQodGFnKTsNCn07DQp9DQpkb2pvLmh0bWwuX2NhbGxEZXByZWNhdGVkPWZ1bmN0aW9uKF80YmMsXzRiZCxhcmdzLF80YmYsXzRjMCl7DQpkb2pvLmRlcHJlY2F0ZWQoImRvam8uaHRtbC4iK180YmMsInJlcGxhY2VkIGJ5IGRvam8uaHRtbC4iK180YmQrIigiKyhfNGJmPyJub2RlLCB7IitfNGJmKyI6ICIrXzRiZisifSI6IiIpKyIpIisoXzRjMD8iLiIrXzRjMDoiIiksIjAuNSIpOw0KdmFyIF80YzE9W107DQppZihfNGJmKXsNCnZhciBfNGMyPXt9Ow0KXzRjMltfNGJmXT1hcmdzWzFdOw0KXzRjMS5wdXNoKGFyZ3NbMF0pOw0KXzRjMS5wdXNoKF80YzIpOw0KfWVsc2V7DQpfNGMxPWFyZ3M7DQp9DQp2YXIgcmV0PWRvam8uaHRtbFtfNGJkXS5hcHBseShkb2pvLmh0bWwsYXJncyk7DQppZihfNGMwKXsNCnJldHVybiByZXRbXzRjMF07DQp9ZWxzZXsNCnJldHVybiByZXQ7DQp9DQp9Ow0KZG9qby5odG1sLmdldFZpZXdwb3J0V2lkdGg9ZnVuY3Rpb24oKXsNCnJldHVybiBkb2pvLmh0bWwuX2NhbGxEZXByZWNhdGVkKCJnZXRWaWV3cG9ydFdpZHRoIiwiZ2V0Vmlld3BvcnQiLGFyZ3VtZW50cyxudWxsLCJ3aWR0aCIpOw0KfTsNCmRvam8uaHRtbC5nZXRWaWV3cG9ydEhlaWdodD1mdW5jdGlvbigpew0KcmV0dXJuIGRvam8uaHRtbC5fY2FsbERlcHJlY2F0ZWQoImdldFZpZXdwb3J0SGVpZ2h0IiwiZ2V0Vmlld3BvcnQiLGFyZ3VtZW50cyxudWxsLCJoZWlnaHQiKTsNCn07DQpkb2pvLmh0bWwuZ2V0Vmlld3BvcnRTaXplPWZ1bmN0aW9uKCl7DQpyZXR1cm4gZG9qby5odG1sLl9jYWxsRGVwcmVjYXRlZCgiZ2V0Vmlld3BvcnRTaXplIiwiZ2V0Vmlld3BvcnQiLGFyZ3VtZW50cyk7DQp9Ow0KZG9qby5odG1sLmdldFNjcm9sbFRvcD1mdW5jdGlvbigpew0KcmV0dXJuIGRvam8uaHRtbC5fY2FsbERlcHJlY2F0ZWQoImdldFNjcm9sbFRvcCIsImdldFNjcm9sbCIsYXJndW1lbnRzLG51bGwsInRvcCIpOw0KfTsNCmRvam8uaHRtbC5nZXRTY3JvbGxMZWZ0PWZ1bmN0aW9uKCl7DQpyZXR1cm4gZG9qby5odG1sLl9jYWxsRGVwcmVjYXRlZCgiZ2V0U2Nyb2xsTGVmdCIsImdldFNjcm9sbCIsYXJndW1lbnRzLG51bGwsImxlZnQiKTsNCn07DQpkb2pvLmh0bWwuZ2V0U2Nyb2xsT2Zmc2V0PWZ1bmN0aW9uKCl7DQpyZXR1cm4gZG9qby5odG1sLl9jYWxsRGVwcmVjYXRlZCgiZ2V0U2Nyb2xsT2Zmc2V0IiwiZ2V0U2Nyb2xsIixhcmd1bWVudHMsbnVsbCwib2Zmc2V0Iik7DQp9Ow0KZG9qby5wcm92aWRlKCJkb2pvLmh0bWwubGF5b3V0Iik7DQpkb2pvLmh0bWwuc3VtQW5jZXN0b3JQcm9wZXJ0aWVzPWZ1bmN0aW9uKG5vZGUscHJvcCl7DQpub2RlPWRvam8uYnlJZChub2RlKTsNCmlmKCFub2RlKXsNCnJldHVybiAwOw0KfQ0KdmFyIF80YzY9MDsNCndoaWxlKG5vZGUpew0KaWYoZG9qby5odG1sLmdldENvbXB1dGVkU3R5bGUobm9kZSwicG9zaXRpb24iKT09ImZpeGVkIil7DQpyZXR1cm4gMDsNCn0NCnZhciB2YWw9bm9kZVtwcm9wXTsNCmlmKHZhbCl7DQpfNGM2Kz12YWwtMDsNCmlmKG5vZGU9PWRvam8uYm9keSgpKXsNCmJyZWFrOw0KfQ0KfQ0Kbm9kZT1ub2RlLnBhcmVudE5vZGU7DQp9DQpyZXR1cm4gXzRjNjsNCn07DQpkb2pvLmh0bWwuc2V0U3R5bGVBdHRyaWJ1dGVzPWZ1bmN0aW9uKG5vZGUsXzRjOSl7DQpub2RlPWRvam8uYnlJZChub2RlKTsNCnZhciBfNGNhPV80YzkucmVwbGFjZSgvKDspP1xzKiQvLCIiKS5zcGxpdCgiOyIpOw0KZm9yKHZhciBpPTA7aTxfNGNhLmxlbmd0aDtpKyspew0KdmFyIF80Y2M9XzRjYVtpXS5zcGxpdCgiOiIpOw0KdmFyIG5hbWU9XzRjY1swXS5yZXBsYWNlKC9ccyokLywiIikucmVwbGFjZSgvXlxzKi8sIiIpLnRvTG93ZXJDYXNlKCk7DQp2YXIgXzRjZT1fNGNjWzFdLnJlcGxhY2UoL1xzKiQvLCIiKS5yZXBsYWNlKC9eXHMqLywiIik7DQpzd2l0Y2gobmFtZSl7DQpjYXNlICJvcGFjaXR5IjoNCmRvam8uaHRtbC5zZXRPcGFjaXR5KG5vZGUsXzRjZSk7DQpicmVhazsNCmNhc2UgImNvbnRlbnQtaGVpZ2h0IjoNCmRvam8uaHRtbC5zZXRDb250ZW50Qm94KG5vZGUse2hlaWdodDpfNGNlfSk7DQpicmVhazsNCmNhc2UgImNvbnRlbnQtd2lkdGgiOg0KZG9qby5odG1sLnNldENvbnRlbnRCb3gobm9kZSx7d2lkdGg6XzRjZX0pOw0KYnJlYWs7DQpjYXNlICJvdXRlci1oZWlnaHQiOg0KZG9qby5odG1sLnNldE1hcmdpbkJveChub2RlLHtoZWlnaHQ6XzRjZX0pOw0KYnJlYWs7DQpjYXNlICJvdXRlci13aWR0aCI6DQpkb2pvLmh0bWwuc2V0TWFyZ2luQm94KG5vZGUse3dpZHRoOl80Y2V9KTsNCmJyZWFrOw0KZGVmYXVsdDoNCm5vZGUuc3R5bGVbZG9qby5odG1sLnRvQ2FtZWxDYXNlKG5hbWUpXT1fNGNlOw0KfQ0KfQ0KfTsNCmRvam8uaHRtbC5ib3hTaXppbmc9e01BUkdJTl9CT1g6Im1hcmdpbi1ib3giLEJPUkRFUl9CT1g6ImJvcmRlci1ib3giLFBBRERJTkdfQk9YOiJwYWRkaW5nLWJveCIsQ09OVEVOVF9CT1g6ImNvbnRlbnQtYm94In07DQpkb2pvLmh0bWwuZ2V0QWJzb2x1dGVQb3NpdGlvbj1kb2pvLmh0bWwuYWJzPWZ1bmN0aW9uKG5vZGUsXzRkMCxfNGQxKXsNCm5vZGU9ZG9qby5ieUlkKG5vZGUsbm9kZS5vd25lckRvY3VtZW50KTsNCnZhciByZXQ9e3g6MCx5OjB9Ow0KdmFyIGJzPWRvam8uaHRtbC5ib3hTaXppbmc7DQppZighXzRkMSl7DQpfNGQxPWJzLkNPTlRFTlRfQk9YOw0KfQ0KdmFyIF80ZDQ9MjsNCnZhciBfNGQ1Ow0Kc3dpdGNoKF80ZDEpew0KY2FzZSBicy5NQVJHSU5fQk9YOg0KXzRkNT0zOw0KYnJlYWs7DQpjYXNlIGJzLkJPUkRFUl9CT1g6DQpfNGQ1PTI7DQpicmVhazsNCmNhc2UgYnMuUEFERElOR19CT1g6DQpkZWZhdWx0Og0KXzRkNT0xOw0KYnJlYWs7DQpjYXNlIGJzLkNPTlRFTlRfQk9YOg0KXzRkNT0wOw0KYnJlYWs7DQp9DQp2YXIgaD1kb2pvLnJlbmRlci5odG1sOw0KdmFyIGRiPWRvY3VtZW50WyJib2R5Il18fGRvY3VtZW50WyJkb2N1bWVudEVsZW1lbnQiXTsNCmlmKGguaWUpew0Kd2l0aChub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKXsNCnJldC54PWxlZnQtMjsNCnJldC55PXRvcC0yOw0KfQ0KfWVsc2V7DQppZihkb2N1bWVudC5nZXRCb3hPYmplY3RGb3Ipew0KXzRkND0xOw0KdHJ5ew0KdmFyIGJvPWRvY3VtZW50LmdldEJveE9iamVjdEZvcihub2RlKTsNCnJldC54PWJvLngtZG9qby5odG1sLnN1bUFuY2VzdG9yUHJvcGVydGllcyhub2RlLCJzY3JvbGxMZWZ0Iik7DQpyZXQueT1iby55LWRvam8uaHRtbC5zdW1BbmNlc3RvclByb3BlcnRpZXMobm9kZSwic2Nyb2xsVG9wIik7DQp9DQpjYXRjaChlKXsNCn0NCn1lbHNlew0KaWYobm9kZVsib2Zmc2V0UGFyZW50Il0pew0KdmFyIF80ZDk7DQppZigoaC5zYWZhcmkpJiYobm9kZS5zdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCJwb3NpdGlvbiIpPT0iYWJzb2x1dGUiKSYmKG5vZGUucGFyZW50Tm9kZT09ZGIpKXsNCl80ZDk9ZGI7DQp9ZWxzZXsNCl80ZDk9ZGIucGFyZW50Tm9kZTsNCn0NCmlmKG5vZGUucGFyZW50Tm9kZSE9ZGIpew0KdmFyIG5kPW5vZGU7DQppZihkb2pvLnJlbmRlci5odG1sLm9wZXJhKXsNCm5kPWRiOw0KfQ0KcmV0LngtPWRvam8uaHRtbC5zdW1BbmNlc3RvclByb3BlcnRpZXMobmQsInNjcm9sbExlZnQiKTsNCnJldC55LT1kb2pvLmh0bWwuc3VtQW5jZXN0b3JQcm9wZXJ0aWVzKG5kLCJzY3JvbGxUb3AiKTsNCn0NCnZhciBfNGRiPW5vZGU7DQpkb3sNCnZhciBuPV80ZGJbIm9mZnNldExlZnQiXTsNCmlmKCFoLm9wZXJhfHxuPjApew0KcmV0LngrPWlzTmFOKG4pPzA6bjsNCn0NCnZhciBtPV80ZGJbIm9mZnNldFRvcCJdOw0KcmV0LnkrPWlzTmFOKG0pPzA6bTsNCl80ZGI9XzRkYi5vZmZzZXRQYXJlbnQ7DQp9d2hpbGUoKF80ZGIhPV80ZDkpJiYoXzRkYiE9bnVsbCkpOw0KfWVsc2V7DQppZihub2RlWyJ4Il0mJm5vZGVbInkiXSl7DQpyZXQueCs9aXNOYU4obm9kZS54KT8wOm5vZGUueDsNCnJldC55Kz1pc05hTihub2RlLnkpPzA6bm9kZS55Ow0KfQ0KfQ0KfQ0KfQ0KaWYoXzRkMCl7DQp2YXIgXzRkZT1kb2pvLmh0bWwuZ2V0U2Nyb2xsKCk7DQpyZXQueSs9XzRkZS50b3A7DQpyZXQueCs9XzRkZS5sZWZ0Ow0KfQ0KdmFyIF80ZGY9W2Rvam8uaHRtbC5nZXRQYWRkaW5nRXh0ZW50LGRvam8uaHRtbC5nZXRCb3JkZXJFeHRlbnQsZG9qby5odG1sLmdldE1hcmdpbkV4dGVudF07DQppZihfNGQ0Pl80ZDUpew0KZm9yKHZhciBpPV80ZDU7aTxfNGQ0OysraSl7DQpyZXQueSs9XzRkZltpXShub2RlLCJ0b3AiKTsNCnJldC54Kz1fNGRmW2ldKG5vZGUsImxlZnQiKTsNCn0NCn1lbHNlew0KaWYoXzRkNDxfNGQ1KXsNCmZvcih2YXIgaT1fNGQ1O2k+XzRkNDstLWkpew0KcmV0LnktPV80ZGZbaS0xXShub2RlLCJ0b3AiKTsNCnJldC54LT1fNGRmW2ktMV0obm9kZSwibGVmdCIpOw0KfQ0KfQ0KfQ0KcmV0LnRvcD1yZXQueTsNCnJldC5sZWZ0PXJldC54Ow0KcmV0dXJuIHJldDsNCn07DQpkb2pvLmh0bWwuaXNQb3NpdGlvbkFic29sdXRlPWZ1bmN0aW9uKG5vZGUpew0KcmV0dXJuIChkb2pvLmh0bWwuZ2V0Q29tcHV0ZWRTdHlsZShub2RlLCJwb3NpdGlvbiIpPT0iYWJzb2x1dGUiKTsNCn07DQpkb2pvLmh0bWwuX3N1bVBpeGVsVmFsdWVzPWZ1bmN0aW9uKG5vZGUsXzRlMyxfNGU0KXsNCnZhciBfNGU1PTA7DQpmb3IodmFyIHg9MDt4PF80ZTMubGVuZ3RoO3grKyl7DQpfNGU1Kz1kb2pvLmh0bWwuZ2V0UGl4ZWxWYWx1ZShub2RlLF80ZTNbeF0sXzRlNCk7DQp9DQpyZXR1cm4gXzRlNTsNCn07DQpkb2pvLmh0bWwuZ2V0TWFyZ2luPWZ1bmN0aW9uKG5vZGUpew0KcmV0dXJuIHt3aWR0aDpkb2pvLmh0bWwuX3N1bVBpeGVsVmFsdWVzKG5vZGUsWyJtYXJnaW4tbGVmdCIsIm1hcmdpbi1yaWdodCJdLChkb2pvLmh0bWwuZ2V0Q29tcHV0ZWRTdHlsZShub2RlLCJwb3NpdGlvbiIpPT0iYWJzb2x1dGUiKSksaGVpZ2h0OmRvam8uaHRtbC5fc3VtUGl4ZWxWYWx1ZXMobm9kZSxbIm1hcmdpbi10b3AiLCJtYXJnaW4tYm90dG9tIl0sKGRvam8uaHRtbC5nZXRDb21wdXRlZFN0eWxlKG5vZGUsInBvc2l0aW9uIik9PSJhYnNvbHV0ZSIpKX07DQp9Ow0KZG9qby5odG1sLmdldEJvcmRlcj1mdW5jdGlvbihub2RlKXsNCnJldHVybiB7d2lkdGg6ZG9qby5odG1sLmdldEJvcmRlckV4dGVudChub2RlLCJsZWZ0IikrZG9qby5odG1sLmdldEJvcmRlckV4dGVudChub2RlLCJyaWdodCIpLGhlaWdodDpkb2pvLmh0bWwuZ2V0Qm9yZGVyRXh0ZW50KG5vZGUsInRvcCIpK2Rvam8uaHRtbC5nZXRCb3JkZXJFeHRlbnQobm9kZSwiYm90dG9tIil9Ow0KfTsNCmRvam8uaHRtbC5nZXRCb3JkZXJFeHRlbnQ9ZnVuY3Rpb24obm9kZSxzaWRlKXsNCnJldHVybiAoZG9qby5odG1sLmdldFN0eWxlKG5vZGUsImJvcmRlci0iK3NpZGUrIi1zdHlsZSIpPT0ibm9uZSI/MDpkb2pvLmh0bWwuZ2V0UGl4ZWxWYWx1ZShub2RlLCJib3JkZXItIitzaWRlKyItd2lkdGgiKSk7DQp9Ow0KZG9qby5odG1sLmdldE1hcmdpbkV4dGVudD1mdW5jdGlvbihub2RlLHNpZGUpew0KcmV0dXJuIGRvam8uaHRtbC5fc3VtUGl4ZWxWYWx1ZXMobm9kZSxbIm1hcmdpbi0iK3NpZGVdLGRvam8uaHRtbC5pc1Bvc2l0aW9uQWJzb2x1dGUobm9kZSkpOw0KfTsNCmRvam8uaHRtbC5nZXRQYWRkaW5nRXh0ZW50PWZ1bmN0aW9uKG5vZGUsc2lkZSl7DQpyZXR1cm4gZG9qby5odG1sLl9zdW1QaXhlbFZhbHVlcyhub2RlLFsicGFkZGluZy0iK3NpZGVdLHRydWUpOw0KfTsNCmRvam8uaHRtbC5nZXRQYWRkaW5nPWZ1bmN0aW9uKG5vZGUpew0KcmV0dXJuIHt3aWR0aDpkb2pvLmh0bWwuX3N1bVBpeGVsVmFsdWVzKG5vZGUsWyJwYWRkaW5nLWxlZnQiLCJwYWRkaW5nLXJpZ2h0Il0sdHJ1ZSksaGVpZ2h0OmRvam8uaHRtbC5fc3VtUGl4ZWxWYWx1ZXMobm9kZSxbInBhZGRpbmctdG9wIiwicGFkZGluZy1ib3R0b20iXSx0cnVlKX07DQp9Ow0KZG9qby5odG1sLmdldFBhZEJvcmRlcj1mdW5jdGlvbihub2RlKXsNCnZhciBwYWQ9ZG9qby5odG1sLmdldFBhZGRpbmcobm9kZSk7DQp2YXIgXzRmMj1kb2pvLmh0bWwuZ2V0Qm9yZGVyKG5vZGUpOw0KcmV0dXJuIHt3aWR0aDpwYWQud2lkdGgrXzRmMi53aWR0aCxoZWlnaHQ6cGFkLmhlaWdodCtfNGYyLmhlaWdodH07DQp9Ow0KZG9qby5odG1sLmdldEJveFNpemluZz1mdW5jdGlvbihub2RlKXsNCnZhciBoPWRvam8ucmVuZGVyLmh0bWw7DQp2YXIgYnM9ZG9qby5odG1sLmJveFNpemluZzsNCmlmKChoLmllKXx8KGgub3BlcmEpKXsNCnZhciBjbT1kb2N1bWVudFsiY29tcGF0TW9kZSJdOw0KaWYoKGNtPT0iQmFja0NvbXBhdCIpfHwoY209PSJRdWlya3NNb2RlIikpew0KcmV0dXJuIGJzLkJPUkRFUl9CT1g7DQp9ZWxzZXsNCnJldHVybiBicy5DT05URU5UX0JPWDsNCn0NCn1lbHNlew0KaWYoYXJndW1lbnRzLmxlbmd0aD09MCl7DQpub2RlPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsNCn0NCnZhciBfNGY3PWRvam8uaHRtbC5nZXRTdHlsZShub2RlLCItbW96LWJveC1zaXppbmciKTsNCmlmKCFfNGY3KXsNCl80Zjc9ZG9qby5odG1sLmdldFN0eWxlKG5vZGUsImJveC1zaXppbmciKTsNCn0NCnJldHVybiAoXzRmNz9fNGY3OmJzLkNPTlRFTlRfQk9YKTsNCn0NCn07DQpkb2pvLmh0bWwuaXNCb3JkZXJCb3g9ZnVuY3Rpb24obm9kZSl7DQpyZXR1cm4gKGRvam8uaHRtbC5nZXRCb3hTaXppbmcobm9kZSk9PWRvam8uaHRtbC5ib3hTaXppbmcuQk9SREVSX0JPWCk7DQp9Ow0KZG9qby5odG1sLmdldEJvcmRlckJveD1mdW5jdGlvbihub2RlKXsNCm5vZGU9ZG9qby5ieUlkKG5vZGUpOw0KcmV0dXJuIHt3aWR0aDpub2RlLm9mZnNldFdpZHRoLGhlaWdodDpub2RlLm9mZnNldEhlaWdodH07DQp9Ow0KZG9qby5odG1sLmdldFBhZGRpbmdCb3g9ZnVuY3Rpb24obm9kZSl7DQp2YXIgYm94PWRvam8uaHRtbC5nZXRCb3JkZXJCb3gobm9kZSk7DQp2YXIgXzRmYz1kb2pvLmh0bWwuZ2V0Qm9yZGVyKG5vZGUpOw0KcmV0dXJuIHt3aWR0aDpib3gud2lkdGgtXzRmYy53aWR0aCxoZWlnaHQ6Ym94LmhlaWdodC1fNGZjLmhlaWdodH07DQp9Ow0KZG9qby5odG1sLmdldENvbnRlbnRCb3g9ZnVuY3Rpb24obm9kZSl7DQpub2RlPWRvam8uYnlJZChub2RlKTsNCnZhciBfNGZlPWRvam8uaHRtbC5nZXRQYWRCb3JkZXIobm9kZSk7DQpyZXR1cm4ge3dpZHRoOm5vZGUub2Zmc2V0V2lkdGgtXzRmZS53aWR0aCxoZWlnaHQ6bm9kZS5vZmZzZXRIZWlnaHQtXzRmZS5oZWlnaHR9Ow0KfTsNCmRvam8uaHRtbC5zZXRDb250ZW50Qm94PWZ1bmN0aW9uKG5vZGUsYXJncyl7DQpub2RlPWRvam8uYnlJZChub2RlKTsNCnZhciBfNTAxPTA7DQp2YXIgXzUwMj0wOw0KdmFyIGlzYmI9ZG9qby5odG1sLmlzQm9yZGVyQm94KG5vZGUpOw0KdmFyIF81MDQ9KGlzYmI/ZG9qby5odG1sLmdldFBhZEJvcmRlcihub2RlKTp7d2lkdGg6MCxoZWlnaHQ6MH0pOw0KdmFyIHJldD17fTsNCmlmKHR5cGVvZiBhcmdzLndpZHRoIT0idW5kZWZpbmVkIil7DQpfNTAxPWFyZ3Mud2lkdGgrXzUwNC53aWR0aDsNCnJldC53aWR0aD1kb2pvLmh0bWwuc2V0UG9zaXRpdmVQaXhlbFZhbHVlKG5vZGUsIndpZHRoIixfNTAxKTsNCn0NCmlmKHR5cGVvZiBhcmdzLmhlaWdodCE9InVuZGVmaW5lZCIpew0KXzUwMj1hcmdzLmhlaWdodCtfNTA0LmhlaWdodDsNCnJldC5oZWlnaHQ9ZG9qby5odG1sLnNldFBvc2l0aXZlUGl4ZWxWYWx1ZShub2RlLCJoZWlnaHQiLF81MDIpOw0KfQ0KcmV0dXJuIHJldDsNCn07DQpkb2pvLmh0bWwuZ2V0TWFyZ2luQm94PWZ1bmN0aW9uKG5vZGUpew0KdmFyIF81MDc9ZG9qby5odG1sLmdldEJvcmRlckJveChub2RlKTsNCnZhciBfNTA4PWRvam8uaHRtbC5nZXRNYXJnaW4obm9kZSk7DQpyZXR1cm4ge3dpZHRoOl81MDcud2lkdGgrXzUwOC53aWR0aCxoZWlnaHQ6XzUwNy5oZWlnaHQrXzUwOC5oZWlnaHR9Ow0KfTsNCmRvam8uaHRtbC5zZXRNYXJnaW5Cb3g9ZnVuY3Rpb24obm9kZSxhcmdzKXsNCm5vZGU9ZG9qby5ieUlkKG5vZGUpOw0KdmFyIF81MGI9MDsNCnZhciBfNTBjPTA7DQp2YXIgaXNiYj1kb2pvLmh0bWwuaXNCb3JkZXJCb3gobm9kZSk7DQp2YXIgXzUwZT0oIWlzYmI/ZG9qby5odG1sLmdldFBhZEJvcmRlcihub2RlKTp7d2lkdGg6MCxoZWlnaHQ6MH0pOw0KdmFyIF81MGY9ZG9qby5odG1sLmdldE1hcmdpbihub2RlKTsNCnZhciByZXQ9e307DQppZih0eXBlb2YgYXJncy53aWR0aCE9InVuZGVmaW5lZCIpew0KXzUwYj1hcmdzLndpZHRoLV81MGUud2lkdGg7DQpfNTBiLT1fNTBmLndpZHRoOw0KcmV0LndpZHRoPWRvam8uaHRtbC5zZXRQb3NpdGl2ZVBpeGVsVmFsdWUobm9kZSwid2lkdGgiLF81MGIpOw0KfQ0KaWYodHlwZW9mIGFyZ3MuaGVpZ2h0IT0idW5kZWZpbmVkIil7DQpfNTBjPWFyZ3MuaGVpZ2h0LV81MGUuaGVpZ2h0Ow0KXzUwYy09XzUwZi5oZWlnaHQ7DQpyZXQuaGVpZ2h0PWRvam8uaHRtbC5zZXRQb3NpdGl2ZVBpeGVsVmFsdWUobm9kZSwiaGVpZ2h0IixfNTBjKTsNCn0NCnJldHVybiByZXQ7DQp9Ow0KZG9qby5odG1sLmdldEVsZW1lbnRCb3g9ZnVuY3Rpb24obm9kZSx0eXBlKXsNCnZhciBicz1kb2pvLmh0bWwuYm94U2l6aW5nOw0Kc3dpdGNoKHR5cGUpew0KY2FzZSBicy5NQVJHSU5fQk9YOg0KcmV0dXJuIGRvam8uaHRtbC5nZXRNYXJnaW5Cb3gobm9kZSk7DQpjYXNlIGJzLkJPUkRFUl9CT1g6DQpyZXR1cm4gZG9qby5odG1sLmdldEJvcmRlckJveChub2RlKTsNCmNhc2UgYnMuUEFERElOR19CT1g6DQpyZXR1cm4gZG9qby5odG1sLmdldFBhZGRpbmdCb3gobm9kZSk7DQpjYXNlIGJzLkNPTlRFTlRfQk9YOg0KZGVmYXVsdDoNCnJldHVybiBkb2pvLmh0bWwuZ2V0Q29udGVudEJveChub2RlKTsNCn0NCn07DQpkb2pvLmh0bWwudG9Db29yZGluYXRlT2JqZWN0PWRvam8uaHRtbC50b0Nvb3JkaW5hdGVBcnJheT1mdW5jdGlvbihfNTE0LF81MTUsXzUxNil7DQppZihfNTE0IGluc3RhbmNlb2YgQXJyYXl8fHR5cGVvZiBfNTE0PT0iYXJyYXkiKXsNCmRvam8uZGVwcmVjYXRlZCgiZG9qby5odG1sLnRvQ29vcmRpbmF0ZUFycmF5IiwidXNlIGRvam8uaHRtbC50b0Nvb3JkaW5hdGVPYmplY3Qoe2xlZnQ6ICwgdG9wOiAsIHdpZHRoOiAsIGhlaWdodDogfSkgaW5zdGVhZCIsIjAuNSIpOw0Kd2hpbGUoXzUxNC5sZW5ndGg8NCl7DQpfNTE0LnB1c2goMCk7DQp9DQp3aGlsZShfNTE0Lmxlbmd0aD40KXsNCl81MTQucG9wKCk7DQp9DQp2YXIgcmV0PXtsZWZ0Ol81MTRbMF0sdG9wOl81MTRbMV0sd2lkdGg6XzUxNFsyXSxoZWlnaHQ6XzUxNFszXX07DQp9ZWxzZXsNCmlmKCFfNTE0Lm5vZGVUeXBlJiYhKF81MTQgaW5zdGFuY2VvZiBTdHJpbmd8fHR5cGVvZiBfNTE0PT0ic3RyaW5nIikmJigid2lkdGgiIGluIF81MTR8fCJoZWlnaHQiIGluIF81MTR8fCJsZWZ0IiBpbiBfNTE0fHwieCIgaW4gXzUxNHx8InRvcCIgaW4gXzUxNHx8InkiIGluIF81MTQpKXsNCnZhciByZXQ9e2xlZnQ6XzUxNC5sZWZ0fHxfNTE0Lnh8fDAsdG9wOl81MTQudG9wfHxfNTE0Lnl8fDAsd2lkdGg6XzUxNC53aWR0aHx8MCxoZWlnaHQ6XzUxNC5oZWlnaHR8fDB9Ow0KfWVsc2V7DQp2YXIgbm9kZT1kb2pvLmJ5SWQoXzUxNCk7DQp2YXIgcG9zPWRvam8uaHRtbC5hYnMobm9kZSxfNTE1LF81MTYpOw0KdmFyIF81MWE9ZG9qby5odG1sLmdldE1hcmdpbkJveChub2RlKTsNCnZhciByZXQ9e2xlZnQ6cG9zLmxlZnQsdG9wOnBvcy50b3Asd2lkdGg6XzUxYS53aWR0aCxoZWlnaHQ6XzUxYS5oZWlnaHR9Ow0KfQ0KfQ0KcmV0Lng9cmV0LmxlZnQ7DQpyZXQueT1yZXQudG9wOw0KcmV0dXJuIHJldDsNCn07DQpkb2pvLmh0bWwuc2V0TWFyZ2luQm94V2lkdGg9ZG9qby5odG1sLnNldE91dGVyV2lkdGg9ZnVuY3Rpb24obm9kZSxfNTFjKXsNCnJldHVybiBkb2pvLmh0bWwuX2NhbGxEZXByZWNhdGVkKCJzZXRNYXJnaW5Cb3hXaWR0aCIsInNldE1hcmdpbkJveCIsYXJndW1lbnRzLCJ3aWR0aCIpOw0KfTsNCmRvam8uaHRtbC5zZXRNYXJnaW5Cb3hIZWlnaHQ9ZG9qby5odG1sLnNldE91dGVySGVpZ2h0PWZ1bmN0aW9uKCl7DQpyZXR1cm4gZG9qby5odG1sLl9jYWxsRGVwcmVjYXRlZCgic2V0TWFyZ2luQm94SGVpZ2h0Iiwic2V0TWFyZ2luQm94Iixhcmd1bWVudHMsImhlaWdodCIpOw0KfTsNCmRvam8uaHRtbC5nZXRNYXJnaW5Cb3hXaWR0aD1kb2pvLmh0bWwuZ2V0T3V0ZXJXaWR0aD1mdW5jdGlvbigpew0KcmV0dXJuIGRvam8uaHRtbC5fY2FsbERlcHJlY2F0ZWQoImdldE1hcmdpbkJveFdpZHRoIiwiZ2V0TWFyZ2luQm94Iixhcmd1bWVudHMsbnVsbCwid2lkdGgiKTsNCn07DQpkb2pvLmh0bWwuZ2V0TWFyZ2luQm94SGVpZ2h0PWRvam8uaHRtbC5nZXRPdXRlckhlaWdodD1mdW5jdGlvbigpew0KcmV0dXJuIGRvam8uaHRtbC5fY2FsbERlcHJlY2F0ZWQoImdldE1hcmdpbkJveEhlaWdodCIsImdldE1hcmdpbkJveCIsYXJndW1lbnRzLG51bGwsImhlaWdodCIpOw0KfTsNCmRvam8uaHRtbC5nZXRUb3RhbE9mZnNldD1mdW5jdGlvbihub2RlLHR5cGUsXzUxZil7DQpyZXR1cm4gZG9qby5odG1sLl9jYWxsRGVwcmVjYXRlZCgiZ2V0VG90YWxPZmZzZXQiLCJnZXRBYnNvbHV0ZVBvc2l0aW9uIixhcmd1bWVudHMsbnVsbCx0eXBlKTsNCn07DQpkb2pvLmh0bWwuZ2V0QWJzb2x1dGVYPWZ1bmN0aW9uKG5vZGUsXzUyMSl7DQpyZXR1cm4gZG9qby5odG1sLl9jYWxsRGVwcmVjYXRlZCgiZ2V0QWJzb2x1dGVYIiwiZ2V0QWJzb2x1dGVQb3NpdGlvbiIsYXJndW1lbnRzLG51bGwsIngiKTsNCn07DQpkb2pvLmh0bWwuZ2V0QWJzb2x1dGVZPWZ1bmN0aW9uKG5vZGUsXzUyMyl7DQpyZXR1cm4gZG9qby5odG1sLl9jYWxsRGVwcmVjYXRlZCgiZ2V0QWJzb2x1dGVZIiwiZ2V0QWJzb2x1dGVQb3NpdGlvbiIsYXJndW1lbnRzLG51bGwsInkiKTsNCn07DQpkb2pvLmh0bWwudG90YWxPZmZzZXRMZWZ0PWZ1bmN0aW9uKG5vZGUsXzUyNSl7DQpyZXR1cm4gZG9qby5odG1sLl9jYWxsRGVwcmVjYXRlZCgidG90YWxPZmZzZXRMZWZ0IiwiZ2V0QWJzb2x1dGVQb3NpdGlvbiIsYXJndW1lbnRzLG51bGwsImxlZnQiKTsNCn07DQpkb2pvLmh0bWwudG90YWxPZmZzZXRUb3A9ZnVuY3Rpb24obm9kZSxfNTI3KXsNCnJldHVybiBkb2pvLmh0bWwuX2NhbGxEZXByZWNhdGVkKCJ0b3RhbE9mZnNldFRvcCIsImdldEFic29sdXRlUG9zaXRpb24iLGFyZ3VtZW50cyxudWxsLCJ0b3AiKTsNCn07DQpkb2pvLmh0bWwuZ2V0TWFyZ2luV2lkdGg9ZnVuY3Rpb24obm9kZSl7DQpyZXR1cm4gZG9qby5odG1sLl9jYWxsRGVwcmVjYXRlZCgiZ2V0TWFyZ2luV2lkdGgiLCJnZXRNYXJnaW4iLGFyZ3VtZW50cyxudWxsLCJ3aWR0aCIpOw0KfTsNCmRvam8uaHRtbC5nZXRNYXJnaW5IZWlnaHQ9ZnVuY3Rpb24obm9kZSl7DQpyZXR1cm4gZG9qby5odG1sLl9jYWxsRGVwcmVjYXRlZCgiZ2V0TWFyZ2luSGVpZ2h0IiwiZ2V0TWFyZ2luIixhcmd1bWVudHMsbnVsbCwiaGVpZ2h0Iik7DQp9Ow0KZG9qby5odG1sLmdldEJvcmRlcldpZHRoPWZ1bmN0aW9uKG5vZGUpew0KcmV0dXJuIGRvam8uaHRtbC5fY2FsbERlcHJlY2F0ZWQoImdldEJvcmRlcldpZHRoIiwiZ2V0Qm9yZGVyIixhcmd1bWVudHMsbnVsbCwid2lkdGgiKTsNCn07DQpkb2pvLmh0bWwuZ2V0Qm9yZGVySGVpZ2h0PWZ1bmN0aW9uKG5vZGUpew0KcmV0dXJuIGRvam8uaHRtbC5fY2FsbERlcHJlY2F0ZWQoImdldEJvcmRlckhlaWdodCIsImdldEJvcmRlciIsYXJndW1lbnRzLG51bGwsImhlaWdodCIpOw0KfTsNCmRvam8uaHRtbC5nZXRQYWRkaW5nV2lkdGg9ZnVuY3Rpb24obm9kZSl7DQpyZXR1cm4gZG9qby5odG1sLl9jYWxsRGVwcmVjYXRlZCgiZ2V0UGFkZGluZ1dpZHRoIiwiZ2V0UGFkZGluZyIsYXJndW1lbnRzLG51bGwsIndpZHRoIik7DQp9Ow0KZG9qby5odG1sLmdldFBhZGRpbmdIZWlnaHQ9ZnVuY3Rpb24obm9kZSl7DQpyZXR1cm4gZG9qby5odG1sLl9jYWxsRGVwcmVjYXRlZCgiZ2V0UGFkZGluZ0hlaWdodCIsImdldFBhZGRpbmciLGFyZ3VtZW50cyxudWxsLCJoZWlnaHQiKTsNCn07DQpkb2pvLmh0bWwuZ2V0UGFkQm9yZGVyV2lkdGg9ZnVuY3Rpb24obm9kZSl7DQpyZXR1cm4gZG9qby5odG1sLl9jYWxsRGVwcmVjYXRlZCgiZ2V0UGFkQm9yZGVyV2lkdGgiLCJnZXRQYWRCb3JkZXIiLGFyZ3VtZW50cyxudWxsLCJ3aWR0aCIpOw0KfTsNCmRvam8uaHRtbC5nZXRQYWRCb3JkZXJIZWlnaHQ9ZnVuY3Rpb24obm9kZSl7DQpyZXR1cm4gZG9qby5odG1sLl9jYWxsRGVwcmVjYXRlZCgiZ2V0UGFkQm9yZGVySGVpZ2h0IiwiZ2V0UGFkQm9yZGVyIixhcmd1bWVudHMsbnVsbCwiaGVpZ2h0Iik7DQp9Ow0KZG9qby5odG1sLmdldEJvcmRlckJveFdpZHRoPWRvam8uaHRtbC5nZXRJbm5lcldpZHRoPWZ1bmN0aW9uKCl7DQpyZXR1cm4gZG9qby5odG1sLl9jYWxsRGVwcmVjYXRlZCgiZ2V0Qm9yZGVyQm94V2lkdGgiLCJnZXRCb3JkZXJCb3giLGFyZ3VtZW50cyxudWxsLCJ3aWR0aCIpOw0KfTsNCmRvam8uaHRtbC5nZXRCb3JkZXJCb3hIZWlnaHQ9ZG9qby5odG1sLmdldElubmVySGVpZ2h0PWZ1bmN0aW9uKCl7DQpyZXR1cm4gZG9qby5odG1sLl9jYWxsRGVwcmVjYXRlZCgiZ2V0Qm9yZGVyQm94SGVpZ2h0IiwiZ2V0Qm9yZGVyQm94Iixhcmd1bWVudHMsbnVsbCwiaGVpZ2h0Iik7DQp9Ow0KZG9qby5odG1sLmdldENvbnRlbnRCb3hXaWR0aD1kb2pvLmh0bWwuZ2V0Q29udGVudFdpZHRoPWZ1bmN0aW9uKCl7DQpyZXR1cm4gZG9qby5odG1sLl9jYWxsRGVwcmVjYXRlZCgiZ2V0Q29udGVudEJveFdpZHRoIiwiZ2V0Q29udGVudEJveCIsYXJndW1lbnRzLG51bGwsIndpZHRoIik7DQp9Ow0KZG9qby5odG1sLmdldENvbnRlbnRCb3hIZWlnaHQ9ZG9qby5odG1sLmdldENvbnRlbnRIZWlnaHQ9ZnVuY3Rpb24oKXsNCnJldHVybiBkb2pvLmh0bWwuX2NhbGxEZXByZWNhdGVkKCJnZXRDb250ZW50Qm94SGVpZ2h0IiwiZ2V0Q29udGVudEJveCIsYXJndW1lbnRzLG51bGwsImhlaWdodCIpOw0KfTsNCmRvam8uaHRtbC5zZXRDb250ZW50Qm94V2lkdGg9ZG9qby5odG1sLnNldENvbnRlbnRXaWR0aD1mdW5jdGlvbihub2RlLF81MzEpew0KcmV0dXJuIGRvam8uaHRtbC5fY2FsbERlcHJlY2F0ZWQoInNldENvbnRlbnRCb3hXaWR0aCIsInNldENvbnRlbnRCb3giLGFyZ3VtZW50cywid2lkdGgiKTsNCn07DQpkb2pvLmh0bWwuc2V0Q29udGVudEJveEhlaWdodD1kb2pvLmh0bWwuc2V0Q29udGVudEhlaWdodD1mdW5jdGlvbihub2RlLF81MzMpew0KcmV0dXJuIGRvam8uaHRtbC5fY2FsbERlcHJlY2F0ZWQoInNldENvbnRlbnRCb3hIZWlnaHQiLCJzZXRDb250ZW50Qm94Iixhcmd1bWVudHMsImhlaWdodCIpOw0KfTsNCmRvam8ucHJvdmlkZSgiZG9qby5sZnguaHRtbCIpOw0KZG9qby5sZnguaHRtbC5fYnlJZD1mdW5jdGlvbihfNTM0KXsNCmlmKCFfNTM0KXsNCnJldHVybiBbXTsNCn0NCmlmKGRvam8ubGFuZy5pc0FycmF5TGlrZShfNTM0KSl7DQppZighXzUzNC5hbHJlYWR5Q2hlY2tlZCl7DQp2YXIgbj1bXTsNCmRvam8ubGFuZy5mb3JFYWNoKF81MzQsZnVuY3Rpb24obm9kZSl7DQpuLnB1c2goZG9qby5ieUlkKG5vZGUpKTsNCn0pOw0Kbi5hbHJlYWR5Q2hlY2tlZD10cnVlOw0KcmV0dXJuIG47DQp9ZWxzZXsNCnJldHVybiBfNTM0Ow0KfQ0KfWVsc2V7DQp2YXIgbj1bXTsNCm4ucHVzaChkb2pvLmJ5SWQoXzUzNCkpOw0Kbi5hbHJlYWR5Q2hlY2tlZD10cnVlOw0KcmV0dXJuIG47DQp9DQp9Ow0KZG9qby5sZnguaHRtbC5wcm9wZXJ0eUFuaW1hdGlvbj1mdW5jdGlvbihfNTM3LF81MzgsXzUzOSxfNTNhLF81M2Ipew0KXzUzNz1kb2pvLmxmeC5odG1sLl9ieUlkKF81MzcpOw0KdmFyIF81M2M9eyJwcm9wZXJ0eU1hcCI6XzUzOCwibm9kZXMiOl81MzcsImR1cmF0aW9uIjpfNTM5LCJlYXNpbmciOl81M2F8fGRvam8ubGZ4LmVhc2VEZWZhdWx0fTsNCnZhciBfNTNkPWZ1bmN0aW9uKGFyZ3Mpew0KaWYoYXJncy5ub2Rlcy5sZW5ndGg9PTEpew0KdmFyIHBtPWFyZ3MucHJvcGVydHlNYXA7DQppZighZG9qby5sYW5nLmlzQXJyYXkoYXJncy5wcm9wZXJ0eU1hcCkpew0KdmFyIHBhcnI9W107DQpmb3IodmFyIF81NDEgaW4gcG0pew0KcG1bXzU0MV0ucHJvcGVydHk9XzU0MTsNCnBhcnIucHVzaChwbVtfNTQxXSk7DQp9DQpwbT1hcmdzLnByb3BlcnR5TWFwPXBhcnI7DQp9DQpkb2pvLmxhbmcuZm9yRWFjaChwbSxmdW5jdGlvbihwcm9wKXsNCmlmKGRqX3VuZGVmKCJzdGFydCIscHJvcCkpew0KaWYocHJvcC5wcm9wZXJ0eSE9Im9wYWNpdHkiKXsNCnByb3Auc3RhcnQ9cGFyc2VJbnQoZG9qby5odG1sLmdldENvbXB1dGVkU3R5bGUoYXJncy5ub2Rlc1swXSxwcm9wLnByb3BlcnR5KSk7DQp9ZWxzZXsNCnByb3Auc3RhcnQ9ZG9qby5odG1sLmdldE9wYWNpdHkoYXJncy5ub2Rlc1swXSk7DQp9DQp9DQp9KTsNCn0NCn07DQp2YXIgXzU0Mz1mdW5jdGlvbihfNTQ0KXsNCnZhciBfNTQ1PVtdOw0KZG9qby5sYW5nLmZvckVhY2goXzU0NCxmdW5jdGlvbihjKXsNCl81NDUucHVzaChNYXRoLnJvdW5kKGMpKTsNCn0pOw0KcmV0dXJuIF81NDU7DQp9Ow0KdmFyIF81NDc9ZnVuY3Rpb24obixfNTQ5KXsNCm49ZG9qby5ieUlkKG4pOw0KaWYoIW58fCFuLnN0eWxlKXsNCnJldHVybjsNCn0NCmZvcih2YXIgcyBpbiBfNTQ5KXsNCmlmKHM9PSJvcGFjaXR5Iil7DQpkb2pvLmh0bWwuc2V0T3BhY2l0eShuLF81NDlbc10pOw0KfWVsc2V7DQpuLnN0eWxlW3NdPV81NDlbc107DQp9DQp9DQp9Ow0KdmFyIF81NGI9ZnVuY3Rpb24oXzU0Yyl7DQp0aGlzLl9wcm9wZXJ0aWVzPV81NGM7DQp0aGlzLmRpZmZzPW5ldyBBcnJheShfNTRjLmxlbmd0aCk7DQpkb2pvLmxhbmcuZm9yRWFjaChfNTRjLGZ1bmN0aW9uKHByb3AsaSl7DQppZihkb2pvLmxhbmcuaXNGdW5jdGlvbihwcm9wLnN0YXJ0KSl7DQpwcm9wLnN0YXJ0PXByb3Auc3RhcnQocHJvcCxpKTsNCn0NCmlmKGRvam8ubGFuZy5pc0Z1bmN0aW9uKHByb3AuZW5kKSl7DQpwcm9wLmVuZD1wcm9wLmVuZChwcm9wLGkpOw0KfQ0KaWYoZG9qby5sYW5nLmlzQXJyYXkocHJvcC5zdGFydCkpew0KdGhpcy5kaWZmc1tpXT1udWxsOw0KfWVsc2V7DQppZihwcm9wLnN0YXJ0IGluc3RhbmNlb2YgZG9qby5nZnguY29sb3IuQ29sb3Ipew0KcHJvcC5zdGFydFJnYj1wcm9wLnN0YXJ0LnRvUmdiKCk7DQpwcm9wLmVuZFJnYj1wcm9wLmVuZC50b1JnYigpOw0KfWVsc2V7DQp0aGlzLmRpZmZzW2ldPXByb3AuZW5kLXByb3Auc3RhcnQ7DQp9DQp9DQp9LHRoaXMpOw0KdGhpcy5nZXRWYWx1ZT1mdW5jdGlvbihuKXsNCnZhciByZXQ9e307DQpkb2pvLmxhbmcuZm9yRWFjaCh0aGlzLl9wcm9wZXJ0aWVzLGZ1bmN0aW9uKHByb3AsaSl7DQp2YXIgXzU1Mz1udWxsOw0KaWYoZG9qby5sYW5nLmlzQXJyYXkocHJvcC5zdGFydCkpew0KfWVsc2V7DQppZihwcm9wLnN0YXJ0IGluc3RhbmNlb2YgZG9qby5nZnguY29sb3IuQ29sb3Ipew0KXzU1Mz0ocHJvcC51bml0c3x8InJnYiIpKyIoIjsNCmZvcih2YXIgaj0wO2o8cHJvcC5zdGFydFJnYi5sZW5ndGg7aisrKXsNCl81NTMrPU1hdGgucm91bmQoKChwcm9wLmVuZFJnYltqXS1wcm9wLnN0YXJ0UmdiW2pdKSpuKStwcm9wLnN0YXJ0UmdiW2pdKSsoajxwcm9wLnN0YXJ0UmdiLmxlbmd0aC0xPyIsIjoiIik7DQp9DQpfNTUzKz0iKSI7DQp9ZWxzZXsNCl81NTM9KCh0aGlzLmRpZmZzW2ldKSpuKStwcm9wLnN0YXJ0Kyhwcm9wLnByb3BlcnR5IT0ib3BhY2l0eSI/cHJvcC51bml0c3x8InB4IjoiIik7DQp9DQp9DQpyZXRbZG9qby5odG1sLnRvQ2FtZWxDYXNlKHByb3AucHJvcGVydHkpXT1fNTUzOw0KfSx0aGlzKTsNCnJldHVybiByZXQ7DQp9Ow0KfTsNCnZhciBhbmltPW5ldyBkb2pvLmxmeC5BbmltYXRpb24oe2JlZm9yZUJlZ2luOmZ1bmN0aW9uKCl7DQpfNTNkKF81M2MpOw0KYW5pbS5jdXJ2ZT1uZXcgXzU0YihfNTNjLnByb3BlcnR5TWFwKTsNCn0sb25BbmltYXRlOmZ1bmN0aW9uKF81NTYpew0KZG9qby5sYW5nLmZvckVhY2goXzUzYy5ub2RlcyxmdW5jdGlvbihub2RlKXsNCl81NDcobm9kZSxfNTU2KTsNCn0pOw0KfX0sXzUzYy5kdXJhdGlvbixudWxsLF81M2MuZWFzaW5nKTsNCmlmKF81M2Ipew0KZm9yKHZhciB4IGluIF81M2Ipew0KaWYoZG9qby5sYW5nLmlzRnVuY3Rpb24oXzUzYlt4XSkpew0KYW5pbS5jb25uZWN0KHgsYW5pbSxfNTNiW3hdKTsNCn0NCn0NCn0NCnJldHVybiBhbmltOw0KfTsNCmRvam8ubGZ4Lmh0bWwuX21ha2VGYWRlYWJsZT1mdW5jdGlvbihfNTU5KXsNCnZhciBfNTVhPWZ1bmN0aW9uKG5vZGUpew0KaWYoZG9qby5yZW5kZXIuaHRtbC5pZSl7DQppZigobm9kZS5zdHlsZS56b29tLmxlbmd0aD09MCkmJihkb2pvLmh0bWwuZ2V0U3R5bGUobm9kZSwiem9vbSIpPT0ibm9ybWFsIikpew0Kbm9kZS5zdHlsZS56b29tPSIxIjsNCn0NCmlmKChub2RlLnN0eWxlLndpZHRoLmxlbmd0aD09MCkmJihkb2pvLmh0bWwuZ2V0U3R5bGUobm9kZSwid2lkdGgiKT09ImF1dG8iKSl7DQpub2RlLnN0eWxlLndpZHRoPSJhdXRvIjsNCn0NCn0NCn07DQppZihkb2pvLmxhbmcuaXNBcnJheUxpa2UoXzU1OSkpew0KZG9qby5sYW5nLmZvckVhY2goXzU1OSxfNTVhKTsNCn1lbHNlew0KXzU1YShfNTU5KTsNCn0NCn07DQpkb2pvLmxmeC5odG1sLmZhZGU9ZnVuY3Rpb24oXzU1YyxfNTVkLF81NWUsXzU1ZixfNTYwKXsNCl81NWM9ZG9qby5sZnguaHRtbC5fYnlJZChfNTVjKTsNCnZhciBfNTYxPXtwcm9wZXJ0eToib3BhY2l0eSJ9Ow0KaWYoIWRqX3VuZGVmKCJzdGFydCIsXzU1ZCkpew0KXzU2MS5zdGFydD1fNTVkLnN0YXJ0Ow0KfWVsc2V7DQpfNTYxLnN0YXJ0PWZ1bmN0aW9uKCl7DQpyZXR1cm4gZG9qby5odG1sLmdldE9wYWNpdHkoXzU1Y1swXSk7DQp9Ow0KfQ0KaWYoIWRqX3VuZGVmKCJlbmQiLF81NWQpKXsNCl81NjEuZW5kPV81NWQuZW5kOw0KfWVsc2V7DQpkb2pvLnJhaXNlKCJkb2pvLmxmeC5odG1sLmZhZGUgbmVlZHMgYW4gZW5kIHZhbHVlIik7DQp9DQp2YXIgYW5pbT1kb2pvLmxmeC5wcm9wZXJ0eUFuaW1hdGlvbihfNTVjLFtfNTYxXSxfNTVlLF81NWYpOw0KYW5pbS5jb25uZWN0KCJiZWZvcmVCZWdpbiIsZnVuY3Rpb24oKXsNCmRvam8ubGZ4Lmh0bWwuX21ha2VGYWRlYWJsZShfNTVjKTsNCn0pOw0KaWYoXzU2MCl7DQphbmltLmNvbm5lY3QoIm9uRW5kIixmdW5jdGlvbigpew0KXzU2MChfNTVjLGFuaW0pOw0KfSk7DQp9DQpyZXR1cm4gYW5pbTsNCn07DQpkb2pvLmxmeC5odG1sLmZhZGVJbj1mdW5jdGlvbihfNTYzLF81NjQsXzU2NSxfNTY2KXsNCnJldHVybiBkb2pvLmxmeC5odG1sLmZhZGUoXzU2Myx7ZW5kOjF9LF81NjQsXzU2NSxfNTY2KTsNCn07DQpkb2pvLmxmeC5odG1sLmZhZGVPdXQ9ZnVuY3Rpb24oXzU2NyxfNTY4LF81NjksXzU2YSl7DQpyZXR1cm4gZG9qby5sZnguaHRtbC5mYWRlKF81Njcse2VuZDowfSxfNTY4LF81NjksXzU2YSk7DQp9Ow0KZG9qby5sZnguaHRtbC5mYWRlU2hvdz1mdW5jdGlvbihfNTZiLF81NmMsXzU2ZCxfNTZlKXsNCl81NmI9ZG9qby5sZnguaHRtbC5fYnlJZChfNTZiKTsNCmRvam8ubGFuZy5mb3JFYWNoKF81NmIsZnVuY3Rpb24obm9kZSl7DQpkb2pvLmh0bWwuc2V0T3BhY2l0eShub2RlLDApOw0KfSk7DQp2YXIgYW5pbT1kb2pvLmxmeC5odG1sLmZhZGVJbihfNTZiLF81NmMsXzU2ZCxfNTZlKTsNCmFuaW0uY29ubmVjdCgiYmVmb3JlQmVnaW4iLGZ1bmN0aW9uKCl7DQppZihkb2pvLmxhbmcuaXNBcnJheUxpa2UoXzU2Yikpew0KZG9qby5sYW5nLmZvckVhY2goXzU2Yixkb2pvLmh0bWwuc2hvdyk7DQp9ZWxzZXsNCmRvam8uaHRtbC5zaG93KF81NmIpOw0KfQ0KfSk7DQpyZXR1cm4gYW5pbTsNCn07DQpkb2pvLmxmeC5odG1sLmZhZGVIaWRlPWZ1bmN0aW9uKF81NzEsXzU3MixfNTczLF81NzQpew0KdmFyIGFuaW09ZG9qby5sZnguaHRtbC5mYWRlT3V0KF81NzEsXzU3MixfNTczLGZ1bmN0aW9uKCl7DQppZihkb2pvLmxhbmcuaXNBcnJheUxpa2UoXzU3MSkpew0KZG9qby5sYW5nLmZvckVhY2goXzU3MSxkb2pvLmh0bWwuaGlkZSk7DQp9ZWxzZXsNCmRvam8uaHRtbC5oaWRlKF81NzEpOw0KfQ0KaWYoXzU3NCl7DQpfNTc0KF81NzEsYW5pbSk7DQp9DQp9KTsNCnJldHVybiBhbmltOw0KfTsNCmRvam8ubGZ4Lmh0bWwud2lwZUluPWZ1bmN0aW9uKF81NzYsXzU3NyxfNTc4LF81Nzkpew0KXzU3Nj1kb2pvLmxmeC5odG1sLl9ieUlkKF81NzYpOw0KdmFyIF81N2E9W107DQpkb2pvLmxhbmcuZm9yRWFjaChfNTc2LGZ1bmN0aW9uKG5vZGUpew0KdmFyIF81N2M9e307DQpkb2pvLmh0bWwuc2hvdyhub2RlKTsNCnZhciBfNTdkPWRvam8uaHRtbC5nZXRCb3JkZXJCb3gobm9kZSkuaGVpZ2h0Ow0KZG9qby5odG1sLmhpZGUobm9kZSk7DQp2YXIgYW5pbT1kb2pvLmxmeC5wcm9wZXJ0eUFuaW1hdGlvbihub2RlLHsiaGVpZ2h0Ijp7c3RhcnQ6MSxlbmQ6ZnVuY3Rpb24oKXsNCnJldHVybiBfNTdkOw0KfX19LF81NzcsXzU3OCk7DQphbmltLmNvbm5lY3QoImJlZm9yZUJlZ2luIixmdW5jdGlvbigpew0KXzU3Yy5vdmVyZmxvdz1ub2RlLnN0eWxlLm92ZXJmbG93Ow0KXzU3Yy5oZWlnaHQ9bm9kZS5zdHlsZS5oZWlnaHQ7DQp3aXRoKG5vZGUuc3R5bGUpew0Kb3ZlcmZsb3c9ImhpZGRlbiI7DQpfNTdkPSIxcHgiOw0KfQ0KZG9qby5odG1sLnNob3cobm9kZSk7DQp9KTsNCmFuaW0uY29ubmVjdCgib25FbmQiLGZ1bmN0aW9uKCl7DQp3aXRoKG5vZGUuc3R5bGUpew0Kb3ZlcmZsb3c9XzU3Yy5vdmVyZmxvdzsNCl81N2Q9XzU3Yy5oZWlnaHQ7DQp9DQppZihfNTc5KXsNCl81Nzkobm9kZSxhbmltKTsNCn0NCn0pOw0KXzU3YS5wdXNoKGFuaW0pOw0KfSk7DQpyZXR1cm4gZG9qby5sZnguY29tYmluZShfNTdhKTsNCn07DQpkb2pvLmxmeC5odG1sLndpcGVPdXQ9ZnVuY3Rpb24oXzU3ZixfNTgwLF81ODEsXzU4Mil7DQpfNTdmPWRvam8ubGZ4Lmh0bWwuX2J5SWQoXzU3Zik7DQp2YXIgXzU4Mz1bXTsNCmRvam8ubGFuZy5mb3JFYWNoKF81N2YsZnVuY3Rpb24obm9kZSl7DQp2YXIgXzU4NT17fTsNCnZhciBhbmltPWRvam8ubGZ4LnByb3BlcnR5QW5pbWF0aW9uKG5vZGUseyJoZWlnaHQiOntzdGFydDpmdW5jdGlvbigpew0KcmV0dXJuIGRvam8uaHRtbC5nZXRDb250ZW50Qm94KG5vZGUpLmhlaWdodDsNCn0sZW5kOjF9fSxfNTgwLF81ODEseyJiZWZvcmVCZWdpbiI6ZnVuY3Rpb24oKXsNCl81ODUub3ZlcmZsb3c9bm9kZS5zdHlsZS5vdmVyZmxvdzsNCl81ODUuaGVpZ2h0PW5vZGUuc3R5bGUuaGVpZ2h0Ow0Kd2l0aChub2RlLnN0eWxlKXsNCm92ZXJmbG93PSJoaWRkZW4iOw0KfQ0KZG9qby5odG1sLnNob3cobm9kZSk7DQp9LCJvbkVuZCI6ZnVuY3Rpb24oKXsNCmRvam8uaHRtbC5oaWRlKG5vZGUpOw0Kd2l0aChub2RlLnN0eWxlKXsNCm92ZXJmbG93PV81ODUub3ZlcmZsb3c7DQpoZWlnaHQ9XzU4NS5oZWlnaHQ7DQp9DQppZihfNTgyKXsNCl81ODIobm9kZSxhbmltKTsNCn0NCn19KTsNCl81ODMucHVzaChhbmltKTsNCn0pOw0KcmV0dXJuIGRvam8ubGZ4LmNvbWJpbmUoXzU4Myk7DQp9Ow0KZG9qby5sZnguaHRtbC5zbGlkZVRvPWZ1bmN0aW9uKF81ODcsXzU4OCxfNTg5LF81OGEsXzU4Yil7DQpfNTg3PWRvam8ubGZ4Lmh0bWwuX2J5SWQoXzU4Nyk7DQp2YXIgXzU4Yz1bXTsNCnZhciBfNThkPWRvam8uaHRtbC5nZXRDb21wdXRlZFN0eWxlOw0KaWYoZG9qby5sYW5nLmlzQXJyYXkoXzU4OCkpew0KZG9qby5kZXByZWNhdGVkKCJkb2pvLmxmeC5odG1sLnNsaWRlVG8obm9kZSwgYXJyYXkpIiwidXNlIGRvam8ubGZ4Lmh0bWwuc2xpZGVUbyhub2RlLCB7dG9wOiB2YWx1ZSwgbGVmdDogdmFsdWV9KTsiLCIwLjUiKTsNCl81ODg9e3RvcDpfNTg4WzBdLGxlZnQ6XzU4OFsxXX07DQp9DQpkb2pvLmxhbmcuZm9yRWFjaChfNTg3LGZ1bmN0aW9uKG5vZGUpew0KdmFyIHRvcD1udWxsOw0KdmFyIGxlZnQ9bnVsbDsNCnZhciBpbml0PShmdW5jdGlvbigpew0KdmFyIF81OTI9bm9kZTsNCnJldHVybiBmdW5jdGlvbigpew0KdmFyIHBvcz1fNThkKF81OTIsInBvc2l0aW9uIik7DQp0b3A9KHBvcz09ImFic29sdXRlIj9ub2RlLm9mZnNldFRvcDpwYXJzZUludChfNThkKG5vZGUsInRvcCIpKXx8MCk7DQpsZWZ0PShwb3M9PSJhYnNvbHV0ZSI/bm9kZS5vZmZzZXRMZWZ0OnBhcnNlSW50KF81OGQobm9kZSwibGVmdCIpKXx8MCk7DQppZighZG9qby5sYW5nLmluQXJyYXkoWyJhYnNvbHV0ZSIsInJlbGF0aXZlIl0scG9zKSl7DQp2YXIgcmV0PWRvam8uaHRtbC5hYnMoXzU5Mix0cnVlKTsNCmRvam8uaHRtbC5zZXRTdHlsZUF0dHJpYnV0ZXMoXzU5MiwicG9zaXRpb246YWJzb2x1dGU7dG9wOiIrcmV0LnkrInB4O2xlZnQ6IityZXQueCsicHg7Iik7DQp0b3A9cmV0Lnk7DQpsZWZ0PXJldC54Ow0KfQ0KfTsNCn0pKCk7DQppbml0KCk7DQp2YXIgYW5pbT1kb2pvLmxmeC5wcm9wZXJ0eUFuaW1hdGlvbihub2RlLHsidG9wIjp7c3RhcnQ6dG9wLGVuZDooXzU4OC50b3B8fDApfSwibGVmdCI6e3N0YXJ0OmxlZnQsZW5kOihfNTg4LmxlZnR8fDApfX0sXzU4OSxfNThhLHsiYmVmb3JlQmVnaW4iOmluaXR9KTsNCmlmKF81OGIpew0KYW5pbS5jb25uZWN0KCJvbkVuZCIsZnVuY3Rpb24oKXsNCl81OGIoXzU4NyxhbmltKTsNCn0pOw0KfQ0KXzU4Yy5wdXNoKGFuaW0pOw0KfSk7DQpyZXR1cm4gZG9qby5sZnguY29tYmluZShfNThjKTsNCn07DQpkb2pvLmxmeC5odG1sLnNsaWRlQnk9ZnVuY3Rpb24oXzU5NixfNTk3LF81OTgsXzU5OSxfNTlhKXsNCl81OTY9ZG9qby5sZnguaHRtbC5fYnlJZChfNTk2KTsNCnZhciBfNTliPVtdOw0KdmFyIF81OWM9ZG9qby5odG1sLmdldENvbXB1dGVkU3R5bGU7DQppZihkb2pvLmxhbmcuaXNBcnJheShfNTk3KSl7DQpkb2pvLmRlcHJlY2F0ZWQoImRvam8ubGZ4Lmh0bWwuc2xpZGVCeShub2RlLCBhcnJheSkiLCJ1c2UgZG9qby5sZnguaHRtbC5zbGlkZUJ5KG5vZGUsIHt0b3A6IHZhbHVlLCBsZWZ0OiB2YWx1ZX0pOyIsIjAuNSIpOw0KXzU5Nz17dG9wOl81OTdbMF0sbGVmdDpfNTk3WzFdfTsNCn0NCmRvam8ubGFuZy5mb3JFYWNoKF81OTYsZnVuY3Rpb24obm9kZSl7DQp2YXIgdG9wPW51bGw7DQp2YXIgbGVmdD1udWxsOw0KdmFyIGluaXQ9KGZ1bmN0aW9uKCl7DQp2YXIgXzVhMT1ub2RlOw0KcmV0dXJuIGZ1bmN0aW9uKCl7DQp2YXIgcG9zPV81OWMoXzVhMSwicG9zaXRpb24iKTsNCnRvcD0ocG9zPT0iYWJzb2x1dGUiP25vZGUub2Zmc2V0VG9wOnBhcnNlSW50KF81OWMobm9kZSwidG9wIikpfHwwKTsNCmxlZnQ9KHBvcz09ImFic29sdXRlIj9ub2RlLm9mZnNldExlZnQ6cGFyc2VJbnQoXzU5Yyhub2RlLCJsZWZ0IikpfHwwKTsNCmlmKCFkb2pvLmxhbmcuaW5BcnJheShbImFic29sdXRlIiwicmVsYXRpdmUiXSxwb3MpKXsNCnZhciByZXQ9ZG9qby5odG1sLmFicyhfNWExLHRydWUpOw0KZG9qby5odG1sLnNldFN0eWxlQXR0cmlidXRlcyhfNWExLCJwb3NpdGlvbjphYnNvbHV0ZTt0b3A6IityZXQueSsicHg7bGVmdDoiK3JldC54KyJweDsiKTsNCnRvcD1yZXQueTsNCmxlZnQ9cmV0Lng7DQp9DQp9Ow0KfSkoKTsNCmluaXQoKTsNCnZhciBhbmltPWRvam8ubGZ4LnByb3BlcnR5QW5pbWF0aW9uKG5vZGUseyJ0b3AiOntzdGFydDp0b3AsZW5kOnRvcCsoXzU5Ny50b3B8fDApfSwibGVmdCI6e3N0YXJ0OmxlZnQsZW5kOmxlZnQrKF81OTcubGVmdHx8MCl9fSxfNTk4LF81OTkpLmNvbm5lY3QoImJlZm9yZUJlZ2luIixpbml0KTsNCmlmKF81OWEpew0KYW5pbS5jb25uZWN0KCJvbkVuZCIsZnVuY3Rpb24oKXsNCl81OWEoXzU5NixhbmltKTsNCn0pOw0KfQ0KXzU5Yi5wdXNoKGFuaW0pOw0KfSk7DQpyZXR1cm4gZG9qby5sZnguY29tYmluZShfNTliKTsNCn07DQpkb2pvLmxmeC5odG1sLmV4cGxvZGU9ZnVuY3Rpb24oXzVhNSxfNWE2LF81YTcsXzVhOCxfNWE5KXsNCnZhciBoPWRvam8uaHRtbDsNCl81YTU9ZG9qby5ieUlkKF81YTUpOw0KXzVhNj1kb2pvLmJ5SWQoXzVhNik7DQp2YXIgXzVhYj1oLnRvQ29vcmRpbmF0ZU9iamVjdChfNWE1LHRydWUpOw0KdmFyIF81YWM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7DQpoLmNvcHlTdHlsZShfNWFjLF81YTYpOw0KaWYoXzVhNi5leHBsb2RlQ2xhc3NOYW1lKXsNCl81YWMuY2xhc3NOYW1lPV81YTYuZXhwbG9kZUNsYXNzTmFtZTsNCn0NCndpdGgoXzVhYy5zdHlsZSl7DQpwb3NpdGlvbj0iYWJzb2x1dGUiOw0KZGlzcGxheT0ibm9uZSI7DQp9DQpkb2pvLmJvZHkoKS5hcHBlbmRDaGlsZChfNWFjKTsNCndpdGgoXzVhNi5zdHlsZSl7DQp2aXNpYmlsaXR5PSJoaWRkZW4iOw0KZGlzcGxheT0iYmxvY2siOw0KfQ0KdmFyIF81YWQ9aC50b0Nvb3JkaW5hdGVPYmplY3QoXzVhNix0cnVlKTsNCndpdGgoXzVhNi5zdHlsZSl7DQpkaXNwbGF5PSJub25lIjsNCnZpc2liaWxpdHk9InZpc2libGUiOw0KfQ0KdmFyIF81YWU9e29wYWNpdHk6e3N0YXJ0OjAuNSxlbmQ6MX19Ow0KZG9qby5sYW5nLmZvckVhY2goWyJoZWlnaHQiLCJ3aWR0aCIsInRvcCIsImxlZnQiXSxmdW5jdGlvbih0eXBlKXsNCl81YWVbdHlwZV09e3N0YXJ0Ol81YWJbdHlwZV0sZW5kOl81YWRbdHlwZV19Ow0KfSk7DQp2YXIgYW5pbT1uZXcgZG9qby5sZngucHJvcGVydHlBbmltYXRpb24oXzVhYyxfNWFlLF81YTcsXzVhOCx7ImJlZm9yZUJlZ2luIjpmdW5jdGlvbigpew0KaC5zZXREaXNwbGF5KF81YWMsImJsb2NrIik7DQp9LCJvbkVuZCI6ZnVuY3Rpb24oKXsNCmguc2V0RGlzcGxheShfNWE2LCJibG9jayIpOw0KXzVhYy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKF81YWMpOw0KfX0pOw0KaWYoXzVhOSl7DQphbmltLmNvbm5lY3QoIm9uRW5kIixmdW5jdGlvbigpew0KXzVhOShfNWE2LGFuaW0pOw0KfSk7DQp9DQpyZXR1cm4gYW5pbTsNCn07DQpkb2pvLmxmeC5odG1sLmltcGxvZGU9ZnVuY3Rpb24oXzViMSxlbmQsXzViMyxfNWI0LF81YjUpew0KdmFyIGg9ZG9qby5odG1sOw0KXzViMT1kb2pvLmJ5SWQoXzViMSk7DQplbmQ9ZG9qby5ieUlkKGVuZCk7DQp2YXIgXzViNz1kb2pvLmh0bWwudG9Db29yZGluYXRlT2JqZWN0KF81YjEsdHJ1ZSk7DQp2YXIgXzViOD1kb2pvLmh0bWwudG9Db29yZGluYXRlT2JqZWN0KGVuZCx0cnVlKTsNCnZhciBfNWI5PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KZG9qby5odG1sLmNvcHlTdHlsZShfNWI5LF81YjEpOw0KaWYoXzViMS5leHBsb2RlQ2xhc3NOYW1lKXsNCl81YjkuY2xhc3NOYW1lPV81YjEuZXhwbG9kZUNsYXNzTmFtZTsNCn0NCmRvam8uaHRtbC5zZXRPcGFjaXR5KF81YjksMC4zKTsNCndpdGgoXzViOS5zdHlsZSl7DQpwb3NpdGlvbj0iYWJzb2x1dGUiOw0KZGlzcGxheT0ibm9uZSI7DQpiYWNrZ3JvdW5kQ29sb3I9aC5nZXRTdHlsZShfNWIxLCJiYWNrZ3JvdW5kLWNvbG9yIikudG9Mb3dlckNhc2UoKTsNCn0NCmRvam8uYm9keSgpLmFwcGVuZENoaWxkKF81YjkpOw0KdmFyIF81YmE9e29wYWNpdHk6e3N0YXJ0OjEsZW5kOjAuNX19Ow0KZG9qby5sYW5nLmZvckVhY2goWyJoZWlnaHQiLCJ3aWR0aCIsInRvcCIsImxlZnQiXSxmdW5jdGlvbih0eXBlKXsNCl81YmFbdHlwZV09e3N0YXJ0Ol81YjdbdHlwZV0sZW5kOl81YjhbdHlwZV19Ow0KfSk7DQp2YXIgYW5pbT1uZXcgZG9qby5sZngucHJvcGVydHlBbmltYXRpb24oXzViOSxfNWJhLF81YjMsXzViNCx7ImJlZm9yZUJlZ2luIjpmdW5jdGlvbigpew0KZG9qby5odG1sLmhpZGUoXzViMSk7DQpkb2pvLmh0bWwuc2hvdyhfNWI5KTsNCn0sIm9uRW5kIjpmdW5jdGlvbigpew0KXzViOS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKF81YjkpOw0KfX0pOw0KaWYoXzViNSl7DQphbmltLmNvbm5lY3QoIm9uRW5kIixmdW5jdGlvbigpew0KXzViNShfNWIxLGFuaW0pOw0KfSk7DQp9DQpyZXR1cm4gYW5pbTsNCn07DQpkb2pvLmxmeC5odG1sLmhpZ2hsaWdodD1mdW5jdGlvbihfNWJkLF81YmUsXzViZixfNWMwLF81YzEpew0KXzViZD1kb2pvLmxmeC5odG1sLl9ieUlkKF81YmQpOw0KdmFyIF81YzI9W107DQpkb2pvLmxhbmcuZm9yRWFjaChfNWJkLGZ1bmN0aW9uKG5vZGUpew0KdmFyIF81YzQ9ZG9qby5odG1sLmdldEJhY2tncm91bmRDb2xvcihub2RlKTsNCnZhciBiZz1kb2pvLmh0bWwuZ2V0U3R5bGUobm9kZSwiYmFja2dyb3VuZC1jb2xvciIpLnRvTG93ZXJDYXNlKCk7DQp2YXIgXzVjNj1kb2pvLmh0bWwuZ2V0U3R5bGUobm9kZSwiYmFja2dyb3VuZC1pbWFnZSIpOw0KdmFyIF81Yzc9KGJnPT0idHJhbnNwYXJlbnQifHxiZz09InJnYmEoMCwgMCwgMCwgMCkiKTsNCndoaWxlKF81YzQubGVuZ3RoPjMpew0KXzVjNC5wb3AoKTsNCn0NCnZhciByZ2I9bmV3IGRvam8uZ2Z4LmNvbG9yLkNvbG9yKF81YmUpOw0KdmFyIF81Yzk9bmV3IGRvam8uZ2Z4LmNvbG9yLkNvbG9yKF81YzQpOw0KdmFyIGFuaW09ZG9qby5sZngucHJvcGVydHlBbmltYXRpb24obm9kZSx7ImJhY2tncm91bmQtY29sb3IiOntzdGFydDpyZ2IsZW5kOl81Yzl9fSxfNWJmLF81YzAseyJiZWZvcmVCZWdpbiI6ZnVuY3Rpb24oKXsNCmlmKF81YzYpew0Kbm9kZS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2U9Im5vbmUiOw0KfQ0Kbm9kZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9InJnYigiK3JnYi50b1JnYigpLmpvaW4oIiwiKSsiKSI7DQp9LCJvbkVuZCI6ZnVuY3Rpb24oKXsNCmlmKF81YzYpew0Kbm9kZS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2U9XzVjNjsNCn0NCmlmKF81Yzcpew0Kbm9kZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9InRyYW5zcGFyZW50IjsNCn0NCmlmKF81YzEpew0KXzVjMShub2RlLGFuaW0pOw0KfQ0KfX0pOw0KXzVjMi5wdXNoKGFuaW0pOw0KfSk7DQpyZXR1cm4gZG9qby5sZnguY29tYmluZShfNWMyKTsNCn07DQpkb2pvLmxmeC5odG1sLnVuaGlnaGxpZ2h0PWZ1bmN0aW9uKF81Y2IsXzVjYyxfNWNkLF81Y2UsXzVjZil7DQpfNWNiPWRvam8ubGZ4Lmh0bWwuX2J5SWQoXzVjYik7DQp2YXIgXzVkMD1bXTsNCmRvam8ubGFuZy5mb3JFYWNoKF81Y2IsZnVuY3Rpb24obm9kZSl7DQp2YXIgXzVkMj1uZXcgZG9qby5nZnguY29sb3IuQ29sb3IoZG9qby5odG1sLmdldEJhY2tncm91bmRDb2xvcihub2RlKSk7DQp2YXIgcmdiPW5ldyBkb2pvLmdmeC5jb2xvci5Db2xvcihfNWNjKTsNCnZhciBfNWQ0PWRvam8uaHRtbC5nZXRTdHlsZShub2RlLCJiYWNrZ3JvdW5kLWltYWdlIik7DQp2YXIgYW5pbT1kb2pvLmxmeC5wcm9wZXJ0eUFuaW1hdGlvbihub2RlLHsiYmFja2dyb3VuZC1jb2xvciI6e3N0YXJ0Ol81ZDIsZW5kOnJnYn19LF81Y2QsXzVjZSx7ImJlZm9yZUJlZ2luIjpmdW5jdGlvbigpew0KaWYoXzVkNCl7DQpub2RlLnN0eWxlLmJhY2tncm91bmRJbWFnZT0ibm9uZSI7DQp9DQpub2RlLnN0eWxlLmJhY2tncm91bmRDb2xvcj0icmdiKCIrXzVkMi50b1JnYigpLmpvaW4oIiwiKSsiKSI7DQp9LCJvbkVuZCI6ZnVuY3Rpb24oKXsNCmlmKF81Y2Ypew0KXzVjZihub2RlLGFuaW0pOw0KfQ0KfX0pOw0KXzVkMC5wdXNoKGFuaW0pOw0KfSk7DQpyZXR1cm4gZG9qby5sZnguY29tYmluZShfNWQwKTsNCn07DQpkb2pvLmxhbmcubWl4aW4oZG9qby5sZngsZG9qby5sZnguaHRtbCk7DQpkb2pvLnByb3ZpZGUoImRvam8ubGZ4LioiKTsNCg0K</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
    </HTTPResponse>
  </HTTPTask>
</HTTPSnapshot>