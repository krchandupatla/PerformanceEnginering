<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="200">
  <HTTPTask id="202" hostname="aa-pt6245.dev.accela.com:5443" path="/portlets/framework/includes/javascript/popup/popup.js" url="https://aa-pt6245.dev.accela.com:5443/portlets/framework/includes/javascript/popup/popup.js" ip="13.93.163.237" port="5443" client_ip="10.1.61.63" client_port="11584" connectionId="2032" origin="Primary" startDateTime="2017-08-28T11:38:10.213-07:00" startTime="9332" endTime="9345" sendTime="10" waitTime="0" receiveTime="2">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Referer" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cHM6Ly9hYS1wdDYyNDUuZGV2LmFjY2VsYS5jb206NTQ0My9wb3J0bGV0cy9jYXAvY2FwU2VhcmNoLmRvP3NlYXJjaEJ5PUJ5Q29uZGl0aW9uJmhlaWdodD0yNzAmbW9kZT1pbml0Jm1vZHVsZT1CdWlsZGluZyZjbGVhbkNhcElkPVkmaXNHZW5lcmFsQ0FQPVkmc3VwcG9ydE11bEFnZW5jeVNlYXJjaD1Z</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YWEtcHQ2MjQ1LmRldi5hY2NlbGEuY29tOjU0NDM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cookie" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SlNFU1NJT05JRD12WmtsdWRxZ2o4WmpHTTJvb2pPTkVrT0o7IEpTRVNTSU9OSUQ9KioqKioqKioqKioqKioqKioqKioqKioqKioqOyBMQVNURVNUX1JFUVVFU1RfVElNRT0xNTAzOTQ1NDg3Nzc2OyBob3N0U2lnbk9uPXRydWU7IGdfY3VycmVudF9sYW5ndWFnZV9leHQ9ZW5fVVM7IExBVEVTVF9XRUJfU0VSVkVSPTEwLjEuMC42OyBMQVRFU1RfU0VTU0lPTl9JRD12WmtsdWRxZ2o4WmpHTTJvb2pPTkVrT0o7IEFDQXV0aD03NzM2MjAxNDkzMTM2NjIyNTcyODg2NTM3NDA1MDg5NjkxODQ2NjMzNjY3Mjk5NTA0OTExNDkxODQyNTA1OTgyNjUyODk1OTAxNjQyMTUyNjM4NjkxNzE2NDgzNTExNzc1MzY1MTQ2NjI3NDczOTk4MzMzMTI2NDU1ODMzODM2MDsgQUNTaWduT25Nb2R1bGU9U1NPU3RhbmRhcmQ7IEFBUGVyc2lzdExvZ2luU2VydlByb3ZDb2RlPUZMQUdTVEFGRjsgTG9naW5TZXJ2UHJvdkNvZGU0TXVsdGlBZ2VuY3k9RkxBR1NUQUZGOyBMb2dpblVzZXJuYW1lNE11bHRpQWdlbmN5PTE3OUREMTNBMTg2MDI4RjQ7IEFDU2lnbm9mZj0iaHR0cHM6Ly9hYS1wdDYyNDUuZGV2LmFjY2VsYS5jb206NTQ0My9wb3J0bGV0cy9zZWN1cml0eS9zaWdub3V0LmRvIjsgQUNTd2l0Y2hBZ2VuY3k9Imh0dHBzOi8vYWEtcHQ2MjQ1LmRldi5hY2NlbGEuY29tOjU0NDMvcG9ydGxldHMvY29tbW9ucy9zc28vYmxhbmsuanNwIg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC9wb3J0bGV0cy9mcmFtZXdvcmsvaW5jbHVkZXMvamF2YXNjcmlwdC9wb3B1cC9wb3B1cC5qcyBIVFRQLzEuMQ0KUmVmZXJlcjogaHR0cHM6Ly9hYS1wdDYyNDUuZGV2LmFjY2VsYS5jb206NTQ0My9wb3J0bGV0cy9jYXAvY2FwU2VhcmNoLmRvP3NlYXJjaEJ5PUJ5Q29uZGl0aW9uJmhlaWdodD0yNzAmbW9kZT1pbml0Jm1vZHVsZT1CdWlsZGluZyZjbGVhbkNhcElkPVkmaXNHZW5lcmFsQ0FQPVkmc3VwcG9ydE11bEFnZW5jeVNlYXJjaD1ZDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXT1c2NDsgVHJpZGVudC83LjA7IHJ2OjExLjApIGxpa2UgR2Vja28NCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUw0KQWNjZXB0OiAqLyoNCkNvbm5lY3Rpb246IEtlZXAtQWxpdmUNCkhvc3Q6IGFhLXB0NjI0NS5kZXYuYWNjZWxhLmNvbTo1NDQzDQpDb29raWU6IEpTRVNTSU9OSUQ9dlprbHVkcWdqOFpqR00yb29qT05Fa09KOyBKU0VTU0lPTklEPSoqKioqKioqKioqKioqKioqKioqKioqKioqKjsgTEFTVEVTVF9SRVFVRVNUX1RJTUU9MTUwMzk0NTQ4Nzc3NjsgaG9zdFNpZ25Pbj10cnVlOyBnX2N1cnJlbnRfbGFuZ3VhZ2VfZXh0PWVuX1VTOyBMQVRFU1RfV0VCX1NFUlZFUj0xMC4xLjAuNjsgTEFURVNUX1NFU1NJT05fSUQ9dlprbHVkcWdqOFpqR00yb29qT05Fa09KOyBBQ0F1dGg9NzczNjIwMTQ5MzEzNjYyMjU3Mjg4NjUzNzQwNTA4OTY5MTg0NjYzMzY2NzI5OTUwNDkxMTQ5MTg0MjUwNTk4MjY1Mjg5NTkwMTY0MjE1MjYzODY5MTcxNjQ4MzUxMTc3NTM2NTE0NjYyNzQ3Mzk5ODMzMzEyNjQ1NTgzMzgzNjA7IEFDU2lnbk9uTW9kdWxlPVNTT1N0YW5kYXJkOyBBQVBlcnNpc3RMb2dpblNlcnZQcm92Q29kZT1GTEFHU1RBRkY7IExvZ2luU2VydlByb3ZDb2RlNE11bHRpQWdlbmN5PUZMQUdTVEFGRjsgTG9naW5Vc2VybmFtZTRNdWx0aUFnZW5jeT0xNzlERDEzQTE4NjAyOEY0OyBBQ1NpZ25vZmY9Imh0dHBzOi8vYWEtcHQ2MjQ1LmRldi5hY2NlbGEuY29tOjU0NDMvcG9ydGxldHMvc2VjdXJpdHkvc2lnbm91dC5kbyI7IEFDU3dpdGNoQWdlbmN5PSJodHRwczovL2FhLXB0NjI0NS5kZXYuYWNjZWxhLmNvbTo1NDQzL3BvcnRsZXRzL2NvbW1vbnMvc3NvL2JsYW5rLmpzcCINCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
        <HTTPCookies>
          <HTTPHeaderEntity name="JSESSIONID" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dlprbHVkcWdqOFpqR00yb29qT05Fa09K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="JSESSIONID" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>KioqKioqKioqKioqKioqKioqKioqKioqKioq</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="LASTEST_REQUEST_TIME" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTUwMzk0NTQ4Nzc3Ng==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="hostSignOn" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dHJ1ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="g_current_language_ext" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW5fVVM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="LATEST_WEB_SERVER" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTAuMS4wLjY=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="LATEST_SESSION_ID" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dlprbHVkcWdqOFpqR00yb29qT05Fa09K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ACAuth" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NzczNjIwMTQ5MzEzNjYyMjU3Mjg4NjUzNzQwNTA4OTY5MTg0NjYzMzY2NzI5OTUwNDkxMTQ5MTg0MjUwNTk4MjY1Mjg5NTkwMTY0MjE1MjYzODY5MTcxNjQ4MzUxMTc3NTM2NTE0NjYyNzQ3Mzk5ODMzMzEyNjQ1NTgzMzgzNjA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ACSignOnModule" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>U1NPU3RhbmRhcmQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="AAPersistLoginServProvCode" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RkxBR1NUQUZG</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="LoginServProvCode4MultiAgency" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RkxBR1NUQUZG</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="LoginUsername4MultiAgency" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTc5REQxM0ExODYwMjhGNA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ACSignoff" index="12">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Imh0dHBzOi8vYWEtcHQ2MjQ1LmRldi5hY2NlbGEuY29tOjU0NDMvcG9ydGxldHMvc2VjdXJpdHkvc2lnbm91dC5kbyI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ACSwitchAgency" index="13">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Imh0dHBzOi8vYWEtcHQ2MjQ1LmRldi5hY2NlbGEuY29tOjU0NDMvcG9ydGxldHMvY29tbW9ucy9zc28vYmxhbmsuanNwIg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
        </HTTPCookies>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Server" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QXBhY2hlLUNveW90ZS8xLjE=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cache-Control" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>cHJpdmF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Expires" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMCBVVEM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-XSS-Protection" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Set-Cookie" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TEFTVEVTVF9SRVFVRVNUX1RJTUU9MTUwMzk0NTQ4Nzc5MTsgRG9tYWluPWRldi5hY2NlbGEuY29tOyBQYXRoPS87IFNlY3VyZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Set-Cookie" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TEFURVNUX1dFQl9TRVJWRVI9MTAuMS4wLjY7IERvbWFpbj1kZXYuYWNjZWxhLmNvbTsgUGF0aD0vOyBTZWN1cmU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Set-Cookie" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TEFURVNUX1NFU1NJT05fSUQ9dlprbHVkcWdqOFpqR00yb29qT05Fa09KOyBEb21haW49ZGV2LmFjY2VsYS5jb207IFBhdGg9LzsgU2VjdXJl</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Vy8iNDM2NTItMTQ5ODc0NzE0MDAwMCI=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VGh1LCAyOSBKdW4gMjAxNyAxNDozOTowMCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Type" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>dGV4dC9qYXZhc2NyaXB0</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Transfer-Encoding" index="11">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Y2h1bmtlZA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Encoding" index="12">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Vary" index="13">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="14">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW9uLCAyOCBBdWcgMjAxNyAxODozODowNyBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIE9LDQpTZXJ2ZXI6IEFwYWNoZS1Db3lvdGUvMS4xDQpDYWNoZS1Db250cm9sOiBwcml2YXRlDQpFeHBpcmVzOiBUaHUsIDAxIEphbiAxOTcwIDAwOjAwOjAwIFVUQw0KWC1YU1MtUHJvdGVjdGlvbjogMA0KU2V0LUNvb2tpZTogTEFTVEVTVF9SRVFVRVNUX1RJTUU9MTUwMzk0NTQ4Nzc5MTsgRG9tYWluPWRldi5hY2NlbGEuY29tOyBQYXRoPS87IFNlY3VyZQ0KU2V0LUNvb2tpZTogTEFURVNUX1dFQl9TRVJWRVI9MTAuMS4wLjY7IERvbWFpbj1kZXYuYWNjZWxhLmNvbTsgUGF0aD0vOyBTZWN1cmUNClNldC1Db29raWU6IExBVEVTVF9TRVNTSU9OX0lEPXZaa2x1ZHFnajhaakdNMm9vak9ORWtPSjsgRG9tYWluPWRldi5hY2NlbGEuY29tOyBQYXRoPS87IFNlY3VyZQ0KQWNjZXB0LVJhbmdlczogYnl0ZXMNCkVUYWc6IFcvIjQzNjUyLTE0OTg3NDcxNDAwMDAiDQpMYXN0LU1vZGlmaWVkOiBUaHUsIDI5IEp1biAyMDE3IDE0OjM5OjAwIEdNVA0KQ29udGVudC1UeXBlOiB0ZXh0L2phdmFzY3JpcHQNClRyYW5zZmVyLUVuY29kaW5nOiBjaHVua2VkDQpDb250ZW50LUVuY29kaW5nOiBnemlwDQpWYXJ5OiBBY2NlcHQtRW5jb2RpbmcNCkRhdGU6IE1vbiwgMjggQXVnIDIwMTcgMTg6Mzg6MDcgR01UDQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>LyoqDQogKiANCiAqIFYzNjAJIA0KICogRmlsZTogcG9wdXAuanMNCiAqIA0KICogQWNjZWxhLCBJbmMuDQogKiBDb3B5cmlnaHQgKEMpOiAyMDEwLTIwMTQNCiAqIA0KICogRGVzY3JpcHRpb246DQogKiA8PEdlbmVyYWwgZGVzY3JpcHRpb24gb2YgdGhlIGNsYXNzPj4NCiAqIA0KICogTm90ZXM6DQogKiA8PFNwZWNpZmljIHByb2dyYW1taW5nIG5vdGVzPj4NCiAqIA0KICogUmV2aXNpb24gSGlzdG9yeToNCiAqIDw8RGF0ZT4+LCA8PFdobz4+LCA8PFdoYXQ+Pg0KICogMjUvMTAvMjAxMCwgVG9ueSBMaSwgSW5pdGlhbCB2ZXJzaW9uDQogKg0KICovDQp0cnkNCnsNCglkb2N1bWVudC53cml0ZSgiPHNjcmlwdCBzcmM9Jy9wb3J0bGV0cy9pMThuIitwcm9maWxlLmxhbmd1YWdlKyIvZnJhbWV3b3JrL2luY2x1ZGVzL2phdmFzY3JpcHQvSTE4Ti5qcyc+PC9zY3JpcHQ+Iik7DQp9DQpjYXRjaChlKQ0Kew0KCWRvY3VtZW50LndyaXRlKCI8c2NyaXB0IHNyYz0nL3BvcnRsZXRzL2ZyYW1ld29yay9pbmNsdWRlcy9qYXZhc2NyaXB0L0kxOE4uanMnPjwvc2NyaXB0PiIpOw0KfQ0KDQovKg0KKiBnZXQgdGhlIHNraW5fbmFtZSANCioqLw0KDQp2YXIgU2tpbk5hbWUgPSAgZ2V0VGhlbWVGb2xkZXIoKTsNCnZhciB0ZW1wT25yZXNpemUgPSBudWxsOw0KdmFyIHRlbXBPbnNjcm9sbCA9IG51bGw7DQoNCnZhciBza2luUGF0aCA9ICIiOw0KdmFyIGNvbW1vblBhdGggPSAiIjsNCmlmKGRvY3VtZW50LmRpciAhPSAicnRsIikNCnsNCglza2luUGF0aCA9ICIvcG9ydGxldHMvaW1hZ2VzLyIrU2tpbk5hbWUrIi9pbWcvIjsNCgljb21tb25QYXRoID0gc2tpblBhdGg7DQoJZG9jdW1lbnQud3JpdGUoIjxsaW5rIGhyZWY9Jy9wb3J0bGV0cy9pbWFnZXMvIiArIFNraW5OYW1lICsgIi9wb3BVcC5jc3MnIHJlbD0nc3R5bGVzaGVldCc+PC9saW5rPiIpOw0KfQ0KZWxzZQ0Kew0KCQ0KCXNraW5QYXRoID0gIi9wb3J0bGV0cy9pMThuL2ltYWdlcy8iK1NraW5OYW1lKyIvaW1nLyI7DQoJY29tbW9uUGF0aCA9ICIvcG9ydGxldHMvaW1hZ2VzLyIrU2tpbk5hbWUrIi9pbWcvIjsNCglkb2N1bWVudC53cml0ZSgiPGxpbmsgaHJlZj0nL3BvcnRsZXRzL2kxOG4vYXJfYWUvaW1hZ2VzLyIgKyBTa2luTmFtZSArICIvcG9wVXAuY3NzJyByZWw9J3N0eWxlc2hlZXQnPjwvbGluaz4iKTsNCn0NCg0KDQppZiAoIUFycmF5LnByb3RvdHlwZS5wdXNoKSB7DQogICAgQXJyYXkucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbigpIHsNCiAgICAgICAgdmFyIHN0YXJ0TGVuZ3RoID0gdGhpcy5sZW5ndGg7DQogICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgYXJndW1lbnRzLmxlbmd0aDsgaisrKSB7DQogICAgICAgICAgICB0aGlzW3N0YXJ0TGVuZ3RoICsgal0gPSBhcmd1bWVudHNbal07DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHRoaXMubGVuZ3RoOw0KICAgIH0NCn07DQpmdW5jdGlvbiBHKCkgew0KICAgIHZhciBlbGVtZW50cyA9IG5ldyBBcnJheSgpOw0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIHZhciBlbGVtZW50ID0gYXJndW1lbnRzW2ldOw0KICAgICAgICBpZiAodHlwZW9mIGVsZW1lbnQgPT0gJ3N0cmluZycpIGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50KTsNCiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMSkgcmV0dXJuIGVsZW1lbnQ7DQogICAgICAgIGVsZW1lbnRzLnB1c2goZWxlbWVudCkNCiAgICB9Ow0KICAgIHJldHVybiBlbGVtZW50cw0KfTsNCmZ1bmN0aW9uIGdldFZhbHVlKHN0cikgew0KICAgIHZhciBuUmVzdWx0ID0gMDsNCiAgICBzd2l0Y2ggKHN0cikgew0KICAgIGNhc2UgInNjcm9sbFRvcCI6DQogICAgICAgIGlmICh0eXBlb2Yod2luZG93LnBhZ2VZT2Zmc2V0KSAhPSAndW5kZWZpbmVkJykgew0KICAgICAgICAgICAgblJlc3VsdCA9IHdpbmRvdy5wYWdlWU9mZnNldDsNCiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YoZG9jdW1lbnQuY29tcGF0TW9kZSkgIT0gJ3VuZGVmaW5lZCcgJiYgZG9jdW1lbnQuY29tcGF0TW9kZSAhPSAnQmFja0NvbXBhdCcpIHsNCiAgICAgICAgICAgIG5SZXN1bHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wOw0KICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZihkb2N1bWVudC5ib2R5KSAhPSAndW5kZWZpbmVkJykgew0KICAgICAgICAgICAgblJlc3VsdCA9IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOw0KICAgICAgICB9DQogICAgICAgIGJyZWFrOw0KICAgIGNhc2UgImNsaWVudFdpZHRoIjoNCiAgICAgICAgaWYgKHR5cGVvZihkb2N1bWVudC5jb21wYXRNb2RlKSAhPSAndW5kZWZpbmVkJyAmJiBkb2N1bWVudC5jb21wYXRNb2RlICE9ICdCYWNrQ29tcGF0Jykgew0KICAgICAgICAgICAgblJlc3VsdCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDsNCiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YoZG9jdW1lbnQuYm9keSkgIT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgICAgICAgIG5SZXN1bHQgPSBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoOw0KICAgICAgICB9DQogICAgICAgIGJyZWFrOw0KICAgIGNhc2UgImNsaWVudEhlaWdodCI6DQogICAgICAgIGlmICh0eXBlb2YoZG9jdW1lbnQuY29tcGF0TW9kZSkgIT0gJ3VuZGVmaW5lZCcgJiYgZG9jdW1lbnQuY29tcGF0TW9kZSAhPSAnQmFja0NvbXBhdCcpIHsNCiAgICAgICAgICAgIG5SZXN1bHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0Ow0KICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZihkb2N1bWVudC5ib2R5KSAhPSAndW5kZWZpbmVkJykgew0KICAgICAgICAgICAgblJlc3VsdCA9IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0Ow0KICAgICAgICB9DQogICAgICAgIGJyZWFrOw0KICAgIGNhc2UgImNsaWVudEhlaWdodCI6DQogICAgICAgIGlmICh0eXBlb2YoZG9jdW1lbnQuY29tcGF0TW9kZSkgIT0gJ3VuZGVmaW5lZCcgJiYgZG9jdW1lbnQuY29tcGF0TW9kZSAhPSAnQmFja0NvbXBhdCcpIHsNCiAgICAgICAgICAgIG5SZXN1bHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0Ow0KICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZihkb2N1bWVudC5ib2R5KSAhPSAndW5kZWZpbmVkJykgew0KICAgICAgICAgICAgblJlc3VsdCA9IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0Ow0KICAgICAgICB9DQogICAgICAgIGJyZWFrOw0KICAgIGNhc2UgInNjcm9sbFdpZHRoIjoNCiAgICAgICAgaWYgKHR5cGVvZihkb2N1bWVudC5jb21wYXRNb2RlKSAhPSAndW5kZWZpbmVkJyAmJiBkb2N1bWVudC5jb21wYXRNb2RlICE9ICdCYWNrQ29tcGF0Jykgew0KICAgICAgICAgICAgblJlc3VsdCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxXaWR0aDsNCiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YoZG9jdW1lbnQuYm9keSkgIT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgICAgICAgIG5SZXN1bHQgPSBkb2N1bWVudC5ib2R5LnNjcm9sbFdpZHRoOw0KICAgICAgICB9DQogICAgICAgIGJyZWFrOw0KICAgIGNhc2UgInNjcm9sbEhlaWdodCI6DQogICAgICAgIGlmICh0eXBlb2YoZG9jdW1lbnQuY29tcGF0TW9kZSkgIT0gJ3VuZGVmaW5lZCcgJiYgZG9jdW1lbnQuY29tcGF0TW9kZSAhPSAnQmFja0NvbXBhdCcpIHsNCiAgICAgICAgICAgIG5SZXN1bHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0Ow0KICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZihkb2N1bWVudC5ib2R5KSAhPSAndW5kZWZpbmVkJykgew0KICAgICAgICAgICAgblJlc3VsdCA9IGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0Ow0KICAgICAgICB9DQogICAgICAgIGJyZWFrOw0KICAgIGRlZmF1bHQ6DQogICAgICAgIGJyZWFrOw0KICAgIH0NCiAgICByZXR1cm4gblJlc3VsdDsNCn07DQpGdW5jdGlvbi5wcm90b3R5cGUuYmluZEFzRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKG9iamVjdCkgew0KICAgIHZhciBfX21ldGhvZCA9IHRoaXM7DQogICAgcmV0dXJuIGZ1bmN0aW9uKGV2ZW50KSB7DQogICAgICAgIF9fbWV0aG9kLmNhbGwob2JqZWN0LCBldmVudCB8fCB3aW5kb3cuZXZlbnQpDQogICAgfQ0KfTsNCk9iamVjdC5leHRlbmQgPSBmdW5jdGlvbihkZXN0aW5hdGlvbiwgc291cmNlKSB7DQogICAgZm9yIChwcm9wZXJ0eSBpbiBzb3VyY2UpIHsNCiAgICAgICAgZGVzdGluYXRpb25bcHJvcGVydHldID0gc291cmNlW3Byb3BlcnR5XQ0KICAgIH07DQogICAgcmV0dXJuIGRlc3RpbmF0aW9uDQp9Ow0KaWYgKCF3aW5kb3cuRXZlbnQpIHsNCiAgICB2YXIgRXZlbnQgPSBuZXcgT2JqZWN0KCk7DQp9Ow0KT2JqZWN0LmV4dGVuZChFdmVudCwgew0KICAgIG9ic2VydmVyczogZmFsc2UsDQogICAgZWxlbWVudDogZnVuY3Rpb24oZXZlbnQpIHsNCiAgICAgICAgcmV0dXJuIGV2ZW50LnRhcmdldCB8fCBldmVudC5zcmNFbGVtZW50Ow0KICAgIH0sDQogICAgaXNMZWZ0Q2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7DQogICAgICAgIHJldHVybiAoKChldmVudC53aGljaCkgJiYgKGV2ZW50LndoaWNoID09IDEpKSB8fCAoKGV2ZW50LmJ1dHRvbikgJiYgKGV2ZW50LmJ1dHRvbiA9PSAxKSkpOw0KICAgIH0sDQogICAgcG9pbnRlclg6IGZ1bmN0aW9uKGV2ZW50KSB7DQogICAgICAgIHJldHVybiBldmVudC5wYWdlWCB8fCAoZXZlbnQuY2xpZW50WCArIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQpKTsNCiAgICB9LA0KICAgIHBvaW50ZXJZOiBmdW5jdGlvbihldmVudCkgew0KICAgICAgICByZXR1cm4gZXZlbnQucGFnZVkgfHwgKGV2ZW50LmNsaWVudFkgKyAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCkpOw0KICAgIH0sDQogICAgc3RvcDogZnVuY3Rpb24oZXZlbnQpIHsNCiAgICAgICAgaWYgKGV2ZW50LnByZXZlbnREZWZhdWx0KSB7DQogICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBldmVudC5yZXR1cm5WYWx1ZSA9IGZhbHNlOw0KICAgICAgICAgICAgZXZlbnQuY2FuY2VsQnViYmxlID0gdHJ1ZTsNCiAgICAgICAgfTsNCiAgICB9LA0KICAgIGZpbmRFbGVtZW50OiBmdW5jdGlvbihldmVudCwgdGFnTmFtZSkgew0KICAgICAgICB2YXIgZWxlbWVudCA9IEV2ZW50LmVsZW1lbnQoZXZlbnQpOw0KICAgICAgICB3aGlsZSAoZWxlbWVudC5wYXJlbnROb2RlICYmICghZWxlbWVudC50YWdOYW1lIHx8IChlbGVtZW50LnRhZ05hbWUudG9VcHBlckNhc2UoKSAhPSB0YWdOYW1lLnRvVXBwZXJDYXNlKCkpKSkgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTsNCiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7DQogICAgfSwNCiAgICBfb2JzZXJ2ZUFuZENhY2hlOiBmdW5jdGlvbihlbGVtZW50LCBuYW1lLCBvYnNlcnZlciwgdXNlQ2FwdHVyZSkgew0KICAgICAgICBpZiAoIXRoaXMub2JzZXJ2ZXJzKSB0aGlzLm9ic2VydmVycyA9IFtdOw0KICAgICAgICBpZiAoZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKSB7DQogICAgICAgICAgICB0aGlzLm9ic2VydmVycy5wdXNoKFtlbGVtZW50LCBuYW1lLCBvYnNlcnZlciwgdXNlQ2FwdHVyZV0pOw0KICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKG5hbWUsIG9ic2VydmVyLCB1c2VDYXB0dXJlKTsNCiAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50LmF0dGFjaEV2ZW50KSB7DQogICAgICAgICAgICB0aGlzLm9ic2VydmVycy5wdXNoKFtlbGVtZW50LCBuYW1lLCBvYnNlcnZlciwgdXNlQ2FwdHVyZV0pOw0KICAgICAgICAgICAgZWxlbWVudC5hdHRhY2hFdmVudCgnb24nICsgbmFtZSwgb2JzZXJ2ZXIpOw0KICAgICAgICB9Ow0KICAgIH0sDQogICAgdW5sb2FkQ2FjaGU6IGZ1bmN0aW9uKCkgew0KICAgICAgICBpZiAoIUV2ZW50Lm9ic2VydmVycykgcmV0dXJuOw0KICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IEV2ZW50Lm9ic2VydmVycy5sZW5ndGg7IGorKykgew0KICAgICAgICAgICAgRXZlbnQuc3RvcE9ic2VydmluZy5hcHBseSh0aGlzLCBFdmVudC5vYnNlcnZlcnNbal0pOw0KICAgICAgICAgICAgRXZlbnQub2JzZXJ2ZXJzW2pdWzBdID0gbnVsbDsNCiAgICAgICAgfTsNCiAgICAgICAgRXZlbnQub2JzZXJ2ZXJzID0gZmFsc2U7DQogICAgfSwNCiAgICBvYnNlcnZlOiBmdW5jdGlvbihlbGVtZW50LCBuYW1lLCBvYnNlcnZlciwgdXNlQ2FwdHVyZSkgew0KICAgICAgICB2YXIgZWxlbWVudCA9IEcoZWxlbWVudCk7DQogICAgICAgIHVzZUNhcHR1cmUgPSB1c2VDYXB0dXJlIHx8IGZhbHNlOw0KICAgICAgICBpZiAobmFtZSA9PSAna2V5cHJlc3MnICYmIChuYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaCgvS29ucXVlcm9yfFNhZmFyaXxLSFRNTC8pIHx8IGVsZW1lbnQuYXR0YWNoRXZlbnQpKSBuYW1lID0gJ2tleWRvd24nOw0KICAgICAgICB0aGlzLl9vYnNlcnZlQW5kQ2FjaGUoZWxlbWVudCwgbmFtZSwgb2JzZXJ2ZXIsIHVzZUNhcHR1cmUpOw0KICAgIH0sDQogICAgc3RvcE9ic2VydmluZzogZnVuY3Rpb24oZWxlbWVudCwgbmFtZSwgb2JzZXJ2ZXIsIHVzZUNhcHR1cmUpIHsNCiAgICAgICAgdmFyIGVsZW1lbnQgPSBHKGVsZW1lbnQpOw0KICAgICAgICB1c2VDYXB0dXJlID0gdXNlQ2FwdHVyZSB8fCBmYWxzZTsNCiAgICAgICAgaWYgKG5hbWUgPT0gJ2tleXByZXNzJyAmJiAobmF2aWdhdG9yLmFwcFZlcnNpb24ubWF0Y2goL0tvbnF1ZXJvcnxTYWZhcml8S0hUTUwvKSB8fCBlbGVtZW50LmRldGFjaEV2ZW50KSkgbmFtZSA9ICdrZXlkb3duJzsNCiAgICAgICAgaWYgKGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcikgew0KICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKG5hbWUsIG9ic2VydmVyLCB1c2VDYXB0dXJlKTsNCiAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50LmRldGFjaEV2ZW50KSB7DQogICAgICAgICAgICBlbGVtZW50LmRldGFjaEV2ZW50KCdvbicgKyBuYW1lLCBvYnNlcnZlcik7DQogICAgICAgIH07DQogICAgfQ0KfSk7DQpFdmVudC5vYnNlcnZlKHdpbmRvdywgJ3VubG9hZCcsIEV2ZW50LnVubG9hZENhY2hlLCBmYWxzZSk7DQp2YXIgQ2xhc3MgPSBmdW5jdGlvbigpIHsNCiAgICB2YXIgX2NsYXNzID0gZnVuY3Rpb24oKSB7DQogICAgICAgIHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOw0KICAgIH07DQogICAgZm9yIChqID0gMDsgaiA8IGFyZ3VtZW50cy5sZW5ndGg7IGorKykgew0KICAgICAgICBzdXBlckNsYXNzID0gYXJndW1lbnRzW2pdOw0KICAgICAgICBmb3IgKG1lbWJlciBpbiBzdXBlckNsYXNzLnByb3RvdHlwZSkgew0KICAgICAgICAgICAgX2NsYXNzLnByb3RvdHlwZVttZW1iZXJdID0gc3VwZXJDbGFzcy5wcm90b3R5cGVbbWVtYmVyXTsNCiAgICAgICAgfTsNCiAgICB9Ow0KICAgIF9jbGFzcy5jaGlsZCA9IGZ1bmN0aW9uKCkgew0KICAgICAgICByZXR1cm4gbmV3IENsYXNzKHRoaXMpOw0KICAgIH07DQogICAgX2NsYXNzLmV4dGVuZCA9IGZ1bmN0aW9uKGYpIHsNCiAgICAgICAgZm9yIChwcm9wZXJ0eSBpbiBmKSB7DQogICAgICAgICAgICBfY2xhc3MucHJvdG90eXBlW3Byb3BlcnR5XSA9IGZbcHJvcGVydHldOw0KICAgICAgICB9Ow0KICAgIH07DQogICAgcmV0dXJuIF9jbGFzczsNCn07DQpmdW5jdGlvbiBzcGFjZUZvclBvcChmbGFnKSB7DQogICAgaWYgKGZsYWcgPT0gImJlZ2luIikgew0KICAgICAgICB2YXIgZWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZ0Iik7DQogICAgICAgIGlmICh0eXBlb2YoZWxlKSAhPSAidW5kZWZpbmVkIiAmJiBlbGUgIT0gbnVsbCkgZWxlLmlkID0gImZ0X3BvcHVwIjsNCiAgICAgICAgZWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInVzcmJhciIpOw0KICAgICAgICBpZiAodHlwZW9mKGVsZSkgIT0gInVuZGVmaW5lZCIgJiYgZWxlICE9IG51bGwpIGVsZS5pZCA9ICJ1c3JiYXJfcG9wdXAiOw0KICAgIH0gZWxzZSBpZiAoZmxhZyA9PSAiZW5kIikgew0KICAgICAgICB2YXIgZWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZ0X3BvcHVwIik7DQogICAgICAgIGlmICh0eXBlb2YoZWxlKSAhPSAidW5kZWZpbmVkIiAmJiBlbGUgIT0gbnVsbCkgZWxlLmlkID0gImZ0IjsNCiAgICAgICAgZWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInVzcmJhcl9wb3B1cCIpOw0KICAgICAgICBpZiAodHlwZW9mKGVsZSkgIT0gInVuZGVmaW5lZCIgJiYgZWxlICE9IG51bGwpIGVsZS5pZCA9ICJ1c3JiYXIiOw0KICAgIH07DQp9Ow0KdmFyIFBvcHVwID0gbmV3IENsYXNzKCk7DQpQb3B1cC5wcm90b3R5cGUgPSB7DQogICAgaWZyYW1lSWROYW1lOiAnaWZyX3BvcHVwJywNCiAgICBpbml0aWFsaXplOiBmdW5jdGlvbihjb25maWcpIHsNCgkJLy9JdCBpcyByZXByZXNlbnQgd2hpY2ggb2JqZWN0IHRyaWdnZXIgdGhlIGV2ZW50DQoJCXRoaXMudHJpZ2dlck9iaiA9IA0KCQl7DQoJCQlvZmZzZXRMOiIiLA0KCQkJb2Zmc2V0VDoiIiwNCgkJCW9ialdpZHRoOiIiLA0KCQkJb2JqSGVpZ2h0OiIiDQoJCX0sDQogICAgICAgIHRoaXMuY29uZmlnID0gT2JqZWN0LmV4dGVuZCh7DQogICAgICAgICAgICBjb250ZW50VHlwZTogMSwNCiAgICAgICAgICAgIGlzSGF2ZVRpdGxlOiB0cnVlLA0KICAgICAgICAgICAgc2Nyb2xsVHlwZTogJ25vJywNCiAgICAgICAgICAgIGlzQmFja2dyb3VuZENhbkNsaWNrOiBmYWxzZSwNCiAgICAgICAgICAgIGlzU3VwcG9ydERyYWdpbmc6IHRydWUsDQogICAgICAgICAgICBpc1Nob3dTaGFkb3c6IHRydWUsDQogICAgICAgICAgICBpc1JlbG9hZE9uQ2xvc2U6IHRydWUsDQogICAgICAgICAgICB3aWR0aDogNDAwLA0KICAgICAgICAgICAgaGVpZ2h0OiAzMDANCiAgICAgICAgICAgIA0KICAgICAgICB9LA0KICAgICAgICBjb25maWcgfHwge30pOw0KICAgICAgICB0aGlzLmluZm8gPSB7DQogICAgICAgICAgICBzaGFkb3dXaWR0aDogNCwNCiAgICAgICAgICAgIHRpdGxlOiAiIiwNCiAgICAgICAgICAgIGNvbnRlbnRVcmw6ICIiLA0KICAgICAgICAgICAgY29udGVudEh0bWw6ICIiLA0KICAgICAgICAgICAgY2FsbEJhY2s6IG51bGwsDQogICAgICAgICAgICBwYXJhbWV0ZXI6IG51bGwsDQogICAgICAgICAgICBjb25maXJtQ29uOiAiIiwNCiAgICAgICAgICAgIGFsZXJ0Q29uOiAiIiwNCiAgICAgICAgICAgIHNvbWVIaWRkZW5UYWc6ICJvYmplY3QsZW1iZWQiLA0KICAgICAgICAgICAgc29tZUhpZGRlbkVsZTogIiIsDQogICAgICAgICAgICBvdmVybGF5OiAwLA0KICAgICAgICAgICAgY292ZXJPcGFjaXR5OiA0MCwNCiAgICAgICAgICAgIGJ0bllFU0xhYmVsOm51bGwsDQogICAgICAgICAgICBidG5OT0xhYmVsOm51bGwsDQogICAgICAgICAgICBjYWxsRG9jdW1lbnQ6bnVsbCwNCiAgICAgICAgICAgIGN1c3RvbU1hcmdpbjoiMCAxMHB4IDAgMTBweCINCiAgICAgICAgfTsNCiAgICAgICAgdGhpcy5jb2xvciA9IHsvL2NvbG9yIGluaXQNCiAgICAgICAgICAgIGNDb2xvcjogIiNERkRGREYiLA0KICAgICAgICAgICAgYkNvbG9yOiAiI0RGREZERiIsDQogICAgICAgICAgICB0Q29sb3I6ICIjREZERkRGIiwNCiAgICAgICAgICAgIHdDb2xvcjogImJsYWNrIg0KICAgICAgICB9Ow0KICAgICAgICB0aGlzLmRyb3BDbGFzcyA9IG51bGw7DQogICAgICAgIHRoaXMuc29tZVRvSGlkZGVuID0gW107DQogICAgICAgIGlmICghdGhpcy5jb25maWcuaXNIYXZlVGl0bGUpIHsNCiAgICAgICAgICAgIHRoaXMuY29uZmlnLmlzU3VwcG9ydERyYWdpbmcgPSBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmluaUJ1aWxkKCk7DQogICAgfSwNCiAgICBzZXRDb250ZW50OiBmdW5jdGlvbihhcnJ0LCB2YWwpIHsNCiAgICAgICAgaWYgKHZhbCAhPSAnJykgew0KICAgICAgICAgICAgc3dpdGNoIChhcnJ0KSB7DQogICAgICAgICAgICBjYXNlICd3aWR0aCc6DQogICAgICAgICAgICAJdGhpcy5jb25maWcud2lkdGggPSB2YWwgKyAzMDsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgJ2hlaWdodCc6DQogICAgICAgICAgICAgICAgdGhpcy5jb25maWcuaGVpZ2h0ID0gdmFsOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAnc2Nyb2xsVHlwZSc6DQogICAgICAgICAgICAgICAgdGhpcy5jb25maWcuc2Nyb2xsVHlwZSA9IHZhbDsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgJ2NvbnRlbnRUeXBlJzoNCiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5jb250ZW50VHlwZSA9IHZhbDsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgJ3RpdGxlJzoNCiAgICAgICAgICAgICAgICB0aGlzLmluZm8udGl0bGUgPSB2YWw7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlICdjb250ZW50VXJsJzoNCiAgICAgICAgICAgICAgICB0aGlzLmluZm8uY29udGVudFVybCA9IHZhbDsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgJ2NvbnRlbnRIdG1sJzoNCiAgICAgICAgICAgICAgICB0aGlzLmluZm8uY29udGVudEh0bWwgPSB2YWw7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlICdjYWxsQmFjayc6DQogICAgICAgICAgICAgICAgdGhpcy5pbmZvLmNhbGxCYWNrID0gdmFsOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAncGFyYW1ldGVyJzoNCiAgICAgICAgICAgICAgICB0aGlzLmluZm8ucGFyYW1ldGVyID0gdmFsOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAnY29uZmlybUNvbic6DQogICAgICAgICAgICAgICAgdGhpcy5pbmZvLmNvbmZpcm1Db24gPSB2YWw7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlICdhbGVydENvbic6DQogICAgICAgICAgICAgICAgdGhpcy5pbmZvLmFsZXJ0Q29uID0gdmFsOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAnc29tZUhpZGRlblRhZyc6DQogICAgICAgICAgICAgICAgdGhpcy5pbmZvLnNvbWVIaWRkZW5UYWcgPSB2YWw7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlICdzb21lSGlkZGVuRWxlJzoNCiAgICAgICAgICAgICAgICB0aGlzLmluZm8uc29tZUhpZGRlbkVsZSA9IHZhbDsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgJ2J0bk5PTGFiZWwnOg0KICAgICAgICAgICAgICAgIHRoaXMuaW5mby5idG5OT0xhYmVsID0gdmFsOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAnYnRuWUVTTGFiZWwnOg0KICAgICAgICAgICAgICAgIHRoaXMuaW5mby5idG5ZRVNMYWJlbCA9IHZhbDsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgJ3NpZGVMZWZ0JzoNCiAgICAgICAgICAgICAgICB0aGlzLmluZm8uc2lkZUxlZnQgPSB2YWw7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlICdzaWRlVG9wJzoNCiAgICAgICAgICAgICAgICB0aGlzLmluZm8uc2lkZUxlZnQgPSB2YWw7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlICdjYWxsRG9jdW1lbnQnOg0KICAgICAgICAgICAgICAgIHRoaXMuaW5mby5jYWxsRG9jdW1lbnQgPSB2YWw7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlICdvdmVybGF5JzoNCiAgICAgICAgICAgICAgICB0aGlzLmluZm8ub3ZlcmxheSA9IHZhbDsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgJ2N1c3RvbU1hcmdpbic6DQogICAgICAgICAgICAgICAgdGhpcy5pbmZvLmN1c3RvbU1hcmdpbiA9IHZhbDsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgJ2Nsb3NlQnRuJzoNCiAgICAgICAgICAgICAgICB0aGlzLmluZm8uY2xvc2VCdG4gPSB2YWw7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlICdjbG9zZUJ0bl9ob3Zlcic6DQogICAgICAgICAgICAgICAgdGhpcy5pbmZvLmNsb3NlQnRuX2hvdmVyID0gdmFsOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAnY2FsbEJhY2tBZnRlckNsb3NlJzoNCiAgICAgICAgICAgICAgICB0aGlzLmluZm8uY2FsbEJhY2tBZnRlckNsb3NlID0gdmFsOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgfTsNCiAgICAgICAgfTsNCiAgICB9LA0KICAgIC8vSW5pdGlhbCB0aGUgdHJpZ2dlciBvYmplY3QgcG9zaXRpb24sd2lkdGgsaGVpZ2h0DQogICAgaW5pdFRyaWdnZXJPYmpBdHRyOmZ1bmN0aW9uKHgseSxvZmZzZXRXaWR0aCxvZmZzZXRIZWlnaHQpDQogICAgew0KICAgIAl0aGlzLnRyaWdnZXJPYmoub2Zmc2V0TCA9IHg7DQogICAgCXRoaXMudHJpZ2dlck9iai5vZmZzZXRUID0geTsNCiAgICAJdGhpcy50cmlnZ2VyT2JqLm9ialdpZHRoID0gb2Zmc2V0V2lkdGg7DQogICAgCXRoaXMudHJpZ2dlck9iai5vYmpIZWlnaHQ9IG9mZnNldEhlaWdodDsNCiAgICB9LA0KICAgIA0KICAgIGluaUJ1aWxkOiBmdW5jdGlvbigpIHsNCiAgICAgICAgRygnZGlhbG9nQ2FzZScpID8gRygnZGlhbG9nQ2FzZScpLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoRygnZGlhbG9nQ2FzZScpKSA6IGZ1bmN0aW9uKCkge307DQogICAgICAgIHZhciBvRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOw0KICAgICAgICBvRGl2LmlkID0gJ2RpYWxvZ0Nhc2UnOw0KICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG9EaXYpOw0KICAgIH0sDQogICAgX3NldENzcyA6IGZ1bmN0aW9uKGVsLCBhcmdDc3NOYW1lKSANCiAgICB7DQogICAgCWVsLmNsYXNzTmFtZSA9IGFyZ0Nzc05hbWU7DQoJfSwNCglfc2V0U3R5bGUgOiBmdW5jdGlvbihlbCwgY3NzQ29udGVudCkgDQoJew0KCQlpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNU0lFIik+MCkgDQoJCXsNCgkJCWVsLnN0eWxlLmNzc1RleHQgPSBjc3NDb250ZW50Ow0KCQl9IA0KCQllbHNlIA0KCQl7DQoJCQllbC5zZXRBdHRyaWJ1dGUoInN0eWxlIixjc3NDb250ZW50KSA7IA0KCQl9DQoJfSwNCgljcmVhdGVUaXRsZUNvbnRhaW5lcjpmdW5jdGlvbigpDQoJew0KCQkgCXZhciB0aXRsZUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRhYmxlIik7DQoJCSAgICB0aGlzLl9zZXRDc3ModGl0bGVDb250YWluZXIsInRpdGxlQ29udGFpbmVyIik7DQoJCSAgICANCgkJICAgIHZhciB0aXRsZUNvbnRhaW5lclRSID0gdGl0bGVDb250YWluZXIuaW5zZXJ0Um93KCk7DQoJCSAgICANCgkJICAgIA0KCQkgICAgdmFyIGxlZnRUaXRsZUNvbnRpbmVyU3BhY2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZCIpOw0KCQkgICAgbGVmdFRpdGxlQ29udGluZXJTcGFjZS5oZWlnaHQgPSAiMTgiOw0KCQkgICAgbGVmdFRpdGxlQ29udGluZXJTcGFjZS53aWR0aCAgPSAiNiI7DQoJCSAgICANCgkJICAgIHRpdGxlQ29udGFpbmVyVFIuYXBwZW5kQ2hpbGQobGVmdFRpdGxlQ29udGluZXJTcGFjZSk7DQoJCSAgDQoJCSAgICB2YXIgdGl0bGVCYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZCIpOw0KCQkgICAgdGl0bGVCYXIubm9XcmFwID0gdHJ1ZTsNCgkJICAgIHRpdGxlQmFyLmlkID0gImRpYWxvZ0JveFRpdGxlIjsNCgkJICANCgkJICAgIHZhciB0aXRsZVRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7DQoJCSAgICB0aXRsZVRleHQuYWx0ID0gQmFzZUpTLmh0bWxEZWNvZGUodGhpcy5pbmZvLnRpdGxlKTsNCgkJICAgIHRpdGxlVGV4dC5pbm5lckhUTUwgPSBCYXNlSlMuaHRtbERlY29kZSh0aGlzLmluZm8udGl0bGUpOw0KCQkgICAgdGl0bGVCYXIuYXBwZW5kQ2hpbGQodGl0bGVUZXh0KTsNCgkJICAgIHRpdGxlQmFyLnN0eWxlLndpZHRoPSI4MCUiOw0KCQkgICAgdGl0bGVCYXIuY2xhc3NOYW1lID0gIkFsaWduTGVmdCI7DQoJCSAgICB0aXRsZUNvbnRhaW5lclRSLmFwcGVuZENoaWxkKHRpdGxlQmFyKTsNCgkJDQoJCSAgIA0KCQkgICAgdmFyIG1pZGRsZVRpdGxlQ29udGluZXJTcGFjZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRkIik7DQoJCSAgICBtaWRkbGVUaXRsZUNvbnRpbmVyU3BhY2Uud2lkdGggPSAiMTAlIjsNCgkJICAgIHRpdGxlQ29udGFpbmVyVFIuYXBwZW5kQ2hpbGQobWlkZGxlVGl0bGVDb250aW5lclNwYWNlKTsNCgkJICAgIA0KCQkgICAgdmFyIGNsb3NlU2VjdGlvbkJhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRkIik7DQoJCSAgICBjbG9zZVNlY3Rpb25CYXIuaWQgPSAiZGlhbG9nQ2xvc2UiOw0KCQkgICAgY2xvc2VTZWN0aW9uQmFyLmNsYXNzTmFtZSA9ICJBbGlnblJpZ250IjsNCgkJICAgIGNsb3NlU2VjdGlvbkJhci5zdHlsZS53aWR0aCA9ICIxMCUiOw0KCQkgICAgY2xvc2VTZWN0aW9uQmFyLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlQ2xvc2VTZWN0aW9uKCkpOw0KCQkgICAgdGl0bGVDb250YWluZXJUUi5hcHBlbmRDaGlsZChjbG9zZVNlY3Rpb25CYXIpOw0KCQkgICANCgkJICAgIHZhciByaWdodFRpdGxlQ29udGluZXJTcGFjZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRkIik7DQoJCSAgICByaWdodFRpdGxlQ29udGluZXJTcGFjZS53aWR0aCA9ICIxIjsNCgkJICAgIHRpdGxlQ29udGFpbmVyVFIuYXBwZW5kQ2hpbGQocmlnaHRUaXRsZUNvbnRpbmVyU3BhY2UpOw0KCQkgICAgcmV0dXJuIHRpdGxlQ29udGFpbmVyOw0KCX0sDQoJY3JlYXRlQ2xvc2VTZWN0aW9uOmZ1bmN0aW9uKCkNCgl7DQoJCXZhciBjbG9zZUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KCQljbG9zZUNvbnRhaW5lci5pZCA9ICJjbG9zZUNvbnRhaW5lciI7DQoJCXZhciBjYW5jZWxMYWJlbCA9IGdldFRleHRsYWJsZSgiZXJyb3JfanNfbGVmdHRyZWVfY2FuY2VsIik7DQoJCWlmKHR5cGVvZihnbG9iYWxDYW5jZWxMYWJlbCkgIT0gJ3VuZGVmaW5lZCcgJiYgZ2xvYmFsQ2FuY2VsTGFiZWwgIT0gJ251bGwnICYmIGdsb2JhbENhbmNlbExhYmVsICE9ICIiKQ0KCQl7DQoJCQljYW5jZWxMYWJlbCA9IGdsb2JhbENhbmNlbExhYmVsOw0KCQl9DQoJCQ0KCSAgICB2YXIgY29sc2VIcmVmID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOw0KCSAgICBjb2xzZUhyZWYuaHJlZiA9ICJqYXZhc2NyaXB0OnZvaWQoMCkiOw0KCSAgICBjb2xzZUhyZWYuaWQgPSAiY2xvc2VIcmVmIjsNCgkgICAgY29sc2VIcmVmLmFsdCA9IGNhbmNlbExhYmVsOw0KCSAgICB0aGlzLl9zZXRTdHlsZShjb2xzZUhyZWYsInRleHQtZGVjb3JhdGlvbjogbm9uZTsiKTsNCgkgICAgDQoJICAgIA0KCSAgICB2YXIgY2xvc2VCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOw0KCSAgICBjbG9zZUJ1dHRvbi5pZCA9ICJkaWFsb2dCb3hDbG9zZSI7DQoJICAgIGNsb3NlQnV0dG9uLnR5cGUgPSAiaW1hZ2UiOw0KCSAgICBjbG9zZUJ1dHRvbi5hbHQgPSBjYW5jZWxMYWJlbDsNCgkgICAgY2xvc2VCdXR0b24uYm9yZGVyPSIwIjsgDQoJICAgIGNsb3NlQnV0dG9uLnNyYyA9IHRoaXMuaW5mby5jbG9zZUJ0bjsNCgkgICAgY2xvc2VCdXR0b24uaGVpZ2h0ID0gMTg7DQoJICAgIGNvbHNlSHJlZi5hcHBlbmRDaGlsZChjbG9zZUJ1dHRvbik7DQoJICAgIA0KCSAgICBjbG9zZUNvbnRhaW5lci5hcHBlbmRDaGlsZChjb2xzZUhyZWYpOw0KCSAgICByZXR1cm4gY2xvc2VDb250YWluZXI7DQoJfSwNCgljcmVhdGVCb2R5Q29udGFpbmVyOmZ1bmN0aW9uKGJvZHlDb250YWluZXIpDQoJew0KCQl2YXIgYm9yZGVySGVpZ2h0ID0gdGhpcy5jb25maWcuaGVpZ2h0ICsgNjsNCgkgICAgdmFyIGJvZHlDb250YWluZXJDb250ZW50Um93ID0gYm9keUNvbnRhaW5lci5pbnNlcnRSb3coKTsNCgkgICAgYm9keUNvbnRhaW5lckNvbnRlbnRSb3cudkFsaWduID0gInRvcCI7DQoJICAgIGJvZHlDb250YWluZXJDb250ZW50Um93LmhlaWdodCA9IHRoaXMuY29uZmlnLmhlaWdodCArICJweCI7IA0KCSAgICANCgkgICAgdmFyIGxlZnRMaW5lVEQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZCIpOw0KCSAgICB2YXIgbGVmdExpbmVJbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KCSAgICBsZWZ0TGluZUltYWdlLnN0eWxlLmhlaWdodCA9IGJvcmRlckhlaWdodCArICJweCI7IA0KCSAgICB0aGlzLl9zZXRDc3MobGVmdExpbmVJbWFnZSwibGVmdExpbmVJbWFnZSIpOw0KCSAgICB2YXIgbGVmdExpbmVTcGFjZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KCSAgICBsZWZ0TGluZVNwYWNlLnN0eWxlLmhlaWdodCA9IGJvcmRlckhlaWdodCArICJweCI7IA0KCSAgICB0aGlzLl9zZXRDc3MobGVmdExpbmVTcGFjZSwibGVmdExpbmVTcGFjZSIpOw0KDQoJICAgIHZhciBtaWRkZWxDb250ZW50VEQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZCIpOw0KCSAgICBtaWRkZWxDb250ZW50VEQuaWQgPSAiZGlhbG9nQm9keSI7DQoJICAgIHRoaXMuX3NldENzcyhtaWRkZWxDb250ZW50VEQsIm1pZGRlbENvbnRlbnRURCIpOw0KCSAgICANCgkgICAgdmFyIHJpZ2h0TGluZVREID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGQiKTsNCgkgICAgdmFyIHJpZ2h0TGluZVNwYWNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7DQoJICAgIHRoaXMuX3NldENzcyhyaWdodExpbmVTcGFjZSwicmlnaHRMaW5lU3BhY2UiKTsNCgkgICAgcmlnaHRMaW5lU3BhY2Uuc3R5bGUud2lkdGggPSAnNnB4JzsNCgkgICAgcmlnaHRMaW5lU3BhY2Uuc3R5bGUuaGVpZ2h0ID0gYm9yZGVySGVpZ2h0ICsgInB4IjsgDQoJICAgIHZhciByaWdodExpbmVJbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KCSAgICB0aGlzLl9zZXRDc3MocmlnaHRMaW5lSW1hZ2UsInJpZ2h0TGluZUltYWdlIik7DQoJICAgIHJpZ2h0TGluZUltYWdlLnN0eWxlLndpZHRoID0gJzlweCc7DQoJICAgIHJpZ2h0TGluZUltYWdlLnN0eWxlLmhlaWdodCA9IGJvcmRlckhlaWdodCArICJweCI7IA0KCSAgICBsZWZ0TGluZVRELmFwcGVuZENoaWxkKGxlZnRMaW5lSW1hZ2UpOw0KCSAgICBsZWZ0TGluZVRELmFwcGVuZENoaWxkKGxlZnRMaW5lU3BhY2UpOw0KCSAgICByaWdodExpbmVURC5hcHBlbmRDaGlsZChyaWdodExpbmVTcGFjZSk7DQogICAgCXJpZ2h0TGluZVRELmFwcGVuZENoaWxkKHJpZ2h0TGluZUltYWdlKTsNCgkgICAgaWYoZG9jdW1lbnQuZGlyICE9ICdydGwnKQ0KCSAgICB7DQoJICAgIAlib2R5Q29udGFpbmVyQ29udGVudFJvdy5hcHBlbmRDaGlsZChsZWZ0TGluZVREKTsNCgkgICAgCWJvZHlDb250YWluZXJDb250ZW50Um93LmFwcGVuZENoaWxkKG1pZGRlbENvbnRlbnRURCk7DQoJICAgIAlib2R5Q29udGFpbmVyQ29udGVudFJvdy5hcHBlbmRDaGlsZChyaWdodExpbmVURCk7DQoJICAgIH0NCgkgICAgZWxzZQ0KCSAgICB7DQoJICAgIAlib2R5Q29udGFpbmVyQ29udGVudFJvdy5hcHBlbmRDaGlsZChyaWdodExpbmVURCk7DQoJICAgIAlib2R5Q29udGFpbmVyQ29udGVudFJvdy5hcHBlbmRDaGlsZChtaWRkZWxDb250ZW50VEQpOw0KCSAgICAJYm9keUNvbnRhaW5lckNvbnRlbnRSb3cuYXBwZW5kQ2hpbGQobGVmdExpbmVURCk7DQoJICAgIAkNCgkgICAgfQ0KCX0sDQoJY3JlYXRlQm9keUNvbnRhaW5lclRvcDpmdW5jdGlvbihib2R5Q29udGFpbmVyKQ0KCXsNCgkgICAgdmFyIGJvZHlDb250YWluZXJUb3BSb3cgPSBib2R5Q29udGFpbmVyLmluc2VydFJvdygpOw0KCSAgICBib2R5Q29udGFpbmVyVG9wUm93LmhlaWdodCA9ICIzMCI7DQoJICAgIGJvZHlDb250YWluZXJUb3BSb3cuaWQgPSAidGl0bGVCYXJDb250YWluZXIiOw0KCSAgICANCgkgICAgdmFyIGxlZnRUb3BDb3JuZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZCIpOw0KCSAgICBsZWZ0VG9wQ29ybmVyLndpZHRoID0gIjE1IjsNCgkgICAgYm9keUNvbnRhaW5lclRvcFJvdy5hcHBlbmRDaGlsZChsZWZ0VG9wQ29ybmVyKTsNCgkgICAgDQoJICAgIHRoaXMuX3NldENzcyhsZWZ0VG9wQ29ybmVyLCJsZWZ0VG9wQ29ybmVyIik7DQoJICAgIA0KCSAgICB2YXIgbWlkZGxlVG9wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGQiKTsNCgkgICAgdGhpcy5fc2V0Q3NzKG1pZGRsZVRvcCwibWlkZGxlVG9wIik7DQoJICAgIG1pZGRsZVRvcC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVRpdGxlQ29udGFpbmVyKCkpOw0KCSAgICBib2R5Q29udGFpbmVyVG9wUm93LmFwcGVuZENoaWxkKG1pZGRsZVRvcCk7DQoJICAgIA0KCSAgICB2YXIgcmlnaHRUb3BDb3JuZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZCIpOw0KCSAgICB0aGlzLl9zZXRDc3MocmlnaHRUb3BDb3JuZXIsInJpZ2h0VG9wQ29ybmVyIik7DQoJICAgIGJvZHlDb250YWluZXJUb3BSb3cuYXBwZW5kQ2hpbGQocmlnaHRUb3BDb3JuZXIpOw0KCX0sDQoJY3JlYXRlQm9keUNvbnRhaW5lckJvdHRvbSA6IGZ1bmN0aW9uIChib2R5Q29udGFpbmVyKQ0KCXsNCgkJdmFyIGJvZHlDb250YWluZXJCb3R0b20gPSBib2R5Q29udGFpbmVyLmluc2VydFJvdygpOw0KCQl2YXIgbGVmdEJvdHRvbUNvcm5lciA9ICBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZCIpOw0KCQlsZWZ0Qm90dG9tQ29ybmVyLnN0eWxlLmhlaWdodCA9ICIxN3B4IjsNCgkJdGhpcy5fc2V0Q3NzKGxlZnRCb3R0b21Db3JuZXIsImxlZnRCb3R0b21Db3JuZXIiKTsNCgkJdmFyIG1pZGRlbEJvdHRvbUNvcm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRkIik7DQoJCW1pZGRlbEJvdHRvbUNvcm5lci5zdHlsZS5oZWlnaHQgPSAiMTdweCI7DQoJCXRoaXMuX3NldENzcyhtaWRkZWxCb3R0b21Db3JuZXIsIm1pZGRlbEJvdHRvbUNvcm5lciIpOw0KCQl2YXIgcmluZ3RCb3R0b21Db3JuZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZCIpOw0KCQlyaW5ndEJvdHRvbUNvcm5lci5zdHlsZS5oZWlnaHQgPSAiMTdweCI7DQoJCXRoaXMuX3NldENzcyhyaW5ndEJvdHRvbUNvcm5lciwicmluZ3RCb3R0b21Db3JuZXIiKTsNCgkJYm9keUNvbnRhaW5lckJvdHRvbS5hcHBlbmRDaGlsZChsZWZ0Qm90dG9tQ29ybmVyKTsNCgkJYm9keUNvbnRhaW5lckJvdHRvbS5hcHBlbmRDaGlsZChtaWRkZWxCb3R0b21Db3JuZXIpOw0KCQlib2R5Q29udGFpbmVyQm90dG9tLmFwcGVuZENoaWxkKHJpbmd0Qm90dG9tQ29ybmVyKTsNCgl9LA0KCWNyZWF0ZUNvbnRhaW5lckZvck9sZFVJOmZ1bmN0aW9uKHBhdGgsY2FuY2VsTGFiZWwsYmFzZXVybCkNCgl7DQoJICAgICAvL1NldCBjb250ZW50IGZvciBUaXRsZSBESVYNCgkJDQoJICAgICB2YXIgY29udGVudCA9ICc8dGFibGUgd2lkdGg9IjEwMCUiIGJvcmRlcj0iMCIgY2VsbHBhZGRpbmc9IjAiIGNlbGxzcGFjaW5nPSIwIiBiZ2NvbG9yPSInICsgdGhpcy5jb2xvci5iQ29sb3IgKyAnIj4nOw0KCSAgICAgdmFyIGNsb3NlU2VjdGlvbj0gJzxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSIgaWQ9ImNsb3NlSHJlZiIgc3R5bGU9IlRFWFQtREVDT1JBVElPTjpub25lIiBhbHQ9IicrIGNhbmNlbExhYmVsKyciID4nKw0KCQkgICAnPGlucHV0ICB0eXBlPSJpbWFnZSIgaWQ9ImRpYWxvZ0JveENsb3NlIiAgIHNyYz0iJyArIHBhdGggKyAnIiBib3JkZXI9IjAiIGFsaWduPSJhYnNtaWRkbGUiIC8+JysNCgkJICAgJzwvYT4nOwkgICAgIA0KCSAgICAgDQoJICAgICBpZiAodGhpcy5jb25maWcuaXNIYXZlVGl0bGUpDQoJICAgICB7DQoJICAgIAkgY29udGVudCArPSAJJzx0ciBoZWlnaHQ9IjMwIiBpZD0idGl0bGVCYXJDb250YWluZXIiIHN0eWxlPSJiYWNrZ3JvdW5kOiB1cmwoJytiYXNldXJsICsnYmdfdGl0bGViYXIucG5nKSIgYmdjb2xvcj0iJyArIHRoaXMuY29sb3IudENvbG9yICsgJyI+JysNCgkgICAgICAgICAgICAJCQknPHRkPicrDQoJCSAgICAgICAgICAgIAkJCSc8dGFibGUgc3R5bGU9Ii1tb3otdXNlci1zZWxlY3Q6bm9uZTtoZWlnaHQ6MjRweDt0YWJsZS1sYXlvdXQ6Zml4ZWQ7IiB3aWR0aD0iMTAwJSIgYm9yZGVyPSIwIiBjZWxscGFkZGluZz0iMCIgY2VsbHNwYWNpbmc9IjAiID4nKw0KCQkJICAgICAgICAgICAgCQkJJzx0cj4nICsgDQoJCQkgICAgICAgICAgICAJCQkgCSc8dGQgd2lkdGg9IjYiIGhlaWdodD0iMTgiPjwvdGQ+JysNCgkJCQkgICAgICAgICAgICAJCQkgCSc8dGQgaWQ9ImRpYWxvZ0JveFRpdGxlIiB3aWR0aD04MCUgc3R5bGU9IndoaXRlLXNwYWNlOiBub3dyYXA7b3ZlcmZsb3c6aGlkZGVuO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7Y29sb3I6IzYzNjM2Mztmb250LXNpemU6MTJweDtmb250LXdlaWdodDpib2xkO3BhZGRpbmctdG9wOjRweDsiIG5vd3JhcD4nKw0KCQkJCSAgICAgICAgICAgIAkJCSAJJzxzcGFuIGFsdD0nK0Jhc2VKUy5odG1sRGVjb2RlKHRoaXMuaW5mby50aXRsZSkrJz4nICsgQmFzZUpTLmh0bWxEZWNvZGUodGhpcy5pbmZvLnRpdGxlKSArICc8L3NwYW4+JysNCgkJCQkgICAgICAgICAgICAJCQkgCSc8L3RkPicrDQoJCQkgICAgICAgICAgICAJCQkgCSc8dGQgd2lkdGg9MTAlPjwvdGQ+JyArIA0KCQkJICAgICAgICAgICAgCQkJIAknPHRkIGlkPSJkaWFsb2dDbG9zZSIgd2lkdGg9IioiIGNsYXNzPSJBbGlnblJpZ250IiB2YWxpZ249Im1pZGRsZSI+JyArIGNsb3NlU2VjdGlvbiArICc8L3RkPicrDQoJCQkgICAgICAgICAgICAJCQkgCSc8dGQgd2lkdGg9IjFweCI+PC90ZD4nKw0KCQkJICAgICAgICAgICAgCQkJICc8L3RyPicrDQoJCQkgICAgICAgICAgICAJCSAnPC90YWJsZT4nKw0KCQkJICAgICAgICAgICAgCSc8L3RkPicrDQoJCQkgICAgICAgICAgICAJJzwvdHI+JzsvL3RpdGxlIGluaXQNCgkgICAgICAgfSANCgkgICAgIGVsc2UgDQoJICAgICB7DQoJICAgICAgICAJY29udGVudCArPSAnPHRyIGhlaWdodD0iMTAiPjx0ZCBhbGlnbj0icmlnaHQiPicgKyBjbG9zZVNlY3Rpb24gKyAnPC90ZD48L3RyPicNCgkgICAgIH07DQoJICAgICANCgkgICAgIGNvbnRlbnQgKz0gJzx0ciBzdHlsZT0iaGVpZ2h0OicgKyB0aGlzLmNvbmZpZy5oZWlnaHQgKyAncHgiIHZhbGlnbj0idG9wIj48dGQgaWQ9ImRpYWxvZ0JvZHkiIGJnY29sb3I9IiNmZmZmZmYiIHN0eWxlPSJwb3NpdGlvbjpyZWxhdGl2ZTsiPjwvdGQ+PC90cj48L3RhYmxlPic7DQoJICAgICByZXR1cm4gY29udGVudDsNCgl9LA0KICAgIGJ1aWxkOiBmdW5jdGlvbigpIHsNCgkNCgkJdmFyIGNhbmNlbExhYmVsID0gZ2V0VGV4dGxhYmxlKCJlcnJvcl9qc19sZWZ0dHJlZV9jYW5jZWwiKTsNCgkJaWYodHlwZW9mKGdsb2JhbENhbmNlbExhYmVsKSAhPSAndW5kZWZpbmVkJyAmJiBnbG9iYWxDYW5jZWxMYWJlbCAhPSAnbnVsbCcgJiYgZ2xvYmFsQ2FuY2VsTGFiZWwgIT0gIiIpDQoJCXsNCgkJCWNhbmNlbExhYmVsID0gZ2xvYmFsQ2FuY2VsTGFiZWw7DQoJCX0NCiAgICAgICANCiAgICAgICAgDQoJCXZhciBiYXNlWkluZGV4ID0gMTAwMDAxICsgdGhpcy5pbmZvLm92ZXJsYXkgKiAxMDsNCiAgICAgICAgdmFyIHNob3daSW5kZXggPSBiYXNlWkluZGV4ICsgMjsNCiAgICAgICAgdGhpcy5pZnJhbWVJZE5hbWUgPSAnaWZyX3BvcHVwJyArIHRoaXMuaW5mby5vdmVybGF5Ow0KICAgICAgICB2YXIgcGF0aCA9IHRoaXMuaW5mby5jbG9zZUJ0bjsNCiAgICAgICAgdmFyIG1hc2tCb3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsNCiAgICAgICAgbWFza0JveC5pZCA9ICJkaWFsb2dCb3hCRyI7DQogICAgICAgIHZhciBtYWluQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7DQogICAgICAgIG1haW5Cb3guaWQgPSAiZGlhbG9nQm94IjsNCiAgICAgICAgdmFyIHNoYWRvd0JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KICAgICAgICBzaGFkb3dCb3guaWQgPSAiZGlhbG9nQm94U2hhZG93IjsNCg0KICAgICAgICBpZighdGhpcy5jb25maWcuaXNCYWNrZ3JvdW5kQ2FuQ2xpY2spDQogICAgICAgIHsNCiAgICAgICAgCUcoJ2RpYWxvZ0Nhc2UnKS5hcHBlbmRDaGlsZChtYXNrQm94KTsNCiAgICAgICAgfQ0KICAgICAgICBHKCdkaWFsb2dDYXNlJykuYXBwZW5kQ2hpbGQobWFpbkJveCk7DQogICAgICAgIEcoJ2RpYWxvZ0Nhc2UnKS5hcHBlbmRDaGlsZChzaGFkb3dCb3gpOw0KICAgICAgICBHKCdkaWFsb2dCb3gnKS5pbm5lckhUTUwgPSAiIjsNCiAgICAgICAgdmFyIGNzc01hc2s9ICAicG9zaXRpb246YWJzb2x1dGU7dG9wOjBweDtsZWZ0OjBweDt6LWluZGV4OiIrYmFzZVpJbmRleCArDQoJCQkiO2ZpbHRlcjphbHBoYShvcGFjaXR5PTUwKTstbW96LW9wYWNpdHk6MC41O29wYWNpdHk6IDAuNTsiKw0KCQkJImJhY2tncm91bmQtY29sb3I6IzRFNEU0RTtkaXNwbGF5Om5vbmU7b3ZlcmZsb3cteTpoaWRkZW47IjsNCg0KICAgICAgICB0aGlzLl9zZXRTdHlsZShHKCdkaWFsb2dCb3hCRycpLGNzc01hc2spOw0KICAgICAgdmFyIGNvbnRlbnRDc3MgPSAiYm9yZGVyOjBweCBzb2xpZCA7ZGlzcGxheTpub25lO3otaW5kZXg6IiArIHNob3daSW5kZXggKyAiO3Bvc2l0aW9uOnJlbGF0aXZlO3dpZHRoOiIgKyB0aGlzLmNvbmZpZy53aWR0aCArICJweDtvdmVyZmxvdzpoaWRkZW47IjsNCg0KLy8gICAgICBpZiAoKSB7DQovLyAgICAgICAgY29udGVudENzcyA9ICJib3JkZXI6MHB4IHNvbGlkIDtkaXNwbGF5Om5vbmU7ei1pbmRleDoiICsgc2hvd1pJbmRleCArICI7cG9zaXRpb246cmVsYXRpdmU7d2lkdGg6IiArIHRoaXMuY29uZmlnLndpZHRoICsgInB4O292ZXJmbG93OmhpZGRlbjsiOw0KLy8gICAgICB9DQoNCgkgICAgdGhpcy5fc2V0U3R5bGUoRygnZGlhbG9nQm94JyksY29udGVudENzcyk7DQoJICAgIHZhciBzaGFkb3dDc3MgPSAnZGlzcGxheTpub25lO3otaW5kZXg6JyArIChiYXNlWkluZGV4ICsxKSsgJzsnOw0KCSAgICB0aGlzLl9zZXRTdHlsZShHKCdkaWFsb2dCb3hTaGFkb3cnKSxzaGFkb3dDc3MpOw0KCSAgICB2YXIgYm9keUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRhYmxlIik7DQoJICAgIGJvZHlDb250YWluZXIud2lkdGggPSAiMTAwJSI7DQoJICAgIGJvZHlDb250YWluZXIuY2VsbFNwYWNpbmcgPSAiMCI7DQoJICAgIGJvZHlDb250YWluZXIuY2VsbFBhZGRpbmcgPSAiMCI7DQoJICAgIHRoaXMuX3NldFN0eWxlKGJvZHlDb250YWluZXIsInRhYmxlLWxheW91dDogZml4ZWQ7Iik7DQoJICAgIA0KICAgIAl0aGlzLmluZm8uY2xvc2VCdG4gPSBjb21tb25QYXRoICsgImJ0bl9jbG9zZS5wbmciOw0KICAgICAgICB0aGlzLmluZm8uY2xvc2VCdG5faG92ZXIgPSBjb21tb25QYXRoICsgImJ0bl9jbG9zZV9ob3Zlci5wbmciOw0KICAgIAl0aGlzLmNyZWF0ZUJvZHlDb250YWluZXJUb3AoYm9keUNvbnRhaW5lcik7DQogICANCiAgICAJdGhpcy5jcmVhdGVCb2R5Q29udGFpbmVyKGJvZHlDb250YWluZXIpOw0KICAgDQogICAgCXRoaXMuY3JlYXRlQm9keUNvbnRhaW5lckJvdHRvbShib2R5Q29udGFpbmVyKTsNCiAgICAJRygnZGlhbG9nQm94JykuYXBwZW5kQ2hpbGQoYm9keUNvbnRhaW5lcik7DQoJICAgICANCgkgICAgaWYgKCF0aGlzLmNvbmZpZy5pc0JhY2tncm91bmRDYW5DbGljaykgDQoJICAgIHsNCgkgICAgCWlmKHdpbmRvdy5vbnJlc2l6ZSAhPSBudWxsKQ0KCSAgICAJew0KCSAgICAJCXRlbXBPbnJlc2l6ZSA9IHdpbmRvdy5vbnJlc2l6ZTsNCgkgICAgCX0NCgkgICAgCWlmKHdpbmRvdy5vbnNjcm9sbCAhPSBudWxsKQ0KCSAgICAJew0KCSAgICAJCXRlbXBPbnNjcm9sbCA9IHdpbmRvdy5vbnJlc2l6ZTsNCgkgICAgCX0NCgkgICAgICAgIHRoaXMuc2V0QmFja2dyb3VuZFNpemUoKTsNCgkgICAgICAgIHdpbmRvdy5vbnJlc2l6ZSA9IHRoaXMuc2V0QmFja2dyb3VuZFNpemU7DQoJICAgICAgICB3aW5kb3cub25zY3JvbGwgPSB0aGlzLnNldEJhY2tncm91bmRTaXplOw0KCSAgICB9DQoJICAgICANCiAgICAgICAgRXZlbnQub2JzZXJ2ZShHKCdkaWFsb2dCb3hDbG9zZScpLCAiY2xpY2siLHRoaXMucmVzZXQuYmluZEFzRXZlbnRMaXN0ZW5lcih0aGlzKSwgZmFsc2UpOw0KICAgICAgICBFdmVudC5vYnNlcnZlKEcoJ2Nsb3NlSHJlZicpLCAiY2xpY2siLHRoaXMuY2xvc2VPbkVudGVyLmJpbmRBc0V2ZW50TGlzdGVuZXIodGhpcyksIGZhbHNlKTsNCiAgICAgICAgRXZlbnQub2JzZXJ2ZShHKCdkaWFsb2dCb3hDbG9zZScpLCAibW91c2VvdXQiLHRoaXMuY2xvc2VCYXJPbk1vdXNlb3V0LmJpbmRBc0V2ZW50TGlzdGVuZXIodGhpcyksIGZhbHNlKTsNCiAgICAgICAgRXZlbnQub2JzZXJ2ZShHKCdkaWFsb2dCb3hDbG9zZScpLCAibW91c2VvdmVyIix0aGlzLmNsb3NlQmFyT25Nb3VzZW92ZXIuYmluZEFzRXZlbnRMaXN0ZW5lcih0aGlzKSwgZmFsc2UpOw0KICAgICAgICBFdmVudC5vYnNlcnZlKEcoJ2RpYWxvZ0JveEJHJyksICJrZXlkb3duIix0aGlzLmNsb3NlT25Fc2MuYmluZEFzRXZlbnRMaXN0ZW5lcih0aGlzKSwgZmFsc2UpOw0KICAgICAgICBFdmVudC5vYnNlcnZlKEcoJ2RpYWxvZ0JveCcpLCAia2V5ZG93biIsdGhpcy5jbG9zZU9uRXNjLmJpbmRBc0V2ZW50TGlzdGVuZXIodGhpcyksIGZhbHNlKTsNCiAgICAgICAgDQogICAgICAgIC8vZGlhbG9nQm94QkcNCiAgICAgICAgLy9kaWFsb2dCb3gNCiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmlzU3VwcG9ydERyYWdpbmcpIHsNCiAgICAgICAgICAgIGRyb3BDbGFzcyA9IG5ldyBEcmFnZHJvcCh0aGlzLmNvbmZpZy53aWR0aCwgdGhpcy5jb25maWcuaGVpZ2h0LCB0aGlzLmluZm8uc2hhZG93V2lkdGgsIHRoaXMuY29uZmlnLmlzU3VwcG9ydERyYWdpbmcsIHRoaXMuY29uZmlnLmNvbnRlbnRUeXBlKTsNCiAgICAgICAgICAgIEcoImRpYWxvZ0JveFRpdGxlIikuc3R5bGUuY3Vyc29yID0gIm1vdmUiOw0KICAgICAgICB9Ow0KICAgICAgIA0KICAgICAgICB0aGlzLmxhc3RCdWlsZCgpOw0KICAgICAgDQogICAgfSwNCiAgICBzZXRCYWNrZ3JvdW5kU2l6ZTogZnVuY3Rpb24oKSB7DQogICAgICAgIHZhciBnZXRNYXhWYWx1ZVdpZHRoID0gW2dldFZhbHVlKCJjbGllbnRXaWR0aCIpLCBnZXRWYWx1ZSgic2Nyb2xsV2lkdGgiKV07DQogICAgICAgIHZhciBnZXRWYWx1ZVdpZHRoID0gZXZhbCgiTWF0aC5tYXgoIiArIGdldE1heFZhbHVlV2lkdGgudG9TdHJpbmcoKSArICIpIik7DQogICAgICAgIEcoJ2RpYWxvZ0JveEJHJykuc3R5bGUud2lkdGggPSBnZXRWYWx1ZVdpZHRoKyJweCI7DQogICAgICAgIHRyeQ0KICAgICAgICB7DQogICAgICAgICAgaWYoc2Nyb2xsQmFySXNzdWUuaXNQb3BVcFdpbmRvdyhkb2N1bWVudCkpDQogICAgICAgICAgew0KICAgICAgICAJICB2YXIgbWF4VmFsdWUgPSBzY3JvbGxCYXJJc3N1ZS5maW5kU3ViTm9kZXNNYXhWYWx1ZSh0b3AuZG9jdW1lbnQuYm9keSk7DQogICAgICAgIAkgIEcoJ2RpYWxvZ0JveEJHJykuc3R5bGUuaGVpZ2h0ID0gKG1heFZhbHVlLm92ZXJmbG93X3ggPyB0b3AuZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQgLSBzY3JvbGxCYXJJc3N1ZS5TQ1JPTExfQkFSX1NJWkUgOiB0b3AuZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQpICsgInB4IjsNCiAgICAgICAgCSAgcmV0dXJuOw0KICAgICAgICAgIH0NCiAgICAgICAgfWNhdGNoKGUpe30NCiAgICAgICAgdmFyIGdldE1heFZhbHVlSGVpZ2h0ID0gW2dldFZhbHVlKCJjbGllbnRIZWlnaHQiKSwgZ2V0VmFsdWUoInNjcm9sbEhlaWdodCIpXTsNCiAgICAgICAgdmFyIGdldFZhbHVlSGVpZ2h0ID0gZXZhbCgiTWF0aC5tYXgoIiArIGdldE1heFZhbHVlSGVpZ2h0LnRvU3RyaW5nKCkgKyAiKSIpOw0KICAgICAgICBHKCdkaWFsb2dCb3hCRycpLnN0eWxlLmhlaWdodCA9IGdldFZhbHVlSGVpZ2h0KyJweCI7DQogICAgfSwNCiAgICBsYXN0QnVpbGQ6IGZ1bmN0aW9uKCkgew0KICAgICAgICB2YXIgY29uZmlybSA9ICc8ZGl2IHN0eWxlPSJ3aWR0aDoxMDAlO2hlaWdodDoxMDAlO3RleHQtYWxpZ246Y2VudGVyOyI+PGRpdiBpZD0iX21zZ0NvbnRlbnQiIHN0eWxlPSJtYXJnaW46MjBweCAyMHB4IDAgMjBweDtmb250LXNpemU6MTRweDtsaW5lLWhlaWdodDoxNnB4O2NvbG9yOiMwMDAwMDA7Ij4nICsgdGhpcy5pbmZvLmNvbmZpcm1Db24gKyAnPC9kaXY+PGRpdiBzdHlsZT0ibWFyZ2luOjIwcHg7Ij48aW5wdXQgd2lkdGg9NDAgc3R5bGU9IndpZHRoOiA2MHB4OyIgaWQ9ImRpYWxvZ09rIiB0eXBlPSJidXR0b24iIHZhbHVlPSInK3RoaXMuaW5mby5idG5ZRVNMYWJlbCsnIi8+Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7PGlucHV0IHN0eWxlPSJ3aWR0aDogNjBweDsiIGlkPSJkaWFsb2dDYW5jZWwiIHR5cGU9ImJ1dHRvbiIgd2lkdGg9NDAgdmFsdWU9IicrdGhpcy5pbmZvLmJ0bk5PTGFiZWwrJyIvPjwvZGl2PjwvZGl2Pic7DQogICAgICAgIHZhciBhbGVydCA9ICc8ZGl2IHN0eWxlPSJ3aWR0aDoxMDAlO2hlaWdodDoxMDAlO3RleHQtYWxpZ246Y2VudGVyOyI+PGRpdiBzdHlsZT0ibWFyZ2luOjIwcHggMjBweCAwIDIwcHg7Zm9udC1zaXplOjE0cHg7bGluZS1oZWlnaHQ6MTZweDtjb2xvcjojMDAwMDAwOyI+JyArIHRoaXMuaW5mby5hbGVydENvbiArICc8L2Rpdj48ZGl2IHN0eWxlPSJtYXJnaW46MjBweDsiPjxpbnB1dCBpZD0iZGlhbG9nWUVTIiB0eXBlPSJidXR0b24iIHZhbHVlPSIgWUVTICIvPjwvZGl2PjwvZGl2Pic7DQogICAgICAgIHZhciBiYXNlWkluZGV4ID0gMTAwMDEgKyB0aGlzLmluZm8ub3ZlcmxheSAqIDEwOw0KICAgICAgICB2YXIgY292ZXJJZlpJbmRleCA9IGJhc2VaSW5kZXggKyA0Ow0KICAgICAgICBpZiAodGhpcy5jb25maWcuY29udGVudFR5cGUgPT0gMSkgew0KCSAgICAgICB2YXIgaWUgPSAoIkFjdGl2ZVhPYmplY3QiIGluIHdpbmRvdyk/IHRydWUgOiBmYWxzZTsNCgkgICAgICAgaWYoaWUpDQoJICAgICAgIHsNCgkJCSAgICB2YXIgb3BlbklmcmFtZSA9ICI8aWZyYW1lIG9ubG9hZD0nc2Nyb2xsQmFySXNzdWUuYXV0b1Jlc2l6ZVBvcFVwQ29udGFpbmVyKG51bGwsXCJkaWFsb2dCb3hCR1wiKTsnIHdpZHRoPScxMDAlJyBpZ25vcmU9J3NlbGYnIHN0eWxlPSdib3JkZXI6I2ZmZmZmZjttYXJnaW46IiArIHRoaXMuaW5mby5jdXN0b21NYXJnaW4gKyAiO2hlaWdodDoiICsgdGhpcy5jb25maWcuaGVpZ2h0ICsgInB4JyBuYW1lPSciICsgdGhpcy5pZnJhbWVJZE5hbWUgKyAiJyBpZD0nbWVudUZyYW1lJyBmcmFtZWJvcmRlcj0nMCcgc2Nyb2xsaW5nPSciK3RoaXMuY29uZmlnLnNjcm9sbFR5cGUrIic+PC9pZnJhbWU+IjsNCgkgICAgICAgICAgICB2YXIgY292ZXJJZnJhbWUgPSAiPGRpdiBpZD0naWZyYW1lQkcnIHN0eWxlPSdib3JkZXI6I2ZmZmZmZjtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MHB4O2xlZnQ6MHB4O3dpZHRoOjFweDtoZWlnaHQ6MXB4O3otaW5kZXg6IiArIGNvdmVySWZaSW5kZXggKyAiO2ZpbHRlcjogYWxwaGEob3BhY2l0eT0wMCk7b3BhY2l0eTowLjAwO2JhY2tncm91bmQtY29sb3I6I2ZmZmZmZjsnPjxkaXY+IjsNCgkgICAgICAgICAgICBHKCJkaWFsb2dCb2R5IikuaW5uZXJIVE1MID0gb3BlbklmcmFtZSArIGNvdmVySWZyYW1lOw0KCSAgICAgICAgICAgIA0KCSAgICAgICAgICAgIHRoaXMuZG9BY3Rpb24odGhpcy5pbmZvLmNvbnRlbnRVcmwpOw0KCQkgICB9ZWxzZQ0KCQkgICB7DQoJCQkgICAgIHZhciBvcGVuSWZyYW1lID0gIjxpZnJhbWUgb25sb2FkPSdzY3JvbGxCYXJJc3N1ZS5hdXRvUmVzaXplUG9wVXBDb250YWluZXIobnVsbCxcImRpYWxvZ0JveEJHXCIpOycgd2lkdGg9JzEwMCUnIGlnbm9yZT0nc2VsZicgc3R5bGU9J2hlaWdodDoiICsgdGhpcy5jb25maWcuaGVpZ2h0ICsgInB4JyBuYW1lPSciICsgdGhpcy5pZnJhbWVJZE5hbWUrICInIHNyYz0nIiArIHRoaXMuaW5mby5jb250ZW50VXJsICsgIicgaWQ9J21lbnVGcmFtZScgZnJhbWVib3JkZXI9JzAnIHNjcm9sbGluZz0neWVzJz48L2lmcmFtZT4iOw0KICAgICAgICAgICAJCSB2YXIgY292ZXJJZnJhbWUgPSAiPGRpdiBpZD0naWZyYW1lQkcnIHN0eWxlPSdwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MHB4O2xlZnQ6MHB4O3dpZHRoOjFweDtoZWlnaHQ6MXB4O3otaW5kZXg6IiArIGNvdmVySWZaSW5kZXggKyAiO2ZpbHRlcjogYWxwaGEob3BhY2l0eT0wMCk7b3BhY2l0eTowLjAwO2JhY2tncm91bmQtY29sb3I6I2ZmZmZmZjsnPjxkaXY+IjsNCiAgICAgICAgICAgIAkgRygiZGlhbG9nQm9keSIpLmlubmVySFRNTCA9IG9wZW5JZnJhbWUgKyBjb3ZlcklmcmFtZTsgICAgICAgICAgICAJDQoJCQl9DQogICAgICAgICAgDQogICAgICAgIH0gZWxzZSBpZiAodGhpcy5jb25maWcuY29udGVudFR5cGUgPT0gMikgew0KICAgICAgICAgICAgRygiZGlhbG9nQm9keSIpLmlubmVySFRNTCA9IHRoaXMuaW5mby5jb250ZW50SHRtbDsNCiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbmZpZy5jb250ZW50VHlwZSA9PSAzKSB7DQogICAgICAgICAgICBHKCJkaWFsb2dCb2R5IikuaW5uZXJIVE1MID0gY29uZmlybTsNCiAgICAgICAgICAgIEV2ZW50Lm9ic2VydmUoRygnZGlhbG9nT2snKSwgImNsaWNrIiwgdGhpcy5mb3JDYWxsYmFjay5iaW5kQXNFdmVudExpc3RlbmVyKHRoaXMpLCBmYWxzZSk7DQogICAgICAgICAgICBFdmVudC5vYnNlcnZlKEcoJ2RpYWxvZ0NhbmNlbCcpLCAiY2xpY2siLCB0aGlzLmNsb3NlLmJpbmRBc0V2ZW50TGlzdGVuZXIodGhpcyksIGZhbHNlKTsNCiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbmZpZy5jb250ZW50VHlwZSA9PSA0KSB7DQogICAgICAgICAgICBHKCJkaWFsb2dCb2R5IikuaW5uZXJIVE1MID0gYWxlcnQ7DQogICAgICAgICAgICBFdmVudC5vYnNlcnZlKEcoJ2RpYWxvZ1lFUycpLCAiY2xpY2siLCB0aGlzLmNsb3NlLmJpbmRBc0V2ZW50TGlzdGVuZXIodGhpcyksIGZhbHNlKTsNCiAgICAgICAgfTsNCiAgICB9LA0KICAgIGRvQWN0aW9uOiBmdW5jdGlvbih1cmwpDQogICAgew0KCQl2YXIgaHJlZiA9ICJtZW51RnJhbWUubG9jYXRpb24uaHJlZj0nIiArIHVybCArICInIjsNCgkJd2luZG93LnNldFRpbWVvdXQoaHJlZiwwKTsNCgkJd2luZG93LnN0YXR1cz0iRmluaXNoZWQiOwkNCgl9LA0KICAgIHJlQnVpbGQ6IGZ1bmN0aW9uKCkgew0KDQogICAgICAgIEcoJ2RpYWxvZ0JvZHknKS5oZWlnaHQgPSBHKCdkaWFsb2dCb2R5JykuY2xpZW50SGVpZ2h0Ow0KICAgICAgICB0aGlzLmxhc3RCdWlsZCgpDQogICAgfSwNCiAgICBzaG93OiBmdW5jdGlvbigpIHsNCiAgICAgICAgdGhpcy5oaWRkZW5Tb21lKCk7DQogICAgICAgIHRoaXMubWlkZGxlKCk7DQogICAgICAgIGlmICh0aGlzLmNvbmZpZy5pc1Nob3dTaGFkb3cpIHRoaXMuc2hhZG93KCk7DQogICAgICAgIHRoaXMuZm9jdXNEaWFsb2dCb3goKTsNCiAgICB9LA0KICAgIGZvY3VzRGlhbG9nQm94OmZ1bmN0aW9uKCl7DQogICAgCSB2YXIgZGlhbG9nQm94RGl2PWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaWFsb2dCb3gnKTsNCiAgICAgICAgIGRpYWxvZ0JveERpdi5mb2N1cygpOw0KICAgIH0sDQogICAgc2hvd0Zsb2F0V2luOiBmdW5jdGlvbigpIHsNCiAgICAgICAgdGhpcy5oaWRkZW5Tb21lKCk7DQogICAgICAgIHRoaXMuc2V0QWJzUG9zaXRpb24oKTsNCiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmlzU2hvd1NoYWRvdykgdGhpcy5zaGFkb3coKQ0KICAgIH0sDQogICAgZm9yQ2FsbGJhY2s6IGZ1bmN0aW9uKCkgew0KICAgICAgICByZXR1cm4gdGhpcy5pbmZvLmNhbGxCYWNrKHRoaXMuaW5mby5wYXJhbWV0ZXIpDQogICAgfSwNCiAgICBzaGFkb3c6IGZ1bmN0aW9uKCkgew0KICAgICAgICB2YXIgb1NoYWRvdyA9IEcoJ2RpYWxvZ0JveFNoYWRvdycpOw0KICAgICAgICB2YXIgb0RpYWxvZyA9IEcoJ2RpYWxvZ0JveCcpOw0KICAgICAgICBvU2hhZG93WydzdHlsZSddWydwb3NpdGlvbiddID0gImFic29sdXRlIjsNCiAgICAgICAgLy9vU2hhZG93WydzdHlsZSddWydiYWNrZ3JvdW5kJ10gPSAiIzAwMCI7DQogICAgICAgIG9TaGFkb3dbJ3N0eWxlJ11bJ2Rpc3BsYXknXSA9ICIiOw0KICAgICAgICBvU2hhZG93WydzdHlsZSddWydvcGFjaXR5J10gPSAiMC4yIjsNCiAgICAgICAgLy9vU2hhZG93WydzdHlsZSddWydmaWx0ZXInXSA9ICJhbHBoYShvcGFjaXR5PTIwKSI7DQogICAgICAgIG9TaGFkb3dbJ3N0eWxlJ11bJ3RvcCddID0gb0RpYWxvZy5vZmZzZXRUb3AgKyB0aGlzLmluZm8uc2hhZG93V2lkdGggKyAicHgiOw0KICAgICAgICBvU2hhZG93WydzdHlsZSddWydsZWZ0J10gPSBvRGlhbG9nLm9mZnNldExlZnQgKyB0aGlzLmluZm8uc2hhZG93V2lkdGgrICJweCI7DQogICAgICAgIG9TaGFkb3dbJ3N0eWxlJ11bJ3dpZHRoJ10gPSBvRGlhbG9nLm9mZnNldFdpZHRoICsgInB4IjsNCiAgICAgICAgb1NoYWRvd1snc3R5bGUnXVsnaGVpZ2h0J10gPSBvRGlhbG9nLm9mZnNldEhlaWdodCArICJweCI7DQogICAgICAgIA0KICAgIH0sDQogICAgbWlkZGxlOiBmdW5jdGlvbigpIHsNCiAgICAgICAgaWYgKCF0aGlzLmNvbmZpZy5pc0JhY2tncm91bmRDYW5DbGljaykgRygnZGlhbG9nQm94QkcnKS5zdHlsZS5kaXNwbGF5ID0gJyc7DQogICAgICAgIHZhciBpc1BvcFVwV2luZG93ID0gc2Nyb2xsQmFySXNzdWUuaXNQb3BVcFdpbmRvdyhkb2N1bWVudCk7DQogICAgICAgIHZhciBvRGlhbG9nID0gRygnZGlhbG9nQm94Jyk7DQogICAgICAgIG9EaWFsb2dbJ3N0eWxlJ11bJ3Bvc2l0aW9uJ10gPSAiYWJzb2x1dGUiOw0KICAgICAgICBvRGlhbG9nWydzdHlsZSddWydkaXNwbGF5J10gPSAnJzsNCiAgICAgICAgdmFyIHNDbGllbnRXaWR0aCA9IGdldFZhbHVlKCJjbGllbnRXaWR0aCIpOw0KICAgICAgICB2YXIgc0NsaWVudEhlaWdodCA9IGdldFZhbHVlKCJjbGllbnRIZWlnaHQiKTsNCiAgICAgICAgaWYoaXNQb3BVcFdpbmRvdykNCiAgICAgICAgew0KICAgICAgICAJc0NsaWVudEhlaWdodCA9IHRvcC5kb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodDsNCiAgICAgICAgfQ0KICAgICAgICB2YXIgc1Njcm9sbFRvcCA9IGdldFZhbHVlKCJzY3JvbGxUb3AiKTsNCiAgICAgICAgdmFyIHNsZWZ0ID0gKHNDbGllbnRXaWR0aCAvIDIpIC0gKG9EaWFsb2cub2Zmc2V0V2lkdGggLyAyKTsNCiAgICAgICAgdmFyIGlUb3AgPSAoc0NsaWVudEhlaWdodCAvIDIgKyBzU2Nyb2xsVG9wKSAtIChvRGlhbG9nLm9mZnNldEhlaWdodCAvIDIpOw0KICAgICAgICB2YXIgc1RvcCA9IGlUb3AgPiAwID8gaVRvcDogKHNDbGllbnRIZWlnaHQgLyAyICsgc1Njcm9sbFRvcCkgLSAob0RpYWxvZy5vZmZzZXRIZWlnaHQgLyAyKTsNCiAgICAgICAgaWYgKHNUb3AgPCAxKSBzVG9wID0gIjIwIjsNCiAgICAgICAgaWYgKHNsZWZ0IDwgMSkgc2xlZnQgPSAiMjAiOw0KICAgICAgICBvRGlhbG9nWydzdHlsZSddWydsZWZ0J10gPSBzbGVmdCArICJweCI7DQogICAgICAgIG9EaWFsb2dbJ3N0eWxlJ11bJ3RvcCddID0gc1RvcCArICJweCI7DQogICAgfSwNCiAgIA0KICAgIGdldERpYWxvZ0JveEJHSGVpZ2h0IDogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAJIHZhciBiZ0hlaWdodCA9IEcoJ2RpYWxvZ0JveEJHJykuc3R5bGUuaGVpZ2h0Ow0KCSAgICAgaWYoYmdIZWlnaHQuaW5kZXhPZigicHgiKSA+IDApDQoJICAgICB7DQoJICAgICAgICBiZ0hlaWdodCA9IGJnSGVpZ2h0LnN1YnN0cmluZygwLCAoYmdIZWlnaHQubGVuZ3RoIC0gMikpOw0KCSAgICAgfQ0KCSAgICAgdmFyIGJnQm94SGVpZ2h0ID0gKDQ2ICsgcGFyc2VJbnQodGhpcy5jb25maWcuaGVpZ2h0KSArIHBhcnNlSW50KEcoJ3RpdGxlQmFyQ29udGFpbmVyJykuaGVpZ2h0KSk7DQoJICAgICB2YXIgdGFyZ2V0RG9jID0gQWMzNjAuZ2V0VG9wV2luZG93KCkud2luZG93LmRvY3VtZW50LmJvZHk7DQoJICAgICBpZihzY3JvbGxCYXJJc3N1ZS5pc1Nob3dNb2RhbERpYWxvZyh0aGlzLmluZm8uY2FsbERvY3VtZW50KSkNCgkgICAgIHsNCgkgICAgICAgIHRhcmdldERvYyA9IHRoaXMuaW5mby5jYWxsRG9jdW1lbnQ7IA0KCSAgICAgfQ0KCSAgICAgdmFyIG1heF92YWx1ZSA9IHNjcm9sbEJhcklzc3VlLmZpbmRTdWJOb2Rlc01heFZhbHVlKHRhcmdldERvYyk7DQoJICAgICB2YXIgbWF4X2hlaWdodCA9IHRhcmdldERvYy5vZmZzZXRIZWlnaHQ7DQoJICAgICBpZighc2Nyb2xsQmFySXNzdWUuanVkZ2VJc051bGwobWF4X3ZhbHVlKSkNCgkgICAgIHsNCgkgICAgICAgIG1heF9oZWlnaHQgPSBtYXhfdmFsdWUub3ZlcmZsb3dfeCA/IG1heF92YWx1ZS5tYXhfaGVpZ2h0ICsgc2Nyb2xsQmFySXNzdWUuU0NST0xMX0JBUl9TSVpFIDogbWF4X3ZhbHVlLm1heF9oZWlnaHQ7DQoJICAgICAgICBtYXhfaGVpZ2h0ID0gbWF4X2hlaWdodCA8IHRhcmdldERvYy5vZmZzZXRIZWlnaHQgPyB0YXJnZXREb2Mub2Zmc2V0SGVpZ2h0IDogbWF4X2hlaWdodDsNCgkgICAgIH0NCgkgICAgIHJldHVybiBtYXhfaGVpZ2h0ID4gYmdCb3hIZWlnaHQgPyBtYXhfaGVpZ2h0IDogYmdCb3hIZWlnaHQ7DQogICAgfSwNCiAgICANCiAgICBzZXRBYnNQb3NpdGlvbjogZnVuY3Rpb24oKSANCiAgICB7DQogICAgICAgIGlmICghdGhpcy5jb25maWcuaXNCYWNrZ3JvdW5kQ2FuQ2xpY2spIEcoJ2RpYWxvZ0JveEJHJykuc3R5bGUuZGlzcGxheSA9ICcnOw0KICAgICAgICB2YXIgb0RpYWxvZyA9IEcoJ2RpYWxvZ0JveCcpOw0KICAgICAgICBvRGlhbG9nWydzdHlsZSddWydwb3NpdGlvbiddID0gImFic29sdXRlIjsNCiAgICAgICAgb0RpYWxvZ1snc3R5bGUnXVsnZGlzcGxheSddID0gJyc7DQogICAgICAgIHZhciBzQ2xpZW50V2lkdGggPSBnZXRWYWx1ZSgiY2xpZW50V2lkdGgiKTsNCiAgICAgICAgdmFyIHNDbGllbnRIZWlnaHQgPSBnZXRWYWx1ZSgiY2xpZW50SGVpZ2h0Iik7DQogICAgICAgIA0KICAgIAl2YXIgd2luV2lkdGggPSBvRGlhbG9nLm9mZnNldFdpZHRoOw0KICAgIAl2YXIgd2luSGVpZ2h0ID0gb0RpYWxvZy5vZmZzZXRIZWlnaHQ7DQogICAgCQ0KICAgIAl2YXIgc0xlZnQsc1RvcDsNCiAgICAJLyoqDQogICAgCSAqIElmIGl0IGNhbid0IGRpc3BsYXkgY29tcGxldGVseSBhdCByaWdodCBvZiB0cmlnZ2VyIG9iamVjdCwgaXQgd2lsbCBkaXNwbGF5IHRoZW0gb24gdGhlIGxlZnQgDQogICAgCSAqIGJhc2Ugb24gdGhlIHJpZ2h0IGJvcmRlciBvZiB0cmlnZ2VyIG9iamVjdA0KICAgIAkgKi8NCiAgICAJaWYoKHRoaXMudHJpZ2dlck9iai5vZmZzZXRMICsgd2luV2lkdGgpID4gc0NsaWVudFdpZHRoKQ0KICAgIAl7DQogICAgCQlzTGVmdCA9IHRoaXMudHJpZ2dlck9iai5vZmZzZXRMICsgdGhpcy50cmlnZ2VyT2JqLm9ialdpZHRoIC0gd2luV2lkdGg7DQogICAgCX0NCiAgICAJZWxzZQ0KICAgIAl7DQogICAgCQlzTGVmdCA9IHRoaXMudHJpZ2dlck9iai5vZmZzZXRMOw0KICAgIAl9DQogICAgICAgIA0KICAgIAkvKioNCiAgICAJICogSWYgaXQgY2FuIGRpc3BsYXkgdG90YWwgaGVpZ2h0IHVuZGVyIGN1cnJlbnQgdHJpZ2dlciBvYmplY3QsDQogICAgCSAqIGl0IHdpbGwgZGlzcGxheSBhdCB0aGUgdG9wIG9mIHRoZSB0cmlnZ2VyIG9iamVjdA0KICAgIAkgKi8NCiAgICAgICAgaWYoKHRoaXMudHJpZ2dlck9iai5vZmZzZXRUICsgdGhpcy50cmlnZ2VyT2JqLm9iakhlaWdodCArIHdpbkhlaWdodCkgPiBzQ2xpZW50SGVpZ2h0KQ0KICAgICAgICB7DQogICAgICAgIAlzVG9wID0gdGhpcy50cmlnZ2VyT2JqLm9mZnNldFQgLSB3aW5IZWlnaHQ7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgIAlzVG9wID0gdGhpcy50cmlnZ2VyT2JqLm9mZnNldFQrdGhpcy50cmlnZ2VyT2JqLm9iakhlaWdodDsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgb0RpYWxvZ1snc3R5bGUnXVsnbGVmdCddID0gc0xlZnQgKyAicHgiOw0KICAgICAgICBvRGlhbG9nWydzdHlsZSddWyd0b3AnXSA9IHNUb3AgKyAicHgiOw0KICAgIH0sDQogICAgDQogICAgcmVzZXQ6IGZ1bmN0aW9uKCkgew0KICAgICAgICBpZiAodGhpcy5jb25maWcuaXNSZWxvYWRPbkNsb3NlKSB7DQogICAgICAgIAlBYzM2MC5nZXRUb3BXaW5kb3coKS5sb2NhdGlvbi5yZWxvYWQoKTsNCiAgICAgICAgfTsNCiAgICAgICAgdGhpcy5jbG9zZSgpOw0KICAgIH0sDQogICAgY2xvc2VCYXJPbk1vdXNlb3ZlcjpmdW5jdGlvbigpDQogICAgew0KICAgIAlHKCdkaWFsb2dCb3hDbG9zZScpLnNyYyA9IHRoaXMuaW5mby5jbG9zZUJ0bl9ob3ZlcjsNCiAgICAJDQogICAgfSwNCiAgICBjbG9zZUJhck9uTW91c2VvdXQ6ZnVuY3Rpb24oKQ0KICAgIHsgICAgCQ0KICAgIAlHKCdkaWFsb2dCb3hDbG9zZScpLnNyYyA9IHRoaXMuaW5mby5jbG9zZUJ0bjsNCiAgICAJDQogICAgfSwNCiAgICBjbG9zZU9uRXNjOmZ1bmN0aW9uKCkNCiAgICB7DQogICAgCSB2YXIgZXZlbnQgPSB3aW5kb3cuZXZlbnQgfHwgZXZlbnQ7ICAgDQogICAgCSBpZihldmVudC5rZXlDb2RlID09IDI3KQ0KICAgIAkgew0KICAgIAkJICBpZiAodGhpcy5jb25maWcuaXNSZWxvYWRPbkNsb3NlKSB7DQogICAgCQkJICBBYzM2MC5nZXRUb3BXaW5kb3coKS5sb2NhdGlvbi5yZWxvYWQoKTsNCiAgICAJICAgICAgICB9Ow0KICAgIAkgICAgICAgIHRoaXMuY2xvc2UoKTsNCiAgICAJIH0NCiAgICB9DQogICAgLA0KICAgIGNsb3NlT25FbnRlcjpmdW5jdGlvbigpDQogICAgew0KCSAgIAkgdmFyIGV2ZW50ID0gQWMzNjAuZ2V0RXZlbnQoKTsgDQoJICAgCSBpZihldmVudC5rZXlDb2RlID09IDApDQoJICAgCSB7DQoJCSAgIAkgIGlmICh0aGlzLmNvbmZpZy5pc1JlbG9hZE9uQ2xvc2UpIHsNCgkJICAgCQlBYzM2MC5nZXRUb3BXaW5kb3coKS5sb2NhdGlvbi5yZWxvYWQoKTsNCgkJICAgICAgfTsNCgkJICAgICAgdGhpcy5jbG9zZSgpOw0KCSAgIAkgfQ0KICAgfQ0KICAgICwNCiAgICBjbG9zZTogZnVuY3Rpb24oKSB7DQoJCS8vRml4IGZvciBBQUVUQS0xMjU5IHNpbHZlcmxpZ2h0IG1hcCBpcyBvdmVybGFwcGluZyB0aGUgcG9wdXAuDQoJCXRyeXsNCgkJJCgnI2J1aWxkaW5ncGVybWl0cycsIHBhcmVudC5kb2N1bWVudCkuY3NzKCJ2aXNpYmlsaXR5IiwgIiIpOw0KCQl9DQoJCWNhdGNoKGUpDQoJCXsNCgkJCQ0KCQl9DQoJCWlmKHR5cGVvZihjbGVhcikhPSd1bmRlZmluZWQnKQ0KCQl7DQoJCQl0cnkNCgkJCXsNCgkJCQlpZihjbGVhciAhPSAnc2tpcCcpDQoJCQkJew0KCQkJCQljbGVhcigpOw0KCQkJCX0NCgkJCX0NCgkJCWNhdGNoKGUpDQoJCQl7DQoJCQl9DQoJCX0NCiAgICAgICAgRygnZGlhbG9nQm94Jykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgaWYgKCF0aGlzLmNvbmZpZy5pc0JhY2tncm91bmRDYW5DbGljaykgRygnZGlhbG9nQm94QkcnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICBpZiAodGhpcy5jb25maWcuaXNTaG93U2hhZG93KSBHKCdkaWFsb2dCb3hTaGFkb3cnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICBHKCdkaWFsb2dCb2R5JykuaW5uZXJIVE1MID0gJyc7DQogICAgICAgIHRoaXMuc2hvd1NvbWUoKTsNCiAgICAgICAgc2Nyb2xsQmFySXNzdWUuYXV0b1Jlc2l6ZVBvcFVwQ29udGFpbmVyKG51bGwsImRpYWxvZ0JveEJHIik7DQogICAgICAgIA0KICAgIAl3aW5kb3cub25yZXNpemUgPSB0ZW1wT25yZXNpemU7DQogICAgCXdpbmRvdy5vbnNjcm9sbCA9IHRlbXBPbnNjcm9sbDsNCiAgICAJQWMzNjAuZ2V0VG9wV2luZG93KCkuTE9DS19PUEVSQVRJT05fS0VZID0gImludmFsaWRhdGlvbiI7DQogICAgCWlmKHRoaXMuaW5mby5jYWxsQmFja0FmdGVyQ2xvc2UpDQogICAgCXsNCiAgICAJCXRoaXMuaW5mby5jYWxsQmFja0FmdGVyQ2xvc2UoKTsNCiAgICAJfQ0KICAgIH0sDQogICAgaGlkZGVuU29tZTogZnVuY3Rpb24oKSB7DQogICAgICAgIHZhciB0YWcgPSB0aGlzLmluZm8uc29tZUhpZGRlblRhZy5zcGxpdCgiLCIpOw0KICAgICAgICBpZiAodGFnLmxlbmd0aCA9PSAxICYmIHRhZ1swXSA9PSAiIikgew0KICAgICAgICAgICAgdGFnLmxlbmd0aCA9IDA7DQogICAgICAgIH0NCiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0YWcubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICAgIHRoaXMuaGlkZGVuVGFnKHRhZ1tqXSk7DQogICAgICAgIH07DQogICAgICAgIHZhciBpZHMgPSB0aGlzLmluZm8uc29tZUhpZGRlbkVsZS5zcGxpdCgiLCIpOw0KICAgICAgICBpZiAoaWRzLmxlbmd0aCA9PSAxICYmIGlkc1swXSA9PSAiIikgaWRzLmxlbmd0aCA9IDA7DQogICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgaWRzLmxlbmd0aDsgaisrKSB7DQogICAgICAgICAgICB0aGlzLmhpZGRlbkVsZShpZHNbal0pOw0KICAgICAgICB9Ow0KICAgICAgICBzcGFjZUZvclBvcCgiYmVnaW4iKTsNCiAgICB9LA0KICAgIGhpZGRlblRhZzogZnVuY3Rpb24odGFnTmFtZSkgew0KICAgICAgICB2YXIgZWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUodGFnTmFtZSk7DQogICAgICAgIGlmIChlbGUgIT0gbnVsbCkgew0KICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBlbGUubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICAgICAgICBpZiAoZWxlW2pdLnN0eWxlLmRpc3BsYXkgIT0gIm5vbmUiICYmIGVsZVtqXS5zdHlsZS52aXNpYmlsaXR5ICE9ICdoaWRkZW4nKSB7DQogICAgICAgICAgICAgICAgICAgIGVsZVtqXS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuc29tZVRvSGlkZGVuLnB1c2goZWxlW2pdKTsNCiAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgfTsNCiAgICAgICAgfTsNCiAgICB9LA0KICAgIGhpZGRlbkVsZTogZnVuY3Rpb24oaWQpIHsNCiAgICAgICAgdmFyIGVsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsNCiAgICAgICAgaWYgKHR5cGVvZihlbGUpICE9ICJ1bmRlZmluZWQiICYmIGVsZSAhPSBudWxsKSB7DQogICAgICAgICAgICBlbGUuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nOw0KICAgICAgICAgICAgdGhpcy5zb21lVG9IaWRkZW4ucHVzaChlbGUpOw0KICAgICAgICB9DQogICAgfSwNCiAgICBzaG93U29tZTogZnVuY3Rpb24oKSB7DQogICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGhpcy5zb21lVG9IaWRkZW4ubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICAgIHRoaXMuc29tZVRvSGlkZGVuW2pdLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7DQogICAgICAgIH07DQogICAgICAgIHNwYWNlRm9yUG9wKCJlbmQiKTsNCiAgICB9LA0KICAgIGNoYW5nZUltYWdlOmZ1bmN0aW9uKGltYWdlVXJsLG9iail7DQogICAgCW9iai5zcmM9aW1hZ2VVcmw7DQogICAgfQ0KICAgIA0KfTsNCnZhciBEcmFnZHJvcCA9IG5ldyBDbGFzcygpOw0KRHJhZ2Ryb3AucHJvdG90eXBlID0gey8vIHRoZSBpbml0aWFsaXplIG1ldGhvZA0KICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKHdpZHRoLCBoZWlnaHQsIHNoYWRvd1dpZHRoLCBzaG93U2hhZG93LCBjb250ZW50VHlwZSxsYXlvdXQpIHsNCiAgICAgICAgdGhpcy5kcmFnRGF0YSA9IG51bGw7DQogICAgICAgIHRoaXMuZHJhZ0RhdGFJbiA9IG51bGw7DQogICAgICAgIHRoaXMuYmFja0RhdGEgPSBudWxsOw0KICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7DQogICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0Ow0KICAgICAgICB0aGlzLnNoYWRvd1dpZHRoID0gc2hhZG93V2lkdGg7DQogICAgICAgIHRoaXMuc2hvd1NoYWRvdyA9IHNob3dTaGFkb3c7DQogICAgICAgIHRoaXMuY29udGVudFR5cGUgPSBjb250ZW50VHlwZTsNCiAgICAgICAgdGhpcy5Jc0RyYWdpbmcgPSBmYWxzZTsNCgkJdGhpcy5sYXlvdXQ9bGF5b3V0Ow0KICAgICAgICB0aGlzLm9PYmogPSBHKCdkaWFsb2dCb3gnKTsNCiAgICAgICAgRXZlbnQub2JzZXJ2ZShHKCdkaWFsb2dCb3hUaXRsZScpLCAibW91c2Vkb3duIiwgdGhpcy5tb3ZlU3RhcnQuYmluZEFzRXZlbnRMaXN0ZW5lcih0aGlzKSwgZmFsc2UpOw0KICAgIH0sDQogICAgbW92ZVN0YXJ0OiBmdW5jdGlvbihldmVudCkgew0KICAgICAgICB0aGlzLklzRHJhZ2luZyA9IHRydWU7DQogICAgICAgIGlmICh0aGlzLmNvbnRlbnRUeXBlID09IDEpIHsNCiAgICAgICAgICAgIEcoImlmcmFtZUJHIikuc3R5bGUuZGlzcGxheSA9ICIiOw0KICAgICAgICAgICAgRygiaWZyYW1lQkciKS5zdHlsZS53aWR0aCA9IHRoaXMud2lkdGg7DQogICAgICAgICAgICBHKCJpZnJhbWVCRyIpLnN0eWxlLmhlaWdodCA9IHRoaXMuaGVpZ2h0Ow0KICAgICAgICB9Ow0KICAgICAgICBFdmVudC5vYnNlcnZlKGRvY3VtZW50LCAibW91c2Vtb3ZlIiwgdGhpcy5tb3VzZW1vdmUuYmluZEFzRXZlbnRMaXN0ZW5lcih0aGlzKSwgZmFsc2UpOw0KICAgICAgICBFdmVudC5vYnNlcnZlKGRvY3VtZW50LCAibW91c2V1cCIsIHRoaXMubW91c2V1cC5iaW5kQXNFdmVudExpc3RlbmVyKHRoaXMpLCBmYWxzZSk7DQogICAgICAgIEV2ZW50Lm9ic2VydmUoZG9jdW1lbnQsICJzZWxlY3RzdGFydCIsIHRoaXMucmV0dXJuRmFsc2UsIGZhbHNlKTsNCiAgICAgICAgdGhpcy5kcmFnRGF0YSA9IHsNCiAgICAgICAgICAgIHg6IEV2ZW50LnBvaW50ZXJYKGV2ZW50KSwNCiAgICAgICAgICAgIHk6IEV2ZW50LnBvaW50ZXJZKGV2ZW50KQ0KICAgICAgICB9Ow0KICAgICAgICB0aGlzLmJhY2tEYXRhID0gew0KICAgICAgICAgICAgeDogcGFyc2VJbnQodGhpcy5vT2JqLnN0eWxlLmxlZnQpLA0KICAgICAgICAgICAgeTogcGFyc2VJbnQodGhpcy5vT2JqLnN0eWxlLnRvcCkNCiAgICAgICAgfTsNCiAgICB9LA0KICAgIG1vdXNlbW92ZTogZnVuY3Rpb24oZXZlbnQpIHsNCiAgICAgICAgaWYgKCF0aGlzLklzRHJhZ2luZykgcmV0dXJuOw0KICAgICAgICB2YXIgaUxlZnQgPSBFdmVudC5wb2ludGVyWChldmVudCkgLSB0aGlzLmRyYWdEYXRhWyJ4Il0gKyBwYXJzZUludCh0aGlzLm9PYmouc3R5bGUubGVmdCk7DQogICAgICAgIHZhciBpVG9wID0gRXZlbnQucG9pbnRlclkoZXZlbnQpIC0gdGhpcy5kcmFnRGF0YVsieSJdICsgcGFyc2VJbnQodGhpcy5vT2JqLnN0eWxlLnRvcCk7DQogICAgICAgIGlmICh0aGlzLmRyYWdEYXRhWyJ5Il0gPCBwYXJzZUludCh0aGlzLm9PYmouc3R5bGUudG9wKSkgaVRvcCA9IGlUb3AgLSAxMjsNCiAgICAgICAgZWxzZSBpZiAodGhpcy5kcmFnRGF0YVsieSJdID4gcGFyc2VJbnQodGhpcy5vT2JqLnN0eWxlLnRvcCkgKyAyNSkgaVRvcCA9IGlUb3AgKyAxMjsNCiAgICAgICAgdGhpcy5vT2JqLnN0eWxlLmxlZnQgPSBpTGVmdCArICJweCI7DQogICAgICAgIHRoaXMub09iai5zdHlsZS50b3AgPSBpVG9wICsgInB4Ijs7DQogICAgICAgIGlmICh0aGlzLnNob3dTaGFkb3cpIHsNCiAgICAgICAgICAgIEcoJ2RpYWxvZ0JveFNoYWRvdycpLnN0eWxlLmxlZnQgPSBpTGVmdCArIHRoaXMuc2hhZG93V2lkdGggKyAicHgiOw0KICAgICAgICAgICAgRygnZGlhbG9nQm94U2hhZG93Jykuc3R5bGUudG9wID0gaVRvcCArIHRoaXMuc2hhZG93V2lkdGggKyAicHgiOw0KICAgICAgICB9Ow0KICAgICAgICB0aGlzLmRyYWdEYXRhID0gew0KICAgICAgICAgICAgeDogRXZlbnQucG9pbnRlclgoZXZlbnQpLA0KICAgICAgICAgICAgeTogRXZlbnQucG9pbnRlclkoZXZlbnQpDQogICAgICAgIH07DQogICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gIm1vdmUiOw0KICAgIH0sDQogICAgbW91c2V1cDogZnVuY3Rpb24oZXZlbnQpIHsNCiAgICAgICAgaWYgKCF0aGlzLklzRHJhZ2luZykgcmV0dXJuOw0KICAgICAgICBpZiAodGhpcy5jb250ZW50VHlwZSA9PSAxKSBHKCJpZnJhbWVCRyIpLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICAgIGRvY3VtZW50Lm9ubW91c2Vtb3ZlID0gbnVsbDsNCiAgICAgICAgZG9jdW1lbnQub25tb3VzZXVwID0gbnVsbDsNCiAgICAgICAgdmFyIG1vdXNYID0gRXZlbnQucG9pbnRlclgoZXZlbnQpIC0gKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0IHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCk7DQogICAgICAgIHZhciBtb3VzWSA9IEV2ZW50LnBvaW50ZXJZKGV2ZW50KSAtIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wKTsNCiAgICAgICAgdmFyIG9PYmpCb3R0b207DQogICAgICAgIHZhciBvT2JqUmlnaHQ7DQogICAgICAgIGlmICh0aGlzLnNob3dTaGFkb3cpIHsNCiAgICAgICAgICAgIG9PYmpCb3R0b20gPSBwYXJzZUludCh0aGlzLm9PYmouc3R5bGUudG9wKSArIHRoaXMuaGVpZ2h0ICsgdGhpcy5zaGFkb3dXaWR0aDsNCiAgICAgICAgICAgIG9PYmpSaWdodCA9IHBhcnNlSW50KHRoaXMub09iai5zdHlsZS5sZWZ0KSArIHRoaXMud2lkdGggKyB0aGlzLnNoYWRvd1dpZHRoOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgb09iakJvdHRvbSA9IHBhcnNlSW50KHRoaXMub09iai5zdHlsZS50b3ApICsgdGhpcy5oZWlnaHQ7DQogICAgICAgICAgICBvT2JqUmlnaHQgPSBwYXJzZUludCh0aGlzLm9PYmouc3R5bGUubGVmdCkgKyB0aGlzLndpZHRoOw0KICAgICAgICB9Ow0KICAgICAgICBpZiAobW91c1ggPCAxIHx8IG1vdXNZIDwgMSB8fCBtb3VzWCA+IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGggfHwgbW91c1kgPiBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCB8fCBwYXJzZUludCh0aGlzLm9PYmouc3R5bGUubGVmdCkgPCAwIHx8IHBhcnNlSW50KHRoaXMub09iai5zdHlsZS50b3ApIDwgMCB8fCBvT2JqUmlnaHQgPiBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoIHx8IG9PYmpCb3R0b20gPiBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCkgew0KICAgICAgICAgICAgdGhpcy5vT2JqLnN0eWxlLmxlZnQgPSB0aGlzLmJhY2tEYXRhWyJ4Il07DQogICAgICAgICAgICB0aGlzLm9PYmouc3R5bGUudG9wID0gdGhpcy5iYWNrRGF0YVsieSJdOw0KICAgICAgICAgICAgaWYgKHRoaXMuc2hvd1NoYWRvdykgew0KICAgICAgICAgICAgICAgIEcoJ2RpYWxvZ0JveFNoYWRvdycpLnN0eWxlLmxlZnQgPSB0aGlzLmJhY2tEYXRhLnggKyB0aGlzLnNoYWRvd1dpZHRoOw0KICAgICAgICAgICAgICAgIEcoJ2RpYWxvZ0JveFNoYWRvdycpLnN0eWxlLnRvcCA9IHRoaXMuYmFja0RhdGEueSArIHRoaXMuc2hhZG93V2lkdGg7DQogICAgICAgICAgICB9Ow0KICAgICAgICB9Ow0KICAgICAgICB0aGlzLklzRHJhZ2luZyA9IGZhbHNlOw0KICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9ICIiOw0KICAgICAgICBFdmVudC5zdG9wT2JzZXJ2aW5nKGRvY3VtZW50LCAic2VsZWN0c3RhcnQiLCB0aGlzLnJldHVybkZhbHNlLCBmYWxzZSk7DQogICAgfSwNCiAgICByZXR1cm5GYWxzZTogZnVuY3Rpb24oKSB7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQp9Ow0KZnVuY3Rpb24gb3BlbnNob3codXJsLCB0aXRsZSwgdywgaCwgc3R5cGUpIHsNCiAgICBnX3BvcCA9IG5ldyBQb3B1cCh7DQogICAgICAgIGNvbnRlbnRUeXBlOiBzdHlwZSwNCiAgICAgICAgaXNSZWxvYWRPbkNsb3NlOiBmYWxzZSwNCiAgICAgICAgd2lkdGg6IHcsDQogICAgICAgIGhlaWdodDogaA0KICAgIH0pOw0KICAgIGdfcG9wLnNldENvbnRlbnQoInRpdGxlIiwgdGl0bGUpOw0KICAgIGdfcG9wLnNldENvbnRlbnQoImNvbnRlbnRVcmwiLCB1cmwpOw0KICAgIGdfcG9wLmJ1aWxkKCk7DQogICAgZ19wb3Auc2hvdygpOw0KfQ0KDQpmdW5jdGlvbiBvcGVuV2luZG93V2l0aFNjcm9sbCh1cmwsIHRpdGxlLCB3LCBoLCBzdHlwZSxvYmopIHsNCgkNCiAgICB2YXIgeHkgPSBnZXRYWVZhbHVlcyhvYmopOw0KICAgIGdfcG9wID0gbmV3IFBvcHVwKHsNCiAgICAgICAgY29udGVudFR5cGU6IHN0eXBlLA0KICAgICAgICBpc1JlbG9hZE9uQ2xvc2U6IGZhbHNlLA0KICAgICAgICB3aWR0aDogdywNCiAgICAgICAgaGVpZ2h0OiBoDQogICAgfSk7DQogICAgZ19wb3AuaW5pdFRyaWdnZXJPYmpBdHRyKHh5LngseHkueSxvYmoub2Zmc2V0V2lkdGgsb2JqLm9mZnNldEhlaWdodCk7DQogICAgDQogICAgZ19wb3Auc2V0Q29udGVudCgidGl0bGUiLCB0aXRsZSk7DQogICAgZ19wb3Auc2V0Q29udGVudCgiY29udGVudFVybCIsIHVybCk7DQogICAgLy9EaXNwbGF5IGhvcml6b250YWwgc2Nyb2xsIA0KICAgIGdfcG9wLmNvbmZpZy5zY3JvbGxUeXBlID0gInllcyI7DQogICAgDQogICAgZ19wb3AuYnVpbGQoKTsNCiAgICBnX3BvcC5zaG93RmxvYXRXaW4oKTsNCiAgICANCn0NCmZ1bmN0aW9uIGdldFhZVmFsdWVzKG9iaikNCnsNCiAgICB2YXIgeHkgOw0KIAlpZiAoIW9iai54IHx8ICFvYmoueSkNCiAJew0KCQkJeHkgPSB0aGlzLmdldEFic1BvaW50KG9iaik7DQoJfSANCiAJZWxzZSANCiAJew0KCQkJeHkgPSB7DQoJCQkJIngiIDogb3BzLngsDQoJCQkJInkiIDogb3BzLnkNCgkJCX07DQoJfQ0KIAkNCiAJcmV0dXJuIHh5Ow0KfQ0KDQpmdW5jdGlvbiBnZXRBYnNQb2ludChlKSANCnsNCgl2YXIgeCA9IGUub2Zmc2V0TGVmdDsNCgl2YXIgeSA9IGUub2Zmc2V0VG9wOw0KDQoJd2hpbGUgKGUgPSBlLm9mZnNldFBhcmVudCkgew0KCQl4ICs9IGUub2Zmc2V0TGVmdDsNCgkJaWYgKGUuc3R5bGUub3ZlcmZsb3cgPT0gImF1dG8iKSB7DQoJCQl4IC09IGUuc2Nyb2xsTGVmdDsNCgkJfQ0KCQl5ICs9IGUub2Zmc2V0VG9wOw0KCQlpZiAoZS5zdHlsZS5vdmVyZmxvdyA9PSAiYXV0byIpIHsNCgkJCXkgLT0gZS5zY3JvbGxUb3A7DQoJCX0NCgl9DQoNCglyZXR1cm4gew0KCQkieCIgOiB4LA0KCQkieSIgOiB5DQoJfTsNCn0NCg0KZnVuY3Rpb24gZ19jbG9zZV9wb3BfcmUoKSB7DQogICAgZ19wb3AuY2xvc2UoKTsNCiAgICBsb2NhdGlvbi5yZWxvYWQoKTsNCn0NCmZ1bmN0aW9uIENvbW1lbnQodXJsLCB3LCBoKSB7DQogICAgZ19wb3AgPSBuZXcgUG9wdXAoew0KICAgICAgICBjb250ZW50VHlwZTogMSwNCiAgICAgICAgaXNSZWxvYWRPbkNsb3NlOiBmYWxzZSwNCiAgICAgICAgd2lkdGg6IHcsDQogICAgICAgIGhlaWdodDogaA0KICAgIH0pOw0KICAgIGdfcG9wLnNldENvbnRlbnQoInRpdGxlIiwgImxvZ2luIik7DQogICAgZ19wb3Auc2V0Q29udGVudCgic2Nyb2xsVHlwZSIsICJubyIpOw0KICAgIGdfcG9wLnNldENvbnRlbnQoImNvbnRlbnRVcmwiLCB1cmwpOw0KICAgIGdfcG9wLmJ1aWxkKCk7DQogICAgZ19wb3Auc2hvdygpOw0KfQ0KZnVuY3Rpb24gZ19jbG9zZV9wb3AoKSB7DQoNCiAgICBnX3BvcC5jbG9zZSgpOw0KICAgIGdfcG9wID0gbnVsbDsNCn0NCmZ1bmN0aW9uIFNob3dBbGVydCh0aXRsZSwgY29udGVudCwgdywgaCkgew0KICAgIHZhciBwb3AgPSBuZXcgUG9wdXAoew0KICAgICAgICBjb250ZW50VHlwZTogNCwNCiAgICAgICAgaXNSZWxvYWRPbkNsb3NlOiBmYWxzZSwNCiAgICAgICAgd2lkdGg6IHcsDQogICAgICAgIGhlaWdodDogaA0KICAgIH0pOw0KICAgIHBvcC5zZXRDb250ZW50KCJ0aXRsZSIsIHRpdGxlKTsNCiAgICBwb3Auc2V0Q29udGVudCgiYWxlcnRDb24iLCBjb250ZW50KTsNCiAgICBwb3AuYnVpbGQoKTsNCiAgICBwb3Auc2hvdygpOw0KfQ0KZnVuY3Rpb24gV2Nsb3NlKCkgew0KICAgIGdfcG9wLmNsb3NlKCk7DQogICAgZ19wb3AgPSBudWxsOw0KfQ0KDQo=</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
    </HTTPResponse>
  </HTTPTask>
</HTTPSnapshot>