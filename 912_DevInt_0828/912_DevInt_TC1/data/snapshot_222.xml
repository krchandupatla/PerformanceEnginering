<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="222">
  <HTTPTask id="1105" hostname="aa-pt6245.dev.accela.com:5443" path="https://aa-pt6245.dev.accela.com:5443/portlets/framework/includes/javascript/ac360ui.js" url="https://aa-pt6245.dev.accela.com:5443/portlets/framework/includes/javascript/ac360ui.js" ip="13.93.163.237" port="5443" connectionId="224" origin="Primary" frame="1" startDateTime="2017-08-28T11:36:12.800-07:00" startTime="1030891765" endTime="1030891781">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Accept" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdCwgKi8qO3E9MC44</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Referer" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cHM6Ly9hYS1wdDYyNDUuZGV2LmFjY2VsYS5jb206NTQ0My9wb3J0bGV0cy9mcmFtZXdvcmsvaW5jbHVkZXMvZXJyb3IvYmxhbmsuanNwP21vZHVsZT1CdWlsZGluZw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cookie" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SlNFU1NJT05JRD1xMERSRlRiOXRJZTdKR2oteEQrUFdBbkM7IF9fY2ZkdWlkPWRiNjBkNWU3ODRkYmRlN2NhNTlkZGVjNmUzYWNkYzk2MjE1MDI0MzA3NzM7IF9wZW5kb19hY2NvdW50SWQuNTY3YTE0NmUtNjVhYy00NmE1LTdhMTMtYjMyNDc0YTRmNjdiPUZMQUdTVEFGRjsgX3BlbmRvX3Zpc2l0b3JJZC41NjdhMTQ2ZS02NWFjLTQ2YTUtN2ExMy1iMzI0NzRhNGY2N2I9ZTlhZjFmYTUxNzFhZWQwYWRiZWUwMDI4NGE0NTUwODY0NjVhYTMxZmMzNjU2M2VkYWJmNjQ2ZTExZDU1YTYwODgwOTVhMjNlZmVlZTBjYTU2NzAzZDEwOTY5ZDNhYzU0ZTk3OWFiMjExODkyZWU1NmRlZmM5MWM0Njg0NzZhMDg7IF9wZW5kb19tZXRhLjU2N2ExNDZlLTY1YWMtNDZhNS03YTEzLWIzMjQ3NGE0ZjY3Yj0zMzk5OTk2NjE3OyBKU0VTU0lPTklEPSoqKioqKioqKioqKioqKioqKioqKioqKioqKjsgMDEtSmFuLTE5NzAgMDA6MDA6MTAgR01UOyBMQVNURVNUX1JFUVVFU1RfVElNRT0xNTAzOTQ1MDkxNzM3OyBob3N0U2lnbk9uPXRydWU7IGdfY3VycmVudF9sYW5ndWFnZV9leHQ9ZW5fVVM7IExBVEVTVF9XRUJfU0VSVkVSPTEwLjEuMC42OyBMQVRFU1RfU0VTU0lPTl9JRD1xMERSRlRiOXRJZTdKR2oteEQrUFdBbkM7IEFDQXV0aD04ODUxMTg5MzIwNjIzNTY2MDkwODU2Mzg4MDg0NzY5NjU2NzkxNDI5MTQwNTc2ODY1NzY4MzM2Nzg0MDUyMTA3Mzk4MzYzMjgyMzEwOTAxMTAxNjQwOTUzMzg0NTIxNDI1MjA0NDYzOTI5OTE0NDc3MjQ1MDc1MjYyMzMxNjc5ODsgQUNTaWduT25Nb2R1bGU9U1NPU3RhbmRhcmQ7IEFBUGVyc2lzdExvZ2luU2VydlByb3ZDb2RlPUZMQUdTVEFGRjsgTG9naW5TZXJ2UHJvdkNvZGU0TXVsdGlBZ2VuY3k9RkxBR1NUQUZGOyBMb2dpblVzZXJuYW1lNE11bHRpQWdlbmN5PTE3OUREMTNBMTg2MDI4RjQ7IEFDU2lnbm9mZj0iaHR0cHM6Ly9hYS1wdDYyNDUuZGV2LmFjY2VsYS5jb206NTQ0My9wb3J0bGV0cy9zZWN1cml0eS9zaWdub3V0LmRvIjsgQUNTd2l0Y2hBZ2VuY3k9Imh0dHBzOi8vYWEtcHQ2MjQ1LmRldi5hY2NlbGEuY29tOjU0NDMvcG9ydGxldHMvY29tbW9ucy9zc28vYmxhbmsuanNwIg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YWEtcHQ2MjQ1LmRldi5hY2NlbGEuY29tOjU0NDM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Q2xvc2U=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIGh0dHBzOi8vYWEtcHQ2MjQ1LmRldi5hY2NlbGEuY29tOjU0NDMvcG9ydGxldHMvZnJhbWV3b3JrL2luY2x1ZGVzL2phdmFzY3JpcHQvYWMzNjB1aS5qcyBIVFRQLzEuMQ0KQWNjZXB0OiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0LCAqLyo7cT0wLjgNClJlZmVyZXI6IGh0dHBzOi8vYWEtcHQ2MjQ1LmRldi5hY2NlbGEuY29tOjU0NDMvcG9ydGxldHMvZnJhbWV3b3JrL2luY2x1ZGVzL2Vycm9yL2JsYW5rLmpzcD9tb2R1bGU9QnVpbGRpbmcNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMNClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdPVzY0OyBUcmlkZW50LzcuMDsgcnY6MTEuMCkgbGlrZSBHZWNrbw0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpDb29raWU6IEpTRVNTSU9OSUQ9cTBEUkZUYjl0SWU3SkdqLXhEK1BXQW5DOyBfX2NmZHVpZD1kYjYwZDVlNzg0ZGJkZTdjYTU5ZGRlYzZlM2FjZGM5NjIxNTAyNDMwNzczOyBfcGVuZG9fYWNjb3VudElkLjU2N2ExNDZlLTY1YWMtNDZhNS03YTEzLWIzMjQ3NGE0ZjY3Yj1GTEFHU1RBRkY7IF9wZW5kb192aXNpdG9ySWQuNTY3YTE0NmUtNjVhYy00NmE1LTdhMTMtYjMyNDc0YTRmNjdiPWU5YWYxZmE1MTcxYWVkMGFkYmVlMDAyODRhNDU1MDg2NDY1YWEzMWZjMzY1NjNlZGFiZjY0NmUxMWQ1NWE2MDg4MDk1YTIzZWZlZWUwY2E1NjcwM2QxMDk2OWQzYWM1NGU5NzlhYjIxMTg5MmVlNTZkZWZjOTFjNDY4NDc2YTA4OyBfcGVuZG9fbWV0YS41NjdhMTQ2ZS02NWFjLTQ2YTUtN2ExMy1iMzI0NzRhNGY2N2I9MzM5OTk5NjYxNzsgSlNFU1NJT05JRD0qKioqKioqKioqKioqKioqKioqKioqKioqKio7IDAxLUphbi0xOTcwIDAwOjAwOjEwIEdNVDsgTEFTVEVTVF9SRVFVRVNUX1RJTUU9MTUwMzk0NTA5MTczNzsgaG9zdFNpZ25Pbj10cnVlOyBnX2N1cnJlbnRfbGFuZ3VhZ2VfZXh0PWVuX1VTOyBMQVRFU1RfV0VCX1NFUlZFUj0xMC4xLjAuNjsgTEFURVNUX1NFU1NJT05fSUQ9cTBEUkZUYjl0SWU3SkdqLXhEK1BXQW5DOyBBQ0F1dGg9ODg1MTE4OTMyMDYyMzU2NjA5MDg1NjM4ODA4NDc2OTY1Njc5MTQyOTE0MDU3Njg2NTc2ODMzNjc4NDA1MjEwNzM5ODM2MzI4MjMxMDkwMTEwMTY0MDk1MzM4NDUyMTQyNTIwNDQ2MzkyOTkxNDQ3NzI0NTA3NTI2MjMzMTY3OTg7IEFDU2lnbk9uTW9kdWxlPVNTT1N0YW5kYXJkOyBBQVBlcnNpc3RMb2dpblNlcnZQcm92Q29kZT1GTEFHU1RBRkY7IExvZ2luU2VydlByb3ZDb2RlNE11bHRpQWdlbmN5PUZMQUdTVEFGRjsgTG9naW5Vc2VybmFtZTRNdWx0aUFnZW5jeT0xNzlERDEzQTE4NjAyOEY0OyBBQ1NpZ25vZmY9Imh0dHBzOi8vYWEtcHQ2MjQ1LmRldi5hY2NlbGEuY29tOjU0NDMvcG9ydGxldHMvc2VjdXJpdHkvc2lnbm91dC5kbyI7IEFDU3dpdGNoQWdlbmN5PSJodHRwczovL2FhLXB0NjI0NS5kZXYuYWNjZWxhLmNvbTo1NDQzL3BvcnRsZXRzL2NvbW1vbnMvc3NvL2JsYW5rLmpzcCINCkhvc3Q6IGFhLXB0NjI0NS5kZXYuYWNjZWxhLmNvbTo1NDQzDQpDb25uZWN0aW9uOiBDbG9zZQ0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
        <HTTPCookies>
          <HTTPHeaderEntity name="JSESSIONID" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>cTBEUkZUYjl0SWU3SkdqLXhEK1BXQW5D</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="__cfduid" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZGI2MGQ1ZTc4NGRiZGU3Y2E1OWRkZWM2ZTNhY2RjOTYyMTUwMjQzMDc3Mw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="_pendo_accountId.567a146e-65ac-46a5-7a13-b32474a4f67b" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RkxBR1NUQUZG</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="_pendo_visitorId.567a146e-65ac-46a5-7a13-b32474a4f67b" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZTlhZjFmYTUxNzFhZWQwYWRiZWUwMDI4NGE0NTUwODY0NjVhYTMxZmMzNjU2M2VkYWJmNjQ2ZTExZDU1YTYwODgwOTVhMjNlZmVlZTBjYTU2NzAzZDEwOTY5ZDNhYzU0ZTk3OWFiMjExODkyZWU1NmRlZmM5MWM0Njg0NzZhMDg=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="_pendo_meta.567a146e-65ac-46a5-7a13-b32474a4f67b" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MzM5OTk5NjYxNw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="JSESSIONID" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>KioqKioqKioqKioqKioqKioqKioqKioqKioq</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="01-Jan-1970 00:00:10 GMT; LASTEST_REQUEST_TIME" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTUwMzk0NTA5MTczNw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="hostSignOn" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dHJ1ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="g_current_language_ext" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW5fVVM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="LATEST_WEB_SERVER" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTAuMS4wLjY=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="LATEST_SESSION_ID" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>cTBEUkZUYjl0SWU3SkdqLXhEK1BXQW5D</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ACAuth" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ODg1MTE4OTMyMDYyMzU2NjA5MDg1NjM4ODA4NDc2OTY1Njc5MTQyOTE0MDU3Njg2NTc2ODMzNjc4NDA1MjEwNzM5ODM2MzI4MjMxMDkwMTEwMTY0MDk1MzM4NDUyMTQyNTIwNDQ2MzkyOTkxNDQ3NzI0NTA3NTI2MjMzMTY3OTg=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ACSignOnModule" index="12">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>U1NPU3RhbmRhcmQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="AAPersistLoginServProvCode" index="13">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RkxBR1NUQUZG</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="LoginServProvCode4MultiAgency" index="14">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RkxBR1NUQUZG</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="LoginUsername4MultiAgency" index="15">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTc5REQxM0ExODYwMjhGNA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ACSignoff" index="16">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Imh0dHBzOi8vYWEtcHQ2MjQ1LmRldi5hY2NlbGEuY29tOjU0NDMvcG9ydGxldHMvc2VjdXJpdHkvc2lnbm91dC5kbyI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ACSwitchAgency" index="17">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Imh0dHBzOi8vYWEtcHQ2MjQ1LmRldi5hY2NlbGEuY29tOjU0NDMvcG9ydGxldHMvY29tbW9ucy9zc28vYmxhbmsuanNwIg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
        </HTTPCookies>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Server" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QXBhY2hlLUNveW90ZS8xLjE=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cache-Control" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>cHJpdmF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Expires" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMCBVVEM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-XSS-Protection" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Set-Cookie" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TEFTVEVTVF9SRVFVRVNUX1RJTUU9MTUwMzk0NTA5MjI2OTsgRG9tYWluPWRldi5hY2NlbGEuY29tOyBQYXRoPS87IFNlY3VyZSxMQVRFU1RfV0VCX1NFUlZFUj0xMC4xLjAuNjsgRG9tYWluPWRldi5hY2NlbGEuY29tOyBQYXRoPS87IFNlY3VyZSxMQVRFU1RfU0VTU0lPTl9JRD1xMERSRlRiOXRJZTdKR2oteEQrUFdBbkM7IERvbWFpbj1kZXYuYWNjZWxhLmNvbTsgUGF0aD0vOyBTZWN1cmU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Vy8iNTcyODUtMTUwMTYxNzAxNjAwMCI=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAwMSBBdWcgMjAxNyAxOTo1MDoxNiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Type" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>dGV4dC9qYXZhc2NyaXB0</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Encoding" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Vary" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="11">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW9uLCAyOCBBdWcgMjAxNyAxODozMTozMSBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="12">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Y2xvc2U=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIE9LDQpTZXJ2ZXI6IEFwYWNoZS1Db3lvdGUvMS4xDQpDYWNoZS1Db250cm9sOiBwcml2YXRlDQpFeHBpcmVzOiBUaHUsIDAxIEphbiAxOTcwIDAwOjAwOjAwIFVUQw0KWC1YU1MtUHJvdGVjdGlvbjogMA0KU2V0LUNvb2tpZTogTEFTVEVTVF9SRVFVRVNUX1RJTUU9MTUwMzk0NTA5MjI2OTsgRG9tYWluPWRldi5hY2NlbGEuY29tOyBQYXRoPS87IFNlY3VyZSxMQVRFU1RfV0VCX1NFUlZFUj0xMC4xLjAuNjsgRG9tYWluPWRldi5hY2NlbGEuY29tOyBQYXRoPS87IFNlY3VyZSxMQVRFU1RfU0VTU0lPTl9JRD1xMERSRlRiOXRJZTdKR2oteEQrUFdBbkM7IERvbWFpbj1kZXYuYWNjZWxhLmNvbTsgUGF0aD0vOyBTZWN1cmUNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpFVGFnOiBXLyI1NzI4NS0xNTAxNjE3MDE2MDAwIg0KTGFzdC1Nb2RpZmllZDogVHVlLCAwMSBBdWcgMjAxNyAxOTo1MDoxNiBHTVQNCkNvbnRlbnQtVHlwZTogdGV4dC9qYXZhc2NyaXB0DQpDb250ZW50LUVuY29kaW5nOiBnemlwDQpWYXJ5OiBBY2NlcHQtRW5jb2RpbmcNCkRhdGU6IE1vbiwgMjggQXVnIDIwMTcgMTg6MzE6MzEgR01UDQpDb25uZWN0aW9uOiBjbG9zZQ0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>Ly9BY2NlbGEgQXV0b21hdGlvbg0KLy9GaWxlOiBhYzM2MHVpLmpzDQovL0FjY2VsYSwgSW5jLg0KLy9Db3B5cmlnaHQgKEMpOiAyMDExLTIwMTQNCi8vDQovL0Rlc2NyaXB0aW9uOiBUaGlzIGphdmFzY3JpcHQgaXMgYSBzZXQgZm9yIGNvbW1vbmUgamF2YXNjcmlwdCB1dGlsIGZ1bmN0aW9uLg0KLy8NCi8vTm90ZXM6DQovLw0KLy9SZXZpc2lvbiBIaXN0b3J5OiANCi8vMTIvNi8yMDExLCBSYXkgWmhhbmcsICBJbml0aWFsIFZlcnNpb24uDQoNCnZhciBVSSA9IFVJID8gVUkgOiB7fTsgLy8gYWMzNjB1aS5qcyBtYXkgYmUgaW52b2x2ZWQgdHdpY2UsIHNvIHVzZSB0aGUgb2xkIFVJIG9iamVjdCBpZiBleGlzdHMNClVJLnBvc2l0aW9uTWdyID0gew0KCWRpc3BsYXlPYmogOiBudWxsLA0KCQ0KCWNhY2hlIDogbmV3IEhhc2hNYXAoKSwNCgkNCglnZW5lcmF0b3JDYWNoZUlkIDogZnVuY3Rpb24oc3JjSWQsIHRhcmdldElkKQ0KCXsNCgkJcmV0dXJuIHNyY0lkICsgIjoiICsgdGFyZ2V0SWQ7DQoJfSwNCgkNCgkvLyBnZXQgb25lIGVsZW1lbnQgcG9zdGlvbnt4OiAseTogLCB3aWR0aDogLCBoZWlnaHQ6ICwgbGVmdFVwLi4uLi59DQoJLy8gaGF2ZSB0byBjYWNoZShwYXJlbnRPYmojI29iaikNCglnZXRQb3NpdGlvbiA6IGZ1bmN0aW9uKG9iaiwgcGFyZW50T2JqKSB7DQoJCXZhciB0YXJnZXRXID0gb2JqLm9mZnNldFdpZHRoOw0KCQl2YXIgdGFyZ2V0SCA9IG9iai5vZmZzZXRIZWlnaHQ7DQoJCXZhciBwb3NpdGlvbiA9IHRoaXMuZ2V0Qm91bmQob2JqLCBwYXJlbnRPYmopOw0KCQkvL2NvbnRhaW5lciBoYXZlIGhvcml6b250YWwgc2Nyb2xsIGJhcg0KCQlpZihvYmohPW51bGwgJiYgb2JqID09IHBhcmVudE9iaikNCgkJew0KCQkJaWYob2JqLm9mZnNldFdpZHRoIDwgb2JqLnNjcm9sbFdpZHRoKQ0KCQkJew0KCQkJCXRhcmdldFcgPSBvYmouc2Nyb2xsV2lkdGg7DQoJCQkJLy9jb250YWluZXIgaGF2ZSB2ZXJ0aWNhbCBzY3JvbGwgYmFyDQoJCQkJaWYob2JqLm9mZnNldFdpZHRoID4gb2JqLmNsaWVudFdpZHRoICYmIG9iai5vZmZzZXRXaWR0aCA8IChvYmouc2Nyb2xsV2lkdGggLSAob2JqLm9mZnNldFdpZHRoIC0gb2JqLmNsaWVudFdpZHRoKSkpDQoJCQkJew0KCQkJCQl0YXJnZXRXIC09IChvYmoub2Zmc2V0V2lkdGggLSBvYmouY2xpZW50V2lkdGgpOw0KCQkJCX0NCgkJCX0NCgkJfQ0KCQkNCgkJdmFyIGxlZnRVcCA9IHsNCgkJCSd4JyA6IHBvc2l0aW9uLmxlZnQsDQoJCQkneScgOiBwb3NpdGlvbi50b3ANCgkJfQ0KCQkNCgkJdmFyIGxlZnREb3duID0gew0KCQkJJ3gnIDogcG9zaXRpb24ubGVmdCwNCgkJCSd5JyA6IHBvc2l0aW9uLnRvcCArIHRhcmdldEgNCgkJfTsNCgkJdmFyIHJpZ2h0VXAgPSB7DQoJCQkneCcgOiBwb3NpdGlvbi5sZWZ0ICsgdGFyZ2V0VywNCgkJCSd5JyA6IHBvc2l0aW9uLnRvcA0KCQl9Ow0KCQl2YXIgcmlnaHREb3duID0gew0KCQkJJ3gnIDogcG9zaXRpb24ubGVmdCArIHRhcmdldFcsDQoJCQkneScgOiAocG9zaXRpb24udG9wICsgdGFyZ2V0SCkNCgkJfTsNCg0KCQlyZXR1cm4gew0KCQkJJ2xlZnRVcCcgOiBsZWZ0VXAsDQoJCQknbGVmdERvd24nIDogbGVmdERvd24sDQoJCQkncmlnaHRVcCcgOiByaWdodFVwLA0KCQkJJ3JpZ2h0RG93bicgOiByaWdodERvd24sDQoJCQknd2lkdGgnIDogdGFyZ2V0VywNCgkJCSdoZWlnaHQnIDogdGFyZ2V0SCwNCgkJCSdwb3NpdGlvbicgOiBwb3NpdGlvbg0KCQl9Ow0KCX0sDQoNCgkvLyBnZXQgbGVmdCwgcmlnaHQsIHRvcCwgYm90dG9tLCByZWZlcmVuY2UgcGFyZW50SWQgY29udGFpbg0KCS8vcGFyZW50SWQ6IHJlZmVyZW5jZSBpZA0KCWdldEJvdW5kIDogZnVuY3Rpb24ob2JqLCBwYXJlbnRPYmopDQoJew0KCQl2YXIgcCA9IG9iajsNCgkJaWYgKHAgPT0gbnVsbCkgew0KCQkJcmV0dXJuIHsNCgkJCQkibGVmdCIgOiAwLA0KCQkJCSJ0b3AiIDogMCwNCgkJCQkicmlnaHQiIDogMCwNCgkJCQkiYm90dG9tIiA6IDANCgkJCX07DQoJCX0NCgkJDQoJCS8vY29udGFpbiBvYmplY3QNCgkJaWYgKHBhcmVudE9iaiAmJiBvYmogPT0gcGFyZW50T2JqKQ0KCQl7DQoJCQlyZXR1cm4gew0KCQkJCSJsZWZ0IiA6IDAsDQoJCQkJInRvcCIgOiAwLA0KCQkJCSJyaWdodCIgOiBwLm9mZnNldFdpZHRoLA0KCQkJCSJib3R0b20iIDogcC5vZmZzZXRIZWlnaHQNCgkJCX07DQoJCX0NCgkJDQoJCXZhciBsZWZ0ID0gMDsNCgkJdmFyIHRvcCA9IDA7DQoJCXZhciByaWdodCA9IDA7DQoJCXZhciBib3R0b20gPSAwOw0KCQl2YXIgbGVmdEJvcmRlcldpZHRoID0gMDsNCgkJdmFyIHBhcmVudFJpZ2h0Qm9yZGVyV2lkdGggPSAwOw0KCQl2YXIgYm9keVdpZHRoID0gZG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aDsNCgkJDQoJCWZ1bmN0aW9uIGdldEJvcmRlclJpZ2h0V2lkdGgob2JqKXsNCgkJCWlmIChvYmouY3VycmVudFN0eWxlKQ0KCQkJew0KCQkJCXJldHVybiBvYmouY3VycmVudFN0eWxlLmJvcmRlclJpZ2h0V2lkdGg7DQoJCQl9DQoJCQllbHNlDQoJCQl7DQoJCQkJcmV0dXJuIGdldENvbXB1dGVkU3R5bGUob2JqLCBmYWxzZSkuYm9yZGVyUmlnaHRXaWR0aDsNCgkJCX0NCgkJfQ0KCQkNCgkJd2hpbGUgKHApIHsNCgkJCS8vcC5vZmZzZXRQYXJlbnQub2Zmc2V0V2lkdGggIT0gcC5vZmZzZXRXaWR0aCA6ICAgICBhIHRhZ2xpYiBpbiBJRSwgb2Zmc2V0TGVmdCBtYXkgYmUgYXBwZWFyIGRldmlhdGlvbg0KCQkJaWYocC5vZmZzZXRMZWZ0ID49IDApDQoJCQl7DQoJCQkJaWYocC5vZmZzZXRQYXJlbnQub2Zmc2V0V2lkdGggIT0gcC5vZmZzZXRXaWR0aCkNCgkJCQl7DQoJCQkJCWxlZnQgKz0gcC5vZmZzZXRMZWZ0ICsgbGVmdEJvcmRlcldpZHRoOw0KCQkJCX0gZWxzZSB7DQoJCQkJCWxlZnQgKz0gbGVmdEJvcmRlcldpZHRoOw0KCQkJCX0NCgkJCX0NCgkJCWlmIChwLm9mZnNldFRvcCA+IDApDQoJCQl7CQ0KCQkJCXRvcCArPSBwLm9mZnNldFRvcDsNCgkJCX0NCgkJCWlmKHAuc2Nyb2xsVG9wID4gMCkNCgkJCXsNCgkJCQl0b3AgLT0gcC5zY3JvbGxUb3A7DQoJCQl9DQoJCQlpZiAocC5vZmZzZXRQYXJlbnQgJiYgcC5vZmZzZXRXaWR0aCA+IDApDQoJCQl7DQoJCQkJLy9wYXJlbnROb2RlIHJpZ2h0IGJvcmRlcg0KCQkJCWlmKHBhcnNlSW50KGdldEJvcmRlclJpZ2h0V2lkdGgocC5vZmZzZXRQYXJlbnQpKSkNCgkJCQl7DQoJCQkJCXBhcmVudFJpZ2h0Qm9yZGVyV2lkdGggPSBwYXJzZUludChnZXRCb3JkZXJSaWdodFdpZHRoKHAub2Zmc2V0UGFyZW50KSk7DQoJCQkJfSBlbHNlIHsNCgkJCQkJcGFyZW50UmlnaHRCb3JkZXJXaWR0aCA9IDA7DQoJCQkJfQ0KCQkJCWlmKHAub2Zmc2V0TGVmdCA+PSAwKQ0KCQkJCXsNCgkJCQkJLy9wLm9mZnNldFBhcmVudC5vZmZzZXRXaWR0aCA9IHAub2Zmc2V0V2lkdGggLCBidXQgcC5vZmZzZXRMZWZ0ID4gMA0KCQkJCQlpZihwLm9mZnNldFBhcmVudC5vZmZzZXRXaWR0aCAhPSBwLm9mZnNldFdpZHRoKQ0KCQkJCQl7DQoJCQkJCQlyaWdodCArPSAocC5vZmZzZXRQYXJlbnQuY2xpZW50V2lkdGggKyBwYXJlbnRSaWdodEJvcmRlcldpZHRoIC0gcC5vZmZzZXRXaWR0aCAtIHAub2Zmc2V0TGVmdCk7DQoJCQkJCX0NCgkJCQl9IGVsc2Ugew0KCQkJCQkvL2NoaWxkTm9kZSBvZmZzZXRXaWR0aCA+IHBhcmVudE5vZGUgb2Zmc2V0V2lkdGgNCgkJCQkJaWYocC5vZmZzZXRXaWR0aCA+IHAub2Zmc2V0UGFyZW50Lm9mZnNldFdpZHRoKQ0KCQkJCQl7DQoJCQkJCQl2YXIgdGVtcCA9IHAub2Zmc2V0V2lkdGggLSBwLm9mZnNldFBhcmVudC5vZmZzZXRXaWR0aCArIHAub2Zmc2V0TGVmdDsNCgkJCQkJCWlmKHRlbXAgPCAwICkNCgkJCQkJCXsNCgkJCQkJCQl0ZW1wID0gcC5vZmZzZXRXaWR0aCAtIHAub2Zmc2V0UGFyZW50LmNsaWVudFdpZHRoICsgcC5vZmZzZXRMZWZ0Ow0KCQkJCQkJfQ0KCQkJCQkJcmlnaHQgKz0gdGVtcDsNCgkJCQkJCS8vcmlnaHQgKz0gTWF0aC5hYnMocC5vZmZzZXRXaWR0aCAtIHAub2Zmc2V0UGFyZW50LmNsaWVudFdpZHRoICsgcC5vZmZzZXRMZWZ0KTsNCgkJCQkJfQ0KCQkJCQllbHNlIGlmIChwLm9mZnNldFdpZHRoIDwgcC5vZmZzZXRQYXJlbnQub2Zmc2V0V2lkdGgpDQoJCQkJCXsNCgkJCQkJCS8vY2hpbGROb2RlIG9mZnNldFdpZHRoID4gYm9keSBvZmZzZXRXaWR0aCwgdGhlbiBjaGlsZE5vZGUgb2Zmc2V0TGVmdCA8IDANCgkJCQkJCWlmKHAub2Zmc2V0V2lkdGggPj0gYm9keVdpZHRoKQ0KCQkJCQkJew0KCQkJCQkJCXZhciB0ZW1wID0gcC5vZmZzZXRQYXJlbnQub2Zmc2V0V2lkdGggLSBib2R5V2lkdGggKyBwLm9mZnNldExlZnQ7DQoJCQkJCQkJaWYodGVtcCA8IDAgKQ0KCQkJCQkJCXsNCgkJCQkJCQkJdGVtcCA9IHAub2Zmc2V0UGFyZW50Lm9mZnNldFdpZHRoIC0gZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCArIHAub2Zmc2V0TGVmdDsNCgkJCQkJCQl9DQoJCQkJCQkJcmlnaHQgKz0gKHAub2Zmc2V0UGFyZW50LmNsaWVudFdpZHRoIC0gcC5vZmZzZXRXaWR0aCAtIHRlbXApOw0KCQkJCQkJfSBlbHNlIHsNCgkJCQkJCQkvL2NoaWxkTm9kZSBvZmZzZXRXaWR0aCA+IHBhcmVudE5vZGUgd2lkdGgoZS5nIDogd2lkdGg9JzI1cHgnKS4gICBwYXJzZUludChwLm9mZnNldFBhcmVudC5jdXJyZW50U3R5bGUud2lkdGgpIG1heWJlIE5hTg0KCQkJCQkJCXZhciB0bXBXID0gJChwLm9mZnNldFBhcmVudCkuY3NzKCd3aWR0aCcpOw0KCQkJCQkJCWlmKHBhcnNlSW50KHRtcFcpKQ0KCQkJCQkJCXsNCgkJCQkJCQkJdmFyIHRlbXAgPSBwLm9mZnNldFdpZHRoIC0gcGFyc2VJbnQodG1wVykgKyBwLm9mZnNldExlZnQ7DQoJCQkJCQkJCXJpZ2h0ICs9IChwLm9mZnNldFBhcmVudC5jbGllbnRXaWR0aCAtIHAub2Zmc2V0V2lkdGggLSB0ZW1wKTsNCgkJCQkJCQl9DQoJCQkJCQl9IA0KCQkJCQl9DQoJCQkJfQ0KCQkJfQ0KCQkJaWYgKHAub2Zmc2V0UGFyZW50ICYmIHAub2Zmc2V0VG9wID4gMCkNCgkJCQlib3R0b20gKz0gKHAub2Zmc2V0UGFyZW50Lm9mZnNldEhlaWdodCAtIHAub2Zmc2V0SGVpZ2h0IC0gcC5vZmZzZXRUb3ApOw0KCQkJDQoJCQlwID0gcC5vZmZzZXRQYXJlbnQ7DQoJCQkNCgkJCWlmIChwICE9IG51bGwgJiYgcC50YWdOYW1lID09ICJCT0RZIikNCgkJCXsNCgkJCQlicmVhazsNCgkJCX0NCgkJCS8vcmVmZXJlbmNlIG9iamVjdCwgdXN1YWxseSwgcmVmZXIgdG8gZGl2LCB3aGljIHBvc2l0aW9uIGlzIGFic29sdXRlIG9yIHJlbGVjdGl2ZSByZWxhdGl2ZSANCgkJCWlmICh0eXBlb2YgKHBhcmVudE9iaikgIT0gInVuZGVmaW5lZCIgJiYgcCA9PSBwYXJlbnRPYmopDQoJCQl7DQoJCQkJYnJlYWs7DQoJCQl9DQoJCQkNCgkJCS8vYWRkIGJvcmRlcg0KCQkJaWYgKHAgIT0gbnVsbCkNCgkJCXsNCgkJCQl0cnl7DQoJCQkJCXZhciBjdXJyZW50U3R5bGVPYmogPSBzY3JvbGxCYXJJc3N1ZS5nZXRDdXJyZW50U3R5bGUoZG9jdW1lbnQsIHApOw0KCQkJCQlpZihwYXJzZUludChjdXJyZW50U3R5bGVPYmouYm9yZGVyTGVmdFdpZHRoKSkNCgkJCQkJew0KCQkJCQkJbGVmdEJvcmRlcldpZHRoID0gY3VycmVudFN0eWxlT2JqLmJvcmRlckxlZnRXaWR0aCA/IHBhcnNlSW50KGN1cnJlbnRTdHlsZU9iai5ib3JkZXJMZWZ0V2lkdGgpIDogMDsNCgkJCQkJfSBlbHNlIHsNCgkJCQkJCWxlZnRCb3JkZXJXaWR0aCA9IDA7DQoJCQkJCX0NCgkJCQl9IGNhdGNoKGUpew0KCQkJCQlsZWZ0Qm9yZGVyV2lkdGggPSAwOw0KCQkJCX0NCgkJCX0NCgkJfQ0KDQoJCXJldHVybiB7DQoJCQknbGVmdCcgOiBsZWZ0LA0KCQkJJ3RvcCcgOiB0b3AsDQoJCQkncmlnaHQnIDogcmlnaHQsDQoJCQknYm90dG9tJyA6IGJvdHRvbQ0KCQl9Ow0KCX0sDQoJDQoJLy8gYXIgeCwgc2V0IHJpZ2h0DQoJLy8gcmlnaHQgcmVmZXJlbmNlIGlzIGJvZHksIG5vdCBzYW1lIHdpdGggbGVmdCByZWZlcmVuY2UgcGFyZW50IGNvbnRhaW4NCgljb3VudFhJbkFyIDogZnVuY3Rpb24oKQ0KCXsNCgkJLy9vcmlnaW4gb2YgY29vcmRpbmF0ZXMgaXMgY2xpZW50V2lkdGggbGVmdCB1cCBwb2ludC4NCgkJdmFyIHggPSB0aGlzLnNyY1Bvc2l0aW9uLnJpZ2h0RG93bi54IC0gdGhpcy50YXJnZXRQb3NpdGlvbi53aWR0aCAtIHRoaXMuYWRqdXN0V2lkdGg7DQoJCWlmICh4IDwgMCAmJiAodGhpcy5zcmNQb3NpdGlvbi5sZWZ0RG93bi54ICsgdGhpcy5hZGp1c3RXaWR0aCArIHRoaXMudGFyZ2V0UG9zaXRpb24ud2lkdGgpIDw9IHRoaXMuY29udGFpblBvc2l0aW9uLnJpZ2h0RG93bi54KSANCgkJew0KCQkJeCA9IHRoaXMuc3JjUG9zaXRpb24ubGVmdERvd24ueCArIHRoaXMuYWRqdXN0V2lkdGg7DQoJCX0gDQoJCQ0KCQlpZih0aGlzLmNvbnRhaW5PYmouc2Nyb2xsV2lkdGggPiB0aGlzLmNvbnRhaW5PYmouY2xpZW50V2lkdGggJiYgIXRoaXMuY29uZmlnT2JqLmlzU2hvd0NoaWxkTWVudSkNCgkJew0KCQkJeCA9IHggLSAodGhpcy5jb250YWluT2JqLnNjcm9sbFdpZHRoIC0gdGhpcy5jb250YWluT2JqLmNsaWVudFdpZHRoKTsNCgkJfQ0KCQlyZXR1cm4geDsNCgl9LA0KCQ0KCS8vbm9ybWFsDQoJY291bnRYSW5Ob3JtYWwgOiBmdW5jdGlvbigpDQoJew0KCQkvL2NvbnRhaW4gc2Nyb2xsIHdpZHRoDQoJCWlmKHRoaXMuc3JjUG9zaXRpb24ubGVmdERvd24ueCA+IHRoaXMuY29udGFpblBvc2l0aW9uLnJpZ2h0RG93bi54KQ0KCQl7DQoJCQl0aGlzLmNvbnRhaW5Qb3NpdGlvbi5yaWdodERvd24ueCA9IHRoaXMuY29udGFpbk9iai5zY3JvbGxXaWR0aDsNCgkJfQ0KDQoJCXZhciB4ID0gdGhpcy5zcmNQb3NpdGlvbi5sZWZ0RG93bi54ICsgdGhpcy5hZGp1c3RXaWR0aCArIHRoaXMudGFyZ2V0UG9zaXRpb24ud2lkdGg7DQoJCWlmICh4ID4gdGhpcy5jb250YWluUG9zaXRpb24ucmlnaHREb3duLngpIHsNCgkJCXggPSB0aGlzLnNyY1Bvc2l0aW9uLnJpZ2h0RG93bi54IC0gdGhpcy5hZGp1c3RXaWR0aCAtIHRoaXMudGFyZ2V0UG9zaXRpb24ud2lkdGg7Ly8gbGVmdCBkb3duDQoJCQlpZiAoeCA8IDApDQoJCQkJeCA9IDA7DQoJCX0gZWxzZS8vIGxlZnQgZG93bg0KCQl7DQoJCQl4ID0gdGhpcy5zcmNQb3NpdGlvbi5sZWZ0RG93bi54ICsgdGhpcy5hZGp1c3RXaWR0aDsNCgkJfQ0KCQlyZXR1cm4geDsNCgl9LA0KCQ0KCS8vIGNvdW50IHggY29yZGluYXRpb24NCgljb3VudFggOiBmdW5jdGlvbigpDQoJew0KCQl2YXIgdGFyZ2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy50YXJnZXRJZCk7DQoJCXZhciB4ID0gMDsNCgkJaWYgKFVJLkJhc2UuY2hlY2tBcigpKQ0KCQl7DQoJCQl4ID0gdGhpcy5jb3VudFhJbkFyKCk7DQoJCX0NCgkJZWxzZQ0KCQl7DQoJCQl4ID0gdGhpcy5jb3VudFhJbk5vcm1hbCgpOw0KCQl9DQoJCXRhcmdldC5zdHlsZS5sZWZ0ID0geCArICJweCI7DQoJCXJldHVybiB4Ow0KCX0sDQoNCgkvLyBjb3VudCB5IGNvcmRpbmF0aW9uDQoJY291bnRZIDogZnVuY3Rpb24oKQ0KCXsNCgkJdmFyIGNsaWVudFdpZHRoID0gdGhpcy5jb250YWluT2JqLmNsaWVudFdpZHRoOw0KCQkNCgkJdmFyIHkgPSB0aGlzLnNyY1Bvc2l0aW9uLmxlZnREb3duLnkgLSB0aGlzLmFkanVzdEhlaWdodCAtIHRoaXMuY29udGFpblBvc2l0aW9uLmxlZnRVcC55Ow0KCQkvLyAwLWJvdHRvbSwgMS10b3ANCgkJaWYgKHRoaXMuanVkZ2VZKCkgPT0gMSkgew0KCQkJeSA9IHRoaXMuc3JjUG9zaXRpb24ubGVmdFVwLnkgLSB0aGlzLmNvbnRhaW5Qb3NpdGlvbi5sZWZ0VXAueQ0KCQkJCQktIHRoaXMudGFyZ2V0UG9zaXRpb24uaGVpZ2h0Ow0KCQl9DQoJCXZhciBzaG93RGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy50YXJnZXRJZCk7DQoJCXNob3dEaXYuc3R5bGUudG9wID0geSArICJweCI7DQoJCXRoaXMubG9ja2VkS2V5ID0gc2Nyb2xsQmFySXNzdWUuYXV0b1Jlc2l6ZVBvcFVwQ29udGFpbmVyKGRvY3VtZW50LHRoaXMudGFyZ2V0SWQpOw0KCQkNCgkJLy9zY3JvbGwgYmFyIGFmZmVjdCB4IHBvc2l0aW9uIGluIGFyLg0KCQl2YXIgdG1wV2lkdGggPSB0aGlzLmNvbnRhaW5PYmouY2xpZW50V2lkdGg7DQoJCWlmIChVSS5CYXNlLmNoZWNrQXIoKSAmJiBjbGllbnRXaWR0aCA8IHRoaXMuY29udGFpbk9iai5jbGllbnRXaWR0aCAmJiAhaXNOYU4ocGFyc2VJbnQoc2hvd0Rpdi5zdHlsZS5sZWZ0KSkpDQoJCXsNCgkJCXNob3dEaXYuc3R5bGUubGVmdCA9IHBhcnNlSW50KHNob3dEaXYuc3R5bGUubGVmdCkgKyAodGhpcy5jb250YWluT2JqLmNsaWVudFdpZHRoIC0gY2xpZW50V2lkdGgpICsgInB4IjsNCgkJfQ0KCQlyZXR1cm4geTsNCgl9LA0KCQ0KCS8qKg0KCSAqIGZpbmQgUmVmZXJlbmNlIGNvbnRhaW4sIHJldHVybiBjb250YWluIG9iamVjdA0KCSAqIERJVjogaWYgRElWJ3MgcG9zaXRpb24gaXMgYWJzb2x1dGUvcmVsYXRpdmUvZml4ZWQvZXhpc3Qgc2Nyb2xsIGJhciwgdGhlbiByZXR1cm4gdGhlIHRhZy4NCgkgKiANCgkgKiAqLw0KCWZpbmRDb250YWluIDogZnVuY3Rpb24oc3JjSWQsIHRhcmdldElkKQ0KCXsNCgkJdmFyIGNvbnRhaW5PYmogPSB0aGlzLmNhY2hlLmdldCh0aGlzLmdlbmVyYXRvckNhY2hlSWQoc3JjSWQsIHRhcmdldElkKSk7DQoJCWlmIChjb250YWluT2JqICE9IG51bGwpDQoJCQlyZXR1cm4gY29udGFpbk9iajsNCgkJDQoJCXZhciBzcmMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzcmNJZCk7DQoJCXZhciB0YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YXJnZXRJZCk7DQoNCgkJdmFyIHAgPSBzcmM7DQoJCXdoaWxlIChwKSB7DQoJCQlwID0gcC5wYXJlbnROb2RlOw0KCQkJaWYgKHAudGFnTmFtZSAhPSAiRElWIiAmJiBwLnRhZ05hbWUgIT0gIkJPRFkiKSB7DQoJCQkJY29udGludWU7DQoJCQl9DQoJCQkNCgkJCWlmICghcC5jb250YWlucyhzcmMpIHx8ICEoIXRhcmdldCB8fCBwLmNvbnRhaW5zKHRhcmdldCkpKQ0KCQkJew0KCQkJCWNvbnRpbnVlOw0KCQkJfQ0KCQkJLy9yZWxhdGl2ZSBpcyByZWxldmFuY2UgIHBhcmVudCBjb250YWluJ3MgcG9zaXRpb24ocmVsYXRpdmUvYWJzb2x1dGUpDQoJCQlpZiAocC50YWdOYW1lID09ICJESVYiKSANCgkJCXsNCgkJCQkvL2JlY2F1c2UgcC5jdXJyZW50U3R5bGUucG9zaXRpb24gIT0gInJlbGF0aXZlIiBhd2F5IHJldHVybiB0dXJlLCBzbyBkbyBsaWtlIHRoaXMganVkZ2UNCgkJCQl2YXIgY3VycmVudFN0eWxlID0gc2Nyb2xsQmFySXNzdWUuZ2V0Q3VycmVudFN0eWxlKGRvY3VtZW50LCBwKTsNCgkJCQkNCgkJCQlpZihjdXJyZW50U3R5bGUucG9zaXRpb24gPT0gInJlbGF0aXZlIiB8fCBjdXJyZW50U3R5bGUub3ZlcmZsb3cgIT0gInZpc2libGUiKQ0KCQkJCXsNCgkJCQkJY29udGFpbk9iaiA9IHA7DQoJCQkJCWJyZWFrOw0KCQkJCX0NCgkJCQllbHNlDQoJCQkJew0KCQkJCQljb250aW51ZTsNCgkJCQl9DQoJCQl9DQoJCQkNCgkJCS8vYm9keQ0KCQkJY29udGFpbk9iaiA9IHA7DQoJCQlicmVhazsNCgkJfQ0KCQkNCgkJdGhpcy5jYWNoZS5wdXQodGhpcy5nZW5lcmF0b3JDYWNoZUlkKHNyY0lkLCB0YXJnZXRJZCksIGNvbnRhaW5PYmopOw0KCQkNCgkJcmV0dXJuIGNvbnRhaW5PYmo7DQoJfSwNCg0KCS8vIGp1ZGdlIHByb2dyYW0gc2hvdWxkIHBsdXMgaGVpZ2h0DQoJLy8gMC1ib3R0b20sIDEtdG9wDQoJanVkZ2VZIDogZnVuY3Rpb24oKQ0KCXsNCgkJLy9nZXQgcmVhbCBjb250YWluIGhlaWdodA0KCQl2YXIgdGVtcEVsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7DQoJCXRlbXBFbGVtZW50LmlkID0gInRlbXBFbGVtZW50IjsNCgkJdGhpcy5jb250YWluT2JqLmFwcGVuZENoaWxkKHRlbXBFbGVtZW50KTsNCgkJdmFyIHRlbXBQb3N0aW9uID0gdGhpcy5nZXRQb3NpdGlvbih0ZW1wRWxlbWVudCwgdGhpcy5jb250YWluT2JqKTsNCgkJc2Nyb2xsQmFySXNzdWUucmVtb3ZlTm9kZSh0ZW1wRWxlbWVudCk7DQoJCXNjcm9sbEJhcklzc3VlLmF1dG9BZGp1c3RPdXRlckNvbnRhaW5lcihkb2N1bWVudCk7CQkNCgkJLy9uZXcgZGl2IGhlaWdodCBtYXliZSA8IGNvbnRhaW4gaGVpZ2h0DQoJCWlmKHRlbXBQb3N0aW9uLmxlZnREb3duLnkgPCB0aGlzLmNvbnRhaW5PYmoub2Zmc2V0SGVpZ2h0KQ0KCQl7DQoJCQl0ZW1wUG9zdGlvbi5sZWZ0RG93bi55ID0gdGhpcy5jb250YWluT2JqLm9mZnNldEhlaWdodDsNCgkJfQ0KDQoJCS8vIGNoZWNrIGJvdHRvbToNCgkJdmFyIHRtcEggPSB0ZW1wUG9zdGlvbi5sZWZ0RG93bi55IC0gdGhpcy5zcmNQb3NpdGlvbi5sZWZ0RG93bi55Ow0KDQoJCXZhciBvdmVyZmxvd1ggPSBzY3JvbGxCYXJJc3N1ZS5maW5kU3ViTm9kZXNNYXhWYWx1ZShkb2N1bWVudC5ib2R5KS5vdmVyZmxvd194Ow0KCQlpZihvdmVyZmxvd1ggfHwgKHRtcEggPiB0aGlzLnRhcmdldFBvc2l0aW9uLmhlaWdodCkpew0KCQkJdG1wSCAtPSBzY3JvbGxCYXJJc3N1ZS5TQ1JPTExfQkFSX1NJWkU7DQoJCX0NCg0KCQlpZiAodG1wSCA+IHRoaXMudGFyZ2V0UG9zaXRpb24uaGVpZ2h0KSB7DQoJCQlyZXR1cm4gMDsNCgkJfSBlbHNlIGlmICh0bXBIIDwgMCkNCgkJew0KCQkJdGhpcy5hdHRhY2hXaW5kb3dVbkxvYWRFdmVudCgpOw0KCQkJcmV0dXJuIDA7DQoJCX0NCg0KCQkvLyBjaGVjayB0b3AsIGRyb3AgbWVudSBuZXJ2ZSBzaG93IG9uIHRvcA0KCQlpZiAoIXRoaXMuY29uZmlnT2JqLmlzTWVudSkNCgkJew0KCQkJdG1wSCA9IHRoaXMuc3JjUG9zaXRpb24ubGVmdFVwLnkgLSB0aGlzLmNvbnRhaW5Qb3NpdGlvbi5sZWZ0VXAueTsNCgkJCWlmICh0bXBIID4gdGhpcy50YXJnZXRQb3NpdGlvbi5oZWlnaHQpIHsNCgkJCQlyZXR1cm4gMTsNCgkJCX0NCgkJfQ0KCQkNCgkJdGhpcy5hdHRhY2hXaW5kb3dVbkxvYWRFdmVudCgpOw0KCQlyZXR1cm4gMDsNCgl9LA0KCQ0KCS8vd2hlbiBpZnJhbWUgdXJsIHdpbGwgY2hhbmdlLCBoaWRlIGRpdg0KCWF0dGFjaFdpbmRvd1VuTG9hZEV2ZW50IDogZnVuY3Rpb24oKQ0KCXsNCgkJQWMzNjAuYXR0YWNoRXZlbnQod2luZG93LCJvbnVubG9hZCIsIGZ1bmN0aW9uKCl7DQoJCQlVSS5wb3NpdGlvbk1nci5oaWRkZW4oKTsNCgkJfSk7DQoJfSwNCg0KCS8vIGFkZCBldmVudCB0byBib2R5DQoJLy93aGVuIHBvcC11cCBkaXYgaGlkZGVuLCB0aGUgbWV0aG9kIHdpbGwgcmVtb3ZlDQoJYXR0YWNoRXZlbjJCb2R5IDogZnVuY3Rpb24oKQ0KCXsNCgkJaWYgKHRoaXMuYm9keUNsaWNrRm4gPT0gbnVsbCkNCgkJew0KCQkJdGhpcy5ib2R5Q2xpY2tGbiA9IHRoaXMuaGlkZGVuLmJpbmQodGhpcyk7DQoJCQlBYzM2MC5hdHRhY2hFdmVudChkb2N1bWVudC5ib2R5LCJvbmNsaWNrIiwgdGhpcy5ib2R5Q2xpY2tGbik7DQoJCX0NCgl9LA0KDQoJLy8gYWRkIG9ucHJvcGVydHljaGFuZ2UgZXZlbnQgdG8gc2hvdyBwYW5lbA0KCWF0dGFjaEV2ZW50MlBhbmVsIDogZnVuY3Rpb24oaWQpDQoJew0KCQl2YXIgcGFuZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7DQoJCXZhciBmbiA9IGZ1bmN0aW9uKCkgew0KCQkJaWYodGhpcy5jb25maWdPYmogJiYgdGhpcy5jb25maWdPYmouaXNTaG93Q2hpbGRNZW51KQ0KCQkJew0KCQkJCXJldHVybjsNCgkJCX0NCgkJCQ0KCQkJaWYgKHBhbmVsLnN0eWxlLmRpc3BsYXkgPT0gJ25vbmUnKSB7DQoJCQkJdGhpcy5kZXN0cm95KCk7DQoJCQl9DQoJCX0uYmluZCh0aGlzKTsNCg0KCQlBYzM2MC5hdHRhY2hFdmVudChwYW5lbCwnb25wcm9wZXJ0eWNoYW5nZScsIGZuKQ0KCX0sDQoNCglkZXN0cm95RXZlbjJCb2R5IDogZnVuY3Rpb24oKQ0KCXsNCgkJaWYgKHRoaXMuYm9keUNsaWNrRm4pew0KCQkJQWMzNjAuZGV0YWNoRXZlbnQoZG9jdW1lbnQuYm9keSwib25jbGljayIsIHRoaXMuYm9keUNsaWNrRm4pOw0KCQkJdGhpcy5ib2R5Q2xpY2tGbiA9IG51bGw7DQoJCX0NCgl9LA0KDQoJLyoJDQoJICogaWQ6IHNob3VsZCB0byBzaG93IGVsZW1lbnQsIHNyY0lkOiBmaXJlIGV2ZW50IGlkDQoJICogZHJvcCBtZW51IG5ldmVyIHNob3cgb24gdGhvcA0KCSAqIGNvbmZpZ09iajp7aXNBZGRIaWRlbkV2ZW50OiBkZWZhdWx0IGFkZCBhdHRhY2hFdmVuMkJvZHkoZmFsc2U6IHJldHVybjspLCBpc01lbnU6IHRydWUvZmFsc2UvdW5kZWZpbmQsIA0KCSAqIAlpc1Nob3dDaGlsZE1lbnU6IHRydWUvZmFsc2UvdW5kZWZpbmQsIHNob3dBZnRlcjpmbiwgZGVzdHJveUJlZm9yZTpmbn0NCgkgKiANCgkgKiAqLw0KCXNob3cgOiBmdW5jdGlvbihzcmNJZCwgdGFyZ2V0SWQsIGNvbmZpZ09iaikNCgl7DQoJCXRoaXMuY29uZmlnT2JqID0gY29uZmlnT2JqIHx8IHt9Ow0KCQkNCgkJdmFyIHNob3dEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YXJnZXRJZCk7DQoJCS8vaWYgaGF2ZSBjaGlsZCBtZW51LG5vdCBoaWRkZW4gY2hpbGQgbWVudS4NCgkJaWYoIXRoaXMuY29uZmlnT2JqLmlzU2hvd0NoaWxkTWVudSkNCgkJew0KCQkJaWYgKHNob3dEaXYuc3R5bGUuZGlzcGxheSA9PSAiYmxvY2siKSANCgkJCXsNCgkJCQlzaG93RGl2LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQoJCQkJcmV0dXJuOw0KCQkJfSANCgkJCWVsc2UgaWYgKHRoaXMuZGlzcGxheU9iaiAhPSBudWxsKSANCgkJCXsNCgkJCQl0aGlzLmRlc3Ryb3koKTsNCgkJCX0NCgkJCXRoaXMuaGlkZGVuKCk7DQoJCX0NCgkJc2hvd0Rpdi5zdHlsZS50b3AgPSAiIjsNCgkJc2hvd0Rpdi5zdHlsZS5sZWZ0ID0gIjBweCI7DQoJCXNob3dEaXYuc3R5bGUucmlnaHQgPSAiIjsNCgkJDQoJCXNob3dEaXYuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQoJCXNob3dEaXYuc3R5bGUudmlzaWJpbGl0eSA9ICIiOw0KCQkNCgkJLy9Vc2VyIGRlZmluZWQgZnVuY3Rpb24sIHJ1biBzcGVjaWFsIGxvZ2ljIGhlcmUuDQoJCWlmICh0aGlzLmNvbmZpZ09iai5zaG93QWZ0ZXIpDQoJCXsNCgkJCXRoaXMuY29uZmlnT2JqLnNob3dBZnRlcih0YXJnZXRJZCk7DQoJCX0NCgkJDQoJDQoJCXRoaXMuc3JjSWQgPSBzcmNJZDsNCgkJdGhpcy50YXJnZXRJZCA9IHRhcmdldElkOw0KCQkNCgkJLy9zaG93IHN1YiBtZW51IGl0ZW0gcG9zaXRpb24NCgkJdGhpcy5hZGp1c3RXaWR0aCA9IDA7DQoJCXRoaXMuYWRqdXN0SGVpZ2h0ID0gMDsNCgkJaWYodGhpcy5jb25maWdPYmouaXNTaG93Q2hpbGRNZW51KQ0KCQl7DQoJCQl0aGlzLmFkanVzdFdpZHRoID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc3JjSWQpLm9mZnNldFdpZHRoICsgMjsNCgkJCXRoaXMuYWRqdXN0SGVpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc3JjSWQpLm9mZnNldEhlaWdodDsNCgkJfQ0KCQkNCgkJdGhpcy5jb250YWluT2JqID0gdGhpcy5maW5kQ29udGFpbihzcmNJZCwgdGFyZ2V0SWQpOw0KCQl0aGlzLnNyY1Bvc2l0aW9uID0gdGhpcy5nZXRQb3NpdGlvbihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzcmNJZCksIHRoaXMuY29udGFpbk9iaik7DQoJCXRoaXMudGFyZ2V0UG9zaXRpb24gPSB0aGlzLmdldFBvc2l0aW9uKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhcmdldElkKSwgdGhpcy5jb250YWluT2JqKTsNCgkJdGhpcy5jb250YWluUG9zaXRpb24gPSB0aGlzLmdldFBvc2l0aW9uKHRoaXMuY29udGFpbk9iaiwgdGhpcy5jb250YWluT2JqKTsNCgkJDQoJCXRoaXMuY291bnRYKCk7DQoJCXRoaXMuY291bnRZKCk7DQoJCQ0KCQkvLyBDdXJyZW50IGRpc3BsYXlPYmogb2JqZWN0IG9ubHkgcmVjb3JkIGEgc3JjSWQuIElmIGRpc3BsYXkgaXMgdGhlIHNlY29uZGFyeSBtZW51LCB3aWxsIG92ZXJ3cml0ZSBtZW51IHNyY0lkLg0KCQkvLyBUaGVyZSBhcmUgbm8gcmVjb3JkcyBhIHNlY29uZCBsZXZlbCBvZiBtZW51cyBzcmNJZCwgd2hlbiBtZW51IGRlc3Ryb3ksIGNoZWNrIHNlY29uZGFyeSBtZW51IHNyY0lkLCBhbmQgaGlkZGVuIHNlY29uZGFyeSBtZW51Lg0KCQkvLyBidWc6IDQ1MDM0LiAgSWYgcmVmYWN0b3IgY29kZSwgbmVlZCBjaGFuZ2UgZGlzcGxheU9iaiBvYmplY3QgdG8gQXJyYXkuDQoJCWlmKCF0aGlzLmNvbmZpZ09iai5pc1Nob3dDaGlsZE1lbnUpDQoJCXsNCgkJCXRoaXMuZGlzcGxheU9iaiA9IEJhc2VKUy5hcHBseSggew0KCQkJCSJpZCIgOiB0YXJnZXRJZCwNCgkJCQkic3JjSWQiIDogc3JjSWQNCgkJCX0sIHRoaXMuZ2V0UG9zaXRpb24oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0SWQpKSwgdGhpcy5jb250YWluT2JqKTsNCgkJCXRoaXMuYXR0YWNoRXZlbnQyUGFuZWwodGFyZ2V0SWQpOw0KCQl9DQoNCgkJLy9zdG9wIGV2ZW50DQoJCXZhciBldmVudCA9IEFjMzYwLmdldEV2ZW50KCk7DQoJCWlmKGV2ZW50KQ0KCQl7DQoJCQl0aGlzLnN0b3BFdmVudChldmVudCk7DQoJCX0NCgkJDQoJCXZhciBpc0FkZEhpZGVuRXZlbnQgPSB0aGlzLmNvbmZpZ09iai5pc0FkZEhpZGVuRXZlbnQ7DQoJCWlmKGlzQWRkSGlkZW5FdmVudCA9PSB1bmRlZmluZWQpDQoJCXsNCgkJCWlzQWRkSGlkZW5FdmVudCA9IHRydWU7DQoJCX0NCgkJaWYgKCFpc0FkZEhpZGVuRXZlbnQpDQoJCQlyZXR1cm47DQoJCXNldFRpbWVvdXQoIlVJLnBvc2l0aW9uTWdyLmF0dGFjaEV2ZW4yQm9keSgpIiwgNTAwKTsNCgl9LA0KCQ0KCS8vc3RvcCBldmVudCBwcm9wYWdhdGlvbiwgYm9keSBjbGljayBldmVudCBjYW4gaGlkZGVuIHBvcHVwIGRpdg0KCXN0b3BFdmVudCA6IGZ1bmN0aW9uKGUpIHsNCgkJZSA9IHdpbmRvdy5ldmVudD93aW5kb3cuZXZlbnQ6ZTsNCgkJaWYgKGUuc3RvcFByb3BhZ2F0aW9uKSB7DQoJCQllLnN0b3BQcm9wYWdhdGlvbigpOy8vRkYNCgkJfSBlbHNlIHsNCgkJCWUuY2FuY2VsQnViYmxlID0gdHJ1ZTsvL2llDQoJCX0NCgl9LA0KDQoJLy8gY2hlY2sgbW91c2UgcG9zaXRpb24NCglqdWRnZU1vdXNlQXJlYSA6IGZ1bmN0aW9uKHgsIHkpDQoJew0KCQl2YXIgbGVmdFVwID0gdGhpcy5kaXNwbGF5T2JqLmxlZnRVcDsNCgkJdmFyIGxlZnREb3duID0gdGhpcy5kaXNwbGF5T2JqLmxlZnREb3duOw0KCQl2YXIgcmlnaHRVcCA9IHRoaXMuZGlzcGxheU9iai5yaWdodFVwOw0KCQl2YXIgcmlnaHREb3duID0gdGhpcy5kaXNwbGF5T2JqLnJpZ2h0RG93bjsNCg0KCQlpZiAobGVmdFVwLnggPCB4ICYmIHggPCByaWdodFVwLnggJiYgbGVmdFVwLnkgPCB5ICYmIHkgPCBsZWZ0RG93bi55KSB7DQoJCQlyZXR1cm4gdHJ1ZTsNCgkJfQ0KDQoJCXJldHVybiBmYWxzZTsNCgl9LA0KDQoJdmFsaWRhdGVIaWRkZW4gOiBmdW5jdGlvbigpDQoJew0KCQlpZiAodGhpcy5kaXNwbGF5T2JqID09IG51bGwpIHsNCgkJCXJldHVybiB0cnVlOw0KCQl9DQoNCgkJLy8gd2hlbiBvbmNsaWNrIGluIHBhbmVsIGFyZWENCgkJdmFyIGV2ZW50ID0gQWMzNjAuZ2V0RXZlbnQoKTsNCgkJaWYoZXZlbnQpDQoJCXsNCgkJCWlmICh0aGlzLmp1ZGdlTW91c2VBcmVhKGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpKSB7DQoJCQkJcmV0dXJuIHRydWU7DQoJCQl9DQoJCQkNCgkJCXZhciBwYW5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZGlzcGxheU9iai5pZCk7DQoNCgkJCS8vIHBhbmVsIGNvbnRhaW4gY2xpY2sgZWxlbWVudA0KCQkJaWYgKHBhbmVsICYmICBwYW5lbC5jb250YWlucyhldmVudC5zcmNFbGVtZW50KSkgew0KCQkJCXJldHVybiB0cnVlOw0KCQkJfQ0KCQl9DQoNCgkJcmV0dXJuIGZhbHNlOw0KCX0sDQoNCgkvLyBoaWRkZW4gc2hvdyBwYW5lbA0KCWRlc3Ryb3kgOiBmdW5jdGlvbigpDQoJew0KCQlpZiAoIXRoaXMuZGlzcGxheU9iaiB8fCAhdGhpcy5kaXNwbGF5T2JqLmlkKQ0KCQkJcmV0dXJuOw0KCQlpZighZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5kaXNwbGF5T2JqLmlkKSkNCgkJew0KCQkJcmV0dXJuOw0KCQl9DQoNCgkJLy9Vc2VyIGRlZmluZWQgZnVuY3Rpb24sIHJ1biBzcGVjaWFsIGxvZ2ljIGhlcmUuDQoJCWlmICh0aGlzLmNvbmZpZ09iai5kZXN0cm95QmVmb3JlKQ0KCQl7DQoJCQl0aGlzLmNvbmZpZ09iai5kZXN0cm95QmVmb3JlKHRoaXMuZGlzcGxheU9iai5pZCk7DQoJCX0NCgkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5kaXNwbGF5T2JqLmlkKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KCQkvLyBoaWRkZW4gc3ViIG1lbnUNCgkJaWYgKHRoaXMuY29uZmlnT2JqLmlzU2hvd0NoaWxkTWVudSAmJiB0aGlzLmNvbmZpZ09iai5jaGlsZE1lbnVJZCAmJiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmNvbmZpZ09iai5jaGlsZE1lbnVJZCkpDQoJCXsNCgkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuY29uZmlnT2JqLmNoaWxkTWVudUlkKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KCQl9DQoJCXRoaXMuZGlzcGxheU9iaiA9IG51bGw7DQoJCXNldFRpbWVvdXQoIlVJLnBvc2l0aW9uTWdyLmRlc3Ryb3lFdmVuMkJvZHkoKSIsIDUwMCk7DQoJCS8vdGhpcy5jYWNoZS5jbGVhcigpOw0KCQl2YXIgY3VycmVudElmcmFtZSA9IHNjcm9sbEJhcklzc3VlLmdldEZyYW1lRWxlbWVudChkb2N1bWVudCk7DQoJCXNjcm9sbEJhcklzc3VlLnJlbW92ZVNpbXVsYXRlRGlhbG9nKGN1cnJlbnRJZnJhbWUpOw0KCQlzY3JvbGxCYXJJc3N1ZS5hdXRvUmVzaXplUG9wVXBDb250YWluZXIoZG9jdW1lbnQsdGhpcy50YXJnZXRJZCwgdGhpcy5sb2NrZWRLZXkpOw0KCX0sDQoNCgkvLyBib2R5IGV2ZW50DQoJaGlkZGVuIDogZnVuY3Rpb24oKQ0KCXsNCgkJaWYgKCF0aGlzLnZhbGlkYXRlSGlkZGVuKCkpIHsNCgkJCXRoaXMuZGVzdHJveSgpOw0KCQl9DQoJCXJldHVybiB0cnVlOw0KCX0sDQoNCglnZXRFbWJlZFdpbmRvd3MgOiBmdW5jdGlvbigpDQoJew0KCQl2YXIgd2lucyA9IG5ldyBBcnJheSgpOw0KCQl2YXIgd2luID0gd2luZG93Ow0KCQl2YXIgdG1wV2luOyANCgkJd2hpbGUgKHdpbikgew0KCQkJdG1wV2luID0gd2luOw0KCQkJdHJ5ew0KCQkJCWlmICghd2luLmZyYW1lRWxlbWVudCkNCgkJCQkJYnJlYWs7DQoJCQl9Y2F0Y2goZSkNCgkJCXsNCgkJCQlicmVhazsNCgkJCX0NCgkJCXdpbnMucHVzaCh3aW4pOw0KCQkJd2luID0gd2luLnBhcmVudDsNCgkJCWlmICh0bXBXaW4gPT0gd2luKQ0KCQkJCWJyZWFrOw0KCQl9DQoJCXJldHVybiB3aW5zOw0KCX0NCg0KfTsNCg0KDQovL2dvIHRvIG1lbnUganVkZ2UgaGVpZ2h0LCBpdCB3aWxsIGJlIHJlY29uc3RydWN0IGNoYW5nZSBhdCA3LjMNClVJLnBvc2l0aW9uTWdyLmp1ZGdlSGVpZ2h0ID0gew0KCWp1ZGdlIDogZnVuY3Rpb24oc3JjSWQpDQoJew0KCQl2YXIgc3JjID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc3JjSWQpOw0KCQl2YXIgY29udGFpbiA9IFVJLnBvc2l0aW9uTWdyLmZpbmRDb250YWluKHNyY0lkKTsNCgkJdmFyIHRvcCA9IFVJLnBvc2l0aW9uTWdyLmdldEJvdW5kKHNyYywgY29udGFpbikudG9wOw0KCQl2YXIgdG1wSCA9IGNvbnRhaW4ub2Zmc2V0SGVpZ2h0Ow0KCQlpZih0bXBIIDwgY29udGFpbi5zY3JvbGxIZWlnaHQpDQoJCXsNCgkJCXRtcEggPSBjb250YWluLnNjcm9sbEhlaWdodDsNCgkJfQ0KCQkNCgkJLy9qdWRnZSB3aW5kb3cgaGVpZ2h0DQoJCWlmKHRvcCArIHNyYy5vZmZzZXRIZWlnaHQgKyBzY3JvbGxCYXJJc3N1ZS5TQ1JPTExfQkFSX1NJWkUgPiB0bXBIKQ0KCQl7DQoJCQl0aGlzLnNldFdpbmRvd0hlaWdodCh0b3AgKyBzcmMub2Zmc2V0SGVpZ2h0ICsgc2Nyb2xsQmFySXNzdWUuU0NST0xMX0JBUl9TSVpFIC0gY29udGFpbi5vZmZzZXRIZWlnaHQpOw0KCQl9DQoJfSwNCgkNCglzZXRXaW5kb3dIZWlnaHQgOiBmdW5jdGlvbihoZWlnaHQpDQoJew0KCQl2YXIgd2luZG93cyA9IFVJLnBvc2l0aW9uTWdyLmdldEVtYmVkV2luZG93cygpOw0KCQlpZiAoIXdpbmRvd3MpDQoJCQlyZXR1cm47DQoJCXRoaXMud2luZG93cyA9IHdpbmRvd3M7DQoJCWZvciAoIHZhciBpID0gMDsgaSA8IHdpbmRvd3MubGVuZ3RoOyBpKyspIHsNCgkJCWlmKHdpbmRvd3NbaV0uZnJhbWVFbGVtZW50KQ0KCQkJew0KCQkJCS8vcGFyZW50IGNvbnRhaW4gc2Nyb2xsSGVpZ2h0DQoJCQkJdmFyIHRlbXBIZWlnaHQgPSAwOw0KCQkJCWlmKHdpbmRvd3NbaV0ucGFyZW50KQ0KCQkJCXsNCgkJCQkJdGVtcEhlaWdodCA9IHdpbmRvd3NbaV0ucGFyZW50LmRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0Ow0KCQkJCX0NCgkJCQkNCgkJCQl3aW5kb3dzW2ldLmZyYW1lRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBwYXJzZUludCh3aW5kb3dzW2ldLmZyYW1lRWxlbWVudC5vZmZzZXRIZWlnaHQpDQoJCQkJCQkrIGhlaWdodCArICJweCI7DQoJCQkJDQoJCQkJLy9wYXJlbnQgY29udGFpbiBzY3JvbGxIZWlnaHQgd2hldGhlciBjaGFuZ2UNCgkJCQlpZih3aW5kb3dzW2ldLnBhcmVudCAmJiB0ZW1wSGVpZ2h0ID09IHdpbmRvd3NbaV0ucGFyZW50LmRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0KQ0KCQkJCXsNCgkJCQkJYnJlYWs7DQoJCQkJfQ0KCQkJfQ0KCQl9DQoJfQ0KfTsNCg0KdGFibGVDb3JuZXIgPSB7DQoNCgl0YXJnZXRfaWQgOiAiIiwNCg0KCWV2ZW50cyA6IHsNCgkJYmVmb3JlIDogImJlZm9yZSIsDQoJCWFmdGVyIDogImFmdGVyIg0KCX0sLy8gZGVmaW5lIGV2ZW50DQoJbGlzdGVuZXJzIDoge30sDQoNCgkvLyBvOntiZWZvcmU6IGZuLCBhZnRlcjogZm59DQoJYWRkTGlzdGVuZXIgOiBmdW5jdGlvbihvKSB7DQoNCgkJZm9yICggdmFyIHAgaW4gbykgew0KCQkJaWYgKCF0aGlzLmxpc3RlbmVyc1twXSkNCgkJCQl0aGlzLmxpc3RlbmVyc1twXSA9IFtdOw0KCQkJdGhpcy5saXN0ZW5lcnNbcF0ucHVzaChvW3BdKTsNCgkJfQ0KDQoJfSwNCg0KCWZpcmVFdmVudCA6IGZ1bmN0aW9uKGV2ZW50LCBhcmdzKSB7DQoJCXZhciBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVyc1tldmVudF07DQoJCWlmICghbGlzdGVuZXJzKSB7DQoJCQlyZXR1cm47DQoJCX0NCgkJZm9yICggdmFyIGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7DQoJCQlsaXN0ZW5lcnNbaV0oYXJncyk7DQoJCX0NCgl9LA0KDQoJYWRkVGFibGVMaXN0ZW4gOiBmdW5jdGlvbihjdXJyZW50VGFibGVJZCkgew0KCQlBYzM2MC5hdHRhY2hFdmVudChkb2N1bWVudCwnb25yZWFkeXN0YXRlY2hhbmdlJywgZnVuY3Rpb24oY3VycmVudFRhYmxlSWQpIHsNCgkJCXJldHVybiBmdW5jdGlvbigpIHsNCgkJCQlpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PSAiY29tcGxldGUiKSB7DQoJCQkJCXRhYmxlQ29ybmVyLmRyYXdDb3JuZXIoY3VycmVudFRhYmxlSWQpOw0KCQkJCX0NCgkJCX0NCgkJfShjdXJyZW50VGFibGVJZCkpOw0KCX0sDQoNCglhZGRUYWJMaXN0ZW4gOiBmdW5jdGlvbihjdXJyZW50VGFibGVJZCkgew0KCQlBYzM2MC5hdHRhY2hFdmVudChkb2N1bWVudCwNCgkJCQkJCSdvbnJlYWR5c3RhdGVjaGFuZ2UnLA0KCQkJCQkJZnVuY3Rpb24oY3VycmVudFRhYmxlSWQpIHsNCgkJCQkJCQlyZXR1cm4gZnVuY3Rpb24oKSB7DQoJCQkJCQkJCWlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09ICJjb21wbGV0ZSIpIHsNCgkJCQkJCQkJCXRhYmxlQ29ybmVyLnRtcEJlZ2luVGFibGVDb3JuZXJTdHIgPSB0YWJsZUNvcm5lci5iZWdpblRhYmxlQ29ybmVyU3RyOw0KCQkJCQkJCQkJdGFibGVDb3JuZXIuYmVnaW5UYWJsZUNvcm5lclN0ciA9IHRhYmxlQ29ybmVyLmJlZ2luVGFiQ29ybmVyU3RyOw0KDQoJCQkJCQkJCQl0YWJsZUNvcm5lci50bXBFbmRUYWJDb3JuZXJTdHIgPSB0YWJsZUNvcm5lci5lbmRUYWJsZUNvcm5lclN0cjsNCgkJCQkJCQkJCXRhYmxlQ29ybmVyLmVuZFRhYmxlQ29ybmVyU3RyID0gdGFibGVDb3JuZXIuZW5kVGFiQ29ybmVyU3RyOw0KDQoJCQkJCQkJCQl0YWJsZUNvcm5lci5kcmF3Q29ybmVyKGN1cnJlbnRUYWJsZUlkKTsNCg0KCQkJCQkJCQkJdGFibGVDb3JuZXIuYmVnaW5UYWJsZUNvcm5lclN0ciA9IHRhYmxlQ29ybmVyLnRtcEJlZ2luVGFibGVDb3JuZXJTdHI7DQoJCQkJCQkJCQl0YWJsZUNvcm5lci5lbmRUYWJsZUNvcm5lclN0ciA9IHRhYmxlQ29ybmVyLnRtcEVuZFRhYkNvcm5lclN0cjsNCgkJCQkJCQkJfQ0KCQkJCQkJCX0NCgkJCQkJCX0oY3VycmVudFRhYmxlSWQpKTsNCgl9LA0KDQoJLy8gZHJhdyB0YWJsZSBjb3JuZXINCglkcmF3QmVnaW5UYWJsZUNvcm5lciA6IGZ1bmN0aW9uKHdpZHRoKSB7DQoJCWRvY3VtZW50LndyaXRlKHRoaXMuYmVnaW5UYWJsZUNvcm5lclN0cih3aWR0aCkpOw0KCX0sDQoNCgliZWdpblRhYmxlQ29ybmVyU3RyIDogZnVuY3Rpb24od2lkdGgsIHRhYmxlSWQpIHsNCgkJd2lkdGggPSB0eXBlb2YgKHdpZHRoKSAhPSAndW5kZWZpbmVkJyA/IHdpZHRoIDogJzEwMCUnOw0KCQl0YWJsZUlkID0gdHlwZW9mICh0YWJsZUlkKSAhPSAndW5kZWZpbmVkJyA/IHRhYmxlSWQgOiAndGFibGUnICsgQmFzZUpTDQoJCQkJLmluY3JlYXNlKCk7DQoJCXZhciBzdHIgPSAnJzsNCgkJc3RyICs9ICc8dGFibGUgaWQ9IicNCgkJCQkrIHRhYmxlSWQNCgkJCQkrICciIGJvcmRlcj0iMCIgIGNlbGxwYWRkaW5nPSIwIiBjZWxsc3BhY2luZz0iMCIgIHN0eWxlPSJ3aWR0aDonDQoJCQkJKyB3aWR0aCArICc7IiB0YXJnZXRJZD0iJyArIHRoaXMudGFyZ2V0X2lkICsgJyI+JzsNCgkJc3RyICs9ICc8dHI+JzsNCgkJc3RyICs9ICc8dGQgY2xhc3M9ImhlYWRlci1sZWZ0LXRvcCIgc3R5bGU9ImJvcmRlci1ib3R0b20td2lkdGg6IDBweDsiPjwvdGQ+JzsNCgkJc3RyICs9ICc8dGQgY2xhc3M9ImhlYWRlci1kYXRhIiBzdHlsZT0iZm9udC1zaXplOjFweDtib3JkZXItYm90dG9tLXdpZHRoOiAwcHg7IiA+Jm5ic3A7PC90ZD4nOw0KCQlzdHIgKz0gJzx0ZCBjbGFzcz0iaGVhZGVyLXJpZ2h0LXRvcCIgIHN0eWxlPSJib3JkZXItYm90dG9tLXdpZHRoOiAwcHg7Ij4nOw0KCQlzdHIgKz0gJzwvdGQ+JzsNCgkJc3RyICs9ICc8L3RyPic7DQoJCXN0ciArPSAnPC90YWJsZT4nOw0KCQlyZXR1cm4gc3RyOw0KCX0sDQoNCgliZWdpblRhYkNvcm5lclN0ciA6IGZ1bmN0aW9uKHdpZHRoLCB0YWJsZUlkKSB7DQoJCXdpZHRoID0gdHlwZW9mICh3aWR0aCkgIT0gJ3VuZGVmaW5lZCcgPyB3aWR0aCA6ICcxMDAlJzsNCgkJdGFibGVJZCA9IHR5cGVvZiAodGFibGVJZCkgIT0gJ3VuZGVmaW5lZCcgPyB0YWJsZUlkIDogJ3RhYmxlJyArIEJhc2VKUw0KCQkJCS5pbmNyZWFzZSgpOw0KCQl2YXIgc3RyID0gJyc7DQoJCXN0ciArPSAnPHRhYmxlIGlkPSInDQoJCQkJKyB0YWJsZUlkDQoJCQkJKyAnIiBib3JkZXI9IjAiICBjZWxscGFkZGluZz0iMCIgY2VsbHNwYWNpbmc9IjAiICBzdHlsZT0id2lkdGg6Jw0KCQkJCSsgd2lkdGggKyAnOyIgdGFyZ2V0SWQ9IicgKyB0aGlzLnRhcmdldF9pZCArICciPic7DQoJCXN0ciArPSAnPHRyPic7DQoJCXN0ciArPSAnPHRkIGNsYXNzPSJoZWFkZXItbGVmdC10b3AgdGFiLWhlYWRlci1sZWZ0LXRvcCI+PC90ZD4nOw0KCQlzdHIgKz0gJzx0ZCBjbGFzcz0iaGVhZGVyLWRhdGEgdGFiLWhlYWRlci1kYXRhIiBzdHlsZT0iZm9udC1zaXplOjFweDtiYWNrZ3JvdW5kOiNGRkZGRkY7Ij4mbmJzcDs8L3RkPic7DQoJCXN0ciArPSAnPHRkIGNsYXNzPSJoZWFkZXItcmlnaHQtdG9wIHRhYi1oZWFkZXItcmlnaHQtdG9wIj4nOw0KCQlzdHIgKz0gJzwvdGQ+JzsNCgkJc3RyICs9ICc8L3RyPic7DQoJCXN0ciArPSAnPC90YWJsZT4nOw0KCQlyZXR1cm4gc3RyOw0KCX0sDQoNCgkvLyBkcmF3IHRhYmxlIGNvcm5lcg0KCWRyYXdFbmRUYWJsZUNvcm5lciA6IGZ1bmN0aW9uKHdpZHRoKSB7DQoJCWRvY3VtZW50LndyaXRlKHRoaXMuZW5kVGFibGVDb3JuZXJTdHIod2lkdGgpKTsNCgl9LA0KDQoJZW5kVGFibGVDb3JuZXJTdHIgOiBmdW5jdGlvbih3aWR0aCwgdGFibGVJZCkgew0KCQl2YXIgd2lkdGggPSB0eXBlb2YgKHdpZHRoKSAhPSAndW5kZWZpbmVkJyA/IHdpZHRoIDogJzEwMCUnOw0KCQl0YWJsZUlkID0gdHlwZW9mICh0YWJsZUlkKSAhPSAndW5kZWZpbmVkJyA/IHRhYmxlSWQgOiAndGFibGUnICsgQmFzZUpTDQoJCQkJLmluY3JlYXNlKCk7DQoJCXZhciBzdHIgPSAnPHRhYmxlIGlkPSInDQoJCQkJKyB0YWJsZUlkDQoJCQkJKyAnIiBib3JkZXI9IjAiICBjZWxscGFkZGluZz0iMCIgY2VsbHNwYWNpbmc9IjAiICBzdHlsZT0id2lkdGg6Jw0KCQkJCSsgd2lkdGggKyAnIiB0YXJnZXRJZD0iJyArIHRoaXMudGFyZ2V0X2lkICsgJyI+JzsNCgkJc3RyICs9ICc8dHI+PHRkIGNsYXNzPSJmb290ZXItbGVmdC1ib3R0b20iIHN0eWxlPSJib3JkZXItYm90dG9tLXdpZHRoOiAwcHg7IiBjb2xzcGFuPSIxIj48L3RkPjx0ZCBjbGFzcz0iZm9vdGVyLWRhdGEiPiZuYnNwOzwvdGQ+JzsNCgkJc3RyICs9ICc8dGQgY2xhc3M9ImZvb3Rlci1yaWdodC1ib3R0b20iIHN0eWxlPSJib3JkZXItYm90dG9tLXdpZHRoOiAwcHg7IiA+PC90ZD48L3RyPjwvdGFibGU+JzsNCgkJcmV0dXJuIHN0cjsNCgl9LA0KDQoJZW5kVGFiQ29ybmVyU3RyIDogZnVuY3Rpb24od2lkdGgsIHRhYmxlSWQpIHsNCgkJdmFyIHdpZHRoID0gdHlwZW9mICh3aWR0aCkgIT0gJ3VuZGVmaW5lZCcgPyB3aWR0aCA6ICcxMDAlJzsNCgkJdGFibGVJZCA9IHR5cGVvZiAodGFibGVJZCkgIT0gJ3VuZGVmaW5lZCcgPyB0YWJsZUlkIDogJ3RhYmxlJyArIEJhc2VKUw0KCQkJCS5pbmNyZWFzZSgpOw0KCQl2YXIgc3RyID0gJzx0YWJsZSBpZD0iJw0KCQkJCSsgdGFibGVJZA0KCQkJCSsgJyIgYm9yZGVyPSIwIiAgY2VsbHBhZGRpbmc9IjAiIGNlbGxzcGFjaW5nPSIwIiAgc3R5bGU9IndpZHRoOicNCgkJCQkrIHdpZHRoICsgJyIgdGFyZ2V0SWQ9IicgKyB0aGlzLnRhcmdldF9pZCArICciPic7DQoJCXN0ciArPSAnPHRyPjx0ZCBjbGFzcz0iZm9vdGVyLWxlZnQtYm90dG9tIHRhYi1mb290ZXItbGVmdC1ib3R0b20iIGNvbHNwYW49IjEiPjwvdGQ+PHRkIGNsYXNzPSJmb290ZXItZGF0YSB0YWItZm9vdGVyLWRhdGEiPiZuYnNwOzwvdGQ+JzsNCgkJc3RyICs9ICc8dGQgY2xhc3M9ImZvb3Rlci1yaWdodC1ib3R0b20gdGFiLWZvb3Rlci1yaWdodC1ib3R0b20iPjwvdGQ+PC90cj48L3RhYmxlPic7DQoJCXJldHVybiBzdHI7DQoJfSwNCg0KCWVuZFRyZWVDb3JuZXJTdHIgOiBmdW5jdGlvbih3aWR0aCwgdGFibGVJZCkgew0KCQl2YXIgd2lkdGggPSB0eXBlb2YgKHdpZHRoKSAhPSAndW5kZWZpbmVkJyA/IHdpZHRoIDogJzEwMCUnOw0KCQl0YWJsZUlkID0gdHlwZW9mICh0YWJsZUlkKSAhPSAndW5kZWZpbmVkJyA/IHRhYmxlSWQgOiAndGFibGUnICsgQmFzZUpTDQoJCQkJLmluY3JlYXNlKCk7DQoJCXZhciBzdHIgPSAnPHRhYmxlIGlkPSInDQoJCQkJKyB0YWJsZUlkDQoJCQkJKyAnIiBib3JkZXI9IjAiICBjZWxscGFkZGluZz0iMCIgY2VsbHNwYWNpbmc9IjAiICBzdHlsZT0id2lkdGg6Jw0KCQkJCSsgd2lkdGggKyAnIiB0YXJnZXRJZD0iJyArIHRoaXMudGFyZ2V0X2lkICsgJyI+JzsNCgkJc3RyICs9ICc8dHI+PHRkIGNsYXNzPSJmb290ZXItbGVmdC1ib3R0b20gdHJlZS1mb290ZXItbGVmdC1ib3R0b20iIGNvbHNwYW49IjEiPjwvdGQ+PHRkIGNsYXNzPSJmb290ZXItZGF0YSB0cmVlLWZvb3Rlci1kYXRhIj4mbmJzcDs8L3RkPic7DQoJCXN0ciArPSAnPHRkIGNsYXNzPSJmb290ZXItcmlnaHQtYm90dG9tIHRyZWUtZm9vdGVyLXJpZ2h0LWJvdHRvbSI+PC90ZD48L3RyPjwvdGFibGU+JzsNCgkJcmV0dXJuIHN0cjsNCgl9LA0KDQoJLyoqDQoJICogSWYgeW91IHdhbnQgdG8gbWFudWFsIHJlZnJlc2ggY29ybmVyLHlvdSBjYW4gdXNlIHRoaXMgZnVuY3Rpb24uDQoJICogQnV0IGRvbid0IHByb21vdGUgaW4gbm9ybWFsLg0KCSAqLw0KCXJlZmxlc2hDb3JuZXIgOiBmdW5jdGlvbihjb250YWluSWQpew0KCQl2YXIgdGFyZ2V0T0JKID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29udGFpbklkKTsNCgkJaWYgKEFjMzYwLnZhbGlkYXRvci5pc0VtcHR5KHRhcmdldE9CSikpDQogICAgICAgIHsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KCQl2YXIgdG9wQ29ybmVyT0JKID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0T0JKLnRvcElkKTsNCgkJdmFyIGJvdHRvbUNvcm5lck9CSiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhcmdldE9CSi5ib3R0b21JZCk7DQoJCQ0KCQlpZiAoQWMzNjAudmFsaWRhdG9yLmlzRW1wdHkodG9wQ29ybmVyT0JKKSB8fCBBYzM2MC52YWxpZGF0b3IuaXNFbXB0eShib3R0b21Db3JuZXJPQkopKQ0KCQl7DQoJCSAgICByZXR1cm47DQoJCX0NCgkJDQoJCWlmKGNvbnRhaW5JZCA9PSAiXyRtYWluQ29udGVudCIpDQoJCXsNCgkJCWlmKHRhcmdldE9CSi5zY3JvbGxXaWR0aCA+IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGgpDQoJCQl7DQoJCQkJdG9wQ29ybmVyT0JKLnN0eWxlLndpZHRoID0gKHRhcmdldE9CSi5zY3JvbGxXaWR0aCArIDEyKSArICdweCc7DQoJCQkJYm90dG9tQ29ybmVyT0JKLnN0eWxlLndpZHRoID0gKHRhcmdldE9CSi5zY3JvbGxXaWR0aCArIDEyKSArICdweCc7DQoJCQkJdGFyZ2V0T0JKLnN0eWxlLndpZHRoID0gKHRhcmdldE9CSi5zY3JvbGxXaWR0aCArIDEyKSArICdweCc7DQoJCQl9DQoJCQllbHNlDQoJCQl7DQoJCQkJdG9wQ29ybmVyT0JKLnN0eWxlLndpZHRoID0gZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCArICdweCc7DQoJCQkJYm90dG9tQ29ybmVyT0JKLnN0eWxlLndpZHRoID0gZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCArICdweCc7DQoJCQkJdGFyZ2V0T0JKLnN0eWxlLndpZHRoID0gZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCArICdweCc7DQoJCQl9DQoJCX0NCgkJZWxzZQ0KCQl7DQoJCQl0b3BDb3JuZXJPQkouc3R5bGUud2lkdGggPSB0YXJnZXRPQkoub2Zmc2V0V2lkdGggKyAncHgnOw0KCQkJYm90dG9tQ29ybmVyT0JKLnN0eWxlLndpZHRoID0gdGFyZ2V0T0JKLm9mZnNldFdpZHRoICsgJ3B4JzsNCgkJfQ0KCX0NCgksDQoJZHJhd0Nvcm5lciA6IGZ1bmN0aW9uKGNvbnRhaW5JZCwgZHJhd0JvdHRvbUNvcm5lckFibGUpIHsNCgkJdGhpcy50YXJnZXRfaWQgPSBjb250YWluSWQ7DQoJCXZhciBwYW5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbnRhaW5JZCk7DQoJCWlmICh0eXBlb2YgKHBhbmVsKSA9PSAidW5kZWZpbmVkIiB8fCBwYW5lbCA9PSBudWxsKSB7DQoJCQlyZXR1cm47DQoJCX0NCgkJdmFyIHdpZHRoID0gcGFuZWwud2lkdGggPyBwYW5lbC53aWR0aCA6IHBhbmVsLm9mZnNldFdpZHRoOw0KCQl3aWR0aCA9IHR5cGVvZiAod2lkdGgpICE9ICJ1bmRlZmluZWQiID8gd2lkdGggOiAnMTAwJSc7DQoJCWlmICh3aWR0aCA+IGRvY3VtZW50LmJvZHkuc2Nyb2xsV2lkdGggfHwgd2lkdGggPT0gMCkgew0KCQkJd2lkdGggPSAiMTAwJSI7DQoJCX0gZWxzZSB7DQoJCQl3aWR0aCArPSAncHgnOw0KCQl9DQoJCXZhciB0b3BJZCA9ICd0YWJsZUNvcm5lci0nICsgQmFzZUpTLmluY3JlYXNlKCk7DQoJCXBhbmVsLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlQmVnaW4nLCB0aGlzLmJlZ2luVGFibGVDb3JuZXJTdHIod2lkdGgsDQoJCQkJdG9wSWQpKTsNCgkJdmFyIGJvdHRvbUlkID0gJ3RhYmxlQ29ybmVyLScgKyBCYXNlSlMuaW5jcmVhc2UoKTsNCgkJDQoJCWlmICghZHJhd0JvdHRvbUNvcm5lckFibGUpDQoJCXsNCgkJCXBhbmVsLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJFbmQnLCB0aGlzLmVuZFRhYmxlQ29ybmVyU3RyKHdpZHRoLA0KCQkJCQlib3R0b21JZCkpOw0KCQl9DQoJCXBhbmVsLnRvcElkID0gdG9wSWQ7DQoJCXBhbmVsLmJvdHRvbUlkID0gYm90dG9tSWQ7DQoJCXBhbmVsLmNvdW50ZXIgPSAwOw0KCQkvLyBmdW5jLCBleGVjdXRlIHRpbWUgaW50ZXJ2YWwgDQoJCXZhciBkZWJvdW5jZSA9IGZ1bmN0aW9uIChmdW5jLCB0aHJlc2hvbGQsIGV4ZWNBc2FwKSB7ICANCgkJICAgIHZhciB0aW1lb3V0OyAgDQoJCSAgICByZXR1cm4gZnVuY3Rpb24gZGVib3VuY2VkICgpIHsgIA0KCQkgICAgICAgIHZhciBvYmogPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzOyAgDQoJCSAgICAgICAgZnVuY3Rpb24gZGVsYXllZCAoKSB7ICANCgkJICAgICAgICAgICAgaWYgKCFleGVjQXNhcCkgIA0KCQkgICAgICAgICAgICBmdW5jLmFwcGx5KG9iaiwgYXJncyk7ICANCgkJICAgICAgICAgICAgdGltZW91dCA9IG51bGw7ICANCgkJICAgICAgICB9OyAgDQoJCSAgICAgICAgaWYgKHRpbWVvdXQpICANCgkJICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpOyAgDQoJCSAgICAgICAgZWxzZSBpZiAoZXhlY0FzYXApICANCgkJICAgICAgICAgICAgZnVuYy5hcHBseShvYmosIGFyZ3MpOyAgDQoJCSAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoZGVsYXllZCwgdGhyZXNob2xkIHx8IDEwMCk7ICANCgkJICAgIH07ICANCgkJfQ0KCQkNCgkJdmFyIHBhbmVsUmVzaXplID0gZnVuY3Rpb24ocGFuZWwpew0KCQkJcmV0dXJuIGZ1bmN0aW9uKCkgew0KCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBhbmVsLnRvcElkKS5zdHlsZS53aWR0aCA9IHBhbmVsLm9mZnNldFdpZHRoICsgJ3B4JzsNCgkJCQlpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocGFuZWwpKQ0KCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwYW5lbC5ib3R0b21JZCkuc3R5bGUud2lkdGggPSBwYW5lbC5vZmZzZXRXaWR0aCArICdweCc7DQoJCQkJaWYgKHBhbmVsLmNvdW50ZXIgPCA1KSB7DQoJCQkJCXRhYmxlQ29ybmVyLmZpcmVFdmVudCh0YWJsZUNvcm5lci5ldmVudHNbJ2FmdGVyJ10pOw0KCQkJCQlwYW5lbC5jb3VudGVyKys7DQoJCQkJfQ0KCQkJfQkNCgkJfShwYW5lbCk7DQoJCQ0KCQlwYW5lbC5vbnJlc2l6ZSA9IGRlYm91bmNlKCBmdW5jdGlvbigpeyAgDQoJCQlwYW5lbFJlc2l6ZSgpOyAgDQoJCX0sIDEwMCwgdHJ1ZSk7ICANCgkJDQoJCS8qKg0KCQlwYW5lbC5vbnJlc2l6ZSA9IGZ1bmN0aW9uKCkgew0KCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy50b3BJZCkuc3R5bGUud2lkdGggPSB0aGlzLm9mZnNldFdpZHRoICsgJ3B4JzsNCgkJCWlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmJvdHRvbUlkKSkNCgkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmJvdHRvbUlkKS5zdHlsZS53aWR0aCA9IHRoaXMub2Zmc2V0V2lkdGggKyAncHgnOw0KCQkJaWYgKHRoaXMuY291bnRlciA8IDUpIHsNCgkJCQl0YWJsZUNvcm5lci5maXJlRXZlbnQodGFibGVDb3JuZXIuZXZlbnRzWydhZnRlciddKTsNCgkJCQlwYW5lbC5jb3VudGVyKys7DQoJCQl9DQoJCX07DQoJCSoqLw0KDQoJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRvcElkKS5yZXNpemUgPSBmdW5jdGlvbigpIHsNCgkJCXZhciBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMudGFyZ2V0SWQpOw0KCQkJdGhpcy5zdHlsZS53aWR0aCA9IChlbCA/IGVsLm9mZnNldFdpZHRoIDogMCkgKyAncHgnOw0KCQl9DQoNCgkJaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJvdHRvbUlkKSkNCgkJew0KCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYm90dG9tSWQpLnJlc2l6ZSA9IGZ1bmN0aW9uKCkgew0KCQkJCXZhciBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMudGFyZ2V0SWQpOw0KCQkJCXRoaXMuc3R5bGUud2lkdGggPSAoZWwgPyBlbC5vZmZzZXRXaWR0aCA6IDApICsgJ3B4JzsNCgkJCX0NCgkJfQ0KDQoJCWlmIChwYW5lbC50YWdOYW1lID09ICdUQUJMRScgJiYgJ25vcGFnaW5nJyAhPSBwYW5lbC5nZXRBdHRyaWJ1dGUoIm5vcGFnaW5nIikpIA0KCQl7DQoJCQl0aGlzLmFkZEJvdHRvbVBhZ2UoYm90dG9tSWQpOw0KCQl9DQoJCS8vIGNhbGwgYmFjaw0KCQl0aGlzLmZpcmVFdmVudCh0aGlzLmV2ZW50c1snYWZ0ZXInXSk7DQoJCQ0KCQkNCiAgICAgICAgdmFyIHJlZnJlc2hDb3JuZXIwID0gZnVuY3Rpb24oKXsNCiAgICAgICAgICAgIHZhciBhY29udGFpbklkID0gY29udGFpbklkOw0KICAgICAgICAgICAgdGFibGVDb3JuZXIucmVmbGVzaENvcm5lcihhY29udGFpbklkKTsNCiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpOw0KICAgICAgICB9Ow0KDQoJCXZhciB0aW1lciA9IHNldEludGVydmFsKHJlZnJlc2hDb3JuZXIwLCAxMDApOw0KCQkNCgl9LA0KDQoJLy8gY2xvbmUgdG9wIHBhZ2UgbmF2aWdhdG9yIHRvIHRhYmxlIGJvdHRvbS4NCglhZGRCb3R0b21QYWdlIDogZnVuY3Rpb24oYm90dG9tSWQpIHsNCgkJdmFyIHBhZ2luZ0luZm8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFnaW5nSW5mbycpOw0KCQl2YXIgYm90dG9tdGFibGVPYmogPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChib3R0b21JZCk7DQoJCXZhciBwYXJlbnROb2RlID0gYm90dG9tdGFibGVPYmoucGFyZW50Tm9kZTsNCgkJaWYgKHBhZ2luZ0luZm8pIHsNCgkJCXBhZ2luZ0luZm8uc3R5bGUubWFyZ2luVG9wID0gJzVweCc7DQoJCQl0aGlzLmluc2VydEFmdGVyKHBhZ2luZ0luZm8sIGJvdHRvbXRhYmxlT2JqKTsNCgkJCXBhZ2luZ0luZm8uc3R5bGUuZGlzcGxheT0iIjsNCgkJfQ0KCX0sDQoJDQoJLy9pbnNlcnQgbm9kZSBhZnRlciB0YXJnZXQgbm9kZQ0KCWluc2VydEFmdGVyOiBmdW5jdGlvbihuZXdFbCwgdGFyZ2V0RWwpDQogICAgew0KICAgICAgICB2YXIgcGFyZW50RWwgPSB0YXJnZXRFbC5wYXJlbnROb2RlOw0KICAgICAgICANCiAgICAgICAgaWYocGFyZW50RWwubGFzdENoaWxkID09IHRhcmdldEVsKQ0KICAgICAgICB7DQogICAgICAgICAgICBwYXJlbnRFbC5hcHBlbmRDaGlsZChuZXdFbCk7DQogICAgICAgIH1lbHNlDQogICAgICAgIHsNCiAgICAgICAgICAgIHBhcmVudEVsLmluc2VydEJlZm9yZShuZXdFbCx0YXJnZXRFbC5uZXh0U2libGluZyk7DQogICAgICAgIH0gICAgICAgICAgICANCiAgICB9LA0KDQoJYWRkVHJlZUNvcm5lckxpc3RlbmVyIDogZnVuY3Rpb24odHJlZVBhbmVsSWQpIHsNCgkJdmFyIHRyZWVQYW5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRyZWVQYW5lbElkKTsNCgkJaWYgKHR5cGVvZiAodHJlZVBhbmVsKSA9PSAndW5kZWZpbmVkJyB8fCAhdHJlZVBhbmVsKQ0KCQkJcmV0dXJuOw0KCQl2YXIgcCA9IHRyZWVQYW5lbDsNCgkJdmFyIGkgPSAwOw0KCQl3aGlsZSAocCkgew0KCQkJaSsrOw0KCQkJaWYgKHAuc3R5bGUuZGlzcGxheS50b1VwcGVyQ2FzZSgpID09ICdOT05FJykNCgkJCQlyZXR1cm47DQoJCQlpZiAoaSA+PSAzKQ0KCQkJCWJyZWFrOw0KCQkJcCA9IHAucGFyZW50Tm9kZTsNCgkJfQ0KDQoJCUFjMzYwLmF0dGFjaEV2ZW50KGRvY3VtZW50LCdvbnJlYWR5c3RhdGVjaGFuZ2UnLCBmdW5jdGlvbigpIHsNCgkJCWlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09ICJjb21wbGV0ZSIpIHsNCgkJCQl0YWJsZUNvcm5lci5kcmF3VHJlZUNvcm5lcih0cmVlUGFuZWxJZCk7DQoJCQl9DQoJCX0pOw0KCX0sDQoNCglkcmF3VHJlZUNvcm5lciA6IGZ1bmN0aW9uKHRyZWVQYW5lbElkKSB7DQoJCXZhciB0cmVlQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodHJlZVBhbmVsSWQpOw0KDQoJCXRhYmxlQ29ybmVyLnRtcEVuZFRhYmxlQ29ybmVyU3RyID0gdGFibGVDb3JuZXIuZW5kVGFibGVDb3JuZXJTdHI7DQoJCXRhYmxlQ29ybmVyLmVuZFRhYmxlQ29ybmVyU3RyID0gdGFibGVDb3JuZXIuZW5kVHJlZUNvcm5lclN0cjsNCgkJdHJlZUNvbnRhaW5lci5jbGFzc05hbWUgKz0gJyBsZWZ0LXJpZ2h0LWJvcmRlci1zdHlsZSc7DQoJCXRhYmxlQ29ybmVyLmRyYXdDb3JuZXIodHJlZVBhbmVsSWQpOw0KCQl0YWJsZUNvcm5lci5lbmRUYWJsZUNvcm5lclN0ciA9IHRhYmxlQ29ybmVyLnRtcEVuZFRhYmxlQ29ybmVyU3RyOw0KCX0sDQoNCglhZGRUcmVlQ29ybmVyIDogZnVuY3Rpb24odHJlZVBhbmVsSWQpIHsNCgkJaWYgKHR5cGVvZiAoYWRkQ29ybmVyKSAhPSAndW5kZWZpbmVkJyAmJiBhZGRDb3JuZXIpIHsNCgkJCXJldHVybjsNCgkJfQ0KDQoJCXZhciB0cmVlUGFuZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHJlZVBhbmVsJyk7DQoNCgkJaWYgKHR5cGVvZiAodHJlZVBhbmVsSWQpICE9ICd1bmRlZmluZWQnICYmICF0cmVlUGFuZWxJZA0KCQkJCSYmIHRyZWVQYW5lbElkICE9IG51bGwpIHsNCgkJCXRhYmxlQ29ybmVyLmFkZFRyZWVDb3JuZXJMaXN0ZW5lcih0cmVlUGFuZWxJZCk7DQoJCX0gZWxzZSBpZiAodHJlZVBhbmVsID09ICd1bmRlZmluZWQnIHx8IHRyZWVQYW5lbCA9PSBudWxsKSB7DQoJCQl0YWJsZUNvcm5lci5hZGRUcmVlQ29ybmVyTGlzdGVuZXIoJ3RyZWVDb250YWluZXInKTsNCgkJfSBlbHNlIHsNCgkJCWlmIChkb2N1bWVudC5oYXNDb3JuZXIgIT0gJ3VuZGVmaW5lZCcgJiYgZG9jdW1lbnQuaGFzQ29ybmVyKQ0KCQkJCXJldHVybjsNCgkJCWlmICh0cmVlUGFuZWwuaXNTaG93ID09ICdmYWxzZScpDQoJCQkJcmV0dXJuOw0KCQkJdGFibGVDb3JuZXIuYWRkVHJlZUNvcm5lckxpc3RlbmVyKCd0cmVlUGFuZWwnKTsNCgkJCWRvY3VtZW50Lmhhc0Nvcm5lciA9IHRydWU7DQoJCX0NCgl9LA0KCS8vc3BlY2lhbCBoYW5kbGUgdGFiLCB1c3VhbGx5LCBkcmF3IGNvcm5lciBpbiBkb2N1bWVudCBvcmRlcg0KCXNwZWNpYWxIYW5kbGVUYWIgOiBmdW5jdGlvbigpew0KCQl0YWJsZUNvcm5lci50bXBCZWdpblRhYmxlQ29ybmVyU3RyID0gdGFibGVDb3JuZXIuYmVnaW5UYWJsZUNvcm5lclN0cjsNCgkJdGFibGVDb3JuZXIuYmVnaW5UYWJsZUNvcm5lclN0ciA9IHRhYmxlQ29ybmVyLmJlZ2luVGFiQ29ybmVyU3RyOw0KDQoJCXRhYmxlQ29ybmVyLnRtcEVuZFRhYkNvcm5lclN0ciA9IHRhYmxlQ29ybmVyLmVuZFRhYmxlQ29ybmVyU3RyOw0KCQl0YWJsZUNvcm5lci5lbmRUYWJsZUNvcm5lclN0ciA9IHRhYmxlQ29ybmVyLmVuZFRhYkNvcm5lclN0cjsNCg0KCQlpZiAodGFibGVDb3JuZXIuaXNCcm93c2VyKCJpZTciKSkNCgkJew0KCQkJQWMzNjAuYXR0YWNoRXZlbnQoZG9jdW1lbnQsJ29ucmVhZHlzdGF0ZWNoYW5nZScsCWZ1bmN0aW9uKCl7DQoJCQkJaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT0gImNvbXBsZXRlIikgew0KCQkJCQl2YXIgcGFuZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiXyRtYWluQ29udGVudCIpOw0KCQkJCQl2YXIgd2lkdGggPSBwYW5lbC53aWR0aCA/IHBhbmVsLndpZHRoIDogcGFuZWwub2Zmc2V0V2lkdGg7DQoJCQkJCXZhciBib3R0b21JZCA9IHBhbmVsLmJvdHRvbUlkOw0KCQkJCQlwYW5lbC5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyRW5kJywgdGFibGVDb3JuZXIuZW5kVGFibGVDb3JuZXJTdHIod2lkdGgsDQoJCQkJCQkJYm90dG9tSWQpKTsNCgkJCQl9DQoJCQl9KTsNCgkJCXRhYmxlQ29ybmVyLmRyYXdDb3JuZXIoIl8kbWFpbkNvbnRlbnQiLCB0cnVlKTsNCgkJfQ0KCQllbHNlDQoJCXsNCgkJCXRhYmxlQ29ybmVyLmRyYXdDb3JuZXIoIl8kbWFpbkNvbnRlbnQiKTsNCgkJfQ0KCQl0YWJsZUNvcm5lci5iZWdpblRhYmxlQ29ybmVyU3RyID0gdGFibGVDb3JuZXIudG1wQmVnaW5UYWJsZUNvcm5lclN0cjsNCgkJdGFibGVDb3JuZXIuZW5kVGFibGVDb3JuZXJTdHIgPSB0YWJsZUNvcm5lci50bXBFbmRUYWJDb3JuZXJTdHI7DQoNCgkJdGFibGVDb3JuZXIuZHJhd0Nvcm5lciA9IGZ1bmN0aW9uKCl7fTsNCgl9LA0KCQ0KCWlzQnJvd3NlciA6IGZ1bmN0aW9uKHZpc2lvbikgew0KICAgICAgICBpZiAodHlwZW9mIHZpc2lvbiA9PSAndW5kZWZpZW5kJykNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgdmlzaW9uID0gdmlzaW9uLnRvVXBwZXJDYXNlKCk7DQogICAgICAgIHZhciBpc0lFID0gISF3aW5kb3cuQWN0aXZlWE9iamVjdDsNCiAgICAgICAgdmFyIGlzSUU2ID0gaXNJRSAmJiAhd2luZG93LlhNTEh0dHBSZXF1ZXN0Ow0KICAgICAgICB2YXIgaXNJRTggPSBpc0lFICYmICEhZG9jdW1lbnQuZG9jdW1lbnRNb2RlOw0KICAgICAgICB2YXIgaXNJRTcgPSBpc0lFICYmICFpc0lFNiAmJiAhaXNJRTg7DQogICAgICAgIGlmIChpc0lFKSB7DQogICAgICAgICAgICBpZiAoaXNJRTYpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdmlzaW9uID09PSAnSUU2JzsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNJRTgpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdmlzaW9uID09PSAnSUU4JzsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNJRTcpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdmlzaW9uID09PSAnSUU3JzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIHJldHVybiB2aXNpb24gPT09ICdGRic7DQogICAgICAgIH0NCiAgICB9DQoNCn07DQoNCi8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1yZXNldCByZWFkIG9ubHkgc3R5bGUNCi8vYmVnaW49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCnJlYWRPbmx5T2JqID0gew0KDQoJY2xzIDogJ3JlYWRvbmx5QmFja0NvbG9yJywNCg0KCS8vIHJlc2V0IGNzcw0KCXJlc2V0Q1NTIDogZnVuY3Rpb24oZWxlcykgew0KCQlpZighc2Nyb2xsQmFySXNzdWUuanVkZ2VJc051bGwoZWxlcykpew0KCQkJZm9yICggdmFyIGkgPSAwOyBpIDwgZWxlcy5sZW5ndGg7IGkrKykgew0KCQkJCWlmKHNjcm9sbEJhcklzc3VlLmp1ZGdlSXNPYmooZWxlc1tpXSkpew0KCQkJCQlpZigoZWxlc1tpXS5ub2RlTmFtZSA9PSAiSU5QVVQiICYmIChlbGVzW2ldLmdldEF0dHJpYnV0ZSgidHlwZSIpID09ICJ0ZXh0IiB8fCBlbGVzW2ldLmdldEF0dHJpYnV0ZSgidHlwZSIpICA9PSAncGFzc3dvcmQnKSkgfHwgZWxlc1tpXS5ub2RlTmFtZSA9PSAiVEVYVEFSRUEiKQ0KCQkJCQl7DQoJCQkJCQl2YXIgZWxlID0gZWxlc1tpXTsNCgkJCQkJCS8vaWdub3JlIHdhc3Rlcm1hc2sgZmllbGQNCgkJCQkJCWlmIChlbGUuaWdub3JlVHdlYWspDQoJCQkJCQl7DQoJCQkJCQkJY29udGludWU7DQoJCQkJCQl9DQoJCQkJCQlpZiAodGhpcy5jaGVja1JlYWRvbmx5KGVsZSkpIA0KCQkJCQkJew0KCQkJCQkJCWlmKGVsZS5pZ25vcmUpew0KCQkJCQkJCQljb250aW51ZTsNCgkJCQkJCQl9DQoJCQkJCQkJaWYgKCFlbGUuY2xhc3NOYW1lLm1hdGNoKG5ldyBSZWdFeHAoDQoJCQkJCQkJCQknKFxcc3xeKScgKyB0aGlzLmNscyArICcoXFxzfCQpJykpKSB7DQoJCQkJCQkJCWVsZS5jbGFzc05hbWUgKz0gIiAiICsgdGhpcy5jbHM7DQoJCQkJCQkJfQ0KCQkJCQkJCWlmKGVsZS5jbGFzc05hbWUuaW5kZXhPZihyZWFkT25seU9iai5jbHMpIDwgMCl7DQoJCQkJCQkJCWVsZS5jbGFzc05hbWUgPSBlbGUuY2xhc3NOYW1lICsgJyAnICsgcmVhZE9ubHlPYmouY2xzOw0KCQkJCQkJCX0NCgkJCQkJCQllbGUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiI7DQoJCQkJCQl9DQoJCQkJCQkgZWxzZSANCgkJCQkJCXsNCgkJCQkJCQlpZihlbGUuY2xhc3NOYW1lLmluZGV4T2YocmVhZE9ubHlPYmouY2xzKSA+IC0xKXsNCgkJCQkJCQkJZWxlLmNsYXNzTmFtZSA9IGVsZS5jbGFzc05hbWUucmVwbGFjZSgvcmVhZG9ubHlCYWNrQ29sb3IvaWcsJycpOw0KCQkJCQkJCX0NCgkJCQkJCQlpZihlbGUuY2xhc3NOYW1lLmluZGV4T2YoJ3BvcnRsZXQtZm9ybS1pbnB1dC1maWVsZCcpIDwgMCl7DQoJCQkJCQkJCWlmIChlbGUuY29scyA+IDIwICYmIGVsZS5yb3dzID4gMikNCgkJCQkJCQkJew0KCQkJCQkJCQkJZWxlLmNsYXNzTmFtZSA9IGVsZS5jbGFzc05hbWUgKyAnIHBvcnRsZXQtZm9ybS1pbnB1dC1maWVsZC1jdXN0b21pemVkLXdpZHRoLWhlaWdodCc7CQ0KCQkJCQkJCQl9DQoJCQkJCQkJCWVsc2UNCgkJCQkJCQkJew0KCQkJCQkJCQkJZWxlLmNsYXNzTmFtZSA9IGVsZS5jbGFzc05hbWUgKyAnIHBvcnRsZXQtZm9ybS1pbnB1dC1maWVsZCc7DQoJCQkJCQkJCX0NCgkJCQkJCQl9DQoJCQkJCQl9DQoJCQkJCQkNCgkJCQkJCWlmKGVsZXNbaV0ubm9kZU5hbWUgPT0gIklOUFVUIil7DQoJCQkJCQkJdGhpcy5zZXRUZXh0SGVpZ2h0KGVsZSk7DQoJCQkJCQl9DQoJCQkJCX0NCgkJCQkJZWxzZSBpZihlbGVzW2ldLm5vZGVOYW1lID09ICJTRUxFQ1QiKQ0KCQkJCQl7DQoJCQkJCQl0aGlzLmhhbmRsZURpc2FibGVkKFtlbGVzW2ldXSk7DQoJCQkJCX0NCgkJCQl9DQoJCQl9DQoJCX0NCgl9LA0KCQ0KCS8vdGhpcyBmdW5jdGlvbiB3aWxsIHJldHVybiB0cnVlIGlmIGVsZW1lbnQgaGFkIGJlZW4gc2V0IHJlYWRPbmx5IG9yIGRpc2FibGVkIGF0dHJpYnV0ZS4gT3RoZXJ3aXNlLCByZXR1cm4gZmFsc2UuDQoJY2hlY2tSZWFkb25seSA6IGZ1bmN0aW9uKGVsZSkgew0KCQlpZiAoc2Nyb2xsQmFySXNzdWUuanVkZ2VJc09iaihlbGUpICYmIChlbGUucmVhZE9ubHkgfHwgZWxlLmRpc2FibGVkKSl7DQoJCQlpZiAoZWxlLnR5cGUgPT0gInRleHQiIHx8IGVsZS50eXBlID09ICJ0ZXh0YXJlYSIpIHsNCgkJCQlyZXR1cm4gdHJ1ZTsNCgkJCX0NCgkJfQ0KCQlyZXR1cm4gZmFsc2U7DQoJfSwNCgkNCgloYW5kbGVEaXNhYmxlZCA6IGZ1bmN0aW9uKGVsZXMpIHsNCgkJaWYoIXNjcm9sbEJhcklzc3VlLmp1ZGdlSXNOdWxsKGVsZXMpKXsJCQ0KCQkJZm9yICggdmFyIGkgPSAwOyBpIDwgZWxlcy5sZW5ndGg7IGkrKykgew0KCQkJCWlmIChlbGVzW2ldLmRpc2FibGVkKSB7DQoJCQkJCWVsZXNbaV0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiI7DQoJCQkJfQ0KCQkJfQ0KCQl9DQoJfSwNCgkNCgkvLyByZXNldCByZWFkIG9ubHkgc3R5bGUNCglyZXNldFJlYWRPbmx5IDogZnVuY3Rpb24oZWxlcykgew0KCQkNCgkJaWYoc2Nyb2xsQmFySXNzdWUuanVkZ2VJc051bGwoZWxlcykpew0KCQkJLy8gYmVjYXVzZSBvZiBzb21lIGVsZW1lbnRzJyBuYW1lIHdlcmUgbm90IHNwZWNpZmljYXRpb24gV2hvDQoJCQkvLyBkZXZlbG9wZWQuZm9yIGV4YW1wbGU6PGlucHV0IG5hbWU9Imxlbmd0aCIgLz4NCgkJCS8vIHNvIHdlIG5lZWQgdG8gc3BlY2lhbCBoYW5kbGUgdGhlc2UgZWxlbWVudHMNCgkJCWVsZXMgPSBqUXVlcnkoImlucHV0W3R5cGU9dGV4dF0sIGlucHV0W3R5cGU9cGFzc3dvcmRdIik7DQoJCQlpZiAoZWxlcyAhPSBudWxsKSB7DQoJCQkJdmFyIGFycmF5ID0gbmV3IEFycmF5KCk7DQoJCQkJdmFyIGluZGV4ID0gMDsNCgkJCQlmb3IgKCB2YXIgZWxlIGluIGVsZXMpIHsNCgkJCQkJdmFyIG9iaiA9IGVsZXNbZWxlXTsNCgkJCQkJaWYgKHNjcm9sbEJhcklzc3VlLmp1ZGdlSXNPYmoob2JqKSAmJiAhc2Nyb2xsQmFySXNzdWUuanVkZ2VJc09iaihvYmpbJ3RhZ05hbWUnXSkgJiYgb2JqWyd0YWdOYW1lJ10gPT0gIklOUFVUIiAmJiAoIXNjcm9sbEJhcklzc3VlLmp1ZGdlSXNOdWxsKG9iai5sZW5ndGgpKSAmJiAoIXNjcm9sbEJhcklzc3VlLmp1ZGdlSXNOdWxsKG9iai50eXBlKSkgJiYgb2JqLnR5cGUudG9VcHBlckNhc2UoKSE9ICdISURERU4nKSB7DQoJCQkJCQlmb3IgKCB2YXIgaT0wO2k8b2JqLmxlbmd0aDtpKyspIHsNCgkJCQkJCQlpZihvYmpbaV0mJnR5cGVvZihvYmpbaV0pICE9ICJ1bmRlZmluZWQiKQ0KCQkJCQkJCXsNCgkJCQkJCQkJdmFyIGVsZV90eXBlID0gb2JqW2ldLnR5cGU7DQoJCQkJCQkJCWlmIChlbGVfdHlwZSA9PSAndGV4dCcgfHwgZWxlX3R5cGUgPT0gJ3Bhc3N3b3JkJykgew0KCQkJCQkJCQkJYXJyYXlbaW5kZXhdID0gb2JqW2ldOw0KCQkJCQkJCQkJYXJyYXlbaW5kZXhdLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIiOw0KCQkJCQkJCQkJaW5kZXgrKzsNCgkJCQkJCQkJfQ0KCQkJCQkJCX0NCgkJCQkJCX0NCgkJCQkJfSBlbHNlIHsNCgkJCQkJCWlmICh0eXBlb2YgKG9iaikgIT0gInVuZGVmaW5lZCIgJiYgKG9iai50eXBlID09ICd0ZXh0JyB8fCBvYmoudHlwZSA9PSAncGFzc3dvcmQnKSkgew0KCQkJCQkJCWFycmF5W2luZGV4XSA9IG9iajsNCgkJCQkJCQlhcnJheVtpbmRleF0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiI7DQoJCQkJCQkJaW5kZXgrKzsNCgkJCQkJCX0NCgkJCQkJfQ0KCQkJCX0NCgkJCQllbGVzID0gYXJyYXk7DQoJCQl9DQoJCQl0aGlzLnJlc2V0Q1NTKGVsZXMpOw0KCQkJdGhpcy5yZXNldENTUyhkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGV4dGFyZWEiKSk7DQoJCQl0aGlzLnJlc2V0Q1NTKGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzZWxlY3QiKSk7DQoJCQlyZXR1cm47DQoJCX0NCgkJdGhpcy5yZXNldENTUyhlbGVzKTsNCgl9LA0KCQ0KCXNldFRleHRIZWlnaHQgOiBmdW5jdGlvbihlbGUpIHsNCgkJZWxlLnN0eWxlLmhlaWdodCA9ICcxOXB4JzsNCgl9LA0KCQ0KCXNpbmdsZVJlc2V0UmVhZE9ubHkgOiBmdW5jdGlvbihlbGVOYW1lKSB7DQoJCWlmICh0eXBlb2YgKGVsZU5hbWUpICE9ICJ1bmRlZmluZWQiKSB7DQoJCQl2YXIgZWxlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKGVsZU5hbWUpOw0KCQkJdGhpcy5yZXNldFJlYWRPbmx5KGVsZXMpOw0KCQl9DQoJfSwNCgkNCglnZXRSZXNldE9ianMgOiBmdW5jdGlvbihjb250YWluZXIpew0KCQlpZihzY3JvbGxCYXJJc3N1ZS5qdWRnZUlzT2JqKGNvbnRhaW5lcikpew0KCQkJdmFyIGlucHV0cyA9IGNvbnRhaW5lci5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaW5wdXQiKTsNCgkJCXZhciB0ZXh0QXJlYXMgPSBjb250YWluZXIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRleHRBcmVhIik7DQoJCQl2YXIgc2VsZWN0cyA9IGNvbnRhaW5lci5nZXRFbGVtZW50c0J5VGFnTmFtZSgic2VsZWN0Iik7DQoJCQl2YXIgb2JqcyA9IG5ldyBBcnJheSgpOw0KCQkJaWYoc2Nyb2xsQmFySXNzdWUuanVkZ2VJc09iaihpbnB1dHMpKXsNCgkJCQlmb3IgKCB2YXIgaW5wdXRfaW5kZXggPSAwOyBpbnB1dF9pbmRleCA8IGlucHV0cy5sZW5ndGg7IGlucHV0X2luZGV4KyspIHsNCgkJCQkJb2Jqcy5wdXNoKGlucHV0c1tpbnB1dF9pbmRleF0pOw0KCQkJCX0NCgkJCX0NCgkJCWlmKHNjcm9sbEJhcklzc3VlLmp1ZGdlSXNPYmoodGV4dEFyZWFzKSl7DQoJCQkJZm9yICggdmFyIHRleHRBcmVhc19pbmRleCA9IDA7IHRleHRBcmVhc19pbmRleCA8IHRleHRBcmVhcy5sZW5ndGg7IHRleHRBcmVhc19pbmRleCsrKSB7DQoJCQkJCW9ianMucHVzaCh0ZXh0QXJlYXNbdGV4dEFyZWFzX2luZGV4XSk7DQoJCQkJfQ0KCQkJfQ0KCQkJaWYoc2Nyb2xsQmFySXNzdWUuanVkZ2VJc09iaihzZWxlY3RzKSl7DQoJCQkJZm9yICggdmFyICBzZWxlY3RfaW5kZXggPSAwOyBzZWxlY3RfaW5kZXggPCBzZWxlY3RzLmxlbmd0aDsgc2VsZWN0X2luZGV4KyspIHsNCgkJCQkJb2Jqcy5wdXNoKHNlbGVjdHNbc2VsZWN0X2luZGV4XSk7DQoJCQkJfQ0KCQkJfQ0KCQkJcmV0dXJuIG9ianM7DQoJCX0NCgkJcmV0dXJuIG51bGw7DQoJfQ0KfTsNCi8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1yZXNldCByZWFkIG9ubHkgc3R5bGUNCi8vZW5kPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQoNClVJLkJhc2UgPSB7DQoNCgkvL3RydWUgLSBBUg0KCWNoZWNrQXIgOiBmdW5jdGlvbigpIHsNCgkJdmFyIHAgPSBzZWxmOw0KCQl2YXIgaSA9IDA7DQoJCWlmICh0eXBlb2YgKHApID09ICd1bmRlZmluZWQnKSB7DQoJCQlyZXR1cm4gZmFsc2U7DQoJCX0NCg0KCQl3aGlsZSAocCkgew0KCQkJaWYgKHR5cGVvZiAocC5wcm9maWxlKSAhPSAidW5kZWZpbmVkIikgew0KCQkJCWlmIChwLnByb2ZpbGUubGFuZ3VhZ2UudG9Mb3dlckNhc2UoKS5pbmRleE9mKCJhciIpID49IDApIHsNCgkJCQkJcmV0dXJuIHRydWU7DQoJCQkJfQ0KCQkJCWVsc2UNCgkJCQl7DQoJCQkJCXJldHVybiBmYWxzZTsNCgkJCQl9DQoJCQl9DQoJCQlwID0gcC5wYXJlbnQ7DQoJCQlpKys7DQoJCQlpZiAoaSA+PSAxMCkNCgkJCQlicmVhazsNCgkJCQ0KCQl9DQoJCXJldHVybiBmYWxzZTsNCgl9DQp9Ow0KDQoNCi8vd2F0ZXIgbWFyayBiZWdpbi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4NClVJLndhdGVyTWFyayA9IHsNCgkNCglkZWZhdWx0TGVuIDogNCwNCgkNCgl3YXRlck1hcmtUYXJnZXRJZHMgOiBuZXcgQXJyYXkoKSwNCgkNCgl3YXRlck1hcmsgOiBmdW5jdGlvbih2YWx1ZSl7DQoNCgkJdGhpcy5pZCA9IEFWMzYwV2F0ZXJtYXJrQVBJLmluc3RhbmNlcysrOw0KCQlBVjM2MFdhdGVybWFya0FQSS5vYmplY3RzW3RoaXMuaWRdID0gdGhpczsNCgkJDQoJCXRoaXMuX193YXRlcm1hcms7DQoJCXRoaXMuX193YXRlcm1hcmtfZGl2Ow0KCQl0aGlzLl9fdGFyZ2V0IDsNCgkJdGhpcy5fX2F0dGFjaGVkID0gZmFsc2U7DQoJCXRoaXMuX192YWx1ZSA9IHZhbHVlOw0KCQkNCgkJdGhpcy5fX3JlZiA9ICJBVjM2MFdhdGVybWFya0FQSS5vYmplY3RzWyciICsgdGhpcy5pZCArICInXSI7DQoJCQ0KCQl0aGlzLl9fYWxpZ25tZW50ID0gIiI7IC8vIEZvciB0aGUgaW5wdXQgZWxlbWVudCdzIGFsaWduIGF0dHJpYnV0ZQ0KCQkNCgkJdGhpcy5hZGREaXYgPSBmdW5jdGlvbihwYXJlbnROb2RlKXsNCgkJCXRoaXMuX193YXRlcm1hcmtfZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiRElWIik7DQoJCQl0aGlzLl9fd2F0ZXJtYXJrX2Rpdi5zZXRBdHRyaWJ1dGUoIm5hbWUiLHRoaXMuX190YXJnZXQubmFtZSArICJfX3dhdGVybWFya19kaXYiKTsNCgkJCXRoaXMuX193YXRlcm1hcmtfZGl2LnN0eWxlLnBvc2l0aW9uID0gInJlbGF0aXZlIjsNCgkJCXdoaWxlIChwYXJlbnROb2RlLmZpcnN0Q2hpbGQpDQoJCQl7DQoJCQkJdGhpcy5fX3dhdGVybWFya19kaXYuYXBwZW5kQ2hpbGQocGFyZW50Tm9kZS5maXJzdENoaWxkKTsNCgkJCX0NCgkJCXBhcmVudE5vZGUuYXBwZW5kQ2hpbGQodGhpcy5fX3dhdGVybWFya19kaXYpOw0KCQkJcGFyZW50Tm9kZS5pbnNlcnRBZGphY2VudEhUTUwoImFmdGVyYmVnaW4iLCI8U1BBTiBzdHlsZT0naGVpZ2h0OjEycHg7bWFyZ2luLXRvcDotMTJweCc+Jm5ic3A7PC9TUEFOPiIpOw0KCQkJcmV0dXJuIHRoaXMuX193YXRlcm1hcmtfZGl2OyANCgkJfTsNCgkJDQoJCXRoaXMuYWRkV2F0ZXJNYXJrID0gZnVuY3Rpb24ocGFyZW50Tm9kZSl7DQoJCQl0aGlzLmFkZERpdihwYXJlbnROb2RlKTsNCgkJCXRoaXMuX193YXRlcm1hcmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOw0KCQkJdGhpcy5fX3dhdGVybWFya19kaXYuYXBwZW5kQ2hpbGQodGhpcy5fX3dhdGVybWFyayk7DQoJCQkNCgkJCXZhciBuYW1lID0gQWMzNjAudmFsaWRhdG9yLmlzRW1wdHkodGhpcy5fX3RhcmdldC5uYW1lKSA/IHRoaXMuX190YXJnZXQuaWQgOiB0aGlzLl9fdGFyZ2V0Lm5hbWU7DQoJCQl0aGlzLl9fd2F0ZXJtYXJrLnNldEF0dHJpYnV0ZSgibmFtZSIsIG5hbWUgKyAiX193YXRlcm1hcmsiKTsNCgkJCXRoaXMuX193YXRlcm1hcmsuc2V0QXR0cmlidXRlKCJpZCIsIG5hbWUgKyAiX193YXRlcm1hcmsiKTsNCgkJCXRoaXMuX193YXRlcm1hcmsuY2xhc3NOYW1lID0gInBvcnRsZXQtd2F0ZXJtYXJrLWlucHV0LWZpZWxkIjsNCgkJCXRoaXMuX193YXRlcm1hcmsuaWdub3JlVHdlYWsgPSB0cnVlOw0KCQkJdGhpcy5fX3dhdGVybWFyay5zdHlsZS5kaXNwbGF5ID0gImlubGluZSI7DQoJCQl0aGlzLl9fd2F0ZXJtYXJrLnN0eWxlLnBvc2l0aW9uID0gImFic29sdXRlIjsJCQkNCgkJCXRoaXMuX193YXRlcm1hcmsuaW5uZXJIVE1MID0gdGhpcy5fX3ZhbHVlOw0KCQkJdGhpcy5fX3dhdGVybWFyay5zdHlsZS5iYWNrZ3JvdW5kID0gIiNmZmZkZDQiOw0KCQkJdGhpcy5fX3dhdGVybWFyay5zdHlsZS5mb250U3R5bGUgPSAiaXRhbGljIjsNCgkJCXRoaXMuX193YXRlcm1hcmsuc3R5bGUuY29sb3IgPSAiIzY2NjY2NiI7DQoJCQkNCgkJCXRoaXMuX193YXRlcm1hcmsub25jbGljayA9IGZ1bmN0aW9uKCl7DQoJCQkJdGhpcy5fX3dhdGVybWFyay5zdHlsZS52aXNpYmlsaXR5ID0gImhpZGRlbiI7DQoJCQkJdGhpcy5fX3RhcmdldC5zdHlsZS52aXNpYmlsaXR5ID0gInZpc2libGUiOw0KCQkJCWlmICghdGhpcy5fX3RhcmdldC5kaXNhYmxlZCkvL3doZW4gdGhlIHRhcmdldCBpcyBkaXNhYmxlL3JlYWQgb25seQ0KCQkJCQl0aGlzLl9fdGFyZ2V0LmZvY3VzKCk7DQoJCQl9LmJpbmQodGhpcyk7DQoJCQkNCgkJCVVJLndhdGVyTWFyay53YXRlck1hcmtUYXJnZXRJZHMucHVzaChuYW1lKTsNCgkJCQ0KCQl9Ow0KCQkNCgkJdGhpcy5hZGRUYXJnZXRFdmVudCA9IGZ1bmN0aW9uKCl7DQoJCQlBYzM2MC5hdHRhY2hFdmVudCh0aGlzLl9fdGFyZ2V0LCJvbmJsdXIiICwgZnVuY3Rpb24oKXsNCgkJCQl0aGlzLmp1ZGdlVmFsdWVFdmVudCgib25ibHVyIik7CQ0KCQkJfS5iaW5kKHRoaXMpKTsNCgkJCQ0KCQkJQWMzNjAuYXR0YWNoRXZlbnQodGhpcy5fX3RhcmdldCwib25mb2N1cyIsICBmdW5jdGlvbigpew0KCQkJCXRoaXMuX193YXRlcm1hcmsuc3R5bGUudmlzaWJpbGl0eSA9ICJ2aXNpYmxlIjsNCgkJCQl0aGlzLl9fd2F0ZXJtYXJrLnN0eWxlLnZpc2liaWxpdHkgPSAiaGlkZGVuIjsNCgkJCX0uYmluZCh0aGlzKSk7DQoJCQkNCgkJCUFjMzYwLmF0dGFjaEV2ZW50KHRoaXMuX190YXJnZXQsIm9ucHJvcGVydHljaGFuZ2UiLCAgZnVuY3Rpb24oZXZlbnQpew0KCQkJCWlmKGV2ZW50LnByb3BlcnR5TmFtZSA9PSAndmFsdWUnICYmICFldmVudC5zcmNFbGVtZW50LnZhbHVlKQ0KCQkJCQlyZXR1cm47DQoJCQkJdGhpcy5qdWRnZVZhbHVlRXZlbnQoIm9ucHJvcGVydHljaGFuZ2UiKTsJDQoJCQl9LmJpbmQodGhpcykpOw0KCQl9Ow0KDQoJCXRoaXMuanVkZ2VWYWx1ZUV2ZW50ID0gZnVuY3Rpb24oZXZlbnQpew0KCQkJaWYgKHRoaXMuX190YXJnZXQudmFsdWUgPT0gIiIpDQoJCQl7DQoJCQkJaWYgKHRoaXMuX193YXRlcm1hcmsuZ2V0QXR0cmlidXRlKCJIaWRkZW5fQnlfRXhwcmVzc2lvbiIpICYmIHRoaXMuX193YXRlcm1hcmsuZ2V0QXR0cmlidXRlKCJIaWRkZW5fQnlfRXhwcmVzc2lvbiIpID09ICJZZXMiKQ0KCQkJCXsNCgkJCQkJcmV0dXJuOw0KCQkJCX0NCgkJCQlpZigiaW5pdGlhbGl6ZSIgIT0gZXZlbnQpDQoJCQkJewkNCgkJCQkJdGhpcy5zZXRNYXJrSW5wdXRCb3VuZCgpOw0KCQkJCQl0aGlzLl9fd2F0ZXJtYXJrLnN0eWxlLnZpc2liaWxpdHkgPSAidmlzaWJsZSI7DQoJCQkJfQ0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCXRoaXMuX193YXRlcm1hcmsuc3R5bGUudmlzaWJpbGl0eSA9ICJoaWRkZW4iOw0KCQkJfQ0KCQl9Ow0KCQkNCgkJdGhpcy5fX2luaXRpYWxpemUgPSBmdW5jdGlvbigpDQoJCXsNCgkJCXZhciBwYXJlbnROb2RlID0gdGhpcy5fX3RhcmdldC5wYXJlbnROb2RlOw0KCQkJdGhpcy5hZGRXYXRlck1hcmsocGFyZW50Tm9kZSk7DQoJCQl0aGlzLmp1ZGdlVmFsdWVFdmVudCgiaW5pdGlhbGl6ZSIpOw0KCQl9Ow0KCQkNCgkJLy93YXRlciBtYXJrIGVudHJ5DQoJCXRoaXMuYXR0YWNoID0gZnVuY3Rpb24odGFyZ2V0X25hbWUpDQoJCXsNCgkJCWlmICh0aGlzLl9fYXR0YWNoZWQpDQoJCQl7DQoJCQkJYWxlcnQoZ2V0VGV4dGxhYmxlKCJlcnJvci5qcy53YXRlcm1hcmsuQVYzNjBXYXRlcm1hcmtBdHRhY2giKSk7DQoJCQkJcmV0dXJuIDsNCgkJCX0NCgkNCgkJCXRoaXMuX190YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YXJnZXRfbmFtZSk7DQoJCQlpZih0eXBlb2YodGhpcy5fX3RhcmdldCk9PSd1bmRlZmluZWQnKQ0KCQkJew0KCQkJCXRoaXMuX190YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSh0YXJnZXRfbmFtZSlbMF07DQoJCQl9DQoJCQkNCgkJCQ0KCQkJaWYgKCF0aGlzLl9fdGFyZ2V0IHx8IHRoaXMuX190YXJnZXQudHlwZSA9PSAiaGlkZGVuIikNCgkJCXsNCgkJCQlyZXR1cm4gOw0KCQkJfQ0KCQkJDQoJCQl0aGlzLl9faW5pdGlhbGl6ZSgpOw0KCQkJdGhpcy50aW1lSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpew0KCQkJCWlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09ICJjb21wbGV0ZSIpIHsNCgkJCQkJY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVJbnRlcnZhbCk7DQoJCQkJCXRoaXMuYWRkVGFyZ2V0RXZlbnQoKTsNCgkJCQkJdGhpcy5zZXRNYXJrSW5wdXRCb3VuZCgpOw0KCQkJCQl0aGlzLl9fYXR0YWNoZWQgPSB0cnVlOw0KCQkJCQl0aGlzLl9fdGFyZ2V0Lmp1ZGdlID0gdGhpcy5zZXRNYXJrSW5wdXRCb3VuZC5iaW5kKHRoaXMpOw0KCQkJCX0NCgkJCX0uYmluZCh0aGlzKSwgMTAwMCk7DQoJCQkNCgkJCQ0KCQkJDQoJCX07DQoJCQ0KCQl0aGlzLnNldE1hcmtJbnB1dEJvdW5kID0gZnVuY3Rpb24oKQ0KCQl7DQoJCQl0aGlzLl9fd2F0ZXJtYXJrLnN0eWxlLndpZHRoID0gdGhpcy5nZXRXaWR0aCgpIC0gVUkud2F0ZXJNYXJrLmRlZmF1bHRMZW4gKyAncHgnOy8vbGVmdCBib3JkZXIgKyByaWdodCBib3JkZXIgKyBwYWRkaW5nIA0KCQkJdGhpcy5fX3dhdGVybWFyay5zdHlsZS5oZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpIC0gVUkud2F0ZXJNYXJrLmRlZmF1bHRMZW4gKyAncHgnOw0KCQkJdmFyIG9mZnNldFRvcCA9IHRoaXMuX190YXJnZXQuY2xpZW50VG9wOw0KCQkJdmFyIG9mZnNldExlZnQgPSB0aGlzLl9fdGFyZ2V0Lm9mZnNldExlZnQ7DQoJCQl0aGlzLl9fd2F0ZXJtYXJrLnN0eWxlLmxlZnQgPSBvZmZzZXRMZWZ0ICsgMSArICdweCc7DQoJCQl0aGlzLl9fd2F0ZXJtYXJrLnN0eWxlLnRvcCA9IG9mZnNldFRvcCArIDEgKyAncHgnOw0KCQl9Ow0KCQkNCgkJdGhpcy5nZXRXaWR0aCA9IGZ1bmN0aW9uKCkNCgkJew0KCQkJdmFyIHdpZHRoID0gMDsNCgkJCWlmICh0aGlzLl9fdGFyZ2V0Lm9mZnNldFdpZHRoKQ0KCQkJew0KCQkJCXdpZHRoID0gdGhpcy5fX3RhcmdldC5vZmZzZXRXaWR0aDsgDQoJCQl9DQoJCQllbHNlDQoJCQl7DQoJCQkJaWYgKHRoaXMuX190YXJnZXQuc3R5bGUud2lkdGgpDQoJCQkJCXdpZHRoID0gcGFyc2VJbnQodGhpcy5fX3RhcmdldC5zdHlsZS53aWR0aCk7DQoJCQkJZWxzZQ0KCQkJCQl3aWR0aCA9IFVJLndhdGVyTWFyay5kZWZhdWx0TGVuOw0KCQkJfQ0KCQkJcmV0dXJuIHdpZHRoOw0KCQl9Ow0KCQkNCgkJdGhpcy5nZXRIZWlnaHQgPSBmdW5jdGlvbigpDQoJCXsNCgkJCXZhciBoZWlnaHQgPSAwOw0KCQkJaWYgKHRoaXMuX190YXJnZXQub2Zmc2V0SGVpZ2h0KQ0KCQkJew0KCQkJCWhlaWdodCA9IHRoaXMuX190YXJnZXQub2Zmc2V0SGVpZ2h0OyANCgkJCX0NCgkJCWVsc2UNCgkJCXsNCgkJCQlpZiAodGhpcy5fX3RhcmdldC5zdHlsZS5oZWlnaHQpDQoJCQkJCWhlaWdodCA9IHBhcnNlSW50KHRoaXMuX190YXJnZXQuc3R5bGUuaGVpZ2h0KTsNCgkJCQllbHNlDQoJCQkJCWhlaWdodCA9IFVJLndhdGVyTWFyay5kZWZhdWx0TGVuOw0KCQkJfQ0KCQkJcmV0dXJuIGhlaWdodDsNCgkJfTsNCgkJDQoJCXRoaXMuc2V0QWxpZ25tZW50ID0gZnVuY3Rpb24oKXsNCgkJCQ0KCQl9DQoJfSwNCg0KCS8vIFJlY2FsY3VsYXRlZCBwb3NpdGlvbiB3aGVuIHdhdGVybWFyayBlbGVtZW50IGRpc3BsYXkgaW4gcGFnZS4NCglyZWZyZXNoQWxsV2F0ZXJtYXJrcyA6IGZ1bmN0aW9uKCl7DQoJCWlmIChVSS53YXRlck1hcmsud2F0ZXJNYXJrVGFyZ2V0SWRzLmxlbmd0aCA+IDApDQoJCXsNCgkJCWZvciAodmFyIGkgPSAwOyBpIDwgVUkud2F0ZXJNYXJrLndhdGVyTWFya1RhcmdldElkcy5sZW5ndGg7IGkrKykNCgkJCXsNCgkJCQl2YXIgdGFyZ2V0T2JqID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoVUkud2F0ZXJNYXJrLndhdGVyTWFya1RhcmdldElkc1tpXSk7DQoJCQkJaWYgKHRhcmdldE9iaiAmJiB0YXJnZXRPYmouanVkZ2UpIHsNCgkJCQkJaWYodGFyZ2V0T2JqLnBhcmVudE5vZGUpew0KCQkJCQkJdGFyZ2V0T2JqLnBhcmVudE5vZGUuc3R5bGUuaGVpZ2h0ID0gJyc7DQoJCQkJCX0NCgkJCQkJdGFyZ2V0T2JqLmp1ZGdlKCk7DQoJCQkJfQ0KCQkJfQ0KCQl9DQoJfQ0KfQ0KDQovL3dhdGVyIG1hcmsgZW5kLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLg0KDQoNCi8qKlRoZSBiZWdpbmluZyBvZiBoaWdoTGlnaHQgZnVuY3Rpb24gZm9yIHRhYmxlIHJvd3MqKioqKiovDQoNCi8vZ2V0cyBkb20gb2JqZWN0DQpmdW5jdGlvbiBnZXRPYmplY3QobmFtZVN0cikgDQp7DQoJcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG5hbWVTdHIpOw0KfQ0KLy9nZXRzIHBhcmVudCdzIGRvbSBvYmplY3QNCmZ1bmN0aW9uIGdldFBhcmVudE9iamVjdChuYW1lU3RyKSB7DQoJIGlmKHR5cGVvZiBwYXJlbnQgPT0gIm9iamVjdCIgJiYgdHlwZW9mIHBhcmVudC5kb2N1bWVudCA9PSAib2JqZWN0IikNCgkgeyANCgkgCWlmIChpZSkNCgkgCQlyZXR1cm4gQWMzNjAuZ2V0RWxlbWVudEJ5SWRPck5hbWUobmFtZVN0cixwYXJlbnQpOw0KCSAgCWVsc2UgaWYgKG5zNCkNCgkgIAkJcmV0dXJuIHBhcmVudC5kb2N1bWVudC5sYXllcnNbbmFtZVN0cl07DQoJIH0NCglyZXR1cm4gbnVsbDsNCn0NCg0KDQpmdW5jdGlvbiBpbml0Um93RXZlbnQocm93T2JqKQ0Kew0KCWlmKHJvd09iaikNCgl7DQoJCXJvd09iai5vbm1vdXNlb3V0ID0gZnVuY3Rpb24oKXtyb3dNb3VzZW91dCh0aGlzLmlkKTt9Ow0KCQlyb3dPYmoub25tb3VzZW1vdmUgPSBmdW5jdGlvbigpe3Jvd01vdXNlT3Zlcih0aGlzLmlkKTt9Ow0KCQlyb3dPYmoub25jbGljayA9IGZ1bmN0aW9uKCl7aGlnaGxpZ2h0KHRoaXMuaWQpO307DQoJfQ0KfQ0KDQpmdW5jdGlvbiByb3dNb3VzZU92ZXIocm93SUQpDQp7DQoJdmFyIHJvd09iaiA9IGdldE9iamVjdChyb3dJRCk7DQoJaWYocm93T2JqKQ0KCXsNCgkJdmFyIGpxUm93ID0gJChyb3dPYmopOw0KCQlpZihqcVJvdy5oYXNDbGFzcygncm93Q2xpY2snKSB8fCBqcVJvdy5oYXNDbGFzcygncm93T3ZlcicpKQ0KCQl7DQoJCQlyZXR1cm47DQoJCX0NCgkJanFSb3cuYWRkQ2xhc3MoJ3Jvd092ZXInKTsNCgl9CQ0KfQ0KDQpmdW5jdGlvbiByb3dNb3VzZW91dChyb3dJRCkNCnsNCgl2YXIgcm93T2JqID0gZ2V0T2JqZWN0KHJvd0lEKTsNCglpZihyb3dPYmopDQoJew0KCQl2YXIganFSb3cgPSAkKHJvd09iaik7DQoJCWlmKGpxUm93Lmhhc0NsYXNzKCdyb3dDbGljaycpKSANCgkJew0KCQkJcmV0dXJuOw0KCQl9DQoJCWpxUm93LnJlbW92ZUNsYXNzKCdyb3dPdmVyJyk7DQoJfQ0KfQ0KDQpmdW5jdGlvbiBoaWdobGlnaHQocm93SUQpIHsNCglpc0NsaWNrPXRydWU7DQoJaWYocm93SUQgPT0ncm93aW5pdCcpDQoJew0KCQlyb3dJRD0icm93MSI7DQoJCWlzQ2xpY2s9ZmFsc2U7DQoJfQ0KCWVsc2UNCgl7DQoJCS8vIFlhbiBYaWFvIC0gU3VwcG9ydCBOZXRzY2FwZSBhbmQgRmlyZWZveCAoU0FOIyAwNkFDVC0wMDAwMC0wMDIzNSk6IA0KCQkvLyBPcmlnaW5hbCBjb2RlIGFzc3VtZWQgdGhhdCB3aW5kb3cuZXZlbnQgaXMgdGhlIGN1cnJlbnQgZXZlbnQuDQoJCS8vIEhvd2V2ZXIsIEZpcmVmb3ggZG9lcyBub3QgZGVmaW5lIHdpbmRvdy5ldmVudCBhdCBhbGwuIEFzIHJlc3VsdCwgd2UgbmVlZCB0byB1c2UgInRoaXMuZXZlbiIgaW5zdGVhZCBvZiAiZXZlbiIuDQoJCWlmKHRoaXMuZXZlbnQgIT1udWxsKQ0KCQl7CQ0KCQkJLy9VcGRhdGVkIGJ5IEFuZHJldyBDaGVuIDA1LzA5LzIwMDYNCgkJCS8vRm9yIHRob3NlIGxpc3QgcG9ydGxldHMgd2hpY2ggZG9uJ3QgaGF2ZSBjaGVja2JveC9yYWRpb2J1dHRvbiBjb2x1bW4NCgkJCXZhciBzcmNFbGUgPSB0aGlzLmV2ZW50LnNyY0VsZW1lbnQ7DQoJCQlpZihzcmNFbGUgIT0gbnVsbCAmJiAoc3JjRWxlLnR5cGUgPT0gImNoZWNrYm94IiB8fCBzcmNFbGUudHlwZSA9PSAicmFkaW8iIA0KCQkJCXx8IHNyY0VsZS50eXBlID09ICJ0ZXh0IiB8fCBzcmNFbGUudGFnTmFtZSA9PSAiU0VMRUNUIikpDQoJCQl7DQoJCQkgCXJldHVybiBmYWxzZTsNCgkJCX0NCgkJfQkgDQoJfQ0KCWlmKHByaW1hcnlPYmpJbmQgID09IHJvd0lEKQ0KCXsNCgkJcmV0dXJuOw0KCX0NCg0KCXVuSGlnaGxpZ2h0KCk7DQoJcm93T2JqID0gZ2V0T2JqZWN0KHJvd0lEKTsNCglsaW5rT2JqID0gZ2V0T2JqZWN0KCdsaW5rJyArIHJvd0lEKTsNCglpZihyb3dPYmogIT1udWxsKQ0KCXsJCQ0KCQkvL2hpZ2hsaWdodCB0aGUgcm93DQoJCXZhciBqcVJvdyA9ICQocm93T2JqKTsNCgkJaWYoIWpxUm93Lmhhc0NsYXNzKCdyb3dDbGljaycpKQ0KCQl7DQoJCQlqcVJvdy5hZGRDbGFzcygncm93Q2xpY2snKTsNCgkJfQ0KCQloaWdobGlnaHRlZFJvdyA9IHJvd0lEOw0KCQlpZihsaW5rT2JqICE9bnVsbCAmJiBpc0NsaWNrKQ0KCQl7DQoJCQlpZihsaW5rT2JqLnRhcmdldCAhPSBudWxsICYmIGxpbmtPYmoudGFyZ2V0Lmxlbmd0aCA+IDAgJiYgbGlua09iai50YXJnZXQgIT0gJ19zZWxmJyAmJiBsaW5rT2JqLnRhcmdldCAhPSAnX3RvcCcpDQoJCQl7DQoJCQkJDQoJCQkJdHJ5ewkJCQkJCQkJCQ0KCQkJCQlpZih0aGlzLmV2ZW50LnNyY0VsZW1lbnQubm9kZU5hbWU9PSJBIikNCgkJCQkJew0KCQkJCQkJaWYodGhpcy5ldmVudC5zcmNFbGVtZW50Lm9uY2xpY2s9PW51bGwpDQoJCQkJCQl7DQoJCQkJCQkJcmV0dXJuIDsgDQoJCQkJCQl9DQoJCQkJCX0NCgkJCQkJZWxzZSBpZih0aGlzLmV2ZW50LnNyY0VsZW1lbnQucGFyZW50RWxlbWVudC5ub2RlTmFtZT09IkEiKQ0KCQkJCQl7DQoJCQkJCQlpZih0aGlzLmV2ZW50LnNyY0VsZW1lbnQucGFyZW50RWxlbWVudC5vbmNsaWNrPT1udWxsKQ0KCQkJCQkJew0KCQkJCQkJCXJldHVybiA7IA0KCQkJCQkJfQ0KCQkJCQl9ZWxzZSBpZih0aGlzLmV2ZW50LnNyY0VsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50Lm5vZGVOYW1lPT0iQSIpDQoJCQkJCXsNCgkJCQkJCWlmKHRoaXMuZXZlbnQuc3JjRWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQub25jbGljaz09bnVsbCkNCgkJCQkJCXsNCgkJCQkJCQlyZXR1cm4gOyANCgkJCQkJCX0NCgkJCQkJfQkJCQkJDQoJCQkJfWNhdGNoKGVycm9yKQ0KCQkJCXsNCgkJCQkJLy9kb25vdGhpbmcNCgkJCQl9DQoJCQkJaWYgKGxpbmtPYmouY2xpY2spDQoJCQkJew0KCQkJCQl2YXIgYXJncyA9IGhpZ2hsaWdodC5hcmd1bWVudHM7DQoJCQkJCQ0KCQkJCQlpZihhcmdzLmxlbmd0aCA9PSAyKQ0KCQkJCQl7DQoJCQkJCQlpZihsaW5rT2JqLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PSAiYSIpDQoJCQkJCQl7Ly8NCgkJCQkJCQkvL2ZpeCBidWcgIzQyNDgzLCB0aGUgbGluayB0ZXh0IHdpbGwgaW5pdGlhbGx5IGRpc3BsYXkgd2l0aCBhIFVSTCBzdHJpbmcgaWYgaXQgaW5jbHVkZXMgdGhlIGVtYWlsIGZvcm1hdC4gIA0KCQkJCQkJCXZhciBkaXNwbGF5SFRNTCA9IGxpbmtPYmouaW5uZXJIVE1MOw0KCQkJCQkJCWxpbmtPYmouc2V0QXR0cmlidXRlKCJocmVmIixsaW5rT2JqLmdldEF0dHJpYnV0ZSgiaHJlZiIpICsgIiZhdXRvRm9jdXM9ZmFsc2UiKTsNCgkJCQkJCQlpZihkaXNwbGF5SFRNTC5pbmRleE9mKCJAIikgPiAxICkNCgkJCQkJCQl7DQoJCQkJCQkJCWxpbmtPYmouaW5uZXJIVE1MID0gZGlzcGxheUhUTUw7DQoJCQkJCQkJfQ0KCQkJCQkJfQ0KCQkJCQl9DQoJCQkJCXRyeQ0KCQkJCQl7DQoJCQkJCQkvL0ZvciBmZWF0dXJlIDEzQUNDLTAwNjk1LCBhdm9pZCBzaG93aW5nIGNvbmZpcm0gc2F2aW5nIGRpYWxvZyB0d2ljZSB3aGVuIGNsaWNrICdhJyBsaW5rIG9uIHJlY29yZCBsaXN0Lg0KCQkJCQkJdmFyIGhyZWYgPSBsaW5rT2JqLmhyZWY7DQoJCQkJCQl2YXIgdGFyZ2V0ID0gbGlua09iai50YXJnZXQ7DQoJCQkJCQl0cnkgDQoJCQkJCQl7DQoJCQkJCQkJaWYodGhpcy5ldmVudC5zcmNFbGVtZW50LmhyZWYubGVuZ3RoID4gMCAmJiB0aGlzLmV2ZW50LnNyY0VsZW1lbnQudGFyZ2V0ID09IGxpbmtPYmoudGFyZ2V0ICYmIGxpbmtPYmouaHJlZi5sZW5ndGggPiAwKQ0KCQkJCQkJCXsNCgkJCQkJCQkJbGlua09iai5ocmVmID0gIiMiOw0KCQkJCQkJCQlsaW5rT2JqLnJlbW92ZUF0dHJpYnV0ZSgidGFyZ2V0Iik7DQoJCQkJCQkJfQ0KCQkJCQkJfSBjYXRjaCAoZSkgDQoJCQkJCQl7DQoJCQkJCQkJLy8gZG8gbm90aGluZw0KCQkJCQkJfQ0KCQkJCQkJLy9QcmV2ZW50IHRoZSBkZWZhdWx0IGNsaWNrIGV2ZW50IG9uIHJlY29yZCBsaXN0IHJvdyBmb3IgbmV3IFVJDQoJCQkJCQlpZih0eXBlb2Yob2xkVUkpPT0idW5kZWZpZW5kIiB8fCBvbGRVST09bnVsbCB8fCBvbGRVSSkNCgkJCQkJCXsNCgkJCQkJCQlsaW5rT2JqLmNsaWNrKCk7DQoJCQkJCQl9DQoJCQkJCQllbHNlDQoJCQkJCQl7DQoJCQkJCQkJLy9FbmFibGUgZGVmYXVsdCBjbGljayBldmVudCBvbiBzY2hlZHVsZSBpbnNwZWN0aW9ucyBmb3IgbmV3IHVpIHdoZW4gb3BlbiBGSUQoODQwMCkgDQoJCQkJCQkJaWYobGlua09iai5nZXRBdHRyaWJ1dGUoImhpZ2hsaWdodGNsaWNrIikgPT0gInRydWUiKQ0KCQkJCQkJCXsNCgkJCQkJCQkJbGlua09iai5jbGljaygpOw0KCQkJCQkJCX0NCgkJCQkJCX0NCgkJCQkJfQ0KCQkJCQljYXRjaChlKQ0KCQkJCQl7DQoJCQkJCQkNCgkJCQkJfQ0KCQkJCQlmaW5hbGx5DQoJCQkJCXsNCgkJCQkJCXZhciBvYmpJbm5lckhUTUwgPSBsaW5rT2JqLmlubmVySFRNTDsNCgkJCQkJCWxpbmtPYmouaHJlZiA9IGhyZWY7DQoJCQkJCQlsaW5rT2JqLnRhcmdldCA9IHRhcmdldDsNCgkJCQkJCWxpbmtPYmouaW5uZXJIVE1MID0gb2JqSW5uZXJIVE1MOw0KCQkJCQl9DQoJCQkJfQkNCgkJCQllbHNlDQoJCQkJew0KCQkJCQlNb3ppbGxhTGlua0NsaWNrKGxpbmtPYmopOw0KCQkJCX0JDQoJCQl9DQoJCX0NCgl9DQp9DQoNCmZ1bmN0aW9uIHVuSGlnaGxpZ2h0KCkgew0KCWlmIChoaWdobGlnaHRlZFJvdyAhPSAnJykgew0KCQlyb3dPYmogPSBnZXRPYmplY3QoaGlnaGxpZ2h0ZWRSb3cpOw0KCQlpZiAocm93T2JqKQ0KCQl7DQoJCQkkKHJvd09iaikucmVtb3ZlQ2xhc3MoJ3Jvd092ZXInKS5yZW1vdmVDbGFzcygncm93Q2xpY2snKTsNCgkJfQ0KCX0NCn0NCg0KLyoqVGhlIGVuZCBvZiBoaWdoTGlnaHQgZnVuY3Rpb24gZm9yIHRhYmxlIHJvd3MqKioqKiovDQoNCmZ1bmN0aW9uIGdvRmlyc3RFbnRyeVVSTChmcmFtZU5hbWUpDQp7DQoJdmFyIGZyYW1lT2JqZWN0ID0gd2luZG93LnBhcmVudC5vcGVuZXIucGFyZW50LmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZyYW1lTmFtZSk7DQoJaWYoIWZyYW1lT2JqZWN0KQ0KCXsNCgkJdmFyIGVzID0gd2luZG93LnBhcmVudC5vcGVuZXIucGFyZW50LmRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKGZyYW1lTmFtZSk7DQoJCWlmKGVzKQ0KCQkJZnJhbWVPYmplY3QgPSBlc1swXTsgDQoJfQ0KCQkNCglpZiAoZnJhbWVPYmplY3QgIT0gbnVsbCkNCgl7CQ0KCQl2YXIgZnJhbWVEb2N1bWVudCA9IGZyYW1lT2JqZWN0LmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7DQoJCXZhciBtb2RlVmFsdWUgPSBmcmFtZURvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtb2RlTmFtZSIpLnZhbHVlOw0KCQl2YXIgZG9jdW1lbnRMb2MgPSBmcmFtZURvY3VtZW50LmxvY2F0aW9uOw0KCQl2YXIgZmlyc3RFbnRyeVVybCA9IGRvY3VtZW50TG9jLnByb3RvY29sICsgIi8vIiArIGRvY3VtZW50TG9jLmhvc3Q7DQoJCXZhciBtb2R1bGUgPSBmcmFtZURvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtb2R1bGUiKS52YWx1ZTsNCgkJdmFyIHJlZnJlc2hVcmwgPSBudWxsOw0KCQkNCgkJaWYoZnJhbWVEb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicmVmcmVzaFVybEZvckNhcENvbmRpdGlvbiIpKQ0KCQl7DQoJCQlyZWZyZXNoVXJsID0gZnJhbWVEb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicmVmcmVzaFVybEZvckNhcENvbmRpdGlvbiIpLnZhbHVlOwkJCQ0KCQl9DQoJCQ0KCQlpZihyZWZyZXNoVXJsICYmIHJlZnJlc2hVcmwgIT0gIiIpDQoJCXsNCgkJCWZpcnN0RW50cnlVcmwgPSByZWZyZXNoVXJsOw0KCQl9DQoJCWVsc2UgaWYobW9kZVZhbHVlICYmIG1vZGVWYWx1ZSAhPSAiIikNCgkJew0KCQkJZmlyc3RFbnRyeVVybCA9IGZpcnN0RW50cnlVcmwgKyBmcmFtZURvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ2YWx1ZShDdXJyZW50RW50cnlVUkwpIikudmFsdWU7DQoJCX1lbHNlDQoJCXsNCgkJCWZpcnN0RW50cnlVcmwgPSBmaXJzdEVudHJ5VXJsICsgZnJhbWVEb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidmFsdWUoRmlyc3RFbnRyeVVSTCkiKS52YWx1ZTsNCgkJfQ0KDQoJCWlmKG1vZHVsZSAhPSAnJykNCgkJew0KCQkJZmlyc3RFbnRyeVVybCA9IGFwcGVuZFVybFBhcmFtKGZpcnN0RW50cnlVcmwsICdtb2R1bGUnLCBtb2R1bGUpOw0KCQl9DQoJCWZyYW1lRG9jdW1lbnQubG9jYXRpb24uaHJlZiA9IGZpcnN0RW50cnlVcmw7CQ0KCX0NCn0NCg0KZnVuY3Rpb24gYXBwZW5kVXJsUGFyYW0odXJsLHBhcmFtTmFtZSwgcGFyYW1WYWx1ZSkNCnsNCglpZih1cmwuaW5kZXhPZihwYXJhbU5hbWUgKyAiPSIpPDApDQoJew0KCQlpZih1cmwuaW5kZXhPZigiPyIpPDApDQoJCXsNCgkJCXVybCA9IHVybCArICI/IjsNCgkJfQ0KCQllbHNlDQoJCXsNCgkJCXVybCA9IHVybCArICImIjsNCgkJfQ0KCQl1cmwgPSB1cmwgKyBwYXJhbU5hbWUgKyAiPSIgKyBwYXJhbVZhbHVlOw0KCX0NCglyZXR1cm4gdXJsOw0KfQ0KDQovKg0KICogb3BlbiBhIGNoaWxkIHdpbmRvdyB3aGljaCBjYW4gcGFzcyBTU08gYXV0aGVudGljYXRlIGV2ZW4gaXQgb3BlbiBmcm9tIGEgbW9kZWwgd2luZG93DQogKi8NCmZ1bmN0aW9uIG9wZW5TdWJXaW5kb3coc2V0dGluZ3MgLCB0YXJnZXRVUkwsbmFtZSxhY0F1dGgpDQp7DQoJdGFyZ2V0VVJMPWVuY29kZVVSSUNvbXBvbmVudCh0YXJnZXRVUkwpOwkNCgl2YXIganNlZXNpb25JRCA9IGVuY29kZVVSSUNvbXBvbmVudChnZXRKU2Vzc2lvbklEKCkpOw0KCXZhciBuZXd3aW4gPSB3aW5kb3cub3BlbigiL3BvcnRsZXRzL2RhdGFwaWNrZXIvcG9wdXBXaW5kb3cuanNwPyIrKGFjQXV0aD8gIkFDQXV0aD0iK2FjQXV0aCsiJiI6IiIpKyJ0YXJnZXRVUkw9Iit0YXJnZXRVUkwrIiZqc2Vzc2lvbmlkPSIranNlZXNpb25JRCxuYW1lLHNldHRpbmdzKTsJCQ0KIAlpZiggbmV3d2luICE9bnVsbCkNCiAJew0KIAkJbmV3d2luLm9wZW5lcj13aW5kb3c7DQogCSAJbmV3d2luLmZvY3VzKCk7DQogCX0NCgkNCiAJcmV0dXJuIGZhbHNlOyANCn0NCg0KDQoNCg0KDQoNCi8qKnN0YXJ0IGRlYWwgd2l0aCB0b2tlbiovDQoNCnZhciB0b2tlbiA9IHsNCgkJDQoJLy90b2tlbiBlbGVtZW50IG5hbWUNCgl0b2tlbkhpZGVOYW1lIDogJ0NTUkZfUkVRX1BBUkFNJywNCg0KCXVybCA6ICIvcG9ydGxldHMvaTE4bi9hamF4LmRvP21vZGU9Z2V0Q1NSRlRva2VuIiwNCgkNCgkvL2ZpbHRlciBzdWZmaXgNCglwYXR0ZXJuIDogbmV3IFJlZ0V4cCgnKGpzfGNzc3xqcGd8Z2lmfGVtcHR5LmpzcHxibGFuay5qc3ApJCcsICdpJyksDQoJDQoJYXBwZW5kVG9rZW4gOiBmdW5jdGlvbihuZXdUb2tlbikNCgl7DQoJCWlmICghdGhpcy5jaGVja0lzQ29uZmlnVG9rZW4oKSkNCgkJew0KCQkJcmV0dXJuOw0KCQl9DQoNCgkJdmFyIHRva2VuT2JqID0gbmV3IEFjMzYwLnF1ZXJ5KHRva2VuLnRva2VuSGlkZU5hbWUpOw0KCQkgaWYoQWMzNjAudmFsaWRhdG9yLmlzRW1wdHkodG9rZW5PYmopIHx8IEFjMzYwLnZhbGlkYXRvci5pc0VtcHR5KG5ld1Rva2VuKSkNCgkJCSByZXR1cm47DQoJCWlmIChBYzM2MC5pbmRleE9mQXJyYXkodG9rZW5PYmoudmFsdWUuc3BsaXQoIiwiKSwgbmV3VG9rZW4pID4gLTEpDQoJCQlyZXR1cm47DQoJCWlmIChBYzM2MC52YWxpZGF0b3IuaXNFbXB0eSh0b2tlbk9iai52YWx1ZSkpDQoJCXsNCgkJCXRva2VuT2JqLnZhbHVlID0gbmV3VG9rZW47DQoJCQl0b2tlbk9iai5kZWZhdWx0VmFsdWUgPSBuZXdUb2tlbjsNCgkJfQ0KCQllbHNlDQoJCXsNCgkJCXRva2VuT2JqLnZhbHVlID0gdG9rZW5PYmoudmFsdWUgKyAiLCIgKyBuZXdUb2tlbjsNCgkJCXRva2VuT2JqLmRlZmF1bHRWYWx1ZSA9IHRva2VuT2JqLnZhbHVlOw0KCQl9DQoJfSwNCgkNCglkZWFsV2l0aFVybCA6IGZ1bmN0aW9uKHVybCwgbWV0aG9kKQ0KCXsNCiAgICAJaWYgKCF0aGlzLmNoZWNrSXNDb25maWdUb2tlbigpKQ0KICAgIAl7DQogICAgCQlyZXR1cm47DQogICAgCX0NCg0KCQlpZiAoIUFjMzYwLnZhbGlkYXRvci5pc0VtcHR5KG1ldGhvZCkgJiYgbWV0aG9kLnRvTG93ZXJDYXNlKCkgIT0gInBvc3QiKQ0KCQl7DQoJCQlyZXR1cm4gdXJsOw0KCQl9DQoJCQ0KCQlpZiAoQWMzNjAudmFsaWRhdG9yLmlzT2JqZWN0KHVybCkpDQoJCXsNCgkJCXVybCA9IHVybC50b1N0cmluZygpOw0KCQl9DQoJCWlmICh0aGlzLnBhdHRlcm4udGVzdCh1cmwpKQ0KCQl7DQoJCQlyZXR1cm4gdXJsOw0KCQl9DQoJCQkJDQoJCXZhciB0b2tlblZhbHVlID0gdGhpcy5nZXRUb2tlbkZyb21Eb2N1bWVudCgpOw0KCQkNCgkJaWYgKCFBYzM2MC52YWxpZGF0b3IuaXNFbXB0eSh0b2tlblZhbHVlKSkNCgkJew0KCQkJaWYodXJsLmluZGV4T2YoJz8nKSAhPSAtMSkgew0KCQkJCXVybCA9IHVybCArICcmJyArICdDU1JGX1JFUV9QQVJBTT0nICsgdG9rZW5WYWx1ZTsNCgkJCX0gZWxzZSB7DQoJCQkJdXJsID0gdXJsICsgJz8nICsgJ0NTUkZfUkVRX1BBUkFNPScgKyB0b2tlblZhbHVlOw0KCQkJfQ0KCQkgfQ0KCQkgcmV0dXJuIHVybDsNCgl9LA0KCQ0KCWdldFRva2VuRnJvbURvY3VtZW50IDogZnVuY3Rpb24oaXNUb2tlblJlcXVlc3QpDQoJew0KICAgIAlpZiAoIXRoaXMuY2hlY2tJc0NvbmZpZ1Rva2VuKCkpDQogICAgCXsNCiAgICAJCXJldHVybjsNCiAgICAJfQ0KDQoJCXZhciB0b2tlbk9iaiA9IEFjMzYwLnF1ZXJ5KHRoaXMudG9rZW5IaWRlTmFtZSk7DQoJCWlmKEFjMzYwLnZhbGlkYXRvci5pc0VtcHR5KHRva2VuT2JqKSkNCgkJCXJldHVybiAiIjsNCgkJDQoJCXZhciB0b2tlblZhbHVlOw0KCQlpZiAoQWMzNjAudmFsaWRhdG9yLmlzRW1wdHkodG9rZW5PYmoudmFsdWUpKQ0KCQl7DQoJCQl0b2tlblZhbHVlID0gdG9rZW5PYmouZGVmYXVsdFZhbHVlOw0KCQkJdG9rZW5PYmoudmFsdWUgPSB0b2tlblZhbHVlOyANCgkJfQ0KCQllbHNlDQoJCXsNCgkJCXRva2VuVmFsdWUgPSB0b2tlbk9iai52YWx1ZTsNCgkJfQ0KCQkNCgkJdmFyIHZhbHVlcyA9ICB0b2tlblZhbHVlLnNwbGl0KCcsJyk7DQoJCQ0KCQl2YXIgdG9rZW4gPSAiIjsNCgkJaWYgKCFBYzM2MC52YWxpZGF0b3IuaXNFbXB0eShpc1Rva2VuUmVxdWVzdCkpDQoJCXsNCgkJCXRva2VuID0gdmFsdWVzLnBvcCgpOwkJCQ0KCQl9DQoJCWVsc2UNCgkJew0KCQkJdG9rZW4gPSB2YWx1ZXMuc2hpZnQoKTsNCgkJfQ0KCQl2YXIgdG1wVmFsdWUgPSB2YWx1ZXMuam9pbignLCcpOw0KCQl0b2tlbk9iai52YWx1ZSA9IHRtcFZhbHVlOw0KCQl0b2tlbk9iai5kZWZhdWx0VmFsdWUgPSB0bXBWYWx1ZTsNCgkJcmV0dXJuIHRva2VuOw0KCX0sDQoJDQoJY2FsbGJhY2sgOiBmdW5jdGlvbihyZXNwb25zZVR4dCkNCgl7DQoJCXZhciB0b2tlbk9iaiA9IG5ldyBBYzM2MC5xdWVyeSh0b2tlbi50b2tlbkhpZGVOYW1lKTsNCgkJaWYgKEFjMzYwLnZhbGlkYXRvci5pc0VtcHR5KHJlc3BvbnNlVHh0KSB8fCBBYzM2MC52YWxpZGF0b3IuaXNFbXB0eSh0b2tlbk9iaikpDQoJCQlyZXR1cm47DQoJCQ0KCQl2YXIgdG9rZW5KU09OID0gQmFzZUpTLnN0clRvSnNvbihyZXNwb25zZVR4dCk7DQoJCXRva2VuT2JqLnZhbHVlID0gdG9rZW5KU09OLkNTUkZfVG9rZW47CQ0KCX0sDQoJDQoJb2J0YWluVG9rZW4gOiBmdW5jdGlvbihjYWxsYmFjaykNCgl7DQogICAgCWlmICghdGhpcy5jaGVja0lzQ29uZmlnVG9rZW4oKSkNCiAgICAJew0KICAgIAkJcmV0dXJuOw0KICAgIAl9DQoNCgkJdmFyIHRva2VuVmFsdWUgPSB0aGlzLmdldFRva2VuRnJvbURvY3VtZW50KHRydWUpOw0KCQlpZiAoQWMzNjAudmFsaWRhdG9yLmlzRW1wdHkodG9rZW5WYWx1ZSkpDQoJCQlyZXR1cm47DQoJCQkNCgkgICAgdmFyIGFqYXggPSBuZXcgQWMzNjAuYWpheCgpOw0KCSAgICB2YXIgdXJsID0gdGhpcy51cmwgKyAnJicgKyAnQ1NSRl9SRVFfUEFSQU09JyArIHRva2VuVmFsdWU7DQoJICAgIGFqYXguc2VuZCh1cmwsIG51bGwsIGNhbGxiYWNrIHx8IHRoaXMuY2FsbGJhY2spOw0KCX0sDQoJDQoJd3JpdGVUb2tlbiA6IGZ1bmN0aW9uKHJlcSkNCgl7DQogICAgCWlmICghdGhpcy5jaGVja0lzQ29uZmlnVG9rZW4oKSkNCiAgICAJew0KICAgIAkJcmV0dXJuOw0KICAgIAl9DQoNCgkJdHJ5IHsNCiAgICAgICAgICB2YXIgcmVhZHlTdGF0ZSA9IHJlcS5yZWFkeVN0YXRlOw0KICAgICAgICAgIGlmIChyZWFkeVN0YXRlICE9IDQpIHsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2ggKGV4KSB7DQogICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIHZhciBzdGF0dXMgPSByZXEuc3RhdHVzOyAvLyBjYXVzZXMgTW96aWxsYSB0byBleGNlcHQgb24gcGFnZSBtb3Zlcw0KICAgICAgICANCiAgICAgICAgaWYgKHN0YXR1cyAhPSAyMDApIA0KICAgICAgICAJcmV0dXJuOw0KICAgICAgICAJDQogICAgICAgIHZhciBuZXdUb2tlbiA9IHJlcS5nZXRSZXNwb25zZUhlYWRlcigidG9rZW4iKTsNCiAgICAgICANCiAgICAgICBpZiAoIUFjMzYwLnZhbGlkYXRvci5pc0VtcHR5KG5ld1Rva2VuKSkNCiAgICAgICB7DQogICAgCSAgIHRoaXMuYXBwZW5kVG9rZW4obmV3VG9rZW4pOw0KICAgICAgIH0NCiAgICAgICB9LA0KCQ0KCXNldFRva2VuSW5Gb3JtIDogZnVuY3Rpb24obmV3VG9rZW4pDQoJew0KICAgIAlpZiAoIXRoaXMuY2hlY2tJc0NvbmZpZ1Rva2VuKCkpDQogICAgCXsNCiAgICAJCXJldHVybjsNCiAgICAJfQ0KICAgIAkgDQoJCXZhciB0b2tlbk9iaiA9IGRvY3VtZW50LmZvcm1zWzBdLkNTUkZfUkVRX1BBUkFNOw0KCQlpZiAoQWMzNjAudmFsaWRhdG9yLmlzRW1wdHkodG9rZW5PYmopKQ0KCQkJcmV0dXJuOw0KCQkNCgkJDQoJCWlmIChBYzM2MC52YWxpZGF0b3IuaXNFbXB0eShuZXdUb2tlbikpDQoJCXsNCgkJCW5ld1Rva2VuID0gdGhpcy5nZXRUb2tlbkZyb21Eb2N1bWVudCgpOw0KCQl9DQoJCQ0KCQl2YXIgb2xkVG9rZW5WYWx1ZSA9IHRva2VuT2JqLnZhbHVlOw0KCQlpZiAoQWMzNjAudmFsaWRhdG9yLmlzRW1wdHkob2xkVG9rZW5WYWx1ZSkpDQoJCXsNCgkJCWRvY3VtZW50LmZvcm1zWzBdLkNTUkZfUkVRX1BBUkFNLnZhbHVlID0gbmV3VG9rZW47DQoJCX0NCgkJZWxzZQ0KCQl7DQoJCQlkb2N1bWVudC5mb3Jtc1swXS5DU1JGX1JFUV9QQVJBTS52YWx1ZSA9IG9sZFRva2VuVmFsdWUrIiwiK25ld1Rva2VuOw0KCQl9DQoJfSwNCgkNCgljaGVja0lzQ29uZmlnVG9rZW4gOiBmdW5jdGlvbigpDQoJew0KCQlpZiAoIUFjMzYwLnZhbGlkYXRvci5pc0VtcHR5KHByb2ZpbGUpICYmIHByb2ZpbGUuZW5hYmxlU2VjdXJpdHlEZWZlbnNlKQ0KCQl7DQoJCQlyZXR1cm4gdHJ1ZTsNCgkJfQ0KCQllbHNlDQoJCXsNCgkJCXJldHVybiBmYWxzZTsNCgkJfQ0KCX0NCn0NCi8qKiBlbmQgZGVhbCB3aXRoIHRva2VuKi8NCg0KLyoqIFN0YXJ0IGRlYWwgd2l0aCBlbmNvZGUgbWFzaydzIHZhbHVlIGZvciBzc24sIGZlaW4gd2l0aCBiYXNlNjQgKiovDQp2YXIgZW5jb2RlTWFzayA9IHsNCgkJDQoJCS8qKiBhZGQgdGhlIGVuY29kZSBtYXNrIGZ1bmN0aW9uIGZvciBkb2N1bWVudCAqKi8NCgkJYWRkRW5jb2RlTWFza0Z1biA6IGZ1bmN0aW9uKCkNCgkJew0KCQkJaWYodHlwZW9mKCQpICE9ICd1bmRlZmluZWQnICYmICQoZG9jdW1lbnQpICE9IG51bGwpDQoJCQl7DQoJCQkJJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtlbmNvZGVNYXNrLmVuY29kZU1hc2tWYWx1ZTRTdWJtaXQoKTt9KTsNCgkJCX0NCgkJfSwNCgkJDQoJCS8qKiB1c2UgdGhlIGJhc2U2NCBlbmNvZGUgdGhlIG1hc2sgZmllbGQgbGlrZSBTU04sIEZFSU4gKiovDQoJCWVuY29kZU1hc2tWYWx1ZTRTdWJtaXQgOiBmdW5jdGlvbigpDQoJCXsNCgkJCWlmKHR5cGVvZihoYXNFeGVjdXRlRW5jb2RlTWFzaykgIT0gJ3VuZGVmaW5lZCcgJiYgaGFzRXhlY3V0ZUVuY29kZU1hc2spDQoJCQl7DQoJCQkJcmV0dXJuOw0KCQkJfQ0KCQkJDQoJCQl2YXIgbmVlZEVuY29kZU1hc2tFbGVtcyA9ICQoIltuZWVkRW5jb2RlTWFzaz0ndHJ1ZSddIik7DQoJCQlpZihuZWVkRW5jb2RlTWFza0VsZW1zID09IG51bGwgfHwgbmVlZEVuY29kZU1hc2tFbGVtcy5sZW5ndGggPT0gMCkNCgkJCXsNCgkJCQlyZXR1cm47DQoJCQl9DQoJCQkNCgkJCWlmKHR5cGVvZihCYXNlNjQpID09ICd1bmRlZmluZWQnIHx8IEJhc2U2NCA9PSBudWxsKQ0KCQkJew0KCQkJCWVuY29kZU1hc2suYWRkSmF2YVNjcmlwdEZpbGUoJy9wb3J0bGV0cy9mcmFtZXdvcmsvaW5jbHVkZXMvamF2YXNjcmlwdC9iYXNlNjQuanMnLA0KCQkJCQkJZW5jb2RlTWFzay5yZXBsYWNlSW50ZXJjZXB0ZXJGdW5jdGlvbik7DQoJCQl9DQoJCQllbHNlDQoJCQl7DQoJCQkJZW5jb2RlTWFzay5yZXBsYWNlSW50ZXJjZXB0ZXJGdW5jdGlvbigpOw0KCQkJfQ0KCQl9LA0KCQkNCgkJLyoqIHJlcGxhY2UgdGhlIGludGVyY2VwdGVyU3VibWl0IGZ1bmN0aW9uIGZvciBlbmNvZGUgU1NOLCBGRUlOICoqLw0KCQlyZXBsYWNlSW50ZXJjZXB0ZXJGdW5jdGlvbiA6IGZ1bmN0aW9uKCkNCgkJew0KCQkJaGFzRXhlY3V0ZUVuY29kZU1hc2sgPSB0cnVlOw0KCQkJdmFyIG9sZEludGVyY2VwdGVyU3VibWl0ID0gd2luZG93LmludGVyY2VwdGVyU3VibWl0Ow0KCQkJd2luZG93LmludGVyY2VwdGVyU3VibWl0ID0gZnVuY3Rpb24oYSkNCgkJCXsNCgkJCQl2YXIgaW50ZXJjZXB0ZXJSZXN1bHQgPSBvbGRJbnRlcmNlcHRlclN1Ym1pdChhKTsNCgkJCQkNCgkJCQlpZihpbnRlcmNlcHRlclJlc3VsdCkNCgkJCQl7DQoJCQkJCXZhciBuZWVkRW5jb2RlTWFza3MgPSAkKCJbbmVlZEVuY29kZU1hc2s9J3RydWUnXSIpOw0KCQkJCQlmb3IgKHZhciBpID0gMDsgaSA8IG5lZWRFbmNvZGVNYXNrcy5sZW5ndGg7IGkrKykNCgkJCQkJew0KCQkJCQkJaWYobmVlZEVuY29kZU1hc2tzW2ldLnZhbHVlICE9IG51bGwgJiYgbmVlZEVuY29kZU1hc2tzW2ldLnZhbHVlICE9ICIiDQoJCQkJCQkJCSYmIG5lZWRFbmNvZGVNYXNrc1tpXS52YWx1ZS5pbmRleE9mKCJfYl9hX3NfZV82NF9fXyIpIDwgMCkNCgkJCQkJCXsNCgkJCQkJCQluZWVkRW5jb2RlTWFza3NbaV0udmFsdWUgPSBCYXNlNjQuZW5jb2RlKG5lZWRFbmNvZGVNYXNrc1tpXS52YWx1ZSk7DQoJCQkJCQl9DQoJCQkJCX0NCgkJCQl9DQoJCQkJDQoJCQkJcmV0dXJuIGludGVyY2VwdGVyUmVzdWx0Ow0KCQkJfQ0KCQl9LA0KCQkNCgkJYWRkSmF2YVNjcmlwdEZpbGUgOiBmdW5jdGlvbihzcmMsIGNhbGxiYWNrKQ0KCQl7DQoJCQl2YXIganNFbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7IA0KCQkJanNFbGVtLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JzsgDQoJCQlqc0VsZW0uc3JjID0gc3JjOw0KCQkJaWYoanNFbGVtLnJlYWR5U3RhdGUpDQoJCQl7DQoJCQkJanNFbGVtLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkNCgkJCQl7DQoJCQkJCWlmIChqc0VsZW0ucmVhZHlTdGF0ZSA9PSAibG9hZGVkIiB8fCBqc0VsZW0ucmVhZHlTdGF0ZSA9PSAiY29tcGxldGUiKQ0KCQkJCQl7DQoJCQkJCQljYWxsYmFjaygpOw0KCQkJCQl9DQoJCQkJfTsNCgkJCX0NCgkJCWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0uYXBwZW5kQ2hpbGQoanNFbGVtKTsNCgkJfQ0KfQ0KLyoqIEVuZCBkZWFsIHdpdGggZW5jb2RlIG1hc2sncyB2YWx1ZSBmb3Igc3NuLCBmZWluIHdpdGggYmFzZTY0ICoqLw0K</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
      <TcpPackets>
        <PacketInfo time="1030891781" offset="0" length="599" />
        <PacketInfo time="1030891781" offset="599" length="13912" />
      </TcpPackets>
    </HTTPResponse>
  </HTTPTask>
</HTTPSnapshot>